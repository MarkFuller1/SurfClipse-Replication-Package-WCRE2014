<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<style type="text/css">
@import url( /templates/default/mobile/styles/mobile.css?1386831159603 ) ;
</style>

<meta name="viewport" content="width = 320" />

<title>SAXException: Invalid byte 2 of 2-byte UTF-8 sequence (XML forum at JavaRanch)</title>
<link rel="canonical" href="http://www.coderanch.com/t/129569/XML/SAXException-Invalid-byte-byte-UTF"/>
<link rel="alternate" media="handheld" href="http://www.coderanch.com/mobile/t/129569/XML/SAXException-Invalid-byte-byte-UTF?foo=a">
</head>
<body class="en_US">

<a name="top"></a>
<table cellspacing="0" cellpadding="0" border="0">
    <tr>
        <td align="center">
                <a href="/forums/list"><img
                src="/templates/default/mobile/images/mobile-moose.gif"
                vspace="1" border="0" alt="[Logo]" width="100" height="100" /></a>
		</td>
        <td class="logo" valign="center">
          A friendly place for programming greenhorns!
        <a href="#bottom"><img src="/templates/default/mobile/images/down_arrow.gif" width="10" height="10" alt="Jump to bottom of page" /></a>
        </td>
    </tr>
</table>

<p>
  <a id="register" class="mainmenu" href="/forums/user/insert">Register</a> /
  <a id="login" class="mainmenu" href="/forums/user/login">Login</a>
</p>
<a class="maintitle" href="http://www.coderanch.com/forums">Java Forums</a>



&raquo; <a class="maintitle" href="/forums/c/2/">Engineering</a> &raquo;
<a class="maintitle" href="/forums/f-31/XML">XML and Related Technologies</a>
<div class="subject">SAXException: Invalid byte 2 of 2-byte UTF-8 sequence</div>


  
  <div class="mobilePostBody">
  

  Post by: P Lavti, Ranch Hand<br />
  on <span class="lastPostTime">Jan 25, 2008 14:20:00</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">Hi,<br />  <br /> I am trying to parse an XML file using SAX parser which contains Swedish character "��� ��� �".<br /> I have used the UTF-8 encoding in the XML document.<br /> &lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br />  <br /> But the parser gives me the exception:<br /> <textarea name="code" class="java" cols="60" rows="10">
org.xml.sax.SAXParseException: Invalid byte 2 of 3-byte UTF-8 sequence.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:236)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:215)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:386)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:316)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1810)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:375)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:311)
        at Echo01.main(Echo01.java:59)
</textarea><br />  <br /> If I use the encoding iso-8859-1, it works fine.<br /> &lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;<br />  <br /> Can anybody help me in understanding why it doesn't work with UTF-8 encoding.<br /> <b>Is there any way I can parse my XML, using SAX parser with UTF-8 encoding.</b><br />  <br /> Thanks!<br /> [ January 25, 2008: Message edited by: P Lavti ]<br /> </span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: Paul Clapham, Bartender<br />
  on <span class="lastPostTime">Jan 25, 2008 14:40:00</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">&nbsp;<blockquote class="uncited">
			<div>Originally posted by P Lavti:<br /> I have used the UTF-8 encoding in the XML document.<br /> &lt;?xml version="1.0" encoding="UTF-8" ?&gt;</div>
		</blockquote>Just doing that does not cause the file to be encoded in UTF-8. You actually have to save it out of your text editor, or whatever is creating the file, in UTF-8. You didn't do that.<br /> [ January 25, 2008: Message edited by: Paul Clapham ]<br /> </span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: P Lavti, Ranch Hand<br />
  on <span class="lastPostTime">Jan 25, 2008 14:59:00</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">The file is created at run time. How can I create a file in java which understand UTF-8 chars.<br />  <br /> One more thing, If I change the encoding to iso-8859-1 it works fine.</span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: Paul Clapham, Bartender<br />
  on <span class="lastPostTime">Jan 25, 2008 15:02:00</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody"><textarea name="code" class="java" cols="60" rows="10">Writer w = new OutputStreamWriter(new FileOutputStream(filename), "UTF-8");</textarea></span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: P Lavti, Ranch Hand<br />
  on <span class="lastPostTime">Jan 25, 2008 15:11:00</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">Ohh.. I got it now!!!<br />  <br /> For my testing I was creating the file in windows.. instead of creating at run time..  <img src="http://cache-www.coderanch.com/images/smilies/jr-banghead.gif" border="0"> <br />  <br /> After creating it run time.. it worked!!!   <img src="http://cache-www.coderanch.com/images/smilies/jr-icon_jumping.gif" border="0"> <br />  <br /> Thanka ton!!!</span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: John Jai, Bartender<br />
  on <span class="lastPostTime">Jun 07, 2011 08:13:10</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">Hi Paul,
<br /> 
<br /> I am receiving the same error -&gt; org.xml.sax.SAXParseException: Invalid byte 1 of 1-byte UTF-8 sequence.
<br /> 
<br /> But the error is popping @ a specific line # 17850 which has the content -&gt;    &lt;Name&gt;TITLE II  COMMUNITY BENEFIT FUND&lt;/Name&gt;
<br /> 
<br /> Can there be any wrong in the given text for UTF-8 conversion or that the document was not rightly encoded with UTF-8? 
<br /> 
<br /> If the document was not created with UTF-8 why does it errors only at a particular line parsing after nerly 10000 lines of the doc?
<br /> 
<br /> Thanks,
<br /> John</span>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: John Jai, Bartender<br />
  on <span class="lastPostTime">Jun 07, 2011 08:57:01</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">Hi,
<br /> 
<br /> Sorry for my stupid question. When i viewed through a Difference Viewer it showed me a special symbol that was actually present after the numerals (II & III).
<br /> 
<br /> I am attaching the screen shot. But I don't know why the special symbol looks like white space rather than showing up something weird.
<br /> 
<br /> Thank you!
<br /> John</span>
    <div class=".posttext-attachmentseparator"></div>

            <div class="imageAttachment">
                <div>diff2.JPG</div>
                    <a href="/t/129569/a/2276/diff2.JPG"><img class="aligncenter"
                                                                                          src="/t/129569/a/2276/thumb-diff2.JPG"
                                                                                          alt="[Thumbnail for diff2.JPG]" title="Filename: diff2.JPG&#10;Description: "/></a>
            </div>
    </div>
 <br />



  
  <div class="mobilePostBody">
  

  Post by: pardeephotmail kumar, Greenhorn<br />
  on <span class="lastPostTime">Apr 16, 2013 04:00:18</span>
  


    
  </div>
  
  
    <div class="mobilePostText">
                        
        <span class="postbody">hi John Jai,
<br /> 
<br /> You are not able to see the special character because the editor,terminal,gedit tools etc doesn't support that character.
<br /> 
<br /> Another way to handle the same exception what I found is
<br /> 
<br /> new String(bytes,"ISO-8859-1").getBytes("UTF-16");
<br /> 
<br /> If your contents are giving the SAXException: Invalid byte 2 of 2-byte UTF-8 sequence.
<br /> </span>
    </div>
 <br />



<br />


               <input type="button" value="Reply" onclick="location.href='/forums/posts/reply/0/129569'" />
	

    <input type="button" value="New Topic" onclick="location.href='/jforum?module=posts&amp;action=insert&amp;forum_id=31'" />






<br /><br />


<br />

<div class="gensmall center">
All times above are in ranch (not your local) time.<br />
The current ranch time is <br />
<span class="mobileLabel">Dec 13, 2013 17:12:05</span>.
</div>
<br />
<div>
  <a id="search" href="/forums/search/filters/31"><span class="mobileLabel">Search</span></a>
  |
<a href="/forums/recentTopics/list"><span class="mobileLabel">Recent Topics</span></a>
</div>

 <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ?  "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
 <script type="text/javascript">
    if (typeof _gat !== "undefined") {
        var pageTracker = _gat._getTracker("UA-2371260-2");
        pageTracker._trackPageview();

        dt = new Date();
        pageTracker._setVar("hour: " + dt.getHours());
    }
</script>

<br />
<div>Copyright &copy; 1998-2013 <a href="http://www.javaranch.com/paul-wheaton.jsp">Paul Wheaton</a></div>
<br />
<a name="bottom"></a>
<a href="#top"><img src="/templates/default/mobile/images/up_arrow.gif" width="10" height="10" alt="Jump to top of page" /></a>
<br />
<a href="http://www.coderanch.com/t/129569/XML/SAXException-Invalid-byte-byte-UTF?nonMobile=true">Or visit our non-mobile (full) site</a>
</body>
</html>
