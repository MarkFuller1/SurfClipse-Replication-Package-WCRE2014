<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"><![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
    <head>
        
        <meta charset="utf-8">
        <!--SourceForge.net: Find and Build Open Source Software-->
        <!--Copyright (c) 1999-2013 SourceForge, Inc. All rights reserved.-->
        <!-- Create Server: sfs-web-1 -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="The archive-crawler project is building Heritrix: a flexible, extensible, robust, and scalable web crawler capable of fetching, archiving, and analyzing the full diversity and breadth of internet-accesible content." />
        <meta name="keywords" content="Heritrix: Internet Archive Web Crawler, Library, WWW/HTTP, Archiving, Open Source, Development, Community, Source Code, Downloads, Software" />
                <title>SourceForge.net: Heritrix: Internet Archive Web Crawler: archive-crawler-cvs</title>        <link href='//fonts.googleapis.com/css?family=Ubuntu:regular,bold' rel='stylesheet' type='text/css'>
                <style type="text/css">
            @font-face {
                font-family: "Pictos";
                src: url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.eot');
                src: local("â˜º"), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.woff') format('woff'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.svg') format('svg');
            }
            #site-header .logo span {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/logo.png");
            }
            #site-footer .wrapper {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/sf-footer-logo.png") !important;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/style.php?secure=0&amp;1385768281" media="all" />
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/global.php?secure=0&amp;1385768281" media="all" />
        
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/neotheme/sfx.css?1385768281" media="all" />
                       <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/phoneix/table.php?secure=0&amp;1385768281" media="all" />
                        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/droppy.php?secure=0&amp;1385768281" media="all" />
                                        <!--   -->
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/modernizr.custom.90514.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery-1.3.2.min.js"></script>
        <script type="text/javascript">
            
                jQuery.noConflict();
            
        </script>

        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.cookie.js"></script>
                        <script type='text/javascript'>
          jQuery(function() {
            jQuery('#fad19 p, .project_summary .downloadbar, .vertical_widget, .horizontal_widget').wrap('<div class="sc"><div class="l1"><div class="l2"><div class="l3"><div class="l4"></div></div></div></div></div>');
          });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.droppy.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sylvester.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/pb.transformie.js"></script>
        <script type='text/javascript'>
            jQuery(function(){
                jQuery('.b-hornav > li:last-child').addClass('last');
                jQuery('.b-hornav > li').each(function() {
                    jQuery('li[class!=disabled]', this).eq(0).addClass('first');
                });
                jQuery('.b-hornav').droppy({speed:0, delay:0});
            });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/c_jquerytabs.js"></script>

        <script type="text/javascript">
        
            jQuery(function(){
                jQuery('.vertical_widget_content ul.tab, #container2 ul.tab, #container3 ul.tab, #container4 ul.tab').tabs({ selected: 0 });
            });
        
        </script>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/include/jquery/jquery.tabs.css?secure=0&amp;1385768281" media="all" />
            
                            <script type="text/javascript" src="http://static.sourceforge.net/include/js/preferences.js"></script>
            <script type="text/javascript">
                        var _visitor = "";
            var jsonly = document.createElement('link');
            jsonly.setAttribute('rel', 'stylesheet');
            jsonly.setAttribute('type', 'text/css');
            jsonly.setAttribute('href', 'http://static.sourceforge.net/css/phoneix/jsonly.css?secure=0&amp;1385768281');
            document.getElementsByTagName('head')[0].appendChild(jsonly);
                    </script>
                                                                    <!-- DoubleClick Random Number -->
    <script type="text/javascript">var dfp_ord=Math.random()*10000000000000000; var dfp_tile = 1; var dfp_ptile = 1;</script>
    <!-- End DoubleClick Random Number -->
    <!-- After META tags -->
                                    
        <script type="text/javascript" src="http://static.sourceforge.net/sfx.js"></script>
        
            <script type="text/javascript">
                        var _gaq = _gaq || [];
                        _gaq.push(['t1._setAccount', 'UA-32013-6']);
                        _gaq.push(['t1._trackPageview']);
                        _gaq.push(['t2._setAccount', 'UA-36130941-1']);
                        _gaq.push(['t2._trackPageview']);
                        (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.notify.js"></script>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/header.js"></script>
    </head>

    <body id="c2" class="short-head">
    
    <!--[if IE 7]><div id="ie7only"><![endif]-->
    <!--[if IE 6]><div id="ie6only"><![endif]-->
    <!--[if IE]><div id="ieonly"><![endif]-->
        
        <div class="mail_archive">
                        <header id="site-header">
                <div class="wrapper">
                    <a href="/" class="logo">
                        <span>SourceForge</span>
                    </a>
                    <form method="get" action="/directory/">
                        <input type="text" id="words" name="q" placeholder="Search">
                    </form>
                    <nav id="nav-site">
                        <a href="/directory/" title="Browse our software.">Browse</a>
                        <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
                        <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
                        <a href="/support" title="Contact us for help and feedback.">Help</a>
                        <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
                    </nav>
                    <nav id="nav-account">
                                                  <div class="logged_out">
                            <a href="https://sourceforge.net/account/login.php">Log In</a>
                            <span>or</span>
                            <a href="https://sourceforge.net/user/registration">Join</a>
                          </div>
                                            </nav>
                </div>
            </header>
            <header id="site-sec-header">
                <div class="wrapper">
                    <nav id="nav-hubs">
                        <h4>Solution Centers</h4>
                        <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
                        <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
                        <a href="http://html5center.sourceforge.net/">HTML5</a>
                        <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
                    </nav>
                    <nav id="nav-collateral">
                      <a href="http://library.slashdotmedia.com/?source=sfnet_header">Resources</a>  
                                              <a href="https://sourceforge.net/user/registration/">Newsletters</a>
                                            </nav>
                </div>
            </header>
                            <!-- DoubleClick Ad Tag -->
<script type="text/javascript">
//<![CDATA[
    document.write('<script src="http://ad.doubleclick.net/adj/ostg.sourceforge/sf_pg_mailarchive_leader;pg=/mailarchive/forum.php;psrch=0;logged_in=0;tile='+dfp_tile+';sz=728x90;ord='+dfp_ord+'?" type="text/javascript"><\/script>');
    dfp_tile++;
//]]>
</script>
<!-- End DoubleClick Ad Tag -->
                                                <div id="page-body">
            <div id="bd" class="inner-bd">
                <div id="doc4" class="yui-t6">
                                                            <div id="breadcrumbs">
                                                    <a href="/">Home</a>
 / <a href="/directory/" >Browse</a>
 / <a href="/projects/archive-crawler/" >Heritrix: Internet Archive Web Crawler</a>
 / <a href="/mail/?group_id=73833" >Mail</a>
 / <a href="/mailarchive/forum.php?forum_name=archive-crawler-cvs&amp;style=nested&amp;viewmonth=200707"  class="selected">Archive</a>
                                            </div>
                    <!-- begin content -->
            <a name="projectnav"></a>
        <div id="project_nav_container">
            <div class="b-proj__side">
                                
                
                
                <span class="award-bar"></span>
            </div>
            <h1>
                <a href="/projects/archive-crawler/">Heritrix: Internet Archive Web Crawler</a>
                            </h1>
                    <div class="firstwave">
                <ul class="b-hornav">
                    <li id="menu_consume_summary"><a href="/projects/archive-crawler/"><span><span>Summary</span></span></a></li>
<li id="menu_consume_files"><a href="/projects/archive-crawler/files/"><span><span>Files</span></span></a></li>
<li id="menu_consume_reviews"><a href="/projects/archive-crawler/reviews/"><span><span>Reviews</span></span></a></li>
<li id="menu_project_support"><a href="/projects/archive-crawler/support"><span><span>Support</span></span></a></li>
<li id="menu_project_develop"><a href="/projects/archive-crawler/develop"><span><span>Develop</span></span></a>
<ul>
<li id="menu_project_website"><a href="http://crawler.archive.org">Web Site</a></li>
<li id="menu_project_screenshots"><a href="/project/screenshots.php?group_id=73833">Screenshots</a></li>
<li id="menu_project_news" class="disabled" style="display: none;"><a href="/news/?group_id=73833">News</a></li>
<li id="menu_stats"><a href="/projects/archive-crawler/stats/traffic">Project Statistics</a></li>
<li id="menu_download_stats_dist"><a href="/downloads/archive-crawler/stats_timeline">Download Stats</a></li>
</ul>
</li>
<li id="menu_hostedapps" class="disabled tier" style="display: none;"><a href="/hostedapp/?group_id=73833"><span><span>Hosted&nbsp;Apps</span></span></a></li>
<li id="menu_tracker" class="disabled tier" style="display: none;"><a href="/tracker/?group_id=73833"><span><span>Tracker</span></span></a>
<ul>
<li id="menu_tracker_539099"><a href="/tracker/?group_id=73833&amp;atid=539099">Bugs</a></li>
<li id="menu_tracker_539102"><a href="/tracker/?group_id=73833&amp;atid=539102">Feature Requests</a></li>
<li id="menu_tracker_stats" class="tools"><a href="/projects/archive-crawler/stats/tracker">Statistics for Trackers</a></li>
<li id="menu_tracker_reports" class="disabled" style="display: none;"><a href="/tracker/reporting/?group_id=73833">Reporting for Trackers</a></li>
<li id="menu_tracker_search"><a href="/search/?group_id=73833&amp;type_of_search=artifact">Search Trackers</a></li>
</ul>
</li>
<li id="menu_mail" class="selected tier"><a href="/mail/?group_id=73833"><span><span>Mailing&nbsp;Lists</span></span></a>
<ul>
<li id="menu_mlist_archive-crawler-cvs"><a href="/mailarchive/forum.php?forum_name=archive-crawler-cvs">archive-crawler-cvs</a></li>
<li id="menu_mail_search" class="tools"><a href="/search/?group_id=73833&amp;type_of_search=mlists">Search Mail Lists</a></li>
</ul>
<div class="diamond"></div></li>
<li id="menu_forums" class="disabled tier" style="display: none;"><a href="/projects/archive-crawler/forums"><span><span>Forums</span></span></a>
<ul>
<li id="menu_forum_252048"><a href="/projects/archive-crawler/forums/forum/252048">Help</a></li>
<li id="menu_forum_252047"><a href="/projects/archive-crawler/forums/forum/252047">Open Discussion</a></li>
<li id="menu_forums_stats" class="tools"><a href="/projects/archive-crawler/stats/forums">Statistics for Forums</a></li>
<li id="menu_forums_search"><a href="/search/?group_id=73833&amp;type_of_search=forums">Search Forums</a></li>
</ul>
</li>
<li id="menu_code"><a href="/scm/?type=svn&amp;group_id=73833"><span><span>Code</span></span></a>
<ul>
<li id="menu_git_about" class="disabled" style="display: none;"><a href="/scm/?type=git&amp;group_id=73833">Git</a></li>
<li id="menu_git_browse" class="disabled" style="display: none;"><a href="http://archive-crawler.git.sourceforge.net/">Git Browse</a></li>
<li id="menu_git_stats" class="disabled" style="display: none;"><a href="/projects/archive-crawler/stats/scm?repo=GitRepository">Git Statistics</a></li>
<li id="menu_hg_about" class="disabled" style="display: none;"><a href="/scm/?type=hg&amp;group_id=73833">Mercurial</a></li>
<li id="menu_hg_browse" class="disabled" style="display: none;"><a href="http://archive-crawler.hg.sourceforge.net/hgweb/archive-crawler/">Mercurial Browse</a></li>
<li id="menu_hg_stats" class="disabled" style="display: none;"><a href="/projects/archive-crawler/stats/scm?repo=HgRepository">Mercurial Statistics</a></li>
<li id="menu_bzr_about" class="disabled" style="display: none;"><a href="/scm/?type=bzr&amp;group_id=73833">Bazaar</a></li>
<li id="menu_bzr_browse" class="disabled" style="display: none;"><a href="http://archive-crawler.bzr.sourceforge.net/bzr/archive-crawler/">Bazaar Browse</a></li>
<li id="menu_bzr_stats" class="disabled" style="display: none;"><a href="/projects/archive-crawler/stats/scm?repo=BazaarBranch">Bazaar Statistics</a></li>
<li id="menu_cvs_about" class="disabled" style="display: none;"><a href="/scm/?type=cvs&amp;group_id=73833">CVS</a></li>
<li id="menu_cvs_browse" class="disabled" style="display: none;"><a href="http://archive-crawler.cvs.sourceforge.net/archive-crawler/">CVS Browse</a></li>
<li id="menu_cvs_stats" class="disabled" style="display: none;"><a href="/projects/archive-crawler/stats/scm?repo=CVSRepository">CVS Statistics</a></li>
<li id="menu_svn_about"><a href="/scm/?type=svn&amp;group_id=73833">SVN</a></li>
<li id="menu_svn_browse"><a href="http://archive-crawler.svn.sourceforge.net/viewvc/archive-crawler/">SVN Browse</a></li>
<li id="menu_svn_stats"><a href="/projects/archive-crawler/stats/scm?repo=SVNRepository">SVN Statistics</a></li>
</ul>
</li>
<li id="menu_newadmin" class="disabled tier" style="display: none;"><a href="/project/admin/?group_id=73833"><span><span>Project&nbsp;Admin</span></span></a>
<ul>
<li id="menu_editgroupinfo" class="disabled" style="display: none;"><a href="/project/admin/public_info.php?group_id=73833">Settings</a></li>
<li id="menu_features" class="disabled" style="display: none;"><a href="/project/admin/features.php?group_id=73833">Features</a></li>
<li id="menu_userperms" class="disabled" style="display: none;"><a href="/project/admin/project_membership.php?group_id=73833">Members</a></li>
<li id="menu_stats_admin" class="disabled" style="display: none;"><a href="/project/admin/stats.php?group_id=73833">Analytics</a></li>
</ul>
</li>

                </ul>
            </div>
                </div>
        <div style="clear: both;"></div>
            




<p>
<h3>Email Archive: <a href="forum.php?forum_name=archive-crawler-cvs"><!-- google_ad_section_start -->archive-crawler-cvs<!-- google_ad_section_end --></A> (read-only)
</h3>
</p>

<table width="450" border=0>
    <tr>
        <td>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th>
			<center><b>2003:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200308">(2)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200309">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200310">(197)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200311">(305)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200312">(295)</a>
								</td>
		<tr>
		<th>
			<center><b>2004:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200401">(429)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200402">(694)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200403">(443)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200404">(479)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200405">(357)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200406">(74)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200407">(218)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200408">(162)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200409">(156)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200410">(340)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200411">(132)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200412">(224)</a>
								</td>
		<tr>
		<th>
			<center><b>2005:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200501">(170)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200502">(122)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200503">(265)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200504">(215)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200505">(139)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200506">(247)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200507">(179)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200508">(116)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200509">(103)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200510">(125)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200511">(97)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200512">(221)</a>
								</td>
		<tr>
		<th>
			<center><b>2006:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200601">(132)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200602">(18)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200603">(23)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200604">(35)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200605">(71)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200606">(268)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200607">(220)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200608">(376)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200609">(181)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200610">(71)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200611">(131)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200612">(172)</a>
								</td>
		<tr>
		<th>
			<center><b>2007:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200701">(125)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200702">(79)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200703">(90)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200704">(76)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200705">(91)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200706">(64)</a>
								</td>
			<td bgcolor="#cccccc">
			<sub>Jul</sub><br />
						<b>
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707">(113)</a>
									</b>
					</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200708">(96)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200709">(40)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200710">(30)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200711">(85)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200712">(56)</a>
								</td>
		<tr>
		<th>
			<center><b>2008:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200801">(37)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200802">(79)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200803">(22)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200804">(6)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200805">(13)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200806">(22)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200807">(83)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200808">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200809">(8)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200810">(32)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200811">(55)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200812">(28)</a>
								</td>
		<tr>
		<th>
			<center><b>2009:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200901">(15)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200902">(30)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200903">(28)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200904">(69)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200905">(82)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200906">(19)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200907">(64)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200908">(71)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200909">(53)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200910">(84)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200911">(105)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200912">(40)</a>
								</td>
		<tr>
		<th>
			<center><b>2010:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201001">(11)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201002">(19)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201003">(24)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201004">(58)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201005">(15)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201006">(35)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201007">(14)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201008">(13)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201009">(31)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201010">(15)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201011">(39)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201012">(10)</a>
								</td>
		<tr>
		<th>
			<center><b>2011:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201101">(59)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201102">(32)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201103">(10)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201104">(37)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201105">(20)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201106">(21)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107">(39)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201108">(9)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201109">(31)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201110">(29)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201111">(3)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201112">(1)</a>
								</td>
		<tr>
		<th>
			<center><b>2012:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201201">(7)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201202">(4)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201203">(5)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201204">(12)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201205">(5)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201206">(8)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201207">(9)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201208">(6)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201209">(15)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201210">(1)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201211">(3)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201212">(9)</a>
								</td>
		<tr>
		<th>
			<center><b>2013:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201301">(9)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201302">(2)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201303">(41)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201304">(13)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201305">(9)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201306">(20)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201307">(5)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201308">(22)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201309">(5)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201310">(3)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201311">(13)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=201312">(6)</a>
								</td>
	</table>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th colspan="7">
			
		</th>
	</tr>
	<tr>
		<th bgcolor="#cccccc">S</th>
		<th bgcolor="#cccccc">M</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">W</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">F</th>
		<th bgcolor="#cccccc">S</th>
	</tr>
	<tr>
			<th bgcolor="#eeeeee">
			1
		</th>
			<th bgcolor="#eeeeee">
			2
		</th>
			<th bgcolor="#eeeeee">
			3
		</th>
			<th bgcolor="#eeeeee">
			4
		</th>
			<th bgcolor="#eeeeee">
			5
		</th>
			<th bgcolor="#eeeeee">
			6
		</th>
			<th bgcolor="#eeeeee">
			7
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=1">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=2">
					(4)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=3">
					(2)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=5">
					(6)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			8
		</th>
			<th bgcolor="#eeeeee">
			9
		</th>
			<th bgcolor="#eeeeee">
			10
		</th>
			<th bgcolor="#eeeeee">
			11
		</th>
			<th bgcolor="#eeeeee">
			12
		</th>
			<th bgcolor="#eeeeee">
			13
		</th>
			<th bgcolor="#eeeeee">
			14
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=9">
					(11)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=10">
					(14)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=11">
					(3)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=12">
					(12)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=13">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=14">
					(5)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			15
		</th>
			<th bgcolor="#eeeeee">
			16
		</th>
			<th bgcolor="#eeeeee">
			17
		</th>
			<th bgcolor="#eeeeee">
			18
		</th>
			<th bgcolor="#eeeeee">
			19
		</th>
			<th bgcolor="#eeeeee">
			20
		</th>
			<th bgcolor="#eeeeee">
			21
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=15">
					(9)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=16">
					(22)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=17">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=18">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=19">
					(13)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=20">
					(2)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			22
		</th>
			<th bgcolor="#eeeeee">
			23
		</th>
			<th bgcolor="#eeeeee">
			24
		</th>
			<th bgcolor="#eeeeee">
			25
		</th>
			<th bgcolor="#eeeeee">
			26
		</th>
			<th bgcolor="#eeeeee">
			27
		</th>
			<th bgcolor="#eeeeee">
			28
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			29
		</th>
			<th bgcolor="#eeeeee">
			30
		</th>
			<th bgcolor="#eeeeee">
			31
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=30">
					(3)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707&amp;viewday=31">
					(2)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
</table>
        </td>
    </tr>
</table>

<form action="/mailarchive/forum.php" method="get">
<input type="hidden" name="set" value="custom">
<input type="hidden" name="viewmonth" value="200707">
<input type="hidden" name="viewday" value="">

<table border="0" width="500">
    <tr>
        <td>
            <small>
            
<select name="forum_name">
	<option value="archive-crawler-cvs" selected="selected">archive-crawler-cvs</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="style">
	<option value="nested" selected="selected">Nested</option>
	<option value="flat">Flat</option>
	<option value="threaded">Threaded</option>
	<option value="ultimate">Ultimate</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="max_rows">
	<option value="25" selected="selected">Show 25</option>
	<option value="50">Show 50</option>
	<option value="75">Show 75</option>
	<option value="100">Show 100</option>
</select>

            </small>
        </td>
        <td>
            <small>
            <input type="submit" name="submit" value="Change View">
            </small>
        </td>
    </tr>
</table>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472342">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5361]
 trunk/heritrix/src/java/org/archive/io/ RecordingOutputStream.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-19 23:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5361
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5361&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5361&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 16:45:33 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Fix for [#HER-1163] "java.lang.ArithmeticException: / by zero" in org.archive.io.RecordingOutputStream.checkLimits(RecordingOutputStream.java:271)
* RecordingOutputStream.java
    ensure duration is at least 1, rather than simply add 1, to handle risk fo negative durations in presence of asynchronous clock updates

Modified Paths:
--------------
    trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java

Modified: trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java
===================================================================
--- trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java	2007-07-19 23:44:50 UTC (rev 5360)
+++ trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java	2007-07-19 23:45:33 UTC (rev 5361)
@@ -263,7 +263,8 @@
             throw new RecorderLengthExceededException(); 
         }
         // taking too long? 
-        long duration = System.currentTimeMillis() - startTime + 1; // !divzero
+        long duration = System.currentTimeMillis() - startTime; 
+        duration = Math.min(duration,1); // !divzero
         if(duration&gt;timeoutMs) {
             throw new RecorderTimeoutException(); 
         }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472352">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5365]
 trunk/heritrix/src/java/org/archive/io/ RecordingOutputStream.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-20 00:07</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5365
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5365&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5365&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 17:07:35 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Fix for [#HER-1163] "java.lang.ArithmeticException: / by zero" in org.archive.io.RecordingOutputStream.checkLimits(RecordingOutputStream.java:271)
* RecordingOutputStream.java
    duh, use Math.max(duration,1)

Modified Paths:
--------------
    trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java

Modified: trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java
===================================================================
--- trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java	2007-07-20 00:06:44 UTC (rev 5364)
+++ trunk/heritrix/src/java/org/archive/io/RecordingOutputStream.java	2007-07-20 00:07:35 UTC (rev 5365)
@@ -264,7 +264,7 @@
         }
         // taking too long? 
         long duration = System.currentTimeMillis() - startTime; 
-        duration = Math.min(duration,1); // !divzero
+        duration = Math.max(duration,1); // !divzero
         if(duration&gt;timeoutMs) {
             throw new RecorderTimeoutException(); 
         }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472344">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5362]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/io/RecordingOutputStream.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-19 23:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5362
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5362&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5362&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 16:45:55 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Fix for [#HER-1163] "java.lang.ArithmeticException: / by zero" in org.archive.io.RecordingOutputStream.checkLimits(RecordingOutputStream.java:271)
* RecordingOutputStream.java
    ensure duration is at least 1, rather than simply add 1, to handle risk fo negative durations in presence of asynchronous clock updates

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java	2007-07-19 23:45:33 UTC (rev 5361)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java	2007-07-19 23:45:55 UTC (rev 5362)
@@ -263,7 +263,8 @@
             throw new RecorderLengthExceededException(); 
         }
         // taking too long? 
-        long duration = System.currentTimeMillis() - startTime + 1; // !divzero
+        long duration = System.currentTimeMillis() - startTime; 
+        duration = Math.min(duration,1); // !divzero
         if(duration&gt;timeoutMs) {
             throw new RecorderTimeoutException(); 
         }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472349">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5364]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/io/RecordingOutputStream.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-20 00:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5364
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5364&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5364&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 17:06:44 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Fix for [#HER-1163] "java.lang.ArithmeticException: / by zero" in org.archive.io.RecordingOutputStream.checkLimits(RecordingOutputStream.java:271)
* RecordingOutputStream.java
    duh, use Math.max(duration,1)

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java	2007-07-19 23:53:54 UTC (rev 5363)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/io/RecordingOutputStream.java	2007-07-20 00:06:44 UTC (rev 5364)
@@ -264,7 +264,7 @@
         }
         // taking too long? 
         long duration = System.currentTimeMillis() - startTime; 
-        duration = Math.min(duration,1); // !divzero
+        duration = Math.max(duration,1); // !divzero
         if(duration&gt;timeoutMs) {
             throw new RecorderTimeoutException(); 
         }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472218">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5348]
	branches/pjack_settings/heritrix</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;kristinn_sig@us...&gt; -	2007-07-16 23:56</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5348
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5348&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5348&amp;view=rev</a>
Author:   kristinn_sig
Date:     2007-07-16 16:56:12 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
Changed how opening/closing of JMXSheetManagers is handled. 

* commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java
Now has awareness of own ObjectName

* engine/src/main/java/org/archive/crawler/framework/CrawlJobManager.java
openProfile method renamed to getProfile and now returns the ObjectName of the JMXSheetManager for the profile

* engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java
All public methods are now synchronized.
Changed opening and closing of JMXSheetManagers so that CJM ensures that multiple instances are never created for the same profile.

* webui/src/main/java/org/archive/crawler/webui/Sheets.java
Changed (simplified) how JMXSheetManagers are accessed to conform with changes made on the server side.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManager.java
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java
    branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java	2007-07-16 22:14:40 UTC (rev 5347)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java	2007-07-16 23:56:12 UTC (rev 5348)
@@ -34,6 +34,7 @@
 import java.util.Map;
 import java.util.Set;
 
+import javax.management.ObjectName;
 import javax.management.openmbean.CompositeData;
 import javax.management.openmbean.CompositeDataSupport;
 import javax.management.openmbean.OpenDataException;
@@ -76,9 +77,9 @@
     
     final private Map&lt;String,Map&lt;String,PathChangeException&gt;&gt; problems;
     
+    private ObjectName oname;
     
-    
-    public JMXSheetManagerImpl(SheetManager manager) {
+    public JMXSheetManagerImpl(String job, String domain, SheetManager manager) {
         super(JMXSheetManager.class);
         this.manager = manager;
         this.problems = new HashMap&lt;String,Map&lt;String,PathChangeException&gt;&gt;();
@@ -90,8 +91,12 @@
                 sheetProblems.put(e.getPathChange().getPath(), e);
             }
         }
+        this.oname = JMXModuleListener.nameOf(domain, job, this);
     }
 
+    public ObjectName getObjectName(){
+        return oname;
+    }
     
     private Sheet getSheet(String sheetName) {
         Sheet result = checkedOut.get(sheetName);

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManager.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManager.java	2007-07-16 22:14:40 UTC (rev 5347)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManager.java	2007-07-16 23:56:12 UTC (rev 5348)
@@ -77,7 +77,7 @@
 
     
     @Operation(desc="Loads a profile for editing.")
-    public void openProfile(
+    public String getProfile(
             
             @Parameter(name="profile", desc="The name of the profile to load.")
             String profile

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java	2007-07-16 22:14:40 UTC (rev 5347)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java	2007-07-16 23:56:12 UTC (rev 5348)
@@ -36,29 +36,28 @@
 import java.util.Arrays;
 import java.util.HashMap;
 import java.util.HashSet;
+import java.util.Hashtable;
 import java.util.List;
 import java.util.Map;
 import java.util.Set;
+import java.util.logging.Level;
 import java.util.logging.Logger;
 
 import javax.management.InstanceAlreadyExistsException;
 import javax.management.InstanceNotFoundException;
 import javax.management.MBeanRegistrationException;
 import javax.management.MBeanServer;
-import javax.management.MBeanServerConnection;
 import javax.management.MalformedObjectNameException;
 import javax.management.NotCompliantMBeanException;
 import javax.management.Notification;
 import javax.management.NotificationFilter;
 import javax.management.NotificationListener;
 import javax.management.ObjectName;
-import javax.management.remote.JMXConnector;
 
 import org.archive.crawler.Heritrix;
 import org.archive.crawler.event.CrawlStatusListener;
 import org.archive.crawler.util.LogRemoteAccessImpl;
 import org.archive.openmbeans.annotations.Bean;
-import org.archive.openmbeans.annotations.BeanProxy;
 import org.archive.settings.DefaultCheckpointRecovery;
 import org.archive.settings.ListModuleListener;
 import org.archive.settings.ModuleListener;
@@ -66,7 +65,6 @@
 import org.archive.settings.SheetManager;
 import org.archive.settings.file.FileSheetManager;
 import org.archive.settings.jmx.JMXModuleListener;
-import org.archive.settings.jmx.JMXSheetManager;
 import org.archive.settings.jmx.JMXSheetManagerImpl;
 import org.archive.settings.path.PathValidator;
 import org.archive.util.FileUtils;
@@ -105,6 +103,7 @@
     final private Thread heritrixThread;
     
     private HashMap&lt;String, LogRemoteAccessImpl&gt; logRemoteAccess;
+    private HashMap&lt;String, JMXSheetManagerImpl&gt; jmxSheetManagers;
     
     public CrawlJobManagerImpl(CrawlJobManagerConfig config) {
         super(CrawlJobManager.class);
@@ -123,13 +122,14 @@
         this.oname = JMXModuleListener.nameOf(DOMAIN, NAME, this);
         
         logRemoteAccess = new HashMap&lt;String, LogRemoteAccessImpl&gt;();
+        jmxSheetManagers = new HashMap&lt;String, JMXSheetManagerImpl&gt;();
         
         register(this, oname);
         this.heritrixThread = config.getHeritrixThread();
     }
     
 
-    public void copyProfile(String origName, String copiedName) 
+    public synchronized void copyProfile(String origName, String copiedName) 
     throws IOException {
         File src = new File(getProfilesDir(), origName);
         File dest = new File(getProfilesDir(), copiedName);
@@ -147,7 +147,12 @@
     }
 
     
-    public synchronized void openProfile(String profile) throws IOException {
+    public synchronized String getProfile(String profile) throws IOException {
+        if(jmxSheetManagers.containsKey(profile)){
+            // Already open. Return object name
+            return jmxSheetManagers.get(profile).getObjectName().getCanonicalName();
+        }
+        // Not already open. Open it and return object name.
         File src = new File(getProfilesDir(), profile);
         
         if (!src.exists()) {
@@ -164,12 +169,13 @@
             throw io;
         }
 
-        JMXSheetManagerImpl jmx = new JMXSheetManagerImpl(fsm);
-        ObjectName name = JMXModuleListener.nameOf(DOMAIN, profile, jmx);
-        register(jmx, name);
+        JMXSheetManagerImpl jmx = new JMXSheetManagerImpl(profile, DOMAIN, fsm);
+        register(jmx, jmx.getObjectName());
+        jmxSheetManagers.put(profile, jmx);
+        return jmx.getObjectName().getCanonicalName();
     }
 
-    public String getLogs(String job) throws IOException {
+    public synchronized String getLogs(String job) throws IOException {
         if(logRemoteAccess.containsKey(job)){
             return logRemoteAccess.get(job).getObjectName().getCanonicalName();
         }
@@ -189,47 +195,23 @@
 
     
     public synchronized void closeProfile(String profile) {
-        String query = "org.archive.crawler:*," +
-        "name=" + profile +
-        ",type=" + JMXSheetManager.class.getName();
-
-        try {
-            @SuppressWarnings("unchecked")
-            Set&lt;ObjectName&gt; set = server.queryNames(null, new ObjectName(query));
-            for (ObjectName name: set) {
-                    JMXSheetManager jsm =
-                        BeanProxy.proxy(server, name, JMXSheetManager.class);
-                    if (!jsm.isOnline()) {
-                        jsm.offlineCleanup();
-                        unregister(name);
-                    }
+        if (jmxSheetManagers.containsKey(profile)) {
+            JMXSheetManagerImpl jmx = jmxSheetManagers.get(profile);
+            if(jmx.isOnline()==false){
+                // Only close offline profiles
+                jmxSheetManagers.remove(profile);
+                unregister(jmx.getObjectName());
+            } else {
+                LOGGER.log(Level.WARNING, "Can not close an online profile: " + profile);
             }
-        } catch (Exception e) {
-            e.printStackTrace();
-            System.exit(1);
-            throw new IllegalStateException(e);
+        } else {
+            LOGGER.log(Level.WARNING, "Can not close, not an open profile: " + profile);
         }
     }
     
     
-    public static Set&lt;ObjectName&gt; find(JMXConnector jmxc, String query) {
-        try {
-            MBeanServerConnection conn = jmxc.getMBeanServerConnection();
-            @SuppressWarnings("unchecked")
-            Set&lt;ObjectName&gt; set = conn.queryNames(null, new ObjectName(query));
-            return set;
-        } catch (IOException e) {
-            throw new IllegalStateException(e);
-        } catch (MalformedObjectNameException e) {
-            throw new IllegalStateException(e);
-        }
-        
-    }
-
-    
-    
     public synchronized void launchProfile(String profile, final String job) 
-    throws IOException {
+            throws IOException {
         closeProfile(profile);
         File src = new File(getProfilesDir(), profile);
         File dest = new File(getJobsDir(), job);
@@ -258,8 +240,9 @@
             throw io;
         }
 
-        JMXSheetManagerImpl jmx = new JMXSheetManagerImpl(fsm);
-        final ObjectName smName = jmxListener.nameOf(jmx); // register(job, "SheetManager", jmx);
+        JMXSheetManagerImpl jmx = new JMXSheetManagerImpl(job,DOMAIN, fsm);
+        final ObjectName smName = jmx.getObjectName();
+        jmxSheetManagers.put(job, jmx);
         try {
             server.registerMBean(jmx, smName);
         } catch (Exception e) {
@@ -292,6 +275,7 @@
                         for (Object m: jmxListener.getModules()) {
                             unregister(jmxListener.nameOf(m));
                         }
+                        jmxSheetManagers.remove(job);
                         jobs.remove(job);
                     }
                 }, new NotificationFilter() {
@@ -306,9 +290,8 @@
         
         jobs.put(job, cc);
     }
-
-
     
+    
     private ObjectName register(Object o, ObjectName oname) {
         try {
             server.registerMBean(o, oname);
@@ -332,19 +315,19 @@
     }
 
     
-    public String[] listAllJobs() {
+    public synchronized String[] listAllJobs() {
         File jobsDir = getJobsDir();
         return jobsDir.list();
     }
 
 
-    public String[] listProfiles() {
+    public synchronized String[] listProfiles() {
         File profDir = getProfilesDir();
         return profDir.list();
     }
 
     
-    public ObjectName getObjectName() {
+    public synchronized ObjectName getObjectName() {
         return this.oname;
     }
 
@@ -358,7 +341,7 @@
     }
 
 
-    public String[] listCheckpoints() {
+    public synchronized String[] listCheckpoints() {
         ArrayList&lt;String&gt; checkpoints = new ArrayList&lt;String&gt;();
         for (File f: getJobsDir().listFiles()) {
             if (f.isDirectory()) {
@@ -377,10 +360,10 @@
     }
     
     
-    public void recoverCheckpoint(String cpPath, 
+    public synchronized void recoverCheckpoint(String cpPath, 
             String[] oldPaths, 
             String[] newPaths) 
-    throws IOException {
+            throws IOException {
         if (cpPath.startsWith(".")) {
             throw new IllegalArgumentException("Illegal checkpoint: " + cpPath);
         }
@@ -405,7 +388,7 @@
         jml.setServer(server);
     }
 
-    public void close() {
+    public synchronized void close() {
         if (!jobs.isEmpty()) {
             throw new IllegalStateException("Cannot close CrawlJobManager " + 
                     "when jobs are still active.");
@@ -423,17 +406,17 @@
     }
 
 
-    public void systemExit() {
+    public synchronized void systemExit() {
         System.exit(1);
     }
 
 
-    public String[] listActiveJobs() {
+    public synchronized String[] listActiveJobs() {
         return jobs.keySet().toArray(new String[0]);
     }
 
 
-    public String[] listCompletedJobs() {
+    public synchronized String[] listCompletedJobs() {
         Set&lt;String&gt; result = new HashSet&lt;String&gt;();
         result.addAll(Arrays.asList(jobsDir.list()));
         result.removeAll(jobs.keySet());
@@ -442,7 +425,7 @@
 
     
     public synchronized String readLines(String fileName, int startLine, int lineCount) 
-    throws IOException {
+            throws IOException {
         if (startLine &lt; 0) {
             throw new IllegalArgumentException("startLine must be positive.");
         }
@@ -478,7 +461,7 @@
 
     public synchronized void writeLines(String fileName, int startLine, 
             int lineCount, String lines)
-    throws IOException {
+            throws IOException {
         if (startLine &lt; 0) {
             throw new IllegalArgumentException("startLine must be positive.");
         }

Modified: branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java	2007-07-16 22:14:40 UTC (rev 5347)
+++ branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java	2007-07-16 23:56:12 UTC (rev 5348)
@@ -671,20 +671,6 @@
         String job = getJob(request);
         
         JMXConnector jmxc = crawler.connect();
-        String query = "org.archive.crawler:*," + 
-            "name=" + job + 
-            ",type=" + JMXSheetManager.class.getName();
-
-        Set&lt;ObjectName&gt; set = Misc.find(jmxc, query);
-        if (set.size() == 1) {
-            ObjectName name = set.iterator().next();
-            return Remote.make(jmxc, name, JMXSheetManager.class);
-        }
-
-        if (set.size() != 0) {
-            throw new IllegalStateException("Expected unique SheetManager for "
-                    + query + " but found " + set);
-        }
         
         if (!profile) {
             throw new IllegalStateException("Can't open sheets for completed job.");
@@ -692,9 +678,8 @@
         
         Remote&lt;CrawlJobManager&gt; manager = Remote.make(
                 jmxc, crawler.getObjectName(), CrawlJobManager.class);
-        manager.getObject().openProfile(job);
         
-        ObjectName name = Misc.waitFor(jmxc, query, true);
+        ObjectName name = new ObjectName(manager.getObject().getProfile(job));
         return Remote.make(jmxc, name, JMXSheetManager.class);
     }
 


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472220">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5349]
	branches/pjack_settings/heritrix</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-17 19:27</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5349
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5349&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5349&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-17 12:27:15 -0700 (Tue, 17 Jul 2007)

Log Message:
-----------
Changed maven namespaces:

* pom.xml
Is now org.archive.heritrix.

* commons/pom.xml
Is now org.archive.heritrix.commons.

* modules/pom.xml
Is now org.archive.heritrix.modules.

* engine/pom.xml
Is now org.archive.heritrix.engine.

* dist/pom.xml
Is now org.archive.heritrix.heritrix.
Also changed packaging type to "pom", to prevent empty jar files from
being added to the repository.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/pom.xml
    branches/pjack_settings/heritrix/dist/pom.xml
    branches/pjack_settings/heritrix/engine/pom.xml
    branches/pjack_settings/heritrix/modules/pom.xml
    branches/pjack_settings/heritrix/pom.xml
    branches/pjack_settings/heritrix/webui/pom.xml

Modified: branches/pjack_settings/heritrix/commons/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/commons/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/commons/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -3,11 +3,11 @@
 &lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
 &lt;parent&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
 &lt;/parent&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
-  &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+  &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
   &lt;artifactId&gt;commons&lt;/artifactId&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;name&gt;Heritrix: 'commons' subproject (utility classes)&lt;/name&gt;

Modified: branches/pjack_settings/heritrix/dist/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/dist/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/dist/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -2,13 +2,13 @@
 &lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
 &lt;parent&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
 &lt;/parent&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
-  &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+  &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
   &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
-  &lt;packaging&gt;jar&lt;/packaging&gt;
+  &lt;packaging&gt;pom&lt;/packaging&gt;
   &lt;name&gt;Heritrix (for distribution)&lt;/name&gt;
     &lt;pluginRepositories&gt;
     &lt;pluginRepository&gt;
@@ -67,13 +67,13 @@
   
   &lt;dependencies&gt;
         &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;engine&lt;/artifactId&gt;
              &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
              &lt;scope&gt;compile&lt;/scope&gt;
         &lt;/dependency&gt;
         &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;webui&lt;/artifactId&gt;
              &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
              &lt;type&gt;war&lt;/type&gt;

Modified: branches/pjack_settings/heritrix/engine/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/engine/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/engine/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -2,11 +2,11 @@
 &lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
 &lt;parent&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
 &lt;/parent&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
-  &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+  &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
   &lt;artifactId&gt;engine&lt;/artifactId&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;name&gt;Heritrix: 'engine' subproject (headless crawler)&lt;/name&gt;
@@ -67,7 +67,7 @@
   
   &lt;dependencies&gt;
         &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;modules&lt;/artifactId&gt;
              &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
              &lt;scope&gt;compile&lt;/scope&gt;

Modified: branches/pjack_settings/heritrix/modules/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/modules/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/modules/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -3,11 +3,11 @@
 &lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
 &lt;parent&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
 &lt;/parent&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
-  &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+  &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
   &lt;artifactId&gt;modules&lt;/artifactId&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;name&gt;Heritrix: 'modules' subproject (reusable components)&lt;/name&gt;
@@ -40,7 +40,7 @@
   
   &lt;dependencies&gt;
         &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;commons&lt;/artifactId&gt;
              &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
              &lt;scope&gt;compile&lt;/scope&gt;

Modified: branches/pjack_settings/heritrix/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -19,7 +19,7 @@
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
   &lt;!--This project is parent to all under 'projects' subdirectory--&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
   &lt;packaging&gt;pom&lt;/packaging&gt;
   &lt;name&gt;Heritrix (parent project)&lt;/name&gt;
@@ -91,22 +91,22 @@
     &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
           &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;commons&lt;/artifactId&gt;
              &lt;version&gt;${project.version}&lt;/version&gt;
           &lt;/dependency&gt;
           &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;modules&lt;/artifactId&gt;
              &lt;version&gt;${project.version}&lt;/version&gt;
           &lt;/dependency&gt;
           &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;engine&lt;/artifactId&gt;
              &lt;version&gt;${project.version}&lt;/version&gt;
           &lt;/dependency&gt;
           &lt;dependency&gt;
-             &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+             &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
              &lt;artifactId&gt;webui&lt;/artifactId&gt;
              &lt;version&gt;${project.version}&lt;/version&gt;
           &lt;/dependency&gt;

Modified: branches/pjack_settings/heritrix/webui/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/webui/pom.xml	2007-07-16 23:56:12 UTC (rev 5348)
+++ branches/pjack_settings/heritrix/webui/pom.xml	2007-07-17 19:27:15 UTC (rev 5349)
@@ -3,10 +3,10 @@
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
 &lt;parent&gt;
   &lt;groupId&gt;org.archive&lt;/groupId&gt;
-  &lt;artifactId&gt;heritrix-project&lt;/artifactId&gt;
+  &lt;artifactId&gt;heritrix&lt;/artifactId&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
 &lt;/parent&gt;
-  &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+  &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
   &lt;artifactId&gt;webui&lt;/artifactId&gt;
   &lt;packaging&gt;war&lt;/packaging&gt;
   &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
@@ -44,7 +44,7 @@
       &lt;scope&gt;test&lt;/scope&gt;
     &lt;/dependency&gt;
     &lt;dependency&gt;
-      &lt;groupId&gt;org.archive.crawler&lt;/groupId&gt;
+      &lt;groupId&gt;org.archive.heritrix&lt;/groupId&gt;
       &lt;artifactId&gt;engine&lt;/artifactId&gt;
       &lt;version&gt;2.0.0-SNAPSHOT&lt;/version&gt;
       &lt;scope&gt;compile&lt;/scope&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472347">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5363]
	branches/pjack_settings/heritrix</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:53</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5363
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5363&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5363&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:53:54 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* pom.xml
Include our own maven2 repository as a source for plugins.

* modules/pom.xml
* engine/pom.xml
Use org.archive.mojo:subclasses plugin to include subclass information in the
produced jar.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/engine/pom.xml
    branches/pjack_settings/heritrix/modules/pom.xml
    branches/pjack_settings/heritrix/pom.xml

Modified: branches/pjack_settings/heritrix/engine/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/engine/pom.xml	2007-07-19 23:45:55 UTC (rev 5362)
+++ branches/pjack_settings/heritrix/engine/pom.xml	2007-07-19 23:53:54 UTC (rev 5363)
@@ -104,6 +104,19 @@
       &lt;/plugin&gt;
 
       &lt;plugin&gt;
+        &lt;groupId&gt;org.archive.mojo&lt;/groupId&gt;
+        &lt;artifactId&gt;subclasses&lt;/artifactId&gt;
+        &lt;executions&gt;
+          &lt;execution&gt;
+            &lt;phase&gt;process-classes&lt;/phase&gt;
+            &lt;goals&gt;
+              &lt;goal&gt;generate&lt;/goal&gt;
+            &lt;/goals&gt;
+          &lt;/execution&gt;
+        &lt;/executions&gt;
+      &lt;/plugin&gt;
+
+      &lt;plugin&gt;
         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
         &lt;configuration&gt;

Modified: branches/pjack_settings/heritrix/modules/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/modules/pom.xml	2007-07-19 23:45:55 UTC (rev 5362)
+++ branches/pjack_settings/heritrix/modules/pom.xml	2007-07-19 23:53:54 UTC (rev 5363)
@@ -59,6 +59,19 @@
       &lt;/plugin&gt;
 
       &lt;plugin&gt;
+        &lt;groupId&gt;org.archive.mojo&lt;/groupId&gt;
+        &lt;artifactId&gt;subclasses&lt;/artifactId&gt;        
+        &lt;executions&gt;
+          &lt;execution&gt;
+            &lt;phase&gt;process-classes&lt;/phase&gt;
+            &lt;goals&gt;
+              &lt;goal&gt;generate&lt;/goal&gt;
+            &lt;/goals&gt;
+          &lt;/execution&gt;
+        &lt;/executions&gt;
+      &lt;/plugin&gt;
+
+      &lt;plugin&gt;
         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
         &lt;configuration&gt;

Modified: branches/pjack_settings/heritrix/pom.xml
===================================================================
--- branches/pjack_settings/heritrix/pom.xml	2007-07-19 23:45:55 UTC (rev 5362)
+++ branches/pjack_settings/heritrix/pom.xml	2007-07-19 23:53:54 UTC (rev 5363)
@@ -75,6 +75,25 @@
         &lt;/mailingList&gt;  
     &lt;/mailingLists&gt;
 
+    &lt;pluginRepositories&gt;
+    &lt;pluginRepository&gt;
+      &lt;releases&gt;
+        &lt;enabled&gt;true&lt;/enabled&gt;
+        &lt;updatePolicy&gt;daily&lt;/updatePolicy&gt;
+        &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;
+      &lt;/releases&gt;
+      &lt;snapshots&gt;
+        &lt;enabled&gt;true&lt;/enabled&gt;
+        &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
+        &lt;checksumPolicy&gt;fail&lt;/checksumPolicy&gt;
+      &lt;/snapshots&gt;
+      &lt;id&gt;archive&lt;/id&gt;
+      &lt;name&gt;archive.org&lt;/name&gt;
+      &lt;url&gt;<a href="http://builds.archive.org:8080/maven2&lt;/url" target="_new">http://builds.archive.org:8080/maven2&lt;/url</a>&gt;
+      &lt;layout&gt;default&lt;/layout&gt;
+    &lt;/pluginRepository&gt;
+    &lt;/pluginRepositories&gt;
+
     &lt;scm&gt;
        &lt;connection&gt;
        scm:svn:<a href="https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/branches/pjack_settings/crawler" target="_new">https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/branches/pjack_settings/crawler</a>


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472334">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5358]
	trunk/subclasses/pom.xml</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:33</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5358
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5358&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5358&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:33:36 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* subclasses/pom.xml
Added distributionManagement similar to other projects'.

Modified Paths:
--------------
    trunk/subclasses/pom.xml

Modified: trunk/subclasses/pom.xml
===================================================================
--- trunk/subclasses/pom.xml	2007-07-19 23:26:53 UTC (rev 5357)
+++ trunk/subclasses/pom.xml	2007-07-19 23:33:36 UTC (rev 5358)
@@ -26,6 +26,21 @@
         &lt;/dependency&gt;
   &lt;/dependencies&gt;
 
+    &lt;distributionManagement&gt;
+        &lt;repository&gt;
+            &lt;id&gt;repository&lt;/id&gt;
+            &lt;name&gt;Repository&lt;/name&gt;
+            &lt;!--Pass as command-line system property to maven--&gt;
+            &lt;url&gt;${repository.url}&lt;/url&gt;
+        &lt;/repository&gt;
+        &lt;site&gt;
+            &lt;id&gt;website&lt;/id&gt;
+            &lt;name&gt;Website&lt;/name&gt;
+            &lt;!--Pass as command-line system property to maven--&gt;
+            &lt;url&gt;${website.url}/projects/${artifactId}&lt;/url&gt;
+        &lt;/site&gt;
+    &lt;/distributionManagement&gt;
+
   &lt;build&gt;
     &lt;plugins&gt;
       &lt;plugin&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472337">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5359]
	trunk/subclasses/pom.xml</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:39</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5359
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5359&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5359&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:39:41 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* subclasses/pom.xml
Added scm information.

Modified Paths:
--------------
    trunk/subclasses/pom.xml

Modified: trunk/subclasses/pom.xml
===================================================================
--- trunk/subclasses/pom.xml	2007-07-19 23:33:36 UTC (rev 5358)
+++ trunk/subclasses/pom.xml	2007-07-19 23:39:41 UTC (rev 5359)
@@ -25,6 +25,16 @@
           &lt;version&gt;5.1&lt;/version&gt;
         &lt;/dependency&gt;
   &lt;/dependencies&gt;
+  
+  
+    &lt;scm&gt;
+       &lt;connection&gt;
+       scm:svn:<a href="https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/trunk/subclasses" target="_new">https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/trunk/subclasses</a>
+       &lt;/connection&gt;
+       &lt;url&gt;
+       <a href="https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/trunk/subclasses" target="_new">https://archive-crawler.svn.sourceforge.net/svnroot/archive-crawler/trunk/subclasses</a>
+       &lt;/url&gt;
+    &lt;/scm&gt;
 
     &lt;distributionManagement&gt;
         &lt;repository&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472340">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5360]
	trunk/subclasses/pom.xml</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5360
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5360&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5360&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:44:50 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* subclasses/pom.xml
Changing version 1.0 to trigger offical deploy.

Modified Paths:
--------------
    trunk/subclasses/pom.xml

Modified: trunk/subclasses/pom.xml
===================================================================
--- trunk/subclasses/pom.xml	2007-07-19 23:39:41 UTC (rev 5359)
+++ trunk/subclasses/pom.xml	2007-07-19 23:44:50 UTC (rev 5360)
@@ -4,7 +4,7 @@
   &lt;groupId&gt;org.archive.mojo&lt;/groupId&gt;
   &lt;artifactId&gt;subclasses&lt;/artifactId&gt;
   &lt;packaging&gt;maven-plugin&lt;/packaging&gt;
-  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
+  &lt;version&gt;1.0&lt;/version&gt;
   &lt;name&gt;subclasses Maven Mojo&lt;/name&gt;
   &lt;url&gt;<a href="http://maven.apache.org&lt;/url" target="_new">http://maven.apache.org&lt;/url</a>&gt;
   &lt;dependencies&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472332">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5357]
 trunk/subclasses/src/main/java/org/ archive/mojo/SubclassesMojo.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5357
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5357&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5357&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:26:53 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java
(inputDirectory)
(outputDirectory): Default to ${project.build.directory}/classes.

Modified Paths:
--------------
    trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java

Modified: trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java
===================================================================
--- trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java	2007-07-19 23:26:13 UTC (rev 5356)
+++ trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java	2007-07-19 23:26:53 UTC (rev 5357)
@@ -1,81 +1,47 @@
 package org.archive.mojo;
 
-/*
- * Copyright 2001-2005 The Apache Software Foundation.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *      <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
 import org.apache.maven.plugin.AbstractMojo;
 import org.apache.maven.plugin.MojoExecutionException;
 
 import java.io.File;
-import java.io.FileWriter;
-import java.io.IOException;
 
 /**
  * Goal which touches a timestamp file.
  *
- * @goal touch
+ * @goal generate
  * 
- * @phase process-sources
+ * @phase process-classes
  */
-public class SubclassesMojo
-    extends AbstractMojo
-{
+public class SubclassesMojo extends AbstractMojo {
+
+    
     /**
-     * Location of the file.
-     * @parameter expression="${project.build.directory}"
+     * Output directory for generate .option files.
+     * 
+     * @parameter expression="${project.build.directory}/classes"
      * @required
      */
     private File outputDirectory;
 
-    public void execute()
-        throws MojoExecutionException
-    {
-        File f = outputDirectory;
-
-        if ( !f.exists() )
-        {
-            f.mkdirs();
+    
+    /**
+     * Input directory containing .class files.
+     * 
+     * @parameter expression="${project.build.directory}/classes"
+     * @required
+     */
+    private File inputDirectory;
+    
+    
+    public void execute() throws MojoExecutionException {
+        Config config = new Config();
+        config.setInputDir(inputDirectory);
+        config.setOutputDir(outputDirectory);
+        Generator gen = new Generator(config);
+        try {
+            gen.generate();
+        } catch (Exception e) {
+            throw new MojoExecutionException(e.getMessage(), e);
         }
-
-        File touch = new File( f, "touch.txt" );
-
-        FileWriter w = null;
-        try
-        {
-            w = new FileWriter( touch );
-
-            w.write( "touch.txt" );
-        }
-        catch ( IOException e )
-        {
-            throw new MojoExecutionException( "Error creating file " + touch, e );
-        }
-        finally
-        {
-            if ( w != null )
-            {
-                try
-                {
-                    w.close();
-                }
-                catch ( IOException e )
-                {
-                    // ignore
-                }
-            }
-        }
     }
 }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472330">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5356]
 trunk/subclasses/src/main/java/org/ archive/mojo/Generator.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5356
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5356&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5356&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:26:13 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* subclasses/src/main/java/org/archive/mojo/Generator.java
(writeSubs): Don't write empty files.

Modified Paths:
--------------
    trunk/subclasses/src/main/java/org/archive/mojo/Generator.java

Modified: trunk/subclasses/src/main/java/org/archive/mojo/Generator.java
===================================================================
--- trunk/subclasses/src/main/java/org/archive/mojo/Generator.java	2007-07-19 23:06:02 UTC (rev 5355)
+++ trunk/subclasses/src/main/java/org/archive/mojo/Generator.java	2007-07-19 23:26:13 UTC (rev 5356)
@@ -248,24 +248,26 @@
     
     private void writeSubs() throws IOException {
         for (Map.Entry&lt;String,Set&lt;String&gt;&gt; me: subclasses.entrySet()) {
-            String superclass = me.getKey();
-            String path = superclass.replace('.', '/');
-            File file = new File(outputDir, path + EXTENSION);
-            file.getParentFile().mkdirs();
-
-            FileWriter fw = null;
-            try {
-                fw = new FileWriter(file, true);
-                for (String sub: me.getValue()) {
-                    fw.write(sub);
-                    fw.write('\n');
+            if (!me.getValue().isEmpty()) {
+                String superclass = me.getKey();
+                String path = superclass.replace('.', '/');
+                File file = new File(outputDir, path + EXTENSION);
+                file.getParentFile().mkdirs();
+    
+                FileWriter fw = null;
+                try {
+                    fw = new FileWriter(file, true);
+                    for (String sub: me.getValue()) {
+                        fw.write(sub);
+                        fw.write('\n');
+                    }
+                } finally {
+                    if (fw != null) try {
+                        fw.close();
+                    } catch (IOException e) {
+                        e.printStackTrace();
+                    }
                 }
-            } finally {
-                if (fw != null) try {
-                    fw.close();
-                } catch (IOException e) {
-                    e.printStackTrace();
-                }
             }
         }
     }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472233">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5355]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/settings/package-info.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 23:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5355
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5355&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5355&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 16:06:02 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
* commons/src/main/java/org/archive/settings/package-info.java
Better/accurate package description.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/package-info.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/package-info.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/package-info.java	2007-07-19 22:58:07 UTC (rev 5354)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/package-info.java	2007-07-19 23:06:02 UTC (rev 5355)
@@ -1,51 +1,141 @@
 /**
  * A settings system based on "settings sheets".  
  * 
- * &lt;p&gt;Some terms:
+ * &lt;h2&gt;Glossary&lt;/h2&gt;
  * 
  * &lt;dl&gt;
- * &lt;dt&gt;processor&lt;/dt&gt;
- * &lt;dd&gt;An object that requires context-sensitive configuration.  For our 
- * purposes, the context is always a URI in SURT form.  Each processor 
- * advertises which settings it understands.&lt;/dd&gt;
+ * &lt;dt&gt;context&lt;/dt&gt;
+ * &lt;dd&gt;A context for settings configuration.  A context is simply a string.  
+ * Different applications might use different kinds of context strings; the 
+ * Heritrix application uses {@link org.archive.util.SURT} strings.  The 
+ * settings system can provide different configuration based on different 
+ * configuration contexts, so Heritrix can be configured to behave differently 
+ * for different URIs.  The settings system actually uses a prefix-matching
+ * algorithm to determine the configuration for a context; see below for
+ * details on this algorithm.
+ * &lt;dd&gt;
  * 
+ * &lt;dt&gt;module&lt;/dt&gt;
+ * &lt;dd&gt;An object that requires context-sensitive configuration.  Each module
+ * advertises the settings that it understands; see the 
+ * {@link org.archive.state} package for how to create a module that advertises
+ * its settings.  (Basically, module classes must define static 
+ * {@link org.archive.state.Key} fields.)
+ * &lt;/dd&gt;
+ * 
  * &lt;dt&gt;sheet&lt;/dt&gt;
- * &lt;dd&gt;A group of settings for one or more processors.  A sheet need not 
- * contain every setting advertised by a processor, nor must a sheet
- * recognize all processors advertised by the manager.  Sheets may either
- * be single sheets or sheet bundles.&lt;/dd&gt;
+ * &lt;dd&gt;A group of settings for one or more modules.  A sheet need not 
+ * contain every setting advertised by a module, nor must a sheet
+ * recognize all modules advertised by the manager.  See {@link Sheet}.
+ * &lt;/dd&gt;
  * 
  * &lt;dt&gt;association&lt;/dt&gt;
- * &lt;dd&gt;An association of a context string with a sheet.&lt;/dd&gt;
+ * &lt;dd&gt;An association of a context string prefix with a sheet.  When determining
+ * the configuration for a particular context, the sheet manager will consider
+ * all associations whose prefix matches that context.  See below for more 
+ * details.
+ * &lt;/dd&gt;
  * 
+ * &lt;dt&gt;global sheet&lt;/dt&gt;
+ * &lt;dd&gt;The settings that are used if no associations exist for a particular
+ * context, or if associations do exist but those associations' sheets do not
+ * specify a particular setting.  See below for more details.
+ * &lt;/dd&gt;
+ * 
  * &lt;dt&gt;default sheet&lt;/dt&gt;
- * &lt;dd&gt;The sheet that is consulted if no association exists for a particular
- * context string.&lt;/dd&gt;
+ * &lt;dd&gt;The sheet that is consulted if even the global sheet does not specify
+ * a value for a setting.  The values for the default sheet are hardcoded into
+ * the module code.  See {@link org.archive.state.Key#getDefaultValue()}.
+ * &lt;/dd&gt;
  * 
  * &lt;dt&gt;sheet manager&lt;/dt&gt;
- * &lt;dd&gt;A database of sheets, the processors those sheet configure, and the
+ * &lt;dd&gt;A database of sheets, the modules those sheet configure, and the
  * associations for those sheets.  It is expected that a large web crawl
- * will have thousands of sheets with millions of associations.&lt;/dd&gt;
+ * will have thousands of sheets with millions of associations.  See
+ * {@link SheetManager}.&lt;/dd&gt;
+ * &lt;/dd&gt;
  * 
- * &lt;/dl&gt;
+ * &lt;h2&gt;Settings Resolution&lt;/h2&gt;
  *
- * The algorithm for looking up a setting value given the context string
- * (the URI in SURT form), the processor who needs the value, and the Key
- * that defines the property: 
- *
+ * There are two phases of setting resolution, the &lt;i&gt;discovery&lt;/i&gt; phase and 
+ * the &lt;i&gt;mining&lt;/i&gt; phase.  The discovery phase produces a list of sheets that 
+ * is used by the mining phase to actually look up settings.  The discovery 
+ * phase is potentially expensive; it may involve multiple BDB lookups.  The
+ * mining phase is comparatively inexpensive since its data structures stay in
+ * memory.
+ * 
+ * &lt;p&gt;In the discovery phase, a list of sheets are found that apply to a 
+ * particular context.  The following steps are taken:
+ * 
  * &lt;ol&gt;
- * &lt;li&gt;If the SURT string is empty, go to step #6.
- * &lt;li&gt;Check the associations for that exact SURT string.&lt;li&gt;
- * &lt;li&gt;If no association exists for the SURT string, knock off the last bit
- * of the SURT string and go to step 1.&lt;/li&gt;
- * &lt;li&gt;Otherwise, consult the sheet indicated by the association.&lt;/li&gt;
- * &lt;li&gt;If that sheet returns a non-null value for the processor/Key 
- * combination, then return that value.  Stop.&lt;/li&gt;
- * &lt;li&gt;Otherwise, consult the default sheet.
- * &lt;li&gt;If the default sheet returns a non-null value for the processor/Key
- * combination, then return that value.  Stop.&lt;/li&gt;
- * &lt;li&gt;Otherwise, return the default value defined by the Key itself.&lt;/li&gt;
+ * &lt;li&gt;For each prefix of the context, from longest to shortest, the sheet 
+ * manager is consulted to see if any associations exist for that prefix.
+ * For instance, if the context were &lt;code&gt;HAPPY&lt;/code&gt;, then the manager would 
+ * check for associations for &lt;code&gt;HAPPY&lt;/code&gt;, &lt;code&gt;HAPP&lt;/code&gt;, 
+ * &lt;code&gt;HAP&lt;/code&gt;, &lt;code&gt;HA&lt;/code&gt; and &lt;code&gt;H&lt;/code&gt;, in that order.&lt;/li&gt;
+ * &lt;li&gt;The sheets from those associations are added to the result list in the 
+ * order they were found.  For instance, if &lt;code&gt;HAPP&lt;/code&gt; were associated 
+ * with a sheet named &lt;code&gt;foo&lt;/code&gt;, and &lt;code&gt;HA&lt;/code&gt; were associated with
+ * the two sheets &lt;code&gt;bar&lt;/code&gt; and &lt;code&gt;baz&lt;/code&gt;, then the list would
+ * be &lt;code&gt;[foo, bar, baz]&lt;/code&gt;.&lt;/li&gt;
+ * &lt;li&gt;The global sheet and the default sheet are added to the end of the list.
+ * Continuing the example, the final sheet list for the context string 
+ * &lt;code&gt;HAPPY&lt;/code&gt; would be &lt;code&gt;[foo, bar, baz, global, default]&lt;/code&gt;.
+ * &lt;/li&gt;
  * &lt;/ol&gt;
  * 
+ * After the sheet list is known, it can be consulted during the mining phase
+ * to find a particular setting for a module in that context.   Each sheet in 
+ * the list is asked if it has a value for setting &lt;i&gt;K&lt;/i&gt; of module &lt;i&gt;M&lt;/i&gt;.  
+ * If so, that value is used.  Otherwise the next sheet is asked.  Note that 
+ * the default sheet will always have a value for the setting, as the default 
+ * values are hardcoded by the module source code.
+ * 
+ * &lt;h2&gt;Resolution for Lists and Maps&lt;/h2&gt;
+ * 
+ * If the setting we're resolving is a {@link java.util.List} or a 
+ * {@link java.util.Map}, then the mining phase is a little different.  
+ * 
+ * &lt;h3&gt;Maps&lt;/h3&gt;
+ * 
+ * &lt;p&gt;For maps, each sheet in the discovered sheet list is asked as usual for
+ * a value for &lt;i&gt;K&lt;/i&gt; in &lt;i&gt;M&lt;/i&gt;.  If a sheet reports that it has a value,
+ * then that value (which is a Map) is merged into a result Map, instead of
+ * overriding the previous value.  The sheets are consulted in the opposite
+ * order, and the default sheet is only consulted if no other sheet provided
+ * a map value for that setting.  
+ * 
+ * &lt;p&gt;Using the example above, the discovery phase reported &lt;code&gt;[foo, bar,
+ * baz, global, default]&lt;/code&gt; as the sheets for the context 
+ * &lt;code&gt;HAPPY&lt;/code&gt;.  Let's say that the global sheet, the foo sheet and
+ * the baz sheet all contained values for a certain map setting.  In that case,
+ * the resolved map would be built:
+ * 
+ * &lt;ol&gt;
+ * &lt;li&gt;First by placing all of the global sheet's Map entries into a new map.
+ * &lt;li&gt;Next by placing the baz sheet's Map entries into that map, possibly
+ * replacing entries from the global map.
+ * &lt;li&gt;And finally placing the foo sheet's Map entries into the result map,
+ * possibly replacing entries from the baz and global maps.
+ * &lt;/ol&gt;
+ * 
+ * This new map is then returned.  Note that a consequence of this approach is
+ * that sheets cannot remove entries that other sheets provided; they can only
+ * replace those entries with some other value.
+ * 
+ * &lt;h3&gt;Lists&lt;/h3&gt;
+ * 
+ * List mining is similar to Map mining, but the list entries from the various
+ * sheets are appended to the result list.  The sheets are consulted in the
+ * opposite order, and the default sheet is only consulted if no other sheet
+ * provides list elements.
+ * 
+ * &lt;p&gt;Continuing the example, let's say that the global sheet, the foo sheet
+ * and the baz sheet all contained values for a certain list setting.  Then 
+ * the resolved list would contain the list elements from the global sheet,
+ * followed by the list elements from the baz sheet, followed by the elements
+ * in the foo sheet.
+ * 
+ * 
  */
 package org.archive.settings;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472231">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5354]
	trunk/subclasses</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 22:58</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5354
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5354&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5354&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 15:58:07 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Eclipse .project and .classpath for new subclasses project.

Added Paths:
-----------
    trunk/subclasses/.classpath
    trunk/subclasses/.project
    trunk/subclasses/.settings/
    trunk/subclasses/.settings/org.eclipse.jdt.core.prefs

Added: trunk/subclasses/.classpath
===================================================================
--- trunk/subclasses/.classpath	                        (rev 0)
+++ trunk/subclasses/.classpath	2007-07-19 22:58:07 UTC (rev 5354)
@@ -0,0 +1,8 @@
+&lt;classpath&gt;
+  &lt;classpathentry kind="src" path="src/main/java"/&gt;
+  &lt;classpathentry kind="output" path="target/classes"/&gt;
+  &lt;classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/&gt;
+  &lt;classpathentry kind="var" path="M2_REPO/org/apache/maven/maven-plugin-api/2.0/maven-plugin-api-2.0.jar"/&gt;
+  &lt;classpathentry kind="var" path="M2_REPO/bcel/bcel/5.1/bcel-5.1.jar"/&gt;
+  &lt;classpathentry kind="var" path="M2_REPO/junit/junit/3.8.1/junit-3.8.1.jar"/&gt;
+&lt;/classpath&gt;
\ No newline at end of file

Added: trunk/subclasses/.project
===================================================================
--- trunk/subclasses/.project	                        (rev 0)
+++ trunk/subclasses/.project	2007-07-19 22:58:07 UTC (rev 5354)
@@ -0,0 +1,13 @@
+&lt;projectDescription&gt;
+  &lt;name&gt;subclasses&lt;/name&gt;
+  &lt;comment/&gt;
+  &lt;projects/&gt;
+  &lt;buildSpec&gt;
+    &lt;buildCommand&gt;
+      &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;
+    &lt;/buildCommand&gt;
+  &lt;/buildSpec&gt;
+  &lt;natures&gt;
+    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;
+  &lt;/natures&gt;
+&lt;/projectDescription&gt;
\ No newline at end of file

Added: trunk/subclasses/.settings/org.eclipse.jdt.core.prefs
===================================================================
--- trunk/subclasses/.settings/org.eclipse.jdt.core.prefs	                        (rev 0)
+++ trunk/subclasses/.settings/org.eclipse.jdt.core.prefs	2007-07-19 22:58:07 UTC (rev 5354)
@@ -0,0 +1,5 @@
+#Thu Jul 19 15:57:12 PDT 2007
+org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.5
+eclipse.preferences.version=1
+org.eclipse.jdt.core.compiler.source=1.5
+org.eclipse.jdt.core.compiler.compliance=1.5


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472228">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5353] trunk</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-19 22:55</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5353
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5353&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5353&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-19 15:55:49 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
First whack at a maven project for generating .options files based on  
.class files.  

Added Paths:
-----------
    trunk/subclasses/
    trunk/subclasses/pom.xml
    trunk/subclasses/src/
    trunk/subclasses/src/main/
    trunk/subclasses/src/main/java/
    trunk/subclasses/src/main/java/org/
    trunk/subclasses/src/main/java/org/archive/
    trunk/subclasses/src/main/java/org/archive/mojo/
    trunk/subclasses/src/main/java/org/archive/mojo/Config.java
    trunk/subclasses/src/main/java/org/archive/mojo/Generator.java
    trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java

Added: trunk/subclasses/pom.xml
===================================================================
--- trunk/subclasses/pom.xml	                        (rev 0)
+++ trunk/subclasses/pom.xml	2007-07-19 22:55:49 UTC (rev 5353)
@@ -0,0 +1,42 @@
+&lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
+  xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
+  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
+  &lt;groupId&gt;org.archive.mojo&lt;/groupId&gt;
+  &lt;artifactId&gt;subclasses&lt;/artifactId&gt;
+  &lt;packaging&gt;maven-plugin&lt;/packaging&gt;
+  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
+  &lt;name&gt;subclasses Maven Mojo&lt;/name&gt;
+  &lt;url&gt;<a href="http://maven.apache.org&lt;/url" target="_new">http://maven.apache.org&lt;/url</a>&gt;
+  &lt;dependencies&gt;
+    &lt;dependency&gt;
+      &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
+      &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;
+      &lt;version&gt;2.0&lt;/version&gt;
+    &lt;/dependency&gt;
+    &lt;dependency&gt;
+      &lt;groupId&gt;junit&lt;/groupId&gt;
+      &lt;artifactId&gt;junit&lt;/artifactId&gt;
+      &lt;version&gt;3.8.1&lt;/version&gt;
+      &lt;scope&gt;test&lt;/scope&gt;
+    &lt;/dependency&gt;
+        &lt;dependency&gt;
+          &lt;groupId&gt;bcel&lt;/groupId&gt;
+          &lt;artifactId&gt;bcel&lt;/artifactId&gt;
+          &lt;version&gt;5.1&lt;/version&gt;
+        &lt;/dependency&gt;
+  &lt;/dependencies&gt;
+
+  &lt;build&gt;
+    &lt;plugins&gt;
+      &lt;plugin&gt;
+        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
+        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
+        &lt;configuration&gt;
+          &lt;source&gt;1.5&lt;/source&gt;
+          &lt;target&gt;1.5&lt;/target&gt;
+        &lt;/configuration&gt;
+      &lt;/plugin&gt;
+     &lt;/plugins&gt;
+   &lt;/build&gt;
+
+&lt;/project&gt;

Added: trunk/subclasses/src/main/java/org/archive/mojo/Config.java
===================================================================
--- trunk/subclasses/src/main/java/org/archive/mojo/Config.java	                        (rev 0)
+++ trunk/subclasses/src/main/java/org/archive/mojo/Config.java	2007-07-19 22:55:49 UTC (rev 5353)
@@ -0,0 +1,43 @@
+package org.archive.mojo;
+
+import java.io.File;
+
+
+/**
+ * Configuration object for {@link Generator}.
+ * 
+ * @author pjack
+ */
+public class Config {
+
+    private File inputDir;
+    private File outputDir;
+
+
+    public Config() {
+    }
+
+
+    public File getInputDir() {
+        return inputDir;
+    }
+
+
+    public void setInputDir(File inputDir) {
+        this.inputDir = inputDir;
+    }
+
+
+    public File getOutputDir() {
+        return outputDir;
+    }
+
+
+    public void setOutputDir(File outputDir) {
+        this.outputDir = outputDir;
+    }
+
+    
+    
+    
+}

Added: trunk/subclasses/src/main/java/org/archive/mojo/Generator.java
===================================================================
--- trunk/subclasses/src/main/java/org/archive/mojo/Generator.java	                        (rev 0)
+++ trunk/subclasses/src/main/java/org/archive/mojo/Generator.java	2007-07-19 22:55:49 UTC (rev 5353)
@@ -0,0 +1,286 @@
+package org.archive.mojo;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileWriter;
+import java.io.IOException;
+import java.util.Arrays;
+import java.util.Collection;
+import java.util.Collections;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Map;
+import java.util.Set;
+import java.util.TreeSet;
+
+import org.apache.bcel.classfile.ClassParser;
+import org.apache.bcel.classfile.JavaClass;
+
+
+/**
+ * Generates lists of subclasses based on a directory of .class files.
+ * This class will recursively search a directory for .class files, building
+ * a giant in-memory map of what extends what.  Once all the class files are
+ * read &amp; parsed, text files are created in a designated output directory.
+ * 
+ * &lt;p&gt;The text files are laid out similar to .class files.  The path to the
+ * text file indicates the Java package name, and the name of the text file
+ * is base class name.  The text file will contain one line per known subclass
+ * of that Java class.  (Note that only public, nonabstract classes are listed.)
+ * 
+ * &lt;p&gt;Eg, when run against the Archive commons project, there will be a file
+ * named &lt;code&gt;java/util/Iterator&lt;/code&gt; in the output directory, and its
+ * contents will look something like:
+ * 
+ * &lt;pre&gt;
+ * org.archive.util.iterator.CompositeIterator
+ * org.archive.util.iterator.LineReadingIterator
+ * org.archive.util.iterator.LookaheadIterator
+ * org.archive.util.iterator.RegexpLineIterator
+ * org.archive.util.iterator.TransformingIteratorWrapper
+ * &lt;/pre&gt;
+ * 
+ * @author pjack
+ *
+ */
+public class Generator {
+
+    
+    final private static String EXTENSION = ".subclasses";
+    
+    
+    private File inputDir;
+    private File outputDir;
+    
+    
+    /**
+     * Fully-qualified class names of public, nonabstract classes.
+     */
+    private Set&lt;String&gt; implementations = new HashSet&lt;String&gt;();
+    
+    
+    /**
+     * Maps subclass name to list of immediate superclass/interfaces.
+     */
+    private Map&lt;String,Set&lt;String&gt;&gt; superclasses 
+        = new HashMap&lt;String,Set&lt;String&gt;&gt;();
+
+    
+    /**
+     * Maps subclass name to list of all superclass/interfaces.
+     * Includes the superclasses/superinterfaces of immediate
+     * superclasses/superinterfaces.
+     */
+    private Map&lt;String,Set&lt;String&gt;&gt; expanded
+        = new HashMap&lt;String,Set&lt;String&gt;&gt;();
+    
+    /**
+     * Maps superclass name to list of implementations.
+     */
+    private Map&lt;String,Set&lt;String&gt;&gt; subclasses
+        = new HashMap&lt;String,Set&lt;String&gt;&gt;();
+
+
+    
+    private Set&lt;String&gt; exclusions = new HashSet&lt;String&gt;();
+    
+    
+    /**
+     * Constructor.
+     * 
+     * @param config  Configuration parameters
+     */
+    public Generator(Config config) {
+        this.inputDir = config.getInputDir();
+        this.outputDir = config.getOutputDir();
+        this.superclasses = new HashMap&lt;String,Set&lt;String&gt;&gt;();
+    }
+
+
+    /**
+     * Adds the given collection of superclass names to the subclass-&gt;superclass
+     * map {@link #superclasses}.  This is non-recursive:  No attempt is 
+     * made to add the superclasses of the given superclasses.  That 
+     * recursive expansion happens in {@link #expandSupers}, after all 
+     * .class files have been parsed.
+     * 
+     * &lt;p&gt;For instance, when this phase is run against &lt;code&gt;rt.jar&lt;/code&gt;
+     * of the JDK, then {@link #superclasses} should include the following
+     * mapping:
+     * 
+     * &lt;pre&gt;
+     * java.awt.Button-&gt;{java.awt.Component, javax.accessibility.Accessible}
+     * &lt;/pre&gt;
+     * 
+     * @param sub      the fully-qualified name of the subclass
+     * @param supers   the fully-qualified names of superclasses 
+     *                     and/orinterfaces of that &lt;code&gt;sub&lt;/code&gt;
+     */
+    private void addSupers(String sub, Collection&lt;String&gt; supers) {
+        Set&lt;String&gt; set = superclasses.get(sub);
+        if (set == null) {
+            set = new HashSet&lt;String&gt;();
+            superclasses.put(sub, set);
+        }
+        set.addAll(supers);
+    }
+    
+
+    
+    /**
+     * Create the {@link #expanded} map based on the {@link #superclasses} map.
+     * Recursively expand subclass-&gt;superclass map.  All known superclasses
+     * of the listed superclasses are included.
+     * 
+     * &lt;p&gt;For instance, if {@link #superclasses} contained these mappings:
+     * 
+     * &lt;pre&gt;
+     * java.awt.Button-&gt;{java.awt.Component, javax.accessibility.Accessible}
+     * java.awt.Component-&gt;
+     * {java.lang.Object, java.awt.image.ImageObserver, 
+     * java.awt.MenuContainer, java.io.Serializable}
+     * &lt;/pre&gt;
+     * 
+     * Then after a call to this method, its mappings would change to:
+     * 
+     * &lt;pre&gt;
+     * java.awt.Button-&gt;
+     * {java.awt.Component, javax.accessibility.Accessible,
+     * java.lang.Object, java.awt.image.ImageObserver,  java.awt.MenuContainer, 
+     * java.io.Serializable}
+     * java.awt.Component-&gt;
+     * {java.lang.Object, java.awt.image.ImageObserver, 
+     * java.awt.MenuContainer, java.io.Serializable}
+     * &lt;/pre&gt;
+     */
+    private void expandSupers() {
+        for (Map.Entry&lt;String,Set&lt;String&gt;&gt; me: superclasses.entrySet()) {
+            expandSupers(me.getKey(), me.getValue());
+        }
+        superclasses = null;
+    }
+    
+
+    
+    private void expandSupers(String sub, Set&lt;String&gt; supers) {
+        Set&lt;String&gt; ex = expanded.get(sub);
+        if (ex == null) {
+            ex = new HashSet&lt;String&gt;();
+            ex.addAll(superclasses.get(sub));
+            expanded.put(sub, ex);
+        }
+        ex.addAll(supers);
+        for (String s: supers) {
+            Set&lt;String&gt; n = superclasses.get(s);
+            if (n != null) {
+                expandSupers(sub, n);
+            }
+        }
+    }
+    
+    
+    /**
+     * Create the {@link #subclasses} map based on the {@link #expanded}
+     * map.  
+     */
+    private void createSubs() {
+        for (Map.Entry&lt;String,Set&lt;String&gt;&gt; me: expanded.entrySet()) {
+            if (implementations.contains(me.getKey())) {
+                for (String superc: me.getValue()) {
+                    Set&lt;String&gt; subs = subclasses.get(superc);
+                    if (subs == null) {
+                        subs = new TreeSet&lt;String&gt;();
+                        subclasses.put(superc, subs);
+                    }
+                    subs.add(me.getKey());
+                }
+            }
+        }
+        expanded = null;
+    }
+
+    
+    /**
+     * Generates 
+     * @throws IOException
+     */
+    public void generate() throws IOException {
+        generate(inputDir);
+        expandSupers();
+        createSubs();
+        implementations.removeAll(exclusions);
+        writeSubs();
+    }
+    
+    
+    private void generate(File dir) throws IOException {
+        for (File f: dir.listFiles()) {
+            if (f.isDirectory()) {
+                generate(f);
+            } else if (f.getName().endsWith(".class")) {
+                processClass(f);
+            }
+        }
+    }
+    
+    
+    private void processClass(File f) throws IOException {
+        FileInputStream finp = null;
+        try {
+            finp = new FileInputStream(f);
+            ClassParser cp = new ClassParser(finp, f.getName());
+            JavaClass clazz = cp.parse();
+            String sub = clazz.getClassName();
+            addSupers(sub, Collections.singleton(clazz.getSuperclassName()));
+            addSupers(sub, Arrays.asList(clazz.getInterfaceNames()));
+            if (clazz.isPublic() &amp;&amp; !clazz.isAbstract()) {
+                implementations.add(sub);
+            }
+        } finally {
+            if (finp != null) try {
+                finp.close();
+            } catch (IOException e) {
+                e.printStackTrace();
+            }
+        }
+    }
+
+    
+    private void writeSubs() throws IOException {
+        for (Map.Entry&lt;String,Set&lt;String&gt;&gt; me: subclasses.entrySet()) {
+            String superclass = me.getKey();
+            String path = superclass.replace('.', '/');
+            File file = new File(outputDir, path + EXTENSION);
+            file.getParentFile().mkdirs();
+
+            FileWriter fw = null;
+            try {
+                fw = new FileWriter(file, true);
+                for (String sub: me.getValue()) {
+                    fw.write(sub);
+                    fw.write('\n');
+                }
+            } finally {
+                if (fw != null) try {
+                    fw.close();
+                } catch (IOException e) {
+                    e.printStackTrace();
+                }
+            }
+        }
+    }
+
+
+    public static void main(String args[]) throws Exception {
+        Config config = new Config();
+        File input = new File(args[0]);
+        File output = new File(args[1]);
+        output.mkdirs();
+        
+        config.setInputDir(input);
+        config.setOutputDir(output);
+        Generator engine = new Generator(config);
+        engine.generate();
+    }
+
+}

Added: trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java
===================================================================
--- trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java	                        (rev 0)
+++ trunk/subclasses/src/main/java/org/archive/mojo/SubclassesMojo.java	2007-07-19 22:55:49 UTC (rev 5353)
@@ -0,0 +1,81 @@
+package org.archive.mojo;
+
+/*
+ * Copyright 2001-2005 The Apache Software Foundation.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+import org.apache.maven.plugin.AbstractMojo;
+import org.apache.maven.plugin.MojoExecutionException;
+
+import java.io.File;
+import java.io.FileWriter;
+import java.io.IOException;
+
+/**
+ * Goal which touches a timestamp file.
+ *
+ * @goal touch
+ * 
+ * @phase process-sources
+ */
+public class SubclassesMojo
+    extends AbstractMojo
+{
+    /**
+     * Location of the file.
+     * @parameter expression="${project.build.directory}"
+     * @required
+     */
+    private File outputDirectory;
+
+    public void execute()
+        throws MojoExecutionException
+    {
+        File f = outputDirectory;
+
+        if ( !f.exists() )
+        {
+            f.mkdirs();
+        }
+
+        File touch = new File( f, "touch.txt" );
+
+        FileWriter w = null;
+        try
+        {
+            w = new FileWriter( touch );
+
+            w.write( "touch.txt" );
+        }
+        catch ( IOException e )
+        {
+            throw new MojoExecutionException( "Error creating file " + touch, e );
+        }
+        finally
+        {
+            if ( w != null )
+            {
+                try
+                {
+                    w.close();
+                }
+                catch ( IOException e )
+                {
+                    // ignore
+                }
+            }
+        }
+    }
+}


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472226">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5352]
 branches/pjack_settings/heritrix/webui/
 src/main/webapp/sheets/page_sheets.jsp</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-19 15:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5352
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5352&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5352&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 08:06:13 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Remove 'Sheet Bundle' reference - operator-built bundles an unnecessary complication
* page_sheets.jsp
    remove 'Sheet Bundle' reference

Modified Paths:
--------------
    branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheets.jsp

Modified: branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheets.jsp
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheets.jsp	2007-07-19 15:04:05 UTC (rev 5351)
+++ branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheets.jsp	2007-07-19 15:06:13 UTC (rev 5352)
@@ -87,9 +87,6 @@
 
 &lt;a href="do_show_add_single_sheet.jsp?&lt;%=Text.jobQueryString(request)%&gt;"&gt;
 Add Single Sheet...
-&lt;/a&gt;&lt;br/&gt;
-&lt;a href="do_show_add_sheet_bundle.jsp?&lt;%=Text.jobQueryString(request)%&gt;"&gt;
-Add Sheet Bundle...
 &lt;/a&gt;
 
 &lt;h3&gt;Test Settings&lt;/h3&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472224">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5351]
 branches/pjack_settings/heritrix/engine /src/main/java/org/archive/crawler</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;gojomo@us...&gt; -	2007-07-19 15:04</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5351
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5351&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5351&amp;view=rev</a>
Author:   gojomo
Date:     2007-07-19 08:04:05 -0700 (Thu, 19 Jul 2007)

Log Message:
-----------
Fix for [#HER-1217] sheet overrides still don't work for 'slowly' example
* CrawlURI.java
    pass SURT, not plain URI, into SheetManager to find applicable settings
* AbstractFrontier.java, WorkQueueFrontier.java
    for overridable settings, look-up via CrawlURI to allow overrides to take effect

Modified Paths:
--------------
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/datamodel/CrawlURI.java
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/AbstractFrontier.java
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/WorkQueueFrontier.java

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/datamodel/CrawlURI.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/datamodel/CrawlURI.java	2007-07-18 00:30:54 UTC (rev 5350)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/datamodel/CrawlURI.java	2007-07-19 15:04:05 UTC (rev 5351)
@@ -62,6 +62,7 @@
 import org.archive.util.Base32;
 import org.archive.util.Recorder;
 import org.archive.util.Reporter;
+import org.archive.util.SURT;
 
 
 /**
@@ -1489,7 +1490,7 @@
     
     public void setStateProvider(SheetManager manager) {
         this.manager = manager;
-        this.provider = manager.findConfig(toString());
+        this.provider = manager.findConfig(SURT.fromURI(toString()));
     }
     
     

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/AbstractFrontier.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/AbstractFrontier.java	2007-07-18 00:30:54 UTC (rev 5350)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/AbstractFrontier.java	2007-07-19 15:04:05 UTC (rev 5351)
@@ -601,7 +601,7 @@
         }
 
         // optionally preferencing embeds up to MEDIUM
-        int prefHops = get(PREFERENCE_EMBED_HOPS); 
+        int prefHops = curi.get(this,PREFERENCE_EMBED_HOPS); 
         if (prefHops &gt; 0) {
             int embedHops = curi.getTransHops();
             if (embedHops &gt; 0 &amp;&amp; embedHops &lt;= prefHops
@@ -648,7 +648,7 @@
     protected long retryDelayFor(CrawlURI curi) {
         int status = curi.getFetchStatus();
         return (status == S_CONNECT_FAILED || status == S_CONNECT_LOST ||
-                status == S_DOMAIN_UNRESOLVABLE)? get(RETRY_DELAY_SECONDS) : 0;
+                status == S_DOMAIN_UNRESOLVABLE)? curi.get(this,RETRY_DELAY_SECONDS) : 0;
                 // no delay for most
     }
 
@@ -669,22 +669,22 @@
 
             long completeTime = curi.getFetchCompletedTime();
             long durationTaken = (completeTime - curi.getFetchBeginTime());
-            durationToWait = (long)(get(DELAY_FACTOR) * durationTaken);
+            durationToWait = (long)(curi.get(this,DELAY_FACTOR) * durationTaken);
 
-            long minDelay = get(MIN_DELAY_MS);
+            long minDelay = curi.get(this,MIN_DELAY_MS);
             if (minDelay &gt; durationToWait) {
                 // wait at least the minimum
                 durationToWait = minDelay;
             }
 
-            long maxDelay = get(MAX_DELAY_MS);
+            long maxDelay = curi.get(this,MAX_DELAY_MS);
             if (durationToWait &gt; maxDelay) {
                 // wait no more than the maximum
                 durationToWait = maxDelay;
             }
 
             long now = System.currentTimeMillis();
-            int maxBandwidthKB = get(MAX_PER_HOST_BANDWIDTH_USAGE_KB_SEC);
+            int maxBandwidthKB = curi.get(this, MAX_PER_HOST_BANDWIDTH_USAGE_KB_SEC);
             if (maxBandwidthKB &gt; 0) {
                 // Enforce bandwidth limit
                 ServerCache cache = controller.getServerCache();
@@ -798,7 +798,7 @@
 
     protected boolean overMaxRetries(CrawlURI curi) {
         // never retry more than the max number of times
-        if (curi.getFetchAttempts() &gt;= get(MAX_RETRIES)) {
+        if (curi.getFetchAttempts() &gt;= curi.get(this,MAX_RETRIES)) {
             return true;
         }
         return false;
@@ -945,7 +945,7 @@
      * @return a String token representing a queue
      */
     public String getClassKey(CrawlURI cauri) {
-        String queueKey = get(FORCE_QUEUE_ASSIGNMENT);
+        String queueKey = cauri.get(this,FORCE_QUEUE_ASSIGNMENT);
         if ("".equals(queueKey)) {
             // Typical case, barring overrides
             queueKey = cauri.get(this, QUEUE_ASSIGNMENT_POLICY).getClassKey(

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/WorkQueueFrontier.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/WorkQueueFrontier.java	2007-07-18 00:30:54 UTC (rev 5350)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/frontier/WorkQueueFrontier.java	2007-07-19 15:04:05 UTC (rev 5351)
@@ -596,7 +596,7 @@
     private int getCost(CrawlURI curi) {
         int cost = curi.getHolderCost();
         if (cost == CrawlURI.UNCALCULATED) {
-            cost = get(COST_POLICY).costOf(curi);
+            cost = curi.get(this,COST_POLICY).costOf(curi);
             curi.setHolderCost(cost);
         }
         return cost;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472222">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5350]
 branches/pjack_settings/heritrix/webui/ src/main/webapp/include/nav.jsp</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;kristinn_sig@us...&gt; -	2007-07-18 00:30</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5350
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5350&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5350&amp;view=rev</a>
Author:   kristinn_sig
Date:     2007-07-17 17:30:54 -0700 (Tue, 17 Jul 2007)

Log Message:
-----------
* webui/src/main/webapp/include/nav.jsp
Changed 'Crawler' header to read 'Crawl Engine' to match new terminology.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp

Modified: branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp	2007-07-17 19:27:15 UTC (rev 5349)
+++ branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp	2007-07-18 00:30:54 UTC (rev 5350)
@@ -42,7 +42,7 @@
 &lt;% } %&gt;
 
 &lt;% if (the_crawler != null) { %&gt;
-    &lt;b&gt;Crawler:&lt;/b&gt; 
+    &lt;b&gt;Crawl Engine:&lt;/b&gt; 
     &lt;a href="&lt;%=request.getContextPath()%&gt;/crawler_area/do_show_crawler.jsp?&lt;%=the_crawler.getQueryString()%&gt;"&gt;
         &lt;%=Text.html(the_crawler.getLegend())%&gt;
     &lt;/a&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472215">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5347]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/settings/SingleSheet.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-16 22:14</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5347
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5347&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5347&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-16 15:14:40 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
Fix for HER-1201.

* commons/src/main/java/org/archive/settings/SingleSheet.java
(set): Don't bother validating constraints for null values.  A null 
value means the setting is being removed from the sheet.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SingleSheet.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SingleSheet.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SingleSheet.java	2007-07-16 22:06:58 UTC (rev 5346)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SingleSheet.java	2007-07-16 22:14:40 UTC (rev 5347)
@@ -275,6 +275,13 @@
             throw new IllegalArgumentException(
                     "Attempt to set key value on null module.");
         }
+        
+        if (value == null) {
+            // Skip constraint checking because we're removing a setting.
+            set2(module, key, value);
+            return;
+        }
+        
         Class vtype = (value == null) ? null: value.getClass();
         validateTypes(module, key, vtype);
         T v = key.getType().cast(value);


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472213">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5346]
 branches/pjack_settings/heritrix/webui/
 src/main/webapp/sheets/page_sheet_editor.jsp</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;kristinn_sig@us...&gt; -	2007-07-16 22:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5346
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5346&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5346&amp;view=rev</a>
Author:   kristinn_sig
Date:     2007-07-16 15:06:58 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
* webui/src/main/webapp/sheets/page_sheet_editor.jsp
Added anchors to settings so that when add/remove and the page is refreshed the user is taken directly to the relevant setting

Modified Paths:
--------------
    branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheet_editor.jsp

Modified: branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheet_editor.jsp
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheet_editor.jsp	2007-07-16 22:05:51 UTC (rev 5345)
+++ branches/pjack_settings/heritrix/webui/src/main/webapp/sheets/page_sheet_editor.jsp	2007-07-16 22:06:58 UTC (rev 5346)
@@ -1,124 +1,124 @@
-&lt;%@ page import="java.util.Collection" %&gt;
-&lt;%@ page import="java.util.Map" %&gt;
-&lt;%@ page import="javax.management.openmbean.CompositeData" %&gt;
-&lt;%@ page import="org.archive.crawler.webui.Crawler" %&gt;
-&lt;%@ page import="org.archive.crawler.webui.Setting" %&gt;
-&lt;%@ page import="org.archive.crawler.webui.Settings" %&gt;
-&lt;%@ page import="org.archive.crawler.webui.Text" %&gt;
-&lt;%
-
-Crawler crawler = (Crawler)Text.get(request, "crawler");
-String editedSheet = (String)Text.get(request, "sheet");
-Settings settings = (Settings)Text.get(request, "settings");
-
-int row = 1;
-int count = 0;
-
-%&gt;
-&lt;%@page import="org.apache.commons.lang.StringUtils"%&gt;
-&lt;html&gt;
-&lt;head&gt;
-&lt;%@include file="/include/header.jsp"%&gt;
-&lt;title&gt;Heritrix &lt;%=Text.html(crawler.getLegend())%&gt;&lt;/title&gt;
-&lt;/head&gt;
-&lt;body&gt;
-
-&lt;%@include file="/include/nav.jsp"%&gt;
-
-&lt;h3&gt;Settings for sheet "&lt;%=editedSheet%&gt;":&lt;/h3&gt;
-
-&lt;div class="indent"&gt;
-&lt;form action="do_save_single_sheet.jsp" method="post"&gt;
-
-&lt;% Text.printSheetFormFields(request, out); %&gt;
-
-&lt;% 
-String previousPath = "";
-int previousIndent = 0; 
-for (Setting setting: settings.getSettings()) {
-    String path = setting.getPath();
-    int lastColon = path.lastIndexOf(':');
-    String pathPrefix = path.substring(0,(lastColon&gt;=0)?lastColon+1:0);
-    String pathLast = path.substring((lastColon&gt;=0)?lastColon+1:0,path.length());
-    String type = setting.getType();
-    String value = setting.getValue();
-    String[] sheets = setting.getSheets();
-    if (sheets == null) {
-        sheets = new String[] { "foo" };
-    }
-    String error = setting.getErrorMessage();
-    String disabled = sheets[0].equals(editedSheet) ? "" : "disabled=\"disabled\"";
-    String qs = Text.sheetQueryString(request) + "&amp;path=" + path + "&amp;type=" + type + "&amp;value=" + Text.query(value);
-    row = -row + 1;
-    count++;
-    if(path.startsWith(previousPath) &amp;&amp; path.charAt(previousPath.length())==':') {
-%&gt;
-        &lt;div class="subsettings"&gt;
-&lt;%
-    }
-    int indent = StringUtils.split(path,':').length - 1;
-    while(previousIndent&gt;indent) {
-%&gt;
-        &lt;/div&gt;
-&lt;%
-        previousIndent--;
-    }
-    previousIndent = indent; 
-    previousPath = path; 
-%&gt;
-
-&lt;div class="editSetting"&gt;
-
- &lt;span class="settingPath" title="&lt;%=Text.html(path)%&gt;"&gt;
- &lt;%=Text.html(pathLast)%&gt;
- &lt;/span&gt;
- 
- &amp;nbsp;&amp;nbsp;
-
-&lt;% for (String sheet: sheets) { %&gt;
-   &lt;span title="Sheet(s) where this setting is defined." class="settingSource"&gt;&lt;%=Text.html(sheet)%&gt;&lt;/span&gt;
-&lt;% } %&gt;
-    
- &lt;% if (error != null) { %&gt;
-   &lt;br/&gt;
-   &lt;span class="alert"&gt;Problem: &lt;%=Text.html(error)%&gt;&lt;/span&gt;
- &lt;% } %&gt;&lt;br/&gt;
- &lt;input type="hidden" name="&lt;%=count%&gt;" value="&lt;%=Text.attr(path)%&gt;"&gt;
- &lt;% settings.printFormField(out, setting); %&gt;
-  &lt;% if (settings.canOverride(setting)) { %&gt;
-  &lt;% if (sheets[0].equals(editedSheet)) { %&gt;
-    &lt;a class="rowLink" href="do_remove_path.jsp?&lt;%=qs%&gt;"
-       title="Remove setting from current sheet."&gt;remove&lt;/a&gt;
-  &lt;% } else { %&gt;
-    &lt;a class="rowLink" href="do_override_path.jsp?&lt;%=qs%&gt;"
-       title="Add a value for this setting to the current sheet."&gt;add&lt;/a&gt;  
-  &lt;% } %&gt;
-  &lt;% } %&gt;
-  &lt;a 
-    class="rowLink"
-    href="do_show_path_detail.jsp?&lt;%=qs%&gt;"
-    title="View details for this setting."&gt;details&lt;/a&gt;
-&lt;/div&gt;
-
-&lt;% } // end for %&gt; 
-&lt;%
-while(previousIndent&gt;0) {
-    %&gt;
-    &lt;/div&gt;
-    &lt;%
-      previousIndent--;
-}
-%&gt;
-
-&lt;br/&gt;
-
-&lt;input type="Submit" value="Submit Changes"/&gt; &lt;br/&gt;
-
-Note: you must also 'commit' any changes in the job's 
-&lt;a href="&lt;%=request.getContextPath()%&gt;/sheets/do_show_sheets.jsp?&lt;%=Text.jobQueryString(request)%&gt;"&gt;
-sheets overview page&lt;/a&gt; to make changes permanent on disk. 
-&lt;/form&gt;
-&lt;/div&gt;
-
-&lt;/body&gt;
+&lt;%@ page import="java.util.Collection" %&gt;
+&lt;%@ page import="java.util.Map" %&gt;
+&lt;%@ page import="javax.management.openmbean.CompositeData" %&gt;
+&lt;%@ page import="org.archive.crawler.webui.Crawler" %&gt;
+&lt;%@ page import="org.archive.crawler.webui.Setting" %&gt;
+&lt;%@ page import="org.archive.crawler.webui.Settings" %&gt;
+&lt;%@ page import="org.archive.crawler.webui.Text" %&gt;
+&lt;%
+
+Crawler crawler = (Crawler)Text.get(request, "crawler");
+String editedSheet = (String)Text.get(request, "sheet");
+Settings settings = (Settings)Text.get(request, "settings");
+
+int row = 1;
+int count = 0;
+
+%&gt;
+&lt;%@page import="org.apache.commons.lang.StringUtils"%&gt;
+&lt;html&gt;
+&lt;head&gt;
+&lt;%@include file="/include/header.jsp"%&gt;
+&lt;title&gt;Heritrix &lt;%=Text.html(crawler.getLegend())%&gt;&lt;/title&gt;
+&lt;/head&gt;
+&lt;body&gt;
+
+&lt;%@include file="/include/nav.jsp"%&gt;
+
+&lt;h3&gt;Settings for sheet "&lt;%=editedSheet%&gt;":&lt;/h3&gt;
+
+&lt;div class="indent"&gt;
+&lt;form action="do_save_single_sheet.jsp" method="post"&gt;
+
+&lt;% Text.printSheetFormFields(request, out); %&gt;
+
+&lt;% 
+String previousPath = "";
+int previousIndent = 0; 
+for (Setting setting: settings.getSettings()) {
+    String path = setting.getPath();
+    int lastColon = path.lastIndexOf(':');
+    String pathPrefix = path.substring(0,(lastColon&gt;=0)?lastColon+1:0);
+    String pathLast = path.substring((lastColon&gt;=0)?lastColon+1:0,path.length());
+    String type = setting.getType();
+    String value = setting.getValue();
+    String[] sheets = setting.getSheets();
+    if (sheets == null) {
+        sheets = new String[] { "foo" };
+    }
+    String error = setting.getErrorMessage();
+    String disabled = sheets[0].equals(editedSheet) ? "" : "disabled=\"disabled\"";
+    String qs = Text.sheetQueryString(request) + "&amp;path=" + path + "&amp;type=" + type + "&amp;value=" + Text.query(value);
+    row = -row + 1;
+    count++;
+    if(path.startsWith(previousPath) &amp;&amp; path.charAt(previousPath.length())==':') {
+%&gt;
+        &lt;div class="subsettings"&gt;
+&lt;%
+    }
+    int indent = StringUtils.split(path,':').length - 1;
+    while(previousIndent&gt;indent) {
+%&gt;
+        &lt;/div&gt;
+&lt;%
+        previousIndent--;
+    }
+    previousIndent = indent; 
+    previousPath = path; 
+%&gt;
+
+&lt;div class="editSetting"&gt;
+
+ &lt;span class="settingPath" title="&lt;%=Text.html(path)%&gt;"&gt;
+ &lt;a name="&lt;%=Text.attr(path)%&gt;"&gt;&lt;/a&gt;&lt;%=Text.html(pathLast)%&gt;
+ &lt;/span&gt;
+ 
+ &amp;nbsp;&amp;nbsp;
+
+&lt;% for (String sheet: sheets) { %&gt;
+   &lt;span title="Sheet(s) where this setting is defined." class="settingSource"&gt;&lt;%=Text.html(sheet)%&gt;&lt;/span&gt;
+&lt;% } %&gt;
+    
+ &lt;% if (error != null) { %&gt;
+   &lt;br/&gt;
+   &lt;span class="alert"&gt;Problem: &lt;%=Text.html(error)%&gt;&lt;/span&gt;
+ &lt;% } %&gt;&lt;br/&gt;
+ &lt;input type="hidden" name="&lt;%=count%&gt;" value="&lt;%=Text.attr(path)%&gt;"&gt;
+ &lt;% settings.printFormField(out, setting); %&gt;
+  &lt;% if (settings.canOverride(setting)) { %&gt;
+  &lt;% if (sheets[0].equals(editedSheet)) { %&gt;
+    &lt;a class="rowLink" href="do_remove_path.jsp?&lt;%=qs%&gt;#&lt;%=Text.attr(path)%&gt;"
+       title="Remove setting from current sheet."&gt;remove&lt;/a&gt;
+  &lt;% } else { %&gt;
+    &lt;a class="rowLink" href="do_override_path.jsp?&lt;%=qs%&gt;#&lt;%=Text.attr(path)%&gt;"
+       title="Add a value for this setting to the current sheet."&gt;add&lt;/a&gt;  
+  &lt;% } %&gt;
+  &lt;% } %&gt;
+  &lt;a 
+    class="rowLink"
+    href="do_show_path_detail.jsp?&lt;%=qs%&gt;"
+    title="View details for this setting."&gt;details&lt;/a&gt;
+&lt;/div&gt;
+
+&lt;% } // end for %&gt; 
+&lt;%
+while(previousIndent&gt;0) {
+    %&gt;
+    &lt;/div&gt;
+    &lt;%
+      previousIndent--;
+}
+%&gt;
+
+&lt;br/&gt;
+
+&lt;input type="Submit" value="Submit Changes"/&gt; &lt;br/&gt;
+
+Note: you must also 'commit' any changes in the job's 
+&lt;a href="&lt;%=request.getContextPath()%&gt;/sheets/do_show_sheets.jsp?&lt;%=Text.jobQueryString(request)%&gt;"&gt;
+sheets overview page&lt;/a&gt; to make changes permanent on disk. 
+&lt;/form&gt;
+&lt;/div&gt;
+
+&lt;/body&gt;
 &lt;/html&gt;
\ No newline at end of file


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472209">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5344]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/settings/file/FileSheetManager.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-16 21:15</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5344
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5344&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5344&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-16 14:15:31 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
Further work on HER-1198.

* commons/src/main/java/org/archive/settings/file/FileSheetManager.java
(associate)
(disassociate): sync bdb after updates.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 20:09:57 UTC (rev 5343)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 21:15:31 UTC (rev 5344)
@@ -201,6 +201,9 @@
     final private Map&lt;String, Sheet&gt; sheets;
 
     /** The database of associations. Maps string context to sheet names. */
+    final private Database surtToSheetsDB;
+    
+    /** The database of associations. Maps string context to sheet names. */
     final private StoredSortedMap surtToSheets;
 
   
@@ -297,12 +300,13 @@
         DatabaseConfig config = new DatabaseConfig();
         config.setAllowCreate(true);
         config.setSortedDuplicates(true);
-        Database db = bdb.openDatabase("surtToSheets", config, true);
+        config.setDeferredWrite(true);
+        surtToSheetsDB = bdb.openDatabase("surtToSheets", config, true);
         EntryBinding stringBinding 
             = TupleBinding.getPrimitiveBinding(String.class);
         
         this.surtToSheets = new StoredSortedMap(
-                db, stringBinding, stringBinding, true); 
+                surtToSheetsDB, stringBinding, stringBinding, true); 
         
         reload();
     }
@@ -452,6 +456,11 @@
         for (String s : strings) {
             surtToSheets.put(s, sheet.getName());
         }
+        try {
+            surtToSheetsDB.sync();
+        } catch (DatabaseException e) {
+            throw new IllegalStateException(e);
+        }
     }
 
     @Override @SuppressWarnings("unchecked")
@@ -459,6 +468,11 @@
         for (String s: strings) {
             surtToSheets.duplicates(s).remove(sheet.getName());
         }
+        try {
+            surtToSheetsDB.sync();
+        } catch (DatabaseException e) {
+            throw new IllegalStateException(e);                
+        }
     }
 
     @Override @SuppressWarnings("unchecked")


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472212">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5345]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/settings/file/FileSheetManager.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;kristinn_sig@us...&gt; -	2007-07-16 22:05</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5345
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5345&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5345&amp;view=rev</a>
Author:   kristinn_sig
Date:     2007-07-16 15:05:51 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
* common/src/main/java/org/archive/settings/file/FileSheetManager.java
Changed renaming of temp files to work under Windows as well as Linux. 

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 21:15:31 UTC (rev 5344)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 22:05:51 UTC (rev 5345)
@@ -725,8 +725,14 @@
         }
 
         File saved = new File(sheetsDir, ss.getName() + SINGLE_EXT);
-        if (!temp.renameTo(saved)) {
-            LOGGER.severe("Could not rename temp file for " + ss.getName());
+        try {
+            // Copy temp -&gt; Saved
+            org.apache.commons.io.FileUtils.copyFile(temp, saved, true);
+            // Remove temp
+            org.apache.commons.io.FileUtils.forceDelete(temp);
+        } catch (IOException e) {
+            LOGGER.log(Level.SEVERE, 
+                    "Could not rename temp file for " + ss.getName(), e);
         }
     }
 
@@ -754,8 +760,14 @@
         }
 
         File saved = new File(sheetsDir, sb.getName() + BUNDLE_EXT);
-        if (!temp.renameTo(saved)) {
-            LOGGER.severe("Could not rename temp file for " + sb.getName());
+        try {
+            // Copy temp -&gt; Saved
+            org.apache.commons.io.FileUtils.copyFile(temp, saved, true);
+            // Remove temp
+            org.apache.commons.io.FileUtils.forceDelete(temp);
+        } catch (IOException e) {
+            LOGGER.log(Level.SEVERE, 
+                    "Could not rename temp file for " + sb.getName(), e);
         }
     }
 


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472207">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5343]
 branches/pjack_settings/heritrix/engine
 /src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-16 20:09</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5343
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5343&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5343&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-16 13:09:57 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
Work for HER-1198.

* engine/src/main/java/org/archive/crawler/frontier/CrawlJobManagerImpl.java
(closeProfile): Find &amp; unregister JMXSheetManager beans.
(launchProfile): Close profile before launching it.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java

Modified: branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java
===================================================================
--- branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java	2007-07-16 20:07:09 UTC (rev 5342)
+++ branches/pjack_settings/heritrix/engine/src/main/java/org/archive/crawler/framework/CrawlJobManagerImpl.java	2007-07-16 20:09:57 UTC (rev 5343)
@@ -36,7 +36,6 @@
 import java.util.Arrays;
 import java.util.HashMap;
 import java.util.HashSet;
-import java.util.Hashtable;
 import java.util.List;
 import java.util.Map;
 import java.util.Set;
@@ -46,17 +45,20 @@
 import javax.management.InstanceNotFoundException;
 import javax.management.MBeanRegistrationException;
 import javax.management.MBeanServer;
+import javax.management.MBeanServerConnection;
 import javax.management.MalformedObjectNameException;
 import javax.management.NotCompliantMBeanException;
 import javax.management.Notification;
 import javax.management.NotificationFilter;
 import javax.management.NotificationListener;
 import javax.management.ObjectName;
+import javax.management.remote.JMXConnector;
 
 import org.archive.crawler.Heritrix;
 import org.archive.crawler.event.CrawlStatusListener;
 import org.archive.crawler.util.LogRemoteAccessImpl;
 import org.archive.openmbeans.annotations.Bean;
+import org.archive.openmbeans.annotations.BeanProxy;
 import org.archive.settings.DefaultCheckpointRecovery;
 import org.archive.settings.ListModuleListener;
 import org.archive.settings.ModuleListener;
@@ -64,6 +66,7 @@
 import org.archive.settings.SheetManager;
 import org.archive.settings.file.FileSheetManager;
 import org.archive.settings.jmx.JMXModuleListener;
+import org.archive.settings.jmx.JMXSheetManager;
 import org.archive.settings.jmx.JMXSheetManagerImpl;
 import org.archive.settings.path.PathValidator;
 import org.archive.util.FileUtils;
@@ -144,7 +147,7 @@
     }
 
     
-    public void openProfile(String profile) throws IOException {
+    public synchronized void openProfile(String profile) throws IOException {
         File src = new File(getProfilesDir(), profile);
         
         if (!src.exists()) {
@@ -185,20 +188,49 @@
     }
 
     
-    public void closeProfile(String profile) {
-        File src = new File(getProfilesDir(), profile);
-        
-        if (!src.exists()) {
-            throw new IllegalArgumentException("No such profile: " + profile);
+    public synchronized void closeProfile(String profile) {
+        String query = "org.archive.crawler:*," +
+        "name=" + profile +
+        ",type=" + JMXSheetManager.class.getName();
+
+        try {
+            @SuppressWarnings("unchecked")
+            Set&lt;ObjectName&gt; set = server.queryNames(null, new ObjectName(query));
+            for (ObjectName name: set) {
+                    JMXSheetManager jsm =
+                        BeanProxy.proxy(server, name, JMXSheetManager.class);
+                    if (!jsm.isOnline()) {
+                        jsm.offlineCleanup();
+                        unregister(name);
+                    }
+            }
+        } catch (Exception e) {
+            e.printStackTrace();
+            System.exit(1);
+            throw new IllegalStateException(e);
         }
+    }
+    
+    
+    public static Set&lt;ObjectName&gt; find(JMXConnector jmxc, String query) {
+        try {
+            MBeanServerConnection conn = jmxc.getMBeanServerConnection();
+            @SuppressWarnings("unchecked")
+            Set&lt;ObjectName&gt; set = conn.queryNames(null, new ObjectName(query));
+            return set;
+        } catch (IOException e) {
+            throw new IllegalStateException(e);
+        } catch (MalformedObjectNameException e) {
+            throw new IllegalStateException(e);
+        }
         
-        ObjectName sm = name(profile, "SheetManager");
-        unregister(sm);
     }
+
     
     
-    public void launchProfile(String profile, final String job) 
+    public synchronized void launchProfile(String profile, final String job) 
     throws IOException {
+        closeProfile(profile);
         File src = new File(getProfilesDir(), profile);
         File dest = new File(getJobsDir(), job);
         
@@ -274,19 +306,8 @@
         
         jobs.put(job, cc);
     }
-    
-    
-    private ObjectName name(String name, String type) {
-        try {
-            Hashtable&lt;String,String&gt; ht = new Hashtable&lt;String,String&gt;();
-            ht.put("name", name);
-            ht.put("type", type);
-            return new ObjectName(DOMAIN, ht);
-        } catch (MalformedObjectNameException e) {
-            throw new IllegalStateException(e);
-        }
-    }
 
+
     
     private ObjectName register(Object o, ObjectName oname) {
         try {


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472205">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5342]
 branches/pjack_settings/heritrix/
 commons/src/main/java/org/archive/settings</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;paul_jack@us...&gt; -	2007-07-16 20:07</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5342
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5342&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5342&amp;view=rev</a>
Author:   paul_jack
Date:     2007-07-16 13:07:09 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
Added option for graceful cleanup of offline FileSheetManagers.

* commons/src/main/java/org/archive/settings/SheetManager.java
(offlineCleanup): New specification for a method that closes the manager's 
bootstrap objects.

* commons/src/main/java/org/archive/settings/MemorySheetManager.java
(offlineCleanup): Does nothing.

* commons/src/main/java/org/archive/settings/file/FileSheetManager.java
(offlineCleanup): Closes the bdb environment.

* commons/src/main/java/org/archive/settings/jmx/JMXSheetManager.java
(offlineCleanup): JMX-exposed version of the method.

* commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java
(offlineCleanup): Delegate to underlying manager.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/MemorySheetManager.java
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SheetManager.java
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManager.java
    branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/MemorySheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/MemorySheetManager.java	2007-07-16 19:26:49 UTC (rev 5341)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/MemorySheetManager.java	2007-07-16 20:07:09 UTC (rev 5342)
@@ -322,4 +322,9 @@
         }
         return result;
     }
+    
+    
+    public void offlineCleanup() {
+        
+    }
 }

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SheetManager.java	2007-07-16 19:26:49 UTC (rev 5341)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/SheetManager.java	2007-07-16 20:07:09 UTC (rev 5342)
@@ -80,6 +80,10 @@
     final public static Key&lt;SheetManager&gt; MANAGER = 
         Key.make(SheetManager.class, null);
 
+    static {
+        KeyManager.addKeys(SheetManager.class);
+    }
+    
     /**
      * Constructor.
      */
@@ -89,7 +93,6 @@
         moduleListeners.add(checkpointables);
         moduleListeners.add(closeables);
         moduleListeners.add(finishables);
-        KeyManager.addKeys(getClass());
     }
     
     
@@ -413,4 +416,5 @@
     public abstract Collection&lt;String&gt; listContexts(String sheetName, 
             int ofs, int len);
 
+    public abstract void offlineCleanup();
 }

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 19:26:49 UTC (rev 5341)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/file/FileSheetManager.java	2007-07-16 20:07:09 UTC (rev 5342)
@@ -915,4 +915,8 @@
         return result;
     }
 
+    
+    public void offlineCleanup() {
+        bdb.close();
+    }
 }

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManager.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManager.java	2007-07-16 19:26:49 UTC (rev 5341)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManager.java	2007-07-16 20:07:09 UTC (rev 5342)
@@ -223,4 +223,6 @@
             @Parameter(name="start", desc="The number of contexts to skip before listing.")
             int start);
 
+    @Operation(desc="Cleans up an offline manager.")
+    void offlineCleanup();
 }

Modified: branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java
===================================================================
--- branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java	2007-07-16 19:26:49 UTC (rev 5341)
+++ branches/pjack_settings/heritrix/commons/src/main/java/org/archive/settings/jmx/JMXSheetManagerImpl.java	2007-07-16 20:07:09 UTC (rev 5342)
@@ -484,4 +484,10 @@
         Collection&lt;String&gt; c = manager.listContexts(sheetName, start, 100);
         return c.toArray(new String[c.size()]);
     }
+
+
+    public synchronized void offlineCleanup() {
+        manager.offlineCleanup();
+    }
+
 }


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=13472203">[Archive-crawler-cvs] SF.net SVN: archive-crawler: [5341]
 branches/pjack_settings/heritrix/webui/ src/main</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;kristinn_sig@us...&gt; -	2007-07-16 19:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Revision: 5341
          <a href="http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5341&amp;view=rev" target="_new">http://archive-crawler.svn.sourceforge.net/archive-crawler/?rev=5341&amp;view=rev</a>
Author:   kristinn_sig
Date:     2007-07-16 12:26:49 -0700 (Mon, 16 Jul 2007)

Log Message:
-----------
When viewing/editing a sheet that has uncommited changes the nav will now display commit/rollback links after the sheet name.

* webui/src/main/java/org/archive/crawler/webui/Sheets.java
Pass list of checked out sheets to view / edit sheets pages (for use by nav.jsp)

* webui/src/main/webapp/include/nav.jsp
If displaying sheet checks if it is checked out and if so displays appropriate commit/rollback links.

Modified Paths:
--------------
    branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java
    branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp

Modified: branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java	2007-07-16 19:05:15 UTC (rev 5340)
+++ branches/pjack_settings/heritrix/webui/src/main/java/org/archive/crawler/webui/Sheets.java	2007-07-16 19:26:49 UTC (rev 5341)
@@ -105,6 +105,10 @@
         JMXSheetManager sheetManager = remote.getObject();
         String sheet = request.getParameter("sheet");
         request.setAttribute("sheet", sheet);
+        Set&lt;String&gt; checkedOut = new HashSet&lt;String&gt;(
+                Arrays.asList(sheetManager.getCheckedOutSheets()));
+        request.setAttribute("checkedOut", checkedOut);
+        
         try {
             CompositeData[] settings = sheetManager.getAll(sheet);
             CompositeData[] problems = sheetManager.getSingleSheetProblems(sheet);
@@ -125,6 +129,10 @@
         JMXSheetManager sheetManager = remote.getObject();
         String sheet = request.getParameter("sheet");
         request.setAttribute("sheet", sheet);
+        Set&lt;String&gt; checkedOut = new HashSet&lt;String&gt;(
+                Arrays.asList(sheetManager.getCheckedOutSheets()));
+        request.setAttribute("checkedOut", checkedOut);
+
         try {
             if (!Arrays.asList(sheetManager.getCheckedOutSheets()).contains(sheet)) {
                 sheetManager.checkout(sheet);

Modified: branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp
===================================================================
--- branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp	2007-07-16 19:05:15 UTC (rev 5340)
+++ branches/pjack_settings/heritrix/webui/src/main/webapp/include/nav.jsp	2007-07-16 19:26:49 UTC (rev 5341)
@@ -2,6 +2,7 @@
 &lt;%@ page import="org.archive.crawler.webui.Crawler" %&gt;
 &lt;%@ page import="org.archive.crawler.webui.Text" %&gt;
 &lt;%@ page import="org.archive.crawler.webui.CrawlJob"%&gt;
+&lt;%@ page import="java.util.Collection"%&gt;
 
 &lt;% 
 
@@ -81,7 +82,26 @@
 &lt;% } %&gt;
 
 &lt;% if (the_sheet != null) { %&gt;
-&lt;b&gt;Sheet:&lt;/b&gt; &lt;%=Text.html(the_sheet)%&gt;&lt;br/&gt;
+&lt;b&gt;Sheet:&lt;/b&gt; &lt;%=Text.html(the_sheet)%&gt;
+&lt;%
+    // Check for uncommitted changes to the sheet and display commit/rollback options if so
+    Collection&lt;String&gt; navCheckedOut = (Collection)request.getAttribute("checkedOut");
+    if(navCheckedOut != null &amp;&amp; navCheckedOut.contains(the_sheet)){
+        String the_qs = Text.jobQueryString(request) + "&amp;sheet=" + the_sheet;
+%&gt;
+    &lt;span class="alert"&gt;(!)&lt;/span&gt; Unsaved edits:
+
+    &lt;a class="rowLink" 
+       title="Commit changes to this sheet."
+       href="do_commit_sheet.jsp?&lt;%=the_qs%&gt;"&gt;commit&lt;/a&gt;
+       
+    &lt;a class="rowLink" 
+       title="Abandon changes to this sheet."
+       href="do_cancel_sheet.jsp?&lt;%=the_qs%&gt;"&gt;rollback&lt;/a&gt;
+&lt;%
+    }
+%&gt;
+&lt;br/&gt;
 &lt;% } %&gt;
 
 &lt;/td&gt;


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    





<table width="100%" border="0">
    <tr bgcolor="#eeeeee">
        <td width="50%">
                    &nbsp;
                </td>
        <td>&nbsp;</td>
        <td align="right" width="50%">
                                <a href="forum.php?forum_name=archive-crawler-cvs&amp;max_rows=25&amp;offset=18&amp;style=nested&amp;viewmonth=200707">
                        <strong>Next Messages</strong></a><a href="forum.php?max_rows=25&style=nested&offset=18&forum_name=archive-crawler-cvs"><img src="http://a.fsdn.com/sf/images/images/t.gif" alt="" width="15" height="15" /></a>
                </td>
    </tr>
</table>

</form>

            </div>
        </div>
      </div>
    
    <footer id="site-footer">
        <div class="wrapper">
            <nav>
                <h5>SourceForge</h5>
                <a href="/about">About</a>
                <a href="/blog/category/sitestatus/">Site Status</a>
                <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
            </nav>
            <nav>
                <h5>Find and Develop Software</h5>
                <a href="/create/">Create a Project</a>
                <a href="/directory/">Software Directory</a>
                <a href="/top">Top Downloaded Projects</a>
            </nav>
            <nav>
                <h5>Community</h5>
                <a href="/blog/">Blog</a>
                <a href="http://twitter.com/sourceforge">@sourceforge</a>
                <a href="/jobs?source=footer">Job Board</a>
                <a href="http://library.slashdotmedia.com/?source=sfnet_footer">Resources</a>
            </nav>
            <nav>
                <h5>Help</h5>
                <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
                <a href="/support">Support Request</a>
                <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
            </nav>
        </div>
    </footer>
    <footer id="site-copyright-footer">
        <div class="wrapper">
            <div id="copyright">
                Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
                SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
            </div>
            <nav>
                <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
                <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
                <a href="http://slashdotmedia.com/opt-out-choices">Cookies/Opt Out</a>
                <a href="http://slashdotmedia.com">Advertise</a>
                <a href="http://sourceforge.jp/">SourceForge.JP</a>
            </nav>
        </div>
    </footer>
        <!--[if lt IE 7 ]>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
    <![endif]-->
<!--[if IE]></div><![endif]-->
<!--[if IE 6]></div><![endif]-->
<!--[if IE 7]></div><![endif]-->

    
    <!-- Begin comScore Tag -->
    <script>
        document.write(unescape("%3Cscript src='" + (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js' %3E%3C/script%3E"));
    </script>
    <script>
        COMSCORE.beacon({
            c1:2,
            c2:6035546,
            c3:"",
            c4:"",
            c5:"",
            c6:"",
            c15:""
        });
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035546&amp;c3=&amp;c4=&amp;c5=&amp;c6=&amp;c15=&amp;cj=1" />
    </noscript>
    <!-- End comScore Tag -->
    




        </div>
    </body>
</html>
