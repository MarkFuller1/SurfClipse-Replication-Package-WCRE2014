


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><link href="http://i1.social.s-msft.com/Forums/RequestReduceContent/f5945cb24feed27c4960364c6a6a5a99-80ff745681a6afff558681d3e298ab37-RequestReducedStyle.css" rel="Stylesheet" type="text/css" /><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    
        <link rel="shortcut icon" href="http://i1.social.s-msft.com/Forums/GlobalResources/images/Msdn/favicon.ico" type="image/x-icon" /> 
    <meta name="CommunityInfo" content=" B=Msdn;A=Forums;L=en-US;" />
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.1.min.js" type="text/javascript" language="javascript"></script>
    <script src="http://i1.social.s-msft.com/Forums/RequestReduceContent/198faff60a83dd768cacdf60118b0b19-6584225de39c1527dd5dd7bce11792ab-RequestReducedScript.js" type="text/javascript" ></script>    
    <title>
    WCF channel closes unexpectedly
</title>
	
        <!--[if IE 6]>
    <link type="text/css" rel="Stylesheet" href="http://i3.social.s-msft.com/Forums/resources/styles/IE6Core.css?cver=0%0d%0a" />
    <![endif]-->
        <script type="text/javascript">
    //<![CDATA[
        var fms_site_culture = 'en-US'; var fms_site_lcid = '1033';
    //]]>
     </script>
    
    
    <script src="http://i3.social.s-msft.com/Forums/en-US/resources.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
    
    
<script type="text/javascript" src="http://i3.social.s-msft.com/Forums/Scripts/prettify.js?cver=0%0d%0a"></script>
<script type="text/javascript" src="http://i2.social.s-msft.com/Forums/Scripts/lang-ml.js?cver=0%0d%0a"></script>
<script type="text/javascript" src="http://i3.social.s-msft.com/Forums/Scripts/lang-vb.js?cver=0%0d%0a"></script>
<script type="text/javascript" src="http://i3.social.s-msft.com/Forums/Scripts/lang-sql.js?cver=0%0d%0a"></script>
<script type="text/javascript">
    $(document).ready(function () {
        prettyPrint();
    });
</script>
    <link rel="alternate" type="application/rss+xml" title="WCF channel closes unexpectedly" href="http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/128c7f27-7626-49ac-8a92-daa45dcda0f1?outputAs=rss" />

        <meta name="Search.MSForums.Iroot" content="vstudio" />
        <meta name="Search.MSForums.CategoryID" content="5985ea91-73a5-490a-a1da-43adb138fe68" />
        <meta name="Search.MSForums.CategoryName" content="netdevelopment" />
    
            <link rel="canonical" href="http://social.msdn.microsoft.com/Forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/action?threadDisplayName=wcf-channel-closes-unexpectedly&amp;forum=wcf" />
    

<!--
Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use â€“ http://www.asp.net/ajaxlibrary/CDN.ashx.
-->
</head>
<body class=" en-us Forums " dir= "ltr">
    

<div data-chameleon-template="epxheader"></div>
<div data-chameleon-template="header">        

    <div id="ux-header" xmlns="http://www.w3.org/1999/xhtml">
        <header>
            <div class="row">
                <div class="top mobile"></div>
                <div class="left">
                    <div data-fragmentName="SiteLogo" id="Fragment_SiteLogo" xmlns="http://www.w3.org/1999/xhtml">
  <a href="http://msdn.microsoft.com/en-us" id="27762_1" xmlns="http://www.w3.org/1999/xhtml">Developer Network</a>
</div>     
                </div>
                <div id="grip"></div>  
                <div class="right desktop">
                    <div class="auxNav">
                        <div data-fragmentName="Subscriptions" id="Fragment_Subscriptions" xmlns="http://www.w3.org/1999/xhtml">
  <a href="http://msdn.microsoft.com/dn369243" id="27762_5" xmlns="http://www.w3.org/1999/xhtml">MSDN subscriptions</a>
</div>   
                        <div data-fragmentName="GetTools" id="Fragment_GetTools" xmlns="http://www.w3.org/1999/xhtml">
  <a href="http://go.microsoft.com/fwlink/?LinkId=309297&amp;clcid=0x409&amp;slcid=0x409" id="27762_3" xmlns="http://www.w3.org/1999/xhtml">Get tools</a>
</div>   
                        

        <div class="SignedOutProfileElement profileName"><a class="createProfileLink" href="" title=""></a></div>
    <div class="signIn"><a class="scarabLink" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft" title="Sign in">Sign in</a></div>

                    </div>
                    <div data-fragmentName="SearchBox" id="Fragment_SearchBox" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="SearchBox">
    <form id="HeaderSearchForm" name="HeaderSearchForm" method="get" action="http://social.msdn.microsoft.com/Search" onsubmit="return Epx.Controls.SearchBox.searchBoxOnSubmit(this, this.title);">
      <input id="HeaderSearchTextBox" name="query" type="text" maxlength="200" onfocus="Epx.Controls.SearchBox.watermarkFocus(this, this.title, 'SearchBoxOnFocus')" onblur="Epx.Controls.SearchBox.watermarkBlur(this, this.title, 'SearchBoxOnFocus')" />
      <input id="RefinementId" name="refinement" type="hidden" value="" />
      <button id="HeaderSearchButton" value="" type="submit" class="header-search-button"></button>
    </form>
    
  </div>
</div> 
                </div>
            </div>
       
            <div class="row" id="droor">
                <div class="left">
                            <nav>
            <ul>
                     <li class="inactive">

                         <a href="http://msdn.microsoft.com/dn308572" title="Home">Home</a>

                     </li>
                     <li class="inactive">

                         <a href="http://msdn.microsoft.com/dn271881" title="Opportunity">Opportunity</a>
                                 <div class="area">
                                     <div class="arrow"></div>
                                 </div>
                                 <div class="subNav">
                                     <ul>
                                                 <li><a href="http://msdn.microsoft.com/dn338450" title=".NET">.NET</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn338159" title="Cloud">Cloud</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn469160" title="Desktop">Desktop</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn338268" title="Phone">Phone</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn308583" title="Tablet &amp; PC">Tablet &amp; PC</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn338449" title="Web">Web</a></li>
                                     </ul>
                                 </div>

                     </li>
                     <li class="inactive">

                         <a href="http://msdn.microsoft.com/dn271880" title="Platform">Platform</a>

                     </li>
                     <li class="active current">

                         <a href="http://msdn.microsoft.com/dn338064" title="Connect">Connect</a>
                                 <div class="area">
                                     <div class="arrow"></div>
                                 </div>
                                 <div class="subNav">
                                     <ul>
                                                 <li><a href="http://tech-advisors.msdn.microsoft.com/en-us" title="Tech Advisors">Tech Advisors</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn338452" title="Perspectives">Perspectives</a></li>
                                                 <li><a href="http://events.msdn.microsoft.com/en-us" title="Events">Events</a></li>
                                                 <li class="current"><a href="http://social.msdn.microsoft.com/forums/" title="Forums">Forums</a></li>
                                     </ul>
                                 </div>

                     </li>
                     <li class="inactive">

                         <a href="http://msdn.microsoft.com/dn292944" title="Downloads">Downloads</a>
                                 <div class="area">
                                     <div class="arrow"></div>
                                 </div>
                                 <div class="subNav">
                                     <ul>
                                                 <li><a href="http://msdn.microsoft.com/dn369242" title="Developer tools">Developer tools</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn369240" title="SDKs">SDKs</a></li>
                                                 <li><a href="http://msdn.microsoft.com/dn369243" title="MSDN subscriptions">MSDN subscriptions</a></li>
                                     </ul>
                                 </div>

                     </li>
                     <li class="inactive">

                         <a href="http://msdn.microsoft.com/library" title="Library">Library</a>

                     </li>
                     <li class="inactive">

                         <a href="http://code.msdn.microsoft.com/" title="Samples">Samples</a>

                     </li>
            </ul>
          
        </nav>        
       
                </div>
                <div class="right mobile"></div>
                <div class="right">
                    <div data-fragmentName="SocialLinks" id="Fragment_SocialLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Join us</div>
    <div class="Links">
      <ul class="LinkColumn horizontal">
        <li>
          <a href="http://www.facebook.com/microsoftdeveloper" target="_blank" id="SocialLinks_430_7" class="facebook" xmlns="http://www.w3.org/1999/xhtml">http://www.facebook.com/microsoftdeveloper</a>
        </li>
        <li>
          <a href="https://twitter.com/msdev" target="_blank" id="SocialLinks_430_8" class="twitter" xmlns="http://www.w3.org/1999/xhtml">https://twitter.com/msdev</a>
        </li>
        <li>
          <a href="http://plus.google.com/111221966647232053570/" target="_blank" id="SocialLinks_430_9" class="googlePlus" xmlns="http://www.w3.org/1999/xhtml">http://plus.google.com/111221966647232053570/</a>
        </li>
      </ul>
    </div>
  </div>
</div> 
                </div>
                <span id="singleCol"></span>
                <span id="doubleCol"></span>
            </div>
        </header>
    </div>
    
    
<script type="text/javascript" xmlns="http://www.w3.org/1999/xhtml">
/*<![CDATA[*/
/**/
(window.MTPS || (window.MTPS = {})).cdnDomains || (window.MTPS.cdnDomains = { 
	"image": "http://i.msdn.microsoft.com", 
	"js": "http://i2.msdn.microsoft.com", 
	"css": "http://i3.msdn.microsoft.com"
});
/**/
/*]]>*/
</script><script type="text/javascript" src="http://i2.msdn.microsoft.com/Areas/Epx/Themes/Base/Content/SearchBox.js" xmlns="http://www.w3.org/1999/xhtml"></script><script type="text/javascript" src="http://i2.services.social.microsoft.com/search/Widgets/SearchBox.jss?boxid=HeaderSearchTextBox&amp;btnid=HeaderSearchButton&amp;brand=MSDN&amp;loc=en-US&amp;focusOnInit=false&amp;emptyWatermark=true&amp;searchButtonTooltip=Search MSDN" xmlns="http://www.w3.org/1999/xhtml"></script><script src="http://i1.social.s-msft.com/Forums/RequestReduceContent/df0e6d5b2538cc9e8a08cb1e82ff3407-1c6ee837f4fff042550b0d6202e831a3-RequestReducedScript.js" type="text/javascript" ></script></div>
    <div id="BodyBackground" class="ltr">
        <div id="JelloSizer">    
            <div id="JelloExpander">
                <div id="JelloWrapper">
                    <div class="Clear"> </div>
                    
                   
                    
                    
                    <div class="Clear"> </div>
                          
                    <div class="topleftcorner"></div>           
                    <div class="toprightcorner"></div>                                
                    <div class="alley"> <!-- Left Side -->
                        <div class="wrapper"> <!-- Right Side -->
                            <div class="inner">  
                            
                                                 
                                <div class="Clear"></div>   


                                
                                
                                
                                
                                <div id="MainContent" class="Msdn">
                                    
    

    <div id="contentWrapper" class="contentWrapperFull">
        <div id="content" class="contentFull">
            <div id="forumsMessage"></div>
            
    <input type="hidden" name="IsTrusted" id="trustedU" value="False" />
<input type="hidden" name="IsTrustedCheckEnabled" id="isTrustedCheckEnabled" value="True" />
<input type="hidden" name="isSpamCheckEnabled" id="isSpamCheckEnabled" value="True" />
    <form id="__AjaxAntiForgeryForm" action="#" method="post"><input name="__RequestVerificationToken" type="hidden" value="w9XfbOSIq0AmrjnDd5D_FGgzYD0IODkq8QukG_-ddEI45RV64Bk0MWvpjjUbVTM-0s8ojdss8FueSXOyV2egG1iT5VpsO2fc1YCW78Qn8LQSX-7JBfAf5nbIPxyVQS6RxFyiTQ2" /></form>
    
     <div id="msdn-technet-en-thread">
          <div id="topbar">
    <div id="quickActions">
        <div class="section">
    <div id="askaquestion">
        <a data-askurlbase="http://social.msdn.microsoft.com/Forums/en-US/newthread" class="btn askQuestionLink" title="Ask a question" href="/Forums/en-US/newthread?category=netdevelopment&amp;forum=wcf" name="ask" rel="nofollow">
            Ask a question
        </a>
    </div>

        </div>
        <div class="section">
    <div id="quickLinks" class="dropdown">
        <div id="quickLinksText" >
            <span>Quick access</span>
        </div>
        <div id="quickLinksArrow" class="arrowcontainer">
            <a class="arrowdown expanded"></a>
        </div>
        <ul class="popup">
                    <li><a id="Home" href="http://social.msdn.microsoft.com/Forums/en-US/home">Forums home</a></li>
                    <li><a id="AllUsers" href="http://social.msdn.microsoft.com/Forums/en-US/browseusers">Browse forums users</a></li>
                    <li><a id="Faq" href="http://social.technet.microsoft.com/wiki/contents/articles/7359.forums-help-faq.aspx">FAQ</a></li>
        </ul>
        <div class="clear"></div>
    </div>
    

        </div>
    </div>
    <div id="searchActionsContainer">
        <div id="searchActions">
            <div id="topBarImportantInfoContainer">
<div id="relatedThreadsLinkContainer">
    <a id="relatedThreadsLink" href="http://social.msdn.microsoft.com/Forums/en-US/home?searchTerm=WCF%20channel%20closes%20unexpectedly" value="related threads link">Search related threads</a>
</div>

            </div>
                        
            <div id="threadsearchbarContainer">
<form action="/Forums/en-US/home?sort=relevancedesc&amp;brandIgnore=True" data-clientrefresh="true" data-refreshcontent="Search" id="homesearchform" method="get"><div class="searchbar">
    <table class="searchboxinnercontainer">
        <tr>
            <td id="searchBoxTd">
                <input id="searchbox" type="text" name="searchTerm" value=""/>
            </td>
            <td class="imageWidth">
                <input id="searchimage" type="submit" value="" />
            </td>
        </tr>
    </table>
</div>   </form>
            </div>
        </div>
        
        
        
    </div>

</div>

        <script>
            $(function() {
                Forums.Homepage.wireTopBar('Search forum questions');
            });
        </script>
    

        <div id="threadPageSidebarContainer" class="sideBarContainer">
            <div id="sidebar">
    <section>
        <h3>Answered by:</h3>
        <div id="userCard" class="section">
            <div class="profile-usercard-inline" 
                 data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}' 
                 data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f">
            </div>
        </div>
    </section>
        <section>
            <div id="relatedThreads" data-url="/Forums/en-US/search/RelatedThreadsByThread?searchTerm=WCF%20channel%20closes%20unexpectedly&amp;threadId=128c7f27-7626-49ac-8a92-daa45dcda0f1&amp;allLanguages=False"></div>
        </section>
</div>
        </div>
        <div id="threadPageContentContainer">
            <a id="toggleSidebar" href="javascript:void(0)" class="toggleOpen" data-state="1"></a>
            <section>
                <div id="threadPageContainer" class="section" >
                    



             


<h1>
    <div class="threadIcon icon  none" title="">
        <img class="threadIcon icon  none" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt=" none" />
    </div>
    <span name="subject">WCF channel closes unexpectedly</span>
                         
        <a id="rssFeed" href="http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/128c7f27-7626-49ac-8a92-daa45dcda0f1?outputAs=rss" rel="nofollow"><img src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" class="icon rss"/></a>
</h1>   


                


<div class="breadcrumb">
    

    
    
            <div itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="EyebrowElement">
                <a id="categoryBreadcrumb" href="http://social.msdn.microsoft.com/Forums/en-US/home?category=netdevelopment" itemprop="url">
                    <span itemprop="title">.NET Framework forums</span> 
                </a>
            </div>
        <span class="separator">&nbsp;&gt;&nbsp;</span>
            <div itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="EyebrowElement forumBreadcrumb"  data-forumdetailsurl="/Forums/api/category/getsingleforumdetails?forum=wcf">
                <a id="forumBreadcrumb_wcf" href="http://social.msdn.microsoft.com/Forums/en-US/home?forum=wcf" itemprop="url">
                    <span itemprop="title">Windows Communication Foundation, Serialization, and Networking</span> 
                
                </a>
                <div class="forumDetailsTip">
                    
<div id="forumDetailsTemplate" class="singleforumdetails">
        <h3 class="header">
            <a href="javascript:void(0);" rel="nofollow"><img class="icon rss" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a"></a>
        </h3>
        <div>
            <ul class="manageForumSection">
                <li><a href="javascript:void(0);" rel="nofollow" class="manageForumLink"></a></li>
                <li><a href="javascript:void(0);" rel="nofollow" class="manageRolesLink"></a></li>
                <li><a href="javascript:void(0);" rel="nofollow" class="addAnnouncementLink"></a></li>
                <li><a class="addRemoveForum" title="Remove From My Forums"  href="javascript:void(0);" rel="nofollow">Remove From My Forums</a></li>
            </ul>
            <div class="clear"></div>
        </div>
    <div class="content"></div>
    <div class="announcements"><span></span></div>
</div>
                </div>
            </div>
    
    
    
    <div class="clear"></div>
</div>








    


    <ul id="rootMessage" class="message root">
        

        <h3>Question</h3>







    <li id="128c7f27-7626-49ac-8a92-daa45dcda0f1" class="message  root">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question root">
                        <img class="icon  question root" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body"><p class=MsoNormal>Hello everyone,<br><br>Iâ€™m using a customized WCF channel stack with custom binding. My custom binding is based on netMSMQ and channel is an IInputChannel. I have implemented a fault event handler at service host level which restarts service whenever its faulted. Service becomes faulted when there are poison messages trying to go through. Here are the trasport properties of binding.<br><br>&lt;msmqTransport durable=&quot;true&quot;<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  useActiveDirectory=&quot;false&quot;<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  maxReceivedMessageSize=&quot;204800&quot;<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  receiveRetryCount=&quot;10&quot;<br>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  receiveErrorHandling=&quot;Fault&quot;<br>Â Â Â  Â Â Â  Â Â Â  Â Â Â  Â Â Â  Â Â Â  Â timeToLive=&quot;14.00:00:00&quot; &gt;<br>Environment : Windows server 2003 R2 , .Net framework 3.0, MSMQ 3.0 with AD integration, private queues with certificate authentication.<br><br>When there is a poison message, inner listener (IChannelListener&lt;IInputChannel&gt;) goes to faulted state and service restarts properly through fault event handler. This listener has also subscribed to channel Faulted event, which will eventually fault listener too.<br><br>But sometime channel goes to closed state directly without faulting, which in turn closes the listener. Since I dont have a event handler for service host Closed event, there is no logic to restart service and service stops consuming messages from queue (obviously since both listener and channel are closed now).<br><br>What can cause channel to go Closed state directly ? Is it possible (by design of WCF) for it to go to closed state without going to faulted state (when there is an error) ? Does it make sense to subscribe to service host Closed event (as i have done for service host faulted event) and restart service ?<br><br>Note that some messages become poison after retrying 10 times (as i have configured in transport config), but successfully goes through after restarting service host.<br><br>Any help will be greatly appreciated.<br><br>Thanks and regards<br>hantana</p><br><br><br><br></div>
                        <input type="hidden" id="128c7f27-7626-49ac-8a92-daa45dcda0f1_attachments" value="" />

                </div>
                
                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Wednesday, October 01, 2008 8:37 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>

    </ul>


        <div id="answers" class="answers">
            <h3>
                Answers
            </h3>
            <ul id="answersList" class="message">







    <li id="f80dfd2a-ed17-479c-b16f-657dc87aaad0" class="message  answer">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question answered">
                        <img class="icon  question answered" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body">Hello everyone,<br><br>Â I fixed the issue of custom channel closing problem. There was an event handler (in my custom channel class) which closes inner listener when channel closes. This prevents listener been faulted. I removed that handler since we don't have to close listener if channel closes, because listener can accept a new channel created by runtime. <br><br>Now everything runing smoothly as expected and service is getting faulted everytime when there is a poison message. Thereafter I found that poison message is caused by following exception.<br><br>Poison MessageSystem.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information. ---&gt; System.ServiceModel.ProtocolException: Creation of a message security context failed because the attached sender certificate was invalid or cannot be validated. The message cannot be received. Ensure that a valid certificate is attached to the message and that the certificate is present in the receiver's certificate store. ---&gt; System.IdentityModel.Tokens.SecurityTokenValidationException: The X.509 certificate CN=172.20.220.150, OU=XXX, O=MX Corporation, L=2 chain building failed. The certificate that was used has a trust chain that cannot be verified. Replace the certificate or change the certificateValidationMode. A required certificate is not within its validity period when verifying against the current system clock or the timestamp in the signed file.<br><br>Â <br><br>Â Â  at System.IdentityModel.Selectors.X509CertificateChain.Build(X509Certificate2 certificate)<br><br>Â Â  at System.IdentityModel.Selectors.X509CertificateValidator.ChainTrustValidator.Validate(X509Certificate2 certificate)<br><br>Â Â  at System.IdentityModel.Selectors.X509SecurityTokenAuthenticator.ValidateTokenCore(SecurityToken token)<br><br>Â Â  at System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateToken(SecurityToken token)<br><br>Â Â  at System.ServiceModel.Channels.MsmqChannelListenerBase`1.ValidateSecurity(MsmqInputMessage msmqMessage)<br><br>Â Â  --- End of inner exception stack trace ---<br><br>Â Â  at System.ServiceModel.Channels.MsmqChannelListenerBase`1.ValidateSecurity(MsmqInputMessage msmqMessage)<br><br>Â Â  at System.ServiceModel.Channels.MsmqDecodeHelper.DecodeTransportDatagram(MsmqInputChannelListener listener, MsmqReceiveHelper receiver, MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  --- End of inner exception stack trace ---<br><br>Â Â  at System.ServiceModel.Channels.MsmqDecodeHelper.DecodeTransportDatagram(MsmqInputChannelListener listener, MsmqReceiveHelper receiver, MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannel.DecodeMsmqMessage(MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.TryReceive(TimeSpan timeout, Message&amp; message)<br><br>Â Â  at System.ServiceModel.Channels.InputChannel.HelpReceive(IInputChannel channel, TimeSpan timeout)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.Receive(TimeSpan timeout)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.Receive()<br><br>Â Â  at Mx.XXX.Services.Channel.AssemblingManager.PersistMessageChunks(Object stateParam)<br><br><br>This is a strange too. Because message which gives this exception goes through service successfully after restarting the WCF service.Â  Its basically a &quot;Temporary poison message&quot;.Â  This happens only when client calls service first time after installing certificates. Following is my process.<br><br><br><ol><li>There is a root certificate. </li><li>Client certificates are generated by this root certificate. </li><li>Server generate client certificate on the fly programmatically and send to the client. </li><li>Client installs certificate in to his certificate store and send a response back to server (This is the first time client is calling server service). </li><li>Then at this time poison message error pops up. </li></ol>Any help will be greatly appreciated.<br><br>thanks and regards<br>hantana<br> </div>
                        <input type="hidden" id="f80dfd2a-ed17-479c-b16f-657dc87aaad0_attachments" value="" />

                </div>
                        <div>
            <ul class="history">
                    <li><span class="type">Marked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/jason%20%20pang/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Jason  Pang"><span>Jason  Pang</span><abbr class="affil">Microsoft employee, Moderator</abbr></a>
                        <span class="date">Tuesday, October 14, 2008 8:25 PM</span>
                    </li>
                    <li><span class="type">Unmarked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/jason%20%20pang/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Jason  Pang"><span>Jason  Pang</span><abbr class="affil">Microsoft employee, Moderator</abbr></a>
                        <span class="date">Tuesday, October 14, 2008 8:27 PM</span>
                    </li>
                    <li><span class="type">Marked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/eugene%20osovetsky/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Eugene Osovetsky"><span>Eugene Osovetsky</span><abbr class="affil">Moderator</abbr></a>
                        <span class="date">Wednesday, October 29, 2008 10:22 PM</span>
                    </li>
            </ul>
        </div>

                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Tuesday, October 14, 2008 3:28 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>
                        
            </ul>
        </div>

      <div id="allReplies" class="replies">
            <h3>
                All replies
            </h3>





    <ul class="message">







    <li id="f80dfd2a-ed17-479c-b16f-657dc87aaad0" class="message  answer">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question answered">
                        <img class="icon  question answered" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body">Hello everyone,<br><br>Â I fixed the issue of custom channel closing problem. There was an event handler (in my custom channel class) which closes inner listener when channel closes. This prevents listener been faulted. I removed that handler since we don't have to close listener if channel closes, because listener can accept a new channel created by runtime. <br><br>Now everything runing smoothly as expected and service is getting faulted everytime when there is a poison message. Thereafter I found that poison message is caused by following exception.<br><br>Poison MessageSystem.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information. ---&gt; System.ServiceModel.ProtocolException: Creation of a message security context failed because the attached sender certificate was invalid or cannot be validated. The message cannot be received. Ensure that a valid certificate is attached to the message and that the certificate is present in the receiver's certificate store. ---&gt; System.IdentityModel.Tokens.SecurityTokenValidationException: The X.509 certificate CN=172.20.220.150, OU=XXX, O=MX Corporation, L=2 chain building failed. The certificate that was used has a trust chain that cannot be verified. Replace the certificate or change the certificateValidationMode. A required certificate is not within its validity period when verifying against the current system clock or the timestamp in the signed file.<br><br>Â <br><br>Â Â  at System.IdentityModel.Selectors.X509CertificateChain.Build(X509Certificate2 certificate)<br><br>Â Â  at System.IdentityModel.Selectors.X509CertificateValidator.ChainTrustValidator.Validate(X509Certificate2 certificate)<br><br>Â Â  at System.IdentityModel.Selectors.X509SecurityTokenAuthenticator.ValidateTokenCore(SecurityToken token)<br><br>Â Â  at System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateToken(SecurityToken token)<br><br>Â Â  at System.ServiceModel.Channels.MsmqChannelListenerBase`1.ValidateSecurity(MsmqInputMessage msmqMessage)<br><br>Â Â  --- End of inner exception stack trace ---<br><br>Â Â  at System.ServiceModel.Channels.MsmqChannelListenerBase`1.ValidateSecurity(MsmqInputMessage msmqMessage)<br><br>Â Â  at System.ServiceModel.Channels.MsmqDecodeHelper.DecodeTransportDatagram(MsmqInputChannelListener listener, MsmqReceiveHelper receiver, MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  --- End of inner exception stack trace ---<br><br>Â Â  at System.ServiceModel.Channels.MsmqDecodeHelper.DecodeTransportDatagram(MsmqInputChannelListener listener, MsmqReceiveHelper receiver, MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannel.DecodeMsmqMessage(MsmqInputMessage msmqMessage, MsmqMessageProperty messageProperty)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.TryReceive(TimeSpan timeout, Message&amp; message)<br><br>Â Â  at System.ServiceModel.Channels.InputChannel.HelpReceive(IInputChannel channel, TimeSpan timeout)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.Receive(TimeSpan timeout)<br><br>Â Â  at System.ServiceModel.Channels.MsmqInputChannelBase.Receive()<br><br>Â Â  at Mx.XXX.Services.Channel.AssemblingManager.PersistMessageChunks(Object stateParam)<br><br><br>This is a strange too. Because message which gives this exception goes through service successfully after restarting the WCF service.Â  Its basically a &quot;Temporary poison message&quot;.Â  This happens only when client calls service first time after installing certificates. Following is my process.<br><br><br><ol><li>There is a root certificate. </li><li>Client certificates are generated by this root certificate. </li><li>Server generate client certificate on the fly programmatically and send to the client. </li><li>Client installs certificate in to his certificate store and send a response back to server (This is the first time client is calling server service). </li><li>Then at this time poison message error pops up. </li></ol>Any help will be greatly appreciated.<br><br>thanks and regards<br>hantana<br> </div>
                        <input type="hidden" id="f80dfd2a-ed17-479c-b16f-657dc87aaad0_attachments" value="" />

                </div>
                        <div>
            <ul class="history">
                    <li><span class="type">Marked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/jason%20%20pang/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Jason  Pang"><span>Jason  Pang</span><abbr class="affil">Microsoft employee, Moderator</abbr></a>
                        <span class="date">Tuesday, October 14, 2008 8:25 PM</span>
                    </li>
                    <li><span class="type">Unmarked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/jason%20%20pang/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Jason  Pang"><span>Jason  Pang</span><abbr class="affil">Microsoft employee, Moderator</abbr></a>
                        <span class="date">Tuesday, October 14, 2008 8:27 PM</span>
                    </li>
                    <li><span class="type">Marked as answer by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/eugene%20osovetsky/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Eugene Osovetsky"><span>Eugene Osovetsky</span><abbr class="affil">Moderator</abbr></a>
                        <span class="date">Wednesday, October 29, 2008 10:22 PM</span>
                    </li>
            </ul>
        </div>

                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Tuesday, October 14, 2008 3:28 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>







    <li id="9d40cde8-5266-4541-b7e2-9c9283b38516" class="message ">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question reply">
                        <img class="icon  question reply" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body">HiÂ hantana,Â Â <br><br>Thanks for posting back your findings! Unfortunately posts on forums sometimes slip through the cracks due to the sheer volume, but we do try our best to help everyone make progress on their issues. <br><br>So this happens on the first time only? Perhaps there a time skew between the client and service. How long are the validity periods for your certs, and are they issued to be valid starting from some time in the future? <br><br>--Jason</div>
                        <input type="hidden" id="9d40cde8-5266-4541-b7e2-9c9283b38516_attachments" value="" />

                </div>
                        <div>
            <ul class="history">
                    <li><span class="type">Edited by</span>
                            <a class="author" href="http://social.msdn.microsoft.com/profile/jason%20%20pang/?type=forum&amp;referrer=http://social.msdn.microsoft.com/forums/vstudio/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly" rel="nofollow" title="About Jason  Pang"><span>Jason  Pang</span><abbr class="affil">Microsoft employee, Moderator</abbr></a>
                        <span class="date">Tuesday, October 14, 2008 8:31 PM</span>
                            <span class="reason">misread post</span>
                    </li>
            </ul>
        </div>

                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Tuesday, October 14, 2008 8:25 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="31e833f3-7449-4910-a50a-3fdc7c49a1e8" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=Jason%20%20Pang", "text":"Jason  Pang&#39;s threads"}'>
                            <div class="profile-mini-content">
Moderator                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>







    <li id="d7ed55f9-2953-45cc-8d4d-4744c46338fe" class="message ">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question reply">
                        <img class="icon  question reply" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body">Hi Jason,<br><br>Yeah. This error happens on the first time only. Then service starts automatically, messages goes through. Error never comes back during subsequent message transfers.<br><br>Validity period isÂ  from time it issued to 2011. <br><br>thanks for your thoughts.<br><br>regards<br>hantana<br> </div>
                        <input type="hidden" id="d7ed55f9-2953-45cc-8d4d-4744c46338fe_attachments" value="" />

                </div>
                
                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Wednesday, October 29, 2008 3:41 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>







    <li id="9d5e1551-d7ca-4085-9979-07317c244e81" class="message ">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question reply">
                        <img class="icon  question reply" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body"><p>Hi,<br/><br/>I encountered the same strange WCF behavior. For my situation, the error may still occur even 2 hours after the certificate becomes effective. In my case, I use wsHttpBinding and set the client authentication in the behavior as follows:<br/>Â Â Â Â Â Â &lt;clientCertificate&gt;<br/>Â Â Â Â Â Â Â &lt;authentication certificateValidationMode=&quot;None&quot; revocationMode=&quot;Online&quot; trustedStoreLocation=&quot;LocalMachine&quot;/&gt;<br/>Â Â Â Â Â Â &lt;/clientCertificate&gt;<br/><br/>I even did my test by building the chain with System.Security.Cryptography.X509Certificates.X509Chain.Build(X509Certificate2 cert) and everything worked fine. The cert chain was built successfully using the same certificate that was not able to be validated with WCF.<br/><br/>Hantana, have you foundÂ any solution to your problem? Anyone here could help?Â Any help would be greatly appreciated.<br/><br/>Thanks,<br/>N</p></div>
                        <input type="hidden" id="9d5e1551-d7ca-4085-9979-07317c244e81_attachments" value="" />

                </div>
                
                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Thursday, April 30, 2009 3:44 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8d4c686f-e5ce-4e58-8c45-d2a95966e822" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=Lesmantec", "text":"Lesmantec&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>







    <li id="4dda230f-a593-415c-bf12-5c2023ca6bb6" class="message ">
        <div class="messageContentContainer">
        
        
            <div class="messageSidebar">

                <div class="iconWrapper">
                    <div class="status messageIcon  question reply">
                        <img class="icon  question reply" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" alt="Question" />
                    </div>
                </div>
                <div class="votingouterbox">                <div class="voting">
                            <a class="voteuphreflink" name="voteup" title="Vote as helpful" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                                <img class="icon voteup" alt="Sign in to vote" title="Sign in to vote" src="http://i1.social.s-msft.com/Forums/../globalresources/Images/trans.gif?cver=0%0d%0a" />
                                <div class="votenumber" style="display: block;">0</div>
                            </a>

                </div>
                <div class="votinglabel">
                    <span class="votinglabel type">
                                <a title="Sign in to vote" href="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">Sign in to vote</a>
                    </span>
                </div>
</div>
            </div>
        
            <div class="messageContent">
                <div class="container">
                    <div class="body">Hello everyone,<br/> <br/> I thought of adding more flesh to the answer. <br/> <br/> First half of the problem solved by handling exception properly from my custom channel stack.<br/> <br/> Second half of problem, root cause behind poison message was under the covers for a longtime. We worked with Microsoft support closely and they suggested to create &quot;Client certificates&quot; with back dated start date. <br/> <br/> e.g. We were creating client certificates with start date as current date. This was changed to create client certificate with backdated<br/> start date. <br/> <br/> This modification solved poison message issue and we don't see this exception again.<br/> <br/> regards<br/> hantana<br/></div>
                        <input type="hidden" id="4dda230f-a593-415c-bf12-5c2023ca6bb6_attachments" value="" />

                </div>
                
                <div class="messageFooter">
                     <div class="actions">
                        <div class="date">Friday, June 05, 2009 3:30 PM</div>
                        <div class="menu message">
                                            <div value="reply">
                    <a href = "javascript:void();" title="Reply" name="reply" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Reply</a>
                </div>
                    <div class="separator"><span>|</span></div>
                <div value="quote">
                    <a href = "javascript:void();" title="" name="quote" rel="nofollow" url="https://login.live.com/login.srf?wa=wsignin1.0&amp;wtrealm=social.msdn.microsoft.com&amp;wreply=https%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf%26prof%3drequired%26stoAI%3d10&amp;wp=MBI_FED_SSL&amp;wlcxt=microsoft%24microsoft%24microsoft">
                        Quote</a>
                </div>

                                         <div class="separator"><span>|</span></div>
        <div class="abusive">
        </div>

                            <div class="clear"></div>
                        </div>
                    </div>
                    <div class="userInfo">
                        <div class="profile-usercard-mini" data-profile-userid="8df42c45-1a36-41ab-ae2a-0dc064eb992f" data-profile-usercard-customlink='{"href":"http://social.msdn.microsoft.com/Forums/vstudio/en-US/user/threads?user=hantana", "text":"hantana&#39;s threads"}'>
                            <div class="profile-mini-content">
                            </div>
                        </div>

                    </div>
                   
                </div>
            </div>
        </div>
    </li> 
    <div class="clear"></div>
    </ul>

        </div>


                </div>
            </section>
        </div>
    </div>

            <div class="clear"></div>
        </div>
    </div>  
    <div id="nrSurvey">
        
<script type="text/javascript">
    if (!$.Microsoft) $.Microsoft = {};
    if (!$.Microsoft.Mtps) $.Microsoft.Mtps = {};
    if (!$.Microsoft.Mtps.NetReflectorInit)
        $.Microsoft.Mtps.NetReflectorInit = {
            surveyUrl: 'http://support.microsoft.com/common/survey.aspx?scid=sw%3ben%3b3612&altstyle=narrow&renderoption=overridedefault&theme=msdn&url=http://social.msdn.microsoft.com/Forums/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly?forum=wcf&P0=47a66177-42e0-4b00-b472-86d8640fea62',
            throttleRate: "5.00",
            privacyStatementText: "Privacy statement",
            trackerWindowText: "<p>Please do not close this window.</p><p>Thank you! The survey will appear here when you've completed your visit, so <b>please do not close this window</b>.</p>",
            logoUrl: 'http://js.microsoft.com/library/svy/sto/msdn-logo-stripe.gif',
            closeButtonUrl: 'http://js.microsoft.com/library/svy/sto/msdn-close.gif',
            topBarUrl: 'http://js.microsoft.com/library/svy/sto/top-stripe.gif',
            bottomBarUrl: 'http://js.microsoft.com/library/svy/sto/bottom-stripe.gif',
            blankPage: 'http://social.msdn.microsoft.com/forums/blank.htm',
            showSurveyToComscoreUser: 'no'
        };
</script>
<link href="http://i4.social.s-msft.com/Forums/resources/NetReflector/NetReflector.css?cver=0%0d%0a"
    rel="stylesheet" type="text/css" />
<script type="text/javascript">

    setTimeout("Forums.loadScript('http://i2.social.s-msft.com/Forums/resources/NetReflector/NetReflector.js?cver=0%0d%0a')", 1000);
</script>
<div id="divNRMain" style="position: fixed; display: none; background-color: White;
    z-index: 1001;">
    <table width="360" cellpadding="3" cellspacing="0" border="0" bgcolor="#FFFFFF">
        <tr>
            <td style="padding: 3px;">
                <table width="100%" cellpadding="1" cellspacing="0" border="0" bgcolor="#999999">
                    <tr>
                        <td style="padding: 1px;">
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" bgcolor="#FFFFFF">
                                <tr valign="top">
                                    <td>
                                        <img src="http://js.microsoft.com/library/svy/sto/msdn-logo-stripe.gif" /><img id="imgNRClose" border="0" src="http://js.microsoft.com/library/svy/sto/msdn-close.gif" /><br />
                                        <img src="http://js.microsoft.com/library/svy/sto/top-stripe.gif" />
                                        <table width="100%" cellpadding="5" cellspacing="0">
                                            <tr>
                                                <td style="padding: 2px">
                                                    <div>
                                                        <p>Microsoft is conducting an online survey to understand your opinion of the Msdn Web site. If you choose to participate, the online survey will be presented to you when you leave the Msdn Web site.</p><p>Would you like to participate?</p>
                                                    </div>
                                                    <div align="center">
                                                        <input id="btnNRYes" type="button" value="  Yes  " />&nbsp;&nbsp;
                                                        <input id="btnNRNo" type="button" value=" No " />
                                                    </div>
                                                    <div>
                                                        <a href="http://privacy.microsoft.com/en-us/default.mspx" target="_blank">
                                                            Privacy statement</a></div>
                                                </td>
                                            </tr>
                                        </table>
                                        <img src="http://js.microsoft.com/library/svy/sto/bottom-stripe.gif" />
                                        <input type="hidden" id="hdnSurveyUrl" value="http://support.microsoft.com/common/survey.aspx?scid=sw%3ben%3b3612&altstyle=narrow&renderoption=overridedefault&theme=msdn&url=http://social.msdn.microsoft.com/Forums/en-US/128c7f27-7626-49ac-8a92-daa45dcda0f1/wcf-channel-closes-unexpectedly?forum=wcf&P0=47a66177-42e0-4b00-b472-86d8640fea62" />
                                        <input type="hidden" id="hdnLogoUrl" value="http://js.microsoft.com/library/svy/sto/msdn-logo-stripe.gif" />
                                        <input type="hidden" id="hdnTopStripUrl" value="http://js.microsoft.com/library/svy/sto/top-stripe.gif" />
                                        <input type="hidden" id="hdnBtmStripUrl" value="http://js.microsoft.com/library/svy/sto/bottom-stripe.gif" />
                                        <input type="hidden" id="hdnTrackerText" value="<p>Please do not close this window.</p><p>Thank you! The survey will appear here when you've completed your visit, so <b>please do not close this window</b>.</p>" />
                                        <input type="hidden" id="hdnPrivacyText" value="Privacy statement" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

    </div>  
    
                                    <div class="Clear"></div>
                                </div>
    
                            </div>
                        </div>
                    </div>
                
                    <div class="Clearbottom"></div>          
                    <div class="bottomleftcorner"></div>            
                    <div class="bottomrightcorner"></div> 
                    
                     
                    

                           
                </div>
            </div>
        </div>
    </div>
    

<div data-chameleon-template="epxfooter" ></div>
<div data-chameleon-template="footer" >        
<div id="ux-footer" class="" style="" xmlns="http://www.w3.org/1999/xhtml">
    <footer class="top">
        <div data-fragmentName="LeftLinks" id="Fragment_LeftLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Dev centers</div>
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://msdn.microsoft.com/windows" id="27861_1" class="windowsBlue" xmlns="http://www.w3.org/1999/xhtml">Windows</a>
        </li>
        <li>
          <a href="http://dev.windowsphone.com/" id="27861_2" class="windowsPurple" xmlns="http://www.w3.org/1999/xhtml">Windows Phone</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/office" id="27861_3" class="office" xmlns="http://www.w3.org/1999/xhtml">Office</a>
        </li>
        <li>
          <a href="http://www.windowsazure.com/en-us/documentation/" id="27861_4" class="windowsBlue" xmlns="http://www.w3.org/1999/xhtml">Windows Azure</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/vstudio" id="27861_5" class="visualStudio" xmlns="http://www.w3.org/1999/xhtml">Visual Studio</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/aa937802" id="27861_6" xmlns="http://www.w3.org/1999/xhtml">More...</a>
        </li>
      </ul>
    </div>
  </div>
</div>    
        <div id="rightLinks">
            <div data-fragmentName="CenterLinks1" id="Fragment_CenterLinks1" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Learning resources</div>
    <div class="LinkListDescription"></div>
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://www.microsoftvirtualacademy.com/" id="27861_14" xmlns="http://www.w3.org/1999/xhtml">Microsoft Virtual Academy</a>
        </li>
        <li>
          <a href="http://channel9.msdn.com/" id="27861_16" xmlns="http://www.w3.org/1999/xhtml">Channel 9</a>
        </li>
        <li>
          <a href="http://www.interoperabilitybridges.com/" id="27861_17" xmlns="http://www.w3.org/1999/xhtml">Interoperability Bridges</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/magazine/" id="CenterLinks1_427_33" xmlns="http://www.w3.org/1999/xhtml">MSDN Magazine</a>
        </li>
      </ul>
    </div>
  </div>
</div>
            <div data-fragmentName="CenterLinks2" id="Fragment_CenterLinks2" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Community</div>
    <div class="LinkListDescription"></div>
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://social.msdn.microsoft.com/forums/en-us/home" id="27861_19" xmlns="http://www.w3.org/1999/xhtml">Forums</a>
        </li>
        <li>
          <a href="http://blogs.msdn.com/b/developer-tools/" id="27861_20" xmlns="http://www.w3.org/1999/xhtml">Blogs</a>
        </li>
        <li>
          <a href="http://www.codeplex.com" id="27861_22" xmlns="http://www.w3.org/1999/xhtml">Codeplex</a>
        </li>
      </ul>
    </div>
  </div>
</div>
            <div data-fragmentName="CenterLinks3" id="Fragment_CenterLinks3" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Support</div>
    <div class="LinkListDescription"></div>
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://msdn.microsoft.com/hh361695" id="CenterLinks3_427_34" xmlns="http://www.w3.org/1999/xhtml">Self support</a>
        </li>
        <li>
          <a href="http://support.microsoft.com/" id="27861_24" xmlns="http://www.w3.org/1999/xhtml">Other support options</a>
        </li>
      </ul>
    </div>
  </div>
</div>
            <div data-fragmentName="CenterLinks4" id="Fragment_CenterLinks4" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListTitle">Programs</div>
    <div class="LinkListDescription"></div>
    <div class="Links">
      <ul class="LinkColumn" style="width: 100%">
        <li>
          <a href="http://www.microsoft.com/bizspark/" id="27861_27" xmlns="http://www.w3.org/1999/xhtml">BizSpark (for startups)</a>
        </li>
        <li>
          <a href="https://www.dreamspark.com/" id="27861_28" xmlns="http://www.w3.org/1999/xhtml">DreamSpark</a>
        </li>
        <li>
          <a href="https://www.microsoft.com/faculty" id="27861_29" xmlns="http://www.w3.org/1999/xhtml">Faculty Connection</a>
        </li>
        <li>
          <a href="http://www.microsoft.com/student/" id="CenterLinks4_427_32" xmlns="http://www.w3.org/1999/xhtml">Microsoft Student</a>
        </li>
      </ul>
    </div>
  </div>
</div>
        </div>
    </footer>
    
    <footer class="bottom">
        <span class="localeContainer">
                <form class="selectLocale" id="selectLocaleForm" action="http://msdn.microsoft.com/en-US/selectlocale-dmc">
        <input type="hidden" name="fromPage" value="http%3a%2f%2fsocial.msdn.microsoft.com%2fForums%2fen-US%2f128c7f27-7626-49ac-8a92-daa45dcda0f1%2fwcf-channel-closes-unexpectedly%3fforum%3dwcf" />
        <a href="#" onclick="$('#selectLocaleForm').submit();return false;" title="Change your language">United States (English)</a>
    </form>    


        </span>
        
        <div data-fragmentName="BottomLinks" id="Fragment_BottomLinks" xmlns="http://www.w3.org/1999/xhtml">
  
  <div class="LinkList">
    <div class="LinkListDescription"></div>
    <div class="Links">
      <ul class="LinkColumn horizontal">
        <li>
          <a href="http://msdn.microsoft.com/newsletter.aspx" id="27861_8" xmlns="http://www.w3.org/1999/xhtml">Newsletter</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/dn529288" id="27861_10" xmlns="http://www.w3.org/1999/xhtml">Privacy &amp; cookies</a>
        </li>
        <li>
          <a href="http://msdn.microsoft.com/cc300389.aspx" id="27861_11" xmlns="http://www.w3.org/1999/xhtml">Terms of Use</a>
        </li>
        <li>
          <a href="http://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" id="27861_12" xmlns="http://www.w3.org/1999/xhtml">Trademarks</a>
        </li>
      </ul>
    </div>
  </div>
</div>    
        <span class="logoLegal">
            <span class="logo"></span>
            <span class="copyright">Â© 2013 Microsoft</span>
        </span>
    </footer>
</div>
    
<script type="text/javascript" xmlns="http://www.w3.org/1999/xhtml">
/*<![CDATA[*/
/**/
(window.MTPS || (window.MTPS = {})).cdnDomains || (window.MTPS.cdnDomains = { 
	"image": "http://i.msdn.microsoft.com", 
	"js": "http://i2.msdn.microsoft.com", 
	"css": "http://i3.msdn.microsoft.com"
});
/**/
/*]]>*/
</script><script type="text/javascript" src="http://i2.msdn.microsoft.com/Areas/Centers/Themes/Msdn/Content/Footer.js" xmlns="http://www.w3.org/1999/xhtml"></script></div>  
    <div data-chameleon-template="megablade" ></div>
    
    
    

    <script src="http://i3.social.s-msft.com/Forums/resources/scripts/core.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
    <script type="text/javascript" src="http://i2.social.s-msft.com/Forums/resources/scripts/jquery-impromptu.3.1.min.js?cver=0%0d%0a"></script>
   
    
<script type="text/javascript" language="javascript">
var railItems = ["/Forums/en-US/rightrailannouncement/Msdn/5985ea91-73a5-490a-a1da-43adb138fe68"];

</script>

    <script type="text/javascript" language="javascript">
            var pageData = {"validUser":false,"autoSubscribe":false};
    </script>
     <script type="text/javascript" language="javascript">
         var userEmailConfigured = false;
     </script>  
    <script src="http://i2.social.s-msft.com/Forums/resources/scripts/messages.js?cver=0%0d%0a"  type="text/javascript" language="javascript"></script>
    <script src="http://i1.social.s-msft.com/Forums/resources/scripts/forumdetails.js?cver=0%0d%0a"  type="text/javascript" language="javascript"></script>
    <script>
        $(document).ready(function () {
            Forums.ThreadPage.wirePageElements('Search forum questions');
            Forums.ForumDetails.wireAllBreadcrumbs();
        });
    </script>

    
    <script src="http://i2.social.s-msft.com/Forums/resources/scripts/webtrends.js?cver=0%0d%0a" type="text/javascript"></script>
    <noscript>
        <img alt="" border="0" id="DCSIMG" width="1" height="1" src="http://m.webtrends.com/dcsour5e80000008ybade4ttg_1i1l/njs.gif?dcsuri=/nojavascript&amp;WT.js=No">
    </noscript>
     
    <script type="text/javascript" src="http://js.microsoft.com/library/svy/sto/broker.js"></script>    
    
                <script src="http://widgets.membership.s-msft.com/v1/loader.js?brand=Msdn&lang=en-US" type="text/javascript" language="javascript"></script>

    
    
    <script src="http://i2.social.s-msft.com/Forums/GlobalResources/scripts/common.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
    <script src="http://i4.social.s-msft.com/Forums/GlobalResources/scripts/localepop.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
    
        <script src="http://i1.social.s-msft.com/Forums/GlobalResources/scripts/omni_rsid_social.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
        <script src="http://i1.social.s-msft.com/Forums/GlobalResources/scripts/ms2.js?cver=0%0d%0a" type="text/javascript" language="javascript"></script>
        <noscript><a href="http://www.omniture.com" title="Web Analytics">
        <img src="http://msstonojssocial.112.2O7.net/b/ss/msstonojssocial/1/H.20.2--NS/0" height="1" width="1" alt="" />
        </a></noscript>
    
</body>
</html>
