<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Nettyä½¿ç”¨åˆ?æ­¥_StackDoc</title>
<meta name="description" content="STACKDOC,æ˜¯ITè³‡æ–™çš„è?šå?ˆç¶²,åŒ…æ‹¬çš„è³‡æ–™æœ‰Javaç·¨ç¨‹,Spring Struts Webworkæ¡†æž¶æ·±å…¥,XMLHTTP AJAXé–‹ç™¼,Java Webé–‹ç™¼,Javaä¼?æ¥­æ‡‰ç”¨,Javaè¨­è¨ˆæ¨¡å¼?,Javaé–‹æº?æ¡†æž¶,Javaæ‡‰ç”¨æœ?å‹™å™¨,Rich Clientè¨Žè«–,Rubyç·¨ç¨‹,Ruby DSLé–‹ç™¼,Ruby on railså¯¦è¸?,JavaScriptç·¨ç¨‹,æ•?æ?·è»Ÿä»¶é–‹ç™¼XP TDD,è»Ÿä»¶é…?ç½®ç®¡ç?†,è»Ÿä»¶æ¸¬è©¦,é …ç›®ç®¡ç?†UML,æ•¸æ“šåº«,C#/.net C/C++ Erlang/FP PHP/Linuxå¹³è‡º,ç²¾é€šHibernateç­‰.JBoss Nettyä½¿ç”¨åˆ?æ­¥" />
<meta name="keywords" content="Javaç·¨ç¨‹ Springæ¡†æž¶ AJAXæŠ€è¡“ Agileæ•?æ?·è»Ÿä»¶é–‹ç™¼ ruby on railså¯¦è¸? Linux,unix,Freebsd,Solaris,æœ?å‹™å™¨,å­˜å„²,æ•¸æ“šåº«,é–‹ç™¼,ç¨‹åº?è¨­è¨ˆ,ç¶²çµ¡,å®‰å…¨,å‚™ä»½,ç¡¬ä»¶,ITåŸ¹è¨“,ITæ‹›è?˜æ±‚è?·,ITæ¥­ç•Œ,ITäººç‰©,ITè©•è«–,æ¥­ç•Œè©•è«–,è¨ˆç®—æ©Ÿ,æ•¸ç¢¼,ITåœˆ,ä¸‹è¼‰,wiki,blog,å?šå®¢,é?Šæˆ².æ”¶è—?è‡ªï¼š http://www.kafka0102.com/2010/06/161.html 1ã€?ç°¡ä»‹ Java1.4æ??ä¾›äº†NIOä½¿é–‹ç™¼è€…å?¯ä»¥ä½¿ç”¨Javaç·¨å¯«é«˜æ€§èƒ½çš„æœ?å‹™ç«¯ç¨‹åº?ï¼Œä½†ä½¿ç”¨åŽŸç”Ÿçš„NIO " />
<link href="/templets/default/style/dedecms.css" rel="stylesheet" media="screen" type="text/css" />
<link href="/my/fload_ads/fload_ads_style.css" rel="stylesheet" media="screen" type="text/css" />
<style>
.div_round_right {
float:right;
}
.div_round_left {
float:left;
}
</style>
<script language="javascript" type="text/javascript">
 var randomNumber = Math.random()*10;
 var adType;
 if(Math.floor(randomNumber)<5){
  adType = 1;
 }else{
  adType = 2;
 }
</script>
<script type="text/javascript" src="/my/fload_ads/jquery-1.6.4.min.js"></script>
<script language="javascript" type="text/javascript" src="/include/dedeajax2.js"></script>
<script language="javascript" type="text/javascript">
<!--
function CheckLogin(){
	  var taget_obj = document.getElementById('_ajax_feedback');
	  myajax = new DedeAjax(taget_obj,false,false,'','','');
	  myajax.SendGet2("/member/ajax_feedback.php");
	  DedeXHTTP = null;
}
function postBadGood(ftype,fid)
{
	var taget_obj = document.getElementById(ftype+fid);
	var saveid = GetCookie('badgoodid');
	if(saveid != null)
	{
		var saveids = saveid.split(',');
		var hasid = false;
		saveid = '';
		j = 1;
		for(i=saveids.length-1;i>=0;i--)
		{
			if(saveids[i]==fid && hasid) continue;
			else {
				if(saveids[i]==fid && !hasid) hasid = true;
				saveid += (saveid=='' ? saveids[i] : ','+saveids[i]);
				j++;
				if(j==10 && hasid) break;
				if(j==9 && !hasid) break;
			}
		}
		if(hasid) { alert('æ‚¨å‰›æ‰?å·²è¡¨å†³é?Žäº†å–”ï¼?'); return false;}
		else saveid += ','+fid;
		SetCookie('badgoodid',saveid,1);
	}
	else
	{
		SetCookie('badgoodid',fid,1);
	}
	myajax = new DedeAjax(taget_obj,false,false,'','','');
	myajax.SendGet2("/plus/feedback.php?aid="+fid+"&action="+ftype+"&fid="+fid);
}
function postDigg(ftype,aid)
{
	var taget_obj = document.getElementById('newdigg');
	var saveid = GetCookie('diggid');
	if(saveid != null)
	{
		var saveids = saveid.split(',');
		var hasid = false;
		saveid = '';
		j = 1;
		for(i=saveids.length-1;i>=0;i--)
		{
			if(saveids[i]==aid && hasid) continue;
			else {
				if(saveids[i]==aid && !hasid) hasid = true;
				saveid += (saveid=='' ? saveids[i] : ','+saveids[i]);
				j++;
				if(j==20 && hasid) break;
				if(j==19 && !hasid) break;
			}
		}
		if(hasid) { alert("æ‚¨å·²ç¶“é ‚é?Žè©²å¸–ï¼Œè«‹ä¸?è¦?é‡?å¤?é ‚å¸– ï¼?"); return; }
		else saveid += ','+aid;
		SetCookie('diggid',saveid,1);
	}
	else
	{
		SetCookie('diggid',aid,1);
	}
	myajax = new DedeAjax(taget_obj,false,false,'','','');
	var url = "/plus/digg_ajax.php?action="+ftype+"&id="+aid;
	myajax.SendGet2(url);
}
function getDigg(aid)
{
	var taget_obj = document.getElementById('newdigg');
	myajax = new DedeAjax(taget_obj,false,false,'','','');
	myajax.SendGet2("/plus/digg_ajax.php?id="+aid);
	DedeXHTTP = null;
}
-->
</script>
</head>
<body class="articleview">
<div class="header_top">  
    <div class="w960 center">  
     <span id="time" class="time"><a href="http://www.stackdoc.com" title="StackDocï¼Œå°ˆæ¥­çš„ITè³‡æº?ç«™">StackDoc<a></span>
     <div class="toplinks"><a href="/plus/heightsearch.php" target="_blank">é«˜ç´šæ?œç´¢</a>|<a href="/data/sitemap.html" target="_blank">ç¶²ç«™åœ°åœ–</a>|<a href="/tags.php">TAGæ¨™ç°½</a><a href="/data/rssmap.html" class="rss">RSSè¨‚é–±</a><span>[<a href=""onclick="this.style.behavior='url(#default#homepage)';this.setHomePage('http://www.StackDoc.com');">è¨­ä¸ºé¦–é ?</a>] [<a href="javascript:window.external.AddFavorite('http://www.StackDoc.com','StackDoc')">åŠ å…¥æ”¶è—?</a>]</span></div>
    </div> 
</div>
<div class="header">
	<div class="top w960 center">
      <div class="title">
        <h1><a href="http://www.StackDoc.com"><img src="/templets/default/images/logo.gif" height="54" width="216" alt="StackDoc"/></a> </h1>
      </div>
      <!--
      <div class="banner"></div>
      <div class="banner2"></div>
      -->
      <div id="topGoogleAd">
      	<script type="text/javascript"><!--
					google_ad_client = "pub-2476175026271293";
					/* 728x90, åˆ›å»ºäºŽ 11-2-11 */
					google_ad_slot = "4888237637";
					google_ad_width = 728;
					google_ad_height = 90;
					//-->
					</script>
					<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
				</script>
      </div>
       
	</div><!-- //top --><div id="outad"></div>
	<!-- //è?œå–® -->
	<div class="module blue mT10 wrapper w963">
  	<div class="top">
    	<!-- //å¦‚æžœä¸?ä½¿ç”¨currentstyleï¼Œå?¯ä»¥åœ¨channelæ¨™ç°½åŠ å…¥ cacheid='channeltoplist' å±¬æ€§æ??å?‡æ€§èƒ½ -->
    <div id="navMenu">
    	<ul>
      	<li><a href='/'><span>ä¸»é ?</span></a></li>
      	
      	<li><a href='/a/ITxinwen/'  rel='dropmenu1'><span>ITæ–°è?ž</span></a></li>
      	
      	<li><a href='/a/JAVAbiancheng/'  rel='dropmenu11'><span>JAVAç·¨ç¨‹</span></a></li>
      	
      	<li><a href='/a/bianchengyuyan/'  rel='dropmenu24'><span>ç·¨ç¨‹èªžè¨€</span></a></li>
      	
      	<li><a href='/a/caozuoxitong/'  rel='dropmenu35'><span>æ“?ä½œç³»çµ±</span></a></li>
      	
      	<li><a href='/a/shujuku/'  rel='dropmenu41'><span>æ•¸ç?šåº«</span></a></li>
      	<li class='hover'><a href='/a/fuwuqiruanjian/'  rel='dropmenu49'><span>æœ?å‹™å™¨è»Ÿä»¶</span></a></li>
      	<li><a href='/a/kaifaguanli/'  rel='dropmenu55'><span>é–‹ç™¼ç®¡ç?†</span></a></li>
      	
      	<li><a href='/a/qitazonghe/'  rel='dropmenu73'><span>å…¶å®ƒç¶œå?ˆ</span></a></li>
      	
      	<li><a href='http://school.stackdoc.com' ><span>SCHOOL</span></a></li>
      	
    	</ul>
    </div>	
    <div class="search">
      <form  name="formsearch" action="/plus/search.php">
        <div class="form">
          <h4>æ?œç´¢</h4>
           <input type="hidden" name="kwtype" value="0" />
           <input name="q" type="text" class="search-keyword" id="search-keyword" value="åœ¨é€™è£?æ?œç´¢..." onfocus="if(this.value=='åœ¨é€™è£?æ?œç´¢...'){this.value='';}"  onblur="if(this.value==''){this.value='åœ¨é€™è£?æ?œç´¢...';}" />
           <select name="searchtype" class="search-option" id="search-option">
               <option value="title" selected='1'>æª¢ç´¢æ¨™é¡Œ</option>
               <option value="titlekeyword">æ™ºèƒ½æ¨¡ç³Š</option>
           </select>
          <button type="submit" class="search-submit">æ?œç´¢</button>
        </div>
        </form>
        <div class="tags">
          <h4>ç†±é–€æ¨™ç°½:</h4>
          <ul>
          
            <li><a href='/tags.php?/nginx/'>nginx</a></li>
          
            <li><a href='/tags.php?/apache/'>apache</a></li>
          
            <li><a href='/tags.php?/%E7%BC%96%E8%AF%91%E8%AF%AD%E8%A8%80/'>ç¼–è¯‘è¯­è¨€</a></li>
          
            <li><a href='/tags.php?/Hibernate/'>Hibernate</a></li>
          
            <li><a href='/tags.php?/cobol/'>cobol</a></li>
          
            <li><a href='/tags.php?/test/'>test</a></li>
          
            <li><a href='/tags.php?/Eclipse%E6%8F%92%E4%BB%B6/'>Eclipseæ?’ä»¶</a></li>
          
            <li><a href='/tags.php?/%E7%A8%8B%E5%BA%8F%E5%91%98/'>ç¨‹åº?å‘˜</a></li>
          
            <li><a href='/tags.php?/python/'>python</a></li>
          
            <li><a href='/tags.php?/C%2B%2B/'>C++</a></li>
          
          </ul>
        </div>
    </div><!-- //search -->
		</div>
	</div>
</div><!-- //header -->

<!-- /header -->
<!--float(begin)-->
<div id='pop-div' style="width: 620px;" class="pop-box">  
	<div><table width="620px"><tr><td width="50%"><div id="popAdsTitle"></div></td><td align="right" width="50%"><label onclick="hideDiv('pop-div');">Ã—</label></td></table></div>
	<div class="pop-box-body"id="float_ads_iframe">
	</div>
</div>
<!--float(end)-->
<script language="javascript" type="text/javascript" src="/my/fload_ads/fload_ads.js"></script>
<div class="w960 center clear mt1">
<div class="pleft">
 <div class="place"> <strong>ç•¶å‰?ä½?ç½®:</strong> <a href='http://www.StackDoc.com/'>ä¸»é ?</a> > <a href='/a/fuwuqiruanjian/'>æœ?å‹™å™¨è»Ÿä»¶</a> > <a href='/a/fuwuqiruanjian/Jboss/'>Jboss</a> >  </div>
 <!-- /place -->
 <div class="viewbox">
  <div class="title">
   <h2>Nettyä½¿ç”¨åˆ?æ­¥</h2>
  </div>
  <!-- /title -->
  <div class="info"> <small>æ™‚é–“:</small>2010-10-02 06:57<small>ä¾†æº?:</small>äº’è?¯ç¶² <small>ä½œè€…:</small>äº’è?¯ç¶² <small>é»žæ“Š:</small>
   <script src="/plus/count.php?view=yes&aid=41670&mid=1" type='text/javascript' language="javascript"></script>
   æ¬¡</div>
  <!-- /info -->
  
  <div class="intro">æ”¶è—?è‡ªï¼š http://www.kafka0102.com/2010/06/161.html  1ã€?ç°¡ä»‹ Java1.4æ??ä¾›äº†NIOä½¿é–‹ç™¼è€…å?¯ä»¥ä½¿ç”¨Javaç·¨å¯«é«˜æ€§èƒ½çš„æœ?å‹™ç«¯ç¨‹åº?ï¼Œä½†ä½¿ç”¨åŽŸç”Ÿçš„NIO </div>
  
  <div class="content">
   <table width='100%'>
    <tr>
     <td><div id="contentMidPicAD" style="float:right; clear:both; top:0; vertical-align:top;"></div>
		<div id="contentGoogleAd">			
			<script type="text/javascript" src="/my/google_ad_300_250.js"></script>
		</div>
		<script>
			var className="";
			if(adType==1){
			className="div_round_left";
			}else{
			className="div_round_right";
			}
			document.getElementById("contentGoogleAd").className=className;
		</script>
        <p><span style="font-family: tahoma, arial; font-size: 16px; color: #222222;">
</span></p><h2 style="padding-top: 6px; padding-right: 0px; padding-bottom: 6px; padding-left: 0px; font-size: 16px; margin: 0px;">æ”¶è—?è‡ªï¼š <a href="http://www.kafka0102.com/2010/06/161.html"><span style="font-weight: normal; font-size: 12px;">http://www.kafka0102.com/2010/06/161.html</span></a> </h2><p></p><p></p><h2 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 1ã€?ç°¡ä»‹</h2><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> Java1.4æ??ä¾›äº†NIOä½¿é–‹ç™¼è€…å?¯ä»¥ä½¿ç”¨Javaç·¨å¯«é«˜æ€§èƒ½çš„æœ?å‹™ç«¯ç¨‹åº?ï¼Œä½†ä½¿ç”¨åŽŸç”Ÿçš„NIO APIå°±åƒ?Linux Cä¸­ç¶²çµ¡ç·¨ç¨‹ä¸€æ¨£ï¼Œé‚„æ˜¯éœ€è¦?å?šIOè™•ç?†ã€?å?”è­°è™•ç?†ç­‰ä½Žå±¤æ¬¡å·¥ä½œã€‚æ‰€ä»¥ï¼Œå°±åƒ?Cæœ?å‹™ç«¯ç¨‹åº?å¤§é‡?ä½¿ç”¨libeventä½œç‚ºç¶²çµ¡æ‡‰ç”¨æ¡†æž¶ä¸€æ¨£ï¼ŒJavaç¤¾å?€ä¹Ÿä¸?æ–·æ¹§ç?¾å‡ºåŸºæ–¼NIOçš„ç¶²çµ¡æ‡‰ç”¨æ¡†æž¶ã€‚åœ¨é€™å…¶ä¸­ï¼ŒJbosså‡ºå“?çš„Nettyå°±æ˜¯å€‹ä¸­ç¿¹æ¥šã€‚ Nettyæ˜¯å€‹ç•°æ­¥çš„äº‹ä»¶é©…å‹•ç¶²çµ¡æ‡‰ç”¨æ¡†æž¶ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€?é«˜æ“´å±•æ€§ç­‰ç‰¹æ€§ã€‚ Nettyæ??ä¾›äº†çµ±ä¸€çš„åº•å±¤å?”è­°æŽ¥å?£ï¼Œä½¿å¾—é–‹ç™¼è€…å¾žåº•å±¤çš„ç¶²çµ¡å?”è­°ï¼ˆæ¯”å¦‚TCP/IPã€?UDPï¼‰ä¸­è§£è„«å‡ºä¾†ã€‚å°±ä½¿ç”¨ä¾†èªªï¼Œé–‹ç™¼è€…å?ªè¦?å?ƒè€ƒNettyæ??ä¾›çš„è‹¥å¹²ä¾‹å­?å’Œå®ƒçš„æŒ‡å?—æ–‡æª”ï¼Œå°±å?¯ä»¥æ”¾æ‰‹é–‹ç™¼åŸºæ–¼Nettyçš„æœ?å‹™ç«¯ç¨‹åº?äº†ã€‚ </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">åœ¨Javaç¤¾å?€ï¼Œæœ€çŸ¥å??çš„é–‹æº?Java NIOæ¡†æž¶è¦?å±¬Minaå’ŒNettyï¼Œè€Œä¸”å…©è€…æ·µæº?é —å¤šï¼Œå°?å…©è€…çš„æ¯”è¼ƒè‡ªç„¶ä¸?å°‘ã€‚å¯¦éš›ä¸Šï¼ŒNettyçš„ä½œè€…åŽŸä¾†å°±æ˜¯Minaä½œè€…ä¹‹ä¸€ï¼Œæ‰€ä»¥å?¯ä»¥æƒ³åˆ°ï¼ŒNettyå’ŒMinaåœ¨è¨­è¨ˆç?†å¿µä¸Šæœƒæœ‰å¾ˆå¤šå…±å?Œé»žã€‚æˆ‘å°?Minaæ²’ä»€éº¼ç ”ç©¶ï¼Œä½†å…¶ä½œè€…ä»‹ç´¹ï¼ŒNettyçš„è¨­è¨ˆå°?é–‹ç™¼è€…æœ‰æ›´å?‹å¥½çš„æ“´å±•æ€§ï¼Œä¸¦ä¸”æ€§èƒ½æ–¹é?¢è¦?å„ªæ–¼Minaï¼Œè€ŒNettyå®Œå–„çš„æ–‡æª”ä¹Ÿå¾ˆå?¸å¼•äººã€‚æ‰€ä»¥ï¼Œå¦‚æžœä½ åœ¨å°‹æ‰¾Java NIOæ¡†æž¶ï¼ŒNettyæ˜¯å€‹å¾ˆä¸?éŒ¯çš„é?¸æ“‡ã€‚æœ¬æ–‡çš„å…§å®¹å°±æ˜¯åœ?ç¹žä¸€å€‹demoä»‹ç´¹ä½¿ç”¨Nettyçš„é»žé»žæ»´æ»´ã€‚ </p><h2 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 2ã€?æœ?å‹™ç«¯ç¨‹åº?</h2><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 2.1ã€?ChannelHandler </h3><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">æœ?å‹™ç«¯ç¨‹åº?é€šå¸¸çš„è™•ç?†é?Žç¨‹æ˜¯ï¼šè§£ç¢¼è«‹æ±‚æ•¸æ“šã€?æ¥­å‹™é‚?è¼¯è™•ç?†ã€?ç·¨ç¢¼éŸ¿æ‡‰ã€‚å¾žæ¡†æž¶è§’åº¦ä¾†èªªï¼Œå?¯ä»¥æ??ä¾›3å€‹æŽ¥å?£ä¾†æŽ§åˆ¶ä¸¦èª¿åº¦è©²è™•ç?†é?Žç¨‹ï¼›å¾žæ›´é€šç”¨çš„è§’åº¦ä¾†èªªï¼Œä¸¦ä¸?ç‰¹åŒ–è™•ç?†å…¶ä¸­çš„æ¯?ä¸€æ­¥ï¼Œè€ŒæŠŠæ¯?ä¸€æ­¥ç•¶å?šé?Žæ¿¾å™¨é?ˆä¸­çš„ä¸€ç’°ï¼Œé€™ä¹Ÿæ˜¯Nettyçš„å?šæ³•ã€‚ Nettyå°?è«‹æ±‚è™•ç?†é?Žç¨‹å¯¦ç?¾äº†é?Žæ¿¾å™¨é?ˆæ¨¡å¼?ï¼ˆChannelPipelineï¼‰ï¼Œæ¯?å€‹é?Žæ¿¾å™¨å¯¦ç?¾äº†ChannelHandleræŽ¥å?£ã€‚ Nettyä¸­æœ‰å…©ç¨®è«‹æ±‚äº‹ä»¶æµ?é¡žåž‹ä¹Ÿå?šäº†ç´°åˆ†ï¼š </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> 1ï¼‰downstream eventï¼šå…¶å°?æ‡‰çš„ChannelHandlerå­?æŽ¥å?£æ˜¯ChannelDownstreamHandlerã€‚ downstream eventæ˜¯èªªå¾žé ­åˆ°å°¾åŸ·è¡ŒChannelPipelineä¸­çš„ChannelDownstreamHandlerï¼Œé€™ä¸€é?Žç¨‹ç›¸ç•¶æ–¼å?‘å¤–ç™¼é€?æ•¸æ“šçš„é?Žç¨‹ã€‚ downstream eventæœ‰ï¼šâ€?writeâ€?ã€?â€?bindâ€?ã€?â€?unbindâ€?ã€? â€œconnectâ€?ã€? â€œdisconnectâ€?ã€?â€?closeâ€?ã€‚ </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> 2ï¼‰upstream eventï¼šå…¶å°?æ‡‰çš„ChannelHandlerå­?æŽ¥å?£æ˜¯ChannelUpstreamHandlerã€‚ upstream eventè™•ç?†çš„äº‹ä»¶æ–¹å?‘å’Œdownstream eventç›¸å??ï¼Œé€™ä¸€é?Žç¨‹ç›¸ç•¶æ–¼æŽ¥æ”¶è™•ç?†å¤–ä¾†è«‹æ±‚çš„é?Žç¨‹ã€‚ upstream eventæœ‰ï¼šâ€?messageReceivedâ€?ã€? â€œexceptionCaughtâ€?ã€?â€?channelOpenâ€?ã€?â€?channelClosedâ€?ã€? â€œchannelBoundâ€?ã€?â€?channelUnboundâ€?ã€? â€œchannelConnectedâ€?ã€?â€?writeCompleteâ€?ã€?â€?channelDisconnectedâ€?ã€?â€?channelInterestChangedâ€?ã€‚ </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> Nettyä¸­æœ‰å€‹è¨»é‡‹@interface ChannelPipelineCoverageï¼Œå®ƒè¡¨ç¤ºè¢«è¨»é‡‹çš„ChannelHandleræ˜¯å?¦èƒ½æ·»åŠ åˆ°å¤šå€‹ChannelPipelineä¸­ï¼Œå…¶å?¯é?¸çš„å€¼æ˜¯â€?allâ€?å’Œâ€?oneâ€?ã€‚ â€?allâ€?è¡¨ç¤ºChannelHandleræ˜¯ç„¡ç‹€æ…‹çš„ï¼Œå?¯è¢«å¤šå€‹ChannelPipelineå…±äº«ï¼Œè€Œâ€?oneâ€?è¡¨ç¤ºChannelHandlerå?ªä½œç”¨æ–¼å–®å€‹ChannelPipelineä¸­ã€‚ä½†ChannelPipelineCoverageå?ªæ˜¯å€‹è¨»é‡‹è€Œå·²ï¼Œä¸¦æ²’æœ‰å¯¦éš›çš„æª¢æŸ¥ä½œç”¨ã€‚å°?æ–¼ChannelHandleræ˜¯â€?allâ€?é‚„æ˜¯â€?oneâ€?ï¼Œé‚„æ˜¯æ ¹æ“šé‚?è¼¯éœ€è¦?è€Œå®šã€‚æ¯”å¦‚ï¼Œåƒ?è§£ç¢¼è«‹æ±‚handlerï¼Œå› ç‚ºå?¯èƒ½è§£ç¢¼çš„æ•¸æ“šä¸?å®Œæ•´ï¼Œéœ€è¦?ç­‰å¾…ä¸‹ä¸€æ¬¡è®€äº‹ä»¶ä¾†äº†ä¹‹å¾Œå†?ç¹¼çºŒè§£æž?ï¼Œæ‰€ä»¥è§£ç¢¼è«‹æ±‚handlerå°±éœ€è¦?æ˜¯â€?oneâ€?çš„ï¼ˆå?¦å‰‡å¤šå€‹Channelå…±äº«æ•¸æ“šå°±äº‚äº†ï¼‰ ã€‚è€Œåƒ?æ¥­å‹™é‚?è¼¯è™•ç?†hanlderé€šå¸¸æ˜¯â€?allâ€?çš„ã€‚ </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">ä¸‹é?¢ä»¥ä¸€å€‹ç°¡å–®çš„ä¾‹å­?èªªæ˜Žå¦‚ä½•ç·¨å¯«â€œè§£ç¢¼è«‹æ±‚æ•¸æ“šã€?æ¥­å‹™é‚?è¼¯è™•ç?†ã€?ç·¨ç¢¼éŸ¿æ‡‰â€?é€™ä¸€é?Žç¨‹ä¸­æ¶‰å?Šçš„ChannelHandlerã€‚è©²ä¾‹å­?å¯¦ç?¾çš„å?”è­°æ ¼å¼?å¾ˆç°¡å–®ï¼Œè«‹æ±‚å’ŒéŸ¿æ‡‰æµ?ä¸­é ­4å€‹å­—ç¯€è¡¨ç¤ºå¾Œé?¢è·Ÿçš„å…§å®¹é•·åº¦ï¼Œæ ¹æ“šè©²é•·åº¦å?¯å¾—åˆ°å…§å®¹é«”ã€‚ </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">é¦–å…ˆçœ‹ä¸‹è§£ç¢¼å™¨çš„å¯¦ç?¾ï¼š<html></p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> <span style="color: #000000; font-weight: bold;">public class</span> MessageDecoder <span style="color: #000000; font-weight: bold;">extends</span> FrameDecoder <span style="color: #009900;">{</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">protected</span> <span style="color: #003399;">Object</span> decode <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, Channel channel, ChannelBuffer buffer <span style="color: #009900;">)</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">(</span> buffer. <span style="color: #006633;">readableBytes</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">&lt;</span> <span style="color: #cc66cc;">4</span> <span style="color: #009900;">) {</span>
            <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(1)</span>
        <span style="color: #009900;">}</span>
        <span style="color: #000066; font-weight: bold;">int</span> dataLength <span style="color: #339933;">=</span> buffer. <span style="color: #006633;">getInt</span> <span style="color: #009900;">(</span> buffer. <span style="color: #006633;">readerIndex</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">(</span> buffer. <span style="color: #006633;">readableBytes</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">&lt;</span> dataLength <span style="color: #339933;">+</span> <span style="color: #cc66cc;">4</span> <span style="color: #009900;">) {</span>
            <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(2)</span>
        <span style="color: #009900;">}</span>
?
        buffer. <span style="color: #006633;">skipBytes</span> <span style="color: #009900;">(</span> <span style="color: #cc66cc;">4</span> <span style="color: #009900;">)</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(3)</span>
        <span style="color: #000066; font-weight: bold;">byte</span> <span style="color: #009900;">[ ]</span> decoded <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #000066; font-weight: bold;">byte</span> <span style="color: #009900;">[</span> dataLength <span style="color: #009900;">]</span> <span style="color: #339933;">;</span>
        buffer. <span style="color: #006633;">readBytes</span> <span style="color: #009900;">(</span> decoded <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
        <span style="color: #003399;">String</span> msg <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> <span style="color: #003399;">String</span> <span style="color: #009900;">(</span> decoded <span style="color: #009900;">)</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(4)</span>
        <span style="color: #000000; font-weight: bold;">return</span> msg <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span> </pre></div></div><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> MessageDecoderç¹¼æ‰¿è‡ªFrameDecoderï¼ŒFrameDecoderæ˜¯Netty codecåŒ…ä¸­çš„è¼”åŠ©é¡žï¼Œå®ƒæ˜¯å€‹ChannelUpstreamHandlerï¼Œdecodeæ–¹æ³•æ˜¯FrameDecoderå­?é¡žéœ€è¦?å¯¦ç?¾çš„ã€‚åœ¨ä¸Šé?¢çš„ä»£ç¢¼ä¸­ï¼Œæœ‰ï¼š </p>argin: 0px;"&gt;(1)æª¢æŸ¥ChannelBufferä¸­çš„å­—ç¯€æ•¸ï¼Œå¦‚æžœChannelBufferå?¯è®€çš„å­—ç¯€æ•¸å°‘æ–¼4,å‰‡è¿”å›žnullç­‰å¾…ä¸‹æ¬¡è®€äº‹ä»¶ã€‚ <br> (2)ç¹¼çºŒæª¢æŸ¥ChannelBufferä¸­çš„å­—ç¯€æ•¸ï¼Œå¦‚æžœChannelBufferå?¯è®€çš„å­—ç¯€æ•¸å°‘æ–¼dataLength + 4ï¼Œå‰‡è¿”å›žnullç­‰å¾…ä¸‹æ¬¡è®€äº‹ä»¶ã€‚ <br> (3)è¶Šé?ŽdataLengthçš„å­—ç¯€ã€‚ <br> (4)æ§‹é€ è§£ç¢¼çš„å­—ç¬¦ä¸²è¿”å›žã€‚<html></p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> @ChannelPipelineCoverage <span style="color: #009900;">(</span> <span style="color: #0000ff;">"all"</span> <span style="color: #009900;">)</span>
<span style="color: #000000; font-weight: bold;">public class</span> MessageServerHandler <span style="color: #000000; font-weight: bold;">extends</span> SimpleChannelUpstreamHandler <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">private static final</span> Logger logger <span style="color: #339933;">=</span> Logger. <span style="color: #006633;">getLogger</span> <span style="color: #009900;">(</span>
            MessageServerHandler. <span style="color: #000000; font-weight: bold;">class</span> . <span style="color: #006633;">getName</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> messageReceived <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, MessageEvent e <span style="color: #009900;">) {</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">(</span> <span style="color: #339933;">!</span> <span style="color: #009900;">(</span> e. <span style="color: #006633;">getMessage</span> <span style="color: #009900;">( )</span> <span style="color: #000000; font-weight: bold;">instanceof</span> <span style="color: #003399;">String</span> <span style="color: #009900;">) ) {</span>
            <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(1)</span>
        <span style="color: #009900;">}</span>
        <span style="color: #003399;">String</span> msg <span style="color: #339933;">=</span> <span style="color: #009900;">(</span> <span style="color: #003399;">String</span> <span style="color: #009900;">)</span> e. <span style="color: #006633;">getMessage</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
        <span style="color: #003399;">System</span> . <span style="color: #006633;">err</span> . <span style="color: #006633;">println</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"got msg:"</span> <span style="color: #339933;">+</span> msg <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
        e. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">write</span> <span style="color: #009900;">(</span> msg <span style="color: #009900;">)</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(2)</span>
    <span style="color: #009900;">}</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> exceptionCaught <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, ExceptionEvent e <span style="color: #009900;">) {</span>
        logger. <span style="color: #006633;">log</span> <span style="color: #009900;">(</span>
                Level. <span style="color: #006633;">WARNING</span> ,
                <span style="color: #0000ff;">"Unexpected exception from downstream."</span> ,
                e. <span style="color: #006633;">getCause</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        e. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">close</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span> </pre></div></div>4px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"&gt;MessageServerHandleræ˜¯æœ?å‹™ç«¯æ¥­å‹™è™•ç?†handlerï¼Œå…¶ç¹¼æ‰¿è‡ªSimpleChannelUpstreamHandlerï¼Œä¸¦ä¸»è¦?å¯¦ç?¾messageReceivedäº‹ä»¶ã€‚é—œæ–¼è©²é¡žï¼Œæœ‰å¦‚ä¸‹è¨»è§£ï¼š </p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> (1)è©²upstreamäº‹ä»¶æµ?ä¸­ï¼Œé¦–å…ˆç¶“é?ŽMessageDecoderï¼Œå…¶æœƒå°‡decodeè¿”å›žçš„è§£ç¢¼å¾Œçš„æ•¸æ“šæ§‹é€ æˆ?MessageEvent.getMessage()ï¼Œæ‰€ä»¥åœ¨handlerä¸Šä¸‹æ–‡é—œä¿‚ä¸­ï¼ŒMessageEvent.getMessage()ä¸¦ä¸?ä¸€å®šéƒ½è¿”å›žChannelBufferé¡žåž‹çš„æ•¸æ“šã€‚ <br> (2)MessageServerHandlerå?ªæ˜¯ç°¡å–®çš„å°‡å¾—åˆ°çš„msgå†?å¯«å›žçµ¦å®¢æˆ¶ç«¯ã€‚ e.getChannel().write(msg);æ“?ä½œå°‡è§¸ç™¼DownstreamMessageEventäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯èª¿ç”¨ä¸‹é?¢çš„MessageEncoderå°‡ç·¨ç¢¼çš„æ•¸æ“šè¿”å›žçµ¦å®¢æˆ¶ç«¯ã€‚ </p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> @ChannelPipelineCoverage <span style="color: #009900;">(</span> <span style="color: #0000ff;">"all"</span> <span style="color: #009900;">)</span>
<span style="color: #000000; font-weight: bold;">public class</span> MessageEncoder <span style="color: #000000; font-weight: bold;">extends</span> OneToOneEncoder <span style="color: #009900;">{</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">protected</span> <span style="color: #003399;">Object</span> encode <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, Channel channel, <span style="color: #003399;">Object</span> msg <span style="color: #009900;">)</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span>
        <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">(</span> <span style="color: #339933;">!</span> <span style="color: #009900;">(</span> msg <span style="color: #000000; font-weight: bold;">instanceof</span> <span style="color: #003399;">String</span> <span style="color: #009900;">) ) {</span>
            <span style="color: #000000; font-weight: bold;">return</span> msg <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(1)</span>
        <span style="color: #009900;">}</span>
?
        <span style="color: #003399;">String</span> res <span style="color: #339933;">=</span> <span style="color: #009900;">(</span> <span style="color: #003399;">String</span> <span style="color: #009900;">)</span> msg <span style="color: #339933;">;</span>
        <span style="color: #000066; font-weight: bold;">byte</span> <span style="color: #009900;">[ ]</span> data <span style="color: #339933;">=</span> res. <span style="color: #006633;">getBytes</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
        <span style="color: #000066; font-weight: bold;">int</span> dataLength <span style="color: #339933;">=</span> data. <span style="color: #006633;">length</span> <span style="color: #339933;">;</span>
        ChannelBuffer buf <span style="color: #339933;">=</span> ChannelBuffers. <span style="color: #006633;">dynamicBuffer</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(2)</span>
        buf. <span style="color: #006633;">writeInt</span> <span style="color: #009900;">(</span> dataLength <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
        buf. <span style="color: #006633;">writeBytes</span> <span style="color: #009900;">(</span> data <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">return</span> buf <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//(3)</span>
    <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span> </pre></div></div><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> MessageEncoderæ˜¯å€‹ChannelDownstreamHandlerã€‚å°?è©²é¡žçš„è¨»è§£å¦‚ä¸‹ï¼š<html></p><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;"> (1)å¦‚æžœç·¨ç¢¼çš„msgä¸?æ˜¯å?ˆæ³•é¡žåž‹ï¼Œå°±ç›´æŽ¥è¿”å›žè©²msgï¼Œä¹‹å¾ŒOneToOneEncoderæœƒèª¿ç”¨ctx.sendDownstream(evt);ä¾†èª¿ç”¨ä¸‹ä¸€å€‹ChannelDownstreamHandlerã€‚å°?æ–¼è©²ä¾‹å­?ä¾†èªªï¼Œé€™ç¨®æƒ…æ³?æ˜¯ä¸?æ‡‰è©²å‡ºç?¾çš„ã€‚ <br> (2)é–‹ç™¼è€…å‰µå»ºChannelBufferçš„ç”¨æ­¦ä¹‹åœ°å°±æ˜¯é€™å…’äº†ï¼Œé€šå¸¸ä½¿ç”¨dynamicBufferå?³å?¯ï¼Œè¡¨ç¤ºå¾—åˆ°çš„ChannelBufferå?¯å‹•æ…‹å¢žåŠ å¤§å°?ã€‚ <br> (3)è¿”å›žç·¨ç¢¼å¾Œçš„ChannelBufferä¹‹å¾Œï¼ŒOneToOneEncoderæœƒèª¿ç”¨Channels.writeå°‡æ•¸æ“šå¯«å›žå®¢æˆ¶ç«¯ã€‚ </p><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 2.2ã€?MessageServerPipelineFactory </h3><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">å‰µå»ºäº†3å€‹ChannelHandlerï¼Œéœ€è¦?å°‡ä»–å€‘è¨»å†Šåˆ°ChannelPipelineï¼Œè€ŒChannelPipelineå?ˆæ˜¯å’ŒChannelå°?æ‡‰çš„ï¼ˆæ˜¯å…¨å±€å–®ä¾‹é‚„æ˜¯æ¯?å€‹Channelå°?æ‡‰ä¸€å€‹ChannelPipelineå¯¦ä¾‹ä¾?è³´æ–¼å¯¦ç?¾ï¼‰ã€‚å?¯ä»¥å¯¦ç?¾ChannelPipelineçš„å·¥å» æŽ¥å?£ChannelPipelineFactoryå¯¦ç?¾è©²ç›®çš„ã€‚ MessageServerPipelineFactoryçš„ä»£ç¢¼å¦‚ä¸‹ï¼š </p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> <span style="color: #000000; font-weight: bold;">public class</span> MessageServerPipelineFactory <span style="color: #000000; font-weight: bold;">implements</span>
        ChannelPipelineFactory <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">public</span> ChannelPipeline getPipeline <span style="color: #009900;">( )</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span>
        ChannelPipeline pipeline <span style="color: #339933;">=</span> pipeline <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
?
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"decoder"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageDecoder <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"encoder"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageEncoder <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"handler"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageServerHandler <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
?
        <span style="color: #000000; font-weight: bold;">return</span> pipeline <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span> </pre></div></div><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 2.3ã€?MessageServer </h3><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">æœ?å‹™ç«¯ç¨‹åº?å°±å‰©ä¸‹å•Ÿå‹•ä»£ç¢¼äº†ï¼Œä½¿ç”¨Nettyçš„ServerBootstrapä¸‰ä¸‹äº”é™¤äºŒå®Œæˆ?ä¹‹ã€‚ </p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> <span style="color: #000000; font-weight: bold;">public class</span> MessageServer <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">public static</span> <span style="color: #000066; font-weight: bold;">void</span> main <span style="color: #009900;">(</span> <span style="color: #003399;">String</span>9900;"&gt;[ <span style="color: #009900;">]</span> args <span style="color: #009900;">)</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span> <span style="color: #666666; font-style: italic;">// Configure the server.</span> ServerBootstrap bootstrap <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> ServerBootstrap <span style="color: #009900;">(</span> <span style="color: #000000; font-weight: bold;">new</span> NioServerSocketChannelFactory <span style="color: #009900;">(</span> Executors. <span style="color: #006633;">newCachedThreadPool</span> <span style="color: #009900;">( )</span> , Executors. <span style="color: #006633;">newCachedThreadPool</span> <span style="color: #009900;">( ) ) )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Set up the default event pipeline.</span> bootstrap . <span style="color: #006633;">setPipelineFactory</span> <span style="color: #009900;">(</span> <span style="color: #000000; font-weight: bold;">new</span> MessageServerPipelineFactory <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Bind and start to accept incoming connections.</span> bootstrap. <span style="color: #006633;">bind</span> <span style="color: #009900;">(</span> <span style="color: #000000; font-weight: bold;">new</span> InetSocketAddress <span style="color: #009900;">(</span> <span style="color: #cc66cc;">8080</span> <span style="color: #009900;">) )</span> <span style="color: #339933;">;</span> <span style="color: #009900;">} }</span> </pre></div></div><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">ç¨?åŠ è£œå……çš„æ˜¯ï¼Œè©²Serverç¨‹åº?ä¸¦ä¸?å®Œæ•´ï¼Œå®ƒæ²’æœ‰è™•ç?†é—œé–‰æ™‚çš„è³‡æº?é‡‹æ”¾ï¼Œå„˜ç®¡æš´åŠ›çš„ä¾†çœ‹ä¸¦ä¸?ä¸€å®šéœ€è¦?å?šé€™æ¨£çš„å–„å¾Œå·¥ä½œã€‚ </p><h2 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 3ã€?å®¢æˆ¶ç«¯ç¨‹åº?</h2><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">å®¢æˆ¶ç«¯ç¨‹åº?å’Œæœ?å‹™ç«¯ç¨‹åº?è™•ç?†æ¨¡åž‹ä¸Šæ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œé€™è£¡é‚„æ˜¯ä»˜ä¸Šä»£ç¢¼ä¸¦ä½œç°¡è¦?èªªæ˜Žã€‚ </p><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 3.1ã€? ChannelHandler </h3><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">å®¢æˆ¶ç«¯æ˜¯å…ˆç™¼é€?æ•¸æ“šåˆ°æœ?å‹™ç«¯ï¼ˆdownstreamäº‹ä»¶æµ?ï¼‰ï¼Œç„¶å¾Œæ˜¯è™•ç?†å¾žæœ?å‹™ç«¯æŽ¥æ”¶çš„æ•¸æ“šï¼ˆupstreamäº‹ä»¶æµ?ï¼‰ã€‚é€™è£¡æœ‰å€‹å•?é¡Œæ˜¯ï¼Œæ€Žéº¼æŠŠéœ€è¦?ç™¼é€?çš„æ•¸æ“šé€?åˆ°downstreamäº‹ä»¶æµ?è£¡å‘¢ï¼Ÿé€™å°±ç”¨åˆ°äº†ChannelUpstreamHandlerçš„channelConnectedäº‹ä»¶äº†ã€‚å¯¦ç?¾çš„MessageClientHandlerä»£ç¢¼å¦‚ä¸‹ï¼š<html></p><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> @ChannelPipelineCoverage <span style="color: #009900;">(</span> <span style="color: #0000ff;">"all"</span> <span style="color: #009900;">)</span>
<span style="color: #000000; font-weight: bold;">public class</span> MessageClientHandler <span style="color: #000000; font-weight: bold;">extends</span> SimpleChannelUpstreamHandler <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">private static final</span> Logger logger <span style="color: #339933;">=</span> Logger. <span style="color: #006633;">getLogger</span> <span style="color: #009900;">(</span>
            MessageClientHandler. <span style="color: #000000; font-weight: bold;">class</span> . <span style="color: #006633;">getName</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
?
?
    @Override
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> channelConnected <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, ChannelStateEvent e <span style="color: #009900;">) {</span>
        <span style="color: #003399;">String</span> message <span style="color: #339933;">=</span> <span style="color: #0000ff;">"hello kafka0102"</span> <span style="color: #339933;">;</span>
        e. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">write</span> <span style="color: #009900;">(</span> message <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> messageReceived <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, MessageEvent e <span style="color: #009900;">) {</span>
        <span style="color: #666666; font-style: italic;">// Send back the received message to the remote peer.</span>
        <span style="color: #003399;">System</span> . <span style="color: #006633;">err</span> . <span style="color: #006633;">println</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"messageReceived send message "</span> <span style="color: #339933;">+</span> e. <span style="color: #006633;">getMessage</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        <span style="color: #000000; font-weight: bold;">try</span> <span style="color: #009900;">{</span>
            <span style="color: #003399;">Thread</span> . <span style="color: #006633;">sleep</span> <span style="color: #009900;">(</span> <span style="color: #cc66cc;">1000</span> <span style="color: #339933;">*</span> <span style="color: #cc66cc;">3</span> <span style="color: #009900;">)</span> <span style="color: #339933;">;</span>
        <span style="color: #009900;">}</span> <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">(</span> <span style="color: #003399;">Exception</span> ex <span style="color: #009900;">) {</span>
            ex. <span style="color: #006633;">printStackTrace</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
        <span style="color: #009900;">}</span>
        e. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">write</span> <span style="color: #009900;">(</span> e. <span style="color: #006633;">getMessage</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
?
    @Override
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> exceptionCaught <span style="color: #009900;">(</span>
            ChannelHandlerContext ctx, ExceptionEvent e <span style="color: #009900;">)</span>tyle="color: #009900;"&gt;{ <span style="color: #666666; font-style: italic;">// Close the connection when an exception is raised.</span> logger. <span style="color: #006633;">log</span> <span style="color: #009900;">(</span> Level. <span style="color: #006633;">WARNING</span> , <span style="color: #0000ff;">"Unexpected exception from downstream."</span> , e. <span style="color: #006633;">getCause</span> <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span> e. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">close</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span> <span style="color: #009900;">} }</span> </pre></div></div><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">å°?æ–¼ç·¨ç¢¼å’Œè§£ç¢¼Handlerï¼Œå¾©ç”¨MessageEncoderå’ŒMessageDecoderå?³å?¯ã€‚<html></p><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 3.2ã€? MessageClientPipelineFactory </h3><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> <span style="color: #000000; font-weight: bold;">public class</span> MessageClientPipelineFactory <span style="color: #000000; font-weight: bold;">implements</span>
        ChannelPipelineFactory <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">public</span> ChannelPipeline getPipeline <span style="color: #009900;">( )</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span>
        ChannelPipeline pipeline <span style="color: #339933;">=</span> pipeline <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span>
?
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"decoder"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageDecoder <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"encoder"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageEncoder <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
        pipeline. <span style="color: #006633;">addLast</span> <span style="color: #009900;">(</span> <span style="color: #0000ff;">"handler"</span> , <span style="color: #000000; font-weight: bold;">new</span> MessageClientHandler <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span>
?
        <span style="color: #000000; font-weight: bold;">return</span> pipeline <span style="color: #339933;">;</span>
    <span style="color: #009900;">}</span>
<span style="color: #009900;">}</span> </pre></div></div><h3 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 3.3ã€?MessageClient </h3><div class="wp_syntax" style="color: #110000; background-color: #f9f9f9; margin-top: 0px; margin-right: 0px; margin-bottom: 1.5em; margin-left: 0px; width: 853px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px; border: 1px solid silver;"><div class="code" style="vertical-align: top; padding-top: 2px; padding-right: 4px; padding-bottom: 2px; padding-left: 4px;"><pre class="java"> <span style="color: #000000; font-weight: bold;">public class</span> MessageClient <span style="color: #009900;">{</span>
?
    <span style="color: #000000; font-weight: bold;">public static</span> <span style="color: #000066; font-weight: bold;">void</span> main <span style="color: #009900;">(</span> <span style="color: #003399;">String</span> <span style="color: #009900;">[ ]</span> args <span style="color: #009900;">)</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">{</span>
        <span style="color: #666666; font-style: italic;">// Parse options.</span>
        <span style="color: #003399;">String</span> host <span style="color: #339933;">=</span> <span style="color: #0000ff;">"127.0.0.1"</span> <span style="color: #339933;">;</span>
        <span style="color: #000066; font-weight: bold;">int</span> port <span style="color: #339933;">=</span> <span style="color: #cc66cc;">8080</span> <span style="color: #339933;">;</span>
        <span style="color: #666666; font-style: italic;">// Configure the client.</span>
        ClientBootstrap bootstrap <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> ClientBootstrap <span style="color: #009900;">(</span>
                <span style="color: #000000; font-weight: bold;">new</span> NioClientSocketChannelFactory <span style="color: #009900;">(</span>
                        Executors.yle="color: #006633;"&gt;newCachedThreadPool <span style="color: #009900;">( )</span> , Executors. <span style="color: #006633;">newCachedThreadPool</span> <span style="color: #009900;">( ) ) )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Set up the event pipeline factory.</span> bootstrap. <span style="color: #006633;">setPipelineFactory</span> <span style="color: #009900;">(</span> <span style="color: #000000; font-weight: bold;">new</span> MessageClientPipelineFactory <span style="color: #009900;">( ) )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Start the connection attempt.</span> ChannelFuture future <span style="color: #339933;">=</span> bootstrap. <span style="color: #006633;">connect</span> <span style="color: #009900;">(</span> <span style="color: #000000; font-weight: bold;">new</span> InetSocketAddress <span style="color: #009900;">(</span> host, port <span style="color: #009900;">) )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Wait until the connection is closed or the connection attempt fails.</span> future. <span style="color: #006633;">getChannel</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">getCloseFuture</span> <span style="color: #009900;">( )</span> . <span style="color: #006633;">awaitUninterruptibly</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// Shut down thread pools to exit .</span> bootstrap. <span style="color: #006633;">releaseExternalResources</span> <span style="color: #009900;">( )</span> <span style="color: #339933;">;</span> <span style="color: #009900;">} }</span> </pre></div></div><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">åœ¨å¯«å®¢æˆ¶ç«¯ä¾‹å­?æ™‚ï¼Œæˆ‘æƒ³åƒ?çš„ä»£ç¢¼ä¸¦ä¸?æ˜¯é€™æ¨£çš„ï¼Œå°?å®¢æˆ¶ç«¯çš„ä»£ç¢¼æˆ‘ä¹Ÿæ²’å?šé?Žå¤šçš„ç ”ç©¶ï¼Œæ‰€ä»¥ä¹Ÿå?¯èƒ½æ²’æœ‰æ‰¾åˆ°æ›´å¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚åœ¨ä¸Šé?¢çš„ä¾‹å­?ä¸­ï¼Œbootstrap.connectæ–¹æ³•ä¸­æœƒè§¸ç™¼å¯¦éš›çš„é€£æŽ¥æ“?ä½œï¼ŒæŽ¥è‘—è§¸ç™¼MessageClientHandler.channelConnectedï¼Œä½¿æ•´å€‹é?Žç¨‹é?‹è½‰èµ·ä¾†ã€‚ä½†æ˜¯ï¼Œæˆ‘æƒ³è¦?çš„æ˜¯ä¸€å€‹é€£æŽ¥æ± ï¼Œä¸¦ä¸”å¦‚ä½•å¯«æ•¸æ“šä¹Ÿä¸?æ‡‰è©²åœ¨channelConnectedä¸­ï¼Œé€™æ¨£å°?æ–¼å‹•æ…‹çš„æ•¸æ“šï¼Œå?ªèƒ½åœ¨æ§‹é€ å‡½æ•¸ä¸­å‚³é?žéœ€è¦?å¯«çš„æ•¸æ“šäº†ã€‚ä½†åˆ°ç?¾åœ¨ï¼Œæˆ‘é‚„ä¸?æ¸…æ¥šå¦‚ä½•å°‡é€£æŽ¥æ± å’ŒChannelPipelineæœ‰æ•ˆçš„çµ?å?ˆèµ·ä¾†ã€‚æˆ–è¨±ï¼Œé€™æ¨£çš„éœ€æ±‚å?¯ä»¥è·¨é?ŽNettyä¾†å¯¦ç?¾ã€‚ </p><h2 style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"> 4ã€?ç¸½çµ?</h2><p style="padding-top: 0px; padding-right: 0px; padding-bottom: 15px; padding-left: 0px; font-size: 14px; line-height: 20px; font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; margin: 0px;">é—œæ–¼Nettyçš„åˆ?æ­¥ä½¿ç”¨ï¼Œå°šä¸”ç¸½çµ?åˆ°é€™è£¡ã€‚é—œæ–¼é€™ç¯‡æ–‡ç« ï¼Œå¯«å¾—æ–·æ–·çºŒçºŒï¼Œä»¥è‡³æ–¼åˆ°å¾Œä¾†æˆ‘éƒ½æ²’èˆˆè¶£æŠŠå…§å®¹éƒ½æ•´ç?†å‡ºä¾†ã€‚ç•¶ç„¶ï¼Œé€™å¤šå°‘ä¹Ÿæ˜¯å› ç‚ºæˆ‘æ˜¯å…ˆæ•´ç?†NettyåŽŸç?†æ–¹é?¢çš„æ?±è¥¿æ‰€è‡´ã€‚æˆ‘ä¹Ÿå?ªèƒ½å?‘å¾®çš„æœŸæœ›ï¼Œè©²æ–‡å°?Nettyå…¥é–€è€…æœƒæœ‰äº›è¨±å¹«åŠ©ã€‚ </p> <span style="font-family: 'Trebuchet MS', verdana, arial, 'Times New Roman', serif; font-size: 13px; line-height: 20px;"><br> ===============================è?¯éº—çš„çµ‚æ­¢ç¬¦=============== =================</span> <p></p></div><div><script type="text/javascript">
      alimama_pid="17340767"; 
      alimama_titlecolor="0000FF"; 
      alimama_descolor ="000000"; 
      alimama_bgcolor="FFFFFF"; 
      alimama_bordercolor="E6E6E6"; 
      alimama_linkcolor="008000"; 
      alimama_bottomcolor="FFFFFF"; 
      alimama_anglesize="0"; 
      alimama_bgpic="0"; 
      alimama_icon="0"; 
      alimama_sizecode="14"; 
      alimama_width=468; 
      alimama_height=60; 
      alimama_type=2; 
      </script><script src="http://a.alimama.cn/inf.js" type=text/javascript>
      </script></div><br>æœ¬æ–‡æ‘˜è‡ªï¼šhttp://crazier9527.javaeye.com/blog/768681		
        <div id="downContentArea1"></div>
		<div id="downContentGoogleAd" align="center">
			<script type="text/javascript" src="/my/google_ad_300_250_2.js"></script>
		</div>
		<div id="downContentArea2"></div>
		</td>
      
      </td>
    </tr>
   </table>
  </div>
  <!-- /content -->
  <div class="dede_pages">
   <ul class="pagelist">
    
   </ul>
  </div>
  <!-- /pages -->
  <!-- //é ‚è¸© -->
  <div class="newdigg" id="newdigg">
   <div class="diggbox digg_good" onmousemove="this.style.backgroundPosition='left bottom';" onmouseout="this.style.backgroundPosition='left top';" onclick="javascript:postDigg('good',41670)">
    <div class="digg_act">é ‚ä¸€ä¸‹</div>
    <div class="digg_num">(0)</div>
    <div class="digg_percent">
     <div class="digg_percent_bar"><span style="width:0%"></span></div>
     <div class="digg_percent_num">0%</div>
    </div>
   </div>
   <div class="diggbox digg_bad" onmousemove="this.style.backgroundPosition='right bottom';" onmouseout="this.style.backgroundPosition='right top';" onclick="javascript:postDigg('bad',41670)">
    <div class="digg_act">è¸©ä¸€ä¸‹</div>
    <div class="digg_num">(0)</div>
    <div class="digg_percent">
     <div class="digg_percent_bar"><span style="width:0%"></span></div>
     <div class="digg_percent_num">0%</div>
    </div>
   </div>
  </div>
  <script language="javascript" type="text/javascript">getDigg(41670);</script>
  <!-- //é ‚è¸©éƒ¨ä»½çš„æº?ç¢¼çµ?æ?Ÿ -->
  <!-- //åˆ†äº«ä»£ç¢¼é–‹å§‹ -->
  
  <!-- //åˆ†äº«ä»£ç¢¼çµ?æ?Ÿ -->
  <div class="boxoff"> <strong>------åˆ†éš”ç·š----------------------------</strong> </div>
  <div class="handle">
   <div class="context">
    <ul>
     <li>ä¸Šä¸€ç¯‡ï¼š<a href='/a/fuwuqiruanjian/Jboss/20101002/41668.html'>ä½¿ç”¨Netty æ§‹é€ ä¸€å€‹ç•°æ­¥çš„httpclient</a> </li>
     <li>ä¸‹ä¸€ç¯‡ï¼š<a href='/a/fuwuqiruanjian/Jboss/20101002/41673.html'>J2EEç¨‹åº?å¾žJBoss4.0.0å?Š3.2.xå?‡ç´šåˆ°4.0.1+çš„å•?é¡Œè§£æ±ºè¾¦æ³•</a> </li>
    </ul>
   </div>
   <!-- /context -->
   <div class="actbox">
    <ul>
     <li id="act-fav"><a href="/plus/stow.php?aid=41670" target="_blank">æ”¶è—?</a></li>
     <li id="act-err"><a href="/plus/erraddsave.php?aid=41670&title=Nettyä½¿ç”¨åˆ?æ­¥" target="_blank">æŒ‘éŒ¯</a></li>
     <li id="act-pus"><a href="/plus/recommend.php?aid=41670" target="_blank">æŽ¨è–¦</a></li>
     <li id="act-pnt"><a href="#" onClick="window.print();">æ‰“å?°</a></li>
    </ul>
   </div>
   <!-- /actbox -->
  </div>
  <!-- /handle -->
 </div>
 <!-- /viewbox -->
 <div id="recommandAreaDown"></div>
 <!-- //AJAXè©•è«–å?€ -->
 <!-- //ä¸»æ¨¡æ?¿å¿…é ˆè¦?å¼•å…¥/include/dedeajax2.js -->
<a name='postform'></a>
<div class="mt1">
		<dl class="tbox">
			<dt>
				<strong>ç™¼è¡¨è©•è«–</strong>
				<span class="more"></span>
			</dt>
			<dd>
				<div class="dede_comment_post">
          <form action="#" method="post" name="feedback">
          <input type="hidden" name="dopost" value="send" />
          <input type="hidden" name="comtype" value="comments">
          <input type="hidden" name="aid" value="41670" />
          <input type="hidden" name="fid" id='feedbackfid' value="0" />
          <div class="dcmp-title">
						<small>è«‹è‡ªè¦ºé?µå®ˆäº’è?¯ç¶²ç›¸é—œçš„æ”¿ç­–æ³•è¦?ï¼Œåš´ç¦?ç™¼å¸ƒè‰²æƒ…ã€?æš´åŠ›ã€?å??å‹•çš„è¨€è«–ã€‚</small>
					</div><!-- /dcmp-title -->
					<div class="dcmp-stand">
						<strong>è©•åƒ¹:</strong>
							<input type="radio" name="feedbacktype" checked="1" value="feedback" id="dcmp-stand-neu" /><label for="dcmp-stand-neu"><img src="/templets/default/images/cmt-neu.gif" />ä¸­ç«‹</label>
							<input type="radio" name="feedbacktype" value="good" id="dcmp-stand-good" /><label for="dcmp-stand-good"><img src="/templets/default/images/cmt-good.gif" />å¥½è©•</label>
							<input type="radio" name="feedbacktype" value="bad" id="dcmp-stand-bad" /><label for="dcmp-stand-bad"><img src="/templets/default/images/cmt-bad.gif" />å·®è©•</label>
					</div><!-- /dcmp-stand -->
                    <div class="clr"></div>
                    <div class="dcmp-mood">
						<strong>è¡¨æƒ…:</strong>
						<ul>            
								<li><input type="radio" name="face" value="1" checked="1" /><img src="/templets/default/images/mood/ico-mood-1.gif" /></li><li><input type="radio" name="face" value="2" /><img src="/templets/default/images/mood/ico-mood-2.gif" /></li><li><input type="radio" name="face" value="3" /><img src="/templets/default/images/mood/ico-mood-3.gif" /></li><li><input type="radio" name="face" value="4" /><img src="/templets/default/images/mood/ico-mood-4.gif" /></li><li><input type="radio" name="face" value="5" /><img src="/templets/default/images/mood/ico-mood-5.gif" /></li><li><input type="radio" name="face" value="6" /><img src="/templets/default/images/mood/ico-mood-6.gif" /></li><li><input type="radio" name="face" value="7" /><img src="/templets/default/images/mood/ico-mood-7.gif" /></li><li><input type="radio" name="face" value="8" /><img src="/templets/default/images/mood/ico-mood-8.gif" /></li><li><input type="radio" name="face" value="9" /><img src="/templets/default/images/mood/ico-mood-9.gif" /></li><li><input type="radio" name="face" value="10" /><img src="/templets/default/images/mood/ico-mood-10.gif" /></li><li><input type="radio" name="face" value="11" /><img src="/templets/default/images/mood/ico-mood-11.gif" /></li>                   
						</ul>
					</div><!-- /dcmp-mood -->
					<div class="dcmp-content">
						<textarea cols="60" name="msg" rows="5" class="ipt-txt"></textarea>
					</div><!-- /dcmp-content -->
					<div class="dcmp-post"><!--æœªç™»é™†-->
							<div class="dcmp-userinfo" id="_ajax_feedback">
								
                                é©—è­‰ç¢¼:<input type="text" name="validate" size="4" class="ipt-txt" style="text-transform:uppercase;"/><img src= "/include/vdimgck.php" id="validateimg" style="cursor:pointer" onclick="this.src=this.src+'?'" title="é»žæ“Šæˆ‘æ›´æ?›åœ–ç‰‡" alt="é»žæ“Šæˆ‘æ›´æ?›åœ–ç‰‡" />
                <input type="checkbox" name="notuser" id="dcmp-submit-guest" /><label for="dcmp-submit-guest" />åŒ¿å??? </label>
							</div>
              
							<div class="dcmp-submit">
								<button type="button" onClick='PostComment()'>ç™¼è¡¨è©•è«–</button>
							</div>
						</div>
        </form>
				</div>
			</dd>
		</dl>
	</div><!-- //è©•è«–è¡¨å–®å?€çµ?æ?Ÿ -->

<!-- //è©•è«–å…§å®¹å?€ -->
	<a name='commettop'></a>
	<div class="mt1">
			<dl class="tbox">
				<dt>
					<strong>æœ€æ–°è©•è«–</strong>
					<span class="more"><a href="/plus/feedback.php?aid=41670">é€²å…¥è©³ç´°è©•è«–é ?&gt;&gt;</a></span>
				</dt>
				<!-- //é€™å…©å€‹IDçš„å?€å¡Šå¿…é ˆå­˜åœ¨ï¼Œå?¦å‰‡JSæœƒå‡ºéŒ¯ -->
				<dd id='commetcontentNew'></dd>
				<dd id='commetcontent'></dd>
			</dl>
	</div>
<!--
//ç”±æ–¼è©•è«–è¼‰å…¥æ™‚ä½¿ç”¨ç•°æ­¥å‚³è¼¸ï¼Œå› æ­¤å¿…é ˆåœ¨æœ€å¾Œä¸€æ­¥åŠ è¼‰ï¼ˆDIGGå’Œè©•è«–æ¡†é ˆæ”¾åœ¨è©•è«–å…§å®¹å‰?é?¢ï¼‰
//å¦‚æžœä¸€å®šéœ€è¦?æ??å‰?çš„æŠŠmyajax.SendGetæ”¹ä¸ºmyajax.SendGet2ï¼Œä½†å?¯èƒ½æœƒå¼•èµ·é ?é?¢é˜»æ»¯
-->
<script language='javascript'>
function LoadCommets(page)
{
		var taget_obj = document.getElementById('commetcontent');
		var waithtml = "<div style='line-height:50px'><img src='/images/loadinglit.gif' />è©•è«–åŠ è¼‰ä¸­...</div>";
		var myajax = new DedeAjax(taget_obj, true, true, '', 'x', waithtml);
		myajax.SendGet2("/plus/feedback_ajax.php?dopost=getlist&aid=41670&page="+page);
		DedeXHTTP = null;
}
function PostComment()
{
		var f = document.feedback;
		var nface = '6';
		var nfeedbacktype = 'feedback';
		var nvalidate = '';
		var nnotuser = '';
		var nusername = '';
		var npwd = '';
		var taget_obj = $DE('commetcontentNew');
		var waithtml = "<div style='line-height:30px'><img src='/images/loadinglit.gif' />æ­£åœ¨ç™¼é€?ä¸­...</div>";
		if(f.msg.value=='')
		{
			alert("è©•è«–å…§å®¹ä¸?èƒ½ä¸ºç©ºï¼?");
			return;
		}
		if(f.validate)
		{
			if(f.validate.value=='') {
				alert("è«‹å¡«å¯«é©—è­‰ç¢¼ï¼?");
				return;
			}
			else {
				nvalidate = f.validate.value;
			}
		}
		if(f.msg.value.length > 500)
		{
			alert("ä½ çš„è©•è«–æ˜¯ä¸?æ˜¯å¤ªé•·äº†ï¼Ÿè«‹å¡«å¯«500å­—ä»¥å…§çš„è©•è«–ã€‚");
			return;
		}
		if(f.feedbacktype) {
			for(var i=0; i < f.feedbacktype.length; i++)
				if(f.feedbacktype[i].checked) nfeedbacktype = f.feedbacktype[i].value;
		}
		if(f.face) {
			for(var j=0; j < f.face.length; j++)
				if(f.face[j].checked) nface = f.face[j].value;
		}
		if(f.notuser.checked) nnotuser = '1';
		if(f.username) nusername = f.username.value;
		if(f.pwd) npwd = f.pwd.value;
		
		var myajax = new DedeAjax(taget_obj, false, true, '', '', waithtml);
		myajax.sendlang = 'utf-8';
		myajax.AddKeyN('dopost', 'send');
		myajax.AddKeyN('aid', '41670');
		myajax.AddKeyN('fid', f.fid.value);
		myajax.AddKeyN('face', nface);
		myajax.AddKeyN('feedbacktype', nfeedbacktype);
		myajax.AddKeyN('validate', nvalidate);
		myajax.AddKeyN('notuser', nnotuser);
		myajax.AddKeyN('username', nusername);
		myajax.AddKeyN('pwd', npwd);
		myajax.AddKeyN('msg', f.msg.value);
		myajax.SendPost2('/plus/feedback_ajax.php');
		f.msg.value = '';
		f.fid.value = 0;
		if(f.validate)
		{
			if($DE('validateimg')) $DE('validateimg').src = "/include/vdimgck.php?"+f.validate.value;
			f.validate.value = '';
		}
}
function quoteCommet(fid)
{
	document.feedback.fid.value = fid;
}
LoadCommets(1);
</script><!-- //è©•è«–å…§å®¹å?€çµ?æ?Ÿ -->
 </div>
<!-- //å·¦é‚Šå…§å®¹çµ?æ?Ÿ -->
<!-- //å?³é‚Šå…§å®¹é–‹å§‹ -->
<div class="pright"> 
 <div class="pright">
  <!-- //æŽ¨è??åŒº -->
  <div id="recommendArea">
   
  </div>
  <div style="display:none">
   <dl class="tbox">
    <dt><strong>æ¬„ç›®åˆ—è¡¨</strong></dt>
    <dd>
     <ul class="d6">
      
      <li><a href='/a/fuwuqiruanjian/Apache/'>Apache</a></li>
      
      <li><a href='/a/fuwuqiruanjian/Tomcat/'>Tomcat</a></li>
      <li><a href='/a/fuwuqiruanjian/Jboss/' class='thisclass'>Jboss</a></li>
      <li><a href='/a/fuwuqiruanjian/Weblogic/'>Weblogic</a></li>
      
      <li><a href='/a/fuwuqiruanjian/Websphere/'>Websphere</a></li>
      
      <li><a href='/a/fuwuqiruanjian/jetty/'>Jetty</a></li>
      
     </ul>
    </dd>
   </dl>
  </div>
  <div id="contentRtPicAD" style="margin:10px auto"></div>
  <div class="commend mt1">
   <dl class="tbox light">
    <dt class='light'><strong>æŽ¨è–¦å…§å®¹</strong></dt>
    <dd class='light'>
     <ul class="d4">
      <li><a href="/a/fuwuqiruanjian/Jboss/20110617/89186.html">ç°¡å–®çš„JBOSSä¾‹å­?</a>
       <p>ç°¡å–®çš„jbossä¾‹å­? 
 
 ç°¡å–®çš„ä¾‹å­? 1 å‰µå»ºä¸€å€‹æŽ¥å?£IHello &nbsp; public...</p>
      </li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110613/88545.html">tomcat6è½‰jboss5ç™¼å¸ƒsshå·¥ç¨‹</a>
       <p>å?ªéœ€è¦?åˆªé™¤
xml-apis.jarâ€?,servlet-api.jar
å?³å?¯
?
Fromï¼šhttp://tankywang....</p>
      </li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86669.html">Jboss4é›†ç¾¤é…?ç½®ä¹‹ä¸€:å‰?è¨€èˆ‡é›†ç¾¤çŸ¥è­˜</a>
       <p>1.å‰?è¨€

2006å¹´,Jbosså…¬å?¸è¢«Redhatå…¬å?¸æ”¶è³¼äº†ã€‚é€™ç›´æŽ¥å°Žè‡´Jbossç”¢å“?çµ?...</p>
      </li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86664.html">Jbossç’°å¢ƒæ?­å»ºæŒ‡å?—</a>
       <p>ä¸€ é…?ç½®è®Šé‡?

é¦–å…ˆï¼Œè¦?å®‰è£?JDKï¼Œé…?ç½®JAVA_HOMEç’°å¢ƒè®Šé‡?

å…¶æ¬¡ï¼Œå°‡...</p>
      </li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86659.html">ejb3:Unable to build EntityManagerFactory</a>
       <p>é–‹ç™¼ç’°å¢ƒä¸ºï¼š
&nbsp;&nbsp;&nbsp; jboss-5.1.0.GA
&nbsp;&nbsp;&nbsp; Microsoft...</p>
      </li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86654.html">Jboss+Myeclipseåˆ?å­¸è€…å¸¸è¦‹å•?é¡Œ</a>
       <p>1.è¦?åœ¨Eclipseä¸­JREé¡žåº«ä¸­åŠ å…¥%JBOSS_HOME%/client/jbossall-client.jar å?¦å‰‡æœƒ...</p>
      </li>

     </ul>
    </dd>
   </dl>
  </div>
  <!-- /commend -->
  <div class="hot mt1">
   <dl class="tbox light">
    <dt class='light'><strong>ç†±é»žå…§å®¹</strong></dt>
    <dd class='light'>
     <ul class="c1 ico2">
      <li><a href="/a/fuwuqiruanjian/Jboss/20101002/41668.html">ä½¿ç”¨Netty æ§‹é€ ä¸€å€‹ç•°æ­¥çš„</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20100926/38216.html">jbosséƒ¨ç½²webæ‡‰ç”¨</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20100926/38192.html">Jbossä¸‹å¤šwaråŒ…sessionå…±äº«å•?</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86661.html">[ç¿»è­¯]JBoss AS7 ç”¨æˆ¶æŒ‡å?—</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20100926/38197.html">jBPM(å››): éƒ¨ç½²jBPMæ‰€ç”¨è¡¨åˆ°</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86672.html">jbosså°‡ç«¯å?£è™Ÿä¿®æ”¹ä¸º8088é‚„</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20101002/41670.html">Nettyä½¿ç”¨åˆ?æ­¥</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20110524/86643.html">JBPM5 æ?’ä»¶å®‰è£?</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20101002/41657.html">Jbossä¸­EJBä½¿ç”¨æ™‚ï¼Œå?Œæ™‚èª¿ç”¨</a></li>
<li><a href="/a/fuwuqiruanjian/Jboss/20100821/14093.html">GateIn 3.0.0 Beta 5 ç™¼å¸ƒï¼Œé–‹æº?</a></li>

     </ul>
    </dd>
   </dl>
  </div>
		<div class="commend mt1" id="rightDownArea">
		</div>
  <div id="contentRtPicAD2" style="margin:10px auto"></div>
 </div>
 <!-- /pright -->
</div>
<div id="innerfooterAD2" style="margin:10px auto; width:726px"></div>
<div id="outad_foot"></div>
<div id="hezuohuoban"></div>
<!-- //åº•éƒ¨æ¨¡æ?¿ -->
<div class="footer w960 center mt1 clear">
    <div class="footer_left"></div>
    <div class="footer_body">
	<p class="powered">    
		<div class="copyright">Copyright Â© 2010-2012 <A href=http://www.stackdoc.com>Www.StackDoc.Com</a>. StackDoc ç‰ˆæ¬Šæ‰€æœ‰ Â Â </div></p>
<!-- /powered -->
   </div>
   <div class="footer_right"></div>
</div>
<script type="text/javascript" src="/my/common.js"></script>
<div style="display:none">
    <script src="http://s9.cnzz.com/stat.php?id=3293225&web_id=3293225" language="JavaScript"></script>
</div>

<!-- /footer -->
</body>
</html>
