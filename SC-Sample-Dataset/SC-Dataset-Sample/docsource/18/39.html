<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"><![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
    <head>
        
        <meta charset="utf-8">
        <!--SourceForge.net: Find and Build Open Source Software-->
        <!--Copyright (c) 1999-2013 SourceForge, Inc. All rights reserved.-->
        <!-- Create Server: sfs-web-8 -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="The PHP script engine for Java. --- Run PHP applications within any J2EE server or servlet engine and/or connect script engines like PHP with Java or .NET back ends efficiently." />
        <meta name="keywords" content="PHP/Java Bridge, Dynamic Content, Interpreters, Virtual Machines, Open Source, Development, Community, Source Code, Downloads, Software" />
                <title>SourceForge.net: PHP/Java Bridge: </title>        <link href='//fonts.googleapis.com/css?family=Ubuntu:regular,bold' rel='stylesheet' type='text/css'>
                <style type="text/css">
            @font-face {
                font-family: "Pictos";
                src: url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.eot');
                src: local("â˜º"), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.woff') format('woff'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.svg') format('svg');
            }
            #site-header .logo span {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/logo.png");
            }
            #site-footer .wrapper {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/sf-footer-logo.png") !important;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/style.php?secure=0&amp;1385768712" media="all" />
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/global.php?secure=0&amp;1385768712" media="all" />
        
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/neotheme/sfx.css?1385768712" media="all" />
                       <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/phoneix/table.php?secure=0&amp;1385768712" media="all" />
                        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/droppy.php?secure=0&amp;1385768712" media="all" />
                                        <!--   -->
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/modernizr.custom.90514.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery-1.3.2.min.js"></script>
        <script type="text/javascript">
            
                jQuery.noConflict();
            
        </script>

        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.cookie.js"></script>
                        <script type='text/javascript'>
          jQuery(function() {
            jQuery('#fad19 p, .project_summary .downloadbar, .vertical_widget, .horizontal_widget').wrap('<div class="sc"><div class="l1"><div class="l2"><div class="l3"><div class="l4"></div></div></div></div></div>');
          });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.droppy.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sylvester.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/pb.transformie.js"></script>
        <script type='text/javascript'>
            jQuery(function(){
                jQuery('.b-hornav > li:last-child').addClass('last');
                jQuery('.b-hornav > li').each(function() {
                    jQuery('li[class!=disabled]', this).eq(0).addClass('first');
                });
                jQuery('.b-hornav').droppy({speed:0, delay:0});
            });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/c_jquerytabs.js"></script>

        <script type="text/javascript">
        
            jQuery(function(){
                jQuery('.vertical_widget_content ul.tab, #container2 ul.tab, #container3 ul.tab, #container4 ul.tab').tabs({ selected: 0 });
            });
        
        </script>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/include/jquery/jquery.tabs.css?secure=0&amp;1385768712" media="all" />
            
                            <script type="text/javascript" src="http://static.sourceforge.net/include/js/preferences.js"></script>
            <script type="text/javascript">
                        var _visitor = "";
            var jsonly = document.createElement('link');
            jsonly.setAttribute('rel', 'stylesheet');
            jsonly.setAttribute('type', 'text/css');
            jsonly.setAttribute('href', 'http://static.sourceforge.net/css/phoneix/jsonly.css?secure=0&amp;1385768712');
            document.getElementsByTagName('head')[0].appendChild(jsonly);
                    </script>
                                                                    <!-- DoubleClick Random Number -->
    <script type="text/javascript">var dfp_ord=Math.random()*10000000000000000; var dfp_tile = 1; var dfp_ptile = 1;</script>
    <!-- End DoubleClick Random Number -->
    <!-- After META tags -->
                                    
        <script type="text/javascript" src="http://static.sourceforge.net/sfx.js"></script>
        
            <script type="text/javascript">
                        var _gaq = _gaq || [];
                        _gaq.push(['t1._setAccount', 'UA-32013-6']);
                        _gaq.push(['t1._trackPageview']);
                        _gaq.push(['t2._setAccount', 'UA-36130941-1']);
                        _gaq.push(['t2._trackPageview']);
                        (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.notify.js"></script>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/header.js"></script>
    </head>

    <body id="c2" class="short-head">
    
    <!--[if IE 7]><div id="ie7only"><![endif]-->
    <!--[if IE 6]><div id="ie6only"><![endif]-->
    <!--[if IE]><div id="ieonly"><![endif]-->
        
        <div class="mail_archive">
                        <header id="site-header">
                <div class="wrapper">
                    <a href="/" class="logo">
                        <span>SourceForge</span>
                    </a>
                    <form method="get" action="/directory/">
                        <input type="text" id="words" name="q" placeholder="Search">
                    </form>
                    <nav id="nav-site">
                        <a href="/directory/" title="Browse our software.">Browse</a>
                        <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
                        <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
                        <a href="/support" title="Contact us for help and feedback.">Help</a>
                        <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
                    </nav>
                    <nav id="nav-account">
                                                  <div class="logged_out">
                            <a href="https://sourceforge.net/account/login.php">Log In</a>
                            <span>or</span>
                            <a href="https://sourceforge.net/user/registration">Join</a>
                          </div>
                                            </nav>
                </div>
            </header>
            <header id="site-sec-header">
                <div class="wrapper">
                    <nav id="nav-hubs">
                        <h4>Solution Centers</h4>
                        <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
                        <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
                        <a href="http://html5center.sourceforge.net/">HTML5</a>
                        <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
                    </nav>
                    <nav id="nav-collateral">
                      <a href="http://library.slashdotmedia.com/?source=sfnet_header">Resources</a>  
                                              <a href="https://sourceforge.net/user/registration/">Newsletters</a>
                                            </nav>
                </div>
            </header>
                            <!-- DoubleClick Ad Tag -->
<script type="text/javascript">
//<![CDATA[
    document.write('<script src="http://ad.doubleclick.net/adj/ostg.sourceforge/sf_pg_mailarchive_leader;pg=/mailarchive/message.php;psrch=0;logged_in=0;tile='+dfp_tile+';sz=728x90;ord='+dfp_ord+'?" type="text/javascript"><\/script>');
    dfp_tile++;
//]]>
</script>
<!-- End DoubleClick Ad Tag -->
                                                <div id="page-body">
            <div id="bd" class="inner-bd">
                <div id="doc4" class="yui-t6">
                                                            <div id="breadcrumbs">
                                                    <a href="/">Home</a>
 / <a href="/directory/" >Browse</a>
 / <a href="/projects/php-java-bridge/" >PHP/Java Bridge</a>
 / <a href="/mail/?group_id=117793" >Mail</a>
 / <a href="/mailarchive/message.php?msg_id=29528999"  class="selected">Archive</a>
                                            </div>
                    <!-- begin content -->
            <a name="projectnav"></a>
        <div id="project_nav_container">
            <div class="b-proj__side">
                                
                
                
                <span class="award-bar"></span>
            </div>
            <h1>
                <a href="/projects/php-java-bridge/">PHP/Java Bridge</a>
                            </h1>
                    <div class="firstwave">
                <ul class="b-hornav">
                    <li id="menu_consume_summary"><a href="/projects/php-java-bridge/"><span><span>Summary</span></span></a></li>
<li id="menu_consume_files"><a href="/projects/php-java-bridge/files/"><span><span>Files</span></span></a></li>
<li id="menu_consume_reviews"><a href="/projects/php-java-bridge/reviews/"><span><span>Reviews</span></span></a></li>
<li id="menu_project_support"><a href="/projects/php-java-bridge/support"><span><span>Support</span></span></a></li>
<li id="menu_project_develop"><a href="/projects/php-java-bridge/develop"><span><span>Develop</span></span></a>
<ul>
<li id="menu_project_website"><a href="http://php-java-bridge.sourceforge.net">Web Site</a></li>
<li id="menu_project_screenshots" class="disabled" style="display: none;"><a href="/project/screenshots.php?group_id=117793">Screenshots</a></li>
<li id="menu_project_news" class="disabled" style="display: none;"><a href="/news/?group_id=117793">News</a></li>
<li id="menu_stats"><a href="/projects/php-java-bridge/stats/traffic">Project Statistics</a></li>
<li id="menu_download_stats_dist"><a href="/downloads/php-java-bridge/stats_timeline">Download Stats</a></li>
</ul>
</li>
<li id="menu_hostedapps" class="disabled tier" style="display: none;"><a href="/hostedapp/?group_id=117793"><span><span>Hosted&nbsp;Apps</span></span></a></li>
<li id="menu_tracker"><a href="/tracker/?group_id=117793"><span><span>Tracker</span></span></a>
<ul>
<li id="menu_tracker_679235"><a href="/tracker/?group_id=117793&amp;atid=679235">Patches</a></li>
<li id="menu_tracker_stats" class="tools"><a href="/projects/php-java-bridge/stats/tracker">Statistics for Trackers</a></li>
<li id="menu_tracker_reports" class="disabled" style="display: none;"><a href="/tracker/reporting/?group_id=117793">Reporting for Trackers</a></li>
<li id="menu_tracker_search"><a href="/search/?group_id=117793&amp;type_of_search=artifact">Search Trackers</a></li>
</ul>
</li>
<li id="menu_mail" class="selected tier"><a href="/mail/?group_id=117793"><span><span>Mailing&nbsp;Lists</span></span></a>
<ul>
<li id="menu_mlist_php-java-bridge-users"><a href="/mailarchive/forum.php?forum_name=php-java-bridge-users">php-java-bridge-users</a></li>
<li id="menu_mlist_php-java-bridge-debugger"><a href="/mailarchive/forum.php?forum_name=php-java-bridge-debugger">php-java-bridge-debugger</a></li>
<li id="menu_mail_search" class="tools"><a href="/search/?group_id=117793&amp;type_of_search=mlists">Search Mail Lists</a></li>
</ul>
<div class="diamond"></div></li>
<li id="menu_forums" class="disabled tier" style="display: none;"><a href="/projects/php-java-bridge/forums"><span><span>Forums</span></span></a>
<ul>
<li id="menu_forum_402771"><a href="/projects/php-java-bridge/forums/forum/402771">Open Discussion</a></li>
<li id="menu_forums_stats" class="tools"><a href="/projects/php-java-bridge/stats/forums">Statistics for Forums</a></li>
<li id="menu_forums_search"><a href="/search/?group_id=117793&amp;type_of_search=forums">Search Forums</a></li>
</ul>
</li>
<li id="menu_code"><a href="/scm/?type=cvs&amp;group_id=117793"><span><span>Code</span></span></a>
<ul>
<li id="menu_git_about" class="disabled" style="display: none;"><a href="/scm/?type=git&amp;group_id=117793">Git</a></li>
<li id="menu_git_browse" class="disabled" style="display: none;"><a href="http://php-java-bridge.git.sourceforge.net/">Git Browse</a></li>
<li id="menu_git_stats" class="disabled" style="display: none;"><a href="/projects/php-java-bridge/stats/scm?repo=GitRepository">Git Statistics</a></li>
<li id="menu_hg_about" class="disabled" style="display: none;"><a href="/scm/?type=hg&amp;group_id=117793">Mercurial</a></li>
<li id="menu_hg_browse" class="disabled" style="display: none;"><a href="http://php-java-bridge.hg.sourceforge.net/hgweb/php-java-bridge/">Mercurial Browse</a></li>
<li id="menu_hg_stats" class="disabled" style="display: none;"><a href="/projects/php-java-bridge/stats/scm?repo=HgRepository">Mercurial Statistics</a></li>
<li id="menu_bzr_about" class="disabled" style="display: none;"><a href="/scm/?type=bzr&amp;group_id=117793">Bazaar</a></li>
<li id="menu_bzr_browse" class="disabled" style="display: none;"><a href="http://php-java-bridge.bzr.sourceforge.net/bzr/php-java-bridge/">Bazaar Browse</a></li>
<li id="menu_bzr_stats" class="disabled" style="display: none;"><a href="/projects/php-java-bridge/stats/scm?repo=BazaarBranch">Bazaar Statistics</a></li>
<li id="menu_cvs_about"><a href="/scm/?type=cvs&amp;group_id=117793">CVS</a></li>
<li id="menu_cvs_browse"><a href="http://php-java-bridge.cvs.sourceforge.net/php-java-bridge/">CVS Browse</a></li>
<li id="menu_cvs_stats"><a href="/projects/php-java-bridge/stats/scm?repo=CVSRepository">CVS Statistics</a></li>
<li id="menu_svn_about" class="disabled" style="display: none;"><a href="/scm/?type=svn&amp;group_id=117793">SVN</a></li>
<li id="menu_svn_browse" class="disabled" style="display: none;"><a href="http://php-java-bridge.svn.sourceforge.net/viewvc/php-java-bridge/">SVN Browse</a></li>
<li id="menu_svn_stats" class="disabled" style="display: none;"><a href="/projects/php-java-bridge/stats/scm?repo=SVNRepository">SVN Statistics</a></li>
</ul>
</li>
<li id="menu_newadmin" class="disabled tier" style="display: none;"><a href="/project/admin/?group_id=117793"><span><span>Project&nbsp;Admin</span></span></a>
<ul>
<li id="menu_editgroupinfo" class="disabled" style="display: none;"><a href="/project/admin/public_info.php?group_id=117793">Settings</a></li>
<li id="menu_features" class="disabled" style="display: none;"><a href="/project/admin/features.php?group_id=117793">Features</a></li>
<li id="menu_userperms" class="disabled" style="display: none;"><a href="/project/admin/project_membership.php?group_id=117793">Members</a></li>
<li id="menu_stats_admin" class="disabled" style="display: none;"><a href="/project/admin/stats.php?group_id=117793">Analytics</a></li>
</ul>
</li>

                </ul>
            </div>
                </div>
        <div style="clear: both;"></div>
            




<p>
<h3>Email Archive: <a href="forum.php?forum_name=php-java-bridge-users"><!-- google_ad_section_start -->php-java-bridge-users<!-- google_ad_section_end --></A> (read-only)
</h3>
</p>

    <table width="100%">
            <tr>
	<td bgcolor="#dddddd" nowrap>
	  <div class='forum'>
	    		<div>
		<b>		<!-- google_ad_section_start -->[Php-java-bridge-users] Glassfish JNDI Issue<!-- google_ad_section_end --></b></div>
			  <small>From: &lt;php-java-bridge-users@li...&gt; - 2012-07-11 22:53</small>
	  </div>	</td>
</tr>

            <tr>
            <td class="email_body">
            <!-- google_ad_section_start --><pre>Hello,

I am trying to use the bridge to connect to an EJB module, which exposes a
standard bean interface, but i have difficulties using the context lookup in
the php to get hold on my implemented service.

I have an remote interface IPHPBackend, which is implemented by one service
class (stateless bean)

I can clearly see the enterprise bean in netbeans, and in the glassfish
Modules and components list after deployement, as PHPBackend.

When deploying glassfish tells me:

 

NFO: EJB5181:Portable JNDI names for EJB PHPBackend:
[java:global/FspBackendEE-ejb/PHPBackend,
java:global/FspBackendEE-ejb/PHPBackend!fsp.service.IPHPBackend]

INFO: EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB
PHPBackend: [fsp.service.IPHPBackend#fsp.service.IPHPBackend,
fsp.service.IPHPBackend]

 

I have also deployed the java bridge war, so now i have two applications
deployed, my ejb module + the bridge.

 

Now, i have written a short test application, as you can see i tried a lot
of options, but i allways get something like:

 

Array ( [javax.naming.Context.PROVIDER_URL] =&gt; <a href="iiop://localhost:3700" target="_new">iiop://localhost:3700</a>
[javax.naming.Context.INITIAL_CONTEXT_FACTORY] =&gt;
com.sun.enterprise.naming.SerialInitContextFactory ) Exception:
[[o:NamingException]:"javax.naming.NamingException: Lookup failed for
'java:global/FspBackendEE-ejb/fsp.service.PHPBackend' in
SerialContext[myEnv={javax.naming.Context.INITIAL_CONTEXT_FACTORY=com.sun.en
terprise.naming.SerialInitContextFactory,
java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContext
Factory, javax.naming.Context.PROVIDER_URL=<a href="iiop://localhost:3700" target="_new">iiop://localhost:3700</a>,
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFa
ctoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root
exception is javax.naming.NameNotFoundException: fsp.service.PHPBackend not
found]" at: #-13
com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
#-12
com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
#-11 javax.naming.InitialContext.lookup(InitialContext.java:392) #-10
javax.naming.InitialContext.lookup(InitialContext.java:392) #-9
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) #-8
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39
) #-7
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl
.java:25) #-6 java.lang.reflect.Method.invoke(Method.java:597) #-5
php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1044) #-4
php.java.bridge.Request.handleRequest(Request.java:417) #-3
php.java.bridge.Request.handleRequests(Request.java:500) #-2
php.java.bridge.http.ContextRunner.run(ContextRunner.java:145) #-1
php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60) #0
<a href="http://localhost:8080/JavaBridge/java/Java.inc(232" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(232</a>):
java_ExceptionProxyFactory-&gt;getProxy(3, NULL, 'T', true) #1
<a href="http://localhost:8080/JavaBridge/java/Java.inc(360" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(360</a>):
java_Arg-&gt;getResult(true) #2
<a href="http://localhost:8080/JavaBridge/java/Java.inc(366" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(366</a>):
java_Client-&gt;getWrappedResult(true) #3
<a href="http://localhost:8080/JavaBridge/java/Java.inc(560" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(560</a>):
java_Client-&gt;getResult() #4
<a href="http://localhost:8080/JavaBridge/java/Java.inc(1752" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(1752</a>):
java_Client-&gt;invokeMethod(2, 'getCause', Array) #5
<a href="http://localhost:8080/JavaBridge/java/Java.inc(2062" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(2062</a>):
java_JavaProxy-&gt;__call('getCause', Array) #6
C:\work\projects\temp\test2.php(31): java_exception-&gt;__call('getCause',
Array) #7 C:\work\projects\temp\test2.php(31):
java_InternalException-&gt;getCause() #8 {main}] 
in file: <a href="http://localhost:8080/JavaBridge/java/Java.inc" target="_new">http://localhost:8080/JavaBridge/java/Java.inc</a>
line:195

 

My test code would be:

 

&lt;?php

define("JAVA_PREFER_VALUES", true);

$HOST="localhost";

require_once("<a href="http://localhost:8080/JavaBridge/java/Java.inc" target="_new">http://localhost:8080/JavaBridge/java/Java.inc</a>");

try {

$config = array("java.naming.factory.initial"=&gt;

                                "com.sun.jndi.cosnaming.CNCtxFactory",

                                "java.naming.provider.url"=&gt;

                                "<a href="iiop://$HOST:3700" target="_new">iiop://$HOST:3700</a>");

                                

 $providerUrl = "<a href="iiop://$HOST:3700" target="_new">iiop://$HOST:3700</a>";

$namingFactory = "com.sun.enterprise.naming.SerialInitContextFactory";

   $envt = array( 

     "javax.naming.Context.PROVIDER_URL" =&gt; $providerUrl, 

     "javax.naming.Context.INITIAL_CONTEXT_FACTORY" =&gt; $namingFactory,); 

 

$initial = new javax_naming_InitialContext($envt); 

$phpBackend =
$initial-&gt;lookup('java:global/FspBackendEE-ejb/fsp.service.PHPBackend');

//$phpBackend = new java("fsp.service.LPHPBackend");

echo $phpBackend-&gt;getAvailableFunds(42);

assert (is_null(java_last_exception_get()));

} catch(JavaException $ex)

{

$cause = $ex-&gt;getCause(); 

echo "Exception: $cause &lt;br&gt;\nin file:
{$ex-&gt;getFile()}&lt;br&gt;\nline:{$ex-&gt;getLine()}\n";

}

 

&gt;From JSP everything works, i can lookup my service easly.

Thanks for looking anyway, it's a long first post, but i looked everywere on
the net and i can't find a soluion.

 

Thanks!

Adrian

 

 

 




</pre><!-- google_ad_section_end -->
            </td>
        </tr>
    </table>
    <br />
    &nbsp;
    <p>
    <h3>Thread View</h3>
    </p>
    
<table width="100%" border="0" cellspacing="2" cellpadding="1" >
<thead>
<tr bgcolor="#ffffff">
<th align=middle><font color="#000000"><b>Thread<b></font></th>
<th align=middle><font color="#000000"><b>Author<b></font></th>
<th align=middle><font color="#000000"><b>Date<b></font></th>
</tr></thead>

    <tr bgcolor="#eaecef">
        	<td>
				<!-- google_ad_section_start -->[Php-java-bridge-users] Glassfish JNDI Issue<!-- google_ad_section_end -->
			</td>
	<td>
		&lt;php-java-bridge-users@li...&gt;
	</td>
	<td>
		
	</td>
    </tr>
            
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=29529047">Re: [Php-java-bridge-users] Glassfish JNDI Issue</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;php-java-bridge-users@li...&gt; -	2012-07-11 23:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Hello again :),
I finnaly solved the issue, what worked was a custom jndi name, like this:

@Stateless(name="PHPBackend")
@EJB(name="java:global/ImplementedPHPBackend",
beanInterface=IPHPBackend.class)
public class PHPBackend implements IPHPBackend {

But i would really love if anyone has a clue on why it didn't worked on my
standard approach, as it is not very nice to be forced to define a name for
each class.

Cheers,
Adrian

-----Original Message-----
From: php-java-bridge-users@...
[mailto:php-java-bridge-users@...] 
Sent: Thursday, July 12, 2012 12:53 AM
To: php-java-bridge-users@...
Subject: [Php-java-bridge-users] Glassfish JNDI Issue

Hello,

I am trying to use the bridge to connect to an EJB module, which exposes a
standard bean interface, but i have difficulties using the context lookup in
the php to get hold on my implemented service.

I have an remote interface IPHPBackend, which is implemented by one service
class (stateless bean)

I can clearly see the enterprise bean in netbeans, and in the glassfish
Modules and components list after deployement, as PHPBackend.

When deploying glassfish tells me:

 

NFO: EJB5181:Portable JNDI names for EJB PHPBackend:
[java:global/FspBackendEE-ejb/PHPBackend,
java:global/FspBackendEE-ejb/PHPBackend!fsp.service.IPHPBackend]

INFO: EJB5182:Glassfish-specific (Non-portable) JNDI names for EJB
PHPBackend: [fsp.service.IPHPBackend#fsp.service.IPHPBackend,
fsp.service.IPHPBackend]

 

I have also deployed the java bridge war, so now i have two applications
deployed, my ejb module + the bridge.

 

Now, i have written a short test application, as you can see i tried a lot
of options, but i allways get something like:

 

Array ( [javax.naming.Context.PROVIDER_URL] =&gt; <a href="iiop://localhost:3700" target="_new">iiop://localhost:3700</a>
[javax.naming.Context.INITIAL_CONTEXT_FACTORY] =&gt;
com.sun.enterprise.naming.SerialInitContextFactory ) Exception:
[[o:NamingException]:"javax.naming.NamingException: Lookup failed for
'java:global/FspBackendEE-ejb/fsp.service.PHPBackend' in
SerialContext[myEnv={javax.naming.Context.INITIAL_CONTEXT_FACTORY=com.sun.en
terprise.naming.SerialInitContextFactory,
java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContext
Factory, javax.naming.Context.PROVIDER_URL=<a href="iiop://localhost:3700" target="_new">iiop://localhost:3700</a>,
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFa
ctoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root
exception is javax.naming.NameNotFoundException: fsp.service.PHPBackend not
found]" at: #-13
com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
#-12
com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
#-11 javax.naming.InitialContext.lookup(InitialContext.java:392) #-10
javax.naming.InitialContext.lookup(InitialContext.java:392) #-9
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) #-8
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39
) #-7
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl
.java:25) #-6 java.lang.reflect.Method.invoke(Method.java:597) #-5
php.java.bridge.JavaBridge.Invoke(JavaBridge.java:1044) #-4
php.java.bridge.Request.handleRequest(Request.java:417) #-3
php.java.bridge.Request.handleRequests(Request.java:500) #-2
php.java.bridge.http.ContextRunner.run(ContextRunner.java:145) #-1
php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60) #0
<a href="http://localhost:8080/JavaBridge/java/Java.inc(232" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(232</a>):
java_ExceptionProxyFactory-&gt;getProxy(3, NULL, 'T', true) #1
<a href="http://localhost:8080/JavaBridge/java/Java.inc(360" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(360</a>):
java_Arg-&gt;getResult(true) #2
<a href="http://localhost:8080/JavaBridge/java/Java.inc(366" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(366</a>):
java_Client-&gt;getWrappedResult(true) #3
<a href="http://localhost:8080/JavaBridge/java/Java.inc(560" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(560</a>):
java_Client-&gt;getResult() #4
<a href="http://localhost:8080/JavaBridge/java/Java.inc(1752" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(1752</a>):
java_Client-&gt;invokeMethod(2, 'getCause', Array) #5
<a href="http://localhost:8080/JavaBridge/java/Java.inc(2062" target="_new">http://localhost:8080/JavaBridge/java/Java.inc(2062</a>):
java_JavaProxy-&gt;__call('getCause', Array) #6
C:\work\projects\temp\test2.php(31): java_exception-&gt;__call('getCause',
Array) #7 C:\work\projects\temp\test2.php(31):
java_InternalException-&gt;getCause() #8 {main}] in file:
<a href="http://localhost:8080/JavaBridge/java/Java.inc" target="_new">http://localhost:8080/JavaBridge/java/Java.inc</a>
line:195

 

My test code would be:

 

&lt;?php

define("JAVA_PREFER_VALUES", true);

$HOST="localhost";

require_once("<a href="http://localhost:8080/JavaBridge/java/Java.inc" target="_new">http://localhost:8080/JavaBridge/java/Java.inc</a>");

try {

$config = array("java.naming.factory.initial"=&gt;

                                "com.sun.jndi.cosnaming.CNCtxFactory",

                                "java.naming.provider.url"=&gt;

                                "<a href="iiop://$HOST:3700" target="_new">iiop://$HOST:3700</a>");

                                

 $providerUrl = "<a href="iiop://$HOST:3700" target="_new">iiop://$HOST:3700</a>";

$namingFactory = "com.sun.enterprise.naming.SerialInitContextFactory";

   $envt = array( 

     "javax.naming.Context.PROVIDER_URL" =&gt; $providerUrl, 

     "javax.naming.Context.INITIAL_CONTEXT_FACTORY" =&gt; $namingFactory,); 

 

$initial = new javax_naming_InitialContext($envt); 

$phpBackend =
$initial-&gt;lookup('java:global/FspBackendEE-ejb/fsp.service.PHPBackend');

//$phpBackend = new java("fsp.service.LPHPBackend");

echo $phpBackend-&gt;getAvailableFunds(42);

assert (is_null(java_last_exception_get()));

} catch(JavaException $ex)

{

$cause = $ex-&gt;getCause(); 

echo "Exception: $cause &lt;br&gt;\nin file:
{$ex-&gt;getFile()}&lt;br&gt;\nline:{$ex-&gt;getLine()}\n";

}

 

&gt;From JSP everything works, i can lookup my service easly.

Thanks for looking anyway, it's a long first post, but i looked everywere on
the net and i can't find a soluion.

 

Thanks!

Adrian

 

 

 

----------------------------------------------------------------------------
--
Live Security Virtual Conference
Exclusive live event will cover all the ways today's security and threat
landscape has changed and how IT managers can respond. Discussions will
include endpoint security, mobile security and the latest in malware
threats. <a href="http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/" target="_new">http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/</a>
_______________________________________________
php-java-bridge-users mailing list
php-java-bridge-users@...
<a href="https://lists.sourceforge.net/lists/listinfo/php-java-bridge-users" target="_new">https://lists.sourceforge.net/lists/listinfo/php-java-bridge-users</a>

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=29549671">Re: [Php-java-bridge-users] Glassfish JNDI Issue</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;php-java-bridge-users@li...&gt; -	2012-07-16 20:04</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Can you create a simple JSP in the same app and call your external name
from there?  If that works, you've found a bug. If not, well, try the
internal name...

Code executed from the bridge runs in a different thread context. But this
should be an implementation detail.

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=29549692">Re: [Php-java-bridge-users] Glassfish JNDI Issue</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;php-java-bridge-users@li...&gt; -	2012-07-16 20:09</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Well, i allready did that and in the JSP page every JNDI works, no problems
there.
Only in the php side i could't get it to work without a custom JNDI.

-----Original Message-----
From: php-java-bridge-users@...
[mailto:php-java-bridge-users@...] 
Sent: Monday, July 16, 2012 10:05 PM
To: php-java-bridge-users@...
Subject: Re: [Php-java-bridge-users] Glassfish JNDI Issue

Can you create a simple JSP in the same app and call your external name from
there?  If that works, you've found a bug. If not, well, try the internal
name...

Code executed from the bridge runs in a different thread context. But this
should be an implementation detail.
----------------------------------------------------------------------------
--
Live Security Virtual Conference
Exclusive live event will cover all the ways today's security and threat
landscape has changed and how IT managers can respond. Discussions will
include endpoint security, mobile security and the latest in malware
threats. <a href="http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/" target="_new">http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/</a>
_______________________________________________
php-java-bridge-users mailing list
php-java-bridge-users@...
<a href="https://lists.sourceforge.net/lists/listinfo/php-java-bridge-users" target="_new">https://lists.sourceforge.net/lists/listinfo/php-java-bridge-users</a>

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    </table>


            </div>
        </div>
      </div>
    
    <footer id="site-footer">
        <div class="wrapper">
            <nav>
                <h5>SourceForge</h5>
                <a href="/about">About</a>
                <a href="/blog/category/sitestatus/">Site Status</a>
                <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
            </nav>
            <nav>
                <h5>Find and Develop Software</h5>
                <a href="/create/">Create a Project</a>
                <a href="/directory/">Software Directory</a>
                <a href="/top">Top Downloaded Projects</a>
            </nav>
            <nav>
                <h5>Community</h5>
                <a href="/blog/">Blog</a>
                <a href="http://twitter.com/sourceforge">@sourceforge</a>
                <a href="/jobs?source=footer">Job Board</a>
                <a href="http://library.slashdotmedia.com/?source=sfnet_footer">Resources</a>
            </nav>
            <nav>
                <h5>Help</h5>
                <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
                <a href="/support">Support Request</a>
                <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
            </nav>
        </div>
    </footer>
    <footer id="site-copyright-footer">
        <div class="wrapper">
            <div id="copyright">
                Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
                SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
            </div>
            <nav>
                <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
                <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
                <a href="http://slashdotmedia.com/opt-out-choices">Cookies/Opt Out</a>
                <a href="http://slashdotmedia.com">Advertise</a>
                <a href="http://sourceforge.jp/">SourceForge.JP</a>
            </nav>
        </div>
    </footer>
        <!--[if lt IE 7 ]>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
    <![endif]-->
<!--[if IE]></div><![endif]-->
<!--[if IE 6]></div><![endif]-->
<!--[if IE 7]></div><![endif]-->

    
    <!-- Begin comScore Tag -->
    <script>
        document.write(unescape("%3Cscript src='" + (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js' %3E%3C/script%3E"));
    </script>
    <script>
        COMSCORE.beacon({
            c1:2,
            c2:6035546,
            c3:"",
            c4:"",
            c5:"",
            c6:"",
            c15:""
        });
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035546&amp;c3=&amp;c4=&amp;c5=&amp;c6=&amp;c15=&amp;cj=1" />
    </noscript>
    <!-- End comScore Tag -->
    




        </div>
    </body>
</html>
