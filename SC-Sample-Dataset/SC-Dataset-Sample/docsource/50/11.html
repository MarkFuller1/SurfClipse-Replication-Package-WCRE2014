<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- $Revision: 1.8 $
(c) 1992-2004 Cisco Systems, Inc. All rights reserved. Terms and Conditions: http://cisco.com/en/US/swassets/sw293/sitewide_important_notices.html
-->
<head>
<title>

Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F - Configuring Security Contexts&nbsp; [Cisco Adaptive Security Device Manager] - Cisco Systems

</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
    <meta name="concept" content="Cisco Adaptive Security Device Manager"/>
    <meta name="accessLevel" content="Guest"/>
    <meta name="country" content="US"/>
    <meta name="primaryObjectId" content="external_docbase:0900e4b18107fb3a"/>
    <meta name="docType" content="TSD Products Configuration Guide Chapter"/>
    <meta name="language" content="en"/>
    <meta name="contentType" content="cisco.com#US#postSales"/>
    <meta name="iaPath" content="cisco.com#Products#Cisco Products#Security#Firewalls#Firewall Management#Cisco Adaptive Security Device Manager"/>
    <meta name="Acronym" content="ASDM,CISCO PACKET TRACER,ASDM LAUNCHER,PACKET TRACER 5.3,ASDM 6.2,PACKET TRACER,ASDM 5.0"/>
    <meta name="ioContentSource" content="CCIM-TD"/>
    <meta name="locale" content="US"/>
    <meta name="date" content="Thu May 21 11:40:35 PDT 2009"/>
    <meta name="docRequest" content="/en/US/docs/security/asdm/6_2f/user/guide/contexts.html"/>
    <link rel="canonical" href="http://www.cisco.com/en/US/docs/security/asdm/6_2f/user/guide/contexts.html"/>
    <meta name="title" content="Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F - Configuring Security Contexts&amp;nbsp; [Cisco Adaptive Security Device Manager]"/>
    <meta property="og:site_name" content="Cisco" />
    <meta property="og:image" content="http://www.cisco.com/web/fw/i/logo-open-graph.gif" />
    <meta property="og:title" content="Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F - Configuring Security Contexts&amp;nbsp; [Cisco Adaptive Security Device Manager]" />
    <meta property="fb:app_id" content="156494687694418" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.cisco.com/en/US/docs/security/asdm/6_2f/user/guide/contexts.html" />
    
<script type="text/javascript" src="/web/fw/j/global.js"></script>		
<link rel="stylesheet" type="text/css" href="/web/fw/c/global.css" />
<link rel="stylesheet" type="text/css" media="print" href="/web/fw/c/global_print.css" />


<link rel="stylesheet" type="text/css" href="/web/fw/c/book.css" >
<link rel="search" type="application/opensearchdescription+xml" title="Search Cisco.com" href="http://www.cisco.com/web/tsweb/searchplugins/cdc_search.xml" />
</head>
<body>

<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="30%" rowspan="2" valign="bottom"><div class="logo" align="center"><a href="/en/US/hmpgs/index.html" name="&amp;lpos=ft_" rel="exit"><img border="0" alt="Cisco Systems, Inc." height="73" width="110" src="/web/fw/i/logo.gif"></a></div>
      <div class="logo-bottom-border"><img src="/web/fw/i/logo_bottom_border_bg.gif" alt=""></div>
    </td>
    <td width="70%" align="left" valign="top"><div class="book-heading">
        <div class="title">Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F</div>

    </div></td>
  </tr>
  <tr>
    <td width="70%" valign="bottom"><div class="book-heading">
			<div class="chapter-title">Configuring Security Contexts</div>

    </div>
    <div class="masthead"><img src="/web/fw/i/book_content_masthead.gif" alt=""></div></td>
  </tr>
  <tr align="left" valign="top">
    <td width="30%"><!-- googleoff:index --><link href="/web/fw/c/collapsing_list.css" type="text/css" rel="stylesheet">
<script src="/web/fw/j/collapsing_list.js" type="text/javascript"></script>
<div class="collapsing-list">
<ul>
<li id="external_docbase:0900e4b18107fb67" class="open">
<a class="widget" href="javascript:" onclick="toggle(this);return false;" id="bookId"></a><a class="menuLink" title="Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F" href="/en/US/docs/security/asdm/6_2f/user/guide/usrguide.html" >Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F</a><ul>
<li id="external_docbase:0900e4b18107fad1">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="About This Guide" href="/en/US/docs/security/asdm/6_2f/user/guide/about.html" >About This Guide</a></li>
<li id="external_docbase:0900e4b18107fb64" class="closed">
<a href="javascript:" class="widget" onclick="toggle(this);return false;"></a><a class="menuLink" title="Introduction to the Firewall Services Module" href="/en/US/docs/security/asdm/6_2f/user/guide/intro_platform.html" >Getting Started</a><ul>
<li id="external_docbase:0900e4b18107fb4e">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Introduction to the Firewall Services Module" href="/en/US/docs/security/asdm/6_2f/user/guide/intro_platform.html" >Introduction to the Firewall Services Module</a></li>
<li id="external_docbase:0900e4b18107fb4d">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Welcome to ASDM" href="/en/US/docs/security/asdm/6_2f/user/guide/intro.html" >Welcome to ASDM</a></li>
<li id="external_docbase:0900e4b18107fb6c">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Defining Preferences and Using Configuration, Diagnostic, and File Management Tools" href="/en/US/docs/security/asdm/6_2f/user/guide/tools.html" >Defining Preferences and Using Configuration, Diagnostic, and File Management Tools</a></li>
<li id="external_docbase:0900e4b18107f76d">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring the Switch for Use with the FWSM" href="/en/US/docs/security/asdm/6_2f/user/guide/switch.html" >Configuring the Switch for Use with the FWSM</a></li>
<li id="external_docbase:0900e4b18107fb40">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Before You Start" href="/en/US/docs/security/asdm/6_2f/user/guide/getstart.html" >Before You Start</a></li>
</ul>
</li>
<li id="external_docbase:0900e4b18107fb65" class="open">
<a href="javascript:" class="widget" onclick="toggle(this);return false;"></a><a class="menuLink" title="Using the Startup Wizard" href="/en/US/docs/security/asdm/6_2f/user/guide/startwiz.html" >Device Setup and Management</a><ul>
<li id="external_docbase:0900e4b18107f76b">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Using the Startup Wizard" href="/en/US/docs/security/asdm/6_2f/user/guide/startwiz.html" >Using the Startup Wizard</a></li>
<li id="external_docbase:0900e4b18107fb3b">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Device Settings and Management" href="/en/US/docs/security/asdm/6_2f/user/guide/devadmin.html" >Configuring Device Settings and Management</a></li>
<li id="external_docbase:0900e4b18107fb4b">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Interfaces" href="/en/US/docs/security/asdm/6_2f/user/guide/ifcs.html" >Configuring Interfaces</a></li>
<li id="external_docbase:0900e4b18107fb3a">
<div class="nullWidget"><wbr /></div><a class="menuLinkOn" title="Configuring Security Contexts" href="/en/US/docs/security/asdm/6_2f/user/guide/contexts.html" >Configuring Security Contexts</a></li>
<li id="external_docbase:0900e4b18107f76a">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Dynamic And Static Routing" href="/en/US/docs/security/asdm/6_2f/user/guide/routing.html" >Configuring Dynamic And Static Routing</a></li>
<li id="external_docbase:0900e4b18107fb4f">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Multicast Routing" href="/en/US/docs/security/asdm/6_2f/user/guide/mcast.html" >Configuring Multicast Routing</a></li>
<li id="external_docbase:0900e4b18107fb3c">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring DHCP and DNS" href="/en/US/docs/security/asdm/6_2f/user/guide/dhcp_dns.html" >Configuring DHCP and DNS</a></li>
<li id="external_docbase:0900e4b18107fb3d">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Failover" href="/en/US/docs/security/asdm/6_2f/user/guide/failover.html" >Configuring Failover</a></li>
<li id="external_docbase:0900e4b18107fad0">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring AAA Servers and User Accounts" href="/en/US/docs/security/asdm/6_2f/user/guide/aaasetup.html" >Configuring AAA Servers and User Accounts</a></li>
<li id="external_docbase:0900e4b18107fb6a">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Management Access" href="/en/US/docs/security/asdm/6_2f/user/guide/devaccss.html" >Configuring Management Access</a></li>
<li id="external_docbase:0900e4b18107fb6b">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Logging" href="/en/US/docs/security/asdm/6_2f/user/guide/cfglog.html" >Configuring Logging</a></li>
<li id="external_docbase:0900e4b18107fb39">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Certificates" href="/en/US/docs/security/asdm/6_2f/user/guide/certs.html" >Configuring Certificates</a></li>
</ul>
</li>
<li id="external_docbase:0900e4b18107fb66" class="closed">
<a href="javascript:" class="widget" onclick="toggle(this);return false;"></a><a class="menuLink" title="Firewall Mode Overview" href="/en/US/docs/security/asdm/6_2f/user/guide/fwmode.html" >Configuring the Firewall</a><ul>
<li id="external_docbase:0900e4b18107fb3f">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Firewall Mode Overview" href="/en/US/docs/security/asdm/6_2f/user/guide/fwmode.html" >Firewall Mode Overview</a></li>
<li id="external_docbase:0900e4b18107f761">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Adding Global Objects" href="/en/US/docs/security/asdm/6_2f/user/guide/objects.html" >Adding Global Objects</a></li>
<li id="external_docbase:0900e4b18107fad2">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Access Rules and EtherType Rules" href="/en/US/docs/security/asdm/6_2f/user/guide/aclrules.html" >Configuring Access Rules and EtherType Rules</a></li>
<li id="external_docbase:0900e4b18107f75f">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring NAT" href="/en/US/docs/security/asdm/6_2f/user/guide/nat.html" >Configuring NAT</a></li>
<li id="external_docbase:0900e4b18107f76c">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Service Policy Rules" href="/en/US/docs/security/asdm/6_2f/user/guide/svcrules.html" >Configuring Service Policy Rules</a></li>
<li id="external_docbase:0900e4b18107fb4c">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Application Layer Protocol Inspection" href="/en/US/docs/security/asdm/6_2f/user/guide/inspctrl.html" >Configuring Application Layer Protocol Inspection</a></li>
<li id="external_docbase:0900e4b18107facf">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring AAA Rules" href="/en/US/docs/security/asdm/6_2f/user/guide/aaarules.html" >Configuring AAA Rules</a></li>
<li id="external_docbase:0900e4b18107fb3e">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Filter Rules" href="/en/US/docs/security/asdm/6_2f/user/guide/fltrrule.html" >Configuring Filter Rules</a></li>
<li id="external_docbase:0900e4b18107f769">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring Advanced Connection Features" href="/en/US/docs/security/asdm/6_2f/user/guide/protect.html" >Configuring Advanced Connection Features</a></li>
<li id="external_docbase:0900e4b18107fb38">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Configuring ARP Inspection and Bridging Parameters" href="/en/US/docs/security/asdm/6_2f/user/guide/bridge.html" >Configuring ARP Inspection and Bridging Parameters</a></li>
</ul>
</li>
<li id="external_docbase:0900e4b18107fb63" class="closed">
<a href="javascript:" class="widget" onclick="toggle(this);return false;"></a><a class="menuLink" title="Monitoring Logging" href="/en/US/docs/security/asdm/6_2f/user/guide/mon_log.html" >Monitoring the Firewall Services Module</a><ul>
<li id="external_docbase:0900e4b18107fb53">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Monitoring Logging" href="/en/US/docs/security/asdm/6_2f/user/guide/mon_log.html" >Monitoring Logging</a></li>
<li id="external_docbase:0900e4b18107fb50">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Monitoring Failover" href="/en/US/docs/security/asdm/6_2f/user/guide/mon_fail.html" >Monitoring Failover</a></li>
<li id="external_docbase:0900e4b18107fb51">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Monitoring Interfaces" href="/en/US/docs/security/asdm/6_2f/user/guide/mon_ifc.html" >Monitoring Interfaces</a></li>
<li id="external_docbase:0900e4b18107f759">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Monitoring Properties" href="/en/US/docs/security/asdm/6_2f/user/guide/mon_prop.html" >Monitoring Properties</a></li>
</ul>
</li>
<li id="external_docbase:0900e4b18107fb68">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Specifications" href="/en/US/docs/security/asdm/6_2f/user/guide/specs.html" >Specifications</a></li>
<li id="external_docbase:0900e4b18107fad4">
<div class="nullWidget"><wbr /></div><a class="menuLink" title="Index" href="/en/US/docs/security/asdm/6_2f/user/guide/ASDMHelpIX.html" >Index</a></li>
</ul>
</li>
</ul>
</div>
<script>
openNodesFromList();
</script>

	
	
    </td>
    <td width="70%"><div class="book"><!-- googleon:index -->
        
		
		<div class="sidebar">
			<!-- $Revision: 1.2 $
(c) 1992-2004 Cisco Systems, Inc. All rights reserved. Terms and Conditions: http://cisco.com/en/US/swassets/sw293/sitewide_important_notices.html
-->
<!--
Description: package for pdf module.
-->
<div class="book-pdf-module">
  <div class="pdf-module-title">Download this chapter</div>
<div class="pdf-module-link">
<img alt="Configuring Security Contexts" width="20" height="16" border="0" src="http://www.cisco.com/swa/i/icon_pdf.gif"><a href="/en/US/docs/security/asdm/6_2f/user/guide/contexts.pdf" class="contentlink" target="_blank">Configuring Security Contexts</a>
</div>

<div class="pdf-module-title">Download the complete book</div>
<div class="pdf-module-link">
<img alt="Full-Book PDF: Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F" width="20" height="16" border="0" src="http://www.cisco.com/swa/i/icon_pdf.gif"><a href="/en/US/docs/security/asdm/6_2f/user/guide/asdmug.pdf" class="contentlink" target="_blank">Full-Book PDF: Catalyst 6500 Series Switch and Cisco 7600 Series Router Firewall Services Module Configuration Guide using ASDM, 6.2F</a> (<span class="mime_type">PDF&nbsp;-&nbsp;</span><span class="file_size">4&nbsp;MB</span>)</div>

</div>

			
<migrate>
<a href="javascript: void(0)" onclick="window.open('https://secure.opinionlab.com/ccc01/o.asp?id=HPXysfff&referer='+document.URL+'&resize=false', 'feedback', 'width=550, height=460, scrollbars=1, menubar=1, resizable=1'); return false;"><img id="feedback_img" border="0" style="cursor: pointer;" title="Feedback" src="http://www.cisco.com/web/fw/i/sm_0000EE_oo1.gif">&nbsp;Feedback</a>
</migrate>

		</div>
		
		<?xml version="1.0" encoding="UTF-8"?>
<div class="contentMargins"><span class="content">
  <!-- WFP 1.1.2.36 Released 11/20/2006 -->
  <!-- Added on date : 10/09/2003 Do not delete blockquotes  -->
<MIGRATE>
<LINK REL="stylesheet" HREF="/swa/c/ccimr.css" TYPE="text/css" />
</MIGRATE>


<blockquote>
    <!-- Start of Mini TOC : Added on 09/23/2003 16:38:30 PST -->
    <h2 class="p_H_Head1">Table Of Contents</h2>
    
<p class="MiniTOC1"><a href="#wp1041645">Configuring Security Contexts</a></p>
<p class="MiniTOC2"><a href="#wp1060948">Security Context Overview</a></p>
<p class="MiniTOC3"><a href="#wp1060975">Common Uses for Security Contexts</a></p>
<p class="MiniTOC3"><a href="#wp1060985">Unsupported Features</a></p>
<p class="MiniTOC3"><a href="#wp1060993">Context Configuration Files</a></p>
<p class="MiniTOC4"><a href="#wp1061011">Context Configurations</a></p>
<p class="MiniTOC4"><a href="#wp1061023">System Configuration</a></p>
<p class="MiniTOC4"><a href="#wp1061030">Admin Context Configuration</a></p>
<p class="MiniTOC3"><a href="#wp1061044">How the FWSM Classifies Packets</a></p>
<p class="MiniTOC4"><a href="#wp1061069">Valid Classifier Criteria</a></p>
<p class="MiniTOC4"><a href="#wp1061089">Invalid Classifier Criteria</a></p>
<p class="MiniTOC4"><a href="#wp1061094">Classification Examples</a></p>
<p class="MiniTOC3"><a href="#wp1061130">Sharing Interfaces Between Contexts</a></p>
<p class="MiniTOC4"><a href="#wp1061155">NAT and Origination of Traffic</a></p>
<p class="MiniTOC4"><a href="#wp1061158">Sharing an Outside Interface</a></p>
<p class="MiniTOC4"><a href="#wp1061161">Sharing an Inside Interface</a></p>
<p class="MiniTOC2"><a href="#wp1061181">Enabling or Disabling Multiple Context Mode at the CLI</a></p>
<p class="MiniTOC3"><a href="#wp1061204">Backing Up the Single Mode Configuration</a></p>
<p class="MiniTOC3"><a href="#wp1061214">Enabling Multiple Context Mode</a></p>
<p class="MiniTOC3"><a href="#wp1061242">Restoring Single Context Mode</a></p>
<p class="MiniTOC2"><a href="#wp1064133">Managing Memory for Rules</a></p>
<p class="MiniTOC3"><a href="#wp1064162">About Memory Partitions</a></p>
<p class="MiniTOC3"><a href="#wp1064190">Default Rule Allocation</a></p>
<p class="MiniTOC3"><a href="#wp1064257">Setting the Number of Memory Partitions</a></p>
<p class="MiniTOC3"><a href="#wp1064324">Changing the Memory Partition Size</a></p>
<p class="MiniTOC3"><a href="#wp1064645">Reallocating Rules Between Features for a Specific Memory Partition</a></p>
<p class="MiniTOC2"><a href="#wp1061269">Configuring Resource Classes</a></p>
<p class="MiniTOC3"><a href="#wp1061296">Classes and Class Members Overview</a></p>
<p class="MiniTOC4"><a href="#wp1061317">Resource Limits Overview</a></p>
<p class="MiniTOC4"><a href="#wp1061353">Default Class Overview</a></p>
<p class="MiniTOC4"><a href="#wp1061367">Class&#160;Members Overview</a></p>
<p class="MiniTOC3"><a href="#wp1045496">Adding a Resource Class</a></p>
<p class="MiniTOC3"><a href="#wp1053841">Monitoring Context Resource Usage&#160;&#160;&#160;&#160;&#160;&#160;&#160;</a></p>
<p class="MiniTOC2"><a href="#wp1043858">Configuring Security Contexts</a></p>
    <br />
    <!-- End of Mini TOC -->

    <a name="wp1041644"></a><a name="wpxref39021"></a><a name="wp1041645"></a><a name="wpxref32334"></a><h2 class="pCT_ChapTitle">
Configuring Security Contexts
</h2>
<hr class="Chap1" />
<a name="wp1060928"></a><p class="pB1_Body1">
This chapter includes the following sections:
</p>
<a name="wp1060932"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1060948">Security Context Overview</a>
</p>
<a name="wp1060936"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061181">Enabling or Disabling Multiple Context Mode at the CLI</a>
</p>
<a name="wp1066350"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064133">Managing Memory for Rules</a>
</p>
<a name="wp1060940"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061269">Configuring Resource Classes</a>
</p>
<a name="wp1060944"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1043858">Configuring Security Contexts</a>
</p>
<a name="Security_Context_Overview"> </a>

<a name="wp1060948"></a><a name="wpxref91108"></a><a name="wpmkr1060946"></a><a name="wpmkr1060947"></a><h2 class="p_H_Head1">
Security Context Overview
</h2>

<a name="wp1060952"></a><p class="pB1_Body1">
You can partition a single FWSM<span style="color: Black; font-style: normal; font-weight: normal"> </span>into multiple virtual devices, known as security contexts. Each context has its own security policy, interfaces, and administrators. Multiple contexts are similar to having multiple standalone devices. Many features are supported in multiple context mode, including routing tables, firewall features, and management. Some features are not supported, including most dynamic routing protocols.
</p>
<a name="wp1060953"></a><p class="pB1_Body1">
This section provides an overview of security contexts, and includes the following topics:
</p>
<a name="wp1060957"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1060975">Common Uses for Security Contexts</a>
</p>
<a name="wp1060961"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1060985">Unsupported Features</a>
</p>
<a name="wp1060965"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1060993">Context Configuration Files</a>
</p>
<a name="wp1060969"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061044">How the FWSM Classifies Packets</a>
</p>
<a name="wp1060973"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061130">Sharing Interfaces Between Contexts</a>
</p>

<a name="Common_Uses_for_Security_Contexts"> </a>

<a name="wp1060975"></a><a name="wpxref80249"></a><h3 class="p_H_Head2">
Common Uses for Security Contexts
</h3>
<a name="wp1060976"></a><p class="pB1_Body1">
You might want to use multiple security contexts in the following situations:
</p>
<a name="wp1060977"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />You are a service provider and want to sell security services to many customers. By enabling multiple security contexts on the FWSM, you can implement a cost-effective, space-saving solution that keeps all customer traffic separate and secure, and also eases configuration.
</p>
<a name="wp1060981"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />You are a large enterprise or a college campus and want to keep departments completely separate.
</p>
<a name="wp1060982"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />You are an enterprise that wants to provide distinct security policies to different departments.
</p>
<a name="wp1060983"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />You have any network that requires more than one firewall.
</p>

<a name="Unsupported_Features"> </a>

<a name="wp1060985"></a><a name="wpxref47013"></a><h3 class="p_H_Head2">
Unsupported Features
</h3>
<a name="wp1060988"></a><a name="wpmkr1060986"></a><a name="wpmkr1060987"></a><p class="pB1_Body1">
Multiple context mode does not support the following features:
</p>
<a name="wp1060989"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Most dynamic routing protocols. BGP stub mode is supported.
</p>
<a name="wp1060990"></a><p class="pB2_Body2">
Security contexts support only static routes or BGP stub mode. You cannot enable OSPF or RIP in multiple context mode.
</p>
<a name="wp1060991"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Multicast routing. Multicast bridging is supported.
</p>

<a name="Context_Configuration_Files"> </a>

<a name="wp1060993"></a><a name="wpxref90844"></a><h3 class="p_H_Head2">
Context Configuration Files
</h3>
<a name="wp1060997"></a><p class="pB1_Body1">
This section describes how the FWSM implements multiple context mode configurations and includes the following sections:
</p>
<a name="wp1061001"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061011">Context Configurations</a>
</p>
<a name="wp1061005"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061023">System Configuration</a>
</p>
<a name="wp1061009"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061030">Admin Context Configuration</a>
</p>

<a name="Context_Configurations"> </a>

<a name="wp1061011"></a><a name="wpxref63741"></a><h3 class="p_H_Head3">
Context Configurations
</h3>
<a name="wp1061015"></a><p class="pB1_Body1">
The FWSM includes a configuration for each context that identifies the security policy, interfaces, and almost all the options you can configure on a standalone device. You can store context configurations on the internal Flash memory or the external Flash memory card, or you can download them from a TFTP, FTP, or HTTP(S) server.
</p>

<a name="System_Configuration"> </a>

<a name="wp1061023"></a><a name="wpxref39152"></a><h3 class="p_H_Head3">
System Configuration
</h3>
<a name="wp1061024"></a><a name="wpmkr1061025"></a><p class="pB1_Body1">
The system administrator adds and manages contexts by configuring each context configuration location, allocated interfaces, and other context operating parameters in the system configuration, which, like a single mode configuration, is the startup configuration. The system configuration identifies basic settings for the FWSM. The system configuration does not include any network interfaces or network settings for itself; rather, when the system needs to access network resources (such as downloading the contexts from the server), it uses one of the contexts that is designated as the <em class="cEmphasis">admin context</em>. The system configuration does include a specialized failover interface for failover traffic only.
</p>

<a name="Admin_Context_Configuration"> </a>

<a name="wp1061030"></a><a name="wpxref90538"></a><h3 class="p_H_Head3">
Admin Context Configuration
</h3>
<a name="wp1061033"></a><a name="wpmkr1061031"></a><a name="wpmkr1061032"></a><p class="pB1_Body1">
The admin context is just like any other context, except that when a user logs in to the admin context, then that user has system administrator rights and can access the system and all other contexts. The admin context is not restricted in any way, and can be used as a regular context. However, because logging into the admin context grants you administrator privileges over all contexts, you might need to restrict access to the admin context to appropriate users. The admin context must reside on Flash memory, and not remotely.
</p>
<a name="wp1061034"></a><p class="pB1_Body1">
If your system is already in multiple context mode, or if you convert from single mode, the admin context is created automatically as a file on the internal Flash memory called admin.cfg. This context is named &quot;admin.&quot; If you do not want to use admin.cfg as the admin context, you can change the admin context.
</p>

<a name="How_the_FWSM_Classifies_Packets"> </a>

<a name="wp1061044"></a><a name="wpxref64049"></a><a name="wpmkr1061042"></a><a name="wpmkr1061043"></a><h3 class="p_H_Head2">
How the FWSM Classifies Packets
</h3>
<a name="wp1061051"></a><p class="pB1_Body1">
Each packet that enters the FWSM must be classified, so that the FWSM can determine to which context to send a packet. The FWSM uses only one global MAC address across all interfaces. A single MAC address is usually not a problem unless multiple contexts want to share an interface. A router cannot direct packets to IP addresses on the same network if all IP addresses resolve to the same MAC address. Moreover, the bridging table of the switch would constantly change as the MAC address moves from one interface to another. The purpose of the security context classifier is to resolve this situation.
</p>
<a name="wp1061055"></a><p class="pB1_Body1">
This section includes the following topics:
</p>
<a name="wp1061059"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061069">Valid Classifier Criteria</a>
</p>
<a name="wp1061063"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061089">Invalid Classifier Criteria</a>
</p>
<a name="wp1061067"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061094">Classification Examples</a>
</p>

<a name="Valid_Classifier_Criteria"> </a>

<a name="wp1061069"></a><a name="wpxref82383"></a><h3 class="p_H_Head3">
Valid Classifier Criteria
</h3>
<a name="wp1061073"></a><p class="pB1_Body1">
If only one context is associated with the ingress interface, the FWSM classifies the packet into that context. In transparent firewall mode, unique interfaces for contexts are required, so this method is used to classify packets at all times. The only exception in transparent mode is for a shared management VLAN; for management traffic destined for an interface, the interface IP address is used for classification.
</p>
<a name="wp1061074"></a><p class="pB1_Body1">
If multiple contexts share an interface, then the classifier intercepts the packet and performs a destination IP address lookup. All other fields are ignored; only the destination IP address is used. To use the destination address for classification, the classifier must have knowledge about the subnets located behind each security context. The classifier relies on active NAT sessions to determine the subnets in each context. Active NAT sessions are created either by <b class="cBold">static</b> commands, which create a permanent session, or by active dynamic NAT sessions.
</p>
<a name="wp1061075"></a><p class="pB1_Body1">
For example, the classifier gains knowledge about subnets 10.10.10.0, 10.20.10.0 and 10.30.10.0 when the context administrators configure <b class="cBold">static</b> commands in each context:
</p>
<a name="wp1061076"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Context A:
</p>
<a name="wp1061077"></a><div class="pEx2_Example2">
<pre>static (inside,shared) 10.10.10.0 10.10.10.0 netmask 255.255.255.0
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061078"></a><br /></pre></div>
<a name="wp1061079"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Context B:
</p>
<a name="wp1061080"></a><div class="pEx2_Example2">
<pre>static (inside,shared) 10.20.10.0 10.20.10.0 netmask 255.255.255.0
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061081"></a><br /></pre></div>
<a name="wp1061082"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Context C:
</p>
<a name="wp1061083"></a><div class="pEx2_Example2">
<pre>static (inside,shared) 10.30.10.0 10.30.10.0 netmask 255.255.255.0
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061084"></a><br /></pre></div>
<a name="wp1061085"></a><p class="pB1_Body1">
If you use dynamic NAT, an active NAT session is created when the real host creates a connection through the shared interface. For traffic returning to the host, the active NAT session is used to classify the packet.
</p>
<a name="wp1061086"></a><p class="pB1_Body1">
To quickly identify possible overlaps between different contexts, a situation that leads to connectivity problems, enter the <b class="cBold">show np 3 static</b> command in the system execution space.
</p>
<div class="Note1B"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Cautn1table" />
<a name="wp1061087"></a><p class="pN1_Note1">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="1" height="2" border="0" />For management traffic destined for an interface, the interface IP address is used for classification.
</p>
<hr class="Cautn1table" />
<a name="Invalid_Classifier_Criteria"> </a>

<a name="wp1061089"></a><a name="wpxref84509"></a><h3 class="p_H_Head3">
Invalid Classifier Criteria
</h3>
<a name="wp1061090"></a><p class="pB1_Body1">
The following configurations are not used for packet classification:
</p>
<a name="wp1061091"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />NAT exemption&#8212;The classifier does not use a NAT exemption configuration for classification purposes because NAT exemption does not identify the mapped (shared) interface.
</p>
<a name="wp1061092"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Routing table&#8212;The classifier does not use the routing table for classification. For example, if a context includes a static route that points to an external router as the next-hop to a subnet, and a different context includes a <b class="cBold">static</b> command for the same subnet, then the classifier uses the <b class="cBold">static </b>command to classify packets destined for that subnet and ignores the static route.
</p>

<a name="Classification_Examples"> </a>

<a name="wp1061094"></a><a name="wpxref32622"></a><h3 class="p_H_Head3">
Classification Examples
</h3>
<a name="wp1061099"></a><a name="wpmkr1061098"></a><p class="pB1_Body1">
<a href="#wp1061101">Figure&#160;10-1</a> shows multiple contexts sharing an outside interface, while the inside interfaces are unique, allowing overlapping IP addresses. The classifier assigns the packet to Context B because Context B includes the address translation that matches the destination address.
</p>
<a name="wp1061101"></a><a name="wpxref90514"></a><p class="pTC_TableCap">
Figure&#160;10-1	Packet Classification with a Shared Interface
</p>
<a name="wp1061105"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/000001-100000/90001-95000/92001-93000/92900.jpg" id="wp1061103" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>
<a name="wp1061109"></a><p class="pB1_Body1">
Note that all new incoming traffic must be classified, even from inside networks. <a href="#wp1061111">Figure&#160;10-2</a> shows a host on the Context B inside network accessing the Internet. The classifier assigns the packet to Context B because the ingress interface is VLAN 300, which is assigned to Context B.
</p>
<a name="wp1061111"></a><a name="wpxref88713"></a><p class="pTC_TableCap">
Figure&#160;10-2	Incoming Traffic from Inside Networks
</p>
<a name="wp1061115"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/000001-100000/90001-95000/92001-93000/92897.jpg" id="wp1061113" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>
<a name="wp1061119"></a><p class="pB1_Body1">
<a href="#wp1061121">Figure&#160;10-3</a> shows a transparent firewall with a host on the Context B inside network accessing the Internet. The classifier assigns the packet to Context&#160;B because the ingress interface is VLAN 300, which is assigned to Context B.
</p>
<a name="wp1061121"></a><a name="wpxref13220"></a><p class="pTC_TableCap">
Figure&#160;10-3	Transparent Firewall Contexts
</p>
<a name="wp1061125"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/000001-100000/90001-95000/92001-93000/92901.jpg" id="wp1061123" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>

<a name="Sharing_Interfaces_Between_Contexts"> </a>

<a name="wp1061130"></a><a name="wpxref85129"></a><a name="wpmkr1061127"></a><a name="wpmkr1061128"></a><a name="wpmkr1061129"></a><h3 class="p_H_Head2">
Sharing Interfaces Between Contexts
</h3>
<a name="wp1061136"></a><a name="wpmkr1061135"></a><p class="pB1_Body1">
The FWSM lets you share an interface between contexts. For transparent mode, you can only share a management-only VLAN; all through-traffic interfaces must be unique. For management traffic destined for an interface, the interface IP address is used for classification. For non-management-only VLANs in routed mode, packet classification requirements might make sharing interfaces impractical. Because the classifier relies on active NAT sessions to classify the destination addresses to a context, the classifier is limited by how you can configure NAT. If you do not want to perform NAT, you must use unique interfaces.
</p>
<div class="Note1B"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Cautn1table" />
<a name="wp1061140"></a><p class="pN1_Note1">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="1" height="2" border="0" />The FWSM does not support sharing the outside interface of one context with the inside interface of another context (known as cascading contexts). Traffic that is outbound from one context(from a higher to a lower security interface) can only enter another context as inbound traffic (lower to higher security); it cannot be outbound for both contexts, or inbound for both contexts.
</p>
<hr class="Cautn1table" /><a name="wp1061141"></a><p class="pB1_Body1">
This section includes the following topics:
</p>
<a name="wp1061145"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061155">NAT and Origination of Traffic</a>
</p>
<a name="wp1061149"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061158">Sharing an Outside Interface</a>
</p>
<a name="wp1061153"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061161">Sharing an Inside Interface</a>
</p>

<a name="NAT_and_Origination_of_Traffic"> </a>

<a name="wp1061155"></a><a name="wpxref29001"></a><h3 class="p_H_Head3">
NAT and Origination of Traffic
</h3>
<a name="wp1061156"></a><p class="pB1_Body1">
The type of NAT configured determines whether the traffic can originate on the shared interface or if it can only respond to an existing connection. When you use dynamic NAT, you cannot initiate a connection to the real addresses. Therefore, traffic from the shared interface must be in response to an existing connection. Static NAT, however, lets you initiate connections, so you can initiate connections on the shared interface.
</p>

<a name="Sharing_an_Outside_Interface"> </a>

<a name="wp1061158"></a><a name="wpxref54572"></a><h3 class="p_H_Head3">
Sharing an Outside Interface
</h3>
<a name="wp1061159"></a><p class="pB1_Body1">
When you have an outside shared interface (connected to the Internet, for example), the destination addresses on the inside are limited, and are known by the system administrator, so configuring NAT for those addresses is easy, even if you want to configure static NAT.
</p>

<a name="Sharing_an_Inside_Interface"> </a>

<a name="wp1061161"></a><a name="wpxref90625"></a><h3 class="p_H_Head3">
Sharing an Inside Interface
</h3>
<a name="wp1061162"></a><a name="wpxref48198"></a><p class="pB1_Body1">
Configuring an inside shared interface poses a problem, however, if you want to allow communication between the shared interface and the Internet, where the destination addresses are unlimited. For example, if you want to allow inside hosts on the shared interface to initiate traffic to the Internet, then you need to configure static NAT statements for each Internet address. This requirement necessarily limits the kind of Internet access you can provide for users on an inside shared interface. (If you intend to statically translate addresses for Internet servers, then you also need to consider DNS entry addresses and how NAT affects them. For example, if a server sends a packet to www.example.com, then the DNS server needs to return the translated address. Your NAT configuration determines DNS entry management.)
</p>
<a name="wp1061167"></a><p class="pB1_Body1">
<a href="#wp1061175">Figure&#160;10-4</a> shows two servers on an inside shared interface. One server sends a packet to the translated address of a web server, and the FWSM classifies the packet to go through Context C because it includes a static translation for the address. The other server sends the packet to the real untranslated address, and the packet is dropped because the FWSM cannot classify it.
</p>
<a name="wp1061175"></a><a name="wpxref45644"></a><p class="pTC_TableCap">
Figure&#160;10-4	Originating Traffic on a Shared Interface
</p>
<a name="wp1061179"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/000001-100000/90001-95000/92001-93000/92899.jpg" id="wp1061177" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>
<a name="Enabling_or_Disabling_Multiple_Context_Mode_at_the_CLI"> </a>

<a name="wp1061181"></a><a name="wpxref36178"></a><h2 class="p_H_Head1">
Enabling or Disabling Multiple Context Mode at the CLI
</h2>

<a name="wp1061185"></a><p class="pB1_Body1">
Your FWSM might already be configured for multiple security contexts depending on how you ordered it from Cisco. If you are upgrading, however, you might need to convert from single mode to multiple mode by following the procedures in this section. ASDM does not support changing modes, so you need to change modes using the CLI.
</p>
<a name="wp1061189"></a><p class="pB1_Body1">
This section includes the following topics:
</p>
<a name="wp1061193"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061204">Backing Up the Single Mode Configuration</a>
</p>
<a name="wp1061197"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061214">Enabling Multiple Context Mode</a>
</p>
<a name="wp1061201"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061242">Restoring Single Context Mode</a>
</p>

<a name="Backing_Up_the_Single_Mode_Configuration"> </a>

<a name="wp1061204"></a><a name="wpxref61085"></a><a name="wpmkr1061203"></a><h3 class="p_H_Head2">
Backing Up the Single Mode Configuration
</h3>
<a name="wp1061208"></a><p class="pB1_Body1">
When you convert from single mode to multiple mode, the FWSM converts the running configuration into two files. The original startup configuration is not saved, so if it differs from the running configuration, you should back it up before proceeding.
</p>

<a name="Enabling_Multiple_Context_Mode"> </a>

<a name="wp1061214"></a><a name="wpxref58317"></a><a name="wpmkr1061210"></a><a name="wpmkr1061211"></a><a name="wpmkr1061212"></a><a name="wpmkr1061213"></a><h3 class="p_H_Head2">
Enabling Multiple Context Mode
</h3>
<a name="wp1061215"></a><p class="pB1_Body1">
The context mode (single or multiple) is not stored in the configuration file, even though it does endure reboots. If you need to copy your configuration to another device, set the mode on the new device to match using the <b class="cCN_CmdName">mode</b> command.
</p>
<a name="wp1061219"></a><a name="wpmkr1061223"></a><p class="pB1_Body1">
When you convert from single mode to multiple mode, the FWSM converts the running configuration in to two files: a new startup configuration that comprises the system configuration, and admin.cfg that comprises the admin context (in the root directory of the internal Flash memory). The original running configuration is saved as old_running.cfg (in the root directory of the internal Flash memory). The original startup configuration is not saved. The FWSM automatically adds an entry for the admin context to the system configuration with the name &quot;admin.&quot;
</p>
<a name="wp1061230"></a><p class="pB1_Body1">
To enable multiple mode, enter the following command:
</p>
<a name="wp1061234"></a><div class="pEx1_Example1">
<pre>hostname(config)# <b class="cBold">mode multiple
</b></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061235"></a><br /></pre></div>
<a name="wp1061239"></a><p class="pB1_Body1">
You are prompted to reboot the FWSM.
</p>

<a name="Restoring_Single_Context_Mode"> </a>

<a name="wp1061242"></a><a name="wpxref93394"></a><a name="wpmkr1061241"></a><h3 class="p_H_Head2">
Restoring Single Context Mode
</h3>
<a name="wp1061243"></a><p class="pB1_Body1">
If you convert from multiple mode to single mode, you might want to first copy a full startup configuration (if available) to the FWSM; the system configuration inherited from multiple mode is not a complete functioning configuration for a single mode device. For example, you can restore the old single-mode running configuration, if available, as the startup configuration. Because the system configuration does not have any network interfaces as part of its configuration, you must access the FWSM from a switch session to perform the copy.
</p>
<a name="wp1061250"></a><p class="pB1_Body1">
To copy the old running configuration to the startup configuration and to change the mode to single mode, perform the following steps in the system execution space:
</p>
<hr noshade />
<a name="wp1061251"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To copy the backup version of your original running configuration to the current startup configuration, enter the following command in the system execution space:
</p>
<a name="wp1061255"></a><div class="pEx1_Example1">
<pre>hostname(config)# <b class="cBold">copy old_running.cfg startup-config
</b></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061256"></a><br /></pre></div>
<a name="wp1061257"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To set the mode to single mode, enter the following command in the system execution space:
</p>
<a name="wp1061261"></a><div class="pEx1_Example1">
<pre>hostname(config)# <b class="cBold">mode single
</b></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1061262"></a><br /></pre></div>
<a name="wp1061266"></a><p class="pB1_Body1">
The FWSM reboots.
</p>
<hr class="Cautn1table"/><a name="wp1061267"></a><a name="Managing_Memory_for_Rules"> </a>

<a name="wp1064133"></a><a name="wpmkr1065167"></a><a name="wpxref29560"></a><h2 class="p_H_Head1">
Managing Memory for Rules
</h2>

<a name="wp1064140"></a><p class="pB1_Body1">
The FWSM supports a fixed number of rules for the entire system. In multiple context mode, the FWSM partitions the memory allocated to rule configuration, and assigns each context to a partition. This section describes how rule allocation works and how to manage memory partitions; it includes the following topics:
</p>
<a name="wp1064144"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064162">About Memory Partitions</a>
</p>
<a name="wp1064148"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064190">Default Rule Allocation</a>
</p>
<a name="wp1064152"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064257">Setting the Number of Memory Partitions</a>
</p>
<a name="wp1064156"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064324">Changing the Memory Partition Size</a>
</p>
<a name="wp1064160"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1064645">Reallocating Rules Between Features for a Specific Memory Partition</a>
</p>

<a name="About_Memory_Partitions"> </a>

<a name="wp1064162"></a><a name="wpxref28165"></a><h3 class="p_H_Head2">
About Memory Partitions
</h3>
<a name="wp1064167"></a><a name="wpmkr1064166"></a><p class="pB1_Body1">
In multiple context mode, the FWSM partitions the memory allocated to rule configuration, and assigns each context to a partition. By default, a context belongs to one of 12 partitions that offers a maximum number rules, including ACEs, AAA rules, and others. See the <a href="#wp1064190">"Default Rule Allocation"</a> section for a list of rule limits.
</p>
<a name="wp1064174"></a><p class="pB1_Body1">
The FWSM assigns contexts to the partitions in the order they are loaded at startup. For example, if you have 12 contexts and the maximum number of rules is 14,103, each context is assigned to its own partition, and can use 14,103 rules. If you add one more context, then context number 1 and the new context number 13 are both assigned to partition 1, and can use 14,103 rules divided between them; the other 11 contexts continue to use 14,103 rules each. If you delete contexts, the partition membership does not shift, so you might have some unequal distribution until you reboot, at which time the contexts are evenly distributed.
</p>
<div class="Note1B"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Cautn1table" />
<a name="wp1064175"></a><p class="pN1_Note1">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="1" height="2" border="0" />Rules are used up on a first come, first served basis, so one context might use more rules than another context.
</p>
<hr class="Cautn1table" /><a name="wp1064178"></a><p class="pB1_Body1">
You can manage memory partitions by manually assigning a context to a partition (see the <a href="#wp1043858">"Configuring Security Contexts" section</a>); reducing the number of partitions to better match the number of contexts you have (see the <a href="#wp1064257">"Setting the Number of Memory Partitions" section</a>); changing the size of a partition (see the <a href="#wp1064324">"Changing the Memory Partition Size" section</a>); and reallocating rules between features (see the <a href="#wp1064645">"Reallocating Rules Between Features for a Specific Memory Partition" section</a>).
</p>

<a name="Default_Rule_Allocation"> </a>

<a name="wp1064190"></a><a name="wpxref38723"></a><h3 class="p_H_Head2">
Default Rule Allocation
</h3>
<a name="wp1064194"></a><p class="pB1_Body1">
<a href="#wp1064205">Table&#160;10-1</a> lists the default number of rules for each feature type in multiple context mode, for the default 12 memory partitions.
</p>
<div class="Note1B"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Cautn1table" />
<a name="wp1064195"></a><p class="pN1_Note1">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="1" height="2" border="0" />Some access lists use more memory than others. Depending on the type of access list, the actual limit the system can support will be less than the maximum. See the <span style="font-weight: normal" class="cXRef_Color">&quot;Maximum Number of ACEs&quot; section on page&#160;12-5</span> for more information about ACEs and memory usage.
</p>
<hr class="Cautn1table" /><a name="wp1064253"></a><p class="pTableAnchor">
</p>
<div align="left">
<table border="1" cellpadding="3" cellspacing="0" width="80%" bordercolor="#808080"
 id="wp1064205table1064199">


 <caption><a name="wp1064205"></a><a name="wpxref61199"></a><p class="pTC_TableCap">
Table&#160;10-1	Default Rule Allocation&#160;
</p>
</caption>

  <tr align="left" valign="bottom">    <th scope="col"><a name="wp1064209"></a><div class="pCH1_CellHead1">
Specification
</div>
</th>
    <th scope="col"><a name="wp1064214"></a><div class="pCH1_CellHead1">
Maximum per Partition (with 12<sup><a href="#wp1064213">1</a> </sup> Partitions)
</div>
</th>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064216"></a><p class="pB1_Body1">
AAA Rules
</p>
</td>
<td><a name="wp1064218"></a><p class="pB1_Body1">
1345
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064220"></a><p class="pB1_Body1">
ACEs
</p>
</td>
<td><a name="wp1064222"></a><p class="pB1_Body1">
14,801
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064227"></a><p class="pB1_Body1">
<b class="cBold">established</b> commands<sup><a href="#wp1064226">2</a> </sup>
</p>
</td>
<td><a name="wp1064229"></a><p class="pB1_Body1">
96
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064231"></a><p class="pB1_Body1">
Filter Rules
</p>
</td>
<td><a name="wp1064233"></a><p class="pB1_Body1">
576
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064235"></a><p class="pB1_Body1">
ICMP, Telnet, SSH, and HTTP Rules
</p>
</td>
<td><a name="wp1064237"></a><p class="pB1_Body1">
384
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064242"></a><p class="pB1_Body1">
Policy NAT ACEs<sup><a href="#wp1064241">3</a> </sup>
</p>
</td>
<td><a name="wp1064244"></a><p class="pB1_Body1">
384
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064246"></a><p class="pB1_Body1">
Inspect Rules
</p>
</td>
<td><a name="wp1064248"></a><p class="pB1_Body1">
1537
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1064250"></a><p class="pB1_Body1">
<b class="cBold">Total Rules</b>
</p>
</td>
<td><a name="wp1064252"></a><p class="pB1_Body1">
<b class="cBold">19,219</b>
</p>
</td>
</tr>
</table>

<table>
  <tr>
    <td><a name="wp1064213"></a><p class="pTF_tableFootnote">
<sup><a href="#wp1064214">1</a> </sup>Use the <b class="cBold">show resource rule</b> command to view the default values for partitions other than 12.
</p>
<a name="wp1064226"></a><p class="pTF_tableFootnote">
<sup><a href="#wp1064227">2</a> </sup>Each <b class="cBold">established</b> command creates a control and data rule, so this value is doubled in the Total Rules value.
</p>
<a name="wp1064241"></a><p class="pTF_tableFootnote">
<sup><a href="#wp1064242">3</a> </sup>This limit is lower than in release 2.3.
</p>
</td>
  </tr>
</table>
</div><br />
<p class="pTableAnchor">

</p>

<a name="Setting_the_Number_of_Memory_Partitions"> </a>

<a name="wp1064257"></a><a name="wpmkr1065550"></a><a name="wpxref72494"></a><h3 class="p_H_Head2">
Setting the Number of Memory Partitions
</h3>
<a name="wp1075561"></a><p class="pB1_Body1">
This section describes how to change the number of partitions.
</p>

<a name="Guidelines"> </a>

<a name="wp1075330"></a><h3 class="p_H_Head4">
Guidelines
</h3>
<div class="caut1"><img src="../../../../../../i/templates/caut.gif" alt="" /></div><hr class="Cautn1" />
<a name="wp1075331"></a><div class="pCautn">
<b>Caution	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />Failure to follow these guidelines might result in dropped access list configuration as well as other anomalies, including ACL tree corruption.
</div>
<hr class="Cautn1" />
<a name="wp1075332"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />The target partition and rule allocation settings must be carefully calculated, planned, and preferably tested in a non-production environment prior to making the change to ensure that all existing contexts and rules can be accommodated.
</p>
<a name="wp1075333"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />When failover is used, both FWSMs need to be reloaded at the same time after making partition changes. Reloading both FWSMs causes an outage with no possibility for a zero-downtime reload. At no time should two FWSMs with a mismatched number of partitions or rule limits synchronize over failover.
</p>
<a name="wp1075491"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Changing the number of partitions requires you to reload the FWSM.
</p>
<a name="wp1075492"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />When increasing the number of partitions, the default size of each partition is reduced.
</p>
<a name="wp1075495"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />If you manually configured the partition sizes (see the <a href="#wp1064324">"Changing the Memory Partition Size" section</a>), the sizes you set might not be compatible with the new smaller partition sizes.
</p>
<a name="wp1075497"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />If the current configured sizes do not fit into the new partitions, then the FWSM rejects the new memory partition configuration.
</p>
<a name="wp1075500"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />The FWSM also checks the rule allocation (see the <a href="#wp1064645">"Reallocating Rules Between Features for a Specific Memory Partition" section</a>). If you manually allocated rules between features so that the total number of rules allocated is now greater than those available, then the FWSM rejects the new memory partition configuration. Similarly, if the absolute maximum number of rules for a feature is now exceeded, then the FWSM rejects the new memory partition configuration.
</p>

<a name="Detailed_Steps"> </a>

<a name="wp1075334"></a><h3 class="p_H_Head4">
Detailed Steps
</h3>
<a name="wp1072482"></a><p class="pB1_Body1">
To change the number of memory partitions, perform the following steps:
</p>
<hr noshade />
<a name="wp1072483"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) To view the current mapping of contexts to memory partitions, enter the following command from <b class="cBold">Tools &gt; Command Line Interface</b>:
</p>
<a name="wp1072484"></a><div class="pEx1_Example1">
<pre><span style="color: Black; font-style: normal; font-weight: bold">show resource acl-partition
</span></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1072485"></a><br /></pre></div>
<a name="wp1072486"></a><p class="pSB_StepBody">
The following sample output shows that 2 memory partitions are configured:
</p>
<a name="wp1072487"></a><div class="pEx1_Example1">
<pre>Total number of configured partitions = 2
</pre>
</div><a name="wp1072488"></a><div class="pEx1_Example1">
<pre>Partition #0
</pre>
</div><a name="wp1072489"></a><div class="pEx1_Example1">
<pre>        Mode                       :exclusive
</pre>
</div><a name="wp1072490"></a><div class="pEx1_Example1">
<pre>        List of Contexts        :bandn, borders
</pre>
</div><a name="wp1072491"></a><div class="pEx1_Example1">
<pre>        Number of contexts   :2(RefCount:2)
</pre>
</div><a name="wp1072492"></a><div class="pEx1_Example1">
<pre>        Number of rules         :0(Max:53087)
</pre>
</div><a name="wp1072493"></a><div class="pEx1_Example1">
<pre>Partition #1
</pre>
</div><a name="wp1072494"></a><div class="pEx1_Example1">
<pre>        Mode                       :non-exclusive
</pre>
</div><a name="wp1072495"></a><div class="pEx1_Example1">
<pre>        List of Contexts        :admin, momandpopA, momandpopB, momandpopC
</pre>
</div><a name="wp1072496"></a><div class="pEx1_Example1">
<pre>                                         momandpopD
</pre>
</div><a name="wp1072497"></a><div class="pEx1_Example1">
<pre>        Number of contexts   :5(RefCount:5)
</pre>
</div><a name="wp1072498"></a><div class="pEx1_Example1">
<pre>        Number of rules         :6(Max:53087)
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1072499"></a><br /></pre></div>
<a name="wp1072502"></a><p class="pSB_StepBody">
For information about exclusive and non-exclusive partitions, see the <a href="#wp1043858">"Configuring Security Contexts" section</a>.
</p>
<a name="wp1065484"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the System execution space, from the Configuration &gt; Device Management &gt; Resource Allocation &gt; Local Rules pane, set the number of partitions in the Number of ACL Partitions field, between 1&#160;and&#160;12.
</p>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1065486"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />If you assign a context to a partition, the partition numbering starts with 0. So if you have 12 partitions, the partition numbers are 0 through 11. See the <a href="#wp1043858">"Configuring Security Contexts" section</a> to assign contexts to partitions.
</p>
<hr class="Note2" /><a name="wp1065490"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Apply</b>.
</p>
<a name="wp1065494"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To reload the FWSM so the change can take effect, choose <b class="cBold">Tools &gt; System Reload</b>.
</p>
<a name="wp1065877"></a><p class="pSB_StepBody">
If you are using failover, wait a few seconds before reloading the standby unit as well; the standby unit does not reload automatically, and the memory partitions must match on both units. Traffic loss can occur because both units are down at the same time.
</p>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1065878"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />If you add a secondary unit at a later date, then after the new secondary unit synchronizes the configuration, immediately reload the secondary unit so that the memory partitions are the same. During the initial synchronization, the configuration might not fit properly in the secondary unit memory partitions, but after reloading, and another configuration synchronization, the secondary unit will be operational.
</p>
<hr class="Note2" /><hr class="Cautn1table"/><a name="wp1065497"></a>
<a name="Changing_the_Memory_Partition_Size"> </a>

<a name="wp1064324"></a><a name="wpxref93231"></a><a name="wpmkr1064323"></a><h3 class="p_H_Head2">
Changing the Memory Partition Size
</h3>
<a name="wp1064325"></a><p class="pB1_Body1">
The FWSM lets you set the memory size of each partition.
</p>

<a name="Guidelines"> </a>

<a name="wp1075640"></a><h3 class="p_H_Head4">
Guidelines
</h3>
<div class="caut1"><img src="../../../../../../i/templates/caut.gif" alt="" /></div><hr class="Cautn1" />
<a name="wp1075570"></a><div class="pCautn">
<b>Caution	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />Failure to follow these guidelines might result in dropped access list configuration as well as other anomalies, including ACL tree corruption.
</div>
<hr class="Cautn1" />
<a name="wp1075571"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />The target partition and rule allocation settings must be carefully calculated, planned, and preferably tested in a non-production environment prior to making the change to ensure that all existing contexts and rules can be accommodated.
</p>
<a name="wp1075572"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />When failover is used, both FWSMs need to be reloaded at the same time after making partition changes. Reloading both FWSMs causes an outage with no possibility for a zero-downtime reload. At no time should two FWSMs with a mismatched number of partitions or rule limits synchronize over failover.
</p>
<a name="wp1064329"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Changing the partition sizes requires you to reload the FWSM.
</p>
<a name="wp1064330"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Change the number of partitions before you set the partition sizes; changing the number of partitions affects the overall number of rules per partition. If you increase the number of partitions, for example, then the number of rules available per partition will be smaller. Therefore, your partition size configuration might be invalid, and you might need to reconfigure all your partition sizes. Changing the number of partitions requires you to reload the FWSM before you change the partition sizes; then changing the partition sizes requires a second reload.
</p>
<a name="wp1064333"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Allocate contexts to specific partitions before you set the partition sizes (see the <a href="#wp1043858">"Configuring Security Contexts" section</a>). If you plan all your partition sizes based on the contexts currently assigned to a partition, but you did not specifically allocate the contexts, then you run the risk of context assignments shifting after a reload (for example if you add or subtract contexts).
</p>
<a name="wp1064335"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Reduce the size of partition(s) before increasing the size of other partition(s). The FWSM rejects any increases in size if there is not free space available.
</p>
<a name="wp1064336"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />If the existing number of ACEs does not fit into the new partition size, then the resizing is rejected.
</p>
<a name="wp1064337"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />In addition to the memory partitions to which the FWSM assigns contexts, the FWSM uses a backup tree partition to process changes to rules so traffic can continue to use the old configuration until the new configuration is ready. The backup tree must be as large as the largest partition. Therefore, some memory is automatically assigned to the backup tree in tandem with the largest partition; so be sure to include the backup tree in your calculations.
</p>
<a name="wp1064340"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />If you reduce the size of a partition, the FWSM checks the rule allocation (see the <a href="#wp1064645">"Reallocating Rules Between Features for a Specific Memory Partition" section</a>). If you manually allocated rules between features so that the total number of rules allocated is now greater than those available, then the FWSM rejects the resizing of the partition. Similarly, if the absolute maximum number of rules for a feature is now exceeded, then the FWSM rejects the resizing of the partition.
</p>

<a name="Detailed_Steps"> </a>

<a name="wp1075671"></a><h3 class="p_H_Head4">
Detailed Steps
</h3>
<a name="wp1064342"></a><p class="pB1_Body1">
To set the size of the memory partitions, perform the following steps:
</p>
<hr noshade />
<a name="wp1064380"></a><a name="wpxref25602"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />From the System execution space, go to the Configuration &gt; Device Management &gt; Resource Allocation &gt; Local Rules pane.
</p>
<a name="wp1068075"></a><p class="pSB_StepBody">
The Current Configured Size column shows the number of rules that currently assigned to each partition. The backup tree partition (not configurable) is used to process changes to rules so traffic can continue to use the old configuration until the new configuration is ready.
</p>
<a name="wp1072643"></a><p class="pSB_StepBody">
The total number of rules avalable displays at the bottom of the table.
</p>
<a name="wp1068298"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Calculate how you want to resize the partitions. Note that the backup tree must be as large as the largest partition. Therefore, some memory is automatically assigned to the backup tree in tandem with the largest partition; so be sure to include the backup tree in your calculations.
</p>
<a name="wp1069129"></a><p class="pB1_Body1">
For example, if you reduce the sizes of partitions 0 through 5 to 15,000, then after applying your change, ASDM shows that you have 25,314 rules to reallocate to other partitions.
</p>
<a name="wp1069474"></a><p class="pTableAnchor">
</p>
<div align="left">
<table border="1" cellpadding="3" cellspacing="0" width="80%" bordercolor="#808080"
 id="wp1069478table1069476">


 <caption></caption>

  <tr align="left" valign="bottom">    <th scope="col"><a name="wp1069478"></a><div class="pCH1_CellHead1">
Partition
</div>
</th>
    <th scope="col"><a name="wp1069480"></a><div class="pCH1_CellHead1">
Bootup Partition Size
</div>
</th>
    <th scope="col"><a name="wp1069482"></a><div class="pCH1_CellHead1">
Configured Size
</div>
</th>
    <th scope="col"><a name="wp1069484"></a><div class="pCH1_CellHead1">
Difference
</div>
</th>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069486"></a><p class="pB1_Body1">
0
</p>
</td>
<td><a name="wp1069488"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069490"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069492"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069494"></a><p class="pB1_Body1">
1
</p>
</td>
<td><a name="wp1069496"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069498"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069672"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069502"></a><p class="pB1_Body1">
2
</p>
</td>
<td><a name="wp1069504"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069506"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069674"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069510"></a><p class="pB1_Body1">
3
</p>
</td>
<td><a name="wp1069512"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069514"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069676"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069518"></a><p class="pB1_Body1">
4
</p>
</td>
<td><a name="wp1069520"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069522"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069678"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069526"></a><p class="pB1_Body1">
5
</p>
</td>
<td><a name="wp1069528"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069530"></a><p class="pB1_Body1">
15000
</p>
</td>
<td><a name="wp1069680"></a><p class="pB1_Body1">
4219
</p>
</td>
</tr>
  <tr align="left" valign="top"><td>&#160;<a name="wp1069542"></a></td>
<td>&#160;<a name="wp1069544"></a></td>
<td>&#160;<a name="wp1069546"></a></td>
<td><a name="wp1069548"></a><p class="pB1_Body1">
<b class="cBold">Total Reduced: 25314</b>
</p>
</td>
</tr>
</table>
</div><br />
<p class="pTableAnchor">

</p>
<a name="wp1069158"></a><p class="pB1_Body1">
If you want to distribute the rules evenly across the other 6 partitions plus the backup tree, then you can add 3616 rules to each (with 2 left over). Remember that the backup tree must be as large as the largest partition, so you must consider the backup tree in your calculations. For example, if you want to make partition 6 have 24,001 rules, then you can allocate the rules like this:
</p>
<a name="wp1069232"></a><p class="pTableAnchor">
</p>
<div align="left">
<table border="1" cellpadding="3" cellspacing="0" width="80%" bordercolor="#808080"
 id="wp1069161table1069159">


 <caption></caption>

  <tr align="left" valign="bottom">    <th scope="col"><a name="wp1069161"></a><div class="pCH1_CellHead1">
Partition
</div>
</th>
    <th scope="col"><a name="wp1069163"></a><div class="pCH1_CellHead1">
Bootup Partition Size
</div>
</th>
    <th scope="col"><a name="wp1069165"></a><div class="pCH1_CellHead1">
Configured Size
</div>
</th>
    <th scope="col"><a name="wp1069167"></a><div class="pCH1_CellHead1">
Difference
</div>
</th>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069169"></a><p class="pB1_Body1">
6
</p>
</td>
<td><a name="wp1069171"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069173"></a><p class="pB1_Body1">
24001
</p>
</td>
<td><a name="wp1069175"></a><p class="pB1_Body1">
4782
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069177"></a><p class="pB1_Body1">
Backup Tree
</p>
</td>
<td><a name="wp1069179"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069181"></a><p class="pB1_Body1">
24001
</p>
</td>
<td><a name="wp1069183"></a><p class="pB1_Body1">
4782
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069185"></a><p class="pB1_Body1">
7
</p>
</td>
<td><a name="wp1069187"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069189"></a><p class="pB1_Body1">
22369
</p>
</td>
<td><a name="wp1069191"></a><p class="pB1_Body1">
3150
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069193"></a><p class="pB1_Body1">
8
</p>
</td>
<td><a name="wp1069195"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069197"></a><p class="pB1_Body1">
22369
</p>
</td>
<td><a name="wp1069199"></a><p class="pB1_Body1">
3150
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069201"></a><p class="pB1_Body1">
9
</p>
</td>
<td><a name="wp1069203"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069205"></a><p class="pB1_Body1">
22369
</p>
</td>
<td><a name="wp1069207"></a><p class="pB1_Body1">
3150
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069209"></a><p class="pB1_Body1">
10
</p>
</td>
<td><a name="wp1069211"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069213"></a><p class="pB1_Body1">
22369
</p>
</td>
<td><a name="wp1069215"></a><p class="pB1_Body1">
3150
</p>
</td>
</tr>
  <tr align="left" valign="top"><td><a name="wp1069217"></a><p class="pB1_Body1">
11
</p>
</td>
<td><a name="wp1069219"></a><p class="pB1_Body1">
19219
</p>
</td>
<td><a name="wp1069221"></a><p class="pB1_Body1">
22369
</p>
</td>
<td><a name="wp1069223"></a><p class="pB1_Body1">
3150
</p>
</td>
</tr>
  <tr align="left" valign="top"><td>&#160;<a name="wp1069225"></a></td>
<td>&#160;<a name="wp1069227"></a></td>
<td>&#160;<a name="wp1069229"></a></td>
<td><a name="wp1069231"></a><p class="pB1_Body1">
<b class="cBold">Total Increased: 25314</b>
</p>
</td>
</tr>
</table>
</div><br />
<p class="pTableAnchor">

</p>
<a name="wp1064388"></a><a name="wpxref75625"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />You must reduce the size of partitions before you can increase any sizes. For a partition you want to reduce, double-click the partition row, or click <b class="cBold">Edit</b>.
</p>
<a name="wp1067948"></a><p class="pSB_StepBody">
The Resource Rule dialog box appears.
</p>
<a name="wp1067947"></a><a name="wpxref51876"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Partition Size field, enter a new number.
</p>
<a name="wp1067970"></a><p class="pSB_StepBody">
By default, the rule allocations are adjusted to the default settings for the new size.
</p>
<a name="wp1070421"></a><p class="pSsF_StepsubFirst">
<b>	a.	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="10" height="2" border="0" />If you previously reallocated rules to be specific values (as opposed to &quot;default&quot;) then you must reduce the total number of rules to fit the new partition size either by entering new numbers or by choosing &quot;default&quot; for all features. See the <a href="#wp1064645">"Reallocating Rules Between Features for a Specific Memory Partition" section</a> for more information.
</p>
<a name="wp1070972"></a><p class="pSsN_StepsubNext">
<b>	b.	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="10" height="2" border="0" />Click <b class="cBold">OK</b>.
</p>
<a name="wp1064401"></a><p class="pSN_StepNext">
<b>Step&#160;5	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To reduce the size of other partitions, repeat Steps <a href="#wp1064388">3</a> and <a href="#wp1067947">4</a>.
</p>
<a name="wp1070984"></a><p class="pSN_StepNext">
<b>Step&#160;6	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Apply</b> to apply all size reductions.
</p>
<a name="wp1071598"></a><a name="wpxref37484"></a><p class="pSN_StepNext">
<b>Step&#160;7	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To increase a partition, double-click the partition row, or click <b class="cBold">Edit</b>.
</p>
<a name="wp1071599"></a><p class="pSB_StepBody">
The Resource Rule dialog box appears.
</p>
<a name="wp1071601"></a><a name="wpxref65051"></a><p class="pSN_StepNext">
<b>Step&#160;8	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Partition Size field, enter a new number, and click <b class="cBold">OK</b>.
</p>
<a name="wp1071602"></a><p class="pSB_StepBody">
By default, the rule allocations are adjusted to the default settings for the new size.
</p>
<a name="wp1071622"></a><p class="pSB_StepBody">
You cannot increase the total number of rules per feature until after you reload the FWSM. After you reload, you can change the rule allocation according to the <a href="#wp1064645">"Reallocating Rules Between Features for a Specific Memory Partition" section</a>.
</p>
<a name="wp1064529"></a><p class="pSN_StepNext">
<b>Step&#160;9	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To increase the size of other partitions, repeat Steps <a href="#wp1071598">7</a> and <a href="#wp1071601">8</a>.
</p>
<a name="wp1071660"></a><p class="pSN_StepNext">
<b>Step&#160;10	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Apply</b> to apply all size increases.
</p>
<a name="wp1071681"></a><p class="pSN_StepNext">
<b>Step&#160;11	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To reload the FWSM so the change can take effect, choose <b class="cBold">Tools &gt; System Reload</b>.
</p>
<a name="wp1071682"></a><p class="pSB_StepBody">
If you are using failover, wait a few seconds before reloading the standby unit as well; the standby unit does not reload automatically, and the memory partitions must match on both units. Traffic loss can occur because both units are down at the same time.
</p>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1071683"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />If you add a secondary unit at a later date, then after the new secondary unit synchronizes the configuration, immediately reload the secondary unit so that the memory partitions are the same. During the initial synchronization, the configuration might not fit properly in the secondary unit memory partitions, but after reloading, and another configuration synchronization, the secondary unit will be operational.
</p>
<hr class="Note2" /><hr class="Cautn1table"/><a name="wp1071684"></a>
<a name="Reallocating_Rules_Between_Features_for_a_Specific_Memory_Partition"> </a>

<a name="wp1064645"></a><a name="wpxref32558"></a><a name="wpmkr1064643"></a><a name="wpmkr1064644"></a><h3 class="p_H_Head2">
Reallocating Rules Between Features for a Specific Memory Partition
</h3>
<a name="wp1064648"></a><p class="pB1_Body1">
To set the rule allocation globally for all partitions, see the <a href="specs.html#wpxref80882"><span style="font-weight: normal" class="cXRef_Color">&quot;Reallocating Rules Between Features&quot; section on page&#160;2-8</span></a>. Setting the rule allocation for a specific partition overrides the global setting.
</p>
<a name="wp1072710"></a><p class="pB1_Body1">
For information about setting the partition size, see the <a href="#wp1064324">"Changing the Memory Partition Size" section</a>.
</p>

<a name="Guidelines"> </a>

<a name="wp1075685"></a><h3 class="p_H_Head4">
Guidelines
</h3>
<div class="caut1"><img src="../../../../../../i/templates/caut.gif" alt="" /></div><hr class="Cautn1" />
<a name="wp1075736"></a><div class="pCautn">
<b>Caution	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />Failure to follow these guidelines might result in dropped access list configuration as well as other anomalies, including ACL tree corruption.
</div>
<hr class="Cautn1" />
<a name="wp1075737"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />The target partition and rule allocation settings must be carefully calculated, planned, and preferably tested in a non-production environment prior to making the change to ensure that all existing contexts and rules can be accommodated.
</p>
<a name="wp1075738"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />When failover is used, both FWSMs need to be reloaded at the same time after making partition changes. Reloading both FWSMs causes an outage with no possibility for a zero-downtime reload. At no time should two FWSMs with a mismatched number of partitions or rule limits synchronize over failover.
</p>

<a name="Detailed_Steps"> </a>

<a name="wp1075718"></a><h3 class="p_H_Head4">
Detailed Steps
</h3>
<a name="wp1072705"></a><p class="pB1_Body1">
To reallocate rules for a given partition, perform the following steps:
</p>
<hr noshade />
<a name="wp1070531"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To view the total number of rules available per partition, the default values, current rule allocation, and the absolute maximum number of rules you can allocate per feature, enter the following command using <b class="cBold">Tools &gt; Command Line Interface</b>:
</p>
<a name="wp1070533"></a><div class="pEx1_Example1">
<pre><b class="cBold">show resource rule partition</b> [<em class="cEmphasis">number</em>]
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1070534"></a><br /></pre></div>
<a name="wp1070536"></a><p class="pSB_StepBody">
For example, the following display shows the maximum rules as 19219 for partition 0 (this is an example only, and might differ from the actual number of rules for your system):
</p>
<a name="wp1070906"></a><div class="pEx1_Example1">
<pre><b class="cBold">show resource rule partition</b> <b class="cBold">0
</b></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1070922"></a><br /></pre></div>
<a name="wp1070923"></a><div class="pEx1_Example1">
<pre>Result of the command: "show resource rule partition 0"
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1070936"></a><br /></pre></div>
<a name="wp1070541"></a><div class="pEx1_Example1">
<pre>             Default  Configured  Absolute
</pre>
</div><a name="wp1070543"></a><div class="pEx1_Example1">
<pre> CLS Rule     Limit      Limit      Max
</pre>
</div><a name="wp1070545"></a><div class="pEx1_Example1">
<pre>-----------+---------+----------+---------
</pre>
</div><a name="wp1070547"></a><div class="pEx1_Example1">
<pre> Policy NAT     384        384        833
</pre>
</div><a name="wp1070549"></a><div class="pEx1_Example1">
<pre> ACL          14801      14801      14801
</pre>
</div><a name="wp1070551"></a><div class="pEx1_Example1">
<pre> Filter         576        576       1152
</pre>
</div><a name="wp1070553"></a><div class="pEx1_Example1">
<pre> Fixup         1537       1537       3074
</pre>
</div><a name="wp1070555"></a><div class="pEx1_Example1">
<pre> Est Ctl         96         96         96
</pre>
</div><a name="wp1070557"></a><div class="pEx1_Example1">
<pre> Est Data        96         96         96
</pre>
</div><a name="wp1070559"></a><div class="pEx1_Example1">
<pre> AAA           1345       1345       2690
</pre>
</div><a name="wp1070561"></a><div class="pEx1_Example1">
<pre> Console        384        384        768
</pre>
</div><a name="wp1070563"></a><div class="pEx1_Example1">
<pre>-----------+---------+----------+---------
</pre>
</div><a name="wp1070565"></a><div class="pEx1_Example1">
<pre> Total        19219      19219
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1070567"></a><br /></pre></div>
<a name="wp1070568"></a><div class="pEx1_Example1">
<pre>Partition Limit - Configured Limit = Available to allocate
</pre>
</div><a name="wp1070570"></a><div class="pEx1_Example1">
<pre>      19219     -      19219       =           0
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1070876"></a><br /></pre></div>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1066605"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />If you increase the size of a partition but have not yet reloaded, the maximum number of rules remains at the old smaller size. You have to reload to see the increased limits. If you decrease the size of a partition but have not yet reloaded, the new smaller number of rules is reflected right away. 
</p>
<hr class="Note2" /><a name="wp1070494"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To view the number of rules currently being used so you can plan your reallocation, enter the following command at the Command Line Interface tool.
</p>
<a name="wp1066610"></a><div class="pEx1_Example1">
<pre><b style="font-weight: bold" class="cBold">show np 3 acl count </b><span style="color: Black; font-style: italic; font-weight: normal">partition_number
</span></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1066611"></a><br /></pre></div>
<a name="wp1066612"></a><p class="pB1_Body1">
For example, the following is sample output from the <b class="cBold">show np 3 acl count 0 </b>command, and shows the number of inspections (Fixup Rule) close to the maximum of 9216. You might choose to reallocate some access list rules (ACL Rule) to inspections.
</p>
<a name="wp1066613"></a><div class="pEx1_Example1">
<pre><b class="cBold">show np 3 acl count 0
</b></pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1066614"></a><br /></pre></div>
<a name="wp1066615"></a><div class="pEx1_Example1">
<pre>Result of the command: "show np 3 acl count 0"
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1066616"></a><br /></pre></div>
<a name="wp1066617"></a><div class="pEx1_Example1">
<pre>-------------- CLS Rule Current Counts --------------
</pre>
</div><a name="wp1066618"></a><div class="pEx1_Example1">
<pre>CLS Filter Rule Count       :             0
</pre>
</div><a name="wp1066619"></a><div class="pEx1_Example1">
<pre>CLS Fixup Rule Count        : &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;9001
</pre>
</div><a name="wp1066620"></a><div class="pEx1_Example1">
<pre>CLS Est Ctl Rule Count      :             4
</pre>
</div><a name="wp1066621"></a><div class="pEx1_Example1">
<pre>CLS AAA Rule Count          :            15
</pre>
</div><a name="wp1066622"></a><div class="pEx1_Example1">
<pre>CLS Est Data Rule Count     :             4
</pre>
</div><a name="wp1066623"></a><div class="pEx1_Example1">
<pre>CLS Console Rule Count      :            16
</pre>
</div><a name="wp1066624"></a><div class="pEx1_Example1">
<pre>CLS Policy NAT Rule Count   :             0
</pre>
</div><a name="wp1066625"></a><div class="pEx1_Example1">
<pre>CLS ACL Rule Count          : &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;30500
</pre>
</div><a name="wp1066626"></a><div class="pEx1_Example1">
<pre>CLS ACL Uncommitted Add     :             0
</pre>
</div><a name="wp1066627"></a><div class="pEx1_Example1">
<pre>CLS ACL Uncommitted Del     :             0 
</pre>
</div><a name="wp1066628"></a><div class="pEx1_Example1">
<pre>...
</pre>
</div><div class="pPreformatted"><pre class="pPreformatted">
<a name="wp1066629"></a><br /></pre></div>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1066630"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />The <b class="cBold">established</b> command creates two types of rules, control and data. Both of these types are shown in the display, but you allocate both rules by setting the number of <b class="cBold">established</b> commands; you do not set each rule separately.
</p>
<hr class="Note2" /><a name="wp1066631"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To reallocate rules between features, go to System &gt; Configuration &gt; Device Management &gt; Resource Allocation &gt; Local Rules, double-click the partition row you want to edit, or click <b class="cBold">Edit</b>.
</p>
<a name="wp1071811"></a><p class="pSB_StepBody">
The Resource Rule dialog box appears.
</p>
<a name="wp1066852"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />For each rule type, enter a new number or choose <b class="cBold">default</b> or <b class="cBold">max</b> from the drop-down list.
</p>
<a name="wp1066861"></a><p class="pSB_StepBody">
The default and max options set the number of rules to the default or maximum setting. The default and max numbers depend on the number of partitions you set, and each partition size. If you choose the max option, be sure to set other features lower to accommodate this value. You cannot leave the other feature values at default if you set one or more features to max; you need to manually decrease the value of one or more features to accomodate the increase in the feature you set to max.
</p>
<a name="wp1066637"></a><p class="pSN_StepNext">
<b>Step&#160;5	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Apply</b>.
</p>
<a name="wp1066638"></a><p class="pSB_StepBody">
These settings take effect immediately when you Apply; you do not need to reload the FWSM.
</p>
<hr class="Cautn1table"/><a name="wp1066639"></a><a name="Configuring_Resource_Classes"> </a>

<a name="wp1061269"></a><a name="wpxref89757"></a><h2 class="p_H_Head1">
Configuring Resource Classes
</h2>

<a name="wp1061273"></a><a name="wpxref46980"></a><p class="pB1_Body1">
By default, all security contexts have unlimited access to the resources of the FWSM, except where maximum limits per context are enforced. However, if you find that one or more contexts use too many resources, and they cause other contexts to be denied connections, for example, then you can configure resource management to limit the use of resources per context. The FWSM manages resources by assigning contexts to resource classes. Each context uses the resource limits set by the class.
</p>
<div class="Note1B"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Cautn1table" />
<a name="wp1061285"></a><a name="wpmkr1061281"></a><p class="pN1_Note1">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="1" height="2" border="0" />The FWSM does not limit the bandwidth per context; however, the switch containing the FWSM can limit bandwidth per VLAN. See the switch documentation for more information.
</p>
<hr class="Cautn1table" /><a name="wp1061286"></a><p class="pB1_Body1">
This section contains the following topics:
</p>
<a name="wp1061290"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061296">Classes and Class Members Overview</a>
</p>
<a name="wp1061294"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1045496">Adding a Resource Class</a>
</p>

<a name="Classes_and_Class_Members_Overview"> </a>

<a name="wp1061296"></a><a name="wpxref17420"></a><h3 class="p_H_Head2">
Classes and Class Members Overview
</h3>
<a name="wp1061300"></a><p class="pB1_Body1">
The FWSM manages resources by assigning contexts to resource classes. Each context uses the resource limits set by the class. This section includes the following topics:
</p>
<a name="wp1061304"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061317">Resource Limits Overview</a>
</p>
<a name="wp1061308"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061353">Default Class Overview</a>
</p>
<a name="wp1061312"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><a href="#wp1061367">Class&#160;Members Overview</a>
</p>

<a name="Resource_Limits_Overview"> </a>

<a name="wp1061317"></a><a name="wpxref69510"></a><a name="wpxref53037"></a><a name="wpmkr1061315"></a><a name="wpmkr1061316"></a><h3 class="p_H_Head3">
Resource Limits Overview
</h3>
<a name="wp1061321"></a><p class="pB1_Body1">
When you create a class, the FWSM does not set aside a portion of the resources for each context assigned to the class; rather, the FWSM sets the maximum limit for a context. If you oversubscribe resources, or allow some resources to be unlimited, a few contexts can &quot;use up&quot; those resources, potentially affecting service to other contexts.
</p>
<a name="wp1061325"></a><p class="pB1_Body1">
You can set the limit for all resources together as a percentage of the total available for the device. Also, you can set the limit for individual resources as a percentage or as an absolute value.
</p>
<a name="wp1061332"></a><a name="wpmkr1061326"></a><a name="wpmkr1061327"></a><a name="wpmkr1061328"></a><p class="pB1_Body1">
You can oversubscribe the FWSM by assigning more than 100 percent of the resources across all contexts. For example, you can set the Bronze class to limit connections to 20 percent per context, and then assign 10 contexts to the class for a total of 200 percent. If contexts concurrently use more than the system limit, then each context gets less than the 20 percent you intended. (See the following figure.)
</p>
<a name="wp1061337"></a><a name="wpxref42074"></a><p class="pAnchor">
</p>
<div align="left"><img src="../../../../../../i/100001-200000/100001-110000/104001-105000/104895.jpg" id="wp1061335" border="0" hspace="0" vspace="0"/></div><p class="pAnchor">

</p>
<a name="wp1061342"></a><a name="wpmkr1061341"></a><p class="pB1_Body1">
The FWSM lets you assign unlimited access to one or more resources in a class, instead of a percentage or absolute number. When a resource is unlimited, contexts can use as much of the resource as the system has available. For example, Context A, B, and C are in the Silver Class, which limits each class member to 1 percent of the system inspections per second, for a total of 3 percent; but the three contexts are currently only using 2 percent combined. Gold Class has unlimited access to inspections. The contexts in the Gold Class can use more than the 97 percent of &quot;unassigned&quot; inspections; they can also use the 1&#160;percent of inspections not currently in use by Context A, B, and C, even if that means that Context A, B, and C are unable to reach their 3 percent combined limit. (See the following figure.) Setting unlimited access is similar to oversubscribing the FWSM, except that you have less control over how much you oversubscribe the system.
</p>
<a name="wp1061349"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/100001-200000/100001-110000/104001-105000/104896.jpg" id="wp1061347" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>

<a name="Default_Class_Overview"> </a>

<a name="wp1061353"></a><a name="wpxref40167"></a><a name="wpmkr1061351"></a><a name="wpmkr1061352"></a><h3 class="p_H_Head3">
Default Class Overview
</h3>
<a name="wp1061354"></a><p class="pB1_Body1">
All contexts belong to the default class if they are not assigned to another class; you do not have to actively assign a context to the default class.
</p>
<a name="wp1061355"></a><p class="pB1_Body1">
If a context belongs to a class other than the default class, those class settings always override the default class settings. However, if the other class has any settings that are not defined, then the member context uses the default class for those limits. For example, if you create a class with a 2 percent limit for all concurrent connections, but no other limits, then all other limits are inherited from the default class. Conversely, if you create a class with a 2 percent limit for <em class="cEmphasis">all</em> resources, the class uses no settings from the default class.
</p>
<a name="wp1061356"></a><p class="pB1_Body1">
By default, the default class provides unlimited access to resources for all contexts, except for the following limits, which are by default set to the maximum allowed per context:
</p>
<a name="wp1061357"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Telnet sessions&#8212;5 sessions.
</p>
<a name="wp1061358"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />SSH sessions&#8212;5 sessions.
</p>
<a name="wp1061359"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />IPSec sessions&#8212;5 sessions.
</p>
<a name="wp1061360"></a><p class="pBu1_Bullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />MAC addresses&#8212;65,535 entries.
</p>
<a name="wp1061361"></a><p class="pB1_Body1">
The following figure shows the relationship between the default class and other classes. Contexts A and C belong to classes with some limits set; other limits are inherited from the default class. Context B inherits no limits from default because all limits are set in its class, the Gold class. Context D was not assigned to a class, and is by default a member of the default class.
</p>
<a name="wp1061365"></a><p class="pGraphicAnchor">
</p>
<div align="left"><img src="../../../../../../i/100001-200000/100001-110000/104001-105000/104689.jpg" id="wp1061363" border="0" hspace="0" vspace="0"/></div><p class="pGraphicAnchor">

</p>

<a name="Class_Members_Overview"> </a>

<a name="wp1061367"></a><a name="wpxref89110"></a><h3 class="p_H_Head3">
Class&#160;Members Overview
</h3>
<a name="wp1061368"></a><p class="pB1_Body1">
To use the settings of a class, assign the context to the class when you define the context. All contexts belong to the default class if they are not assigned to another class; you do not have to actively assign a context to default. You can only assign a context to one resource class. The exception to this rule is that limits that are undefined in the member class are inherited from the default class; so in effect, a context could be a member of default plus another class.
</p>

<a name="Adding_a_Resource_Class"> </a>

<a name="wp1045496"></a><a name="wpxref17241"></a><h3 class="p_H_Head2">
Adding a Resource Class
</h3>
<a name="wp1045514"></a><p class="pB1_Body1">
To add a resource class, perform the following steps:
</p>
<hr noshade />
<a name="wp1050904"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />If you are not already in the System configuration mode, in the Device List pane, double-click <b class="cBold">System</b> under the active device IP address.
</p>
<a name="wp1050905"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />On the Context Management &gt; Resource Class pane, click <b class="cBold">Add</b>.
</p>
<a name="wp1050961"></a><p class="pSB_StepBody">
The Add Resource Class dialog box appears.
</p>
<a name="wp1050943"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Resource Class field, enter a class name up to 20 characters in length.
</p>
<a name="wp1050991"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Count Limited Resources area, set the concurrent limits for resources.
</p>
<a name="wp1051003"></a><p class="pSB_StepBody">
For resources that do not have a system limit, you cannot set the percentage; you can only set an absolute value. If you do not set a limit, the limit is inherited from the default class. If the default class does not set a limit, then the resource is unlimited, or the system limit if available.
</p>
<a name="wp1051069"></a><p class="pSB_StepBody">
You can set one or more of the following limits:
</p>
<a name="wp1051007"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Hosts&#8212;Sets the limit for concurrent hosts that can connect through the FWSM. Select the check box to enable this limit. If you set the limit to 0, it is unlimited.
</p>
<a name="wp1051008"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Telnet&#8212;Sets the limit for concurrent Telnet sessions. Select the check box to enable this limit. You can set the limit as a percentage by entering any integer greater than 1 and selecting <b class="cBold">Percent</b> from the list. You can assign more than 100 percent if you want to oversubscribe the device. Or you can set the limit as an absolute value by entering an integer between 1 and 5 and selecting <b class="cBold">Absolute</b> from the list. The system has a maximum of 100 sessions divided between all contexts.
</p>
<a name="wp1051012"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />ASDM Sessions&#8212;Sets the limit for concurrent ASDM sessions. Select the check box to enable this limit. You can set the limit as a percentage by entering any integer greater than 1 and selecting <b class="cBold">Percent</b> from the list. You can assign more than 100 percent if you want to oversubscribe the device. Or you can set the limit as an absolute value by entering an integer between 1 and 5 and selecting <b class="cBold">Absolute</b> from the list. The system has a maximum of 80 sessions divided between all contexts. ASDM sessions use two HTTPS connections: one for monitoring that is always present, and one for making configuration changes that is present only when you make changes. For example, the system limit of 32 ASDM sessions represents a limit of 64&#160;HTTPS sessions, divided between all contexts.
</p>
<a name="wp1051019"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Connections&#8212;Sets the limit for concurrent TCP or UDP connections between any two hosts, including connections between one host and multiple other hosts. Select the check box to enable this limit. You can set the limit as a percentage by entering any integer greater than 1 and selecting <b class="cBold">Percent</b> from the list. You can assign more than 100 percent if you want to oversubscribe the device. Or you can set the limit as an absolute value by entering an integer between 0 (system limit) and the system limit for your model, and selecting <b class="cBold">Absolute</b> from the list. See the <em class="cEmphasis">Release Notes for Cisco&#160;ASDM</em> for the connection limit for your model.
</p>
<a name="wp1051023"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Xlates&#8212;Sets the limit for address translations. Select the check box to enable this limit. If you set the limit to 0, it is unlimited.
</p>
<a name="wp1051024"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />SSH&#8212;Sets the limit for SSH sessions. Select the check box to enable this limit. You can set the limit as a percentage by entering any integer greater than 1 and selecting <b class="cBold">Percent</b> from the list. You can assign more than 100 percent if you want to oversubscribe the device. Or you can set the limit as an absolute value by entering an integer between 1 and 5 and selecting <b class="cBold">Absolute</b> from the list. The system has a maximum of 100 sessions divided between all contexts.
</p>
<a name="wp1051025"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />MAC Entries&#8212;(Transparent mode only) Sets the limit for MAC address entries in the MAC address table. Select the check box to enable this limit. You can set the limit as a percentage by entering any integer greater than 1 and selecting <b class="cBold">Percent</b> from the list. You can assign more than 100 percent if you want to oversubscribe the device. Or you can set the limit as an absolute value by entering an integer between 0 (system limit) and 65535 and selecting <b class="cBold">Absolute</b> from the list.
</p>
<a name="wp1051026"></a><p class="pSN_StepNext">
<b>Step&#160;5	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Rate Limited Resources area, set the rate limit for resources.
</p>
<a name="wp1051132"></a><p class="pSB_StepBody">
If you do not set a limit, the limit is inherited from the default class. If the default class does not set a limit, then it is unlimited by default.
</p>
<a name="wp1051140"></a><p class="pSB_StepBody">
You can set one or more of the following limits:
</p>
<a name="wp1051027"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Conns/sec&#8212;Sets the limit for connections per second. Select the check box to enable this limit. If you set the limit to 0, it is unlimited.
</p>
<a name="wp1051028"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Syslogs/sec&#8212;Sets the limit for system log messages per second. Select the check box to enable this limit. If you set the limit to 0, it is unlimited.
</p>
<a name="wp1051029"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" />Inspects/sec&#8212;Sets the limit for application inspections per second. Select the check box to enable this limit. If you set the limit to 0, it is unlimited.
</p>
<a name="wp1051001"></a><p class="pSN_StepNext">
<b>Step&#160;6	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">OK</b>.
</p>
<hr class="Cautn1table"/><a name="wp1053830"></a>
<a name="Monitoring_Context_Resource_Usage______"> </a>

<a name="wp1053841"></a><a name="wpxref29445"></a><h3 class="p_H_Head2">
Monitoring Context Resource Usage&#160;&#160;&#160;&#160;&#160;&#160;&#160;
</h3>
<a name="wp1053842"></a><p class="pB1_Body1">
To monitor resource usage of all contexts from the system execution space, perform the following steps:
</p>
<hr noshade />
<a name="wp1053019"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />If you are not already in the System mode, in the Device List pane, double-click <b class="cBold">System</b> under the active device IP address.
</p>
<a name="wp1052983"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click the <b class="cBold">Monitoring</b> button on the toolbar.
</p>
<a name="wp1053091"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Context Resource Usage</b>.
</p>
<a name="wp1052975"></a><p class="pSB_StepBody">
Click each resource type to view the resource usage for all contexts:
</p>
<a name="wp1053149"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">ASDM</b>&#8212;Shows the usage of ASDM connections.
</p>
<a name="wp1052773"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1052897"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (#)&#8212;Shows the number of existing connections.
</p>
<a name="wp1052880"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (%)&#8212;Shows the connections used by this context as a percentage of the total number of connections used by all contexts.
</p>
<a name="wp1052887"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak Connections (#)&#8212;Shows the peak number of connections since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1052898"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">Telnet</b>&#8212;Shows the usage of Telnet connections.
</p>
<a name="wp1053340"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1053341"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (#)&#8212;Shows the number of existing connections.
</p>
<a name="wp1053342"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (%)&#8212;Shows the connections used by this context as a percentage of the total number of connections used by all contexts.
</p>
<a name="wp1053343"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak Connections (#)&#8212;Shows the peak number of connections since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1053186"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">SSH</b>&#8212;Shows the usage of SSH connections.
</p>
<a name="wp1053392"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1053393"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (#)&#8212;Shows the number of existing connections.
</p>
<a name="wp1053394"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Existing Connections (%)&#8212;Shows the connections used by this context as a percentage of the total number of connections used by all contexts.
</p>
<a name="wp1053395"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak Connections (#)&#8212;Shows the peak number of connections since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1053195"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">Xlates</b>&#8212;Shows the usage of netword address translations.
</p>
<a name="wp1053414"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1052911"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Xlates (#)&#8212;Shows the number of current xlates.
</p>
<a name="wp1052923"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Xlates (%)&#8212;Shows the xlates used by this context as a percentage of the total number of xlates used by all contexts.
</p>
<a name="wp1052935"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak (#)&#8212;Shows the peak number of xlates since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1052936"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">NATs&#8212;</b>Shows the number of NAT rules.
</p>
<a name="wp1053421"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1052945"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />NATs (#)&#8212;Shows the current number of NAT rules.
</p>
<a name="wp1052946"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />NATs (%)&#8212;Shows the NAT rules used by this context as a percentage of the total number of NAT rules used by all contexts.
</p>
<a name="wp1052947"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak NATs (#)&#8212;Shows the peak number of NAT rules since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1052948"></a><p class="pSBu1_StepBullet1">
&#8226;<img src="../../../../../../i/templates/blank.gif" alt="" width="19" height="2" border="0" /><b class="cBold">Syslogs</b>&#8212;Shows the rate of system log messages.
</p>
<a name="wp1053428"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Context&#8212;Shows the name of each context.
</p>
<a name="wp1052949"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Syslog Rate (#/sec)&#8212;Shows the current rate of system log messages.
</p>
<a name="wp1052950"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Syslog Rate (%)&#8212;Shows the system log messages generated by this context as a percentage of the total number of system log messages generated by all contexts.
</p>
<a name="wp1052966"></a><p class="pSBu2_StepBullet2">
&#8211;<img src="../../../../../../i/templates/blank.gif" alt="" width="17" height="2" border="0" />Peak Syslog Rate (#/sec)&#8212;Shows the peak rate of system log messages since the statistics were last cleared, either using the <b class="cBold">clear resource usage </b>command or because the device rebooted.
</p>
<a name="wp1053434"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">Refresh</b> to refresh the view.
</p>
<hr class="Cautn1table"/><a name="wp1053440"></a><a name="Configuring_Security_Contexts"> </a>

<a name="wp1043858"></a><a name="wpxref62321"></a><h2 class="p_H_Head1">
Configuring Security Contexts
</h2>

<a name="wp1051299"></a><p class="pB1_Body1">
To add a security context, perform the following steps:
</p>
<hr noshade />
<a name="wp1051412"></a><p class="pSF_StepFirst">
<b>Step&#160;1	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />If you are not already in the System configuration mode, in the Device List pane, double-click <b class="cBold">System</b> under the active device IP address.
</p>
<a name="wp1051413"></a><p class="pSN_StepNext">
<b>Step&#160;2	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />On the Context Management &gt; Security Contexts pane, click <b class="cBold">Add</b>.
</p>
<a name="wp1051414"></a><p class="pSB_StepBody">
The Add Context dialog box appears.
</p>
<a name="wp1051443"></a><p class="pSN_StepNext">
<b>Step&#160;3	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Security Context field, enter the context name as a string up to 32 characters long.
</p>
<a name="wp1051833"></a><p class="pSB_StepBody">
This name is case sensitive, so you can have two contexts named &quot;customerA&quot; and &quot;CustomerA,&quot; for example. &quot;System&quot; or &quot;Null&quot; (in upper or lower case letters) are reserved names, and cannot be used.
</p>
<a name="wp1051358"></a><p class="pSN_StepNext">
<b>Step&#160;4	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />In the Interface Allocation area, click the <b class="cBold">Add</b> button to assign an interface to the context.
</p>
<a name="wp1052034"></a><p class="pSN_StepNext">
<b>Step&#160;5	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />From the Interfaces &gt; Physical Interface drop-down list, choose an interface.
</p>
<a name="wp1052047"></a><p class="pSB_StepBody">
You can assign the main interface, in which case you leave the subinterface ID blank, or you can assign a subinterface or a range of subinterfaces associated with this interface. In transparent firewall mode, only interfaces that have not been allocated to other contexts are shown. If the main interface was already assigned to another context, then you must choose a subinterface.
</p>
<a name="wp1051994"></a><p class="pSN_StepNext">
<b>Step&#160;6	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) In the Interfaces &gt; Subinterface Range (optional) drop-down list, choose a subinterface ID.
</p>
<a name="wp1052102"></a><p class="pSB_StepBody">
For a range of subinterface IDs, choose the ending ID in the second drop-down list, if available.
</p>
<a name="wp1052109"></a><p class="pSB_StepBody">
In transparent firewall mode, only subinterfaces that have not been allocated to other contexts are shown.
</p>
<a name="wp1051995"></a><p class="pSN_StepNext">
<b>Step&#160;7	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) In the Aliased Names area, check <b class="cBold">Use</b> <b class="cBold">Aliased Name in Context </b>to set an aliased name for this interface to be used in the context configuration instead of the interface ID.
</p>
<a name="wp1051997"></a><p class="pSsF_StepsubFirst">
<b>	a.	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="10" height="2" border="0" />In the Name field, sets the aliased name.
</p>
<a name="wp1052148"></a><p class="pB2_Body2">
An aliased name must start with a letter, end with a letter, and have as interior characters only letters, digits, or an underscore. This field lets you specify a name that ends with a letter or underscore; to add an optional digit after the name, set the digit in the Range field.
</p>
<a name="wp1052154"></a><p class="pSsN_StepsubNext">
<b>	b.	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="10" height="2" border="0" />(Optional) In the Range field, set the numeric suffix for the aliased name.
</p>
<a name="wp1052158"></a><p class="pB2_Body2">
If you have a range of subinterfaces, you can enter a range of digits to be appended to the name.
</p>
<a name="wp1052178"></a><p class="pSN_StepNext">
<b>Step&#160;8	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) To enable context users to see physical interface properties even if you set an aliased name, check <b class="cBold">Show Hardware Properties in Context</b>.
</p>
<a name="wp1051986"></a><p class="pSN_StepNext">
<b>Step&#160;9	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />Click <b class="cBold">OK</b> to return to the Add Context dialog box.
</p>
<a name="wp1052200"></a><p class="pSN_StepNext">
<b>Step&#160;10	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) To assign this context to a resource class, choose a class name from the Resource Assignment&#160;&gt;&#160;Resource Class drop-down list.
</p>
<a name="wp1052246"></a><p class="pSB_StepBody">
You can add or edit a resource class directly from this area. See the <a href="#wp1061269">"Configuring Resource Classes" section</a> for more information.
</p>
<a name="wp1065705"></a><p class="pSN_StepNext">
<b>Step&#160;11	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) To map a context to a specific memory partition, choose a partition number from the Resource Assignment &gt; ACL Partition drop-down list.
</p>
<a name="wp1065721"></a><p class="pSB_StepBody">
See the <a href="#wp1064257">"Setting the Number of Memory Partitions" section</a> to configure the number of memory partitions.
</p>
<a name="wp1067084"></a><p class="pSB_StepBody">
When you assign a context to a partition, then the partition becomes <em class="cEmphasis">exclusive</em>. An exclusive partition only includes contexts that you specifically assign to it. Partitions that do not have contexts specifically assigned to them are non-exclusive and contexts are allocated to them in a round-robin fashion.
</p>
<div class="Note2"><img src="../../../../../../i/templates/note.gif" alt="" /></div><hr class="Note2" />
<a name="wp1065690"></a><p class="pN2_Note2">
<b>Note	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="6" height="2" border="0" />If you assign contexts to all partitions, then they are all exclusive. However, if you later add a context that is not assigned to a partition, then contexts are allocated to exclusive partitions in a round-robin fashion, and the first best-fit exclusive partition available  is used for the allocation of the new context. However, if none of the exclusive partitions can accommodate the rules of the new context, then  it is assigned to partition 0 by default, even though partition 0 also cannot accommodate the context rules. The context rules will not load completely, so you need to manually adjust the way contexts are assigned tomake room.
</p>
<hr class="Note2" /><a name="wp1052227"></a><p class="pSN_StepNext">
<b>Step&#160;12	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />To set the context configuration location, identify the URL by choosing a file system type from the Config URL drop-down list and entering a path in the field.
</p>
<a name="wp1052285"></a><p class="pSB_StepBody">
For example, the combined URL for FTP has the following format:
</p>
<a name="wp1051370"></a><p class="pSB_StepBody">
ftp://server.example.com/configs/admin.cfg
</p>
<a name="wp1052314"></a><p class="pSN_StepNext">
<b>Step&#160;13	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) For external filesystems, set the username and password by clicking <b class="cBold">Login</b>.
</p>
<a name="wp1052336"></a><p class="pSN_StepNext">
<b>Step&#160;14	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) To set the failover group for active/active failover, choose the group name in the Failover Group drop-down list.
</p>
<a name="wp1052361"></a><p class="pSN_StepNext">
<b>Step&#160;15	</b><img src="../../../../../../i/templates/blank.gif" alt="" width="5" height="2" border="0" />(Optional) Add a description in the Description field.
</p>
<hr class="Cautn1table"/><a name="wp1061960"></a><a name="wp1051457"></a><a name="wpxref78904"></a><p class="pB1_Body1">

</p>
</blockquote>

    <hr noshade />
  </span></div>
		
		
		
		
		
	</div>
    </td>
  </tr>
  <tr align="left" valign="top">
    <td><div class="left-col-min-width"><wbr/></div></td>
    <td><div class="footer"><div id="footer-legal"><a href="/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
     <a href="/web/siteassets/legal/privacy.html">Privacy Statement</a> |
     <a href="/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
     <a href="/web/siteassets/legal/trademark.html">Trademarks</a></div></div>
        
        
		<div class="right-col-min-width"><wbr/></div></td>
  </tr>
</table>
</body>
</html>
