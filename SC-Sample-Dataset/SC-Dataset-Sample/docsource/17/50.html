<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />

<title>www.genady.net &bull; View topic - class mismatch in the rmi registry</title>



<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.genady.net';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	};

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	};

// ]]>
</script>
<script type="text/javascript" src="./styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="./styles/prosilver/template/forum_fn.js"></script>

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="./style.php?id=1&amp;lang=en&amp;sid=d4541c07dab1506043119d8684481b69" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />



</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="./index.php?sid=d4541c07dab1506043119d8684481b69" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="149" height="52" alt="" title="" /></a>
				<h1>www.genady.net</h1>
				<p>RMI Plugin for Eclipse Forums</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

		
			<div id="search-box">
				<form action="./search.php?sid=d4541c07dab1506043119d8684481b69" method="get" id="search">
				<fieldset>
					<input name="keywords" id="keywords" type="text" maxlength="128" title="Search for keywords" class="inputbox search" value="Search…" onclick="if(this.value=='Search…')this.value='';" onblur="if(this.value=='')this.value='Search…';" />
					<input class="button2" value="Search" type="submit" /><br />
					<a href="./search.php?sid=d4541c07dab1506043119d8684481b69" title="View the advanced search options">Advanced search</a> <input type="hidden" name="sid" value="d4541c07dab1506043119d8684481b69" />

				</fieldset>
				</form>
			</div>
		

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="./index.php?sid=d4541c07dab1506043119d8684481b69" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="./viewforum.php?f=7&amp;sid=d4541c07dab1506043119d8684481b69">RMI Plugin for Eclipse</a> <strong>&#8249;</strong> <a href="./viewforum.php?f=4&amp;sid=d4541c07dab1506043119d8684481b69">RMI FAQ</a></li>

				<li class="rightside"><a href="#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="./viewtopic.php?f=4&amp;t=293&amp;sid=d4541c07dab1506043119d8684481b69&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="./faq.php?sid=d4541c07dab1506043119d8684481b69" title="Frequently Asked Questions">FAQ</a></li>
				
					<li class="icon-logout"><a href="./ucp.php?mode=login&amp;sid=d4541c07dab1506043119d8684481b69" title="Login" accesskey="x">Login</a></li>
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>

	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
<h2><a href="./viewtopic.php?f=4&amp;t=293&amp;sid=d4541c07dab1506043119d8684481b69">class mismatch in the rmi registry</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">This is the place where you can find answers to the most frequently asked questions<br /></div>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="./posting.php?mode=reply&amp;f=4&amp;t=293&amp;sid=d4541c07dab1506043119d8684481b69" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="get" id="topic-search" action="./search.php?sid=d4541c07dab1506043119d8684481b69">
			<fieldset>
				<input class="inputbox search tiny"  type="text" name="keywords" id="search_keywords" size="20" value="Search this topic…" onclick="if(this.value=='Search this topic…')this.value='';" onblur="if(this.value=='')this.value='Search this topic…';" />
				<input class="button2" type="submit" value="Search" />
				<input type="hidden" name="t" value="293" />
<input type="hidden" name="sf" value="msgonly" />
<input type="hidden" name="sid" value="d4541c07dab1506043119d8684481b69" />

			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			1 post
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p812" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p812">class mismatch in the rmi registry</a></h3>
			<p class="author"><a href="./viewtopic.php?p=812&amp;sid=d4541c07dab1506043119d8684481b69#p812"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="./memberlist.php?mode=viewprofile&amp;u=2&amp;sid=d4541c07dab1506043119d8684481b69" style="color: #AA0000;" class="username-coloured">genady</a></strong> &raquo; Mon Oct 02, 2006 8:39 am </p>

			

			<div class="content">When running your RMI server you might encounter an exception like this:
<br />
<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>Something wrong happended on the remote end<br />java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: <br />&nbsp; &nbsp;java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: <br />&nbsp; &nbsp;java.io.InvalidClassException: demo.rmi.print.server.RemotePrinterImpl_Stub; local class incompatible: stream classdesc serialVersionUID = 8288387309612909400, local class serialVersionUID = 2<br />&nbsp; &nbsp;at sun.rmi.server.UnicastServerRef.oldDispatch&#40;UnicastServerRef.java:385&#41;<br />&nbsp; &nbsp;at sun.rmi.server.UnicastServerRef.dispatch&#40;UnicastServerRef.java:240&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.Transport$1.run&#40;Transport.java:153&#41;<br />&nbsp; &nbsp;at java.security.AccessController.doPrivileged&#40;Native Method&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.Transport.serviceCall&#40;Transport.java:149&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.tcp.TCPTransport.handleMessages&#40;TCPTransport.java:466&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run&#40;TCPTransport.java:707&#41;<br />&nbsp; &nbsp;at java.lang.Thread.run&#40;Thread.java:595&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer&#40;StreamRemoteCall.java:247&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.StreamRemoteCall.executeCall&#40;StreamRemoteCall.java:223&#41;<br />&nbsp; &nbsp;at sun.rmi.server.UnicastRef.invoke&#40;UnicastRef.java:343&#41;<br />&nbsp; &nbsp;at sun.rmi.registry.RegistryImpl_Stub.rebind&#40;Unknown Source&#41;<br />&nbsp; &nbsp;at demo.rmi.print.server.RemotePrinterImpl.main&#40;RemotePrinterImpl.java:119&#41;<br />&nbsp; &nbsp;at sun.reflect.NativeMethodAccessorImpl.invoke0&#40;Native Method&#41;<br />&nbsp; &nbsp;at sun.reflect.NativeMethodAccessorImpl.invoke&#40;NativeMethodAccessorImpl.java:39&#41;<br />&nbsp; &nbsp;at sun.reflect.DelegatingMethodAccessorImpl.invoke&#40;DelegatingMethodAccessorImpl.java:25&#41;<br />&nbsp; &nbsp;at java.lang.reflect.Method.invoke&#40;Method.java:585&#41;<br />&nbsp; &nbsp;at net.genady.rmi.logger.Runner.main&#40;Runner.java:137&#41;<br />Caused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: <br />&nbsp; &nbsp;java.io.InvalidClassException: demo.rmi.print.server.RemotePrinterImpl_Stub; local class incompatible: stream classdesc serialVersionUID = 8288387309612909400, local class serialVersionUID = 2<br />&nbsp; &nbsp;at sun.rmi.registry.RegistryImpl_Skel.dispatch&#40;Unknown Source&#41;<br />&nbsp; &nbsp;at sun.rmi.server.UnicastServerRef.oldDispatch&#40;UnicastServerRef.java:375&#41;<br />&nbsp; &nbsp;at sun.rmi.server.UnicastServerRef.dispatch&#40;UnicastServerRef.java:240&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.Transport$1.run&#40;Transport.java:153&#41;<br />&nbsp; &nbsp;at java.security.AccessController.doPrivileged&#40;Native Method&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.Transport.serviceCall&#40;Transport.java:149&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.tcp.TCPTransport.handleMessages&#40;TCPTransport.java:466&#41;<br />&nbsp; &nbsp;at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run&#40;TCPTransport.java:707&#41;<br />&nbsp; &nbsp;at java.lang.Thread.run&#40;Thread.java:595&#41;<br />Caused by: java.io.InvalidClassException: demo.rmi.print.server.RemotePrinterImpl_Stub; local class incompatible: stream classdesc serialVersionUID = 8288387309612909400, local class serialVersionUID = 2<br />&nbsp; &nbsp;at java.io.ObjectStreamClass.initNonProxy&#40;ObjectStreamClass.java:546&#41;<br />&nbsp; &nbsp;at java.io.ObjectInputStream.readNonProxyDesc&#40;ObjectInputStream.java:1552&#41;<br />&nbsp; &nbsp;at java.io.ObjectInputStream.readClassDesc&#40;ObjectInputStream.java:1466&#41;<br />&nbsp; &nbsp;at java.io.ObjectInputStream.readOrdinaryObject&#40;ObjectInputStream.java:1699&#41;<br />&nbsp; &nbsp;at java.io.ObjectInputStream.readObject0&#40;ObjectInputStream.java:1305&#41;<br />&nbsp; &nbsp;at java.io.ObjectInputStream.readObject&#40;ObjectInputStream.java:348&#41;<br />&nbsp; &nbsp;... 9 more<br /></code></dd></dl>
<br />
<br />A possible cause of this exception is that you've changed the RMI protocol version (from -v11 to -v12 or vice versa) when compiling the stubs, and some VMs still have the previous version of the class in memory. In this particular example, I've run the server and it has bound itself to some key in the registry. Then I removed it from the registry, regenerated the stubs with a different protocol version and ran it again. This exception is the result of a mismatch between the stub already in the registry's class cache and the new stub that I've generated for the new server version. Java detects such mismatch and produces this kind of exception.
<br />
<br />How to solve: restart the registry.
<br />The chance you see it is quite low. There is almost no reason why anybody would work with -v11 stubs today.</div>

			

		</div>

		
			<dl class="postprofile" id="profile812">
			<dt>
				<a href="./memberlist.php?mode=viewprofile&amp;u=2&amp;sid=d4541c07dab1506043119d8684481b69" style="color: #AA0000;" class="username-coloured">genady</a>
			</dt>

			<dd>Site Admin</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 397</dd><dd><strong>Joined:</strong> Sat Aug 16, 2003 5:15 pm</dd>
			<dd>
				<ul class="profile-icons">
					<li class="web-icon"><a href="http://www.genady.net/rmi/" title="WWW: http://www.genady.net/rmi/"><span>Website</span></a></li>
				</ul>
			</dd>
		

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="./posting.php?mode=reply&amp;f=4&amp;t=293&amp;sid=d4541c07dab1506043119d8684481b69" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			1 post
			 &bull; Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>


	<p></p><p><a href="./viewforum.php?f=4&amp;sid=d4541c07dab1506043119d8684481b69" class="left-box left" accesskey="r">Return to RMI FAQ</a></p>

	<form method="post" id="jumpbox" action="./viewforum.php?sid=d4541c07dab1506043119d8684481b69" onsubmit="if(this.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="7">RMI Plugin for Eclipse</option>
			
				<option value="1">&nbsp; &nbsp;General discussion and support</option>
			
				<option value="2">&nbsp; &nbsp;Bug reports</option>
			
				<option value="4" selected="selected">&nbsp; &nbsp;RMI FAQ</option>
			
				<option value="3">&nbsp; &nbsp;Feature requests</option>
			
				<option value="10">Other plugins</option>
			
				<option value="5">&nbsp; &nbsp;Generated Files Support</option>
			
				<option value="6">&nbsp; &nbsp;JDK 1.5 Plugin</option>
			
			</select>
			<input type="submit" value="Go" class="button2" />
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: No registered users and 0 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="./index.php?sid=d4541c07dab1506043119d8684481b69" accesskey="h">Board index</a></li>
				
			<li class="rightside"><a href="./memberlist.php?mode=leaders&amp;sid=d4541c07dab1506043119d8684481b69">The team</a> &bull; <a href="./ucp.php?mode=delete_cookies&amp;sid=d4541c07dab1506043119d8684481b69">Delete all board cookies</a> &bull; All times are UTC </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Group
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	<img src="./cron.php?cron_type=tidy_warnings&amp;sid=d4541c07dab1506043119d8684481b69" width="1" height="1" alt="cron" />
</div>

</body>
</html>
