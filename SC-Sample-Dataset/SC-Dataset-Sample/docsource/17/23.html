<!DOCTYPE html>
<html lang="en">
<head>
<title>[JBoss-user] [EJB/JBoss] - java.rmi.RemoteException: RemoteException occurred in server</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="contents" href="thrd15.html#69994">
<link rel="index" href="mail15.html#69994">
<link rel="prev" href="msg69993.html">
<link rel="next" href="msg69995.html">
<link rel="alternate" title="jboss-user RSS" href="#" type="application/rss+xml">
<link rel="canonical" href="https://www.mail-archive.com/jboss-user@lists.sourceforge.net/msg69994.html">
<link rel="stylesheet" href="/normalize.css" media="screen">
<link rel="stylesheet" href="/master.css" media="screen">

<!--[if lt IE 9]>
<link rel="stylesheet" href="/ie.css" media="screen">
<![endif]-->
</head>
<body>
<div itemscope itemtype="http://schema.org/Article" class="container">
<div class="skipLink">
<a href="#nav">Skip to site navigation (Press enter)</a>
</div>
<div class="content" role="main">
<div class="msgHead">
<h1>
<span class="subject"><a href="/search?l=jboss-user@lists.sourceforge.net&amp;q=subject:%22%5BJBoss-user%5D+%5BEJB%2FJBoss%5D+-+java.rmi.RemoteException%3A+RemoteException+occurred+in+server%22" rel="nofollow"><span itemprop="name">[JBoss-user] [EJB/JBoss] - java.rmi.RemoteException: RemoteException occurred in server</span></a></span>
</h1>
<p class="darkgray font13">
<span class="sender pipe"><a href="/search?l=jboss-user@lists.sourceforge.net&amp;q=from:%22Asty%22" rel="nofollow"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Asty</span></span></a></span>
<span class="date"><a href="/search?l=jboss-user@lists.sourceforge.net&amp;q=date:20050228" rel="nofollow"><span itemprop="datePublished" content="2005-02-28T21:13:24-0800">Mon, 28 Feb 2005 21:13:24 -0800</span></a></span>
</p>
</div>
<div itemprop="articleBody" class="msgBody">
<!--X-Body-of-Message-->
<pre>Hi, 
I am trying to implement a simple shopping cart using stateful Session Bean. 
I am passing an item from the client and bean is supposed to add this item in 
an ArrayList object and return this ArrayList object. 
I don't know what's going wrong. </pre><pre>

I am getting this error:

  | Adding item to cart
  | java.rmi.ServerException: RemoteException occurred in server thread; nested 
exception is: 
  |     java.rmi.ServerException: RuntimeException; nested exception is: 
  |     java.lang.ClassCastException
  |     at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:292)
  |     at sun.rmi.transport.Transport$1.run(Transport.java:148)
  |     at java.security.AccessController.doPrivileged(Native Method)
  |     at sun.rmi.transport.Transport.serviceCall(Transport.java:144)
  |     at 
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:460)
  |     at 
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:701)
  |     at java.lang.Thread.run(Thread.java:534)
  |     at 
sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:247)
  |     at 
sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:223)
  |     at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:133)
  |     at org.jboss.invocation.jrmp.server.JRMPInvoker_Stub.invoke(Unknown 
Source)
  |     at 
org.jboss.invocation.jrmp.interfaces.JRMPInvokerProxy.invoke(JRMPInvokerProxy.java:135)
  |     at 
org.jboss.invocation.InvokerInterceptor.invoke(InvokerInterceptor.java:87)
  |     at 
org.jboss.proxy.TransactionInterceptor.invoke(TransactionInterceptor.java:46)
  |     at 
org.jboss.proxy.SecurityInterceptor.invoke(SecurityInterceptor.java:45)
  |     at 
org.jboss.proxy.ejb.StatefulSessionInterceptor.invoke(StatefulSessionInterceptor.java:104)
  |     at org.jboss.proxy.ClientContainer.invoke(ClientContainer.java:85)
  |     at $Proxy1.addToCart(Unknown Source)
  |     at cart.client.ShoppingCartClient.testBean(ShoppingCartClient.java:54)
  |     at cart.client.ShoppingCartClient.main(ShoppingCartClient.java:95)
  | Caused by: java.rmi.ServerException: RuntimeException; nested exception is: 
  |     java.lang.ClassCastException
  |     at 
org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:360)
  |     at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:195)
  |     at 
org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:122)
  |     at 
org.jboss.ejb.StatefulSessionContainer.internalInvoke(StatefulSessionContainer.java:410)
  |     at org.jboss.ejb.Container.invoke(Container.java:674)
  |     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  |     at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  |     at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  |     at java.lang.reflect.Method.invoke(Method.java:324)
  |     at 
org.jboss.mx.capability.ReflectedMBeanDispatcher.invoke(ReflectedMBeanDispatcher.java:284)
  |     at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:549)
  |     at 
org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:359)
  |     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  |     at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  |     at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  |     at java.lang.reflect.Method.invoke(Method.java:324)
  |     at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:261)
  |     at sun.rmi.transport.Transport$1.run(Transport.java:148)
  |     at java.security.AccessController.doPrivileged(Native Method)
  |     at sun.rmi.transport.Transport.serviceCall(Transport.java:144)
  |     at 
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:460)
  |     at 
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:701)
  |     at java.lang.Thread.run(Thread.java:534)
  | Caused by: java.lang.ClassCastException
  |     at cart.sessionbean.MyCartEJBSession.getDao(MyCartEJBSession.java:44)
  |     at cart.sessionbean.MyCartEJBSession.addToCart(MyCartEJBSession.java:56)
  |     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  |     at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  |     at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  |     at java.lang.reflect.Method.invoke(Method.java:324)
  |     at 
org.jboss.ejb.StatefulSessionContainer$ContainerInterceptor.invoke(StatefulSessionContainer.java:878)
  |     at 
org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:117)
  |     at 
org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:186)
  |     at 
org.jboss.ejb.plugins.StatefulSessionInstanceInterceptor.invoke(StatefulSessionInstanceInterceptor.java:271)
  |     at 
org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:84)
  |     at 
org.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:243)
  |     at 
org.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:104)
  |     at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:191)
  |     ... 21 more
  | 

And this is the client code:

  | package cart.client;
  | 
  | import java.rmi.RemoteException;
  | import java.util.Hashtable;
  | import java.util.ArrayList;
  | import javax.ejb.CreateException;
  | import javax.naming.InitialContext;
  | import javax.naming.NamingException;
  | import javax.rmi.*;
  | import cart.sessionbean.dao.CartContents;
  | import cart.sessionbean.*;
  | /**
  |  * @author Abhishek
  |  *
  |  * To change the template for this generated type comment go to
  |  * Window&gt;Preferences&gt;Java&gt;Code Generation&gt;Code and Comments
  |  */
  | public class ShoppingCartClient {
  | 
  |     CartContents cartObject=new CartContents();
  |     ArrayList resultCart=new ArrayList();
  |     int size=0;
  |     
  |     private cart.sessionbean.MyCartEJBHome getHome() throws NamingException 
{
  |             Object ref= 
getContext().lookup(cart.sessionbean.MyCartEJBHome.JNDI_NAME);
  |             MyCartEJBHome mycart 
=(cart.sessionbean.MyCartEJBHome)PortableRemoteObject.narrow(ref,MyCartEJBHome.class);
  |             return mycart;
  |     }
  |     private InitialContext getContext() throws NamingException {
  |             Hashtable props = new Hashtable();
  | 
  |             props.put(
  |                     InitialContext.INITIAL_CONTEXT_FACTORY,
  |                     &quot;org.jnp.interfaces.NamingContextFactory&quot;);
  |             props.put(InitialContext.PROVIDER_URL, &quot;jnp://127.0.0.1:1099&quot;);
  | 
  |             InitialContext initialContext = new InitialContext(props);
  |             return initialContext;
  |     }
  |     public void testBean() {
  | 
  |             try {
  |                     cart.sessionbean.MyCartEJB myBean = 
getHome().create(resultCart);
  | 
  |                     //--------------------------------------
  |                     //This is the place you make your calls.
  |                     System.out.println(&quot;Adding item to cart&quot;);
  |                     resultCart=myBean.addToCart(&quot;id001&quot;,1);
  |                     System.out.println(&quot;Going to Sleep for 1 min 
......................... &quot; );
  |             Thread.sleep(60000); // sleep for 1 minute.
  |                     //System.out.println(&quot;Reply from bean after 1min  &quot; + 
myBean.getMyCart());
  |                     resultCart=myBean.getMyCart();
  |                     size=resultCart.size();
  |                     for(int i=0;i&lt;size;i++)
  |                     {
  |                             cartObject=(CartContents)resultCart.get(i);
  |                             System.out.println(cartObject.getItemid());
  |                             System.out.println(cartObject.getQuantity());
  |                             
  |                     }
  |                     
  |                     System.out.println(&quot;Going to Sleep for 1 min 
......................... &quot; );
  |                     Thread.sleep(60000); 
  |                     System.out.println(&quot;Adding item to cart&quot;);
  |                     resultCart=myBean.addToCart(&quot;id002&quot;,2);
  |                     resultCart=myBean.getMyCart();
  |                     for(int i=0;i&lt;size;i++)
  |                     {
  |                                     
cartObject=(CartContents)resultCart.get(i);
  |                                     
System.out.println(cartObject.getItemid());
  |                                     
System.out.println(cartObject.getQuantity());
  |                             
  |                     }
  | 
  |             } catch (RemoteException e) {
  |                     e.printStackTrace();
  |             } catch (CreateException e) {
  |                     e.printStackTrace();
  |             } catch (NamingException e) {
  |                     e.printStackTrace();
  |             } catch (InterruptedException e)
  |             {
  |                     
  |             }
  |     }
  | 
  |     public static void main(String[] args) {
  |             ShoppingCartClient test = new ShoppingCartClient();
  |             test.testBean();
  | 
  |     }
  | }
  | 

Don't know what's the error. Please help me.
Thanks.
Abhishek

View the original post : 
<a  href="http://www.jboss.org/index.html?module=bb&amp;op=viewtopic&amp;p=3868318#3868318">http://www.jboss.org/index.html?module=bb&amp;op=viewtopic&amp;p=3868318#3868318</a>

Reply to the post : 
<a  href="http://www.jboss.org/index.html?module=bb&amp;op=posting&amp;mode=reply&amp;p=3868318">http://www.jboss.org/index.html?module=bb&amp;op=posting&amp;mode=reply&amp;p=3868318</a>


-------------------------------------------------------
SF email is sponsored by - The IT Product Guide
Read honest &amp; candid reviews on hundreds of IT Products from real users.
Discover which products truly live up to the hype. Start reading now.
<a  href="http://ads.osdn.com/?ad_id=6595&amp;alloc_id=14396&amp;op=click">http://ads.osdn.com/?ad_id=6595&amp;alloc_id=14396&amp;op=click</a>
_______________________________________________
JBoss-user mailing list
JBoss-user@lists.sourceforge.net
<a  href="https://lists.sourceforge.net/lists/listinfo/jboss-user">https://lists.sourceforge.net/lists/listinfo/jboss-user</a>
</pre>

</div>
<div class="msgButtons margintopdouble">
<h2 class="hidden">
				Navigate to other messages
</h2>
<ul class="overflow">
<li class="msgButtonItems"><a class="button buttonleft " accesskey="p" href="msg69993.html">Previous message</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="c" href="thrd15.html#69994">View by thread</a></li>
<li class="msgButtonItems textaligncenter"><a class="button" accesskey="i" href="mail15.html#69994">View by date</a></li>
<li class="msgButtonItems textalignright"><a class="button buttonright " accesskey="n" href="msg69995.html">Next message</a></li>
</ul>
</div>
<a name="tslice"></a>
<div class="tSliceLiset margintopdouble">
<h2 class="hidden">
				Navigate to other messages within this thread
</h2>
<ul class="icons monospace">

</ul>
</div>
<div class="overflow msgActions margintopdouble">
<div class="msgReply" >
<h2>
					Reply via email to
</h2>
<form method="POST" action="/mailto.php">
<input type="HIDDEN" name="subject" value="[JBoss-user] [EJB/JBoss] - java.rmi.RemoteException: RemoteException occurred in server">
<input type="HIDDEN" name="msgid" value="26375731.1109653885448.JavaMail.jboss@colo-br-02.atl.jboss.com">
<input type="submit" value=" Asty ">
</form>
</div>
</div>
</div>
<div class="aside" role="complementary">
<div class="logo">
<a href="/"><img src="/logo.png" width=247 height=88 alt="The Mail Archive"></a>
</div>
<form class="overflow" action="/search" method="get">
<input type="hidden" name="l" value="jboss-user@lists.sourceforge.net">
<label class="hidden" for="q">Search the site</label>
<input class="submittext" type="text" id="q" name="q" placeholder="Search jboss-user">
<input class="submitbutton" name="submit" type="image" src="/submit.png" alt="Submit">
</form>
<div class="nav margintop" id="nav" role="navigation">
<h2 class="hidden">
				Site navigation
</h2>
<ul class="icons font16">
<li class="icons-home"><a href="/">The Mail Archive home</a></li>
<li class="icons-list"><a href="/jboss-user@lists.sourceforge.net/">jboss-user - all messages</a></li>
<li class="icons-about"><a href="/jboss-user@lists.sourceforge.net/info.html">jboss-user - about the list</a></li>
<li class="icons-prev"><a href="msg69993.html">Previous message</a></li>
<li class="icons-next"><a href="msg69995.html">Next message</a></li>
</ul>
</div>
<div class="listlogo margintopdouble">
<h2 class="hidden">
				Mail list logo
</h2>

</div>
<div class="bannertower margintopdouble">
<h2 class="hidden">
				Advertising banner
</h2>

</div>
</div>
</div>
<div class="footer" role="contentinfo">
<h2 class="hidden">
		Footer information
</h2>
<ul>
<li><a href="/">The Mail Archive home</a></li>
<li><a href="/faq.html#newlist">Add your mailing list</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/faq.html#support">Support</a></li>
<li><a href="/faq.html#privacy">Privacy</a></li>
</ul>
</div>
</body>
</html>
