<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="en">  <head>    <TITLE>Java > Open Source Codes > java > net > PlainSocketImpl _ Java API By Example, From Geeks To Geeks.</TITLE>    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">    <META name="description" content="Java > Open Source Codes > java > net > PlainSocketImpl">    <META name="keywords" content="Free Books,Free book,Free Computer Books,Free Computer Book,Free Tech Books,Free Tech Book, j2ee, j2ee example, j2se, j2se example, j2me, j2me example, java, java example, java api, java api example, java jobs, free java books, Free Java Downloads, free java book, java development,enterprise java, java developer,java news,java,resources,jsp,servlets,tomcat,ejb,java and xml,jdo,jdbc,sqlj,jax,jaxp,jaxm,jaxb,jax-rpc,apache,jakarta,open source,wireless java,java 2 micro edition,struts,turbine,velocity,p2p java,jxta,jini,javaspaces,waba,java phone,i-mode,palm,java media,jvm,java 2 standard edition,c#,c sharp,jboss,java book excerpts,java api map,java.net.PlainSocketImpl">    <link rel="stylesheet" type="text/css" href="/cmn/stylesheet.css" />    <link rel="stylesheet" type="text/css" href="/cmn/kickjava.css" />    <script type="text/javascript" src="/cmn/kickjava.js"></script>    <script type="text/javascript" src="/cmn/kickjava1.js"></script>  </head>  <body lang="en" onload="doBodyOnLoad();">     <script type="text/javascript">doBodyBegin();</script>     <noscript>     <BR/>      Your browser does not support JavaScript and this site utilizes JavaScript to build content and provide links to additional information. You should either enable JavaScript in your browser settings or use a browser that supports JavaScript in order to take full advantage of this site.     <BR/>     </noscript>    <div id="pageWrapper">      <table id="masthead">        <tr>          <td id="mastheadLeft" >            <A href="http://KickJava.com" target="_top"><img src="/cmn/kickjava.gif" alt="KickJava"></a>&nbsp;&nbsp;&nbsp;Java <acronym title="Application Programming Interface">API</acronym> By Example, From Geeks To Geeks.          </td>          <td id="mastheadRight">            <!-- Google CSE Search Box Begins -->            <form id="searchbox_016019849777797803616:sbkqcucs8tc" action="http://KickJava.com/cmn/googlesearch.html">              <input type="hidden" name="cx" value="016019849777797803616:sbkqcucs8tc" />              <input name="q" type="text" size="20" />                    <input type="image" src="/cmn/go.gif"  name="sa"  border="0" alt="Search Now">              <input type="hidden" name="cof" value="FORID:9" />            </form>            <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_016019849777797803616%3Asbkqcucs8tc"></script>            <!-- Google CSE Search Box Ends -->          </td>        </tr>      </table>      <div id="PageHeading" class="inside">        <h1><A HREF="/">Java</A> > <A HREF="/src">Open Source Codes</A> > <a href="/src/java.index.htm">java</a> > <a href="/src/java.net.index.htm">net</a> > <B>PlainSocketImpl</B></h1>        <script type="text/javascript">doPageHeading();</script>      </div>      <table id="Top1">        <tr>          <td id="Top11"><script type="text/javascript">doTop11();</script></td>          <td id="Top12"><script type="text/javascript">doTop12();</script></td>        </tr>      </table>      <table id="Top2">        <tr>          <td id="Top21"><script type="text/javascript">doTop21();</script></td>          <td id="Top22"><script type="text/javascript">doTop22();</script></td>        </tr>      </table>      <table id="outerColumnContainer">        <tr id="innerColumnContainer">          <td id="contentColumn">            <div id="contentHeading1" class="inside">              <!--contentHeading1-->            </div>            <div id="contentColumn1" class="inside">              <!--contentColumn1-->              <script type="text/javascript">doContentColumn1();</script>            </div>            <div id="contentHeading2" class="inside">              <!--contentHeading2-->            </div>            <div id="contentColumn2" class="inside">              <CODE><br><FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*<br><FONT ID="LN">2   </FONT><A NAME="2"></A>&nbsp;* @(#)PlainSocketImpl.java 1.67 07/03/08<br><FONT ID="LN">3   </FONT><A NAME="3"></A>&nbsp;*<br><FONT ID="LN">4   </FONT><A NAME="4"></A>&nbsp;* Copyright 2006 Sun Microsystems, Inc. All rights reserved.<br><FONT ID="LN">5   </FONT><A NAME="5"></A>&nbsp;* SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.<br><FONT ID="LN">6   </FONT><A NAME="6"></A>&nbsp;*/</FONT><br><FONT ID="LN">7   </FONT><A NAME="7"></A><br><FONT ID="LN">8   </FONT><A NAME="8"></A><FONT ID="Package">package</FONT> java.net;<br><FONT ID="LN">9   </FONT><A NAME="9"></A><br><FONT ID="LN">10  </FONT><A NAME="10"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/IOException.java.htm">java.io.IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">11  </FONT><A NAME="11"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/InputStream.java.htm">java.io.InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">12  </FONT><A NAME="12"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/OutputStream.java.htm">java.io.OutputStream</A>  <A HREF= "/1320.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">13  </FONT><A NAME="13"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/InterruptedIOException.java.htm">java.io.InterruptedIOException</A>  <A HREF= "/2812.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">14  </FONT><A NAME="14"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/FileDescriptor.java.htm">java.io.FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">15  </FONT><A NAME="15"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/ByteArrayOutputStream.java.htm">java.io.ByteArrayOutputStream</A>  <A HREF= "/1793.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">16  </FONT><A NAME="16"></A><br><FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="Import">import</FONT> sun.net.ConnectionResetException;<br><FONT ID="LN">18  </FONT><A NAME="18"></A><br><FONT ID="LN">19  </FONT><A NAME="19"></A><FONT ID="FormalComment">/**<br><FONT ID="LN">20  </FONT><A NAME="20"></A>&nbsp;* Default Socket Implementation. This implementation does<br><FONT ID="LN">21  </FONT><A NAME="21"></A>&nbsp;* not implement any security checks.<br><FONT ID="LN">22  </FONT><A NAME="22"></A>&nbsp;* Note this class should &lt;b&gt;NOT&lt;/b&gt; be public.<br><FONT ID="LN">23  </FONT><A NAME="23"></A>&nbsp;*<br><FONT ID="LN">24  </FONT><A NAME="24"></A>&nbsp;* @author  Steven B. Byrne<br><FONT ID="LN">25  </FONT><A NAME="25"></A>&nbsp;* @version 1.67, 03/08/07<br><FONT ID="LN">26  </FONT><A NAME="26"></A>&nbsp;*/</FONT><br><FONT ID="LN">27  </FONT><A NAME="27"></A><FONT ID="Class">class</FONT> PlainSocketImpl <FONT ID="Extends">extends</FONT> <A HREF="../../java/net/SocketImpl.java.htm">SocketImpl</A>  <A HREF= "/58.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">28  </FONT><A NAME="28"></A>{<br><FONT ID="LN">29  </FONT><A NAME="29"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* instance variable for SO_TIMEOUT */</FONT><br><FONT ID="LN">30  </FONT><A NAME="30"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> timeout;   <FONT ID="SingleLineComment">// timeout in millisec<br><FONT ID="LN">31  </FONT><A NAME="31"></A></FONT>    <FONT ID="SingleLineComment">// traffic class<br><FONT ID="LN">32  </FONT><A NAME="32"></A></FONT>    <FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> trafficClass;<br><FONT ID="LN">33  </FONT><A NAME="33"></A><br><FONT ID="LN">34  </FONT><A NAME="34"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> shut_rd = <FONT ID="False">false</FONT>;<br><FONT ID="LN">35  </FONT><A NAME="35"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> shut_wr = <FONT ID="False">false</FONT>;<br><FONT ID="LN">36  </FONT><A NAME="36"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">37  </FONT><A NAME="37"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/net/SocketInputStream.java.htm">SocketInputStream</A>  <A HREF= "/examples/java.net.index.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> socketInputStream = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">38  </FONT><A NAME="38"></A><br><FONT ID="LN">39  </FONT><A NAME="39"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* number of threads using the FileDescriptor */</FONT><br><FONT ID="LN">40  </FONT><A NAME="40"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> fdUseCount = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">41  </FONT><A NAME="41"></A><br><FONT ID="LN">42  </FONT><A NAME="42"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* lock when increment/decrementing fdUseCount */</FONT><br><FONT ID="LN">43  </FONT><A NAME="43"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fdLock = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">44  </FONT><A NAME="44"></A><br><FONT ID="LN">45  </FONT><A NAME="45"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* indicates a close is pending on the file descriptor */</FONT><br><FONT ID="LN">46  </FONT><A NAME="46"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> closePending = <FONT ID="False">false</FONT>;<br><FONT ID="LN">47  </FONT><A NAME="47"></A><br><FONT ID="LN">48  </FONT><A NAME="48"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* indicates connection reset state */</FONT><br><FONT ID="LN">49  </FONT><A NAME="49"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> CONNECTION_NOT_RESET = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">50  </FONT><A NAME="50"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> CONNECTION_RESET_PENDING = <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">51  </FONT><A NAME="51"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> CONNECTION_RESET = <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">52  </FONT><A NAME="52"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> resetState;<br><FONT ID="LN">53  </FONT><A NAME="53"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resetLock = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">54  </FONT><A NAME="54"></A><br><FONT ID="LN">55  </FONT><A NAME="55"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* second fd, used for ipv6 on windows only.<br><FONT ID="LN">56  </FONT><A NAME="56"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fd1 is used for listeners and for client sockets at initialization<br><FONT ID="LN">57  </FONT><A NAME="57"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* until the socket is connected. Up to this point fd always refers<br><FONT ID="LN">58  </FONT><A NAME="58"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to the ipv4 socket and fd1 to the ipv6 socket. After the socket<br><FONT ID="LN">59  </FONT><A NAME="59"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* becomes connected, fd always refers to the connected socket <br><FONT ID="LN">60  </FONT><A NAME="60"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (either v4 or v6) and fd1 is closed.<br><FONT ID="LN">61  </FONT><A NAME="61"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">62  </FONT><A NAME="62"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* For ServerSockets, fd always refers to the v4 listener and <br><FONT ID="LN">63  </FONT><A NAME="63"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fd1 the v6 listener.<br><FONT ID="LN">64  </FONT><A NAME="64"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">65  </FONT><A NAME="65"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fd1;<br><FONT ID="LN">66  </FONT><A NAME="66"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">67  </FONT><A NAME="67"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Needed for ipv6 on windows because we need to know<br><FONT ID="LN">68  </FONT><A NAME="68"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* if the socket is bound to ::0 or 0.0.0.0, when a caller<br><FONT ID="LN">69  </FONT><A NAME="69"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* asks for it. Otherwise we don't know which socket to ask.<br><FONT ID="LN">70  </FONT><A NAME="70"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">71  </FONT><A NAME="71"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> anyLocalBoundAddr=<FONT ID="Null">null</FONT>;<br><FONT ID="LN">72  </FONT><A NAME="72"></A>&nbsp;<br><FONT ID="LN">73  </FONT><A NAME="73"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* to prevent starvation when listening on two sockets, this is<br><FONT ID="LN">74  </FONT><A NAME="74"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is used to hold the id of the last socket we accepted on.<br><FONT ID="LN">75  </FONT><A NAME="75"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">76  </FONT><A NAME="76"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> lastfd = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">77  </FONT><A NAME="77"></A><br><FONT ID="LN">78  </FONT><A NAME="78"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">79  </FONT><A NAME="79"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Load net library into runtime.<br><FONT ID="LN">80  </FONT><A NAME="80"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">81  </FONT><A NAME="81"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Static">static</FONT> {<br><FONT ID="LN">82  </FONT><A NAME="82"></A>&nbsp;&nbsp;&nbsp;&nbsp;java.security.AccessController.doPrivileged(<br><FONT ID="LN">83  </FONT><A NAME="83"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="New">new</FONT> sun.security.action.LoadLibraryAction(<FONT ID="StringLiteral">"net"</FONT>));<br><FONT ID="LN">84  </FONT><A NAME="84"></A>&nbsp;&nbsp;&nbsp;&nbsp;initProto();<br><FONT ID="LN">85  </FONT><A NAME="85"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">86  </FONT><A NAME="86"></A><br><FONT ID="LN">87  </FONT><A NAME="87"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">88  </FONT><A NAME="88"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Constructs an empty instance.<br><FONT ID="LN">89  </FONT><A NAME="89"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">90  </FONT><A NAME="90"></A>&nbsp;&nbsp;&nbsp;&nbsp;PlainSocketImpl() { }<br><FONT ID="LN">91  </FONT><A NAME="91"></A><br><FONT ID="LN">92  </FONT><A NAME="92"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">93  </FONT><A NAME="93"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Constructs an instance with the given file descriptor.<br><FONT ID="LN">94  </FONT><A NAME="94"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Note, this will not work with IPv6, since two fds are used.<br><FONT ID="LN">95  </FONT><A NAME="95"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">96  </FONT><A NAME="96"></A>&nbsp;&nbsp;&nbsp;&nbsp;PlainSocketImpl(<A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fd) {<br><FONT ID="LN">97  </FONT><A NAME="97"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.fd = fd;<br><FONT ID="LN">98  </FONT><A NAME="98"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">99  </FONT><A NAME="99"></A><br><FONT ID="LN">100 </FONT><A NAME="100"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">101 </FONT><A NAME="101"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates a socket with a boolean that specifies whether this<br><FONT ID="LN">102 </FONT><A NAME="102"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is a stream socket (true) or an unconnected UDP socket (false).<br><FONT ID="LN">103 </FONT><A NAME="103"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">104 </FONT><A NAME="104"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Void">void</FONT> create(<FONT ID="Boolean">boolean</FONT> stream) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">105 </FONT><A NAME="105"></A>&nbsp;&nbsp;&nbsp;&nbsp;fd = <FONT ID="New">new</FONT> <A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">106 </FONT><A NAME="106"></A>&nbsp;&nbsp;&nbsp;&nbsp;fd1 = <FONT ID="New">new</FONT> <A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">107 </FONT><A NAME="107"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketCreate(stream);<br><FONT ID="LN">108 </FONT><A NAME="108"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (socket != <FONT ID="Null">null</FONT>)<br><FONT ID="LN">109 </FONT><A NAME="109"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.setCreated();<br><FONT ID="LN">110 </FONT><A NAME="110"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (serverSocket != <FONT ID="Null">null</FONT>)<br><FONT ID="LN">111 </FONT><A NAME="111"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;serverSocket.setCreated();<br><FONT ID="LN">112 </FONT><A NAME="112"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">113 </FONT><A NAME="113"></A><br><FONT ID="LN">114 </FONT><A NAME="114"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">115 </FONT><A NAME="115"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates a socket and connects it to the specified port on<br><FONT ID="LN">116 </FONT><A NAME="116"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the specified host.<br><FONT ID="LN">117 </FONT><A NAME="117"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param host the specified host<br><FONT ID="LN">118 </FONT><A NAME="118"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param port the specified port<br><FONT ID="LN">119 </FONT><A NAME="119"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">120 </FONT><A NAME="120"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> connect(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> host, <FONT ID="Int">int</FONT> port)<br><FONT ID="LN">121 </FONT><A NAME="121"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/net/UnknownHostException.java.htm">UnknownHostException</A>  <A HREF= "/2238.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">122 </FONT><A NAME="122"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">123 </FONT><A NAME="123"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> pending = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">124 </FONT><A NAME="124"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">125 </FONT><A NAME="125"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address = InetAddress.getByName(host);<br><FONT ID="LN">126 </FONT><A NAME="126"></A><br><FONT ID="LN">127 </FONT><A NAME="127"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">128 </FONT><A NAME="128"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectToAddress(address, port, timeout);<br><FONT ID="LN">129 </FONT><A NAME="129"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">130 </FONT><A NAME="130"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {<br><FONT ID="LN">131 </FONT><A NAME="131"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pending = e;<br><FONT ID="LN">132 </FONT><A NAME="132"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">133 </FONT><A NAME="133"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/net/UnknownHostException.java.htm">UnknownHostException</A>  <A HREF= "/2238.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {<br><FONT ID="LN">134 </FONT><A NAME="134"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pending = e;<br><FONT ID="LN">135 </FONT><A NAME="135"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">136 </FONT><A NAME="136"></A><br><FONT ID="LN">137 </FONT><A NAME="137"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// everything failed<br><FONT ID="LN">138 </FONT><A NAME="138"></A></FONT>    close();<br><FONT ID="LN">139 </FONT><A NAME="139"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> pending;<br><FONT ID="LN">140 </FONT><A NAME="140"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">141 </FONT><A NAME="141"></A><br><FONT ID="LN">142 </FONT><A NAME="142"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">143 </FONT><A NAME="143"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates a socket and connects it to the specified address on<br><FONT ID="LN">144 </FONT><A NAME="144"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the specified port.<br><FONT ID="LN">145 </FONT><A NAME="145"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param address the address<br><FONT ID="LN">146 </FONT><A NAME="146"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param port the specified port<br><FONT ID="LN">147 </FONT><A NAME="147"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">148 </FONT><A NAME="148"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> connect(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> port) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">149 </FONT><A NAME="149"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.port = port;<br><FONT ID="LN">150 </FONT><A NAME="150"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.address = address;<br><FONT ID="LN">151 </FONT><A NAME="151"></A><br><FONT ID="LN">152 </FONT><A NAME="152"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">153 </FONT><A NAME="153"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectToAddress(address, port, timeout);<br><FONT ID="LN">154 </FONT><A NAME="154"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">155 </FONT><A NAME="155"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {<br><FONT ID="LN">156 </FONT><A NAME="156"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// everything failed<br><FONT ID="LN">157 </FONT><A NAME="157"></A></FONT>        close();<br><FONT ID="LN">158 </FONT><A NAME="158"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> e;<br><FONT ID="LN">159 </FONT><A NAME="159"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">160 </FONT><A NAME="160"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">161 </FONT><A NAME="161"></A><br><FONT ID="LN">162 </FONT><A NAME="162"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">163 </FONT><A NAME="163"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates a socket and connects it to the specified address on<br><FONT ID="LN">164 </FONT><A NAME="164"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the specified port.<br><FONT ID="LN">165 </FONT><A NAME="165"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param address the address<br><FONT ID="LN">166 </FONT><A NAME="166"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param timeout the timeout value in milliseconds, or zero for no timeout.<br><FONT ID="LN">167 </FONT><A NAME="167"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if connection fails<br><FONT ID="LN">168 </FONT><A NAME="168"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IllegalArgumentException if address is null or is a<br><FONT ID="LN">169 </FONT><A NAME="169"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*          SocketAddress subclass not supported by this socket<br><FONT ID="LN">170 </FONT><A NAME="170"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @since 1.4<br><FONT ID="LN">171 </FONT><A NAME="171"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">172 </FONT><A NAME="172"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> connect(<A HREF="../../java/net/SocketAddress.java.htm">SocketAddress</A>  <A HREF= "/3902.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> timeout) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">173 </FONT><A NAME="173"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (address == <FONT ID="Null">null</FONT> || !(address <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/net/InetSocketAddress.java.htm">InetSocketAddress</A>  <A HREF= "/2167.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>))<br><FONT ID="LN">174 </FONT><A NAME="174"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalArgumentException.java.htm">IllegalArgumentException</A>  <A HREF= "/2785.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"unsupported address type"</FONT>);<br><FONT ID="LN">175 </FONT><A NAME="175"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/net/InetSocketAddress.java.htm">InetSocketAddress</A>  <A HREF= "/2167.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> addr = (<A HREF="../../java/net/InetSocketAddress.java.htm">InetSocketAddress</A>  <A HREF= "/2167.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) address;<br><FONT ID="LN">176 </FONT><A NAME="176"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (addr.isUnresolved())<br><FONT ID="LN">177 </FONT><A NAME="177"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/UnknownHostException.java.htm">UnknownHostException</A>  <A HREF= "/2238.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(addr.getHostName());<br><FONT ID="LN">178 </FONT><A NAME="178"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.port = addr.getPort();<br><FONT ID="LN">179 </FONT><A NAME="179"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.address = addr.getAddress();<br><FONT ID="LN">180 </FONT><A NAME="180"></A><br><FONT ID="LN">181 </FONT><A NAME="181"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">182 </FONT><A NAME="182"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectToAddress(<FONT ID="This">this</FONT>.address, port, timeout);<br><FONT ID="LN">183 </FONT><A NAME="183"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">184 </FONT><A NAME="184"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {<br><FONT ID="LN">185 </FONT><A NAME="185"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// everything failed<br><FONT ID="LN">186 </FONT><A NAME="186"></A></FONT>        close();<br><FONT ID="LN">187 </FONT><A NAME="187"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> e;<br><FONT ID="LN">188 </FONT><A NAME="188"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">189 </FONT><A NAME="189"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">190 </FONT><A NAME="190"></A><br><FONT ID="LN">191 </FONT><A NAME="191"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> connectToAddress(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> port, <FONT ID="Int">int</FONT> timeout) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">192 </FONT><A NAME="192"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (address.isAnyLocalAddress()) {<br><FONT ID="LN">193 </FONT><A NAME="193"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doConnect(InetAddress.getLocalHost(), port, timeout);<br><FONT ID="LN">194 </FONT><A NAME="194"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">195 </FONT><A NAME="195"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doConnect(address, port, timeout);<br><FONT ID="LN">196 </FONT><A NAME="196"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">197 </FONT><A NAME="197"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">198 </FONT><A NAME="198"></A><br><FONT ID="LN">199 </FONT><A NAME="199"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setOption(<FONT ID="Int">int</FONT> opt, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">200 </FONT><A NAME="200"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isClosedOrPending()) {<br><FONT ID="LN">201 </FONT><A NAME="201"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket Closed"</FONT>);<br><FONT ID="LN">202 </FONT><A NAME="202"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">203 </FONT><A NAME="203"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> on = <FONT ID="True">true</FONT>;<br><FONT ID="LN">204 </FONT><A NAME="204"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (opt) {<br><FONT ID="LN">205 </FONT><A NAME="205"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* check type safety b4 going native.  These should never<br><FONT ID="LN">206 </FONT><A NAME="206"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fail, since only java.Socket* has access to<br><FONT ID="LN">207 </FONT><A NAME="207"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* PlainSocketImpl.setOption().<br><FONT ID="LN">208 </FONT><A NAME="208"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">209 </FONT><A NAME="209"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_LINGER:<br><FONT ID="LN">210 </FONT><A NAME="210"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || (!(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) &amp;&amp; !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)))<br><FONT ID="LN">211 </FONT><A NAME="211"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Bad parameter for option"</FONT>);<br><FONT ID="LN">212 </FONT><A NAME="212"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) {<br><FONT ID="LN">213 </FONT><A NAME="213"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* true only if disabling - enabling should be Integer */</FONT><br><FONT ID="LN">214 </FONT><A NAME="214"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on = <FONT ID="False">false</FONT>;<br><FONT ID="LN">215 </FONT><A NAME="215"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">216 </FONT><A NAME="216"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">217 </FONT><A NAME="217"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_TIMEOUT:<br><FONT ID="LN">218 </FONT><A NAME="218"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || (!(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)))<br><FONT ID="LN">219 </FONT><A NAME="219"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Bad parameter for SO_TIMEOUT"</FONT>);<br><FONT ID="LN">220 </FONT><A NAME="220"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> tmp = ((<A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) val).intValue();<br><FONT ID="LN">221 </FONT><A NAME="221"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (tmp &lt; <FONT ID="IntegerLiteral">0</FONT>)<br><FONT ID="LN">222 </FONT><A NAME="222"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalArgumentException.java.htm">IllegalArgumentException</A>  <A HREF= "/2785.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"timeout &lt; 0"</FONT>);<br><FONT ID="LN">223 </FONT><A NAME="223"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout = tmp;<br><FONT ID="LN">224 </FONT><A NAME="224"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">225 </FONT><A NAME="225"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> IP_TOS:<br><FONT ID="LN">226 </FONT><A NAME="226"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)) {<br><FONT ID="LN">227 </FONT><A NAME="227"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad argument for IP_TOS"</FONT>);<br><FONT ID="LN">228 </FONT><A NAME="228"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">229 </FONT><A NAME="229"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trafficClass = ((<A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).intValue();<br><FONT ID="LN">230 </FONT><A NAME="230"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">231 </FONT><A NAME="231"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_BINDADDR:<br><FONT ID="LN">232 </FONT><A NAME="232"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Cannot re-bind socket"</FONT>);<br><FONT ID="LN">233 </FONT><A NAME="233"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TCP_NODELAY:<br><FONT ID="LN">234 </FONT><A NAME="234"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>))<br><FONT ID="LN">235 </FONT><A NAME="235"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad parameter for TCP_NODELAY"</FONT>);<br><FONT ID="LN">236 </FONT><A NAME="236"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on = ((<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).booleanValue();<br><FONT ID="LN">237 </FONT><A NAME="237"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">238 </FONT><A NAME="238"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_SNDBUF:<br><FONT ID="LN">239 </FONT><A NAME="239"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_RCVBUF:<br><FONT ID="LN">240 </FONT><A NAME="240"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) ||<br><FONT ID="LN">241 </FONT><A NAME="241"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!(((<A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).intValue() &gt; <FONT ID="IntegerLiteral">0</FONT>)) {<br><FONT ID="LN">242 </FONT><A NAME="242"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad parameter for SO_SNDBUF "</FONT> +<br><FONT ID="LN">243 </FONT><A NAME="243"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"or SO_RCVBUF"</FONT>);<br><FONT ID="LN">244 </FONT><A NAME="244"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">245 </FONT><A NAME="245"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">246 </FONT><A NAME="246"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_KEEPALIVE:<br><FONT ID="LN">247 </FONT><A NAME="247"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>))<br><FONT ID="LN">248 </FONT><A NAME="248"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad parameter for SO_KEEPALIVE"</FONT>);<br><FONT ID="LN">249 </FONT><A NAME="249"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on = ((<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).booleanValue();<br><FONT ID="LN">250 </FONT><A NAME="250"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">251 </FONT><A NAME="251"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_OOBINLINE:<br><FONT ID="LN">252 </FONT><A NAME="252"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>))<br><FONT ID="LN">253 </FONT><A NAME="253"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad parameter for SO_OOBINLINE"</FONT>);<br><FONT ID="LN">254 </FONT><A NAME="254"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on = ((<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).booleanValue();<br><FONT ID="LN">255 </FONT><A NAME="255"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">256 </FONT><A NAME="256"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_REUSEADDR:<br><FONT ID="LN">257 </FONT><A NAME="257"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val == <FONT ID="Null">null</FONT> || !(val <FONT ID="InstanceOf">instanceof</FONT> <A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)) <br><FONT ID="LN">258 </FONT><A NAME="258"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"bad parameter for SO_REUSEADDR"</FONT>);<br><FONT ID="LN">259 </FONT><A NAME="259"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on = ((<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)val).booleanValue();<br><FONT ID="LN">260 </FONT><A NAME="260"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">261 </FONT><A NAME="261"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">262 </FONT><A NAME="262"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"unrecognized TCP option: "</FONT> + opt);<br><FONT ID="LN">263 </FONT><A NAME="263"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">264 </FONT><A NAME="264"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketSetOption(opt, on, val);<br><FONT ID="LN">265 </FONT><A NAME="265"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">266 </FONT><A NAME="266"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getOption(<FONT ID="Int">int</FONT> opt) <FONT ID="Throws">throws</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">267 </FONT><A NAME="267"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isClosedOrPending()) {<br><FONT ID="LN">268 </FONT><A NAME="268"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket Closed"</FONT>);<br><FONT ID="LN">269 </FONT><A NAME="269"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">270 </FONT><A NAME="270"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (opt == SO_TIMEOUT) {<br><FONT ID="LN">271 </FONT><A NAME="271"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(timeout);<br><FONT ID="LN">272 </FONT><A NAME="272"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">273 </FONT><A NAME="273"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> ret = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">274 </FONT><A NAME="274"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">275 </FONT><A NAME="275"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The native socketGetOption() knows about 3 options.<br><FONT ID="LN">276 </FONT><A NAME="276"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The 32 bit value it returns will be interpreted according<br><FONT ID="LN">277 </FONT><A NAME="277"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to what we're asking.  A return of -1 means it understands<br><FONT ID="LN">278 </FONT><A NAME="278"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the option but its turned off.  It will raise a SocketException<br><FONT ID="LN">279 </FONT><A NAME="279"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* if "opt" isn't one it understands.<br><FONT ID="LN">280 </FONT><A NAME="280"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">281 </FONT><A NAME="281"></A><br><FONT ID="LN">282 </FONT><A NAME="282"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (opt) {<br><FONT ID="LN">283 </FONT><A NAME="283"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TCP_NODELAY:<br><FONT ID="LN">284 </FONT><A NAME="284"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">285 </FONT><A NAME="285"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.valueOf(ret != -<FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">286 </FONT><A NAME="286"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_OOBINLINE:<br><FONT ID="LN">287 </FONT><A NAME="287"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">288 </FONT><A NAME="288"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.valueOf(ret != -<FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">289 </FONT><A NAME="289"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_LINGER:<br><FONT ID="LN">290 </FONT><A NAME="290"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">291 </FONT><A NAME="291"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (ret == -<FONT ID="IntegerLiteral">1</FONT>) ? Boolean.FALSE: (<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>)(<FONT ID="New">new</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(ret));<br><FONT ID="LN">292 </FONT><A NAME="292"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_REUSEADDR:<br><FONT ID="LN">293 </FONT><A NAME="293"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">294 </FONT><A NAME="294"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.valueOf(ret != -<FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">295 </FONT><A NAME="295"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_BINDADDR:<br><FONT ID="LN">296 </FONT><A NAME="296"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT> &amp;&amp; fd1 != <FONT ID="Null">null</FONT> ) {<br><FONT ID="LN">297 </FONT><A NAME="297"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* must be unbound or else bound to anyLocal */</FONT><br><FONT ID="LN">298 </FONT><A NAME="298"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> anyLocalBoundAddr;<br><FONT ID="LN">299 </FONT><A NAME="299"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">300 </FONT><A NAME="300"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InetAddressContainer in = <FONT ID="New">new</FONT> InetAddressContainer();<br><FONT ID="LN">301 </FONT><A NAME="301"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, in); <br><FONT ID="LN">302 </FONT><A NAME="302"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.addr;<br><FONT ID="LN">303 </FONT><A NAME="303"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_SNDBUF:<br><FONT ID="LN">304 </FONT><A NAME="304"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_RCVBUF:<br><FONT ID="LN">305 </FONT><A NAME="305"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">306 </FONT><A NAME="306"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(ret);<br><FONT ID="LN">307 </FONT><A NAME="307"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> IP_TOS:<br><FONT ID="LN">308 </FONT><A NAME="308"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">309 </FONT><A NAME="309"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ret == -<FONT ID="IntegerLiteral">1</FONT>) { <FONT ID="SingleLineComment">// ipv6 tos<br><FONT ID="LN">310 </FONT><A NAME="310"></A></FONT>        <FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(trafficClass);<br><FONT ID="LN">311 </FONT><A NAME="311"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">312 </FONT><A NAME="312"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/Integer.java.htm">Integer</A>  <A HREF= "/901.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(ret);<br><FONT ID="LN">313 </FONT><A NAME="313"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">314 </FONT><A NAME="314"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> SO_KEEPALIVE:<br><FONT ID="LN">315 </FONT><A NAME="315"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = socketGetOption(opt, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">316 </FONT><A NAME="316"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.valueOf(ret != -<FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">317 </FONT><A NAME="317"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// should never get here<br><FONT ID="LN">318 </FONT><A NAME="318"></A></FONT>    <FONT ID="Default">default</FONT>:<br><FONT ID="LN">319 </FONT><A NAME="319"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;<br><FONT ID="LN">320 </FONT><A NAME="320"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">321 </FONT><A NAME="321"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">322 </FONT><A NAME="322"></A><br><FONT ID="LN">323 </FONT><A NAME="323"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">324 </FONT><A NAME="324"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The workhorse of the connection operation.  Tries several times to<br><FONT ID="LN">325 </FONT><A NAME="325"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* establish a connection to the given &lt;host, port&gt;.  If unsuccessful,<br><FONT ID="LN">326 </FONT><A NAME="326"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* throws an IOException indicating what went wrong.<br><FONT ID="LN">327 </FONT><A NAME="327"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">328 </FONT><A NAME="328"></A><br><FONT ID="LN">329 </FONT><A NAME="329"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Void">void</FONT> doConnect(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> port, <FONT ID="Int">int</FONT> timeout) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">330 </FONT><A NAME="330"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">331 </FONT><A NAME="331"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fd = acquireFD();<br><FONT ID="LN">332 </FONT><A NAME="332"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">333 </FONT><A NAME="333"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketConnect(address, port, timeout);<br><FONT ID="LN">334 </FONT><A NAME="334"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// If we have a ref. to the Socket, then sets the flags<br><FONT ID="LN">335 </FONT><A NAME="335"></A></FONT>        <FONT ID="SingleLineComment">// created, bound &amp; connected to true.<br><FONT ID="LN">336 </FONT><A NAME="336"></A></FONT>        <FONT ID="SingleLineComment">// This is normally done in Socket.connect() but some<br><FONT ID="LN">337 </FONT><A NAME="337"></A></FONT>        <FONT ID="SingleLineComment">// subclasses of Socket may call impl.connect() directly!<br><FONT ID="LN">338 </FONT><A NAME="338"></A></FONT>        <FONT ID="If">if</FONT> (socket != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">339 </FONT><A NAME="339"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.setBound();<br><FONT ID="LN">340 </FONT><A NAME="340"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.setConnected();<br><FONT ID="LN">341 </FONT><A NAME="341"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">342 </FONT><A NAME="342"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">343 </FONT><A NAME="343"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;releaseFD();<br><FONT ID="LN">344 </FONT><A NAME="344"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">345 </FONT><A NAME="345"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {   <br><FONT ID="LN">346 </FONT><A NAME="346"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close();<br><FONT ID="LN">347 </FONT><A NAME="347"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> e;<br><FONT ID="LN">348 </FONT><A NAME="348"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">349 </FONT><A NAME="349"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">350 </FONT><A NAME="350"></A><br><FONT ID="LN">351 </FONT><A NAME="351"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">352 </FONT><A NAME="352"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Binds the socket to the specified address of the specified local port.<br><FONT ID="LN">353 </FONT><A NAME="353"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param address the address<br><FONT ID="LN">354 </FONT><A NAME="354"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param port the port<br><FONT ID="LN">355 </FONT><A NAME="355"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">356 </FONT><A NAME="356"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Void">void</FONT> bind(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> lport)<br><FONT ID="LN">357 </FONT><A NAME="357"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">358 </FONT><A NAME="358"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">359 </FONT><A NAME="359"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketBind(address, lport);<br><FONT ID="LN">360 </FONT><A NAME="360"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (socket != <FONT ID="Null">null</FONT>)<br><FONT ID="LN">361 </FONT><A NAME="361"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket.setBound();<br><FONT ID="LN">362 </FONT><A NAME="362"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (serverSocket != <FONT ID="Null">null</FONT>)<br><FONT ID="LN">363 </FONT><A NAME="363"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;serverSocket.setBound();<br><FONT ID="LN">364 </FONT><A NAME="364"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (address.isAnyLocalAddress()) {<br><FONT ID="LN">365 </FONT><A NAME="365"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anyLocalBoundAddr = address;<br><FONT ID="LN">366 </FONT><A NAME="366"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">367 </FONT><A NAME="367"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">368 </FONT><A NAME="368"></A><br><FONT ID="LN">369 </FONT><A NAME="369"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">370 </FONT><A NAME="370"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Listens, for a specified amount of time, for connections.<br><FONT ID="LN">371 </FONT><A NAME="371"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param count the amount of time to listen for connections<br><FONT ID="LN">372 </FONT><A NAME="372"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">373 </FONT><A NAME="373"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Void">void</FONT> listen(<FONT ID="Int">int</FONT> count) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">374 </FONT><A NAME="374"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketListen(count);<br><FONT ID="LN">375 </FONT><A NAME="375"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">376 </FONT><A NAME="376"></A><br><FONT ID="LN">377 </FONT><A NAME="377"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">378 </FONT><A NAME="378"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Accepts connections.<br><FONT ID="LN">379 </FONT><A NAME="379"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param s the connection<br><FONT ID="LN">380 </FONT><A NAME="380"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">381 </FONT><A NAME="381"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Void">void</FONT> accept(<A HREF="../../java/net/SocketImpl.java.htm">SocketImpl</A>  <A HREF= "/58.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> s) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">382 </FONT><A NAME="382"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fd = acquireFD();<br><FONT ID="LN">383 </FONT><A NAME="383"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">384 </FONT><A NAME="384"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketAccept(s);<br><FONT ID="LN">385 </FONT><A NAME="385"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">386 </FONT><A NAME="386"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;releaseFD();<br><FONT ID="LN">387 </FONT><A NAME="387"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">388 </FONT><A NAME="388"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">389 </FONT><A NAME="389"></A><br><FONT ID="LN">390 </FONT><A NAME="390"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">391 </FONT><A NAME="391"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Gets an InputStream for this socket.<br><FONT ID="LN">392 </FONT><A NAME="392"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">393 </FONT><A NAME="393"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getInputStream() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">394 </FONT><A NAME="394"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isClosedOrPending()) {<br><FONT ID="LN">395 </FONT><A NAME="395"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket Closed"</FONT>);<br><FONT ID="LN">396 </FONT><A NAME="396"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">397 </FONT><A NAME="397"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (shut_rd) {<br><FONT ID="LN">398 </FONT><A NAME="398"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket input is shutdown"</FONT>);<br><FONT ID="LN">399 </FONT><A NAME="399"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">400 </FONT><A NAME="400"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (socketInputStream == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">401 </FONT><A NAME="401"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketInputStream = <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketInputStream.java.htm">SocketInputStream</A>  <A HREF= "/examples/java.net.index.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="This">this</FONT>);<br><FONT ID="LN">402 </FONT><A NAME="402"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">403 </FONT><A NAME="403"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> socketInputStream;<br><FONT ID="LN">404 </FONT><A NAME="404"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">405 </FONT><A NAME="405"></A><br><FONT ID="LN">406 </FONT><A NAME="406"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> setInputStream(<A HREF="../../java/net/SocketInputStream.java.htm">SocketInputStream</A>  <A HREF= "/examples/java.net.index.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> in) {<br><FONT ID="LN">407 </FONT><A NAME="407"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketInputStream = in;<br><FONT ID="LN">408 </FONT><A NAME="408"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">409 </FONT><A NAME="409"></A><br><FONT ID="LN">410 </FONT><A NAME="410"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">411 </FONT><A NAME="411"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Gets an OutputStream for this socket.<br><FONT ID="LN">412 </FONT><A NAME="412"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">413 </FONT><A NAME="413"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <A HREF="../../java/io/OutputStream.java.htm">OutputStream</A>  <A HREF= "/1320.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getOutputStream() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">414 </FONT><A NAME="414"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isClosedOrPending()) {<br><FONT ID="LN">415 </FONT><A NAME="415"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket Closed"</FONT>);<br><FONT ID="LN">416 </FONT><A NAME="416"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">417 </FONT><A NAME="417"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (shut_wr) {<br><FONT ID="LN">418 </FONT><A NAME="418"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket output is shutdown"</FONT>);<br><FONT ID="LN">419 </FONT><A NAME="419"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">420 </FONT><A NAME="420"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/net/SocketOutputStream.java.htm">SocketOutputStream</A>  <A HREF= "/examples/java.net.index.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="This">this</FONT>);<br><FONT ID="LN">421 </FONT><A NAME="421"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">422 </FONT><A NAME="422"></A><br><FONT ID="LN">423 </FONT><A NAME="423"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">424 </FONT><A NAME="424"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns the number of bytes that can be read without blocking.<br><FONT ID="LN">425 </FONT><A NAME="425"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">426 </FONT><A NAME="426"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Synchronized">synchronized</FONT> <FONT ID="Int">int</FONT> available() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">427 </FONT><A NAME="427"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isClosedOrPending()) {<br><FONT ID="LN">428 </FONT><A NAME="428"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Stream closed."</FONT>);<br><FONT ID="LN">429 </FONT><A NAME="429"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">430 </FONT><A NAME="430"></A><br><FONT ID="LN">431 </FONT><A NAME="431"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">432 </FONT><A NAME="432"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If connection has been reset then return 0 to indicate<br><FONT ID="LN">433 </FONT><A NAME="433"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* there are no buffered bytes.<br><FONT ID="LN">434 </FONT><A NAME="434"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">435 </FONT><A NAME="435"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (isConnectionReset()) {<br><FONT ID="LN">436 </FONT><A NAME="436"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">437 </FONT><A NAME="437"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">438 </FONT><A NAME="438"></A><br><FONT ID="LN">439 </FONT><A NAME="439"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">440 </FONT><A NAME="440"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If no bytes available and we were previously notified<br><FONT ID="LN">441 </FONT><A NAME="441"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* of a connection reset then we move to the reset state.<br><FONT ID="LN">442 </FONT><A NAME="442"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">443 </FONT><A NAME="443"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If are notified of a connection reset then check<br><FONT ID="LN">444 </FONT><A NAME="444"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* again if there are bytes buffered on the socket. <br><FONT ID="LN">445 </FONT><A NAME="445"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">446 </FONT><A NAME="446"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">447 </FONT><A NAME="447"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> { <br><FONT ID="LN">448 </FONT><A NAME="448"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n = socketAvailable();<br><FONT ID="LN">449 </FONT><A NAME="449"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n == <FONT ID="IntegerLiteral">0</FONT> &amp;&amp; isConnectionResetPending()) {<br><FONT ID="LN">450 </FONT><A NAME="450"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setConnectionReset();<br><FONT ID="LN">451 </FONT><A NAME="451"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">452 </FONT><A NAME="452"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (ConnectionResetException exc1) {<br><FONT ID="LN">453 </FONT><A NAME="453"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setConnectionResetPending();<br><FONT ID="LN">454 </FONT><A NAME="454"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">455 </FONT><A NAME="455"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n = socketAvailable();<br><FONT ID="LN">456 </FONT><A NAME="456"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">457 </FONT><A NAME="457"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setConnectionReset();<br><FONT ID="LN">458 </FONT><A NAME="458"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">459 </FONT><A NAME="459"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (ConnectionResetException exc2) {<br><FONT ID="LN">460 </FONT><A NAME="460"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">461 </FONT><A NAME="461"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">462 </FONT><A NAME="462"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> n;<br><FONT ID="LN">463 </FONT><A NAME="463"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">464 </FONT><A NAME="464"></A><br><FONT ID="LN">465 </FONT><A NAME="465"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">466 </FONT><A NAME="466"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Closes the socket.<br><FONT ID="LN">467 </FONT><A NAME="467"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">468 </FONT><A NAME="468"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> close() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">469 </FONT><A NAME="469"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT>(fdLock) {<br><FONT ID="LN">470 </FONT><A NAME="470"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT> || fd1 != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">471 </FONT><A NAME="471"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fdUseCount == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">472 </FONT><A NAME="472"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (closePending) {<br><FONT ID="LN">473 </FONT><A NAME="473"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">474 </FONT><A NAME="474"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">475 </FONT><A NAME="475"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePending = <FONT ID="True">true</FONT>;<br><FONT ID="LN">476 </FONT><A NAME="476"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">477 </FONT><A NAME="477"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* We close the FileDescriptor in two-steps - first the<br><FONT ID="LN">478 </FONT><A NAME="478"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "pre-close" which closes the socket but doesn't<br><FONT ID="LN">479 </FONT><A NAME="479"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* release the underlying file descriptor. This operation<br><FONT ID="LN">480 </FONT><A NAME="480"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* may be lengthy due to untransmitted data and a long<br><FONT ID="LN">481 </FONT><A NAME="481"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* linger interval. Once the pre-close is done we do the<br><FONT ID="LN">482 </FONT><A NAME="482"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* actual socket to release the fd.<br><FONT ID="LN">483 </FONT><A NAME="483"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">484 </FONT><A NAME="484"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">485 </FONT><A NAME="485"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketPreClose();<br><FONT ID="LN">486 </FONT><A NAME="486"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">487 </FONT><A NAME="487"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketClose();<br><FONT ID="LN">488 </FONT><A NAME="488"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">489 </FONT><A NAME="489"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">490 </FONT><A NAME="490"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd1 = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">491 </FONT><A NAME="491"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">492 </FONT><A NAME="492"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">493 </FONT><A NAME="493"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">494 </FONT><A NAME="494"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If a thread has acquired the fd and a close<br><FONT ID="LN">495 </FONT><A NAME="495"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* isn't pending then use a deferred close.<br><FONT ID="LN">496 </FONT><A NAME="496"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Also decrement fdUseCount to signal the last<br><FONT ID="LN">497 </FONT><A NAME="497"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* thread that releases the fd to close it.<br><FONT ID="LN">498 </FONT><A NAME="498"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">499 </FONT><A NAME="499"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!closePending) {<br><FONT ID="LN">500 </FONT><A NAME="500"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePending = <FONT ID="True">true</FONT>;<br><FONT ID="LN">501 </FONT><A NAME="501"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fdUseCount--;<br><FONT ID="LN">502 </FONT><A NAME="502"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketPreClose();<br><FONT ID="LN">503 </FONT><A NAME="503"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">504 </FONT><A NAME="504"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">505 </FONT><A NAME="505"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">506 </FONT><A NAME="506"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">507 </FONT><A NAME="507"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">508 </FONT><A NAME="508"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">509 </FONT><A NAME="509"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> reset() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">510 </FONT><A NAME="510"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT> || fd1 != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">511 </FONT><A NAME="511"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketClose();<br><FONT ID="LN">512 </FONT><A NAME="512"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">513 </FONT><A NAME="513"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">514 </FONT><A NAME="514"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd1 = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">515 </FONT><A NAME="515"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Super">super</FONT>.reset();<br><FONT ID="LN">516 </FONT><A NAME="516"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">517 </FONT><A NAME="517"></A><br><FONT ID="LN">518 </FONT><A NAME="518"></A><br><FONT ID="LN">519 </FONT><A NAME="519"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">520 </FONT><A NAME="520"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Shutdown read-half of the socket connection;<br><FONT ID="LN">521 </FONT><A NAME="521"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">522 </FONT><A NAME="522"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> shutdownInput() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">523 </FONT><A NAME="523"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">524 </FONT><A NAME="524"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketShutdown(SHUT_RD);<br><FONT ID="LN">525 </FONT><A NAME="525"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (socketInputStream != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">526 </FONT><A NAME="526"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketInputStream.setEOF(<FONT ID="True">true</FONT>);<br><FONT ID="LN">527 </FONT><A NAME="527"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">528 </FONT><A NAME="528"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shut_rd = <FONT ID="True">true</FONT>;<br><FONT ID="LN">529 </FONT><A NAME="529"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">530 </FONT><A NAME="530"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <br><FONT ID="LN">531 </FONT><A NAME="531"></A><br><FONT ID="LN">532 </FONT><A NAME="532"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">533 </FONT><A NAME="533"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Shutdown write-half of the socket connection;<br><FONT ID="LN">534 </FONT><A NAME="534"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">535 </FONT><A NAME="535"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> shutdownOutput() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">536 </FONT><A NAME="536"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">537 </FONT><A NAME="537"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketShutdown(SHUT_WR);<br><FONT ID="LN">538 </FONT><A NAME="538"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shut_wr = <FONT ID="True">true</FONT>;<br><FONT ID="LN">539 </FONT><A NAME="539"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">540 </FONT><A NAME="540"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <br><FONT ID="LN">541 </FONT><A NAME="541"></A><br><FONT ID="LN">542 </FONT><A NAME="542"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> supportsUrgentData () {<br><FONT ID="LN">543 </FONT><A NAME="543"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="True">true</FONT>;<br><FONT ID="LN">544 </FONT><A NAME="544"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">545 </FONT><A NAME="545"></A><br><FONT ID="LN">546 </FONT><A NAME="546"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> sendUrgentData (<FONT ID="Int">int</FONT> data) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">547 </FONT><A NAME="547"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">548 </FONT><A NAME="548"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"Socket Closed"</FONT>);<br><FONT ID="LN">549 </FONT><A NAME="549"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">550 </FONT><A NAME="550"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketSendUrgentData (data);<br><FONT ID="LN">551 </FONT><A NAME="551"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">552 </FONT><A NAME="552"></A><br><FONT ID="LN">553 </FONT><A NAME="553"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">554 </FONT><A NAME="554"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Cleans up if the user forgets to close it.<br><FONT ID="LN">555 </FONT><A NAME="555"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">556 </FONT><A NAME="556"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> finalize() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">557 </FONT><A NAME="557"></A>&nbsp;&nbsp;&nbsp;&nbsp;close();<br><FONT ID="LN">558 </FONT><A NAME="558"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">559 </FONT><A NAME="559"></A><br><FONT ID="LN">560 </FONT><A NAME="560"></A><br><FONT ID="LN">561 </FONT><A NAME="561"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">562 </FONT><A NAME="562"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "Acquires" and returns the FileDescriptor for this impl<br><FONT ID="LN">563 </FONT><A NAME="563"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">564 </FONT><A NAME="564"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* A corresponding releaseFD is required to "release" the<br><FONT ID="LN">565 </FONT><A NAME="565"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* FileDescriptor.<br><FONT ID="LN">566 </FONT><A NAME="566"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">567 </FONT><A NAME="567"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> acquireFD() {<br><FONT ID="LN">568 </FONT><A NAME="568"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (fdLock) {<br><FONT ID="LN">569 </FONT><A NAME="569"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fdUseCount++;<br><FONT ID="LN">570 </FONT><A NAME="570"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> fd;<br><FONT ID="LN">571 </FONT><A NAME="571"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">572 </FONT><A NAME="572"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">573 </FONT><A NAME="573"></A><br><FONT ID="LN">574 </FONT><A NAME="574"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">575 </FONT><A NAME="575"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "Release" the FileDescriptor for this impl. <br><FONT ID="LN">576 </FONT><A NAME="576"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">577 </FONT><A NAME="577"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If the use count goes to -1 then the socket is closed.<br><FONT ID="LN">578 </FONT><A NAME="578"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">579 </FONT><A NAME="579"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Final">final</FONT> <FONT ID="Void">void</FONT> releaseFD() {<br><FONT ID="LN">580 </FONT><A NAME="580"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (fdLock) {<br><FONT ID="LN">581 </FONT><A NAME="581"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fdUseCount--;<br><FONT ID="LN">582 </FONT><A NAME="582"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fdUseCount == -<FONT ID="IntegerLiteral">1</FONT>) {<br><FONT ID="LN">583 </FONT><A NAME="583"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (fd != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">584 </FONT><A NAME="584"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">585 </FONT><A NAME="585"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socketClose();<br><FONT ID="LN">586 </FONT><A NAME="586"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) { <br><FONT ID="LN">587 </FONT><A NAME="587"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">588 </FONT><A NAME="588"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">589 </FONT><A NAME="589"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">590 </FONT><A NAME="590"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">591 </FONT><A NAME="591"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">592 </FONT><A NAME="592"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">593 </FONT><A NAME="593"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">594 </FONT><A NAME="594"></A><br><FONT ID="LN">595 </FONT><A NAME="595"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> isConnectionReset() {<br><FONT ID="LN">596 </FONT><A NAME="596"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (resetLock) {<br><FONT ID="LN">597 </FONT><A NAME="597"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (resetState == CONNECTION_RESET);<br><FONT ID="LN">598 </FONT><A NAME="598"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">599 </FONT><A NAME="599"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">600 </FONT><A NAME="600"></A><br><FONT ID="LN">601 </FONT><A NAME="601"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> isConnectionResetPending() {<br><FONT ID="LN">602 </FONT><A NAME="602"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (resetLock) {<br><FONT ID="LN">603 </FONT><A NAME="603"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (resetState == CONNECTION_RESET_PENDING);<br><FONT ID="LN">604 </FONT><A NAME="604"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">605 </FONT><A NAME="605"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">606 </FONT><A NAME="606"></A><br><FONT ID="LN">607 </FONT><A NAME="607"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setConnectionReset() {<br><FONT ID="LN">608 </FONT><A NAME="608"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (resetLock) {<br><FONT ID="LN">609 </FONT><A NAME="609"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resetState = CONNECTION_RESET;<br><FONT ID="LN">610 </FONT><A NAME="610"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">611 </FONT><A NAME="611"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">612 </FONT><A NAME="612"></A><br><FONT ID="LN">613 </FONT><A NAME="613"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setConnectionResetPending() {<br><FONT ID="LN">614 </FONT><A NAME="614"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (resetLock) {<br><FONT ID="LN">615 </FONT><A NAME="615"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (resetState == CONNECTION_NOT_RESET) {<br><FONT ID="LN">616 </FONT><A NAME="616"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resetState = CONNECTION_RESET_PENDING;<br><FONT ID="LN">617 </FONT><A NAME="617"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">618 </FONT><A NAME="618"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">619 </FONT><A NAME="619"></A><br><FONT ID="LN">620 </FONT><A NAME="620"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">621 </FONT><A NAME="621"></A><br><FONT ID="LN">622 </FONT><A NAME="622"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">623 </FONT><A NAME="623"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Return true if already closed or close is pending<br><FONT ID="LN">624 </FONT><A NAME="624"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">625 </FONT><A NAME="625"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> isClosedOrPending() {<br><FONT ID="LN">626 </FONT><A NAME="626"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">627 </FONT><A NAME="627"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Lock on fdLock to ensure that we wait if a<br><FONT ID="LN">628 </FONT><A NAME="628"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* close is in progress.<br><FONT ID="LN">629 </FONT><A NAME="629"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">630 </FONT><A NAME="630"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Synchronized">synchronized</FONT> (fdLock) {<br><FONT ID="LN">631 </FONT><A NAME="631"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (closePending || (fd == <FONT ID="Null">null</FONT> &amp;&amp; fd1 == <FONT ID="Null">null</FONT>)) {<br><FONT ID="LN">632 </FONT><A NAME="632"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="True">true</FONT>;<br><FONT ID="LN">633 </FONT><A NAME="633"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">634 </FONT><A NAME="634"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="False">false</FONT>;<br><FONT ID="LN">635 </FONT><A NAME="635"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">636 </FONT><A NAME="636"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">637 </FONT><A NAME="637"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">638 </FONT><A NAME="638"></A><br><FONT ID="LN">639 </FONT><A NAME="639"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">640 </FONT><A NAME="640"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Return the current value of SO_TIMEOUT<br><FONT ID="LN">641 </FONT><A NAME="641"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">642 </FONT><A NAME="642"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> getTimeout() {<br><FONT ID="LN">643 </FONT><A NAME="643"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> timeout;<br><FONT ID="LN">644 </FONT><A NAME="644"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">645 </FONT><A NAME="645"></A><br><FONT ID="LN">646 </FONT><A NAME="646"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">647 </FONT><A NAME="647"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "Pre-close" a socket by dup'ing the file descriptor - this enables<br><FONT ID="LN">648 </FONT><A NAME="648"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the socket to be closed without releasing the file descriptor.<br><FONT ID="LN">649 </FONT><A NAME="649"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">650 </FONT><A NAME="650"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> socketPreClose() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">651 </FONT><A NAME="651"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketClose0(<FONT ID="True">true</FONT>);<br><FONT ID="LN">652 </FONT><A NAME="652"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">653 </FONT><A NAME="653"></A><br><FONT ID="LN">654 </FONT><A NAME="654"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">655 </FONT><A NAME="655"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Close the socket (and release the file descriptor).<br><FONT ID="LN">656 </FONT><A NAME="656"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">657 </FONT><A NAME="657"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> socketClose() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">658 </FONT><A NAME="658"></A>&nbsp;&nbsp;&nbsp;&nbsp;socketClose0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">659 </FONT><A NAME="659"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">660 </FONT><A NAME="660"></A><br><FONT ID="LN">661 </FONT><A NAME="661"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketCreate(<FONT ID="Boolean">boolean</FONT> isServer) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">662 </FONT><A NAME="662"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketConnect(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> port, <FONT ID="Int">int</FONT> timeout)<br><FONT ID="LN">663 </FONT><A NAME="663"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">664 </FONT><A NAME="664"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketBind(<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> address, <FONT ID="Int">int</FONT> port)<br><FONT ID="LN">665 </FONT><A NAME="665"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">666 </FONT><A NAME="666"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketListen(<FONT ID="Int">int</FONT> count)<br><FONT ID="LN">667 </FONT><A NAME="667"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">668 </FONT><A NAME="668"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketAccept(<A HREF="../../java/net/SocketImpl.java.htm">SocketImpl</A>  <A HREF= "/58.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> s)<br><FONT ID="LN">669 </FONT><A NAME="669"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">670 </FONT><A NAME="670"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Int">int</FONT> socketAvailable()<br><FONT ID="LN">671 </FONT><A NAME="671"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">672 </FONT><A NAME="672"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketClose0(<FONT ID="Boolean">boolean</FONT> useDeferredClose)<br><FONT ID="LN">673 </FONT><A NAME="673"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">674 </FONT><A NAME="674"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketShutdown(<FONT ID="Int">int</FONT> howto)<br><FONT ID="LN">675 </FONT><A NAME="675"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">676 </FONT><A NAME="676"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> initProto();<br><FONT ID="LN">677 </FONT><A NAME="677"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketSetOption(<FONT ID="Int">int</FONT> cmd, <FONT ID="Boolean">boolean</FONT> on, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> value)<br><FONT ID="LN">678 </FONT><A NAME="678"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">679 </FONT><A NAME="679"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Int">int</FONT> socketGetOption(<FONT ID="Int">int</FONT> opt, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> iaContainerObj) <FONT ID="Throws">throws</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">680 </FONT><A NAME="680"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Int">int</FONT> socketGetOption1(<FONT ID="Int">int</FONT> opt, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> iaContainerObj, <A HREF="../../java/io/FileDescriptor.java.htm">FileDescriptor</A>  <A HREF= "/1312.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> fd) <FONT ID="Throws">throws</FONT> <A HREF="../../java/net/SocketException.java.htm">SocketException</A>  <A HREF= "/2016.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">681 </FONT><A NAME="681"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> socketSendUrgentData(<FONT ID="Int">int</FONT> data)<br><FONT ID="LN">682 </FONT><A NAME="682"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">683 </FONT><A NAME="683"></A><br><FONT ID="LN">684 </FONT><A NAME="684"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Final">final</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> SHUT_RD = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">685 </FONT><A NAME="685"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Final">final</FONT> <FONT ID="Static">static</FONT> <FONT ID="Int">int</FONT> SHUT_WR = <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">686 </FONT><A NAME="686"></A>}<br><FONT ID="LN">687 </FONT><A NAME="687"></A><br><FONT ID="LN">688 </FONT><A NAME="688"></A><FONT ID="Class">class</FONT> InetAddressContainer {<br><FONT ID="LN">689 </FONT><A NAME="689"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/net/InetAddress.java.htm">InetAddress</A>  <A HREF= "/2169.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> addr;<br><FONT ID="LN">690 </FONT><A NAME="690"></A>}<br><FONT ID="LN">691 </FONT><A NAME="691"></A></CODE>              <script type="text/javascript">doContentColumn2();</script>            </div>            <div id="contentHeading3" class="inside">              <!--contentHeading3-->            </div>            <div id="contentColumn3" class="inside">              <!--contentColumn3-->              <script type="text/javascript">doContentColumn3();</script>            </div>            <div id="contentHeading4" class="inside">              <!--contentHeading4-->            </div>            <div id="contentColumn4" class="inside">              <!--contentColumn4-->              <script type="text/javascript">doContentColumn4();</script>            </div>            <div id="contentHeading5" class="inside">              <!--contentHeading5-->            </div>            <div id="contentColumn5" class="inside">              <!--contentColumn5-->              <script type="text/javascript">doContentColumn5();</script>            </div>          </td>          <td id="rightColumn">            <div id="rightHeading1" class="inside">              <!--rightHeading1-->            </div>            <div id="rightColumn1" class="inside">              <!--rightColumn1-->              <a href="/browse.html" title="JavaDoc, source codes and sample codes for all the Java SE, EE, and ME methods organized alphabetically in one central place." id="menu1" target="_top">A to Z: JavaDoc & Examples</a>              <hr class="hide">              <a href="/news" title="Daily Java news and articles, updated continuously from 100+ Java news sources." id="menu2" target="_top">Daily Java News & Articles</a>              <hr class="hide">              <a href="/prj" title="Java Open Source Projects by Tags." id="menu3" target="_top">Open Source Projects</a>              <hr class="hide">              <a href="/src" title="34,081,897 lines of Java Open Source Codes." id="menu4" target="_top">Open Source Codes</a>              <hr class="hide">              <a href="/books" title="A large collection of free online computer books." id="menu5" target="_top">Free Computer Books</a>              <hr class="hide">              <a href=# title="Remove Frame." onclick="removeFrame();" id="menu6" target="_top">Remove Frame</a>              <hr class="hide">              <script type="text/javascript">doRightColumn1();</script>            </div>            <div id="rightHeading2" class="inside">              <!--rightHeading2-->            </div>            <div id="rightColumn2" class="inside">              <!--rightColumn2-->              <script type="text/javascript">doRightColumn2();</script>            </div>            <div id="rightHeading3" class="inside">              Popular Tags            </div>            <div id="rightColumn3" class="inside">              <!--rightColumn3-->              <script type="text/javascript">doRightColumn3();</script>            </div>            <div id="rightHeading4" class="inside">              <!--rightHeading4-->            </div>            <div id="rightColumn4" class="inside">              <!--rightColumn4-->              <script type="text/javascript">doRightColumn4();</script>            </div>            <div id="rightHeading5" class="inside">              <!--rightHeading5-->            </div>            <div id="rightColumn5" class="inside">              <!--rightColumn5-->              <script type="text/javascript">doRightColumn5();</script>            </div>          </td>        </tr>      </table>      <table id="Bottom1">        <tr>          <td id="Bottom10"><script type="text/javascript">doBottom10();</script></td>          <td id="Bottom11"><script type="text/javascript">doBottom11();</script></td>          <td id="Bottom12"><script type="text/javascript">doBottom12();</script></td>          <td id="Bottom13"><script type="text/javascript">doBottom13();</script></td>          <td id="Bottom14"><script type="text/javascript">doBottom14();</script></td>          <td id="Bottom15"><script type="text/javascript">doBottom15();</script></td>          <td id="Bottom16"><script type="text/javascript">doBottom16();</script></td>          <td id="Bottom17"><script type="text/javascript">doBottom17();</script></td>          <td id="Bottom18"><script type="text/javascript">doBottom18();</script></td>          <td id="Bottom10"><script type="text/javascript">doBottom19();</script></td>        </tr>      </table>      <table id="Bottom2">        <tr>          <td id="Bottom20"><script type="text/javascript">doBottom20();</script></td>          <td id="Bottom21"><script type="text/javascript">doBottom21();</script></td>          <td id="Bottom22"><script type="text/javascript">doBottom22();</script></td>          <td id="Bottom23"><script type="text/javascript">doBottom23();</script></td>          <td id="Bottom24"><script type="text/javascript">doBottom24();</script></td>          <td id="Bottom25"><script type="text/javascript">doBottom25();</script></td>          <td id="Bottom26"><script type="text/javascript">doBottom26();</script></td>          <td id="Bottom27"><script type="text/javascript">doBottom27();</script></td>          <td id="Bottom28"><script type="text/javascript">doBottom28();</script></td>          <td id="Bottom29"><script type="text/javascript">doBottom29();</script></td>        </tr>      </table>      <div id="footer" class="inside">        <hr class="hide">        <p>          Java <acronym title="Application Programming Interface">API</acronym> By Example, From Geeks To Geeks.&nbsp;|&nbsp;          <A href="http://121space.com/blog/kickjava" target="_top">Our Blog</A>&nbsp;|&nbsp;          <A href="/cmn/condition.html" target="_top">Conditions of Use</A><A href="/sitemap_index.xml"> </a>&nbsp;|&nbsp;          <A href="/cmn/about.html" target="_top">About Us</A><A href="/all.html.gz">_</a>&nbsp;|&nbsp;          <script type="text/javascript">doFooter();</script>        </p>      </div>    </div>    <script type="text/javascript">doBodyEnd();</script>    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>    <script type="text/javascript">_uacct = "UA-437240-2";urchinTracker();</script>    <DIV ID="divWindow" NAME="divWindow"></DIV>  </body></html>
