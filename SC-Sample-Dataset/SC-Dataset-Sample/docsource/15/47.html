<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"><![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
    <head>
        
        <meta charset="utf-8">
        <!--SourceForge.net: Find and Build Open Source Software-->
        <!--Copyright (c) 1999-2013 SourceForge, Inc. All rights reserved.-->
        <!-- Create Server: sfs-web-1 -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="Community driven projects featuring the latest innovations for cutting edge apps. Our flagship project JBoss AS is the leading Open Source, standards-compliant, Java EE based application server implemented in 100% Pure Java." />
        <meta name="keywords" content="JBoss Community, Dynamic Content, Object Brokering, Operating System Kernels, Open Source, Development, Community, Source Code, Downloads, Software" />
                <title>SourceForge.net: JBoss Community: jboss-cvs-commits</title>        <link href='//fonts.googleapis.com/css?family=Ubuntu:regular,bold' rel='stylesheet' type='text/css'>
                <style type="text/css">
            @font-face {
                font-family: "Pictos";
                src: url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.eot');
                src: local("â˜º"), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.woff') format('woff'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.svg') format('svg');
            }
            #site-header .logo span {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/logo.png");
            }
            #site-footer .wrapper {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/sf-footer-logo.png") !important;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/style.php?secure=0&amp;1385768502" media="all" />
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/global.php?secure=0&amp;1385768502" media="all" />
        
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/neotheme/sfx.css?1385768502" media="all" />
                       <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/phoneix/table.php?secure=0&amp;1385768502" media="all" />
                        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/droppy.php?secure=0&amp;1385768502" media="all" />
                                        <!--   -->
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/modernizr.custom.90514.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery-1.3.2.min.js"></script>
        <script type="text/javascript">
            
                jQuery.noConflict();
            
        </script>

        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.cookie.js"></script>
                        <script type='text/javascript'>
          jQuery(function() {
            jQuery('#fad19 p, .project_summary .downloadbar, .vertical_widget, .horizontal_widget').wrap('<div class="sc"><div class="l1"><div class="l2"><div class="l3"><div class="l4"></div></div></div></div></div>');
          });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.droppy.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sylvester.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/pb.transformie.js"></script>
        <script type='text/javascript'>
            jQuery(function(){
                jQuery('.b-hornav > li:last-child').addClass('last');
                jQuery('.b-hornav > li').each(function() {
                    jQuery('li[class!=disabled]', this).eq(0).addClass('first');
                });
                jQuery('.b-hornav').droppy({speed:0, delay:0});
            });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/c_jquerytabs.js"></script>

        <script type="text/javascript">
        
            jQuery(function(){
                jQuery('.vertical_widget_content ul.tab, #container2 ul.tab, #container3 ul.tab, #container4 ul.tab').tabs({ selected: 0 });
            });
        
        </script>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/include/jquery/jquery.tabs.css?secure=0&amp;1385768502" media="all" />
            
                            <script type="text/javascript" src="http://static.sourceforge.net/include/js/preferences.js"></script>
            <script type="text/javascript">
                        var _visitor = "";
            var jsonly = document.createElement('link');
            jsonly.setAttribute('rel', 'stylesheet');
            jsonly.setAttribute('type', 'text/css');
            jsonly.setAttribute('href', 'http://static.sourceforge.net/css/phoneix/jsonly.css?secure=0&amp;1385768502');
            document.getElementsByTagName('head')[0].appendChild(jsonly);
                    </script>
                                                                    <!-- DoubleClick Random Number -->
    <script type="text/javascript">var dfp_ord=Math.random()*10000000000000000; var dfp_tile = 1; var dfp_ptile = 1;</script>
    <!-- End DoubleClick Random Number -->
    <!-- After META tags -->
                                    
        <script type="text/javascript" src="http://static.sourceforge.net/sfx.js"></script>
        
            <script type="text/javascript">
                        var _gaq = _gaq || [];
                        _gaq.push(['t1._setAccount', 'UA-32013-6']);
                        _gaq.push(['t1._trackPageview']);
                        _gaq.push(['t2._setAccount', 'UA-36130941-1']);
                        _gaq.push(['t2._trackPageview']);
                        (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.notify.js"></script>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/header.js"></script>
    </head>

    <body id="c2" class="short-head">
    
    <!--[if IE 7]><div id="ie7only"><![endif]-->
    <!--[if IE 6]><div id="ie6only"><![endif]-->
    <!--[if IE]><div id="ieonly"><![endif]-->
        
        <div class="mail_archive">
                        <header id="site-header">
                <div class="wrapper">
                    <a href="/" class="logo">
                        <span>SourceForge</span>
                    </a>
                    <form method="get" action="/directory/">
                        <input type="text" id="words" name="q" placeholder="Search">
                    </form>
                    <nav id="nav-site">
                        <a href="/directory/" title="Browse our software.">Browse</a>
                        <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
                        <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
                        <a href="/support" title="Contact us for help and feedback.">Help</a>
                        <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
                    </nav>
                    <nav id="nav-account">
                                                  <div class="logged_out">
                            <a href="https://sourceforge.net/account/login.php">Log In</a>
                            <span>or</span>
                            <a href="https://sourceforge.net/user/registration">Join</a>
                          </div>
                                            </nav>
                </div>
            </header>
            <header id="site-sec-header">
                <div class="wrapper">
                    <nav id="nav-hubs">
                        <h4>Solution Centers</h4>
                        <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
                        <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
                        <a href="http://html5center.sourceforge.net/">HTML5</a>
                        <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
                    </nav>
                    <nav id="nav-collateral">
                      <a href="http://library.slashdotmedia.com/?source=sfnet_header">Resources</a>  
                                              <a href="https://sourceforge.net/user/registration/">Newsletters</a>
                                            </nav>
                </div>
            </header>
                            <!-- DoubleClick Ad Tag -->
<script type="text/javascript">
//<![CDATA[
    document.write('<script src="http://ad.doubleclick.net/adj/ostg.sourceforge/sf_pg_mailarchive_leader;pg=/mailarchive/forum.php;psrch=0;logged_in=0;tile='+dfp_tile+';sz=728x90;ord='+dfp_ord+'?" type="text/javascript"><\/script>');
    dfp_tile++;
//]]>
</script>
<!-- End DoubleClick Ad Tag -->
                                                <div id="page-body">
            <div id="bd" class="inner-bd">
                <div id="doc4" class="yui-t6">
                                                            <div id="breadcrumbs">
                                                    <a href="/">Home</a>
 / <a href="/directory/" >Browse</a>
 / <a href="/projects/jboss/" >JBoss Community</a>
 / <a href="/mail/?group_id=22866" >Mail</a>
 / <a href="/mailarchive/forum.php?set=custom&amp;viewmonth=200507&amp;viewday=&amp;forum_name=jboss-cvs-commits&amp;style=nested&amp;max_rows=100&amp;submit=Change+View"  class="selected">Archive</a>
                                            </div>
                    <!-- begin content -->
            <a name="projectnav"></a>
        <div id="project_nav_container">
            <div class="b-proj__side">
                                
                
                
                <span class="award-bar"><img height="16" width="16" title="April 2003: Project of the Month" alt="April 2003: Project of the Month" src="http://a.fsdn.com/sf/images/develop/icons/potm.png"/></span>
            </div>
            <h1>
                <a href="/projects/jboss/">JBoss Community</a>
                            </h1>
                    <div class="firstwave">
                <ul class="b-hornav">
                    <li id="menu_consume_summary"><a href="/projects/jboss/"><span><span>Summary</span></span></a></li>
<li id="menu_consume_files"><a href="/projects/jboss/files/"><span><span>Files</span></span></a></li>
<li id="menu_consume_reviews"><a href="/projects/jboss/reviews/"><span><span>Reviews</span></span></a></li>
<li id="menu_project_support"><a href="/projects/jboss/support"><span><span>Support</span></span></a></li>
<li id="menu_project_develop"><a href="/projects/jboss/develop"><span><span>Develop</span></span></a>
<ul>
<li id="menu_project_website"><a href="http://www.jboss.org">Web Site</a></li>
<li id="menu_project_screenshots"><a href="/project/screenshots.php?group_id=22866">Screenshots</a></li>
<li id="menu_project_news"><a href="/news/?group_id=22866">News</a></li>
<li id="menu_stats"><a href="/projects/jboss/stats/traffic">Project Statistics</a></li>
<li id="menu_download_stats_dist"><a href="/downloads/jboss/stats_timeline">Download Stats</a></li>
</ul>
</li>
<li id="menu_hostedapps" class="disabled tier" style="display: none;"><a href="/hostedapp/?group_id=22866"><span><span>Hosted&nbsp;Apps</span></span></a></li>
<li id="menu_tracker"><a href="/tracker/?group_id=22866"><span><span>Tracker</span></span></a>
<ul>
<li id="menu_tracker_376685"><a href="/tracker/?group_id=22866&amp;atid=376685">Bugs</a></li>
<li id="menu_tracker_381174"><a href="/tracker/?group_id=22866&amp;atid=381174">Change Notes</a></li>
<li id="menu_tracker_376688"><a href="/tracker/?group_id=22866&amp;atid=376688">Feature Requests</a></li>
<li id="menu_tracker_376687"><a href="/tracker/?group_id=22866&amp;atid=376687">Patches</a></li>
<li id="menu_tracker_stats" class="tools"><a href="/projects/jboss/stats/tracker">Statistics for Trackers</a></li>
<li id="menu_tracker_reports" class="disabled" style="display: none;"><a href="/tracker/reporting/?group_id=22866">Reporting for Trackers</a></li>
<li id="menu_tracker_search"><a href="/search/?group_id=22866&amp;type_of_search=artifact">Search Trackers</a></li>
</ul>
</li>
<li id="menu_mail" class="selected tier"><a href="/mail/?group_id=22866"><span><span>Mailing&nbsp;Lists</span></span></a>
<ul>
<li id="menu_mlist_jboss-cvs-commits"><a href="/mailarchive/forum.php?forum_name=jboss-cvs-commits">jboss-cvs-commits</a></li>
<li id="menu_mlist_jboss-user"><a href="/mailarchive/forum.php?forum_name=jboss-user">jboss-user</a></li>
<li id="menu_mlist_jboss-svn-commits"><a href="/mailarchive/forum.php?forum_name=jboss-svn-commits">jboss-svn-commits</a></li>
<li id="menu_mlist_jboss-development"><a href="/mailarchive/forum.php?forum_name=jboss-development">jboss-development</a></li>
<li id="menu_mlist_jboss-jira"><a href="/mailarchive/forum.php?forum_name=jboss-jira">jboss-jira</a></li>
<li id="menu_mlist_jboss-dev-forums"><a href="/mailarchive/forum.php?forum_name=jboss-dev-forums">jboss-dev-forums</a></li>
<li id="menu_mail_search" class="tools"><a href="/search/?group_id=22866&amp;type_of_search=mlists">Search Mail Lists</a></li>
</ul>
<div class="diamond"></div></li>
<li id="menu_forums" class="disabled tier" style="display: none;"><a href="/projects/jboss/forums"><span><span>Forums</span></span></a>
<ul>
<li id="menu_forum_134719"><a href="/projects/jboss/forums/forum/134719">jboss-development</a></li>
<li id="menu_forum_131211"><a href="/projects/jboss/forums/forum/131211">jboss-user</a></li>
<li id="menu_forums_stats" class="tools"><a href="/projects/jboss/stats/forums">Statistics for Forums</a></li>
<li id="menu_forums_search"><a href="/search/?group_id=22866&amp;type_of_search=forums">Search Forums</a></li>
</ul>
</li>
<li id="menu_code" class="disabled tier" style="display: none;"><a href="#"><span><span>Code</span></span></a>
<ul>
<li id="menu_git_about" class="disabled" style="display: none;"><a href="/scm/?type=git&amp;group_id=22866">Git</a></li>
<li id="menu_git_browse" class="disabled" style="display: none;"><a href="http://jboss.git.sourceforge.net/">Git Browse</a></li>
<li id="menu_git_stats" class="disabled" style="display: none;"><a href="/projects/jboss/stats/scm?repo=GitRepository">Git Statistics</a></li>
<li id="menu_hg_about" class="disabled" style="display: none;"><a href="/scm/?type=hg&amp;group_id=22866">Mercurial</a></li>
<li id="menu_hg_browse" class="disabled" style="display: none;"><a href="http://jboss.hg.sourceforge.net/hgweb/jboss/">Mercurial Browse</a></li>
<li id="menu_hg_stats" class="disabled" style="display: none;"><a href="/projects/jboss/stats/scm?repo=HgRepository">Mercurial Statistics</a></li>
<li id="menu_bzr_about" class="disabled" style="display: none;"><a href="/scm/?type=bzr&amp;group_id=22866">Bazaar</a></li>
<li id="menu_bzr_browse" class="disabled" style="display: none;"><a href="http://jboss.bzr.sourceforge.net/bzr/jboss/">Bazaar Browse</a></li>
<li id="menu_bzr_stats" class="disabled" style="display: none;"><a href="/projects/jboss/stats/scm?repo=BazaarBranch">Bazaar Statistics</a></li>
<li id="menu_cvs_about" class="disabled" style="display: none;"><a href="/scm/?type=cvs&amp;group_id=22866">CVS</a></li>
<li id="menu_cvs_browse" class="disabled" style="display: none;"><a href="http://jboss.cvs.sourceforge.net/jboss/">CVS Browse</a></li>
<li id="menu_cvs_stats" class="disabled" style="display: none;"><a href="/projects/jboss/stats/scm?repo=CVSRepository">CVS Statistics</a></li>
<li id="menu_svn_about" class="disabled" style="display: none;"><a href="/scm/?type=svn&amp;group_id=22866">SVN</a></li>
<li id="menu_svn_browse" class="disabled" style="display: none;"><a href="http://jboss.svn.sourceforge.net/viewvc/jboss/">SVN Browse</a></li>
<li id="menu_svn_stats" class="disabled" style="display: none;"><a href="/projects/jboss/stats/scm?repo=SVNRepository">SVN Statistics</a></li>
</ul>
</li>
<li id="menu_newadmin" class="disabled tier" style="display: none;"><a href="/project/admin/?group_id=22866"><span><span>Project&nbsp;Admin</span></span></a>
<ul>
<li id="menu_editgroupinfo" class="disabled" style="display: none;"><a href="/project/admin/public_info.php?group_id=22866">Settings</a></li>
<li id="menu_features" class="disabled" style="display: none;"><a href="/project/admin/features.php?group_id=22866">Features</a></li>
<li id="menu_userperms" class="disabled" style="display: none;"><a href="/project/admin/project_membership.php?group_id=22866">Members</a></li>
<li id="menu_stats_admin" class="disabled" style="display: none;"><a href="/project/admin/stats.php?group_id=22866">Analytics</a></li>
</ul>
</li>

                </ul>
            </div>
                </div>
        <div style="clear: both;"></div>
            




<p>
<h3>Email Archive: <a href="forum.php?forum_name=jboss-cvs-commits"><!-- google_ad_section_start -->jboss-cvs-commits<!-- google_ad_section_end --></A> (read-only)
</h3>
</p>

<table width="450" border=0>
    <tr>
        <td>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th>
			<center><b>2002:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200204">(544)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200205">(1715)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200206">(1059)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200207">(886)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200208">(1214)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200209">(1375)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200210">(1664)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200211">(1153)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200212">(1084)</a>
								</td>
		<tr>
		<th>
			<center><b>2003:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200301">(1630)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200302">(1634)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200303">(1979)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200304">(1119)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200305">(1850)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200306">(1231)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200307">(1168)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200308">(1840)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200309">(1038)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200310">(1127)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200311">(1458)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200312">(854)</a>
								</td>
		<tr>
		<th>
			<center><b>2004:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200401">(1145)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200402">(1064)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200403">(2242)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200404">(1728)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200405">(1346)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200406">(1280)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200407">(1681)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200408">(2388)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200409">(2233)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200410">(3246)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200411">(3248)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200412">(1775)</a>
								</td>
		<tr>
		<th>
			<center><b>2005:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200501">(3407)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200502">(3049)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200503">(2402)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200504">(3687)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200505">(3289)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200506">(5731)</a>
								</td>
			<td bgcolor="#cccccc">
			<sub>Jul</sub><br />
						<b>
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507">(3905)</a>
									</b>
					</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200508">(5843)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200509">(5149)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200510">(6866)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200511">(4051)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200512">(4646)</a>
								</td>
		<tr>
		<th>
			<center><b>2006:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200601">(7356)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200602">(4713)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200603">(9447)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200604">(6553)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200605">(6206)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200606">(4301)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200607">(1160)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200608">(23)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200609">(11)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200610">(19)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200611">(26)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200612">(15)</a>
								</td>
		<tr>
		<th>
			<center><b>2007:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200701">(28)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200702">(24)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
	</table>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th colspan="7">
			
		</th>
	</tr>
	<tr>
		<th bgcolor="#cccccc">S</th>
		<th bgcolor="#cccccc">M</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">W</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">F</th>
		<th bgcolor="#cccccc">S</th>
	</tr>
	<tr>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			1
		</th>
			<th bgcolor="#eeeeee">
			2
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=1">
					(116)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=2">
					(5)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			3
		</th>
			<th bgcolor="#eeeeee">
			4
		</th>
			<th bgcolor="#eeeeee">
			5
		</th>
			<th bgcolor="#eeeeee">
			6
		</th>
			<th bgcolor="#eeeeee">
			7
		</th>
			<th bgcolor="#eeeeee">
			8
		</th>
			<th bgcolor="#eeeeee">
			9
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=3">
					(11)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=4">
					(131)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=5">
					(71)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=6">
					(181)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=7">
					(322)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=8">
					(174)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=9">
					(32)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			10
		</th>
			<th bgcolor="#eeeeee">
			11
		</th>
			<th bgcolor="#eeeeee">
			12
		</th>
			<th bgcolor="#eeeeee">
			13
		</th>
			<th bgcolor="#eeeeee">
			14
		</th>
			<th bgcolor="#eeeeee">
			15
		</th>
			<th bgcolor="#eeeeee">
			16
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=10">
					(76)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=11">
					(173)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=12">
					(76)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=13">
					(58)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=14">
					(102)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=15">
					(236)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=16">
					(59)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			17
		</th>
			<th bgcolor="#eeeeee">
			18
		</th>
			<th bgcolor="#eeeeee">
			19
		</th>
			<th bgcolor="#eeeeee">
			20
		</th>
			<th bgcolor="#eeeeee">
			21
		</th>
			<th bgcolor="#eeeeee">
			22
		</th>
			<th bgcolor="#eeeeee">
			23
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=17">
					(55)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=18">
					(189)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=19">
					(134)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=20">
					(121)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=21">
					(93)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=22">
					(209)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=23">
					(31)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			24
		</th>
			<th bgcolor="#eeeeee">
			25
		</th>
			<th bgcolor="#eeeeee">
			26
		</th>
			<th bgcolor="#eeeeee">
			27
		</th>
			<th bgcolor="#eeeeee">
			28
		</th>
			<th bgcolor="#eeeeee">
			29
		</th>
			<th bgcolor="#eeeeee">
			30
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=24">
					(97)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=25">
					(267)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=26">
					(201)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=27">
					(259)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=28">
					(160)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=29">
					(178)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=30">
					(32)
					</a>
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			31
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;style=nested&amp;viewmonth=200507&amp;viewday=31">
					(56)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
</table>
        </td>
    </tr>
</table>

<form action="/mailarchive/forum.php" method="get">
<input type="hidden" name="set" value="custom">
<input type="hidden" name="viewmonth" value="200507">
<input type="hidden" name="viewday" value="0">

<table border="0" width="500">
    <tr>
        <td>
            <small>
            
<select name="forum_name">
	<option value="jboss-dev-forums">jboss-dev-forums</option>
	<option value="jboss-development">jboss-development</option>
	<option value="jboss-user">jboss-user</option>
	<option value="jboss-cvs-commits" selected="selected">jboss-cvs-commits</option>
	<option value="jboss-svn-commits">jboss-svn-commits</option>
	<option value="jboss-jira">jboss-jira</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="style">
	<option value="nested" selected="selected">Nested</option>
	<option value="flat">Flat</option>
	<option value="threaded">Threaded</option>
	<option value="ultimate">Ultimate</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="max_rows">
	<option value="25">Show 25</option>
	<option value="50">Show 50</option>
	<option value="75">Show 75</option>
	<option value="100" selected="selected">Show 100</option>
</select>

            </small>
        </td>
        <td>
            <small>
            <input type="submit" name="submit" value="Change View">
            </small>
        </td>
    </tr>
</table>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785430">[jboss-cvs] JBossRemoting/src/main/org/jboss/remoting/transport/multiplex    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ron Sigal &lt;ron_sigal@ya...&gt; -	2005-07-30 05:36</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: rsigal  
  Date: 05/07/30 01:35:36

  Modified:    src/main/org/jboss/remoting/transport/multiplex   
                        SocketId.java Multiplexor.java Encoder.java
  Log:
  Insert tags in output stream only when destination changes.
  
  Revision  Changes    Path
  1.2       +70 -99    JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/SocketId.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SocketId.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/SocketId.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- SocketId.java	28 Jul 2005 18:50:28 -0000	1.1
  +++ SocketId.java	30 Jul 2005 05:35:36 -0000	1.2
  @@ -4,6 +4,7 @@
    */
   package org.jboss.remoting.transport.multiplex;
   
  +import java.io.IOException;
   import java.io.Serializable;
   import java.io.UnsupportedEncodingException;
   import java.util.HashSet;
  @@ -19,21 +20,26 @@
    */
   public class SocketId implements Serializable
   {
  -   byte[] id;
      protected static final Logger log = Logger.getLogger(SocketId.class);
      private static final String ISO_8859_1 = "ISO-8859-1";
      
      public static final int MULTIPLEXOR_PORT = -1;
      public static final int SERVER_SOCKET_PORT = -2;
  -   public static final SocketId MULTIPLEXOR_SOCKET_ID = new SocketId(MULTIPLEXOR_PORT);
  -   public static final SocketId SERVER_SOCKET_ID = new SocketId(SERVER_SOCKET_PORT);
  +   public static final int DEADLETTER_PORT 		= -3;
  +   public static final int INITIAL_OUTPUT_PORT 	= -4;
  +   private static final int MIN_PORT			=  INITIAL_OUTPUT_PORT;
  +
  +   public static final SocketId MULTIPLEXOR_SOCKET_ID 	 = new SocketId((short) MULTIPLEXOR_PORT);
  +   public static final SocketId SERVER_SOCKET_ID 		 = new SocketId((short) SERVER_SOCKET_PORT);
  +   public static final SocketId DEADLETTER_SOCKET_ID 	 = new SocketId((short) DEADLETTER_PORT);
  +   public static final SocketId INITIAL_OUTPUT_SOCKET_ID = new SocketId((short) INITIAL_OUTPUT_PORT);
      
      private static HashSet portsInUse = new HashSet();
      private static HashSet portsFreed = new HashSet();
      private static int nextNewPort = 1;
      
      private int port;
  -
  +   byte[] bytes;
      
   /**
    *
  @@ -41,6 +47,7 @@
      public SocketId()
      {
         port = getFreePort();
  +      setBytes(port);
      }
      
      
  @@ -48,82 +55,11 @@
    * 
    * @param port
    */
  -   public SocketId(int port)
  +   public SocketId(int port) throws IOException
      {
  +      checkPortValue(port);
         this.port = port;
  -      
  -      try
  -      {
  -         id = Integer.toString(port).getBytes(ISO_8859_1);
  -      }
  -      catch (UnsupportedEncodingException e)
  -      { 
  -         // ISO-8859-1 should be standard in all Java implementations
  -         log.fatal("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -         e.printStackTrace();
  -         throw new RuntimeException("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -      }
  -   } 
  -   
  -///**
  -// *
  -// */
  -//   public SocketId()
  -//   {
  -//      byte[] hostArray = null;
  -//      
  -//      try
  -//      {
  -//         hostArray = InetAddress.getLocalHost().getAddress();
  -//      }
  -//      catch (UnknownHostException e)
  -//      {
  -//         // shouldn't happen
  -//         log.fatal("cannot get local host IP address in byte[] form");
  -//         e.printStackTrace();
  -//         throw new RuntimeException();
  -//      }
  -//      
  -//      Integer seconds = new Integer((int) (new Date().getTime()));
  -//      byte[] secondsArray = new byte[4];
  -//      
  -//      try
  -//      {
  -//         secondsArray = seconds.toString().getBytes(ISO_8859_1);
  -//      }
  -//      catch (UnsupportedEncodingException e)
  -//      { 
  -//         // ISO-8859-1 should be standard in all Java implementations
  -//         log.fatal("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -//         e.printStackTrace();
  -//         throw new RuntimeException("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -//      }
  -//      
  -//      ByteArrayOutputStream baos = new ByteArrayOutputStream();
  -//      
  -//      try
  -//      {
  -//         baos.write(hostArray);
  -//         baos.write(secondsArray);
  -//      }
  -//      catch (IOException e)
  -//      {
  -//         // shouldn't happen
  -//         log.fatal("cannot write byte[] to ByteArrayOutputStream");
  -//         e.printStackTrace();
  -//         throw new RuntimeException();     
  -//      }
  -//      
  -//      id = baos.toByteArray();
  -//   }
  -   
  -   
  -/**
  - * 
  - */
  -   public SocketId(long socketIdLong)
  -   {
  -      this(Long.toString(socketIdLong));
  +      setBytes(port);
      }
      
      
  @@ -131,35 +67,28 @@
    * 
    * @param id
    */
  -   public SocketId(byte[] id)
  +   public SocketId(byte[] bytes) throws IOException
      {
  -      this.id = id;
  +      this.bytes = bytes;
  +      setPort(bytes);
  +      checkPortValue(port);
      }
      
      
   /**
    * 
  - * @param socketIdString
  + * @param port
    */
  -   public SocketId(String socketIdString)
  -   {
  -      try
  -      {
  -         id = socketIdString.getBytes(ISO_8859_1);
  -      }
  -      catch (UnsupportedEncodingException e)
  +   protected SocketId(short port)
         { 
  -         // ISO-8859-1 should be standard in all Java implementations
  -         log.fatal("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -         e.printStackTrace();
  -         throw new RuntimeException("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  -      }
  +      this.port = port;
  +      setBytes(port);
      }
      
      
      public byte[] toByteArray()
      {
  -      return id;
  +      return bytes;
      }
      
      
  @@ -189,7 +118,49 @@
      }
      
      
  -   private int getFreePort()
  +   protected void checkPortValue(int port) throws IOException
  +   {
  +      if (port &lt; MIN_PORT)
  +      {
  +         log.error("attempt to create port with illegal value: " + port);
  +         throw new IOException("attempt to create port with illegal value: " + port);
  +      }
  +   }
  +   
  +   
  +   protected void setPort(byte[] bytes)
  +   {
  +      try
  +      {
  +         port = Integer.parseInt(new String(bytes, ISO_8859_1));
  +      }
  +      catch (UnsupportedEncodingException e)
  +      { 
  +         // ISO-8859-1 should be standard in all Java implementations
  +         log.fatal("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  +         e.printStackTrace();
  +         throw new RuntimeException("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  +      }
  +   }
  +   
  +   
  +   protected void setBytes(int port)
  +   {  
  +      try
  +      {
  +         bytes = Integer.toString(port).getBytes(ISO_8859_1);
  +      }
  +      catch (UnsupportedEncodingException e)
  +      { 
  +         // ISO-8859-1 should be standard in all Java implementations
  +         log.fatal("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  +         e.printStackTrace();
  +         throw new RuntimeException("org.jboss.remoting.transport.multiplex.Encoder(): charset ISO-8859-1 not found", e);
  +      }
  +   }
  +   
  +   
  +   protected int getFreePort()
      {
         // reuse a previously used, then freed, port number
         if (!portsFreed.isEmpty())
  
  
  
  1.2       +33 -25    JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/Multiplexor.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Multiplexor.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/Multiplexor.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- Multiplexor.java	28 Jul 2005 18:50:28 -0000	1.1
  +++ Multiplexor.java	30 Jul 2005 05:35:36 -0000	1.2
  @@ -9,8 +9,6 @@
   import java.io.DataOutputStream;
   import java.io.IOException;
   import java.io.InputStream;
  -import java.io.ObjectInputStream;
  -import java.io.ObjectOutputStream;
   import java.io.OutputStream;
   import java.io.PipedInputStream;
   import java.io.PipedOutputStream;
  @@ -163,8 +161,8 @@
         outputStreamMap = new ConcurrentHashMap();
         deadLetterOutputStream = new ByteArrayOutputStream();
         outputStreamMap.put(deadLetterOutputStreamKey, deadLetterOutputStream);
  -      serverSocketOutputStream = (OutputStream) outputStreamMap.get(SocketId.SERVER_SOCKET_ID);
         serverSocketInputStream = getAnInputStream(SocketId.SERVER_SOCKET_ID);
  +      serverSocketOutputStream = (OutputStream) outputStreamMap.get(SocketId.SERVER_SOCKET_ID);
    
         writeThread = new WriteThread(this, writeQueue, socket.getOutputStream());
         writeThread.start();
  @@ -288,7 +286,7 @@
         return getaMultiplexor(onClient, host, port);
      }
      
  -   
  +   int ips = 0;
   /**
    * 
    * @param socketId
  @@ -297,6 +295,7 @@
    */
      public InputStream getAnInputStream(SocketId socketId) throws IOException
      {
  +//      PipedInputStream  pis = new RobustPipedInputStream(++ips);
         PipedInputStream  pis = new PipedInputStream();
         PipedOutputStream pos = new PipedOutputStream(pis);
         outputStreamMap.put(socketId, pos);
  @@ -382,6 +381,8 @@
    */
      public void write(SocketId socketId, byte[] content) throws IOException
      {
  +      log.debug("Multiplexor.write(): writing " + content.length + " bytes to socket " + socketId.getPort());
  +      
         try
         {
            writeQueue.put(new Message(socketId, content));
  @@ -434,19 +435,10 @@
         
         running = false;
         
  -      try 
  -      {
  -         socket.close();
  -      }
  -      catch (IOException e)
  -      {
  -         log.equals("unable to close socket");
  -      }
  -      
         if (writeThread.isRunning())
            writeThread.shutdown();
         
  -      if (readThread.isRunning())
  +//      if (readThread.isRunning())
            readThread.shutdown();
         
         while (!writeThread.isStopped() &amp;&amp; !readThread.isStopped())
  @@ -458,6 +450,16 @@
            catch (InterruptedException e) {}
         }
         
  +      
  +      try 
  +      {
  +         socket.close();
  +      }
  +      catch (IOException e)
  +      {
  +         log.equals("unable to close socket");
  +      }
  +      
         log.info("multiplexor shut down");
      }
      
  @@ -488,6 +490,7 @@
        private Multiplexor multiplexor;
        private LinkedQueue writeQueue;
        private OutputStream os;
  +     private Encoder encoder;
        private boolean trace;
        
        
  @@ -496,6 +499,7 @@
           this.multiplexor = multiplexor;
           this.writeQueue = writeQueue;
           this.os = os;
  +        encoder = new Encoder();
           trace = log.isTraceEnabled();
        }
        
  @@ -508,10 +512,13 @@
   
        protected void doRun()
        {
  +        while (!writeQueue.isEmpty())
  +        {
           try
           {
              Message msg = (Message) writeQueue.take();
  -           Encoder.encode(msg.getSocketid(), msg.getContent(), os);
  +              encoder.encode(msg.getSocketid(), msg.getContent(), os);
  +              log.debug("write thread wrote: " + msg.getContent().length + " bytes to socket " + msg.getSocketid().getPort());
           }
           catch (InterruptedException e)
           {
  @@ -522,6 +529,7 @@
              handleError("Exiting on i/o error", e);
           }   
        }
  +     }
        
        
   /**
  
  
  
  1.2       +95 -23    JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/Encoder.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Encoder.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossRemoting/src/main/org/jboss/remoting/transport/multiplex/Encoder.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- Encoder.java	28 Jul 2005 18:50:28 -0000	1.1
  +++ Encoder.java	30 Jul 2005 05:35:36 -0000	1.2
  @@ -9,6 +9,7 @@
   import java.io.InputStream;
   import java.io.InterruptedIOException;
   import java.io.OutputStream;
  +import java.util.Enumeration;
   
   import org.jboss.logging.Logger;
   
  @@ -21,7 +22,6 @@
    * @author &lt;a href="mailto:r.sigal@... Sigal&lt;/a&gt;
    * 
    * TODO: change 0 marker to 255 (0 is too common)
  - * TODO: add marker only when target changes
    */
   public class Encoder
   {
  @@ -34,6 +34,17 @@
      private static int outZeroCount = 0;
      private static int inZeroCount = 0;
      
  +   private SocketId previousDestinationId = SocketId.INITIAL_OUTPUT_SOCKET_ID;
  +   
  +   
  +/**
  + * 
  + *
  + */
  +   public Encoder()
  +   {
  +   }
  +   
      
   /**
    * 
  @@ -43,27 +54,31 @@
    * 
    * TODO: only write header when switching streams
    */
  -   public static void encode(SocketId destinationId, byte[] bytes,  OutputStream os) throws IOException
  +   public void encode(SocketId destinationId, byte[] bytes,  OutputStream os) throws IOException
  +   {  
  +      if (!destinationId.equals(previousDestinationId))
      {  
         if (log.isDebugEnabled())
         {
            log.debug("encode(): writing: 0");
            byte[] byteArray = destinationId.toByteArray();
  -         int l = byteArray.length;
  -         for (int i = 0; i &lt; l; i++)
  +            for (int i = 0; i &lt; byteArray.length; i++)
               log.debug("encode(): writing: " + byteArray[i]);
            log.debug("encode(): writing: 0");
         }
         
  +         previousDestinationId = destinationId;
  +         
         os.write(0);
         os.write(destinationId.toByteArray());
         os.write(0);
  +      }
         
         int length = bytes.length;
         
         log.debug("encode(): writing " + length + " bytes to socketId " + destinationId.getPort() );
         
  -      for (int i = 0; i &lt; bytes.length;i++)
  +      for (int i = 0; i &lt; bytes.length; i++)
         {
            int b = bytes[i];
   
  @@ -105,6 +120,7 @@
      
      public static class DecoderThread extends StoppableThread
      {
  +      private static final Logger log = Logger.getLogger(Encoder.DecoderThread.class);
         private long socketId;
         private Encoder encoder;
         private InputStream is;
  @@ -115,7 +131,7 @@
         private ConcurrentHashMap outputStreamMap;
         private int state;
         private boolean trace; 
  -      private static final Logger log = Logger.getLogger(Encoder.DecoderThread.class);
  +      private boolean multiplexorShuttingDown = false;
          
         
         public DecoderThread(ConcurrentHashMap outputStreamMap,
  @@ -197,15 +213,14 @@
                      if (b == 0)
                      {
                         state = BASE;
  -                      int port = Integer.parseInt(bos.toString());
  -                      SocketId socketId = new SocketId(port);
  +                      SocketId socketId = new SocketId(bos.toByteArray());
                         bos.reset();
                         currentOutputStream = (OutputStream) outputStreamMap.get(socketId);
  -                      log.debug("redirecting input to socket: " + port);
  +                      log.debug("redirecting input to socket: " + socketId.getPort());
                         
                         if (currentOutputStream == null)
                         {
  -                         log.error("unknown socket id: " + port);
  +                         log.error("unknown socket id: " + socketId.getPort());
                            currentOutputStream = (OutputStream) outputStreamMap.get(Multiplexor.deadLetterOutputStreamKey);
                            
                            if (currentOutputStream == null)
  @@ -238,7 +253,7 @@
               handleError("i/o error", e);
            }
            
  -         shutdown();
  +         super.shutdown();
            
            log.debug("last byte: " + b);
            log.debug("read " + inZeroCount + " zero's");
  @@ -249,19 +264,22 @@
         {
            try
            {
  -            os.close();
  +            is.close();
            }
            catch (Exception ignored)
            {
               if (trace)
  -               log.trace("unable to close socket's OutputStream: " + ignored.getMessage(), ignored);
  +               log.trace("unable to close InputStream: " + ignored.getMessage(), ignored);
            }
            
   //         TODO: work this out
   //         if (terminatedOnError)
   //            multiplexor.shutdown(); 
            
  -         log.info("Ending decoder thread");  
  +         flushPipes();
  +         stayAlive();
  +         
  +         log.info("finishing doShutDown()");
         }
        
         
  @@ -284,5 +302,59 @@
   //         running = false;
   //         terminatedOnError = true;
         }
  +      
  +      
  +      protected synchronized void stayAlive()
  +      {
  +         log.info("DecoderThread entering stayAlive()");
  +         
  +         while(!multiplexorShuttingDown)
  +         {
  +            try
  +            {
  +               wait();
  +            }
  +            catch (InterruptedException e)
  +            {
  +               log.info("stayAlive(): InterruptedException");
  +            }
  +            log.info("looping in stayAlive()");
  +         }
  +         
  +         log.info("Ending decoder thread"); 
  +      }
  +      
  +      
  +      protected void flushPipes()
  +      {
  +         Enumeration enum = outputStreamMap.elements();
  +         
  +         while (enum.hasMoreElements())
  +         {
  +            OutputStream os = (OutputStream) enum.nextElement();
  +            
  +            try
  +            {
  +               os.flush();
  +//               os.close();
  +            }
  +            catch (IOException ignored)
  +            {
  +               log.error("unable to flush a PipedOutputStream");
  +            }
  +         }
  +         
  +         log.info("DecoderThread flushed PipedOutputStream's");
  +      }
  +      
  +/**
  + * 
  + */
  +      public synchronized void shutdown()
  +      {
  +         log.info("shutting down DecoderThread");
  +         multiplexorShuttingDown = true;
  +         notify();
  +      }
      }
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785429">[jboss-cvs] cvs.forge.jboss.com Activity</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;forge-admin@jb...&gt; -	2005-07-30 05:01</small><br>
			  		<br>
	  		<small><b>Attachments:</b>
	  			  			<a href="attachment.php?list_name=jboss-cvs-commits&message_id=E1DyjSL-0006bU-Po%40committer01.frg.pub.inap.atl.jboss.com&counter=1">Message as HTML</a> &nbsp;&nbsp;&nbsp;&nbsp;
	  			  		</small>
	  		</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Commit from starksm on branch Branch_4_0 (2005-07-29 01:00 EDT)
----------------------------------------

Allow the delete of the jbossnet/admindevel generated source to fail

  jbosstest  imports/code-generation.xml  1.2.2.16


Commit from bstansberry on branch Branch_4_0 (2005-07-29 01:48 EDT)
--------------------------------------------

Ensure snapshot configuration is done before assigning Manager to Context; otherwise Context starts incompletely configure Manager

  jboss-tomcat  src/main/org/jboss/web/tomcat/tc5/TomcatDeployer.java  1.26.2.12


Commit from bwang (2005-07-29 01:56 EDT)
-----------------

Renamed

+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedListAopTest.java             1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedMapAopTest.java              1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedSetAopTest.java              1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CollectionAopTest.java             1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/ObjectGraphAopTest.java            1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/ReplicatedObjectGraphAopTest.java  1.1


Commit from bwang (2005-07-29 01:57 EDT)
-----------------

For integrated example

+ JBossCache  tests/functional/org/jboss/cache/aop/test/NetworkAdmin.java    1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/test/NetworkDomain.java   1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/test/NetworkElement.java  1.1
+ JBossCache  tests/functional/org/jboss/cache/aop/test/NetworkNode.java     1.1


Commit from bwang (2005-07-29 01:59 EDT)
-----------------

Integrated test case

+ JBossCache  tests/functional/org/jboss/cache/aop/integrated/ReplicatedNetworkManagementAopTest.java  1.1


Commit from bwang (2005-07-29 02:08 EDT)
-----------------

Again

- JBossCache  tests/functional/org/jboss/cache/aop/Collection/CachedListAopTest.java             1.2
- JBossCache  tests/functional/org/jboss/cache/aop/Collection/CachedMapAopTest.java              1.2
- JBossCache  tests/functional/org/jboss/cache/aop/Collection/CachedSetAopTest.java              1.2
- JBossCache  tests/functional/org/jboss/cache/aop/Collection/CollectionAopTest.java             1.2
- JBossCache  tests/functional/org/jboss/cache/aop/Collection/ObjectGraphAopTest.java            1.2
- JBossCache  tests/functional/org/jboss/cache/aop/Collection/ReplicatedObjectGraphAopTest.java  1.2


Commit from bwang (2005-07-29 02:16 EDT)
-----------------

Again

- JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedListAopTest.java             1.2
- JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedMapAopTest.java              1.2
- JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedSetAopTest.java              1.2
- JBossCache  tests/functional/org/jboss/cache/aop/collection/CollectionAopTest.java             1.2
- JBossCache  tests/functional/org/jboss/cache/aop/collection/ObjectGraphAopTest.java            1.2
- JBossCache  tests/functional/org/jboss/cache/aop/collection/ReplicatedObjectGraphAopTest.java  1.2


Commit from bwang (2005-07-29 02:18 EDT)
-----------------

OMT

+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedListAopTest.java             1.3
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedMapAopTest.java              1.3
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedSetAopTest.java              1.3
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/CollectionAopTest.java             1.3
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/ObjectGraphAopTest.java            1.3
+ JBossCache  tests/functional/org/jboss/cache/aop/collection/ReplicatedObjectGraphAopTest.java  1.3


Commit from bwang (2005-07-29 02:20 EDT)
-----------------

Refactor size implementation.

  JBossCache  src/org/jboss/cache/aop/CachedListInterceptor.java  1.5
  JBossCache  src/org/jboss/cache/aop/CachedSetInterceptor.java   1.5


Commit from starksm on branch Branch_4_0 (2005-07-29 03:05 EDT)
----------------------------------------

Add the CARDeployer getter/setter

  jboss-management  src/main/org/jboss/management/j2ee/LocalJBossServerDomainMBean.java  1.1.6.3


Commit from starksm (2005-07-29 03:07 EDT)
-------------------

Add the CARDeployer getter/setter

  jboss-management  src/main/org/jboss/management/j2ee/LocalJBossServerDomainMBean.java  1.2


Commit from bwang (2005-07-29 04:00 EDT)
-----------------

Corrected the package name with lower case

  JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedListAopTest.java             1.4
  JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedMapAopTest.java              1.4
  JBossCache  tests/functional/org/jboss/cache/aop/collection/CachedSetAopTest.java              1.4
  JBossCache  tests/functional/org/jboss/cache/aop/collection/CollectionAopTest.java             1.4
  JBossCache  tests/functional/org/jboss/cache/aop/collection/ObjectGraphAopTest.java            1.4
  JBossCache  tests/functional/org/jboss/cache/aop/collection/ReplicatedObjectGraphAopTest.java  1.4


Commit from dimitris on branch Branch_4_0 (2005-07-29 05:12 EDT)
-----------------------------------------

[JBAS-1992] - avoid opening .xml files as zip files

  jboss-tomcat  src/main/org/jboss/web/tomcat/tc5/TomcatDeployer.java  1.26.2.13


Commit from dimitris (2005-07-29 05:13 EDT)
--------------------

[JBAS-1992] - avoid opening .xml files as zip files

  jboss-tomcat  src/main/org/jboss/web/tomcat/tc5/TomcatDeployer.java  1.43


Commit from tdiesler (2005-07-29 05:57 EDT)
--------------------

Decouple jbossws from server module.

  jboss  build.xml                                                                  1.194
- jboss  src/jdk15/javax/jws/HandlerChain.java                                      1.2
- jboss  src/jdk15/javax/jws/Oneway.java                                            1.2
- jboss  src/jdk15/javax/jws/WebMethod.java                                         1.2
- jboss  src/jdk15/javax/jws/WebParam.java                                          1.2
- jboss  src/jdk15/javax/jws/WebResult.java                                         1.2
- jboss  src/jdk15/javax/jws/WebService.java                                        1.2
- jboss  src/jdk15/javax/jws/soap/InitParam.java                                    1.2
- jboss  src/jdk15/javax/jws/soap/SOAPBinding.java                                  1.2
- jboss  src/jdk15/javax/jws/soap/SOAPMessageHandler.java                           1.2
- jboss  src/jdk15/javax/jws/soap/SOAPMessageHandlers.java                          1.2
- jboss  src/jdk15/org/jboss/ws/metadata/EndpointMetaData.java                      1.5
- jboss  src/jdk15/org/jboss/ws/metadata/FaultMetaData.java                         1.2
- jboss  src/jdk15/org/jboss/ws/metadata/HolderUtils.java                           1.3
- jboss  src/jdk15/org/jboss/ws/metadata/JavaUtils.java                             1.4
- jboss  src/jdk15/org/jboss/ws/metadata/OperationMetaData.java                     1.5
- jboss  src/jdk15/org/jboss/ws/metadata/ParameterMetaData.java                     1.4
- jboss  src/jdk15/org/jboss/ws/metadata/ServiceMetaData.java                       1.8
- jboss  src/jdk15/org/jboss/ws/metadata/Style.java                                 1.2
- jboss  src/jdk15/org/jboss/ws/metadata/TypeMappingMetaData.java                   1.2
- jboss  src/jdk15/org/jboss/ws/metadata/TypesMetaData.java                         1.5
- jboss  src/jdk15/org/jboss/ws/metadata/UnifiedMetaData.java                       1.3
- jboss  src/jdk15/org/jboss/ws/metadata/jsr109/PortComponentMetaData.java          1.2
- jboss  src/jdk15/org/jboss/ws/metadata/jsr109/WebserviceDescriptionMetaData.java  1.2
- jboss  src/jdk15/org/jboss/ws/metadata/jsr109/WebservicesFactory.java             1.3
- jboss  src/jdk15/org/jboss/ws/metadata/jsr109/WebservicesMetaData.java            1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/Extendable.java                       1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/NCName.java                           1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDL11Reader.java                     1.15
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDL11Writer.java                     1.6
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDL20Reader.java                     1.5
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDL20Writer.java                     1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLBinding.java                      1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLBindingFault.java                 1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLBindingOperation.java             1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLBindingOperationInput.java        1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLBindingOperationOutput.java       1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLConstants.java                    1.4
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLDefinitions.java                  1.6
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLDefinitionsFactory.java           1.4
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLDocumentation.java                1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLEndpoint.java                     1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLException.java                    1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLFeature.java                      1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLImport.java                       1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInclude.java                      1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterface.java                    1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceFault.java               1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperation.java           1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationInfault.java    1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationInput.java      1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationOutfault.java   1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationOutput.java     1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLProperty.java                     1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLService.java                      1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLTypes.java                        1.4
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLUtils.java                        1.8
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/WSDLWriter.java                       1.7
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/xsd/SchemaUtils.java                  1.8
- jboss  src/jdk15/org/jboss/ws/metadata/wsdl/xsd/XSDWriter.java                    1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Config.java                           1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Encrypt.java                          1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Operation.java                        1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Port.java                             1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Sign.java                             1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Target.java                           1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Targetable.java                       1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/Timestamp.java                        1.2
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/WSSecurityConfiguration.java          1.3
- jboss  src/jdk15/org/jboss/ws/metadata/wsse/WSSecurityConfigurationFactory.java   1.5


Commit from tdiesler (2005-07-29 06:03 EDT)
--------------------

Decouple jbossws from server module.

  webservice  build.xml                                                                 1.65
+ webservice  src/main/javax/jws/HandlerChain.java                                      1.1
+ webservice  src/main/javax/jws/Oneway.java                                            1.1
+ webservice  src/main/javax/jws/WebMethod.java                                         1.1
+ webservice  src/main/javax/jws/WebParam.java                                          1.1
+ webservice  src/main/javax/jws/WebResult.java                                         1.1
+ webservice  src/main/javax/jws/WebService.java                                        1.1
+ webservice  src/main/javax/jws/soap/InitParam.java                                    1.1
+ webservice  src/main/javax/jws/soap/SOAPBinding.java                                  1.1
+ webservice  src/main/javax/jws/soap/SOAPMessageHandler.java                           1.1
+ webservice  src/main/javax/jws/soap/SOAPMessageHandlers.java                          1.1
- webservice  src/main/org/jboss/ws/AbstractMetaDataBuilder.java                        1.21
- webservice  src/main/org/jboss/ws/AnnotationsMetaDataBuilderEJB21.java                1.4
- webservice  src/main/org/jboss/ws/AnnotationsMetaDataBuilderEJB3.java                 1.6
- webservice  src/main/org/jboss/ws/AnnotationsMetaDataBuilderJSE.java                  1.4
- webservice  src/main/org/jboss/ws/ClientMetaDataBuilder.java                          1.11
- webservice  src/main/org/jboss/ws/JSR109MetaDataBuilder.java                          1.9
- webservice  src/main/org/jboss/ws/MetaDataSynchronization.java                        1.7
+ webservice  src/main/org/jboss/ws/jaxrpc/MetaDataSynchronization.java                 1.1
  webservice  src/main/org/jboss/ws/jaxrpc/ServiceImpl.java                             1.27
+ webservice  src/main/org/jboss/ws/metadata/AbstractMetaDataBuilder.java               1.1
+ webservice  src/main/org/jboss/ws/metadata/AnnotationsMetaDataBuilderEJB21.java       1.1
+ webservice  src/main/org/jboss/ws/metadata/AnnotationsMetaDataBuilderEJB3.java        1.1
+ webservice  src/main/org/jboss/ws/metadata/AnnotationsMetaDataBuilderJSE.java         1.1
+ webservice  src/main/org/jboss/ws/metadata/ClientMetaDataBuilder.java                 1.1
+ webservice  src/main/org/jboss/ws/metadata/EndpointMetaData.java                      1.1
+ webservice  src/main/org/jboss/ws/metadata/FaultMetaData.java                         1.1
+ webservice  src/main/org/jboss/ws/metadata/HolderUtils.java                           1.1
+ webservice  src/main/org/jboss/ws/metadata/JSR109MetaDataBuilder.java                 1.1
+ webservice  src/main/org/jboss/ws/metadata/JavaUtils.java                             1.1
+ webservice  src/main/org/jboss/ws/metadata/OperationMetaData.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/ParameterMetaData.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/ServiceMetaData.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/Style.java                                 1.1
+ webservice  src/main/org/jboss/ws/metadata/TypeMappingMetaData.java                   1.1
+ webservice  src/main/org/jboss/ws/metadata/TypesMetaData.java                         1.1
+ webservice  src/main/org/jboss/ws/metadata/UnifiedMetaData.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/jsr109/PortComponentMetaData.java          1.1
+ webservice  src/main/org/jboss/ws/metadata/jsr109/WebserviceDescriptionMetaData.java  1.1
+ webservice  src/main/org/jboss/ws/metadata/jsr109/WebservicesFactory.java             1.1
+ webservice  src/main/org/jboss/ws/metadata/jsr109/WebservicesMetaData.java            1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/Extendable.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/NCName.java                           1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDL11Reader.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDL11Writer.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDL20Reader.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDL20Writer.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLBinding.java                      1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLBindingFault.java                 1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLBindingOperation.java             1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLBindingOperationInput.java        1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLBindingOperationOutput.java       1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLConstants.java                    1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLDefinitions.java                  1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLDefinitionsFactory.java           1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLDocumentation.java                1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLEndpoint.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLException.java                    1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLFeature.java                      1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLImport.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInclude.java                      1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterface.java                    1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceFault.java               1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperation.java           1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationInfault.java    1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationInput.java      1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationOutfault.java   1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLInterfaceOperationOutput.java     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLProperty.java                     1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLService.java                      1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLTypes.java                        1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLUtils.java                        1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/WSDLWriter.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/xsd/SchemaUtils.java                  1.1
+ webservice  src/main/org/jboss/ws/metadata/wsdl/xsd/XSDWriter.java                    1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Config.java                           1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Encrypt.java                          1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Operation.java                        1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Port.java                             1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Sign.java                             1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Target.java                           1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Targetable.java                       1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/Timestamp.java                        1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/WSSecurityConfiguration.java          1.1
+ webservice  src/main/org/jboss/ws/metadata/wsse/WSSecurityConfigurationFactory.java   1.1
  webservice  src/main/org/jboss/ws/server/WebServiceDeployerEJB21.java                 1.3
  webservice  src/main/org/jboss/ws/server/WebServiceDeployerEJB3.java                  1.11
  webservice  src/main/org/jboss/ws/server/WebServiceDeployerJSE.java                   1.18


Commit from tdiesler (2005-07-29 06:06 EDT)
--------------------

Remove src/jdk15 from javac

  jboss  build.xml  1.195


Commit from aloubyansky (2005-07-29 06:15 EDT)
-----------------------

added unmarshal method that takes an instance of SchemaBindingResolver

  jboss-common  src/main/org/jboss/xb/binding/Unmarshaller.java                                1.4
  jboss-common  src/main/org/jboss/xb/binding/UnmarshallerImpl.java                            1.4
  jboss-common  src/main/org/jboss/xb/binding/Util.java                                        1.4
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/DefaultSchemaResolver.java  1.3
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBinding.java          1.8
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBindingResolver.java  1.6
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SundayContentHandler.java   1.10
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/TypeBinding.java            1.9
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/XsdBinder.java              1.12


Commit from tdiesler (2005-07-29 06:16 EDT)
--------------------

Move JavaUtils, HolderUtils, Style out of metadata
to their correct package location

  webservice  src/main/org/jboss/ws/binding/soap/SOAPBindingProvider.java  1.38
  webservice  src/main/org/jboss/ws/jaxb/JAXBMarshallerImpl.java           1.11
  webservice  src/main/org/jboss/ws/jaxrpc/CallImpl.java                   1.63
  webservice  src/main/org/jboss/ws/jaxrpc/CallProxy.java                  1.12
  webservice  src/main/org/jboss/ws/jaxrpc/MetaDataSynchronization.java    1.2
  webservice  src/main/org/jboss/ws/jaxrpc/ParameterWrapping.java          1.4
  webservice  src/main/org/jboss/ws/jaxrpc/ServiceDesc.java                1.10
+ webservice  src/main/org/jboss/ws/jaxrpc/Style.java                      1.4
  webservice  src/main/org/jboss/ws/jaxrpc/encoding/Base64Serializer.java  1.12
  webservice  src/main/org/jboss/ws/jaxrpc/encoding/HexSerializer.java     1.12
  webservice  src/main/org/jboss/ws/metadata/AbstractMetaDataBuilder.java  1.2
  webservice  src/main/org/jboss/ws/metadata/EndpointMetaData.java         1.2
- webservice  src/main/org/jboss/ws/metadata/HolderUtils.java              1.2
- webservice  src/main/org/jboss/ws/metadata/JavaUtils.java                1.2
  webservice  src/main/org/jboss/ws/metadata/OperationMetaData.java        1.2
  webservice  src/main/org/jboss/ws/metadata/ParameterMetaData.java        1.2
- webservice  src/main/org/jboss/ws/metadata/Style.java                    1.2
  webservice  src/main/org/jboss/ws/server/ServiceEndpoint.java            1.32
  webservice  src/main/org/jboss/ws/soap/MessageFactoryImpl.java           1.26
+ webservice  src/main/org/jboss/ws/utils/HolderUtils.java                 1.5
+ webservice  src/main/org/jboss/ws/utils/JavaUtils.java                   1.1
  webservice  test/java/org/jboss/test/ws/util/JavaUtilTestCase.java       1.5


Commit from aloubyansky (2005-07-29 06:16 EDT)
-----------------------

updated tests after modifications to SchemaBindingResolver

  jbosstest  src/main/org/jboss/test/xml/AnyUnitTestCase.java          1.4
  jbosstest  src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java  1.16


Commit from aloubyansky (2005-07-29 06:17 EDT)
-----------------------

use unmarshal method that takes an instance of SchemaBindingResolver

  jboss-system  src/main/org/jboss/system/ServiceConfigurator.java  1.39


Commit from tdiesler (2005-07-29 08:02 EDT)
--------------------

Update FIXME

  jbosstest  src/main/org/jboss/test/webservice/samples2/OrderProcessDOCWrappedTestCase.java  1.4


Commit from tdiesler (2005-07-29 08:03 EDT)
--------------------

layout

  jbosstest  src/resources/webservice/exception/META-INF/jaxrpc-mapping.xml          1.5
  jbosstest  src/resources/webservice/exception/META-INF/wsdl/ExceptionService.wsdl  1.4


Commit from aloubyansky (2005-07-29 08:12 EDT)
-----------------------

removed schema validation cheating. xml is not valid according to the xsd.

  jbosstest  src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java  1.17


Commit from aloubyansky (2005-07-29 08:14 EDT)
-----------------------

cleanup

  jbosstest  src/main/org/jboss/test/xml/AnnotatedPojoServerUnitTestCase.java  1.6


Commit from aloubyansky (2005-07-29 08:39 EDT)
-----------------------

include message from the cause

  jboss-common  src/main/org/jboss/xb/binding/parser/sax/SaxJBossXBParser.java  1.4


Commit from aloubyansky (2005-07-29 08:47 EDT)
-----------------------

fixed entity resolution

  jbosstest  src/main/org/jboss/test/xml/JNDIBindingUnitTestCase.java  1.6


Commit from starksm (2005-07-29 09:24 EDT)
-------------------

Remove the obsolete replace attribute

  jbosstest  src/resources/xml/mbeanserver/testBinding.xml  1.2


Commit from starksm on branch Branch_4_0 (2005-07-29 09:25 EDT)
----------------------------------------

Remove the obsolete replace attribute

  jbosstest  src/resources/xml/mbeanserver/testBinding.xml  1.1.2.1


Commit from dimitris (2005-07-29 09:44 EDT)
--------------------

[JBAS-1990] - refactor to remove dependency on org.jboss.util.Mu*
 Code compiles without them, so remove from HEAD to see if anybody complains

- jboss-common  src/main/org/jboss/util/MuBoolean.java    1.2
- jboss-common  src/main/org/jboss/util/MuByte.java       1.3
- jboss-common  src/main/org/jboss/util/MuCharacter.java  1.3
- jboss-common  src/main/org/jboss/util/MuDouble.java     1.3
- jboss-common  src/main/org/jboss/util/MuFloat.java      1.3
- jboss-common  src/main/org/jboss/util/MuInteger.java    1.3
- jboss-common  src/main/org/jboss/util/MuLong.java       1.6
- jboss-common  src/main/org/jboss/util/MuNumber.java     1.2
- jboss-common  src/main/org/jboss/util/MuShort.java      1.3
- jboss-common  src/main/org/jboss/util/Mutable.java      1.3


Commit from aloubyansky (2005-07-29 09:48 EDT)
-----------------------

testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jbosstest  src/resources/cmp2/commerce/META-INF/ejb-jar.xml         1.15
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressBean.java   1.5
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressHome.java   1.5
  jbosstest  src/main/org/jboss/test/cmp2/commerce/CommerceTest.java  1.13


Commit from aloubyansky (2005-07-29 09:50 EDT)
-----------------------

fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jboss  src/main/org/jboss/proxy/compiler/Proxies.java  1.9


Commit from aloubyansky on branch Branch_4_0 (2005-07-29 09:52 EDT)
--------------------------------------------

testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jbosstest  src/resources/cmp2/commerce/META-INF/ejb-jar.xml         1.14.4.1
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressBean.java   1.4.16.2
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressHome.java   1.4.6.2
  jbosstest  src/main/org/jboss/test/cmp2/commerce/CommerceTest.java  1.12.6.2


Commit from aloubyansky on branch Branch_4_0 (2005-07-29 09:59 EDT)
--------------------------------------------

fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jboss  src/main/org/jboss/proxy/compiler/Proxies.java  1.8.6.2


Commit from aloubyansky on branch Branch_3_2 (2005-07-29 10:01 EDT)
--------------------------------------------

fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jboss  src/main/org/jboss/proxy/compiler/Proxies.java  1.4.2.2


Commit from aloubyansky on branch Branch_3_2 (2005-07-29 10:02 EDT)
--------------------------------------------

testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'

  jbosstest  src/resources/cmp2/commerce/META-INF/ejb-jar.xml         1.5.2.9
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressBean.java   1.4.2.1
  jbosstest  src/main/org/jboss/test/cmp2/commerce/AddressHome.java   1.3.2.1
  jbosstest  src/main/org/jboss/test/cmp2/commerce/CommerceTest.java  1.5.2.5


Commit from bdecoste on branch Branch_4_0 (2005-07-29 10:08 EDT)
-----------------------------------------

JIRA EJB3 184

  jboss-j2ee  src/main/javax/ejb/SessionContext.java                         1.4.6.1
  jboss       src/main/org/jboss/ejb/StatelessSessionEnterpriseContext.java  1.27.6.1
  jboss       src/main/org/jboss/ejb/StatefulSessionEnterpriseContext.java   1.31.6.2


Commit from tdiesler (2005-07-29 10:27 EDT)
--------------------

Exclude all jbossws from jdk14 build

  webservice  build.xml  1.66


Commit from remm on branch Branch_4_0 (2005-07-29 10:37 EDT)
-------------------------------------

- Add concurrency control valve for JDK 1.4, submitted by Scott Marlow.

+ jboss-tomcat  src/main/org/jboss/web/tomcat/filters/SemaphoreValve.java  1.1.2.2


Commit from adrian (2005-07-29 11:24 EDT)
------------------

Fix the eclipse build

  jboss  .classpath  1.23


Commit from adrian (2005-07-29 11:25 EDT)
------------------

Try to load the JBoss properties editors in StringValueMetaData.

Change the Date config tests to use the problem CET date that Alex was seeing.

  microkernel  src/tests/org/jboss/test/kernel/xml/test/XMLTestCase.java                     1.11
  microkernel  src/main/org/jboss/beans/metadata/plugins/StringValueMetaData.java            1.11
  microkernel  src/resources/xml-test/org/jboss/test/kernel/xml/test/testConfigure.xml       1.7
  microkernel  src/tests/org/jboss/test/kernel/config/test/ConfigureFromStringTestCase.java  1.7
  microkernel  src/tests/org/jboss/test/kernel/AbstractKernelTest.java                       1.6
  microkernel  src/resources/xml-test/org/jboss/test/kernel/config/test/testConfigure.xml    1.2


Commit from aloubyansky (2005-07-29 11:28 EDT)
-----------------------

fixed entity resolution

  jbosstest  src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java  1.18


Commit from aloubyansky on branch Branch_4_0 (2005-07-29 11:34 EDT)
--------------------------------------------

backport from HEAD

  jboss-common  src/main/org/jboss/xb/binding/MappingObjectModelProvider.java                  1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/SimpleTypeBindings.java                          1.1.2.4
  jboss-common  src/main/org/jboss/xb/binding/XercesXsMarshaller.java                          1.1.2.5
  jboss-common  src/main/org/jboss/xb/binding/Unmarshaller.java                                1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/UnmarshallerImpl.java                            1.1.2.4
  jboss-common  src/main/org/jboss/xb/binding/Util.java                                        1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/CharactersHandler.java      1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SundayContentHandler.java   1.1.2.5
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/XsdBinder.java              1.1.2.9
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/AttributeBinding.java       1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/TypeBinding.java            1.1.2.7
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/DefaultSchemaResolver.java  1.1.2.1
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBinding.java          1.1.2.4
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBindingResolver.java  1.1.2.3
  jboss-common  src/main/org/jboss/xb/binding/sunday/unmarshalling/impl/runtime/RtUtil.java    1.1.2.3
  jbosstest     src/main/org/jboss/test/xml/JNDIBindingUnitTestCase.java                       1.3.2.2
  jbosstest     src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java                       1.13.2.1
  jbosstest     src/main/org/jboss/test/xml/mbeanserver/MBeanDepends.java                      1.1.4.1


Commit from mholzner (2005-07-29 11:42 EDT)
--------------------

fixed bug in window state and portlet mode handling inside the layout strategy

  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/render/DivDecorationRenderer.java  1.4
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/render/DivWindowRenderer.java      1.3
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/render/EmptyWindowRenderer.java    1.3
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/render/TableWindowRenderer.java    1.3
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/strategy/DefaultStrategyImpl.java  1.5
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/strategy/PortletContextImpl.java   1.9
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyContextImpl.java  1.9
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyFactory.java      1.10
  jboss-portal  theme/src/main/org/jboss/portal/theme/impl/WindowContextImpl.java             1.4
  jboss-portal  theme/src/main/org/jboss/portal/theme/invocation/StrategyInterceptor.java     1.6
  jboss-portal  theme/src/main/org/jboss/portal/theme/page/WindowContext.java                 1.2
  jboss-portal  theme/src/main/org/jboss/portal/theme/strategy/PortletContext.java            1.7
  jboss-portal  core/src/main/org/jboss/portal/core/command/RenderPageCommand.java            1.13


Commit from csuconic (2005-07-29 11:49 EDT)
--------------------

Adding concurrent.jar

+ jrunit-testsuite  libs/concurrent.jar  1.1


Commit from csuconic (2005-07-29 11:50 EDT)
--------------------

Changes on Benchmark

  jrunit-testsuite  build.xml                                                                1.3
  jrunit-testsuite  src/tests/org/jboss/jrunit/tests/jbosscache/CacheMemJRunitTestCase.java  1.3


Commit from bdecoste (2005-07-29 12:35 EDT)
--------------------

EJB3 schemas and DTDs

+ jboss-ejb3  src/resources/schema/sun-ejb-jar_3_0.xsd  1.1
+ jboss-ejb3  src/resources/schema/ejb-jar_3_0a.xsd     1.1
+ jboss-ejb3  src/resources/schema/jboss_5_0.dtd        1.1


Commit from bwang (2005-07-29 12:51 EDT)
-----------------

Rollbacked size impl and defer it to next release

  JBossCache  src/org/jboss/cache/aop/CachedListInterceptor.java  1.6
  JBossCache  src/org/jboss/cache/aop/CachedSetInterceptor.java   1.6


Commit from bill (2005-07-29 13:41 EDT)
----------------

You cannot override provider URL if it is in your system environment or in a jndi.properties file.  Want  to be able to have an embeddable MDB3 that hooks to a remote JBoss server.

+ jnp  src/main/org/jnp/interfaces/LocalOnlyContextFactory.java  1.1


Commit from bill (2005-07-29 13:44 EDT)
----------------

Embeddable MDB3.  Works with a remote JBoss server instance.

+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/JndiBinder.java                       1.1
+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/XidFactoryMBean.java                  1.1
  jboss-ejb3  src/resources/standalone/bootstrap.xml                                 1.5
+ jboss-ejb3  src/test/org/jboss/ejb3/test/standalone/jms/unit/MDBUnitTestCase.java  1.1
+ jboss-ejb3  src/test/org/jboss/ejb3/test/standalone/jms/QueueTestMDB.java          1.1
+ jboss-ejb3  src/test/org/jboss/ejb3/test/standalone/jms/TestStatus.java            1.1
+ jboss-ejb3  src/test/org/jboss/ejb3/test/standalone/jms/TestStatusBean.java        1.1
  jboss-ejb3  build-test.xml                                                         1.93


Commit from bwang (2005-07-29 14:31 EDT)
-----------------

UPD

  JBossCache  docs/faq/en/master.xml  1.5


Commit from starksm (2005-07-29 14:43 EDT)
-------------------

An erorr page that adds a X-JException custom reply header if the session contains a j_exception value.

+ jbosstest  src/resources/web/form-auth/restricted/errors.jsp  1.1


Commit from starksm (2005-07-29 14:44 EDT)
-------------------

Add the FormAuthValve to get access to the exception

+ jbosstest  src/resources/web/form-auth/context.xml  1.1


Commit from starksm on branch Branch_4_0 (2005-07-29 14:45 EDT)
----------------------------------------

Use /restricted/errors.jsp as the form-error-page

  jbosstest  src/resources/web/form-auth/form-auth-web.xml  1.3.2.1


Commit from starksm (2005-07-29 14:46 EDT)
-------------------

Use /restricted/errors.jsp as the form-error-page

  jbosstest  src/resources/web/form-auth/form-auth-web.xml  1.4


Commit from starksm on branch Branch_4_0 (2005-07-29 14:46 EDT)
----------------------------------------

Include the WEB-INF/context.xml in the form-auth.war along with jsp pages

  jbosstest  imports/test-jars.xml  1.9.2.124


Commit from starksm (2005-07-29 14:48 EDT)
-------------------

Include the WEB-INF/context.xml in the form-auth.war along with jsp pages

  jbosstest  imports/test-jars.xml  1.84


Commit from starksm on branch Branch_4_0 (2005-07-29 14:49 EDT)
----------------------------------------

Test that a bad login is redirected to the errors.jsp and that the session j_exception is not null.

  jbosstest  src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java  1.3.2.5


Commit from starksm (2005-07-29 14:51 EDT)
-------------------

Test that a bad login is redirected to the errors.jsp and that the session j_exception is not null.

  jbosstest  src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java  1.7


Commit from starksm on branch Branch_4_0 (2005-07-29 15:06 EDT)
----------------------------------------

If the includePassword attribute is true, the j_password value is also included in the session under the attribute name j_password. Resolves (JBAS-2059) Add ability to include form auth password in error page via FormAuthValve.

  jboss-tomcat  src/main/org/jboss/web/tomcat/security/FormAuthValve.java  1.2.2.2


Commit from starksm (2005-07-29 15:08 EDT)
-------------------

If the includePassword attribute is true, the j_password value is also included in the session under the attribute name j_password. Resolves (JBAS-2059) Add ability to include form auth password in error page via FormAuthValve.

  jboss-tomcat  src/main/org/jboss/web/tomcat/security/FormAuthValve.java  1.4


Commit from starksm on branch Branch_4_0 (2005-07-29 15:11 EDT)
----------------------------------------

Add includePassword=true on the FormAuthValve.

  jbosstest  src/resources/web/form-auth/context.xml  1.1.2.1


Commit from starksm (2005-07-29 15:12 EDT)
-------------------

Add includePassword=true on the FormAuthValve.

  jbosstest  src/resources/web/form-auth/context.xml  1.2


Commit from bill (2005-07-29 15:35 EDT)
----------------

tiny refactoring to enable POJO creation.

  jbossmq  src/main/org/jboss/mq/pm/jdbc2/PersistenceManager.java  1.33


Commit from bill (2005-07-29 15:37 EDT)
----------------

add ability to become a factory

  jbosscx  src/main/org/jboss/resource/adapter/jdbc/local/LocalTxDataSource.java  1.7


Commit from rloehr (2005-07-29 15:48 EDT)
------------------

added md5 and deployer artifact for aspects

  jbossas  jbossbuild.xml  1.53


Commit from rloehr (2005-07-29 15:49 EDT)
------------------

fix bug that took 1 hour to find.  Forgot to include .jar.

  jboss-aspects  component-info.xml  1.4


Commit from bill (2005-07-29 15:57 EDT)
----------------

small change to make pojoable.

  jbossmq  src/main/org/jboss/mq/sm/jdbc/JDBCStateManager.java  1.8


Commit from adrian (2005-07-29 16:23 EDT)
------------------

Add a test for manual deployment control with dependencies.

  jboss-dependency  src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java  1.2


Commit from bwang on branch Branch_4_0 (2005-07-29 16:26 EDT)
--------------------------------------

JBAS-2034 Added secure falg.

  jboss-tomcat  src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java  1.5.2.5


Commit from adrian (2005-07-29 16:29 EDT)
------------------

Test for undeploying the dependent first manually.

  jboss-dependency  src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java  1.3


Commit from bill (2005-07-29 16:48 EDT)
----------------

small change to make pojoable.

  jbossmq  src/main/org/jboss/mq/server/jmx/DestinationManager.java  1.17
  jbossmq  src/main/org/jboss/mq/server/MessageCache.java            1.33


Commit from bill (2005-07-29 16:49 EDT)
----------------

JMS and small name changes

+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/jms/DestinationManager.java       1.1
+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/jms/JDBC2PersistenceManager.java  1.1
+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/jms/JDBCStateManager.java         1.1
+ jboss-ejb3  src/main/org/jboss/ejb3/embedded/jms/MessageCache.java             1.1
  jboss-ejb3  src/main/org/jboss/ejb3/embedded/EJB3StandaloneBootstrap.java      1.5
  jboss-ejb3  src/main/org/jboss/ejb3/embedded/ServletBootstrapListener.java     1.2
- jboss-ejb3  src/resources/standalone/bootstrap.xml                             1.6
+ jboss-ejb3  src/resources/standalone/embedded-jboss-beans.xml                  1.1
+ jboss-ejb3  src/resources/standalone/jboss-jms-beans.xml                       1.1
  jboss-ejb3  src/resources/test/standaloneWar/WEB-INF/web.xml                   1.3
  jboss-ejb3  build.xml                                                          1.35


Commit from bwang (2005-07-29 17:12 EDT)
-----------------

Another fix for JBAS-2034 that added secure flag and context path.

  jboss-tomcat  src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java  1.11


Commit from adrian (2005-07-29 17:16 EDT)
------------------

Don't try to uninstall dependent services that are already uninstalled (don't exist anymore)
or they are already in a "lower" state than the dependency says they should be
e.g. Somebody manually changes the state back to Described and even though
dependencies says it could be Installed.

  jboss-dependency  src/main/org/jboss/dependency/plugins/AbstractController.java  1.7


Commit from csuconic (2005-07-29 17:37 EDT)
--------------------

fixing getClassMetaData

  jboss-serialization  src/org/jboss/serial/classmetamodel/ClassMetamodelFactory.java  1.11


Commit from csuconic (2005-07-29 17:40 EDT)
--------------------

Adding validation in cache

  jboss-serialization  tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java  1.2
  jboss-serialization  tests/org/jboss/serial/DataSerializationTest.java                         1.4


Commit from csuconic (2005-07-29 18:20 EDT)
--------------------

Removing System.outs

  jrunit  src/main/org/jboss/jrunit/controller/reporters/FileBenchmarkReporter.java                    1.3
  jrunit  src/main/org/jboss/jrunit/communication/MessageBus.java                                      1.13
  jrunit  src/main/org/jboss/jrunit/controller/persistence/BenchmarkDatabaseBenchmarkPersistence.java  1.5
  jrunit  src/main/org/jboss/jrunit/controller/receiver/JGroupsBenchmarkReceiver.java                  1.5
  jrunit  src/main/org/jboss/jrunit/controller/ant/AntBenchmarkReceiverAbstract.java                   1.6
  jrunit  src/main/org/jboss/jrunit/controller/sender/JGroupsBenchmarkSender.java                      1.5


Commit from csuconic (2005-07-29 18:36 EDT)
--------------------

Adding aditional assertions on ClassMetamodelfactoryTestCase

  jboss-serialization  tests/org/jboss/serial/objectmetamodel/DataContainerMultiThreadJBossTestCase.java  1.2
  jboss-serialization  tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java           1.3


Commit from csuconic (2005-07-29 18:37 EDT)
--------------------

Adding aditional assertions on ClassMetamodelfactoryTestCase

  jboss-serialization  tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java  1.4


Commit from starksm on branch Branch_4_0 (2005-07-29 19:19 EDT)
----------------------------------------

Fix some of the deployment resource paths and remove the attempt to stop from the finally as this simply hangs if the test failed.

  jbosstest  src/main/org/jboss/test/deployment/DeploymentTestCase.java  1.1.2.4


Commit from starksm on branch Branch_4_0 (2005-07-29 19:28 EDT)
----------------------------------------

Resolve the j2ee module type based on the deployment deployer object name. The object names are obtained by querying the jsr77 mbean. Resolves (JBAS-1998) Module Type in [Serializable]DeploymentInfo.

  jboss-deployment  src/main/org/jboss/deployment/spi/JMXTarget.java  1.1.1.1.4.5


Commit from starksm (2005-07-29 19:36 EDT)
-------------------

Resolve the j2ee module type based on the deployment deployer object name. The object names are obtained by querying the jsr77 mbean. Resolves (JBAS-1998) Module Type in [Serializable]DeploymentInfo.

  jboss-deployment  src/main/org/jboss/deployment/spi/JMXTarget.java  1.4


Commit from bwang (2005-07-29 19:37 EDT)
-----------------

indent it recursively

  JBossCache  src/org/jboss/cache/AbstractNode.java  1.5
  JBossCache  src/org/jboss/cache/TreeCache.java     1.30


Commit from asaldhana (2005-07-29 20:10 EDT)
---------------------

jbossws feature/user guide update

  webservice  docs/tools-docs/project/en/master.xml                   1.11
+ webservice  docs/tools-docs/project/en/modules/jbossws.xml          1.1
  webservice  docs/tools-docs/project/en/modules/jbosswsfeatures.xml  1.3

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785428">[jboss-cvs] webservice/docs/tools-docs/project/en/modules   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Anil Saldhana &lt;anil.saldhana@jb...&gt; -	2005-07-30 00:11</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: asaldhana
  Date: 05/07/29 20:10:16

  Modified:    docs/tools-docs/project/en/modules   jbosswsfeatures.xml
  Added:       docs/tools-docs/project/en/modules   jbossws.xml
  Log:
  jbossws feature/user guide update
  
  Revision  Changes    Path
  1.3       +1505 -32  webservice/docs/tools-docs/project/en/modules/jbosswsfeatures.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: jbosswsfeatures.xml
  ===================================================================
  RCS file: /cvsroot/jboss/webservice/docs/tools-docs/project/en/modules/jbosswsfeatures.xml,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- jbosswsfeatures.xml	29 Jul 2005 04:38:33 -0000	1.2
  +++ jbosswsfeatures.xml	30 Jul 2005 00:10:16 -0000	1.3
  @@ -1,14 +1,14 @@
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  -&lt;!-- $Id: jbosswsfeatures.xml,v 1.2 2005/07/29 04:38:33 asaldhana Exp $ --&gt;
  -&lt;chapter id="jbosswsfeatures"&gt;
  -  &lt;title&gt;JBossWS Tools Features&lt;/title&gt;
  -
  -  &lt;para&gt;This section describes the various features available with jbossws,
  -  JBossWS Tools. It also lists examples alongside. We will first list the
  -  features available via JSR181 annotations and then we will discuss the
  -  JSR109 style web services (that does not deal with JDK5 annotations).
  -  Remember, we at JBoss, foster and preach annotations based
  -  development.&lt;/para&gt;
  +&lt;!-- $Id: jbosswsfeatures.xml,v 1.3 2005/07/30 00:10:16 asaldhana Exp $ --&gt;
  +&lt;chapter id="jbosswsUserGuide"&gt;
  +  &lt;title&gt;JBossWS Tools - jbossws&lt;/title&gt;
  +
  +  &lt;para&gt;The previous chapter discussed the feature list of jbossws. This
  +  chapter describes the various features available with jbossws, JBossWS
  +  Tools. It also lists examples alongside. We will first list the features
  +  available via JSR181 annotations and then we will discuss the JSR109 style
  +  web services (that does not deal with JDK5 annotations). Remember, we at
  +  JBoss, foster and preach annotations based development.&lt;/para&gt;
   
     &lt;sect1&gt;
       &lt;title&gt;jbossws features&lt;/title&gt;
  @@ -180,7 +180,48 @@
   
           &lt;para&gt;We have the JSR109 mapping file:&lt;/para&gt;
   
  -        &lt;programlisting&gt;TODO: Plug in the mapping file&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.TestService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://org.jboss/test"&amp;gt;serviceNS:TestService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://org.jboss/test"&amp;gt;serviceNS:TestService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;TestServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;TestServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.TestServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://org.jboss/test"&amp;gt;portTypeNS:TestServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://org.jboss/test"&amp;gt;portTypeNS:TestServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://org.jboss/test"&amp;gt;bindingNS:TestServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://org.jboss/test"&amp;gt;bindingNS:TestServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;echo&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;echo&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echo&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echo&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echoResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echoResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;Here is the webservices.xml. As there was no custom annotations
           defined in the endpointImplementation, jbossws has assumed that you
  @@ -419,8 +460,7 @@
   {
      @WebMethod
      String echo(String input) ;
  -}
  -&lt;/programlisting&gt;
  +}&lt;/programlisting&gt;
   
           &lt;para&gt;The web.xml file will be:&lt;/para&gt;
   
  @@ -498,12 +538,116 @@
           parameters in request response structures. The wsdl file is as
           follows:&lt;/para&gt;
   
  -        &lt;programlisting&gt;TODO:Plug in the wsdl document&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="TestDocService" targetNamespace="<a href="http://org.jboss/test" target="_new">http://org.jboss/test</a>" xmlns:tns="<a href="http://org.jboss/test" target="_new">http://org.jboss/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:ns2="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types&amp;gt;
  +    &amp;lt;schema targetNamespace="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:tns="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:soap11-enc="<a href="http://schemas.xmlsoap.org/soap/encoding/" target="_new">http://schemas.xmlsoap.org/soap/encoding/</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:wsdl="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns="<a href="http://www.w3.org/2001/XMLSchema"&amp;gt" target="_new">http://www.w3.org/2001/XMLSchema"&amp;gt</a>;
  +      &amp;lt;complexType name="echo"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="echoResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;element name="echo" type="tns:echo"/&amp;gt;
  +      &amp;lt;element name="echoResponse" type="tns:echoResponse"/&amp;gt;
  +    &amp;lt;/schema&amp;gt;
  +   &amp;lt;/types&amp;gt;
  +   &amp;lt;message name="TestServiceInterface_echo"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:echo"/&amp;gt;
  +   &amp;lt;/message&amp;gt;
  +  &amp;lt;message name="TestServiceInterface_echoResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:echoResponse"/&amp;gt;
  +  &amp;lt;/message&amp;gt;
  +  &amp;lt;portType name="TestServiceInterface"&amp;gt;
  +    &amp;lt;operation name="echo"&amp;gt;
  +      &amp;lt;input message="tns:TestServiceInterface_echo"/&amp;gt;
  +      &amp;lt;output message="tns:TestServiceInterface_echoResponse"/&amp;gt;
  +   &amp;lt;/operation&amp;gt;
  +  &amp;lt;/portType&amp;gt;
  +  &amp;lt;binding name="TestServiceInterfaceBinding" type="tns:TestServiceInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="document"/&amp;gt;
  +    &amp;lt;operation name="echo"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +   &amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="TestDocService"&amp;gt;
  +    &amp;lt;port name="TestServiceInterfacePort" binding="tns:TestServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;
  +    &amp;lt;/port&amp;gt;
  +  &amp;lt;/service&amp;gt;
  +&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;The mapping file, webservices.xml and web.xml are as
           follows:&lt;/para&gt;
   
  -        &lt;programlisting&gt;Plugin the missing files here:&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.TestServiceInterface_echo_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://org.jboss/test/types"&amp;gt;typeNS:echo&amp;lt;/root-type-qname&amp;gt" target="_new">http://org.jboss/test/types"&amp;gt;typeNS:echo&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;String_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;String_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.TestServiceInterface_echo_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://org.jboss/test/types"&amp;gt;typeNS:echoResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://org.jboss/test/types"&amp;gt;typeNS:echoResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;result&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;result&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.TestDocService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://org.jboss/test"&amp;gt;serviceNS:TestDocService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://org.jboss/test"&amp;gt;serviceNS:TestDocService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;TestServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;TestServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.TestServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://org.jboss/test"&amp;gt;portTypeNS:TestServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://org.jboss/test"&amp;gt;portTypeNS:TestServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://org.jboss/test"&amp;gt;bindingNS:TestServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://org.jboss/test"&amp;gt;bindingNS:TestServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;echo&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;echo&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wrapped-element/&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echo&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echo&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echoResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestServiceInterface_echoResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;Now the wrapped types make sense for the following case.
           Consider an implementation bean which has an operation with multiple
  @@ -520,6 +664,199 @@
         System.out.println("Do custom processing");
      }
   }&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="TestDocWrappedService" targetNamespace="<a href="http://org.jboss/test" target="_new">http://org.jboss/test</a>" xmlns:tns="<a href="http://org.jboss/test" target="_new">http://org.jboss/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:ns2="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types&amp;gt;
  +    &amp;lt;schema targetNamespace="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:tns="<a href="http://org.jboss/test/types" target="_new">http://org.jboss/test/types</a>" xmlns:soap11-enc="<a href="http://schemas.xmlsoap.org/soap/encoding/" target="_new">http://schemas.xmlsoap.org/soap/encoding/</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:wsdl="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns="<a href="http://www.w3.org/2001/XMLSchema"&amp;gt" target="_new">http://www.w3.org/2001/XMLSchema"&amp;gt</a>;
  +      &amp;lt;complexType name="order"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="int_1" type="int"/&amp;gt;
  +          &amp;lt;element name="String_2" type="string" nillable="true"/&amp;gt;
  +          &amp;lt;element name="float_3" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;
  +      &amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="orderResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;
  +        &amp;lt;/sequence&amp;gt;
  +      &amp;lt;/complexType&amp;gt;
  +      &amp;lt;element name="order" type="tns:order"/&amp;gt;
  +      &amp;lt;element name="orderResponse" type="tns:orderResponse"/&amp;gt;
  +     &amp;lt;/schema&amp;gt;
  +    &amp;lt;/types&amp;gt;
  +  &amp;lt;message name="TestWrappedServiceInterface_order"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:order"/&amp;gt;
  +  &amp;lt;/message&amp;gt;
  +  &amp;lt;message name="TestWrappedServiceInterface_orderResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:orderResponse"/&amp;gt;
  +  &amp;lt;/message&amp;gt;
  +  &amp;lt;portType name="TestWrappedServiceInterface"&amp;gt;
  +    &amp;lt;operation name="order"&amp;gt;
  +      &amp;lt;input message="tns:TestWrappedServiceInterface_order"/&amp;gt;
  +      &amp;lt;output message="tns:TestWrappedServiceInterface_orderResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +   &amp;lt;/portType&amp;gt;
  +   &amp;lt;binding name="TestWrappedServiceInterfaceBinding" type="tns:TestWrappedServiceInterface"&amp;gt;
  +      &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="document"/&amp;gt;
  +      &amp;lt;operation name="order"&amp;gt;
  +        &amp;lt;soap:operation soapAction=""/&amp;gt;
  +        &amp;lt;input&amp;gt;
  +          &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +        &amp;lt;output&amp;gt;
  +          &amp;lt;soap:body use="literal"/&amp;gt;
  +        &amp;lt;/output&amp;gt;
  +       &amp;lt;/operation&amp;gt;
  +   &amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="TestDocWrappedService"&amp;gt;
  +    &amp;lt;port name="TestWrappedServiceInterfacePort" binding="tns:TestWrappedServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;
  +    &amp;lt;/port&amp;gt;
  +  &amp;lt;/service&amp;gt;
  +&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
  +
  +        &lt;para&gt;&lt;command&gt;Note: The above wsdl file was generated by jwsdp1.6.
  +        Seems like Sun has adopted the MS Style Doc/Lit Wrapped, which is also
  +        mandated by JSR181. The mapping file below though uses wrapped types.
  +        It also generates the wrapper types for req/response. My guess is that
  +        the wsdl that is exposed is still JSR181 style but internally Sun
  +        implementation uses the wrapped types.&lt;/command&gt;&lt;/para&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://org.jboss/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://org.jboss/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.TestWrappedServiceInterface_order_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://org.jboss/test/types"&amp;gt;typeNS:order&amp;lt;/root-type-qname&amp;gt" target="_new">http://org.jboss/test/types"&amp;gt;typeNS:order&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;int_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;int_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;String_2&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;String_2&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;float_3&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;float_3&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.TestWrappedServiceInterface_order_ResponseStruct&amp;lt;/java-type&amp;gt;&amp;lt;root-type-qname xmlns:typeNS="<a href="http://org.jboss/test/types"&amp;gt;typeNS:orderResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://org.jboss/test/types"&amp;gt;typeNS:orderResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;result&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;result&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.TestDocWrappedService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://org.jboss/test"&amp;gt;serviceNS:TestDocWrappedService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://org.jboss/test"&amp;gt;serviceNS:TestDocWrappedService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;TestWrappedServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;TestWrappedServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.TestWrappedServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://org.jboss/test"&amp;gt;portTypeNS:TestWrappedServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://org.jboss/test"&amp;gt;portTypeNS:TestWrappedServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://org.jboss/test"&amp;gt;bindingNS:TestWrappedServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://org.jboss/test"&amp;gt;bindingNS:TestWrappedServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;order&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;order&amp;lt;/wsdl-operation&amp;gt;
  +&lt;command&gt;&amp;lt;wrapped-element/&amp;gt;&lt;/command&gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;int&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;int_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;1&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_2&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;2&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_order&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_3&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_orderResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://org.jboss/test"&amp;gt;wsdlMsgNS:TestWrappedServiceInterface_orderResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;&lt;/programlisting&gt;
  +
  +        &lt;para&gt;Lets have a look at the generated wrapper types for request and
  +        response below:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class TestWrappedServiceInterface_order_RequestStruct 
  +{
  +    protected int int_1;
  +    protected java.lang.String String_2;
  +    protected float float_3;
  +    
  +    public TestWrappedServiceInterface_order_RequestStruct() {}
  +    
  +    public TestWrappedServiceInterface_order_RequestStruct(int int_1, java.lang.String String_2, float float_3) 
  +    {
  +        this.int_1 = int_1;
  +        this.String_2 = String_2;
  +        this.float_3 = float_3;
  +    }
  +    
  +    public int getInt_1() { return int_1;}
  +    
  +    public void setInt_1(int int_1) { this.int_1 = int_1;}
  +    
  +    public java.lang.String getString_2() {return String_2;}
  +    
  +    public void setString_2(java.lang.String String_2) { this.String_2 = String_2;}
  +    
  +    public float getFloat_3() { return float_3;}
  +    
  +    public void setFloat_3(float float_3) { this.float_3 = float_3;}
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class TestWrappedServiceInterface_order_ResponseStruct {
  +    protected java.lang.String result;
  +    
  +    public TestWrappedServiceInterface_order_ResponseStruct() {}
  +    
  +    public TestWrappedServiceInterface_order_ResponseStruct(java.lang.String result) {
  +        this.result = result;
  +    }
  +    
  +    public java.lang.String getResult() {return result;}
  +    
  +    public void setResult(java.lang.String result) { this.result = result;}
  +}&lt;/programlisting&gt;
         &lt;/sect3&gt;
       &lt;/sect2&gt;
   
  @@ -531,6 +868,99 @@
         be a wsdl file. The generated artifacts will be an annotated Java
         implementation bean, an annotated Java endpointInterface, Java Service
         Interface, JSR109 mapping file.&lt;/para&gt;
  +
  +      &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&amp;gt;
  +&amp;lt;definitions name="TestService" 
  +targetNamespace="<a href="http://www.openuri.org/2004/04/HelloWorld" target="_new">http://www.openuri.org/2004/04/HelloWorld</a>" 
  +xmlns:tns="<a href="http://www.openuri.org/2004/04/HelloWorld" target="_new">http://www.openuri.org/2004/04/HelloWorld</a>" 
  +xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" 
  +xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/" target="_new">http://schemas.xmlsoap.org/wsdl/soap/</a>
  +" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/"&amp;gt</a>;
  +  &amp;lt;types/&amp;gt;
  +  &amp;lt;message name="echo"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;
  +  &amp;lt;/message&amp;gt;
  +  &amp;lt;message name="echoResponse"&amp;gt;
  +    &amp;lt;part name="return" type="xsd:string"/&amp;gt;
  +  &amp;lt;/message&amp;gt;
  +  &amp;lt;portType name="EndpointInterface"&amp;gt;
  +    &amp;lt;operation name="echo" parameterOrder="String_1"&amp;gt;
  +      &amp;lt;input message="tns:echo"/&amp;gt;
  +      &amp;lt;output message="tns:echoResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +  &amp;lt;/portType&amp;gt;
  +  &amp;lt;binding name="EndpointInterfaceBinding" type="tns:EndpointInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="rpc"/&amp;gt;
  +    &amp;lt;operation name="echo"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://www.openuri.org/2004/04/Hello" target="_new">http://www.openuri.org/2004/04/Hello</a>
  +World"/&amp;gt;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +  &amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="TestService"&amp;gt;
  +    &amp;lt;port name="EndpointInterface" binding="tns:EndpointInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;   
  +    &amp;lt;/port&amp;gt;
  +  &amp;lt;/service&amp;gt;
  +&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
  +
  +      &lt;para&gt;This is a very simple wsdl file that represents rpc/literal style
  +      web services. Let us use jbossws to now generate the client side
  +      artifacts which use Java annotations. You can use a config file
  +      (&lt;emphasis&gt;Usecase 1&lt;/emphasis&gt;)&lt;/para&gt;
  +
  +      &lt;programlisting&gt;./jbossws.sh -dest build -config myconfig.xml&lt;/programlisting&gt;
  +
  +      &lt;para&gt;or you can send the wsdl name directly to the script. In this
  +      example, we assume that the wsdl is located under the wsdl subdirectory.
  +      (&lt;emphasis&gt;Usecase 2&lt;/emphasis&gt;)&lt;/para&gt;
  +
  +      &lt;programlisting&gt;./jbossws.sh -dest build wsdl/TestService.wsdl&lt;/programlisting&gt;
  +
  +      &lt;para&gt;Lets have a look at the configuration file that you can
  +      use.&lt;/para&gt;
  +
  +      &lt;programlisting&gt;&amp;lt;configuration&amp;gt;
  +   &amp;lt;wsdlToJava &lt;command&gt;location="wsdl/TestService.wsdl" &lt;/command&gt;/&amp;gt;  
  +&amp;lt;/configuration&amp;gt;&lt;/programlisting&gt;
  +
  +      &lt;para&gt;Lets look at the artifacts that are generated. First the Java
  +      annotated types.&lt;/para&gt;
  +
  +      &lt;programlisting&gt;There are no Java Types generated as the types in the wsdl is empty.&lt;/programlisting&gt;
  +
  +      &lt;para&gt;The Service Interface:&lt;/para&gt;
  +
  +      &lt;programlisting&gt;package org.jboss.test; 
  +
  +public interface TestService extends javax.xml.ws.Service {
  +    public org.jboss.test.TestServiceInterface getTestServiceInterfacePort();
  +}&lt;/programlisting&gt;
  +
  +      &lt;para&gt;The Java Service EndpointInterface:&lt;/para&gt;
  +
  +      &lt;programlisting&gt;package org.jboss.test;
  +
  +@javax.jws.WebService(
  +    name="TestServiceInterface",
  +    serviceName="TestService",
  +    targetNamespace="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>",
  +    wsdlLocation="META-INF/wsdl/TestService.wsdl"
  +)
  +@javax.jws.soap.SOAPBinding(
  +    style=javax.jws.soap.SOAPBinding.Style.RPC,
  +    use=javax.jws.soap.SOAPBinding.Use.LITERAL )
  +public interface TestServiceInterface extends java.rmi.Remote {
  +    @javax.jws.WebMethod(operationName="echo")
  +    @javax.jws.WebResult(name="result")
  +    public
  +    java.lang.String echo(
  +        @javax.jws.WebParam(name="String_1")
  +        java.lang.String string1) throws java.rmi.RemoteException;
  +}&lt;/programlisting&gt;
       &lt;/sect2&gt;
   
       &lt;sect2&gt;
  @@ -549,7 +979,7 @@
           &lt;para&gt;Consider the following Java Service Endpoint
           Interface(SEI):&lt;/para&gt;
   
  -        &lt;programlisting&gt;Public interface MyServiceInterface &lt;command&gt;extends Remote&lt;/command&gt;
  +        &lt;programlisting&gt;public interface MyServiceInterface &lt;command&gt;extends Remote&lt;/command&gt;
   {
        public String getNewId() &lt;command&gt;throws RemoteException&lt;/command&gt;;
        public float getCost( String itemId) &lt;command&gt;throws RemoteException&lt;/command&gt;;
  @@ -566,7 +996,7 @@
           &lt;programlisting&gt;&amp;lt;configuration&amp;gt;
      &amp;lt;javaToWSDL&amp;gt;
          &amp;lt;service name=Ã¢Â€Â?MyServiceÃ¢Â€Â?  
  -                sei=Ã¢Â€Â?org.jboss.samples.MyServiceInterfaceÃ¢Â€Â?
  +                endpointInterface=Ã¢Â€Â?org.jboss.samples.MyServiceInterfaceÃ¢Â€Â?
                   wsdlStyle=Ã¢Â€Â?rpcÃ¢Â€Â? 
                   wsdlVersion=Ã¢Â€Â?1.1Ã¢Â€Â? 
                   includeSchemaInTypes=Ã¢Â€Â?trueÃ¢Â€Â?
  @@ -609,6 +1039,211 @@
           exposing a JSE or SLSB as an endpoint. To explain the global options,
           the user can provide a custom java package to xml namespace mapping to
           be used in the schema generation.&lt;/para&gt;
  +
  +        &lt;para&gt;The WSDL File is:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="MyService" targetNamespace="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns:tns="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCost"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCostResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewId"/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewIdResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrder"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrderResponse"/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrder"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;
  +    &amp;lt;part name="float_2" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmount"&amp;gt;
  +    &amp;lt;part name="float_1" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmountResponse"/&amp;gt;
  +  &amp;lt;portType name="MyServiceInterface"&amp;gt;
  +    &amp;lt;operation name="getCost" parameterOrder="String_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getCost"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getCostResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getNewId"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getNewIdResponse"/&amp;gt;
  +   &amp;lt;/operation&amp;gt;&amp;lt;operation name="logOrder" parameterOrder="String_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_logOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_logOrderResponse"/&amp;gt;
  +   &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder" parameterOrder="String_1 float_2"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_processOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_processOrderResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount" parameterOrder="float_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_setAmount"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_setAmountResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;&amp;lt;/portType&amp;gt;
  +&amp;lt;binding name="MyServiceInterfaceBinding" type="tns:MyServiceInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="rpc"/&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +&amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt;&amp;lt;/input&amp;gt" target="_new">http://jboss.org/test"/&amp;gt;&amp;lt;/input&amp;gt</a>;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt;&amp;lt;/output&amp;gt" target="_new">http://jboss.org/test"/&amp;gt;&amp;lt;/output&amp;gt</a>;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +     &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +     &amp;lt;/operation&amp;gt;
  +   &amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="MyService"&amp;gt;
  +    &amp;lt;port name="MyServiceInterfacePort" binding="tns:MyServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;
  +    &amp;lt;/port&amp;gt;
  + &amp;lt;/service&amp;gt;
  +&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
  +
  +        &lt;para&gt;The mapping file will look as follows:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.MyService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://jboss.org/test"&amp;gt;serviceNS:MyService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://jboss.org/test"&amp;gt;serviceNS:MyService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;MyServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;MyServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.MyServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getCost&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getCost&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;float&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getNewId&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getNewId&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;logOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;logOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;processOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;processOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;1&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_2&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;setAmount&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;setAmount&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;
  +&lt;/programlisting&gt;
         &lt;/sect3&gt;
   
         &lt;sect3&gt;
  @@ -621,7 +1256,7 @@
           &lt;programlisting&gt;&amp;lt;configuration&amp;gt;
      &amp;lt;javaToWSDL&amp;gt;
          &amp;lt;service name=Ã¢Â€Â?MyServiceÃ¢Â€Â?  
  -                sei=Ã¢Â€Â?org.jboss.samples.MyServiceInterfaceÃ¢Â€Â?
  +                endpointInterface=Ã¢Â€Â?org.jboss.samples.MyServiceInterfaceÃ¢Â€Â?
                   &lt;command&gt;wsdlStyle=Ã¢Â€Â?docÃ¢Â€Â?&lt;/command&gt; wsdlVersion=Ã¢Â€Â?1.1Ã¢Â€Â? 
                   includeSchemaInTypes=Ã¢Â€Â?trueÃ¢Â€Â?
                   oneWayOperations=Ã¢Â€Â?setAmount,logOrderÃ¢Â€Â?&amp;gt;
  @@ -652,7 +1287,120 @@
           &lt;para&gt;The wsdl file will contain the wrapped request / response
           structures and is shown below:&lt;/para&gt;
   
  -        &lt;programlisting&gt;TODO:Plugin the wsdl file&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="MyDocService" targetNamespace="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns:tns="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:ns2="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types&amp;gt;
  +    &amp;lt;schema targetNamespace="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:tns="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:soap11-enc="<a href="http://schemas.xmlsoap.org/soap/encoding/" target="_new">http://schemas.xmlsoap.org/soap/encoding/</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:wsdl="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns="<a href="http://www.w3.org/2001/XMLSchema"&amp;gt" target="_new">http://www.w3.org/2001/XMLSchema"&amp;gt</a>;
  +      &amp;lt;complexType name="getCost"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getCostResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getNewId"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getNewIdResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="logOrder"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="logOrderResponse"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="processOrder"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;
  +          &amp;lt;element name="float_2" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="processOrderResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="setAmount"&amp;gt;     &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="float_1" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="setAmountResponse"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;element name="getCost" type="tns:getCost"/&amp;gt;
  +      &amp;lt;element name="getCostResponse" type="tns:getCostResponse"/&amp;gt;
  +      &amp;lt;element name="getNewId" type="tns:getNewId"/&amp;gt;
  +      &amp;lt;element name="getNewIdResponse" type="tns:getNewIdResponse"/&amp;gt;
  +      &amp;lt;element name="logOrder" type="tns:logOrder"/&amp;gt;
  +      &amp;lt;element name="logOrderResponse" type="tns:logOrderResponse"/&amp;gt;
  +      &amp;lt;element name="processOrder" type="tns:processOrder"/&amp;gt;
  +      &amp;lt;element name="processOrderResponse" type="tns:processOrderResponse"/&amp;gt;
  +      &amp;lt;element name="setAmount" type="tns:setAmount"/&amp;gt;
  +      &amp;lt;element name="setAmountResponse" type="tns:setAmountResponse"/&amp;gt;&amp;lt;/schema&amp;gt;&amp;lt;/types&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCost"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:getCost"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCostResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:getCostResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewId"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:getNewId"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewIdResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:getNewIdResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrder"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:logOrder"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:logOrderResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrder"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:processOrder"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:processOrderResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmount"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:setAmount"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmountResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:setAmountResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;portType name="MyServiceInterface"&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getCost"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getCostResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getNewId"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getNewIdResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_logOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_logOrderResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_processOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_processOrderResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_setAmount"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_setAmountResponse"/&amp;gt;&amp;lt;/operation&amp;gt;&amp;lt;/portType&amp;gt;
  +  &amp;lt;binding name="MyServiceInterfaceBinding" type="tns:MyServiceInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="document"/&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;&amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="MyDocService"&amp;gt;
  +    &amp;lt;port name="MyServiceInterfacePort" binding="tns:MyServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;&amp;lt;/port&amp;gt;&amp;lt;/service&amp;gt;&amp;lt;/definitions&amp;gt;
  +&lt;/programlisting&gt;
   
           &lt;para&gt;The mapping file, webservices.xml and web.xml are shown
           below.&lt;/para&gt;
  @@ -677,13 +1425,106 @@
           &lt;para&gt;Consider the following wsdl file. It defines RPC/Literal Web
           Services.&lt;/para&gt;
   
  -        &lt;programlisting&gt;TODO:Plugin the wsdl file&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="MyService" targetNamespace="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns:tns="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCost"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCostResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewId"/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewIdResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrder"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrderResponse"/&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrder"&amp;gt;
  +    &amp;lt;part name="String_1" type="xsd:string"/&amp;gt;
  +    &amp;lt;part name="float_2" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" type="xsd:string"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmount"&amp;gt;
  +    &amp;lt;part name="float_1" type="xsd:float"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmountResponse"/&amp;gt;
  +  &amp;lt;portType name="MyServiceInterface"&amp;gt;
  +    &amp;lt;operation name="getCost" parameterOrder="String_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getCost"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getCostResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getNewId"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getNewIdResponse"/&amp;gt;
  +   &amp;lt;/operation&amp;gt;&amp;lt;operation name="logOrder" parameterOrder="String_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_logOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_logOrderResponse"/&amp;gt;
  +   &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder" parameterOrder="String_1 float_2"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_processOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_processOrderResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount" parameterOrder="float_1"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_setAmount"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_setAmountResponse"/&amp;gt;
  +    &amp;lt;/operation&amp;gt;&amp;lt;/portType&amp;gt;
  +  &amp;lt;binding name="MyServiceInterfaceBinding" type="tns:MyServiceInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="rpc"/&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt;&amp;lt;/input&amp;gt" target="_new">http://jboss.org/test"/&amp;gt;&amp;lt;/input&amp;gt</a>;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt;&amp;lt;/output&amp;gt" target="_new">http://jboss.org/test"/&amp;gt;&amp;lt;/output&amp;gt</a>;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +    &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +     &amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal" namespace="<a href="http://jboss.org/test"/&amp;gt" target="_new">http://jboss.org/test"/&amp;gt</a>;
  +      &amp;lt;/output&amp;gt;
  +     &amp;lt;/operation&amp;gt;
  +   &amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="MyService"&amp;gt;
  +    &amp;lt;port name="MyServiceInterfacePort" binding="tns:MyServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;
  +    &amp;lt;/port&amp;gt;
  +   &amp;lt;/service&amp;gt;
  +&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;You can use the following configuration file with
           jbossws.&lt;/para&gt;
   
           &lt;programlisting&gt;&amp;lt;configuration&amp;gt;
  -   &amp;lt;wsdlToJava &lt;command&gt;useJavaAnnotations=Ã¢Â€Â?falseÃ¢Â€Â?&lt;/command&gt;/&amp;gt; 
  +   &amp;lt;wsdlToJava &lt;command&gt;location="TestService.wsdl" useJavaAnnotations=Ã¢Â€Â?falseÃ¢Â€Â?&lt;/command&gt;/&amp;gt; 
      &amp;lt;global override=Ã¢Â€Â?trueÃ¢Â€Â? retainSourceFiles=Ã¢Â€Â?trueÃ¢Â€Â?/&amp;gt; 
   &amp;lt;/configuration&amp;gt;&lt;/programlisting&gt;
   
  @@ -692,31 +1533,275 @@
   
           &lt;para&gt;The command to run jbossws will be:&lt;/para&gt;
   
  -        &lt;programlisting&gt;./jbossws.sh -dest &lt;command&gt;gen&lt;/command&gt; -config &lt;command&gt;myconfig.xml&lt;/command&gt; TestService.wsdl&lt;/programlisting&gt;
  +        &lt;programlisting&gt;./jbossws.sh -dest &lt;command&gt;gen&lt;/command&gt; -config &lt;command&gt;myconfig.xml&lt;/command&gt;  &lt;/programlisting&gt;
   
           &lt;para&gt;Note that the words in bold need to be substituted with your
           values.&lt;/para&gt;
  +
  +        &lt;para&gt;The Service interface that gets generated is:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test; 
  +
  +public interface MyService extends javax.xml.ws.Service {
  +    public org.jboss.test.MyServiceInterface getMyServiceInterfacePort();
  +}&lt;/programlisting&gt;
  +
  +        &lt;para&gt;The mapping file is:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.MyService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://jboss.org/test"&amp;gt;serviceNS:MyService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://jboss.org/test"&amp;gt;serviceNS:MyService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;MyServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;MyServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.MyServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getCost&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getCost&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;float&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getNewId&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getNewId&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;logOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;logOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;processOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;processOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;1&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_2&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;setAmount&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;setAmount&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;&lt;/programlisting&gt;
         &lt;/sect3&gt;
   
         &lt;sect3&gt;
           &lt;title&gt;Document Style Web Services&lt;/title&gt;
   
           &lt;para&gt;Consider the following wsdl file. It defines Document/Literal
  -        Web Services.&lt;/para&gt;
  +        Web Service&lt;/para&gt;
   
  -        &lt;programlisting&gt;Todo: Plugin the wsdl file&lt;/programlisting&gt;
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +
  +&amp;lt;definitions name="MyDocService" targetNamespace="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns:tns="<a href="http://jboss.org/test" target="_new">http://jboss.org/test</a>" xmlns="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>" xmlns:ns2="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:soap="<a href="http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt" target="_new">http://schemas.xmlsoap.org/wsdl/soap/"&amp;gt</a>;
  +  &amp;lt;types&amp;gt;
  +    &amp;lt;schema targetNamespace="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:tns="<a href="http://jboss.org/test/types" target="_new">http://jboss.org/test/types</a>" xmlns:soap11-enc="<a href="http://schemas.xmlsoap.org/soap/encoding/" target="_new">http://schemas.xmlsoap.org/soap/encoding/</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xmlns:wsdl="<a href="http://schemas.xmlsoap.org/wsdl/" target="_new">http://schemas.xmlsoap.org/wsdl/</a>" xmlns="<a href="http://www.w3.org/2001/XMLSchema"&amp;gt" target="_new">http://www.w3.org/2001/XMLSchema"&amp;gt</a>;
  +      &amp;lt;complexType name="getCost"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getCostResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getNewId"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="getNewIdResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="logOrder"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="logOrderResponse"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="processOrder"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="String_1" type="string" nillable="true"/&amp;gt;
  +          &amp;lt;element name="float_2" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="processOrderResponse"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="result" type="string" nillable="true"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="setAmount"&amp;gt;
  +        &amp;lt;sequence&amp;gt;
  +          &amp;lt;element name="float_1" type="float"/&amp;gt;&amp;lt;/sequence&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;complexType name="setAmountResponse"&amp;gt;
  +        &amp;lt;sequence/&amp;gt;&amp;lt;/complexType&amp;gt;
  +      &amp;lt;element name="getCost" type="tns:getCost"/&amp;gt;
  +      &amp;lt;element name="getCostResponse" type="tns:getCostResponse"/&amp;gt;
  +      &amp;lt;element name="getNewId" type="tns:getNewId"/&amp;gt;
  +      &amp;lt;element name="getNewIdResponse" type="tns:getNewIdResponse"/&amp;gt;
  +      &amp;lt;element name="logOrder" type="tns:logOrder"/&amp;gt;
  +      &amp;lt;element name="logOrderResponse" type="tns:logOrderResponse"/&amp;gt;
  +      &amp;lt;element name="processOrder" type="tns:processOrder"/&amp;gt;
  +      &amp;lt;element name="processOrderResponse" type="tns:processOrderResponse"/&amp;gt;
  +      &amp;lt;element name="setAmount" type="tns:setAmount"/&amp;gt;
  +      &amp;lt;element name="setAmountResponse" type="tns:setAmountResponse"/&amp;gt;&amp;lt;/schema&amp;gt;&amp;lt;/types&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCost"&amp;gt;&amp;lt;part name="parameters" element="ns2:getCost"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getCostResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:getCostResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewId"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:getNewId"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_getNewIdResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:getNewIdResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrder"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:logOrder"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_logOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:logOrderResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrder"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:processOrder"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_processOrderResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:processOrderResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmount"&amp;gt;
  +    &amp;lt;part name="parameters" element="ns2:setAmount"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;message name="MyServiceInterface_setAmountResponse"&amp;gt;
  +    &amp;lt;part name="result" element="ns2:setAmountResponse"/&amp;gt;&amp;lt;/message&amp;gt;
  +  &amp;lt;portType name="MyServiceInterface"&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getCost"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getCostResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_getNewId"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_getNewIdResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_logOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_logOrderResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_processOrder"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_processOrderResponse"/&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;input message="tns:MyServiceInterface_setAmount"/&amp;gt;
  +      &amp;lt;output message="tns:MyServiceInterface_setAmountResponse"/&amp;gt;&amp;lt;/operation&amp;gt;&amp;lt;/portType&amp;gt;
  +  &amp;lt;binding name="MyServiceInterfaceBinding" type="tns:MyServiceInterface"&amp;gt;
  +    &amp;lt;soap:binding transport="<a href="http://schemas.xmlsoap.org/soap/http" target="_new">http://schemas.xmlsoap.org/soap/http</a>" style="&lt;command&gt;document&lt;/command&gt;"/&amp;gt;
  +    &amp;lt;operation name="getCost"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="&lt;command&gt;literal&lt;/command&gt;"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="getNewId"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="logOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="processOrder"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;
  +    &amp;lt;operation name="setAmount"&amp;gt;
  +      &amp;lt;soap:operation soapAction=""/&amp;gt;
  +      &amp;lt;input&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/input&amp;gt;
  +      &amp;lt;output&amp;gt;
  +        &amp;lt;soap:body use="literal"/&amp;gt;&amp;lt;/output&amp;gt;&amp;lt;/operation&amp;gt;&amp;lt;/binding&amp;gt;
  +  &amp;lt;service name="MyDocService"&amp;gt;
  +    &amp;lt;port name="MyServiceInterfacePort" binding="tns:MyServiceInterfaceBinding"&amp;gt;
  +      &amp;lt;soap:address location="REPLACE_WITH_ACTUAL_URL"/&amp;gt;&amp;lt;/port&amp;gt;&amp;lt;/service&amp;gt;&amp;lt;/definitions&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;You can use the following configuration file with
           jbossws.&lt;/para&gt;
   
           &lt;programlisting&gt;&amp;lt;configuration&amp;gt;
  -   &amp;lt;wsdlToJava &lt;command&gt;disableUnWrap=Ã¢Â€Â?trueÃ¢Â€Â?&lt;/command&gt; useJavaAnnotations=Ã¢Â€Â?falseÃ¢Â€Â?/&amp;gt; 
  +   &amp;lt;wsdlToJava &lt;command&gt;location="wsdl/MyDocService.wsdl" disableUnWrap=Ã¢Â€Â?trueÃ¢Â€Â?&lt;/command&gt; useJavaAnnotations=Ã¢Â€Â?falseÃ¢Â€Â?/&amp;gt; 
      &amp;lt;global override=Ã¢Â€Â?trueÃ¢Â€Â? retainSourceFiles=Ã¢Â€Â?trueÃ¢Â€Â?/&amp;gt; 
   &amp;lt;/configuration&amp;gt;&lt;/programlisting&gt;
   
           &lt;para&gt;The command to run jbossws remains the same as before.&lt;/para&gt;
   
  -        &lt;programlisting&gt;./jbossws.sh -dest &lt;command&gt;gen&lt;/command&gt; -config &lt;command&gt;myconfig.xml&lt;/command&gt; TestService.wsdl&lt;/programlisting&gt;
  +        &lt;programlisting&gt;./jbossws.sh -dest &lt;command&gt;gen&lt;/command&gt; -config &lt;command&gt;myconfig.xml&lt;/command&gt; &lt;/programlisting&gt;
  +
  +        &lt;para&gt;Lets have a look at the generated Java Service Endpoint
  +        Interface.&lt;/para&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public interface MyServiceInterface extends java.rmi.Remote {
  +    public float getCost(java.lang.String string_1) throws 
  +         java.rmi.RemoteException;
  +    public java.lang.String getNewId() throws 
  +         java.rmi.RemoteException;
  +    public org.jboss.test.LogOrderResponse logOrder(java.lang.String string_1) throws 
  +         java.rmi.RemoteException;
  +    public java.lang.String processOrder(java.lang.String string_1, float float_2) throws 
  +         java.rmi.RemoteException;
  +    public org.jboss.test.SetAmountResponse setAmount(float float_1) throws 
  +         java.rmi.RemoteException;
  +}&lt;/programlisting&gt;
   
           &lt;para&gt;jbossws by default will unwrap the wrapped types. If you want to
           retain the wrapped types and do not want jbossws to unwrap, please
  @@ -724,14 +1809,402 @@
           attribute is false.&lt;/para&gt;
   
           &lt;para&gt;Since unwrapping is disabled, the following Java Types are
  -        generated.&lt;/para&gt;
  +        generated. First the Java Service Endpoint Interace.&lt;/para&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public interface MyServiceInterface extends java.rmi.Remote {
  +    public float getCost(java.lang.String string_1) throws 
  +         java.rmi.RemoteException;
  +    public java.lang.String getNewId() throws 
  +         java.rmi.RemoteException;
  +    public org.jboss.test.LogOrderResponse logOrder(java.lang.String string_1) throws 
  +         java.rmi.RemoteException;
  +    public java.lang.String processOrder(java.lang.String string_1, float float_2) throws 
  +         java.rmi.RemoteException;
  +    public org.jboss.test.SetAmountResponse setAmount(float float_1) throws 
  +         java.rmi.RemoteException;
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class SetAmount {
  +    protected float float_1;
  +    
  +    public SetAmount() {
  +    }
  +    
  +    public SetAmount(float float_1) {
  +        this.float_1 = float_1;
  +    }
  +    
  +    public float getFloat_1() {
  +        return float_1;
  +    }
  +    
  +    public void setFloat_1(float float_1) {
  +        this.float_1 = float_1;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class SetAmountResponse {
  +    
  +    public SetAmountResponse() {
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class Order {
  +    protected int int_1;
  +    protected java.lang.String string_2;
  +    protected float float_3;
  +    
  +    public Order() {
  +    }
  +    
  +    public Order(int int_1, java.lang.String string_2, float float_3) {
  +        this.int_1 = int_1;
  +        this.string_2 = string_2;
  +        this.float_3 = float_3;
  +    }
  +    
  +    public int getInt_1() {
  +        return int_1;
  +    }
  +    
  +    public void setInt_1(int int_1) {
  +        this.int_1 = int_1;
  +    }
  +    
  +    public java.lang.String getString_2() {
  +        return string_2;
  +    }
  +    
  +    public void setString_2(java.lang.String string_2) {
  +        this.string_2 = string_2;
  +    }
  +    
  +    public float getFloat_3() {
  +        return float_3;
  +    }
  +    
  +    public void setFloat_3(float float_3) {
  +        this.float_3 = float_3;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +
  +public class OrderResponse {
  +    protected java.lang.String result;
  +    
  +    public OrderResponse() {
  +    }
  +    
  +    public OrderResponse(java.lang.String result) {
  +        this.result = result;
  +    }
  +    
  +    public java.lang.String getResult() {
  +        return result;
  +    }
  +    
  +    public void setResult(java.lang.String result) {
  +        this.result = result;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
  +
  +public class ProcessOrder {
  +    protected java.lang.String string_1;
  +    protected float float_2;
  +    
  +    public ProcessOrder() {
  +    }
  +    
  +    public ProcessOrder(java.lang.String string_1, float float_2) {
  +        this.string_1 = string_1;
  +        this.float_2 = float_2;
  +    }
  +    
  +    public java.lang.String getString_1() {
  +        return string_1;
  +    }
  +    
  +    public void setString_1(java.lang.String string_1) {
  +        this.string_1 = string_1;
  +    }
   
  -        &lt;programlisting&gt;TODO: Plugin the Java Types&lt;/programlisting&gt;
  +    public float getFloat_2() {
  +        return float_2;
  +    }
  +    
  +    public void setFloat_2(float float_2) {
  +        this.float_2 = float_2;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test;
   
  -        &lt;para&gt;Now if you had not disabled the unwrap, the following Java Types
  -        would have been generated.&lt;/para&gt;
  +public class ProcessOrderResponse {
  +    protected java.lang.String result;
  +    
  +    public ProcessOrderResponse() {
  +    }
  +    
  +    public ProcessOrderResponse(java.lang.String result) {
  +        this.result = result;
  +    }
  +    
  +    public java.lang.String getResult() {
  +        return result;
  +    }
   
  -        &lt;programlisting&gt;TODO: Plugin the unwrapped Java Types.&lt;/programlisting&gt;
  +    public void setResult(java.lang.String result) {
  +        this.result = result;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test; 
  +
  +public class LogOrder {
  +    protected java.lang.String string_1;
  +    
  +    public LogOrder() {
  +    }
  +    
  +    public LogOrder(java.lang.String string_1) {
  +        this.string_1 = string_1;
  +    }
  +    
  +    public java.lang.String getString_1() {
  +        return string_1;
  +    }
  +    
  +    public void setString_1(java.lang.String string_1) {
  +        this.string_1 = string_1;
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;programlisting&gt;package org.jboss.test; 
  +
  +public class LogOrderResponse {
  +    
  +    public LogOrderResponse() {
  +    }
  +}&lt;/programlisting&gt;
  +
  +        &lt;para&gt;Now if you had not disabled the unwrap, the Java Service
  +        Endpoint Interface &lt;command&gt;above&lt;/command&gt; would have been generated.
  +        Lets look at the SEI when unwrapping is done.&lt;/para&gt;
  +
  +        &lt;programlisting&gt;public interface MyServiceInterface &lt;command&gt;extends Remote&lt;/command&gt;
  +{
  +     public String getNewId() &lt;command&gt;throws RemoteException&lt;/command&gt;;
  +     public float getCost( String itemId) &lt;command&gt;throws RemoteException&lt;/command&gt;;
  +     public void setAmount(float amount) &lt;command&gt;throws RemoteException;&lt;/command&gt;
  +     public String processOrder( String id, float amount) &lt;command&gt;throws RemoteException;&lt;/command&gt;
  +     public void logOrder(String id) &lt;command&gt;throws RemoteException;&lt;/command&gt;
  +}&lt;/programlisting&gt;
  +
  +        &lt;para&gt;The mapping file is shown below:&lt;/para&gt;
  +
  +        &lt;programlisting&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;
  +&amp;lt;java-wsdl-mapping xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" version="1.1" xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>    <a href="http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt" target="_new">http://www.ibm.com/webservices/xsd/j2ee_jaxrpc_mapping_1_1.xsd"&amp;gt</a>;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test/types&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;package-mapping&amp;gt;
  +&amp;lt;package-type&amp;gt;org.jboss.test&amp;lt;/package-type&amp;gt;
  +&amp;lt;namespaceURI&amp;gt;<a href="http://jboss.org/test&amp;lt;/namespaceURI&amp;gt" target="_new">http://jboss.org/test&amp;lt;/namespaceURI&amp;gt</a>;
  +&amp;lt;/package-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_logOrder_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:logOrder&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:logOrder&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;String_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;String_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_processOrder_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:processOrderResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:processOrderResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;result&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;result&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_setAmount_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:setAmountResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:setAmountResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_setAmount_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:setAmount&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:setAmount&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;float_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;float_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_getCost_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:getCost&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:getCost&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;String_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;String_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_logOrder_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:logOrderResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:logOrderResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_getNewId_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:getNewId&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:getNewId&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_getCost_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:getCostResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:getCostResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;result&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;result&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_processOrder_RequestStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:processOrder&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:processOrder&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;String_1&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;String_1&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;float_2&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;float_2&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;java-xml-type-mapping&amp;gt;
  +&amp;lt;java-type&amp;gt;org.jboss.test.MyServiceInterface_getNewId_ResponseStruct&amp;lt;/java-type&amp;gt;
  +&amp;lt;root-type-qname xmlns:typeNS="<a href="http://jboss.org/test/types"&amp;gt;typeNS:getNewIdResponse&amp;lt;/root-type-qname&amp;gt" target="_new">http://jboss.org/test/types"&amp;gt;typeNS:getNewIdResponse&amp;lt;/root-type-qname&amp;gt</a>;
  +&amp;lt;qname-scope&amp;gt;complexType&amp;lt;/qname-scope&amp;gt;
  +&amp;lt;variable-mapping&amp;gt;
  +&amp;lt;java-variable-name&amp;gt;result&amp;lt;/java-variable-name&amp;gt;
  +&amp;lt;xml-element-name&amp;gt;result&amp;lt;/xml-element-name&amp;gt;
  +&amp;lt;/variable-mapping&amp;gt;
  +&amp;lt;/java-xml-type-mapping&amp;gt;
  +&amp;lt;service-interface-mapping&amp;gt;
  +&amp;lt;service-interface&amp;gt;org.jboss.test.MyDocService&amp;lt;/service-interface&amp;gt;
  +&amp;lt;wsdl-service-name xmlns:serviceNS="<a href="http://jboss.org/test"&amp;gt;serviceNS:MyDocService&amp;lt;/wsdl-service-name&amp;gt" target="_new">http://jboss.org/test"&amp;gt;serviceNS:MyDocService&amp;lt;/wsdl-service-name&amp;gt</a>;
  +&amp;lt;port-mapping&amp;gt;
  +&amp;lt;port-name&amp;gt;MyServiceInterfacePort&amp;lt;/port-name&amp;gt;
  +&amp;lt;java-port-name&amp;gt;MyServiceInterfacePort&amp;lt;/java-port-name&amp;gt;
  +&amp;lt;/port-mapping&amp;gt;
  +&amp;lt;/service-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;service-endpoint-interface&amp;gt;org.jboss.test.MyServiceInterface&amp;lt;/service-endpoint-interface&amp;gt;
  +&amp;lt;wsdl-port-type xmlns:portTypeNS="<a href="http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt" target="_new">http://jboss.org/test"&amp;gt;portTypeNS:MyServiceInterface&amp;lt;/wsdl-port-type&amp;gt</a>;
  +&amp;lt;wsdl-binding xmlns:bindingNS="<a href="http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt" target="_new">http://jboss.org/test"&amp;gt;bindingNS:MyServiceInterfaceBinding&amp;lt;/wsdl-binding&amp;gt</a>;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getCost&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getCost&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wrapped-element/&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCost&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;float&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getCostResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;getNewId&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;getNewId&amp;lt;/wsdl-operation&amp;gt;
  +&lt;command&gt;&amp;lt;wrapped-element/&amp;gt;&lt;/command&gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_getNewIdResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;logOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;logOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wrapped-element/&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_logOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;processOrder&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;processOrder&amp;lt;/wsdl-operation&amp;gt;
  +&amp;lt;wrapped-element/&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;java.lang.String&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;String_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;1&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrder&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_2&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;wsdl-return-value-mapping&amp;gt;
  +&amp;lt;method-return-value&amp;gt;java.lang.String&amp;lt;/method-return-value&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_processOrderResponse&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;result&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;/wsdl-return-value-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;service-endpoint-method-mapping&amp;gt;
  +&amp;lt;java-method-name&amp;gt;setAmount&amp;lt;/java-method-name&amp;gt;
  +&amp;lt;wsdl-operation&amp;gt;setAmount&amp;lt;/wsdl-operation&amp;gt;
  +&lt;command&gt;&amp;lt;wrapped-element/&amp;gt;&lt;/command&gt;
  +&amp;lt;method-param-parts-mapping&amp;gt;
  +&amp;lt;param-position&amp;gt;0&amp;lt;/param-position&amp;gt;
  +&amp;lt;param-type&amp;gt;float&amp;lt;/param-type&amp;gt;
  +&amp;lt;wsdl-message-mapping&amp;gt;
  +&amp;lt;wsdl-message xmlns:wsdlMsgNS="<a href="http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt" target="_new">http://jboss.org/test"&amp;gt;wsdlMsgNS:MyServiceInterface_setAmount&amp;lt;/wsdl-message&amp;gt</a>;
  +&amp;lt;wsdl-message-part-name&amp;gt;float_1&amp;lt;/wsdl-message-part-name&amp;gt;
  +&amp;lt;parameter-mode&amp;gt;IN&amp;lt;/parameter-mode&amp;gt;
  +&amp;lt;/wsdl-message-mapping&amp;gt;
  +&amp;lt;/method-param-parts-mapping&amp;gt;
  +&amp;lt;/service-endpoint-method-mapping&amp;gt;
  +&amp;lt;/service-endpoint-interface-mapping&amp;gt;
  +&amp;lt;/java-wsdl-mapping&amp;gt;
  +&lt;/programlisting&gt;
         &lt;/sect3&gt;
       &lt;/sect2&gt;
     &lt;/sect1&gt;
  
  
  
  1.1      date: 2005/07/30 00:10:16;  author: asaldhana;  state: Exp;webservice/docs/tools-docs/project/en/modules/jbossws.xml
  
  Index: jbossws.xml
  ===================================================================
  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;!-- $Id: jbossws.xml,v 1.1 2005/07/30 00:10:16 asaldhana Exp $ --&gt;
  &lt;chapter id="jbossws"&gt;
    &lt;title&gt;jbossws Feature List&lt;/title&gt;
  
    &lt;para&gt;This chapter lists all the features that will be available with
    jbossws, JBossWS Tools.&lt;/para&gt;
  
    &lt;table&gt;
      &lt;title&gt;jbossws features for JSR 181 Compliance &lt;/title&gt;
  
      &lt;tgroup cols="2"&gt;
        &lt;tbody&gt;
          &lt;row&gt;
            &lt;entry&gt;JSR 181 Annotations&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Java Annotated Endpoints to WSDL&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;WSDL To Java Annotated Types&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/tbody&gt;
      &lt;/tgroup&gt;
    &lt;/table&gt;
  
    &lt;para&gt;JSR 181 Annotations support will be done in wstools-1.0
    release.&lt;/para&gt;
  
    &lt;table&gt;
      &lt;title&gt;JSR 181 Annotations Supported&lt;/title&gt;
  
      &lt;tgroup cols="2"&gt;
        &lt;thead&gt;
          &lt;row&gt;
            &lt;entry&gt;Annotation&lt;/entry&gt;
  
            &lt;entry&gt;Support&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/thead&gt;
  
        &lt;tbody&gt;
          &lt;row&gt;
            &lt;entry&gt;javax.jws.WebService&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.WebMethod&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.Oneway&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.WebParam&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.WebResult&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.HandlerChain&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.soap.SOAPBinding&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;javax.jws.soap.SOAPMessageHandlers&lt;/entry&gt;
  
            &lt;entry&gt;Supported&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/tbody&gt;
      &lt;/tgroup&gt;
    &lt;/table&gt;
  
    &lt;para&gt;jbossws will also support JSR-109 style webservices where annotations
    are not used. There is also a column that lists the feature against the
    release of wstools.&lt;/para&gt;
  
    &lt;table&gt;
      &lt;title&gt;jbossws support for JSR109 Style Web Services&lt;/title&gt;
  
      &lt;tgroup cols="2"&gt;
        &lt;thead&gt;
          &lt;row&gt;
            &lt;entry align="center"&gt;Feature&lt;/entry&gt;
  
            &lt;entry align="center"&gt;Version&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/thead&gt;
  
        &lt;tbody&gt;
          &lt;row&gt;
            &lt;entry&gt;Java SEI to WSDL 1.1&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.0Beta&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;WSDL 1.1 to Java SEI&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.0 Beta&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Generation of war file (POJO Deployment)&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.1&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Generation of ejb-jar file (SLSB Deployment)&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.1&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Attachments Support&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.1&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/tbody&gt;
      &lt;/tgroup&gt;
    &lt;/table&gt;
  
    &lt;para&gt;jbossws support for custom annotation via
    org.jboss.ws.annotation.PortComponent is described below.&lt;/para&gt;
  
    &lt;table&gt;
      &lt;title&gt;jbossws support for custom annotations&lt;/title&gt;
  
      &lt;tgroup cols="2"&gt;
        &lt;thead&gt;
          &lt;row&gt;
            &lt;entry align="center"&gt;Feature&lt;/entry&gt;
  
            &lt;entry align="center"&gt;Support&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/thead&gt;
  
        &lt;tbody&gt;
          &lt;row&gt;
            &lt;entry&gt;Generation of webservices.xml&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.0rc1&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Generation of web.xml&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.0rc1&lt;/entry&gt;
          &lt;/row&gt;
  
          &lt;row&gt;
            &lt;entry&gt;Generation of jboss.xml&lt;/entry&gt;
  
            &lt;entry&gt;wstools-1.0rc1&lt;/entry&gt;
          &lt;/row&gt;
        &lt;/tbody&gt;
      &lt;/tgroup&gt;
    &lt;/table&gt;
  &lt;/chapter&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785427">[jboss-cvs] webservice/docs/tools-docs/project/en  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Anil Saldhana &lt;anil.saldhana@jb...&gt; -	2005-07-30 00:11</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: asaldhana
  Date: 05/07/29 20:10:16

  Modified:    docs/tools-docs/project/en  master.xml
  Log:
  jbossws feature/user guide update
  
  Revision  Changes    Path
  1.11      +4 -2      webservice/docs/tools-docs/project/en/master.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: master.xml
  ===================================================================
  RCS file: /cvsroot/jboss/webservice/docs/tools-docs/project/en/master.xml,v
  retrieving revision 1.10
  retrieving revision 1.11
  diff -u -b -r1.10 -r1.11
  --- master.xml	29 Jul 2005 04:38:33 -0000	1.10
  +++ master.xml	30 Jul 2005 00:10:16 -0000	1.11
  @@ -1,12 +1,13 @@
   &lt;?xml version='1.0' encoding="iso-8859-1"?&gt;
   
  -&lt;!-- $Id: master.xml,v 1.10 2005/07/29 04:38:33 asaldhana Exp $ --&gt;
  +&lt;!-- $Id: master.xml,v 1.11 2005/07/30 00:10:16 asaldhana Exp $ --&gt;
   
   &lt;!DOCTYPE book PUBLIC
     "-//OASIS//DTD DocBook XML V4.3CR3//EN"
     "../../../../../docbook-support/support/docbook-dtd/docbookx.dtd"
   [
   &lt;!ENTITY goals                  SYSTEM "modules/goals.xml"&gt;
  +&lt;!ENTITY jbossws                SYSTEM "modules/jbossws.xml"&gt;
   &lt;!ENTITY jbosswsfeatures         SYSTEM "modules/jbosswsfeatures.xml"&gt;
   &lt;!--
   &lt;!ENTITY java2wsdl              SYSTEM "modules/java2wsdl.xml"&gt;
  @@ -51,6 +52,7 @@
   
     &amp;softwarearch;  
     --&gt;
  +  &amp;jbossws;
     &amp;jbosswsfeatures;
   
   &lt;/book&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785423">[jboss-cvs] jboss-deployment/src/main/org/jboss/deployment/spi  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 23:30</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 19:28:52

  Modified:    src/main/org/jboss/deployment/spi  Tag: Branch_4_0
                        JMXTarget.java
  Log:
  Resolve the j2ee module type based on the deployment deployer object name. The object names are obtained by querying the jsr77 mbean. Resolves (JBAS-1998) Module Type in [Serializable]DeploymentInfo.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.1.1.4.5 +103 -19   jboss-deployment/src/main/org/jboss/deployment/spi/JMXTarget.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JMXTarget.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-deployment/src/main/org/jboss/deployment/spi/JMXTarget.java,v
  retrieving revision 1.1.1.1.4.4
  retrieving revision 1.1.1.1.4.5
  diff -u -b -r1.1.1.1.4.4 -r1.1.1.1.4.5
  --- JMXTarget.java	5 Jul 2005 11:28:55 -0000	1.1.1.1.4.4
  +++ JMXTarget.java	29 Jul 2005 23:28:52 -0000	1.1.1.1.4.5
  @@ -9,6 +9,7 @@
   import java.net.InetAddress;
   import java.net.URI;
   import java.net.URL;
  +import java.net.URLDecoder;
   import java.util.ArrayList;
   import java.util.Collection;
   import java.util.Iterator;
  @@ -20,6 +21,8 @@
   import javax.enterprise.deploy.spi.exceptions.TargetException;
   import javax.management.MBeanServerConnection;
   import javax.management.ObjectName;
  +import javax.management.AttributeList;
  +import javax.management.Attribute;
   import javax.naming.Context;
   import javax.naming.InitialContext;
   import javax.naming.NamingException;
  @@ -34,7 +37,7 @@
    * MainDeployer using file URLs to the deployments.
    * @author thomas.diesler@...
    * @author Scott.Stark@...
  - * @version $Revision: 1.1.1.1.4.4 $
  + * @version $Revision: 1.1.1.1.4.5 $
    */
   public class JMXTarget implements JBossTarget
   {
  @@ -44,13 +47,38 @@
       */
      private static final String DEFAULT_ADAPTOR_PATH = "/jmx/invoker/RMIAdaptor";
      /**
  -    * The MainDeployer JMX object name string
  +    * The default MainDeployer JMX object name string
       */
      private static final String MAIN_DEPLOYER = "jboss.system:service=MainDeployer";
  +   /** The main deployer uri option name */
  +   private static final String MAIN_DEPLOYER_OPT = "mainDeployer";
  +   /**
  +    * The default LocalJBossServerDomain JMX object name string
  +    */
  +   private static final String JSR77_MBEAN = "jboss.management.local:j2eeType=J2EEDomain,name=Manager";
  +   /** The main deployer uri option name */
  +   private static final String JSR77_MBEAN_OPT = "jsr77MBean";
   
  +   /** The deployment target uri */
      private URI deployURI;
  +   /** The JNDI properties used to locat the MBeanServer */
      private Properties jndiEnv;
  +   /** MainDeployer JMX object name */
  +   private ObjectName mainDeployer;
  +   /** LocalJBossServerDomain JMX object name */
  +   private ObjectName jsr77MBean;
  +   private ObjectName carDeployer;
  +   private ObjectName earDeployer;
  +   private ObjectName ejbDeployer;
  +   private ObjectName rarDeployer;
  +   private ObjectName warDeployer;
   
  +   /**
  +    * @todo merge the query parameter parsing for jndi and mbean names and
  +    * test proper escaping of unsafe url chars.
  +    * 
  +    * @param deployURI
  +    */ 
      public JMXTarget(URI deployURI)
      {
         log.debug("new JMXTarget: " + deployURI);
  @@ -60,7 +88,7 @@
            String host = deployURI.getHost();
            int port = deployURI.getPort();
            String path = deployURI.getPath();
  -         String query = deployURI.getQuery();
  +         String query = deployURI.getRawQuery();
   
            StringBuffer uri = new StringBuffer(scheme + "://");
            uri.append(host != null ? host : InetAddress.getLocalHost().getHostName());
  @@ -70,13 +98,16 @@
   
            deployURI = new URI(uri.toString());
            log.debug("URI changed to: " + deployURI);
  +        
  +         this.deployURI = deployURI;
  +         // Parse the query for options
  +         parseQuery();
         }
         catch (Exception e)
         {
            log.error(e);
         }
   
  -      this.deployURI = deployURI;
      }
   
      /**
  @@ -112,7 +143,6 @@
         throws Exception
      {
         MBeanServerConnection server = getMBeanServerConnection();
  -      ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
         String url = targetModuleID.getModuleID();
         Object[] args = {url};
         String[] sig = {String.class.getName()};
  @@ -205,7 +235,28 @@
         {
            List list = new ArrayList();
            MBeanServerConnection server = getMBeanServerConnection();
  -         ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
  +         if( earDeployer == null )
  +         {
  +            // Query the jsr77MBean for the j2ee deployer names
  +            String[] names = {"CARDeployer", "EARDeployer", "EJBDeployer",
  +                              "RARDeployer", "WARDeployer"}; 
  +            AttributeList attrs = server.getAttributes(jsr77MBean, names);
  +            for(int n = 0; n &lt; attrs.size(); n ++)
  +            {
  +               Attribute a = (Attribute) attrs.get(n);
  +               if( a.getName().equals("CARDeployer") )
  +                  carDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("EARDeployer") )
  +                  earDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("EJBDeployer") )
  +                  ejbDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("RARDeployer") )
  +                  rarDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("WARDeployer") )
  +                  warDeployer = (ObjectName) a.getValue();
  +            }
  +         }
  +
            Collection col = (Collection) server.invoke(mainDeployer, "listDeployedModules", new Object[0], new String[0]);
            for (Iterator it = col.iterator(); it.hasNext();)
            {
  @@ -259,9 +310,8 @@
      }
   
      /**
  -    * Determine the module type based on the module url suffix. For the
  -    * ambiguous .jar use the info.watch url to see if its an ejb-jar or
  -    * client application jar. 
  +    * Determine the module type based on the name of the deployment info
  +    * deployer object name.
       * 
       * @param info - the deployment info from the jboss server.
       * @return the deployment module type
  @@ -269,27 +319,29 @@
      private ModuleType getModuleType(SerializableDeploymentInfo info)
      {
         ModuleType type = null;
  -      String module = info.url.toString();
  +      ObjectName deployer = info.deployer;
           
         // Validate an ejb vs car based on the watch url
  -      if ((module.endsWith(".jar")) || (module.endsWith(".jar/")))
  +      if ( deployer.equals(carDeployer) )
         {
  -         type = ModuleType.EJB;
  -         if( info.watch != null &amp;&amp; info.watch.toString().endsWith("ejb-jar.xml") == false )
               type = ModuleType.CAR;
         }
  -      else if ((module.endsWith(".war")) || (module.endsWith(".war/")))
  +      else if ( deployer.equals(ejbDeployer) )
         {
  -         type = ModuleType.WAR;
  +         type = ModuleType.EJB;
         }
  -      else if ((module.endsWith(".ear")) || (module.endsWith(".ear/")))
  +      else if ( deployer.equals(earDeployer) )
         {
            type = ModuleType.EAR;
         }
  -      else if ((module.endsWith(".rar")) || (module.endsWith(".rar")))
  +      else if ( deployer.equals(rarDeployer) )
         {
            type = ModuleType.RAR;
         }
  +      else if ( deployer.equals(warDeployer) )
  +      {
  +         type = ModuleType.WAR;
  +      }
   
         return type;
      }
  @@ -349,6 +401,38 @@
         return server;
      }
   
  +   /**
  +    * Parse the query portion of the deployment URI to look for options:
  +    * mainDeployer : specifies the MainDeployer mbean name
  +    * jsr77MBean : specifies the JSR77 mbean service that tracks 
  +    */ 
  +   private void parseQuery()
  +      throws Exception
  +   {
  +      String query = deployURI.getRawQuery();
  +      log.debug("DeployURI.rawQuery: "+query);
  +      Properties params = new Properties();
  +      if( query != null )
  +      {
  +         /* Break the raw query into the name=value pairs. This processing is
  +         too fragile to how the URI was built as it expects that only
  +         the name/value portions of the query were encoded.
  +         */
  +         String[] options = query.split("[&amp;=]");
  +         for(int n = 0; n &lt; options.length; n += 2)
  +         {
  +            String name = URLDecoder.decode(options[n], "UTF-8");
  +            String value = URLDecoder.decode(options[n+1], "UTF-8");
  +            params.setProperty(name, value);
  +         }
  +      }
  +
  +      String name = params.getProperty(MAIN_DEPLOYER_OPT, MAIN_DEPLOYER);
  +      mainDeployer = new ObjectName(name);
  +      name = params.getProperty(JSR77_MBEAN_OPT, JSR77_MBEAN);
  +      jsr77MBean = new ObjectName(name);
  +   }
  +
      private Properties buildJNDIEnv()
      {
         if (jndiEnv == null)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785426">[jboss-cvs] jboss-deployment/src/main/org/jboss/deployment/spi  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 23:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 19:36:25

  Modified:    src/main/org/jboss/deployment/spi  JMXTarget.java
  Log:
  Resolve the j2ee module type based on the deployment deployer object name. The object names are obtained by querying the jsr77 mbean. Resolves (JBAS-1998) Module Type in [Serializable]DeploymentInfo.
  
  Revision  Changes    Path
  1.4       +175 -67   jboss-deployment/src/main/org/jboss/deployment/spi/JMXTarget.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JMXTarget.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-deployment/src/main/org/jboss/deployment/spi/JMXTarget.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- JMXTarget.java	26 Jun 2005 04:35:50 -0000	1.3
  +++ JMXTarget.java	29 Jul 2005 23:36:25 -0000	1.4
  @@ -8,6 +8,8 @@
   
   import java.net.InetAddress;
   import java.net.URI;
  +import java.net.URL;
  +import java.net.URLDecoder;
   import java.util.ArrayList;
   import java.util.Collection;
   import java.util.Iterator;
  @@ -19,10 +21,13 @@
   import javax.enterprise.deploy.spi.exceptions.TargetException;
   import javax.management.MBeanServerConnection;
   import javax.management.ObjectName;
  +import javax.management.AttributeList;
  +import javax.management.Attribute;
   import javax.naming.Context;
   import javax.naming.InitialContext;
   import javax.naming.NamingException;
   
  +import org.jboss.deployment.DeploymentInfo;
   import org.jboss.deployment.DeploymentState;
   import org.jboss.deployment.SerializableDeploymentInfo;
   import org.jboss.logging.Logger;
  @@ -30,10 +35,9 @@
   /**
    * A Target that deploys using the JMX adaptor to communicate with the
    * MainDeployer using file URLs to the deployments.
  - *
    * @author thomas.diesler@...
    * @author Scott.Stark@...
  - * @version $Revision: 1.3 $
  + * @version $Revision: 1.4 $
    */
   public class JMXTarget implements JBossTarget
   {
  @@ -43,13 +47,38 @@
       */
      private static final String DEFAULT_ADAPTOR_PATH = "/jmx/invoker/RMIAdaptor";
      /**
  -    * The MainDeployer JMX object name string
  +    * The default MainDeployer JMX object name string
       */
      private static final String MAIN_DEPLOYER = "jboss.system:service=MainDeployer";
  +   /** The main deployer uri option name */
  +   private static final String MAIN_DEPLOYER_OPT = "mainDeployer";
  +   /**
  +    * The default LocalJBossServerDomain JMX object name string
  +    */
  +   private static final String JSR77_MBEAN = "jboss.management.local:j2eeType=J2EEDomain,name=Manager";
  +   /** The main deployer uri option name */
  +   private static final String JSR77_MBEAN_OPT = "jsr77MBean";
   
  +   /** The deployment target uri */
      private URI deployURI;
  +   /** The JNDI properties used to locat the MBeanServer */
      private Properties jndiEnv;
  +   /** MainDeployer JMX object name */
  +   private ObjectName mainDeployer;
  +   /** LocalJBossServerDomain JMX object name */
  +   private ObjectName jsr77MBean;
  +   private ObjectName carDeployer;
  +   private ObjectName earDeployer;
  +   private ObjectName ejbDeployer;
  +   private ObjectName rarDeployer;
  +   private ObjectName warDeployer;
   
  +   /**
  +    * @todo merge the query parameter parsing for jndi and mbean names and
  +    * test proper escaping of unsafe url chars.
  +    * 
  +    * @param deployURI
  +    */ 
      public JMXTarget(URI deployURI)
      {
         log.debug("new JMXTarget: " + deployURI);
  @@ -59,7 +88,7 @@
            String host = deployURI.getHost();
            int port = deployURI.getPort();
            String path = deployURI.getPath();
  -         String query = deployURI.getQuery();
  +         String query = deployURI.getRawQuery();
   
            StringBuffer uri = new StringBuffer(scheme + "://");
            uri.append(host != null ? host : InetAddress.getLocalHost().getHostName());
  @@ -69,18 +98,20 @@
   
            deployURI = new URI(uri.toString());
            log.debug("URI changed to: " + deployURI);
  +        
  +         this.deployURI = deployURI;
  +         // Parse the query for options
  +         parseQuery();
         }
         catch (Exception e)
         {
            log.error(e);
         }
   
  -      this.deployURI = deployURI;
      }
   
      /**
       * Get the target's description
  -    * 
       * @return the description
       */
      public String getDescription()
  @@ -90,12 +121,11 @@
   
      /**
       * Get the target's name
  -    * 
       * @return the name
       */
      public String getName()
      {
  -      return deployURI.getSchemeSpecificPart();
  +      return deployURI.toString();
      }
   
      /**
  @@ -113,11 +143,10 @@
         throws Exception
      {
         MBeanServerConnection server = getMBeanServerConnection();
  -      ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
         String url = targetModuleID.getModuleID();
         Object[] args = {url};
         String[] sig = {String.class.getName()};
  -      log.info("Starting deploy of: " + url);
  +      log.info("Deploy: " + url);
         server.invoke(mainDeployer, "deploy", args, sig);
      }
   
  @@ -128,12 +157,25 @@
      {
         MBeanServerConnection server = getMBeanServerConnection();
         ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
  -      String url = targetModuleID.getModuleID();
  +      URL url = new URL(targetModuleID.getModuleID());
         Object[] args = {url};
  -      String[] sig = {String.class.getName()};
  -      log.debug("Starting : " + url);
  +      String[] sig = {URL.class.getName()};
  +      DeploymentInfo di = (DeploymentInfo)server.invoke(mainDeployer, "getDeployment", args, sig);
  +      if (di == null)
  +         throw new IllegalStateException("Cannot obtain deployment info for: " + url);
  +      
  +      if (di.state != DeploymentState.STARTED)
  +      {
  +         log.debug("Start: " + url);
  +         args = new Object[]{url.toExternalForm()};
  +         sig = new String[]{String.class.getName()};
         server.invoke(mainDeployer, "start", args, sig);
      }
  +      else
  +      {
  +         log.debug("Already started: " + url);
  +      }
  +   }
   
      /**
       * Stop a given module
  @@ -142,12 +184,25 @@
      {
         MBeanServerConnection server = getMBeanServerConnection();
         ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
  -      String url = targetModuleID.getModuleID();
  +      URL url = new URL(targetModuleID.getModuleID());
         Object[] args = {url};
  -      String[] sig = {String.class.getName()};
  -      log.debug("Stopping : " + url);
  +      String[] sig = {URL.class.getName()};
  +      DeploymentInfo di = (DeploymentInfo)server.invoke(mainDeployer, "getDeployment", args, sig);
  +      if (di == null)
  +         throw new IllegalStateException("Cannot obtain deployment info for: " + url);
  +      
  +      if (di.state != DeploymentState.STOPPED)
  +      {
  +         log.debug("Stop: " + url);
  +         args = new Object[]{url.toExternalForm()};
  +         sig = new String[]{String.class.getName()};
         server.invoke(mainDeployer, "stop", args, sig);
      }
  +      else
  +      {
  +         log.debug("Already stoped: " + url);
  +      }
  +   }
   
      /**
       * Undeploy a given module
  @@ -160,7 +215,7 @@
         String url = targetModuleID.getModuleID();
         Object[] args = {url};
         String[] sig = {String.class.getName()};
  -      log.debug("Starting undeploy of: " + url);
  +      log.debug("Undeploy: " + url);
         server.invoke(mainDeployer, "undeploy", args, sig);
      }
   
  @@ -180,7 +235,28 @@
         {
            List list = new ArrayList();
            MBeanServerConnection server = getMBeanServerConnection();
  -         ObjectName mainDeployer = new ObjectName(MAIN_DEPLOYER);
  +         if( earDeployer == null )
  +         {
  +            // Query the jsr77MBean for the j2ee deployer names
  +            String[] names = {"CARDeployer", "EARDeployer", "EJBDeployer",
  +                              "RARDeployer", "WARDeployer"}; 
  +            AttributeList attrs = server.getAttributes(jsr77MBean, names);
  +            for(int n = 0; n &lt; attrs.size(); n ++)
  +            {
  +               Attribute a = (Attribute) attrs.get(n);
  +               if( a.getName().equals("CARDeployer") )
  +                  carDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("EARDeployer") )
  +                  earDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("EJBDeployer") )
  +                  ejbDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("RARDeployer") )
  +                  rarDeployer = (ObjectName) a.getValue();
  +               else if( a.getName().equals("WARDeployer") )
  +                  warDeployer = (ObjectName) a.getValue();
  +            }
  +         }
  +
            Collection col = (Collection) server.invoke(mainDeployer, "listDeployedModules", new Object[0], new String[0]);
            for (Iterator it = col.iterator(); it.hasNext();)
            {
  @@ -234,9 +310,8 @@
      }
   
      /**
  -    * Determine the module type based on the module url suffix. For the
  -    * ambiguous .jar use the info.watch url to see if its an ejb-jar or
  -    * client application jar. 
  +    * Determine the module type based on the name of the deployment info
  +    * deployer object name.
       * 
       * @param info - the deployment info from the jboss server.
       * @return the deployment module type
  @@ -244,27 +319,29 @@
      private ModuleType getModuleType(SerializableDeploymentInfo info)
      {
         ModuleType type = null;
  -      String module = info.url.toString();
  +      ObjectName deployer = info.deployer;
           
         // Validate an ejb vs car based on the watch url
  -      if ((module.endsWith(".jar")) || (module.endsWith(".jar/")))
  +      if ( deployer.equals(carDeployer) )
         {
  -         type = ModuleType.EJB;
  -         if( info.watch != null &amp;&amp; info.watch.toString().endsWith("ejb-jar.xml") == false )
               type = ModuleType.CAR;
         }
  -      else if ((module.endsWith(".war")) || (module.endsWith(".war/")))
  +      else if ( deployer.equals(ejbDeployer) )
         {
  -         type = ModuleType.WAR;
  +         type = ModuleType.EJB;
         }
  -      else if ((module.endsWith(".ear")) || (module.endsWith(".ear/")))
  +      else if ( deployer.equals(earDeployer) )
         {
            type = ModuleType.EAR;
         }
  -      else if ((module.endsWith(".rar")) || (module.endsWith(".rar")))
  +      else if ( deployer.equals(rarDeployer) )
         {
            type = ModuleType.RAR;
         }
  +      else if ( deployer.equals(warDeployer) )
  +      {
  +         type = ModuleType.WAR;
  +      }
   
         return type;
      }
  @@ -317,20 +394,51 @@
      {
         Properties env = buildJNDIEnv();
         String lookupPath = deployURI.getPath();
  -      if (lookupPath == null || lookupPath.length() == 0)
  -         lookupPath = DEFAULT_ADAPTOR_PATH;
  +      log.debug("JNDI lookup: " + lookupPath);
         log.trace("Creating InitialContext with env: " + env);
         InitialContext ctx = new InitialContext(env);
         MBeanServerConnection server = (MBeanServerConnection) ctx.lookup(lookupPath);
         return server;
      }
   
  -   private Properties buildJNDIEnv()
  +   /**
  +    * Parse the query portion of the deployment URI to look for options:
  +    * mainDeployer : specifies the MainDeployer mbean name
  +    * jsr77MBean : specifies the JSR77 mbean service that tracks 
  +    */ 
  +   private void parseQuery()
  +      throws Exception
      {
  -      if (jndiEnv != null)
  -         return jndiEnv;
  +      String query = deployURI.getRawQuery();
  +      log.debug("DeployURI.rawQuery: "+query);
  +      Properties params = new Properties();
  +      if( query != null )
  +      {
  +         /* Break the raw query into the name=value pairs. This processing is
  +         too fragile to how the URI was built as it expects that only
  +         the name/value portions of the query were encoded.
  +         */
  +         String[] options = query.split("[&amp;=]");
  +         for(int n = 0; n &lt; options.length; n += 2)
  +         {
  +            String name = URLDecoder.decode(options[n], "UTF-8");
  +            String value = URLDecoder.decode(options[n+1], "UTF-8");
  +            params.setProperty(name, value);
  +         }
  +      }
  +
  +      String name = params.getProperty(MAIN_DEPLOYER_OPT, MAIN_DEPLOYER);
  +      mainDeployer = new ObjectName(name);
  +      name = params.getProperty(JSR77_MBEAN_OPT, JSR77_MBEAN);
  +      jsr77MBean = new ObjectName(name);
  +   }
   
  +   private Properties buildJNDIEnv()
  +   {
  +      if (jndiEnv == null)
  +      {
         jndiEnv = new Properties();
  +
         // Parse the query string for name=value pairs to put into the env
         String query = deployURI.getQuery();
         if (query != null)
  @@ -348,8 +456,7 @@
         // Set defaults for missing properties
         if (jndiEnv.getProperty(Context.INITIAL_CONTEXT_FACTORY) == null)
         {
  -         jndiEnv.setProperty(Context.INITIAL_CONTEXT_FACTORY,
  -                 "org.jnp.interfaces.NamingContextFactory");
  +            jndiEnv.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
         }
         if (jndiEnv.getProperty(Context.PROVIDER_URL) == null)
         {
  @@ -364,6 +471,7 @@
         {
            jndiEnv.setProperty(Context.OBJECT_FACTORIES, "org.jboss.naming");
         }
  +      }
   
         return jndiEnv;
      }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785424">[jboss-cvs] JBossCache/src/org/jboss/cache  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 23:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 19:37:04

  Modified:    src/org/jboss/cache  AbstractNode.java
  Log:
  indent it recursively
  
  Revision  Changes    Path
  1.5       +1 -0      JBossCache/src/org/jboss/cache/AbstractNode.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AbstractNode.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossCache/src/org/jboss/cache/AbstractNode.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- AbstractNode.java	11 Jul 2005 09:49:34 -0000	1.4
  +++ AbstractNode.java	29 Jul 2005 23:37:04 -0000	1.5
  @@ -180,6 +180,7 @@
      {
         Map.Entry entry;
         printIndent(sb, indent);
  +      indent += 2;   // increse it
         sb.append(TreeCache.SEPARATOR).append(name);
         sb.append("\n");
         if(map != null)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785425">[jboss-cvs] JBossCache/src/org/jboss/cache  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 23:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 19:37:37

  Modified:    src/org/jboss/cache  TreeCache.java
  Log:
  indent it recursively
  
  Revision  Changes    Path
  1.30      +2 -2      JBossCache/src/org/jboss/cache/TreeCache.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: TreeCache.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossCache/src/org/jboss/cache/TreeCache.java,v
  retrieving revision 1.29
  retrieving revision 1.30
  diff -u -b -r1.29 -r1.30
  --- TreeCache.java	28 Jul 2005 08:39:38 -0000	1.29
  +++ TreeCache.java	29 Jul 2005 23:37:37 -0000	1.30
  @@ -49,7 +49,7 @@
    * @author Bela Ban
    * @author Ben Wang
    * @author &lt;a href="mailto:manik@... Surtani (manik@...&gt;
  - * @version $Id: TreeCache.java,v 1.29 2005/07/28 08:39:38 msurtani Exp $
  + * @version $Id: TreeCache.java,v 1.30 2005/07/29 23:37:37 bwang Exp $
    * &lt;p/&gt;
    */
   public class TreeCache extends ServiceMBeanSupport implements TreeCacheMBean, Cloneable, MembershipListener {
  @@ -2201,7 +2201,7 @@
       */
      public String printDetails() {
         StringBuffer sb=new StringBuffer();
  -      int indent=0;
  +      int indent=2;
         Map children;
   
         children=root.getChildren();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785422">[jboss-cvs] jbosstest/src/main/org/jboss/test/deployment  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 23:20</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 19:19:00

  Modified:    src/main/org/jboss/test/deployment  Tag: Branch_4_0
                        DeploymentTestCase.java
  Log:
  Fix some of the deployment resource paths and remove the attempt to stop from the finally as this simply hangs if the test failed.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.4   +54 -56    jbosstest/src/main/org/jboss/test/deployment/DeploymentTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DeploymentTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/deployment/DeploymentTestCase.java,v
  retrieving revision 1.1.2.3
  retrieving revision 1.1.2.4
  diff -u -b -r1.1.2.3 -r1.1.2.4
  --- DeploymentTestCase.java	6 Jul 2005 23:09:29 -0000	1.1.2.3
  +++ DeploymentTestCase.java	29 Jul 2005 23:19:00 -0000	1.1.2.4
  @@ -175,6 +175,11 @@
         }
      }
   
  +   /**
  +    * @todo this needs a new jsr88 deployment manager
  +    * 
  +    * @throws Exception
  +    */ 
      public void testListStartStopModules() throws Exception
      {
         TargetModuleIDImpl child = null;
  @@ -189,8 +194,6 @@
         assertNull("no modules Available", modules);
   
         ProgressObject parentProgress = jsr88Deployment("deployment-ear.ear");
  -      try
  -      {
            assertServletAccess("custom-context");
            assertEjbEchoAccess();
   
  @@ -236,12 +239,8 @@
            assertTrue("wrong state", parent.isRunning());
            assertEquals("wrong type", parent.getModeType(), ModuleType.EAR);
            assertEquals("EAR module have a jar and a war", parent.getChildTargetModuleID().length, 2);
  -      }
  -      finally
  -      {
            parentProgress = manager.undeploy(new TargetModuleID[]{ parent });
            waitForCompletion(parentProgress.getDeploymentStatus());
  -      }
   
         modules = manager.getAvailableModules(ModuleType.EAR, manager.getTargets());
         assertNull("EAR must not be available", modules);
  @@ -335,16 +334,15 @@
      //TODO: fix deployment EAR problem
      private File createDeploymentPlan(String deploymentFile) throws Exception
      {
  -      String resourcedir = "../resources/deployment/";
  -      String jbossFile = null;
         String[] strs = null;
   
         // Create temp file for deployment plan
         File deploymentPlan = File.createTempFile("deploymentplan", ".zip");
         deploymentPlan.deleteOnExit();
   
  -      jbossFile = getJBossFile(deploymentFile);
  -      File jbossDescriptor = new File(new URI(getDeployURL(resourcedir + jbossFile)));
  +      String jbossFile = getJBossFile(deploymentFile);
  +      String resourcedir = getResourceURL("deployment/" + jbossFile);
  +      File jbossDescriptor = new File(new URI(resourcedir));
         assertTrue(jbossDescriptor.exists());
   
         JarOutputStream jos = new JarOutputStream(new FileOutputStream(deploymentPlan));

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785412">[jboss-cvs] jboss-serialization/tests/org/jboss/serial/classmetamodel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 21:42</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 17:40:57

  Modified:    tests/org/jboss/serial/classmetamodel 
                        ClassMetamodelFactoryTestCase.java
  Log:
  Adding validation in cache
  
  Revision  Changes    Path
  1.2       +81 -4     jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ClassMetamodelFactoryTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- ClassMetamodelFactoryTestCase.java	25 Jul 2005 20:53:01 -0000	1.1
  +++ ClassMetamodelFactoryTestCase.java	29 Jul 2005 21:40:57 -0000	1.2
  @@ -11,17 +11,21 @@
   import java.io.ObjectInput;
   import java.io.ObjectOutput;
   import java.io.Serializable;
  +import java.util.HashSet;
  +import java.util.Hashtable;
   import java.util.Iterator;
   
  -import junit.framework.TestCase;
  +import junit.framework.Test;
  +
  +import org.jboss.jrunit.decorators.ThreadLocalDecorator;
  +import org.jboss.serial.DataSerializationTest;
  +import org.jboss.serial.ObjectMarshallerFactory;
   
  -import org.jboss.serial.classmetamodel.ClassMetaData;
  -import org.jboss.serial.classmetamodel.ClassMetamodelFactory;
   
   /**
    * @author clebert suconic
    */
  -public class ClassMetamodelFactoryTestCase extends TestCase
  +public class ClassMetamodelFactoryTestCase extends DataSerializationTest
   {
       
       static class A implements Serializable
  @@ -81,6 +85,12 @@
           private String[] z;
       }
       
  +    public static Test suite() throws Exception
  +    {
  +        return new ThreadLocalDecorator(ClassMetamodelFactoryTestCase.class,150,10,0,false);
  +    }
  +    
  +    
       public void testgetClassMetaData() throws Exception
       {
           ClassMetaData metaData = ClassMetamodelFactory.getClassMetaData(A.class);
  @@ -122,4 +132,71 @@
           assertTrue(ClassMetamodelFactory.isImmutable(Long.TYPE));
       }
   
  +    
  +    public void testFindClass() throws Exception
  +    {
  +        ClassMetamodelFactory.cache.clear();
  +        ClassMetaData metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  +        metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  +        metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  +        metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  +        metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  +        
  +        validateCache();
  +        
  +    }
  +
  +    /* (non-Javadoc)
  +     * @see org.jboss.serial.DataSerializationTest#executTest(java.lang.Object)
  +     */
  +    public void executTest(Object dataObject) throws Throwable
  +    {
  +        assertEquals(dataObject,ObjectMarshallerFactory.getJBossMarshaller().copyObject(dataObject,dataObject.getClass().getClassLoader()));
  +        assertEquals(dataObject,ObjectMarshallerFactory.getJBossMarshaller().copyObject(dataObject,dataObject.getClass().getClassLoader()));
  +        //ClassMetamodelFactory.getClassMetaData(dataObject.getClass());
  +    }
  +
  +    public void afterTests() throws Throwable
  +    {
  +        validateCache();
  +    }
  +
  +    public static void printCache()
  +    {
  +        System.out.println("Size of cache = " + ClassMetamodelFactory.cache.size());
  +        Iterator iter = ClassMetamodelFactory.cache.keySet().iterator();
  +        while (iter.hasNext())
  +        {
  +            System.out.println("Item = " + iter.next());
  +        }
  +    }
  +    
  +    public static void validateCache()
  +    {
  +        HashSet set = new HashSet();
  +        
  +        Iterator iter = ClassMetamodelFactory.cache.keySet().iterator();
  +        while (iter.hasNext())
  +        {
  +            Class clazz = (Class)iter.next();
  +            if (set.contains(clazz.getName()))
  +            {
  +                fail(clazz.getName() + " duplicated in cache");
  +            }
  +            set.add(clazz.getName());
  +        }
  +    }
  +
  +    /**
  +     * 
  +     */
  +    public static void clearCache()
  +    {
  +        ClassMetamodelFactory.cache.clear();
  +        
  +    }
  +    
  +    
  +
  +
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785419">[jboss-cvs] jboss-serialization/tests/org/jboss/serial/classmetamodel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:36:18

  Modified:    tests/org/jboss/serial/classmetamodel 
                        ClassMetamodelFactoryTestCase.java
  Log:
  Adding aditional assertions on ClassMetamodelfactoryTestCase
  
  Revision  Changes    Path
  1.3       +8 -6      jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ClassMetamodelFactoryTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- ClassMetamodelFactoryTestCase.java	29 Jul 2005 21:40:57 -0000	1.2
  +++ ClassMetamodelFactoryTestCase.java	29 Jul 2005 22:36:18 -0000	1.3
  @@ -87,7 +87,14 @@
       
       public static Test suite() throws Exception
       {
  -        return new ThreadLocalDecorator(ClassMetamodelFactoryTestCase.class,150,10,0,false);
  +        return new ThreadLocalDecorator(ClassMetamodelFactoryTestCase.class,5,10,0,false)        {
  +            public void threadsTearDown()
  +            {
  +                super.threadsTearDown();
  +                ClassMetamodelFactoryTestCase.validateCache();
  +            }
  +        };
  +
       }
       
       
  @@ -156,11 +163,6 @@
           //ClassMetamodelFactory.getClassMetaData(dataObject.getClass());
       }
   
  -    public void afterTests() throws Throwable
  -    {
  -        validateCache();
  -    }
  -
       public static void printCache()
       {
           System.out.println("Size of cache = " + ClassMetamodelFactory.cache.size());

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785421">[jboss-cvs] jboss-serialization/tests/org/jboss/serial/classmetamodel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:39</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:37:55

  Modified:    tests/org/jboss/serial/classmetamodel 
                        ClassMetamodelFactoryTestCase.java
  Log:
  Adding aditional assertions on ClassMetamodelfactoryTestCase
  
  Revision  Changes    Path
  1.4       +0 -3      jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ClassMetamodelFactoryTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/tests/org/jboss/serial/classmetamodel/ClassMetamodelFactoryTestCase.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- ClassMetamodelFactoryTestCase.java	29 Jul 2005 22:36:18 -0000	1.3
  +++ ClassMetamodelFactoryTestCase.java	29 Jul 2005 22:37:55 -0000	1.4
  @@ -148,9 +148,6 @@
           metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
           metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
           metaData = ClassMetamodelFactory.getClassMetaData(Hashtable.class);
  -        
  -        validateCache();
  -        
       }
   
       /* (non-Javadoc)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785420">[jboss-cvs] jboss-serialization/tests/org/jboss/serial/objectmetamodel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:36:18

  Modified:    tests/org/jboss/serial/objectmetamodel 
                        DataContainerMultiThreadJBossTestCase.java
  Log:
  Adding aditional assertions on ClassMetamodelfactoryTestCase
  
  Revision  Changes    Path
  1.2       +11 -2     jboss-serialization/tests/org/jboss/serial/objectmetamodel/DataContainerMultiThreadJBossTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DataContainerMultiThreadJBossTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/tests/org/jboss/serial/objectmetamodel/DataContainerMultiThreadJBossTestCase.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- DataContainerMultiThreadJBossTestCase.java	27 Jul 2005 23:01:25 -0000	1.1
  +++ DataContainerMultiThreadJBossTestCase.java	29 Jul 2005 22:36:18 -0000	1.2
  @@ -19,16 +19,25 @@
   import org.jboss.jrunit.controller.ThreadLocalBenchmark;
   import org.jboss.jrunit.decorators.ThreadLocalDecorator;
   import org.jboss.serial.DataSerializationTest;
  +import org.jboss.serial.classmetamodel.ClassMetamodelFactoryTestCase;
   
   /**
  - * $Id: DataContainerMultiThreadJBossTestCase.java,v 1.1 2005/07/27 23:01:25 csuconic Exp $
  + * $Id: DataContainerMultiThreadJBossTestCase.java,v 1.2 2005/07/29 22:36:18 csuconic Exp $
    * @author Clebert Suconic
    */
   public class DataContainerMultiThreadJBossTestCase extends DataSerializationTest
   {
       public static Test suite() throws Exception
       {
  -        return new ThreadLocalDecorator(DataContainerMultiThreadJBossTestCase.class,150,10,0,true);
  +        return new ThreadLocalDecorator(DataContainerMultiThreadJBossTestCase.class,150,10,0,true)
  +        {
  +            public void threadsTearDown()
  +            {
  +                super.threadsTearDown();
  +                ClassMetamodelFactoryTestCase.validateCache();
  +            }
  +
  +        };
       }
       
       static ThreadLocal count = new ThreadLocal();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785418">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/controller/ant  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/controller/ant 
                        AntBenchmarkReceiverAbstract.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.6       +4 -2      jrunit/src/main/org/jboss/jrunit/controller/ant/AntBenchmarkReceiverAbstract.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AntBenchmarkReceiverAbstract.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/controller/ant/AntBenchmarkReceiverAbstract.java,v
  retrieving revision 1.5
  retrieving revision 1.6
  diff -u -b -r1.5 -r1.6
  --- AntBenchmarkReceiverAbstract.java	26 Jul 2005 19:50:11 -0000	1.5
  +++ AntBenchmarkReceiverAbstract.java	29 Jul 2005 22:20:24 -0000	1.6
  @@ -7,6 +7,7 @@
    */
   package org.jboss.jrunit.controller.ant;
   
  +import org.apache.log4j.Logger;
   import org.apache.tools.ant.BuildException;
   import org.apache.tools.ant.Task;
   import org.jboss.jrunit.communication.BenchmarkQuitListener;
  @@ -21,6 +22,7 @@
   {
       protected boolean running = true;
       JGroupsBenchmarkReceiver receiver;
  +    private static Logger log = Logger.getLogger(AntBenchmarkReceiverAbstract.class);
   
       public abstract void init() throws BuildException;
   
  @@ -55,7 +57,7 @@
               {
                   if (message instanceof AntQuitMessage)
                   {
  -                    System.out.println("AntQuitMessage");
  +                    log.debug("AntQuitMessage");
                       return true;
                   }
                   else

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785417">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/controller/receiver  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/controller/receiver 
                        JGroupsBenchmarkReceiver.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.5       +3 -3      jrunit/src/main/org/jboss/jrunit/controller/receiver/JGroupsBenchmarkReceiver.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JGroupsBenchmarkReceiver.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/controller/receiver/JGroupsBenchmarkReceiver.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- JGroupsBenchmarkReceiver.java	26 Jul 2005 20:31:07 -0000	1.4
  +++ JGroupsBenchmarkReceiver.java	29 Jul 2005 22:20:24 -0000	1.5
  @@ -27,7 +27,7 @@
    */
   
   /**
  - * $Id: JGroupsBenchmarkReceiver.java,v 1.4 2005/07/26 20:31:07 csuconic Exp $
  + * $Id: JGroupsBenchmarkReceiver.java,v 1.5 2005/07/29 22:20:24 csuconic Exp $
    * @author Clebert Suconic
    */
   public class JGroupsBenchmarkReceiver implements MessageBusListener
  @@ -84,9 +84,9 @@
                          {
                             log.debug("Server thread interrupted.");
                          }
  -                        System.out.println("Tick");
  +                        log.debug("Tick");
                       }
  -                    System.out.println("Quit message");
  +                    log.debug("Quit message");
                    }
          };
          svrThread.setDaemon(false);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785416">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/controller/sender  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/controller/sender 
                        JGroupsBenchmarkSender.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.5       +0 -1      jrunit/src/main/org/jboss/jrunit/controller/sender/JGroupsBenchmarkSender.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JGroupsBenchmarkSender.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/controller/sender/JGroupsBenchmarkSender.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- JGroupsBenchmarkSender.java	26 Jul 2005 19:50:34 -0000	1.4
  +++ JGroupsBenchmarkSender.java	29 Jul 2005 22:20:24 -0000	1.5
  @@ -31,7 +31,6 @@
   
       public void send(BenchmarkController controller) throws Exception
       {
  -        System.out.println("Sending Benchmarks"); // remove this message
           log.debug("Sending Benchmarks");
   
           ArrayList values = new ArrayList();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785415">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/communication  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/communication  MessageBus.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.13      +1 -1      jrunit/src/main/org/jboss/jrunit/communication/MessageBus.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MessageBus.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/communication/MessageBus.java,v
  retrieving revision 1.12
  retrieving revision 1.13
  diff -u -b -r1.12 -r1.13
  --- MessageBus.java	22 Jul 2005 05:22:19 -0000	1.12
  +++ MessageBus.java	29 Jul 2005 22:20:24 -0000	1.13
  @@ -84,7 +84,7 @@
   
      public void stop()
      {
  -      System.out.println("Stop on bus");
  +      log.debug("Stop on bus");
         bus.stop();
      }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785414">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/controller/reporters  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/controller/reporters 
                        FileBenchmarkReporter.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.3       +2 -2      jrunit/src/main/org/jboss/jrunit/controller/reporters/FileBenchmarkReporter.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: FileBenchmarkReporter.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/controller/reporters/FileBenchmarkReporter.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- FileBenchmarkReporter.java	26 Jul 2005 19:50:27 -0000	1.2
  +++ FileBenchmarkReporter.java	29 Jul 2005 22:20:24 -0000	1.3
  @@ -46,8 +46,8 @@
            FileOutputStream fout = new FileOutputStream(reportFile, true);
            out = new PrintStream(fout);
   
  -         benchmark.print(System.out);
  -         out.println("\nTest Run on " + new Date());
  +         //benchmark.print(System.out);
  +         //out.println("\nTest Run on " + new Date());
            benchmark.print(out);
         }
         catch(IOException e)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785413">[jboss-cvs] jrunit/src/main/org/jboss/jrunit/controller/persistence  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 22:21</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 18:20:24

  Modified:    src/main/org/jboss/jrunit/controller/persistence 
                        BenchmarkDatabaseBenchmarkPersistence.java
  Log:
  Removing System.outs
  
  Revision  Changes    Path
  1.5       +11 -9     jrunit/src/main/org/jboss/jrunit/controller/persistence/BenchmarkDatabaseBenchmarkPersistence.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: BenchmarkDatabaseBenchmarkPersistence.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit/src/main/org/jboss/jrunit/controller/persistence/BenchmarkDatabaseBenchmarkPersistence.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- BenchmarkDatabaseBenchmarkPersistence.java	15 Jun 2005 22:43:18 -0000	1.4
  +++ BenchmarkDatabaseBenchmarkPersistence.java	29 Jul 2005 22:20:24 -0000	1.5
  @@ -7,19 +7,20 @@
    */
   package org.jboss.jrunit.controller.persistence;
   
  -import org.jboss.jrunit.data.Benchmark;
  -import org.jboss.jrunit.data.BenchmarkExecution;
  -import org.jboss.jrunit.data.BenchmarkMeasure;
  -
   import java.sql.Connection;
  +import java.sql.DatabaseMetaData;
   import java.sql.PreparedStatement;
  -import java.sql.Statement;
   import java.sql.ResultSet;
  -import java.sql.DatabaseMetaData;
   import java.sql.SQLException;
  -import java.util.Iterator;
  -import java.util.Collection;
  +import java.sql.Statement;
   import java.util.ArrayList;
  +import java.util.Collection;
  +import java.util.Iterator;
  +
  +import org.apache.log4j.Logger;
  +import org.jboss.jrunit.data.Benchmark;
  +import org.jboss.jrunit.data.BenchmarkExecution;
  +import org.jboss.jrunit.data.BenchmarkMeasure;
   
   /**
     * Executes the database persistence for Benchmark*
  @@ -27,6 +28,7 @@
     */
   public class BenchmarkDatabaseBenchmarkPersistence extends BenchmarkPersistence
   {
  +    private static Logger log = Logger.getLogger(BenchmarkDatabaseBenchmarkPersistence.class);
   
       Connection conn;
   
  @@ -284,7 +286,7 @@
           Iterator iter = execution.getAllMeasures().iterator();
           while (iter.hasNext())
           {
  -            System.out.println("Saving measure");
  +            log.debug("Saving measure");
               BenchmarkMeasure measure = (BenchmarkMeasure)iter.next();
   
               measure.setMeasureId(measureId++);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785411">[jboss-cvs] jboss-serialization/tests/org/jboss/serial  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 21:42</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 17:40:57

  Modified:    tests/org/jboss/serial  DataSerializationTest.java
  Log:
  Adding validation in cache
  
  Revision  Changes    Path
  1.4       +10 -0     jboss-serialization/tests/org/jboss/serial/DataSerializationTest.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DataSerializationTest.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/tests/org/jboss/serial/DataSerializationTest.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- DataSerializationTest.java	26 Jul 2005 15:37:41 -0000	1.3
  +++ DataSerializationTest.java	29 Jul 2005 21:40:57 -0000	1.4
  @@ -29,6 +29,7 @@
            throw new Exception("Can not run test as data package for data objects can not be found.");
         }
   
  +      beforeTests();
         String[] testFiles = dataFile.list();
         for(int x = 0; x &lt; testFiles.length; x++)
         {
  @@ -44,6 +45,15 @@
               executTest(dataObject);
            }
         }
  +      afterTests();
  +   }
  +
  +   public void beforeTests() throws Throwable
  +   {
  +   }
  +   
  +   public void afterTests() throws Throwable
  +   {
      }
   
      public abstract void executTest(Object dataObject) throws Throwable;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785410">[jboss-cvs] jboss-serialization/src/org/jboss/serial/classmetamodel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 21:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 17:37:25

  Modified:    src/org/jboss/serial/classmetamodel 
                        ClassMetamodelFactory.java
  Log:
  fixing getClassMetaData
  
  Revision  Changes    Path
  1.11      +3 -3      jboss-serialization/src/org/jboss/serial/classmetamodel/ClassMetamodelFactory.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ClassMetamodelFactory.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-serialization/src/org/jboss/serial/classmetamodel/ClassMetamodelFactory.java,v
  retrieving revision 1.10
  retrieving revision 1.11
  diff -u -b -r1.10 -r1.11
  --- ClassMetamodelFactory.java	27 Jul 2005 16:59:16 -0000	1.10
  +++ ClassMetamodelFactory.java	29 Jul 2005 21:37:25 -0000	1.11
  @@ -19,7 +19,7 @@
   import java.util.HashMap;
   
   /**
  - * $Id: ClassMetamodelFactory.java,v 1.10 2005/07/27 16:59:16 csuconic Exp $
  + * $Id: ClassMetamodelFactory.java,v 1.11 2005/07/29 21:37:25 csuconic Exp $
    * @author clebert suconic
    */
   public class ClassMetamodelFactory
  @@ -68,7 +68,7 @@
           synchronized (cache)
           {
               // repeat the same operation but inside the synchronized block now
  -            returnData = (ClassMetaData) cache.get(clazz.getName());
  +            returnData = (ClassMetaData) cache.get(clazz);
               if (returnData != null)
               {
                   return returnData;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785409">[jboss-cvs] jboss-dependency/src/main/org/jboss/dependency/plugins  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 21:17</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 17:16:49

  Modified:    src/main/org/jboss/dependency/plugins 
                        AbstractController.java
  Log:
  Don't try to uninstall dependent services that are already uninstalled (don't exist anymore)
  or they are already in a "lower" state than the dependency says they should be
  e.g. Somebody manually changes the state back to Described and even though
  dependencies says it could be Installed.
  
  Revision  Changes    Path
  1.7       +11 -5     jboss-dependency/src/main/org/jboss/dependency/plugins/AbstractController.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AbstractController.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-dependency/src/main/org/jboss/dependency/plugins/AbstractController.java,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- AbstractController.java	24 Jun 2005 21:18:09 -0000	1.6
  +++ AbstractController.java	29 Jul 2005 21:16:49 -0000	1.7
  @@ -25,7 +25,7 @@
    * Abstract controller.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.6 $
  + * @version $Revision: 1.7 $
    */
   public class AbstractController extends JBossObject implements Controller
   {
  @@ -511,14 +511,20 @@
                  {
                     item.unresolved(this);
                     ControllerContext dependent = getContext(item.getName(), null);
  +                  if (dependent != null)
  +                  {
                     ControllerState whenRequired = item.getWhenRequired();
                     if (whenRequired == null)
                        whenRequired = ControllerState.NOT_INSTALLED;
  +                     int proposed = states.indexOf(whenRequired);
  +                     int actual = states.indexOf(dependent.getState());
  +                     if (proposed &lt;= actual)
                     uninstallContext(dependent, whenRequired, trace);
                  }
               }
            }
         }
  +      }
         
         int toIndex = currentIndex-1;
         if (toIndex == -1)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785398">[jboss-cvs] jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 20:27</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 16:26:04

  Modified:    src/main/org/jboss/web/tomcat/tc5/session  Tag: Branch_4_0
                        JBossManager.java
  Log:
  JBAS-2034 Added secure falg.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.5.2.5   +21 -3     jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JBossManager.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java,v
  retrieving revision 1.5.2.4
  retrieving revision 1.5.2.5
  diff -u -b -r1.5.2.4 -r1.5.2.5
  --- JBossManager.java	28 Jan 2005 12:30:47 -0000	1.5.2.4
  +++ JBossManager.java	29 Jul 2005 20:26:04 -0000	1.5.2.5
  @@ -32,6 +32,8 @@
   import org.apache.catalina.LifecycleException;
   import org.apache.catalina.LifecycleListener;
   import org.apache.catalina.Session;
  +import org.apache.catalina.connector.Connector;
  +import org.apache.catalina.connector.Response;
   import org.apache.catalina.util.LifecycleSupport;
   
   /**
  @@ -39,7 +41,7 @@
    * session operations, e.g., add, remove, etc.
    *
    * @author Ben Wang
  - * @version $Revision: 1.5.2.4 $
  + * @version $Revision: 1.5.2.5 $
    */
   public abstract class JBossManager
      implements AbstractJBossManager, Lifecycle,
  @@ -227,6 +229,8 @@
         if (response != null)
         {
            Context context = (Context) container_;
  +         Connector connector = ((Response)response).getConnector();
  +
            if (context.getCookies())
            {
               // set a new session cookie
  @@ -235,8 +239,22 @@
               {
                  log_.debug("Setting cookie with session id:" + sessionId + " &amp; name:" + Globals.SESSION_COOKIE_NAME);
               }
  -            newCookie.setMaxAge(-1);
  -            newCookie.setPath(context.getPath());
  +
  +            String contextPath = null;
  +            if (!connector.getEmptySessionPath() &amp;&amp; (context != null)) {
  +                contextPath = context.getEncodedPath();
  +            }
  +
  +            if ((contextPath != null) &amp;&amp; (contextPath.length() &gt; 0)) {
  +                newCookie.setPath(contextPath);
  +            } else {
  +                newCookie.setPath("/");
  +            }
  +
  +            if (connector.getSecure()) {
  +                newCookie.setSecure(true);
  +            }
  +
               response.addCookie(newCookie);
            }
         }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785408">[jboss-cvs] jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 21:13</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 17:12:09

  Modified:    src/main/org/jboss/web/tomcat/tc5/session  JBossManager.java
  Log:
  Another fix for JBAS-2034 that added secure flag and context path.
  
  Revision  Changes    Path
  1.11      +20 -3     jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JBossManager.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-tomcat/src/main/org/jboss/web/tomcat/tc5/session/JBossManager.java,v
  retrieving revision 1.10
  retrieving revision 1.11
  diff -u -b -r1.10 -r1.11
  --- JBossManager.java	8 Feb 2005 07:31:20 -0000	1.10
  +++ JBossManager.java	29 Jul 2005 21:12:09 -0000	1.11
  @@ -32,6 +32,8 @@
   import org.apache.catalina.LifecycleException;
   import org.apache.catalina.LifecycleListener;
   import org.apache.catalina.Session;
  +import org.apache.catalina.connector.Connector;
  +import org.apache.catalina.connector.Response;
   import org.apache.catalina.util.LifecycleSupport;
   
   /**
  @@ -39,7 +41,7 @@
    * session operations, e.g., add, remove, etc.
    *
    * @author Ben Wang
  - * @version $Revision: 1.10 $
  + * @version $Revision: 1.11 $
    */
   public abstract class JBossManager
      implements AbstractJBossManager, Lifecycle,
  @@ -228,6 +230,7 @@
         if (response != null)
         {
            Context context = (Context) container_;
  +         Connector connector = ((Response)response).getConnector();
            if (context.getCookies())
            {
               // set a new session cookie
  @@ -236,8 +239,22 @@
               {
                  log_.debug("Setting cookie with session id:" + sessionId + " &amp; name:" + Globals.SESSION_COOKIE_NAME);
               }
  -            newCookie.setMaxAge(-1);
  -            newCookie.setPath(context.getPath());
  +
  +            String contextPath = null;
  +            if (!connector.getEmptySessionPath() &amp;&amp; (context != null)) {
  +                contextPath = context.getEncodedPath();
  +            }
  +
  +            if ((contextPath != null) &amp;&amp; (contextPath.length() &gt; 0)) {
  +                newCookie.setPath(contextPath);
  +            } else {
  +                newCookie.setPath("/");
  +            }
  +
  +            if (connector.getSecure()) {
  +                newCookie.setSecure(true);
  +            }
  +
               response.addCookie(newCookie);
            }
         }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785407">[jboss-cvs] jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms     ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:49:56

  Added:       src/main/org/jboss/ejb3/embedded/jms    
                        DestinationManager.java
                        JDBC2PersistenceManager.java JDBCStateManager.java
                        MessageCache.java
  Log:
  JMS and small name changes
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms/DestinationManager.java
  
  Index: DestinationManager.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded.jms;
  
  import org.jboss.mq.server.*;
  import org.jboss.mq.pm.PersistenceManager;
  import org.jboss.mq.sm.StateManager;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class DestinationManager extends org.jboss.mq.server.jmx.DestinationManager
  {
     protected PersistenceManager persistenceManagerInstance;
     protected StateManager stateManagerInstance;
     protected org.jboss.mq.server.MessageCache messageCacheInstance;
  
     @Override
     public void create() throws Exception
     {
        jmsServer = new JMSDestinationManager(tempParameters);
     }
  
     @Override
     public void start() throws Exception
     {
        jmsServer.setPersistenceManager(persistenceManagerInstance);
        jmsServer.setMessageCache(messageCacheInstance);
        jmsServer.setStateManager(stateManagerInstance);
  
        jmsServer.startServer();
     }
  
     @Override
     public void stop()
     {
        jmsServer.stopServer();
     }
  
     @Override
     public void destroy()
     {
        jmsServer = null;
     }
  
     public void setPersistenceManagerInstance(PersistenceManager persistenceManagerInstance)
     {
        this.persistenceManagerInstance = persistenceManagerInstance;
     }
  
     public void setStateManagerInstance(StateManager stateManagerInstance)
     {
        this.stateManagerInstance = stateManagerInstance;
     }
  
     public void setMessageCacheInstance(org.jboss.mq.server.MessageCache messageCacheInstance)
     {
        this.messageCacheInstance = messageCacheInstance;
     }
  }
  
  
  
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms/JDBC2PersistenceManager.java
  
  Index: JDBC2PersistenceManager.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded.jms;
  
  import javax.jms.JMSException;
  import javax.management.MBeanException;
  import javax.management.AttributeNotFoundException;
  import javax.management.InstanceNotFoundException;
  import javax.management.ReflectionException;
  import javax.naming.NamingException;
  import javax.transaction.TransactionManager;
  import javax.sql.DataSource;
  import org.jboss.mq.pm.jdbc2.PersistenceManager;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class JDBC2PersistenceManager extends PersistenceManager
  {
     public JDBC2PersistenceManager()
             throws JMSException
     {
     }
  
     @Override
     protected void initializeFields() throws MBeanException, AttributeNotFoundException, InstanceNotFoundException, ReflectionException, NamingException
     {
        // complete
     }
  
     public void setTransactionManager(TransactionManager tm)
     {
        this.tm = tm;
     }
  
     public void setDatasource(DataSource ds)
     {
        this.datasource = ds;
     }
  
  
  
  }
  
  
  
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms/JDBCStateManager.java
  
  Index: JDBCStateManager.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded.jms;
  
  import javax.transaction.TransactionManager;
  import javax.sql.DataSource;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class JDBCStateManager extends org.jboss.mq.sm.jdbc.JDBCStateManager
  {
     public void setTransactionManager(TransactionManager tm)
     {
        this.tm = tm;
     }
  
     public void setDatasource(DataSource ds)
     {
        this.dataSource = ds;
     }
  
     public void start() throws Exception
     {
        initDB();
     }
  
     
  }
  
  
  
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms/MessageCache.java
  
  Index: MessageCache.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded.jms;
  
  import org.jboss.mq.pm.CacheStore;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class MessageCache extends org.jboss.mq.server.MessageCache
  {
     @Override
     protected void setupCacheStore() throws Exception
     {
     }
  
     public void setPersistenceManager(CacheStore cs)
     {
        cacheStore = cs;
     }
  
     @Override
     public void create() throws Exception
     {
     }
  
     @Override
     public void start() throws Exception
     {
        super.startService();
     }
  
     @Override
     public void stop()
     {
        super.stopService();
     }
  
     @Override
     public void destroy()
     {
     }
  }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785345">[jboss-cvs] jboss-ejb3  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:45

  Modified:    jboss-ejb3  build-test.xml
  Log:
  Embeddable MDB3.  Works with a remote JBoss server instance.
  
  Revision  Changes    Path
  1.93      +67 -1     jboss-ejb3/build-test.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: build-test.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/build-test.xml,v
  retrieving revision 1.92
  retrieving revision 1.93
  diff -u -b -r1.92 -r1.93
  --- build-test.xml	28 Jul 2005 19:59:44 -0000	1.92
  +++ build-test.xml	29 Jul 2005 17:44:45 -0000	1.93
  @@ -8,7 +8,7 @@
   &lt;!--  See terms of license at <a href="http://www.gnu.org" target="_new">http://www.gnu.org</a>.                           --&gt;
   &lt;!--                                                                        --&gt;
   &lt;!-- ====================================================================== --&gt;
  -&lt;!-- $Id: build-test.xml,v 1.92 2005/07/28 19:59:44 bill Exp $ --&gt;
  +&lt;!-- $Id: build-test.xml,v 1.93 2005/07/29 17:44:45 bill Exp $ --&gt;
   
   &lt;project default="main" name="JBoss/EJB3 Tests"&gt;
      &lt;import file="../tools/etc/buildmagic/build-common.xml"/&gt;
  @@ -1323,6 +1323,17 @@
            &lt;/fileset&gt;
         &lt;/war&gt;
   
  +      &lt;mkdir dir="${build.lib}/embeddable/standalone/jms"/&gt;
  +
  +      &lt;jar jarfile="${build.lib}/embeddable/standalone/jms/mdb.jar"&gt;
  +         &lt;fileset dir="${build.classes}"&gt;
  +            &lt;include name="org/jboss/ejb3/test/standalone/jms/*.class"/&gt;
  +         &lt;/fileset&gt;
  +         &lt;fileset dir="${build.resources}/test/standaloneWar"&gt;
  +            &lt;include name="marker.txt"/&gt;
  +         &lt;/fileset&gt;
  +      &lt;/jar&gt;
  +
   
      &lt;/target&gt;
   
  @@ -1377,6 +1388,61 @@
         &lt;/junit&gt;
      &lt;/target&gt;
   
  +   &lt;target name="test-standalone-with-jboss" if="test"&gt;
  +      &lt;!-- For use when we're doing a standalone test with jboss --&gt;
  +
  +      &lt;mkdir dir="${build.reports}"/&gt;
  +      &lt;mkdir dir="${build.testlog}"/&gt;
  +      &lt;!-- Remove the test.log so each run has a fresh log --&gt;
  +      &lt;delete file="${build.testlog}/test.log"/&gt;
  +      &lt;path id="standalone.classpath"&gt;
  +         &lt;fileset dir="${module.output}/lib/embeddable/lib"&gt;
  +            &lt;include name="*.jar"/&gt;
  +         &lt;/fileset&gt;
  +         &lt;pathelement location="${module.output}/lib/embeddable/config"/&gt;
  +         &lt;fileset dir="${build.lib}/embeddable/${test}"&gt;
  +            &lt;include name="*.jar"/&gt;
  +         &lt;/fileset&gt;
  +      &lt;/path&gt;
  +      &lt;junit dir="${module.output}"
  +         printsummary="yes"
  +         haltonerror="false"
  +         haltonfailure="false"
  +         fork="true"&gt;
  +
  +         &lt;sysproperty key="jbosstest.deploy.dir" value="${build.lib}"/&gt;
  +         &lt;sysproperty key="build.testlog" value="${build.testlog}"/&gt;
  +         &lt;sysproperty key="log4j.configuration" value="file:${resources}/test/log4j.xml"/&gt;
  +         &lt;sysproperty key="jbosstest.threadcount" value="${jbosstest.threadcount}"/&gt;
  +         &lt;sysproperty key="jbosstest.iterationcount" value="${jbosstest.iterationcount}"/&gt;
  +         &lt;sysproperty key="jbosstest.beancount" value="${jbosstest.beancount}"/&gt;
  +         &lt;sysproperty key="java.security.auth.login.config" value="${resources}/test/security/auth.conf"/&gt;
  +
  +         &lt;classpath&gt;
  +            &lt;path refid="standalone.classpath"/&gt;
  +            &lt;path refid="jboss.test.classpath"/&gt;
  +            &lt;path refid="hsqldb.hsqldb.classpath"/&gt;
  +            &lt;!-- this must come last --&gt;
  +            &lt;pathelement location="${build.classes}"/&gt;
  +            &lt;pathelement location="${resources}/test"/&gt;
  +            &lt;path refid="javac.classpath"/&gt;
  +         &lt;/classpath&gt;
  +
  +         &lt;formatter type="plain" usefile="true"/&gt;
  +         &lt;formatter type="xml" usefile="true"/&gt;
  +
  +         &lt;batchtest todir="${build.reports}"
  +            haltonerror="false"
  +            haltonfailure="false"
  +            fork="true"&gt;
  +
  +            &lt;fileset dir="${build.classes}"&gt;
  +               &lt;include name="org/jboss/ejb3/test/${test}/unit/*TestCase.class"/&gt;
  +            &lt;/fileset&gt;
  +         &lt;/batchtest&gt;
  +      &lt;/junit&gt;
  +   &lt;/target&gt;
  +
      &lt;target name="run-clusteredentity" depends="init"
         description="Runs the clusteredentity stuff in a cluster"&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785406">[jboss-cvs] jboss-ejb3  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:49:56

  Modified:    jboss-ejb3  build.xml
  Log:
  JMS and small name changes
  
  Revision  Changes    Path
  1.35      +5 -2      jboss-ejb3/build.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: build.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/build.xml,v
  retrieving revision 1.34
  retrieving revision 1.35
  diff -u -b -r1.34 -r1.35
  --- build.xml	22 Jul 2005 20:22:29 -0000	1.34
  +++ build.xml	29 Jul 2005 20:49:56 -0000	1.35
  @@ -14,7 +14,7 @@
   &lt;!--                                                                        --&gt;
   &lt;!-- ====================================================================== --&gt;
   
  -&lt;!-- $Id: build.xml,v 1.34 2005/07/22 20:22:29 bill Exp $ --&gt;
  +&lt;!-- $Id: build.xml,v 1.35 2005/07/29 20:49:56 bill Exp $ --&gt;
   
   &lt;project default="main" name="JBoss/EJB3"&gt;
   
  @@ -284,7 +284,7 @@
         &lt;mkdir dir="${build.lib}/embeddable/config"/&gt;
         &lt;mkdir dir="${build.lib}/embeddable/config"/&gt;
         &lt;copy todir="${build.lib}/embeddable/config" file="${resources}/ejb3-interceptors-aop.xml"/&gt;
  -      &lt;copy todir="${build.lib}/embeddable/config" file="${resources}/standalone/bootstrap.xml"/&gt;
  +      &lt;copy todir="${build.lib}/embeddable/config" file="${resources}/standalone/embedded-jboss-beans.xml"/&gt;
         &lt;copy tofile="${build.lib}/embeddable/config/default.persistence.properties" file="${resources}/META-INF/persistence.properties"/&gt;
   
         &lt;mkdir dir="${build.lib}/embeddable/lib"/&gt;
  @@ -311,6 +311,9 @@
            &lt;fileset dir="${jboss.aop.lib}"&gt;
               &lt;include name="jboss-aop-jdk50.jar"/&gt;
            &lt;/fileset&gt;
  +         &lt;fileset dir="${jboss.messaging.lib}"&gt;
  +            &lt;include name="jbossmq.jar"/&gt;
  +         &lt;/fileset&gt;
            &lt;fileset dir="${jboss.aspects.lib}"&gt;
               &lt;include name="jboss-aspect-library-jdk50.jar"/&gt;
            &lt;/fileset&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785405">[jboss-cvs] jboss-ejb3/src/resources/standalone    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:49:56

  Added:       src/resources/standalone    embedded-jboss-beans.xml
                        jboss-jms-beans.xml
  Removed:     src/resources/standalone    bootstrap.xml
  Log:
  JMS and small name changes
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/resources/standalone/embedded-jboss-beans.xml
  
  Index: embedded-jboss-beans.xml
  ===================================================================
  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  
  &lt;deployment xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
              xsi:schemaLocation="urn:jboss:bean-deployer bean-deployer_1_0.xsd"
              xmlns="urn:jboss:bean-deployer"&gt;
     &lt;bean name="Naming" class="org.jnp.server.SingletonNamingServer"/&gt;
  
     &lt;bean name="InitialContextProperties" class="java.util.Hashtable"&gt;
        &lt;constructor&gt;
        &lt;parameter class="java.util.Map"&gt;
              &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
                 &lt;entry&gt;
                    &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
                    &lt;value&gt;org.jnp.interfaces.LocalOnlyContextFactory&lt;/value&gt;
                 &lt;/entry&gt;
                 &lt;entry&gt;
                     &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
                     &lt;value&gt;org.jboss.naming:org.jnp.interfaces&lt;/value&gt;
                 &lt;/entry&gt;
              &lt;/map&gt;
        &lt;/parameter&gt;
        &lt;/constructor&gt;
     &lt;/bean&gt;
  
     &lt;bean name="JavaCompInitializer" class="org.jboss.ejb3.embedded.JavaCompInitializer"&gt;
        &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="XidFactory" class="org.jboss.tm.XidFactoryImpl"/&gt;
  
     &lt;bean name="XidFactoryMBean" class="org.jboss.ejb3.embedded.XidFactoryMBean"&gt;
        &lt;constructor&gt;
           &lt;parameter class="org.jboss.tm.XidFactoryBase"&gt;
              &lt;inject bean="XidFactory"/&gt;
           &lt;/parameter&gt;
        &lt;/constructor&gt;
     &lt;/bean&gt;
  
     &lt;bean name="TransactionManagerInitializer" class="org.jboss.tm.TransactionManagerInitializer"&gt;
        &lt;property name="xidFactory"&gt;&lt;inject bean="XidFactory"/&gt;&lt;/property&gt;
        &lt;property name="initialContextProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="TransactionManager" class="java.lang.Object"&gt;
        &lt;constructor factoryMethod="getTransactionManager"&gt;
           &lt;factory bean="TransactionManagerInitializer"/&gt;
        &lt;/constructor&gt;
     &lt;/bean&gt;
     &lt;bean name="CachedConnectionManager" class="org.jboss.resource.connectionmanager.CachedConnectionManagerReference"&gt;
        &lt;property name="transactionManager"&gt;&lt;inject bean="TransactionManager"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="DefaultDSBootstrap" class="org.jboss.resource.adapter.jdbc.local.LocalTxDataSource"&gt;
        &lt;property name="driverClass"&gt;&lt;value&gt;org.hsqldb.jdbcDriver&lt;/value&gt;&lt;/property&gt;
        &lt;property name="connectionURL"&gt;&lt;value&gt;jdbc:hsqldb:.&lt;/value&gt;&lt;/property&gt;
        &lt;property name="userName"&gt;&lt;value&gt;sa&lt;/value&gt;&lt;/property&gt;
        &lt;property name="jndiName"&gt;&lt;value&gt;java:/DefaultDS&lt;/value&gt;&lt;/property&gt;
        &lt;property name="transactionManager"&gt;&lt;inject bean="TransactionManager"/&gt;&lt;/property&gt;
        &lt;property name="cachedConnectionManager"&gt;&lt;inject bean="CachedConnectionManager"/&gt;&lt;/property&gt;
        &lt;property name="initialContextProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="DefaultDS" class="java.lang.Object"&gt;
        &lt;constructor factoryMethod="getDatasource"&gt;
           &lt;factory bean="DefaultDSBootstrap"/&gt;
        &lt;/constructor&gt;
     &lt;/bean&gt;
  
     &lt;bean name="RemoteJBossJMSProviderAdapter" class="org.jboss.jms.jndi.JNDIProviderAdapter"&gt;
        &lt;property name="factoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="queueFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="topicFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="properties" class="java.util.Properties"&gt;
                 &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
                    &lt;entry&gt;
                       &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
                       &lt;value&gt;org.jnp.interfaces.NamingContextFactory&lt;/value&gt;
                    &lt;/entry&gt;
                    &lt;entry&gt;
                        &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
                        &lt;value&gt;org.jboss.naming:org.jnp.interfaces&lt;/value&gt;
                    &lt;/entry&gt;
                    &lt;entry&gt;
                        &lt;key&gt;java.naming.provider.url&lt;/key&gt;
                        &lt;value&gt;<a href="jnp://localhost:1099&lt;/value" target="_new">jnp://localhost:1099&lt;/value</a>&gt;
                    &lt;/entry&gt;
                 &lt;/map&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="b1" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
        &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
        &lt;property name="target"&gt;&lt;inject bean="RemoteJBossJMSProviderAdapter"/&gt;&lt;/property&gt;
        &lt;property name="bindTo"&gt;&lt;value&gt;java:/DefaultJMSProvider&lt;/value&gt;&lt;/property&gt;
        &lt;property name="serializable"&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="JmsServerSessionPool" class="org.jboss.jms.asf.StdServerSessionPoolFactory"&gt;
        &lt;property name="name"&gt;&lt;value&gt;StdJMSPool&lt;/value&gt;&lt;/property&gt;
        &lt;property name="xidFactory"&gt;&lt;inject bean="XidFactoryMBean"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="b2" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
        &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
        &lt;property name="target"&gt;&lt;inject bean="JmsServerSessionPool"/&gt;&lt;/property&gt;
        &lt;property name="bindTo"&gt;&lt;value&gt;java:/StdJMSPool&lt;/value&gt;&lt;/property&gt;
        &lt;property name="serializable"&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=PersistenceManager" class="org.jboss.ejb3.embedded.jms.JDBC2PersistenceManager"&gt;
        &lt;property name="transactionManager"&gt;
           &lt;inject bean="TransactionManager"/&gt;
        &lt;/property&gt;
        &lt;property name="datasource"&gt;
           &lt;inject bean="DefaultDS"/&gt;
        &lt;/property&gt;
        &lt;property name="sqlProperties"&gt;
           &lt;value&gt;
              BLOB_TYPE=OBJECT_BLOB
              INSERT_TX = INSERT INTO JMS_TRANSACTIONS (TXID) values(?)
              INSERT_MESSAGE = INSERT INTO JMS_MESSAGES (MESSAGEID, DESTINATION, MESSAGEBLOB, TXID, TXOP) VALUES(?,?,?,?,?)
              SELECT_ALL_UNCOMMITED_TXS = SELECT TXID FROM JMS_TRANSACTIONS
              SELECT_MAX_TX = SELECT MAX(TXID) FROM JMS_MESSAGES
              SELECT_MESSAGES_IN_DEST = SELECT MESSAGEID, MESSAGEBLOB FROM JMS_MESSAGES WHERE DESTINATION=?
              SELECT_MESSAGE = SELECT MESSAGEID, MESSAGEBLOB FROM JMS_MESSAGES WHERE MESSAGEID=? AND DESTINATION=?
              MARK_MESSAGE = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE MESSAGEID=? AND DESTINATION=?
              UPDATE_MESSAGE = UPDATE JMS_MESSAGES SET MESSAGEBLOB=? WHERE MESSAGEID=? AND DESTINATION=?
              UPDATE_MARKED_MESSAGES = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE TXOP=?
              UPDATE_MARKED_MESSAGES_WITH_TX = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE TXOP=? AND TXID=?
              DELETE_MARKED_MESSAGES_WITH_TX = DELETE FROM JMS_MESSAGES WHERE TXOP=? AND JMS_MESSAGES.TXID IN (SELECT TXID FROM JMS_TRANSACTIONS)
              DELETE_TX = DELETE FROM JMS_TRANSACTIONS WHERE TXID = ?
              DELETE_MARKED_MESSAGES = DELETE FROM JMS_MESSAGES WHERE TXID=? AND TXOP=?
              DELETE_TEMPORARY_MESSAGES = DELETE FROM JMS_MESSAGES WHERE TXOP='T'
              DELETE_MESSAGE = DELETE FROM JMS_MESSAGES WHERE MESSAGEID=? AND DESTINATION=?
              CREATE_MESSAGE_TABLE = CREATE CACHED TABLE JMS_MESSAGES ( MESSAGEID INTEGER NOT NULL, \
                 DESTINATION VARCHAR(255) NOT NULL, TXID INTEGER, TXOP CHAR(1), \
                 MESSAGEBLOB OBJECT, PRIMARY KEY (MESSAGEID, DESTINATION) )
              CREATE_IDX_MESSAGE_TXOP_TXID = CREATE INDEX JMS_MESSAGES_TXOP_TXID ON JMS_MESSAGES (TXOP, TXID)
              CREATE_IDX_MESSAGE_DESTINATION = CREATE INDEX JMS_MESSAGES_DESTINATION ON JMS_MESSAGES (DESTINATION)
              CREATE_TX_TABLE = CREATE CACHED TABLE JMS_TRANSACTIONS ( TXID INTEGER, PRIMARY KEY (TXID) )
              CREATE_TABLES_ON_STARTUP = TRUE
           &lt;/value&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=MessageCache" class="org.jboss.ejb3.embedded.jms.MessageCache"&gt;
        &lt;property name="persistenceManager"&gt;&lt;inject bean="jboss.mq:service=PersistenceManager"/&gt;&lt;/property&gt;
        &lt;property name="highMemoryMark"&gt;&lt;value&gt;50&lt;/value&gt;&lt;/property&gt;
        &lt;property name="maxMemoryMark"&gt;&lt;value&gt;60&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=StateManager" class="org.jboss.ejb3.embedded.jms.JDBCStateManager"&gt;
        &lt;property name="transactionManager"&gt;
           &lt;inject bean="TransactionManager"/&gt;
        &lt;/property&gt;
        &lt;property name="datasource"&gt;
           &lt;inject bean="DefaultDS"/&gt;
        &lt;/property&gt;
        &lt;property name="sqlProperties"&gt;
           &lt;value&gt;
              CREATE_TABLES_ON_STARTUP = TRUE
              CREATE_USER_TABLE = CREATE TABLE JMS_USERS (USERID VARCHAR(32) NOT NULL, PASSWD VARCHAR(32) NOT NULL, \
                                                         CLIENTID VARCHAR(128), PRIMARY KEY(USERID))
              CREATE_ROLE_TABLE = CREATE TABLE JMS_ROLES (ROLEID VARCHAR(32) NOT NULL, USERID VARCHAR(32) NOT NULL, \
                                                         PRIMARY KEY(USERID, ROLEID))
              CREATE_SUBSCRIPTION_TABLE = CREATE TABLE JMS_SUBSCRIPTIONS (CLIENTID VARCHAR(128) NOT NULL, \
                                                         SUBNAME VARCHAR(128) NOT NULL, TOPIC VARCHAR(255) NOT NULL, \
                                                         SELECTOR VARCHAR(255), PRIMARY KEY(CLIENTID, SUBNAME))
              GET_SUBSCRIPTION = SELECT TOPIC, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              LOCK_SUBSCRIPTION = SELECT TOPIC, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              GET_SUBSCRIPTIONS_FOR_TOPIC = SELECT CLIENTID, SUBNAME, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE TOPIC=?
              INSERT_SUBSCRIPTION = INSERT INTO JMS_SUBSCRIPTIONS (CLIENTID, SUBNAME, TOPIC, SELECTOR) VALUES(?,?,?,?)
              UPDATE_SUBSCRIPTION = UPDATE JMS_SUBSCRIPTIONS SET TOPIC=?, SELECTOR=? WHERE CLIENTID=? AND SUBNAME=?
              REMOVE_SUBSCRIPTION = DELETE FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              GET_USER_BY_CLIENTID = SELECT USERID, PASSWD, CLIENTID FROM JMS_USERS WHERE CLIENTID=?
              GET_USER = SELECT PASSWD, CLIENTID FROM JMS_USERS WHERE USERID=?
              POPULATE.TABLES.01 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('guest', 'guest')
              POPULATE.TABLES.02 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('j2ee', 'j2ee')
              POPULATE.TABLES.03 = INSERT INTO JMS_USERS (USERID, PASSWD, CLIENTID) VALUES ('john', 'needle', 'DurableSubscriberExample')
              POPULATE.TABLES.04 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('nobody', 'nobody')
              POPULATE.TABLES.05 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('dynsub', 'dynsub')
              POPULATE.TABLES.06 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('guest','guest')
              POPULATE.TABLES.07 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('j2ee','guest')
              POPULATE.TABLES.08 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('john','guest')
              POPULATE.TABLES.09 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('subscriber','john')
              POPULATE.TABLES.10 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('publisher','john')
              POPULATE.TABLES.11 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('publisher','dynsub')
              POPULATE.TABLES.12 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('durpublisher','john')
              POPULATE.TABLES.13 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('durpublisher','dynsub')
              POPULATE.TABLES.14 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('noacc','nobody')
           &lt;/value&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=DestinationManager" class="org.jboss.ejb3.embedded.jms.DestinationManager"&gt;
        &lt;property name="persistenceManagerInstance"&gt;&lt;inject bean="jboss.mq:service=PersistenceManager"/&gt;&lt;/property&gt;
        &lt;property name="messageCacheInstance"&gt;&lt;inject bean="jboss.mq:service=MessageCache"/&gt;&lt;/property&gt;
        &lt;property name="stateManagerInstance"&gt;&lt;inject bean="jboss.mq:service=StateManager"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
  
  &lt;/deployment&gt;
  
  
  1.1      date: 2005/07/29 20:49:56;  author: bill;  state: Exp;jboss-ejb3/src/resources/standalone/jboss-jms-beans.xml
  
  Index: jboss-jms-beans.xml
  ===================================================================
  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  
  &lt;deployment xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
              xsi:schemaLocation="urn:jboss:bean-deployer bean-deployer_1_0.xsd"
              xmlns="urn:jboss:bean-deployer"&gt;
     &lt;bean name="RemoteJBossJMSProviderAdapter" class="org.jboss.jms.jndi.JNDIProviderAdapter"&gt;
        &lt;property name="factoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="queueFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="topicFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
        &lt;property name="properties" class="java.util.Properties"&gt;
                 &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
                    &lt;entry&gt;
                       &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
                       &lt;value&gt;org.jnp.interfaces.NamingContextFactory&lt;/value&gt;
                    &lt;/entry&gt;
                    &lt;entry&gt;
                        &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
                        &lt;value&gt;org.jboss.naming:org.jnp.interfaces&lt;/value&gt;
                    &lt;/entry&gt;
                    &lt;entry&gt;
                        &lt;key&gt;java.naming.provider.url&lt;/key&gt;
                        &lt;value&gt;<a href="jnp://localhost:1099&lt;/value" target="_new">jnp://localhost:1099&lt;/value</a>&gt;
                    &lt;/entry&gt;
                 &lt;/map&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="b1" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
        &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
        &lt;property name="target"&gt;&lt;inject bean="RemoteJBossJMSProviderAdapter"/&gt;&lt;/property&gt;
        &lt;property name="bindTo"&gt;&lt;value&gt;java:/DefaultJMSProvider&lt;/value&gt;&lt;/property&gt;
        &lt;property name="serializable"&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="JmsServerSessionPool" class="org.jboss.jms.asf.StdServerSessionPoolFactory"&gt;
        &lt;property name="name"&gt;&lt;value&gt;StdJMSPool&lt;/value&gt;&lt;/property&gt;
        &lt;property name="xidFactory"&gt;&lt;inject bean="XidFactoryMBean"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="b2" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
        &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
        &lt;property name="target"&gt;&lt;inject bean="JmsServerSessionPool"/&gt;&lt;/property&gt;
        &lt;property name="bindTo"&gt;&lt;value&gt;java:/StdJMSPool&lt;/value&gt;&lt;/property&gt;
        &lt;property name="serializable"&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
  
     &lt;!-- Not complete/implemented fully yet
     &lt;bean name="jboss.mq:service=PersistenceManager" class="org.jboss.ejb3.embedded.jms.JDBC2PersistenceManager"&gt;
        &lt;property name="transactionManager"&gt;
           &lt;inject bean="TransactionManager"/&gt;
        &lt;/property&gt;
        &lt;property name="datasource"&gt;
           &lt;inject bean="DefaultDS"/&gt;
        &lt;/property&gt;
        &lt;property name="sqlProperties"&gt;
           &lt;value&gt;
              BLOB_TYPE=OBJECT_BLOB
              INSERT_TX = INSERT INTO JMS_TRANSACTIONS (TXID) values(?)
              INSERT_MESSAGE = INSERT INTO JMS_MESSAGES (MESSAGEID, DESTINATION, MESSAGEBLOB, TXID, TXOP) VALUES(?,?,?,?,?)
              SELECT_ALL_UNCOMMITED_TXS = SELECT TXID FROM JMS_TRANSACTIONS
              SELECT_MAX_TX = SELECT MAX(TXID) FROM JMS_MESSAGES
              SELECT_MESSAGES_IN_DEST = SELECT MESSAGEID, MESSAGEBLOB FROM JMS_MESSAGES WHERE DESTINATION=?
              SELECT_MESSAGE = SELECT MESSAGEID, MESSAGEBLOB FROM JMS_MESSAGES WHERE MESSAGEID=? AND DESTINATION=?
              MARK_MESSAGE = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE MESSAGEID=? AND DESTINATION=?
              UPDATE_MESSAGE = UPDATE JMS_MESSAGES SET MESSAGEBLOB=? WHERE MESSAGEID=? AND DESTINATION=?
              UPDATE_MARKED_MESSAGES = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE TXOP=?
              UPDATE_MARKED_MESSAGES_WITH_TX = UPDATE JMS_MESSAGES SET TXID=?, TXOP=? WHERE TXOP=? AND TXID=?
              DELETE_MARKED_MESSAGES_WITH_TX = DELETE FROM JMS_MESSAGES WHERE TXOP=? AND JMS_MESSAGES.TXID IN (SELECT TXID FROM JMS_TRANSACTIONS)
              DELETE_TX = DELETE FROM JMS_TRANSACTIONS WHERE TXID = ?
              DELETE_MARKED_MESSAGES = DELETE FROM JMS_MESSAGES WHERE TXID=? AND TXOP=?
              DELETE_TEMPORARY_MESSAGES = DELETE FROM JMS_MESSAGES WHERE TXOP='T'
              DELETE_MESSAGE = DELETE FROM JMS_MESSAGES WHERE MESSAGEID=? AND DESTINATION=?
              CREATE_MESSAGE_TABLE = CREATE CACHED TABLE JMS_MESSAGES ( MESSAGEID INTEGER NOT NULL, \
                 DESTINATION VARCHAR(255) NOT NULL, TXID INTEGER, TXOP CHAR(1), \
                 MESSAGEBLOB OBJECT, PRIMARY KEY (MESSAGEID, DESTINATION) )
              CREATE_IDX_MESSAGE_TXOP_TXID = CREATE INDEX JMS_MESSAGES_TXOP_TXID ON JMS_MESSAGES (TXOP, TXID)
              CREATE_IDX_MESSAGE_DESTINATION = CREATE INDEX JMS_MESSAGES_DESTINATION ON JMS_MESSAGES (DESTINATION)
              CREATE_TX_TABLE = CREATE CACHED TABLE JMS_TRANSACTIONS ( TXID INTEGER, PRIMARY KEY (TXID) )
              CREATE_TABLES_ON_STARTUP = TRUE
           &lt;/value&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=MessageCache" class="org.jboss.ejb3.embedded.jms.MessageCache"&gt;
        &lt;property name="persistenceManager"&gt;&lt;inject bean="jboss.mq:service=PersistenceManager"/&gt;&lt;/property&gt;
        &lt;property name="highMemoryMark"&gt;&lt;value&gt;50&lt;/value&gt;&lt;/property&gt;
        &lt;property name="maxMemoryMark"&gt;&lt;value&gt;60&lt;/value&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=StateManager" class="org.jboss.ejb3.embedded.jms.JDBCStateManager"&gt;
        &lt;property name="transactionManager"&gt;
           &lt;inject bean="TransactionManager"/&gt;
        &lt;/property&gt;
        &lt;property name="datasource"&gt;
           &lt;inject bean="DefaultDS"/&gt;
        &lt;/property&gt;
        &lt;property name="sqlProperties"&gt;
           &lt;value&gt;
              CREATE_TABLES_ON_STARTUP = TRUE
              CREATE_USER_TABLE = CREATE TABLE JMS_USERS (USERID VARCHAR(32) NOT NULL, PASSWD VARCHAR(32) NOT NULL, \
                                                         CLIENTID VARCHAR(128), PRIMARY KEY(USERID))
              CREATE_ROLE_TABLE = CREATE TABLE JMS_ROLES (ROLEID VARCHAR(32) NOT NULL, USERID VARCHAR(32) NOT NULL, \
                                                         PRIMARY KEY(USERID, ROLEID))
              CREATE_SUBSCRIPTION_TABLE = CREATE TABLE JMS_SUBSCRIPTIONS (CLIENTID VARCHAR(128) NOT NULL, \
                                                         SUBNAME VARCHAR(128) NOT NULL, TOPIC VARCHAR(255) NOT NULL, \
                                                         SELECTOR VARCHAR(255), PRIMARY KEY(CLIENTID, SUBNAME))
              GET_SUBSCRIPTION = SELECT TOPIC, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              LOCK_SUBSCRIPTION = SELECT TOPIC, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              GET_SUBSCRIPTIONS_FOR_TOPIC = SELECT CLIENTID, SUBNAME, SELECTOR FROM JMS_SUBSCRIPTIONS WHERE TOPIC=?
              INSERT_SUBSCRIPTION = INSERT INTO JMS_SUBSCRIPTIONS (CLIENTID, SUBNAME, TOPIC, SELECTOR) VALUES(?,?,?,?)
              UPDATE_SUBSCRIPTION = UPDATE JMS_SUBSCRIPTIONS SET TOPIC=?, SELECTOR=? WHERE CLIENTID=? AND SUBNAME=?
              REMOVE_SUBSCRIPTION = DELETE FROM JMS_SUBSCRIPTIONS WHERE CLIENTID=? AND SUBNAME=?
              GET_USER_BY_CLIENTID = SELECT USERID, PASSWD, CLIENTID FROM JMS_USERS WHERE CLIENTID=?
              GET_USER = SELECT PASSWD, CLIENTID FROM JMS_USERS WHERE USERID=?
              POPULATE.TABLES.01 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('guest', 'guest')
              POPULATE.TABLES.02 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('j2ee', 'j2ee')
              POPULATE.TABLES.03 = INSERT INTO JMS_USERS (USERID, PASSWD, CLIENTID) VALUES ('john', 'needle', 'DurableSubscriberExample')
              POPULATE.TABLES.04 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('nobody', 'nobody')
              POPULATE.TABLES.05 = INSERT INTO JMS_USERS (USERID, PASSWD) VALUES ('dynsub', 'dynsub')
              POPULATE.TABLES.06 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('guest','guest')
              POPULATE.TABLES.07 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('j2ee','guest')
              POPULATE.TABLES.08 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('john','guest')
              POPULATE.TABLES.09 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('subscriber','john')
              POPULATE.TABLES.10 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('publisher','john')
              POPULATE.TABLES.11 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('publisher','dynsub')
              POPULATE.TABLES.12 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('durpublisher','john')
              POPULATE.TABLES.13 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('durpublisher','dynsub')
              POPULATE.TABLES.14 = INSERT INTO JMS_ROLES (ROLEID, USERID) VALUES ('noacc','nobody')
           &lt;/value&gt;
        &lt;/property&gt;
     &lt;/bean&gt;
  
     &lt;bean name="jboss.mq:service=DestinationManager" class="org.jboss.ejb3.embedded.jms.DestinationManager"&gt;
        &lt;property name="persistenceManagerInstance"&gt;&lt;inject bean="jboss.mq:service=PersistenceManager"/&gt;&lt;/property&gt;
        &lt;property name="messageCacheInstance"&gt;&lt;inject bean="jboss.mq:service=MessageCache"/&gt;&lt;/property&gt;
        &lt;property name="stateManagerInstance"&gt;&lt;inject bean="jboss.mq:service=StateManager"/&gt;&lt;/property&gt;
     &lt;/bean&gt;
  
     --&gt;
  &lt;/deployment&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785404">[jboss-cvs] jboss-ejb3/src/resources/test/standaloneWar/WEB-INF  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:49:56

  Modified:    src/resources/test/standaloneWar/WEB-INF  web.xml
  Log:
  JMS and small name changes
  
  Revision  Changes    Path
  1.3       +1 -1      jboss-ejb3/src/resources/test/standaloneWar/WEB-INF/web.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: web.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/src/resources/test/standaloneWar/WEB-INF/web.xml,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- web.xml	22 Jul 2005 16:52:01 -0000	1.2
  +++ web.xml	29 Jul 2005 20:49:56 -0000	1.3
  @@ -8,7 +8,7 @@
   
      &lt;context-param&gt;
         &lt;param-name&gt;jboss-kernel-deployments&lt;/param-name&gt;
  -      &lt;param-value&gt;bootstrap.xml, deployer.xml&lt;/param-value&gt;
  +      &lt;param-value&gt;embedded-jboss-beans, deployer.xml&lt;/param-value&gt;
      &lt;/context-param&gt;
   
      &lt;listener&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785339">[jboss-cvs] jboss-ejb3/src/main/org/jboss/ejb3/embedded   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:44

  Added:       src/main/org/jboss/ejb3/embedded   JndiBinder.java
                        XidFactoryMBean.java
  Log:
  Embeddable MDB3.  Works with a remote JBoss server instance.
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 17:44:44;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/JndiBinder.java
  
  Index: JndiBinder.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded;
  
  import java.util.Hashtable;
  import javax.naming.InitialContext;
  import org.jboss.ejb3.EJB3Util;
  import org.jboss.ejb3.NonSerializableFactory;
  import org.jboss.naming.Util;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class JndiBinder
  {
     private String bindTo;
     private Object target;
     private boolean serializable;
     private Hashtable properties;
  
     public void setBindTo(String bindTo)
     {
        this.bindTo = bindTo;
     }
  
     public void setTarget(Object target)
     {
        this.target = target;
     }
  
     public void setSerializable(boolean serializable)
     {
        this.serializable = serializable;
     }
  
     public void setJndiProperties(Hashtable properties)
     {
        this.properties = properties;
     }
  
     public void start() throws Exception
     {
        InitialContext ctx = EJB3Util.getInitialContext(properties);
        if (serializable)
        {
           Util.rebind(ctx, bindTo, target);
        }
        else
        {
           NonSerializableFactory.rebind(ctx, bindTo, target);
        }
     }
  }
  
  
  
  1.1      date: 2005/07/29 17:44:44;  author: bill;  state: Exp;jboss-ejb3/src/main/org/jboss/ejb3/embedded/XidFactoryMBean.java
  
  Index: XidFactoryMBean.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.embedded;
  
  import javax.transaction.xa.Xid;
  import org.jboss.tm.*;
  
  /**
   * Stupid wrapper because tons of services use the XidFactoryMBean interface.
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class XidFactoryMBean implements org.jboss.tm.XidFactoryMBean
  {
     private XidFactoryBase base;
  
     public XidFactoryMBean(XidFactoryBase base)
     {
        this.base = base;
     }
  
     public org.jboss.tm.XidFactoryMBean getInstance()
     {
        return this;
     }
  
     public String getName()
     {
        throw new RuntimeException("should not be called");
     }
  
     public int getState()
     {
        throw new RuntimeException("should not be called");
     }
  
     public String getStateString()
     {
        throw new RuntimeException("should not be called");
     }
  
     public void jbossInternalLifecycle(String method) throws Exception
     {
        throw new RuntimeException("should not be called");
     }
  
     public void create() throws Exception
     {
     }
  
     public void start() throws Exception
     {
     }
  
     public void stop()
     {
     }
  
     public void destroy()
     {
     }
  
     public String getBaseGlobalId()
     {
        return base.getBaseGlobalId();
     }
  
     public void setBaseGlobalId(String baseGlobalId)
     {
        base.setBaseGlobalId(baseGlobalId);
     }
  
     public long getGlobalIdNumber()
     {
        return base.getGlobalIdNumber();
     }
  
     public void setGlobalIdNumber(long globalIdNumber)
     {
        base.setGlobalIdNumber(globalIdNumber);
     }
  
     public String getBranchQualifier()
     {
        return base.getBranchQualifier();
     }
  
     public void setBranchQualifier(String branchQualifier)
     {
        base.setBranchQualifier(branchQualifier);
     }
  
     public boolean isPad()
     {
        return base.isPad();
     }
  
     public void setPad(boolean pad)
     {
        base.setPad(pad);
     }
  
     public XidImpl newXid()
     {
        return base.newXid();
     }
  
     public XidImpl newBranch(GlobalId globalId)
     {
        return base.newBranch(globalId);
     }
  
     public XidImpl newBranch(XidImpl xid, long branchIdNum)
     {
        return base.newBranch(xid, branchIdNum);
     }
  
     public XidImpl recreateXid(long localId)
     {
        return base.recreateXid(localId);
     }
  
     public XidImpl recreateXid(long localId, GlobalId globalId)
     {
        return base.recreateXid(localId, globalId);
     }
  
     public byte[] localIdToGlobalId(long localId)
     {
        return base.localIdToGlobalId(localId);
     }
  
     public long extractLocalIdFrom(byte[] globalId)
     {
        return base.extractLocalIdFrom(globalId);
     }
  
     public String getBaseBranchQualifier(byte[] branchQualifier)
     {
        return base.getBaseBranchQualifier(branchQualifier);
     }
  
     public String toString(Xid xid)
     {
        return base.toString(xid);
     }
  }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785403">[jboss-cvs] jboss-ejb3/src/main/org/jboss/ejb3/embedded   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:49:56

  Modified:    src/main/org/jboss/ejb3/embedded  
                        EJB3StandaloneBootstrap.java
                        ServletBootstrapListener.java
  Log:
  JMS and small name changes
  
  Revision  Changes    Path
  1.5       +3 -7      jboss-ejb3/src/main/org/jboss/ejb3/embedded/EJB3StandaloneBootstrap.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: EJB3StandaloneBootstrap.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/src/main/org/jboss/ejb3/embedded/EJB3StandaloneBootstrap.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- EJB3StandaloneBootstrap.java	26 Jul 2005 20:57:02 -0000	1.4
  +++ EJB3StandaloneBootstrap.java	29 Jul 2005 20:49:56 -0000	1.5
  @@ -16,7 +16,7 @@
    * Comment
    *
    * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
  - * @version $Revision: 1.4 $
  + * @version $Revision: 1.5 $
    */
   public class EJB3StandaloneBootstrap
   {
  @@ -59,15 +59,11 @@
   
         try
         {
  -         URL bootstrap = Thread.currentThread().getContextClassLoader().getResource(basePath + "bootstrap.xml");
  -         System.out.println("*********** here: " + bootstrap);
  +         URL bootstrap = Thread.currentThread().getContextClassLoader().getResource(basePath + "embedded-jboss-beans.xml");
            createKernel();
  -         System.out.println("*********** here before deployer: ");
            BeanXMLDeployer deployer = new BeanXMLDeployer(kernel);
  -         System.out.println("*********** here after deployer: ");
            if (bootstrap == null)
  -            throw new RuntimeException("Cannot find bootstrap.xml");
  -         System.out.println("*********boostrap: " + bootstrap);
  +            throw new RuntimeException("Cannot find embedded-jboss-beans.xml");
            deployer.deploy(bootstrap);
            deployer.validate();
            /*
  
  
  
  1.2       +2 -2      jboss-ejb3/src/main/org/jboss/ejb3/embedded/ServletBootstrapListener.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ServletBootstrapListener.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/src/main/org/jboss/ejb3/embedded/ServletBootstrapListener.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- ServletBootstrapListener.java	22 Jul 2005 16:52:01 -0000	1.1
  +++ ServletBootstrapListener.java	29 Jul 2005 20:49:56 -0000	1.2
  @@ -23,7 +23,7 @@
    * Comment
    *
    * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
  - * @version $Revision: 1.1 $
  + * @version $Revision: 1.2 $
    */
   public class ServletBootstrapListener implements ServletContextListener
   {
  @@ -91,7 +91,7 @@
   
            String deployments = (String)servletContextEvent.getServletContext().getInitParameter("jboss-kernel-deployments");
   
  -         if (deployments == null) deployments = "bootstrap.xml";
  +         if (deployments == null) deployments = "embedded-jboss-beans.xml";
   
            tokenizer = new StringTokenizer(deployments, ",");
            while (tokenizer.hasMoreTokens())

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785402">[jboss-cvs] jbossmq/src/main/org/jboss/mq/server/jmx  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:48:52

  Modified:    src/main/org/jboss/mq/server/jmx  DestinationManager.java
  Log:
  small change to make pojoable.
  
  Revision  Changes    Path
  1.17      +3 -3      jbossmq/src/main/org/jboss/mq/server/jmx/DestinationManager.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DestinationManager.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbossmq/src/main/org/jboss/mq/server/jmx/DestinationManager.java,v
  retrieving revision 1.16
  retrieving revision 1.17
  diff -u -b -r1.16 -r1.17
  --- DestinationManager.java	12 Jul 2005 18:05:44 -0000	1.16
  +++ DestinationManager.java	29 Jul 2005 20:48:52 -0000	1.17
  @@ -35,7 +35,7 @@
    * @author     Vincent Sheffer (vsheffer@...)
    * @author     &lt;a href="mailto:jplindfo@... Lindfors&lt;/a&gt;
    * @author     &lt;a href="hiram.chirino@... Chirino&lt;/a&gt;
  - * @version    $Revision: 1.16 $
  + * @version    $Revision: 1.17 $
    */
   public class DestinationManager extends InterceptorMBeanSupport implements DestinationManagerMBean
   {
  @@ -48,7 +48,7 @@
      /** The JMX ObjectName of this service MBean */
      private ObjectName mqService;
      /** The JMS server implementation */
  -   private JMSDestinationManager jmsServer;
  +   protected JMSDestinationManager jmsServer;
      /** The JMX ObjectName of the configured persistence manager */
      private ObjectName persistenceManager;
      /** The JMX ObjectName of the configured state manager */
  @@ -56,7 +56,7 @@
      /** The JMX ObjectName of the message cache */
      private ObjectName messageCache;
      /** The temporary topic/queue parameters */
  -   private BasicQueueParameters tempParameters = new BasicQueueParameters();
  +   protected BasicQueueParameters tempParameters = new BasicQueueParameters();
   
      /**
       * @jmx:managed-attribute

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785401">[jboss-cvs] jbossmq/src/main/org/jboss/mq/server  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:48:52

  Modified:    src/main/org/jboss/mq/server  MessageCache.java
  Log:
  small change to make pojoable.
  
  Revision  Changes    Path
  1.33      +10 -7     jbossmq/src/main/org/jboss/mq/server/MessageCache.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MessageCache.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbossmq/src/main/org/jboss/mq/server/MessageCache.java,v
  retrieving revision 1.32
  retrieving revision 1.33
  diff -u -b -r1.32 -r1.33
  --- MessageCache.java	21 Mar 2005 21:58:44 -0000	1.32
  +++ MessageCache.java	29 Jul 2005 20:48:52 -0000	1.33
  @@ -9,16 +9,14 @@
   import java.lang.ref.Reference;
   import java.lang.ref.ReferenceQueue;
   import java.util.HashMap;
  -import EDU.oswego.cs.dl.util.concurrent.SynchronizedLong;
  -
   import javax.jms.JMSException;
   import javax.management.MBeanRegistration;
   import javax.management.ObjectName;
  -
   import org.jboss.mq.DurableSubscriptionID;
   import org.jboss.mq.SpyMessage;
   import org.jboss.mq.pm.CacheStore;
   import org.jboss.system.ServiceMBeanSupport;
  +import EDU.oswego.cs.dl.util.concurrent.SynchronizedLong;
   
   /**
    * This class implements a Message cache so that larger amounts of messages
  @@ -34,7 +32,7 @@
    * @author &lt;a href="mailto:David.Maplesden@... Maplesden&lt;/a&gt;
    * @author &lt;a href="mailto:pra@... Antman&lt;/a&gt;
    * @author &lt;a href="mailto:Adrian.Brock@... Brock&lt;/a&gt;
  - * @version    $Revision: 1.32 $
  + * @version    $Revision: 1.33 $
    *
    * @jmx.mbean name="jboss.mq:service=MessageCache"
    *      extends="org.jboss.system.ServiceMBean"
  @@ -53,7 +51,7 @@
      long cacheHits = 0;
      long cacheMisses = 0;
   
  -   CacheStore cacheStore;
  +   protected CacheStore cacheStore;
      ObjectName cacheStoreName;
   
      private Thread referenceSoftner;
  @@ -423,14 +421,19 @@
       */
      protected void startService() throws Exception
      {
  -
  -      cacheStore = (CacheStore) getServer().getAttribute(cacheStoreName, "Instance");
  +      setupCacheStore();
         
         referenceSoftner = new Thread(this, "JBossMQ Cache Reference Softner");
         referenceSoftner.setDaemon(true);
         referenceSoftner.start();
      }
   
  +   protected void setupCacheStore() throws Exception
  +   {
  +      cacheStore = (CacheStore) getServer().getAttribute(cacheStoreName, "Instance");
  +
  +   }
  +
      /**
       * This gets called to stop the cache service.
       */

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785400">[jboss-cvs] jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms - New directory ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 20:41</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 16:40:33

  Log:
  Directory /cvsroot/jboss/jboss-ejb3/src/main/org/jboss/ejb3/embedded/jms added to the repository

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785397">[jboss-cvs] jboss-dependency/src/tests/org/jboss/test/dependency/controller/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 20:24</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 16:23:48

  Modified:    src/tests/org/jboss/test/dependency/controller/test 
                        ManualControllerTestCase.java
  Log:
  Add a test for manual deployment control with dependencies.
  
  Revision  Changes    Path
  1.2       +79 -1     jboss-dependency/src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ManualControllerTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-dependency/src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- ManualControllerTestCase.java	1 Jun 2005 17:12:30 -0000	1.1
  +++ ManualControllerTestCase.java	29 Jul 2005 20:23:48 -0000	1.2
  @@ -6,6 +6,7 @@
    */
   package org.jboss.test.dependency.controller.test;
   
  +import org.jboss.dependency.plugins.AbstractDependencyItem;
   import org.jboss.dependency.spi.ControllerContext;
   import org.jboss.dependency.spi.ControllerMode;
   import org.jboss.dependency.spi.ControllerState;
  @@ -15,7 +16,7 @@
    * A ManualControllerTestCase.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.1 $
  + * @version $Revision: 1.2 $
    */
   public class ManualControllerTestCase extends AbstractDependencyTest
   {
  @@ -125,4 +126,81 @@
         assertEquals(11, delegate.instantiateUninstallOrder);
         assertEquals(12, delegate.describeUninstallOrder);
      }
  +   
  +   public void testManualWithDependency() throws Throwable
  +   {
  +      TestDelegate dependee = new TestDelegate("Dependee");
  +      TestDelegate dependent = new TestDelegate("Dependent");
  +      dependent.addDependency(new AbstractDependencyItem("Dependent", "Dependee", ControllerState.START, ControllerState.INSTALLED));
  +      dependee.setMode(ControllerMode.MANUAL);
  +      ControllerContext dependeeContext = assertInstall(dependee, ControllerState.NOT_INSTALLED);
  +      dependent.setMode(ControllerMode.MANUAL);
  +      ControllerContext dependentContext = assertInstall(dependent, ControllerState.NOT_INSTALLED);
  +      
  +      assertChange(dependentContext, ControllerState.INSTALLED, ControllerState.CREATE);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(-1, dependent.startInstallOrder);
  +      assertEquals(-1, dependent.installInstallOrder);
  +      assertEquals(-1, dependent.installUninstallOrder);
  +      assertEquals(-1, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      
  +      assertChange(dependeeContext, ControllerState.INSTALLED);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(11, dependent.startInstallOrder);
  +      assertEquals(12, dependent.installInstallOrder);
  +      assertEquals(-1, dependent.installUninstallOrder);
  +      assertEquals(-1, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      assertEquals(5, dependee.describeInstallOrder);
  +      assertEquals(6, dependee.instantiateInstallOrder);
  +      assertEquals(7, dependee.configureInstallOrder);
  +      assertEquals(8, dependee.createInstallOrder);
  +      assertEquals(9, dependee.startInstallOrder);
  +      assertEquals(10, dependee.installInstallOrder);
  +      assertEquals(-1, dependee.installUninstallOrder);
  +      assertEquals(-1, dependee.startUninstallOrder);
  +      assertEquals(-1, dependee.createUninstallOrder);
  +      assertEquals(-1, dependee.configureUninstallOrder);
  +      assertEquals(-1, dependee.instantiateUninstallOrder);
  +      assertEquals(-1, dependee.describeUninstallOrder);
  +      
  +      assertChange(dependeeContext, ControllerState.START);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(11, dependent.startInstallOrder);
  +      assertEquals(12, dependent.installInstallOrder);
  +      assertEquals(13, dependent.installUninstallOrder);
  +      assertEquals(14, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      assertEquals(5, dependee.describeInstallOrder);
  +      assertEquals(6, dependee.instantiateInstallOrder);
  +      assertEquals(7, dependee.configureInstallOrder);
  +      assertEquals(8, dependee.createInstallOrder);
  +      assertEquals(9, dependee.startInstallOrder);
  +      assertEquals(10, dependee.installInstallOrder);
  +      assertEquals(15, dependee.installUninstallOrder);
  +      assertEquals(-1, dependee.startUninstallOrder);
  +      assertEquals(-1, dependee.createUninstallOrder);
  +      assertEquals(-1, dependee.configureUninstallOrder);
  +      assertEquals(-1, dependee.instantiateUninstallOrder);
  +      assertEquals(-1, dependee.describeUninstallOrder);
  +   }
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785399">[jboss-cvs] jboss-dependency/src/tests/org/jboss/test/dependency/controller/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 20:30</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 16:29:11

  Modified:    src/tests/org/jboss/test/dependency/controller/test 
                        ManualControllerTestCase.java
  Log:
  Test for undeploying the dependent first manually.
  
  Revision  Changes    Path
  1.3       +104 -1    jboss-dependency/src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ManualControllerTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-dependency/src/tests/org/jboss/test/dependency/controller/test/ManualControllerTestCase.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- ManualControllerTestCase.java	29 Jul 2005 20:23:48 -0000	1.2
  +++ ManualControllerTestCase.java	29 Jul 2005 20:29:11 -0000	1.3
  @@ -16,7 +16,7 @@
    * A ManualControllerTestCase.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.2 $
  + * @version $Revision: 1.3 $
    */
   public class ManualControllerTestCase extends AbstractDependencyTest
   {
  @@ -203,4 +203,107 @@
         assertEquals(-1, dependee.instantiateUninstallOrder);
         assertEquals(-1, dependee.describeUninstallOrder);
      }
  +   
  +   public void testManualWithDependencyUninstallDependentFirst() throws Throwable
  +   {
  +      TestDelegate dependee = new TestDelegate("Dependee");
  +      TestDelegate dependent = new TestDelegate("Dependent");
  +      dependent.addDependency(new AbstractDependencyItem("Dependent", "Dependee", ControllerState.START, ControllerState.INSTALLED));
  +      dependee.setMode(ControllerMode.MANUAL);
  +      ControllerContext dependeeContext = assertInstall(dependee, ControllerState.NOT_INSTALLED);
  +      dependent.setMode(ControllerMode.MANUAL);
  +      ControllerContext dependentContext = assertInstall(dependent, ControllerState.NOT_INSTALLED);
  +      
  +      assertChange(dependentContext, ControllerState.INSTALLED, ControllerState.CREATE);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(-1, dependent.startInstallOrder);
  +      assertEquals(-1, dependent.installInstallOrder);
  +      assertEquals(-1, dependent.installUninstallOrder);
  +      assertEquals(-1, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      
  +      assertChange(dependeeContext, ControllerState.INSTALLED);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(11, dependent.startInstallOrder);
  +      assertEquals(12, dependent.installInstallOrder);
  +      assertEquals(-1, dependent.installUninstallOrder);
  +      assertEquals(-1, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      assertEquals(5, dependee.describeInstallOrder);
  +      assertEquals(6, dependee.instantiateInstallOrder);
  +      assertEquals(7, dependee.configureInstallOrder);
  +      assertEquals(8, dependee.createInstallOrder);
  +      assertEquals(9, dependee.startInstallOrder);
  +      assertEquals(10, dependee.installInstallOrder);
  +      assertEquals(-1, dependee.installUninstallOrder);
  +      assertEquals(-1, dependee.startUninstallOrder);
  +      assertEquals(-1, dependee.createUninstallOrder);
  +      assertEquals(-1, dependee.configureUninstallOrder);
  +      assertEquals(-1, dependee.instantiateUninstallOrder);
  +      assertEquals(-1, dependee.describeUninstallOrder);
  +      
  +      assertChange(dependentContext, ControllerState.CREATE);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(11, dependent.startInstallOrder);
  +      assertEquals(12, dependent.installInstallOrder);
  +      assertEquals(13, dependent.installUninstallOrder);
  +      assertEquals(14, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      assertEquals(5, dependee.describeInstallOrder);
  +      assertEquals(6, dependee.instantiateInstallOrder);
  +      assertEquals(7, dependee.configureInstallOrder);
  +      assertEquals(8, dependee.createInstallOrder);
  +      assertEquals(9, dependee.startInstallOrder);
  +      assertEquals(10, dependee.installInstallOrder);
  +      assertEquals(-1, dependee.installUninstallOrder);
  +      assertEquals(-1, dependee.startUninstallOrder);
  +      assertEquals(-1, dependee.createUninstallOrder);
  +      assertEquals(-1, dependee.configureUninstallOrder);
  +      assertEquals(-1, dependee.instantiateUninstallOrder);
  +      assertEquals(-1, dependee.describeUninstallOrder);
  +      
  +      assertChange(dependeeContext, ControllerState.CREATE);
  +      assertEquals(1, dependent.describeInstallOrder);
  +      assertEquals(2, dependent.instantiateInstallOrder);
  +      assertEquals(3, dependent.configureInstallOrder);
  +      assertEquals(4, dependent.createInstallOrder);
  +      assertEquals(11, dependent.startInstallOrder);
  +      assertEquals(12, dependent.installInstallOrder);
  +      assertEquals(13, dependent.installUninstallOrder);
  +      assertEquals(14, dependent.startUninstallOrder);
  +      assertEquals(-1, dependent.createUninstallOrder);
  +      assertEquals(-1, dependent.configureUninstallOrder);
  +      assertEquals(-1, dependent.instantiateUninstallOrder);
  +      assertEquals(-1, dependent.describeUninstallOrder);
  +      assertEquals(5, dependee.describeInstallOrder);
  +      assertEquals(6, dependee.instantiateInstallOrder);
  +      assertEquals(7, dependee.configureInstallOrder);
  +      assertEquals(8, dependee.createInstallOrder);
  +      assertEquals(9, dependee.startInstallOrder);
  +      assertEquals(10, dependee.installInstallOrder);
  +      assertEquals(15, dependee.installUninstallOrder);
  +      assertEquals(16, dependee.startUninstallOrder);
  +      assertEquals(-1, dependee.createUninstallOrder);
  +      assertEquals(-1, dependee.configureUninstallOrder);
  +      assertEquals(-1, dependee.instantiateUninstallOrder);
  +      assertEquals(-1, dependee.describeUninstallOrder);
  +   }
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785395">[jboss-cvs] jbossmq/src/main/org/jboss/mq/sm/jdbc  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 19:58</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 15:57:17

  Modified:    src/main/org/jboss/mq/sm/jdbc  JDBCStateManager.java
  Log:
  small change to make pojoable.
  
  Revision  Changes    Path
  1.8       +3 -3      jbossmq/src/main/org/jboss/mq/sm/jdbc/JDBCStateManager.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JDBCStateManager.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbossmq/src/main/org/jboss/mq/sm/jdbc/JDBCStateManager.java,v
  retrieving revision 1.7
  retrieving revision 1.8
  diff -u -b -r1.7 -r1.8
  --- JDBCStateManager.java	14 Mar 2005 21:45:44 -0000	1.7
  +++ JDBCStateManager.java	29 Jul 2005 19:57:17 -0000	1.8
  @@ -49,7 +49,7 @@
    * 
    * @author Adrian Brock (Adrian@...)
    * @author Ivelin Ivanov (ivelin@...)
  - * @version $Revision: 1.7 $
  + * @version $Revision: 1.8 $
    */
   public class JDBCStateManager extends AbstractStateManager implements JDBCStateManagerMBean
   {
  @@ -63,13 +63,13 @@
      private ObjectName connectionManagerName;
   
      /** The data source */
  -   private DataSource dataSource;
  +   protected DataSource dataSource;
   
      /** Whether there is a security manager */
      private boolean hasSecurityManager = true;
   
      /** The transaction manager */
  -   private TransactionManager tm;
  +   protected TransactionManager tm;
   
      /** The sql properties */
      private Properties sqlProperties = new Properties();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785392">[jboss-cvs] jboss-aspects  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ruel Loehr &lt;ruel.loehr@jb...&gt; -	2005-07-29 19:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: rloehr  
  Date: 05/07/29 15:49:26

  Modified:    jboss-aspects  component-info.xml
  Log:
  fix bug that took 1 hour to find.  Forgot to include .jar.  
  
  Revision  Changes    Path
  1.4       +2 -2      jboss-aspects/component-info.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: component-info.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-aspects/component-info.xml,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- component-info.xml	28 Jul 2005 20:47:57 -0000	1.3
  +++ component-info.xml	29 Jul 2005 19:49:26 -0000	1.4
  @@ -25,7 +25,7 @@
             &lt;include input="jboss-aspect-library.jar" /&gt;
             &lt;include input="jboss-aspect-library32.jar" /&gt;
             &lt;include input="jboss-aspect-library.jar.md5" /&gt;
  -          &lt;include input="jboss-aspect-library32.md5" /&gt;          
  +          &lt;include input="jboss-aspect-library32.jar.md5"/&gt;          
             &lt;include input="jboss-aop.deployer" /&gt;          
          &lt;/export&gt;
      &lt;/component&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785390">[jboss-cvs] jbossas  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ruel Loehr &lt;ruel.loehr@jb...&gt; -	2005-07-29 19:49</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: rloehr  
  Date: 05/07/29 15:48:10

  Modified:    jbossas  jbossbuild.xml
  Log:
  added md5 and deployer artifact for aspects
  
  Revision  Changes    Path
  1.53      +3 -0      jbossas/jbossbuild.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: jbossbuild.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbossas/jbossbuild.xml,v
  retrieving revision 1.52
  retrieving revision 1.53
  diff -u -b -r1.52 -r1.53
  --- jbossbuild.xml	28 Jul 2005 20:19:23 -0000	1.52
  +++ jbossbuild.xml	29 Jul 2005 19:48:10 -0000	1.53
  @@ -596,6 +596,9 @@
         &gt;
            &lt;artifact id="jboss-aspect-library.jar" release="lib"/&gt;
            &lt;artifact id="jboss-aspect-library32.jar" release="lib"/&gt;
  +         &lt;artifact id="jboss-aspect-library.jar.md5" /&gt;
  +         &lt;artifact id="jboss-aspect-library32.jar.md5" /&gt;      
  +         &lt;artifact id="jboss-aop.deployer" /&gt;          
            
         &lt;/component&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785387">[jboss-cvs] jbosscx/src/main/org/jboss/resource/adapter/jdbc/local  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 19:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 15:37:10

  Modified:    src/main/org/jboss/resource/adapter/jdbc/local 
                        LocalTxDataSource.java
  Log:
  add ability to become a factory
  
  Revision  Changes    Path
  1.7       +6 -1      jbosscx/src/main/org/jboss/resource/adapter/jdbc/local/LocalTxDataSource.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: LocalTxDataSource.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosscx/src/main/org/jboss/resource/adapter/jdbc/local/LocalTxDataSource.java,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- LocalTxDataSource.java	22 Jul 2005 00:26:55 -0000	1.6
  +++ LocalTxDataSource.java	29 Jul 2005 19:37:10 -0000	1.7
  @@ -30,7 +30,7 @@
    * It provides same functionality as ds.xml files
    *
    * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
  - * @version $Revision: 1.6 $
  + * @version $Revision: 1.7 $
    */
   public class LocalTxDataSource
   {
  @@ -130,6 +130,11 @@
         }
      }
   
  +   public Object getDatasource()
  +   {
  +      return datasource;
  +   }
  +
      public void setCachedConnectionManager(CachedConnectionManagerReference cachedConnectionManager)
      {
         this.cachedConnectionManager = cachedConnectionManager.getCachedConnectionManager();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785384">[jboss-cvs] jbossmq/src/main/org/jboss/mq/pm/jdbc2  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 19:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 15:35:58

  Modified:    src/main/org/jboss/mq/pm/jdbc2  PersistenceManager.java
  Log:
  tiny refactoring to enable POJO creation.
  
  Revision  Changes    Path
  1.33      +22 -9     jbossmq/src/main/org/jboss/mq/pm/jdbc2/PersistenceManager.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: PersistenceManager.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbossmq/src/main/org/jboss/mq/pm/jdbc2/PersistenceManager.java,v
  retrieving revision 1.32
  retrieving revision 1.33
  diff -u -b -r1.32 -r1.33
  --- PersistenceManager.java	12 Jul 2005 17:34:57 -0000	1.32
  +++ PersistenceManager.java	29 Jul 2005 19:35:58 -0000	1.33
  @@ -20,7 +20,12 @@
   
   import javax.jms.JMSException;
   import javax.management.ObjectName;
  +import javax.management.MBeanException;
  +import javax.management.AttributeNotFoundException;
  +import javax.management.InstanceNotFoundException;
  +import javax.management.ReflectionException;
   import javax.naming.InitialContext;
  +import javax.naming.NamingException;
   import javax.sql.DataSource;
   import javax.transaction.Status;
   import javax.transaction.Transaction;
  @@ -50,7 +55,7 @@
    * @author Jayesh Parayali (jayeshpk1@...)
    * @author Hiram Chirino (cojonudo14@...)
    *
  - *  @version $Revision: 1.32 $
  + *  @version $Revision: 1.33 $
    */
   public class PersistenceManager
      extends ServiceMBeanSupport
  @@ -1470,15 +1475,9 @@
            blobType = BLOB_BLOB;
         }
   
  -      //Find the ConnectionFactoryLoader MBean so we can find the datasource
  -      String dsName = (String) getServer().getAttribute(connectionManagerName, "BindName");
  -      //Get an InitialContext
  -
  -      InitialContext ctx = new InitialContext();
  -      datasource = (DataSource) ctx.lookup(dsName);
   
  -      //Get the Transaction Manager so we can control the jdbc tx
  -      tm = (TransactionManager) ctx.lookup(TransactionManagerService.JNDI_NAME);
  +      // initialize tm and datasource
  +      initializeFields();
   
         log.debug("Creating Schema");
         createSchema();
  @@ -1507,6 +1506,20 @@
            SpyJMSException.rethrowAsJMSException("Unable to resolve transactions retries=" + recoveryRetries, error);
      }
   
  +   protected void initializeFields()
  +           throws MBeanException, AttributeNotFoundException, InstanceNotFoundException, ReflectionException, NamingException
  +   {
  +      //Find the ConnectionFactoryLoader MBean so we can find the datasource
  +      String dsName = (String) getServer().getAttribute(connectionManagerName, "BindName");
  +      //Get an InitialContext
  +
  +      InitialContext ctx = new InitialContext();
  +      datasource = (DataSource) ctx.lookup(dsName);
  +
  +      //Get the Transaction Manager so we can control the jdbc tx
  +      tm = (TransactionManager) ctx.lookup(TransactionManagerService.JNDI_NAME);
  +   }
  +
      /**
       * Describe &lt;code&gt;getInstance&lt;/code&gt; method here.
       *

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785356">[jboss-cvs] jbosstest/src/resources/web/form-auth  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:44:39

  Added:       src/resources/web/form-auth  context.xml
  Log:
  Add the FormAuthValve to get access to the exception
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 18:44:39;  author: starksm;  state: Exp;jbosstest/src/resources/web/form-auth/context.xml
  
  Index: context.xml
  ===================================================================
  &lt;!-- Add the FormAuthValve to get access to the exception --&gt;
  &lt;Context cookies="true" crossContext="true"&gt;
     &lt;Valve className="org.jboss.web.tomcat.security.FormAuthValve" /&gt;
  &lt;/Context&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785358">[jboss-cvs] jbosstest/src/resources/web/form-auth  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:46</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:45:42

  Modified:    src/resources/web/form-auth  Tag: Branch_4_0
                        form-auth-web.xml
  Log:
  Use /restricted/errors.jsp as the form-error-page
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.3.2.1   +1 -1      jbosstest/src/resources/web/form-auth/form-auth-web.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: form-auth-web.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/web/form-auth/form-auth-web.xml,v
  retrieving revision 1.3
  retrieving revision 1.3.2.1
  diff -u -b -r1.3 -r1.3.2.1
  --- form-auth-web.xml	13 Sep 2004 23:00:37 -0000	1.3
  +++ form-auth-web.xml	29 Jul 2005 18:45:42 -0000	1.3.2.1
  @@ -70,7 +70,7 @@
   
         &lt;form-login-config&gt;
            &lt;form-login-page&gt;/restricted/login.html&lt;/form-login-page&gt;
  -         &lt;form-error-page&gt;/restricted/error.html&lt;/form-error-page&gt;
  +         &lt;form-error-page&gt;/restricted/errors.jsp&lt;/form-error-page&gt;
         &lt;/form-login-config&gt;
      &lt;/login-config&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785361">[jboss-cvs] jbosstest/src/resources/web/form-auth  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:47</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:46:11

  Modified:    src/resources/web/form-auth  form-auth-web.xml
  Log:
  Use /restricted/errors.jsp as the form-error-page
  
  Revision  Changes    Path
  1.4       +1 -1      jbosstest/src/resources/web/form-auth/form-auth-web.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: form-auth-web.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/web/form-auth/form-auth-web.xml,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- form-auth-web.xml	13 Sep 2004 23:00:37 -0000	1.3
  +++ form-auth-web.xml	29 Jul 2005 18:46:11 -0000	1.4
  @@ -70,7 +70,7 @@
   
         &lt;form-login-config&gt;
            &lt;form-login-page&gt;/restricted/login.html&lt;/form-login-page&gt;
  -         &lt;form-error-page&gt;/restricted/error.html&lt;/form-error-page&gt;
  +         &lt;form-error-page&gt;/restricted/errors.jsp&lt;/form-error-page&gt;
         &lt;/form-login-config&gt;
      &lt;/login-config&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785378">[jboss-cvs] jbosstest/src/resources/web/form-auth  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 19:12</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 15:11:27

  Modified:    src/resources/web/form-auth  Tag: Branch_4_0 context.xml
  Log:
  Add includePassword=true on the FormAuthValve.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.1   +2 -1      jbosstest/src/resources/web/form-auth/context.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: context.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/web/form-auth/context.xml,v
  retrieving revision 1.1
  retrieving revision 1.1.2.1
  diff -u -b -r1.1 -r1.1.2.1
  --- context.xml	29 Jul 2005 18:44:39 -0000	1.1
  +++ context.xml	29 Jul 2005 19:11:27 -0000	1.1.2.1
  @@ -1,4 +1,5 @@
   &lt;!-- Add the FormAuthValve to get access to the exception --&gt;
   &lt;Context cookies="true" crossContext="true"&gt;
  -   &lt;Valve className="org.jboss.web.tomcat.security.FormAuthValve" /&gt;
  +   &lt;Valve className="org.jboss.web.tomcat.security.FormAuthValve"
  +      includePassword="true" /&gt;
   &lt;/Context&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785381">[jboss-cvs] jbosstest/src/resources/web/form-auth  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 19:13</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 15:12:32

  Modified:    src/resources/web/form-auth  context.xml
  Log:
  Add includePassword=true on the FormAuthValve.
  
  Revision  Changes    Path
  1.2       +2 -1      jbosstest/src/resources/web/form-auth/context.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: context.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/web/form-auth/context.xml,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- context.xml	29 Jul 2005 18:44:39 -0000	1.1
  +++ context.xml	29 Jul 2005 19:12:32 -0000	1.2
  @@ -1,4 +1,5 @@
   &lt;!-- Add the FormAuthValve to get access to the exception --&gt;
   &lt;Context cookies="true" crossContext="true"&gt;
  -   &lt;Valve className="org.jboss.web.tomcat.security.FormAuthValve" /&gt;
  +   &lt;Valve className="org.jboss.web.tomcat.security.FormAuthValve"
  +      includePassword="true" /&gt;
   &lt;/Context&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785372">[jboss-cvs] jboss-tomcat/src/main/org/jboss/web/tomcat/security  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 19:07</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 15:06:42

  Modified:    src/main/org/jboss/web/tomcat/security  Tag: Branch_4_0
                        FormAuthValve.java
  Log:
  If the includePassword attribute is true, the j_password value is also included in the session under the attribute name j_password. Resolves (JBAS-2059) Add ability to include form auth password in error page via FormAuthValve.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.2.2.2   +25 -4     jboss-tomcat/src/main/org/jboss/web/tomcat/security/FormAuthValve.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: FormAuthValve.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-tomcat/src/main/org/jboss/web/tomcat/security/FormAuthValve.java,v
  retrieving revision 1.2.2.1
  retrieving revision 1.2.2.2
  diff -u -b -r1.2.2.1 -r1.2.2.2
  --- FormAuthValve.java	28 Jan 2005 12:30:41 -0000	1.2.2.1
  +++ FormAuthValve.java	29 Jul 2005 19:06:42 -0000	1.2.2.2
  @@ -1,5 +1,5 @@
   /*
  - * JBoss, the OpenSource WebOS
  + * JBoss, Home of Professional Open Source
    *
    * Distributable under LGPL license.
    * See terms of license at gnu.org.
  @@ -16,18 +16,30 @@
   import org.jboss.logging.Logger;
   
   /** A valve that associates the j_username with the session under the attribute
  - * name j_username for use by form login/error pages. In addition, it maps any
  + * name j_username for use by form login/error pages. If the includePassword
  + * attribute is true, the j_password value is also included in the session
  + * under the attribute name j_password. In addition, it maps any
    * authentication exception found in the SecurityAssociation to the session
    * attribute name j_exception.
    *  
    * @author Scott.Stark@...
  - * @version $Revision: 1.2.2.1 $
  + * @version $Revision: 1.2.2.2 $
    */
   public class FormAuthValve
      extends ValveBase
   {
      private static Logger log = Logger.getLogger(FormAuthValve.class);
      private static boolean trace = log.isTraceEnabled();
  +   private boolean includePassword;
  +
  +   public boolean isIncludePassword()
  +   {
  +      return includePassword;
  +   }
  +   public void setIncludePassword(boolean includePassword)
  +   {
  +      this.includePassword = includePassword;
  +   }
   
      public void invoke(Request request, Response response)
         throws IOException, ServletException
  @@ -37,7 +49,16 @@
         if( trace )
            log.trace("Enter, j_username="+username);
         if( session != null )
  +      {
  +         if( username != null )
            session.setAttribute("j_username", username);
  +         if( includePassword )
  +         {
  +            Object pass = request.getParameter("j_password");
  +            if( pass != null )
  +               session.setAttribute("j_password", pass);
  +         }
  +      }
   
         getNext().invoke(request, response);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785375">[jboss-cvs] jboss-tomcat/src/main/org/jboss/web/tomcat/security  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 19:10</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 15:08:53

  Modified:    src/main/org/jboss/web/tomcat/security  FormAuthValve.java
  Log:
  If the includePassword attribute is true, the j_password value is also included in the session under the attribute name j_password. Resolves (JBAS-2059) Add ability to include form auth password in error page via FormAuthValve.
  
  Revision  Changes    Path
  1.4       +25 -4     jboss-tomcat/src/main/org/jboss/web/tomcat/security/FormAuthValve.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: FormAuthValve.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-tomcat/src/main/org/jboss/web/tomcat/security/FormAuthValve.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- FormAuthValve.java	16 Sep 2004 15:51:10 -0000	1.3
  +++ FormAuthValve.java	29 Jul 2005 19:08:53 -0000	1.4
  @@ -1,5 +1,5 @@
   /*
  - * JBoss, the OpenSource WebOS
  + * JBoss, Home of Professional Open Source
    *
    * Distributable under LGPL license.
    * See terms of license at gnu.org.
  @@ -16,18 +16,30 @@
   import org.jboss.logging.Logger;
   
   /** A valve that associates the j_username with the session under the attribute
  - * name j_username for use by form login/error pages. In addition, it maps any
  + * name j_username for use by form login/error pages. If the includePassword
  + * attribute is true, the j_password value is also included in the session
  + * under the attribute name j_password. In addition, it maps any
    * authentication exception found in the SecurityAssociation to the session
    * attribute name j_exception.
    *  
    * @author Scott.Stark@...
  - * @version $Revision: 1.3 $
  + * @version $Revision: 1.4 $
    */
   public class FormAuthValve
      extends ValveBase
   {
      private static Logger log = Logger.getLogger(FormAuthValve.class);
      private static boolean trace = log.isTraceEnabled();
  +   private boolean includePassword;
  +
  +   public boolean isIncludePassword()
  +   {
  +      return includePassword;
  +   }
  +   public void setIncludePassword(boolean includePassword)
  +   {
  +      this.includePassword = includePassword;
  +   }
   
      public void invoke(Request request, Response response)
         throws IOException, ServletException
  @@ -37,7 +49,16 @@
         if( trace )
            log.trace("Enter, j_username="+username);
         if( session != null )
  +      {
  +         if( username != null )
            session.setAttribute("j_username", username);
  +         if( includePassword )
  +         {
  +            Object pass = request.getParameter("j_password");
  +            if( pass != null )
  +               session.setAttribute("j_password", pass);
  +         }
  +      }
   
         getNext().invoke(request, response);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785368">[jboss-cvs] jbosstest/src/main/org/jboss/test/web/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:49:38

  Modified:    src/main/org/jboss/test/web/test  Tag: Branch_4_0
                        FormAuthUnitTestCase.java
  Log:
  Test that a bad login is redirected to the errors.jsp and that the session j_exception is not null.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.3.2.5   +50 -4     jbosstest/src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: FormAuthUnitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java,v
  retrieving revision 1.3.2.4
  retrieving revision 1.3.2.5
  diff -u -b -r1.3.2.4 -r1.3.2.5
  --- FormAuthUnitTestCase.java	1 Jul 2005 20:31:15 -0000	1.3.2.4
  +++ FormAuthUnitTestCase.java	29 Jul 2005 18:49:38 -0000	1.3.2.5
  @@ -29,7 +29,7 @@
   /** Tests of form authentication
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.3.2.4 $
  + * @version $Revision: 1.3.2.5 $
    */
   public class FormAuthUnitTestCase extends JBossTestCase
   {
  @@ -56,6 +56,46 @@
         doSecureGet("form-auth/restricted/SecuredServlet");
      }
   
  +   /**
  +    * Test that a bad login is redirected to the errors.jsp and that the
  +    * session j_exception is not null.
  +    * 
  +    * @throws Exception
  +    */ 
  +   public void testFormAuthException() throws Exception
  +   {
  +      log.info("+++ testFormAuthException");
  +      GetMethod indexGet = new GetMethod(baseURLNoAuth+"form-auth/restricted/SecuredServlet");
  +      int responseCode = httpConn.executeMethod(indexGet);
  +      String body = indexGet.getResponseBodyAsString();
  +      assertTrue("Get OK("+responseCode+")", responseCode == HttpURLConnection.HTTP_OK);
  +      assertTrue("Redirected to login page", body.indexOf("j_security_check") &gt; 0 );
  +
  +      HttpState state = httpConn.getState();
  +      Cookie[] cookies = state.getCookies();
  +      String sessionID = null;
  +      for(int c = 0; c &lt; cookies.length; c ++)
  +      {
  +         Cookie k = cookies[c];
  +         if( k.getName().equalsIgnoreCase("JSESSIONID") )
  +            sessionID = k.getValue();
  +      }
  +      getLog().debug("Saw JSESSIONID="+sessionID);
  +
  +      // Submit the login form
  +      PostMethod formPost = new PostMethod(baseURLNoAuth+"form-auth/j_security_check");
  +      formPost.addRequestHeader("Referer", baseURLNoAuth+"form-auth/restricted/login.html");
  +      formPost.addParameter("j_username", "baduser");
  +      formPost.addParameter("j_password", "badpass");
  +      responseCode = httpConn.executeMethod(formPost.getHostConfiguration(),
  +         formPost, state);
  +      String response = formPost.getStatusText();
  +      log.debug("responseCode="+responseCode+", response="+response);
  +      Header jex = formPost.getResponseHeader("X-JException");
  +      assertNotNull("X-JException != null", jex);
  +      log.debug("Saw X-JException, "+jex);
  +   }
  +
      /** Test form authentication of a secured servlet and validate that there is
       * a SecurityAssociation setting Subject. 
       * 
  @@ -190,7 +230,12 @@
         assertTrue("jbossweb-form-auth has no cache principals", principals.size() == 0);
      }
   
  -   public void doSecureGetWithLogin(String path) throws Exception
  +   public PostMethod doSecureGetWithLogin(String path) throws Exception
  +   {
  +      return doSecureGetWithLogin(path, "jduke", "theduke");
  +   }
  +   public PostMethod doSecureGetWithLogin(String path, String username, String password)
  +      throws Exception
      {
         GetMethod indexGet = new GetMethod(baseURLNoAuth+path);
         int responseCode = httpConn.executeMethod(indexGet);
  @@ -212,8 +257,8 @@
         // Submit the login form
         PostMethod formPost = new PostMethod(baseURLNoAuth+"form-auth/j_security_check");
         formPost.addRequestHeader("Referer", baseURLNoAuth+"form-auth/restricted/login.html");
  -      formPost.addParameter("j_username", "jduke");
  -      formPost.addParameter("j_password", "theduke");
  +      formPost.addParameter("j_username", username);
  +      formPost.addParameter("j_password", password);
         responseCode = httpConn.executeMethod(formPost.getHostConfiguration(),
            formPost, state);
         String response = formPost.getStatusText();
  @@ -232,6 +277,7 @@
         body = war1Index.getResponseBodyAsString();
         if( body.indexOf("j_security_check") &gt; 0 )
            fail("get of "+indexURI+" redirected to login page");
  +      return formPost;
      }
      public void doSecureGet(String path) throws Exception
      {

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785370">[jboss-cvs] jbosstest/src/main/org/jboss/test/web/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:52</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:51:08

  Modified:    src/main/org/jboss/test/web/test  FormAuthUnitTestCase.java
  Log:
  Test that a bad login is redirected to the errors.jsp and that the session j_exception is not null.
  
  Revision  Changes    Path
  1.7       +50 -4     jbosstest/src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: FormAuthUnitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/web/test/FormAuthUnitTestCase.java,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- FormAuthUnitTestCase.java	25 Mar 2005 17:07:34 -0000	1.6
  +++ FormAuthUnitTestCase.java	29 Jul 2005 18:51:08 -0000	1.7
  @@ -1,5 +1,5 @@
   /*
  - * JBoss, the OpenSource J2EE webOS
  + * JBoss, Home of Professional Open Source
    *
    * Distributable under LGPL license.
    * See terms of license at gnu.org.
  @@ -29,11 +29,11 @@
   /** Tests of form authentication
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.6 $
  + * @version $Revision: 1.7 $
    */
   public class FormAuthUnitTestCase extends JBossTestCase
   {
  -   private String baseURLNoAuth = "<a href="http://localhost" target="_new">http://localhost</a>:" + Integer.getInteger("web.port", 8080) + "/"; 
  +   private String baseURLNoAuth = "http://" + getServerHost() + ":" + Integer.getInteger("web.port", 8080) + "/"; 
      private HttpClient httpConn = new HttpClient();
   
      public FormAuthUnitTestCase(String name)
  @@ -56,6 +56,46 @@
         doSecureGet("form-auth/restricted/SecuredServlet");
      }
   
  +   /**
  +    * Test that a bad login is redirected to the errors.jsp and that the
  +    * session j_exception is not null.
  +    * 
  +    * @throws Exception
  +    */ 
  +   public void testFormAuthException() throws Exception
  +   {
  +      log.info("+++ testFormAuthException");
  +      GetMethod indexGet = new GetMethod(baseURLNoAuth+"form-auth/restricted/SecuredServlet");
  +      int responseCode = httpConn.executeMethod(indexGet);
  +      String body = indexGet.getResponseBodyAsString();
  +      assertTrue("Get OK("+responseCode+")", responseCode == HttpURLConnection.HTTP_OK);
  +      assertTrue("Redirected to login page", body.indexOf("j_security_check") &gt; 0 );
  +
  +      HttpState state = httpConn.getState();
  +      Cookie[] cookies = state.getCookies();
  +      String sessionID = null;
  +      for(int c = 0; c &lt; cookies.length; c ++)
  +      {
  +         Cookie k = cookies[c];
  +         if( k.getName().equalsIgnoreCase("JSESSIONID") )
  +            sessionID = k.getValue();
  +      }
  +      getLog().debug("Saw JSESSIONID="+sessionID);
  +
  +      // Submit the login form
  +      PostMethod formPost = new PostMethod(baseURLNoAuth+"form-auth/j_security_check");
  +      formPost.addRequestHeader("Referer", baseURLNoAuth+"form-auth/restricted/login.html");
  +      formPost.addParameter("j_username", "baduser");
  +      formPost.addParameter("j_password", "badpass");
  +      responseCode = httpConn.executeMethod(formPost.getHostConfiguration(),
  +         formPost, state);
  +      String response = formPost.getStatusText();
  +      log.debug("responseCode="+responseCode+", response="+response);
  +      Header jex = formPost.getResponseHeader("X-JException");
  +      assertNotNull("X-JException != null", jex);
  +      log.debug("Saw X-JException, "+jex);
  +   }
  +
      /** Test form authentication of a secured servlet and validate that there is
       * a SecurityAssociation setting Subject. 
       * 
  @@ -190,7 +230,12 @@
         assertTrue("jbossweb-form-auth has no cache principals", principals.size() == 0);
      }
   
  -   public void doSecureGetWithLogin(String path) throws Exception
  +   public PostMethod doSecureGetWithLogin(String path) throws Exception
  +   {
  +      return doSecureGetWithLogin(path, "jduke", "theduke");
  +   }
  +   public PostMethod doSecureGetWithLogin(String path, String username, String password)
  +      throws Exception
      {
         GetMethod indexGet = new GetMethod(baseURLNoAuth+path);
         int responseCode = httpConn.executeMethod(indexGet);
  @@ -232,6 +277,7 @@
         body = war1Index.getResponseBodyAsString();
         if( body.indexOf("j_security_check") &gt; 0 )
            fail("get of "+indexURI+" redirected to login page");
  +      return formPost;
      }
      public void doSecureGet(String path) throws Exception
      {

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785363">[jboss-cvs] jbosstest/imports  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:48</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:46:56

  Modified:    imports  Tag: Branch_4_0 test-jars.xml
  Log:
  Include the WEB-INF/context.xml in the form-auth.war along with jsp pages
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.9.2.124 +5 -3      jbosstest/imports/test-jars.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: test-jars.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/imports/test-jars.xml,v
  retrieving revision 1.9.2.123
  retrieving revision 1.9.2.124
  diff -u -b -r1.9.2.123 -r1.9.2.124
  --- test-jars.xml	27 Jul 2005 12:53:43 -0000	1.9.2.123
  +++ test-jars.xml	29 Jul 2005 18:46:56 -0000	1.9.2.124
  @@ -1,5 +1,5 @@
   &lt;!-- Ant project fragment for the unit tests deployment jars
  -$Id: test-jars.xml,v 1.9.2.123 2005/07/27 12:53:43 tdiesler Exp $
  +$Id: test-jars.xml,v 1.9.2.124 2005/07/29 18:46:56 starksm Exp $
   --&gt;
   &lt;project name="test-jars"&gt;
     &lt;!--
  @@ -4884,6 +4884,7 @@
       &lt;war destfile="${build.lib}/form-auth.war"
         webxml="${build.resources}/web/form-auth/form-auth-web.xml"&gt;
         &lt;webinf dir="${build.resources}/web/form-auth"&gt;
  +         &lt;include name="context.xml"/&gt;
           &lt;include name="jboss-web.xml"/&gt;
         &lt;/webinf&gt;
         &lt;classes dir="${build.classes}"&gt;
  @@ -4893,6 +4894,7 @@
         &lt;/classes&gt;
         &lt;fileset dir="${build.resources}/web/form-auth"&gt;
           &lt;include name="**/*.html"/&gt;
  +         &lt;include name="**/*.jsp"/&gt;
         &lt;/fileset&gt;
       &lt;/war&gt;
       &lt;zip destfile="${build.lib}/form-auth.ear"&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785366">[jboss-cvs] jbosstest/imports  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:49</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:48:29

  Modified:    imports  test-jars.xml
  Log:
  Include the WEB-INF/context.xml in the form-auth.war along with jsp pages
  
  Revision  Changes    Path
  1.84      +3 -1      jbosstest/imports/test-jars.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: test-jars.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/imports/test-jars.xml,v
  retrieving revision 1.83
  retrieving revision 1.84
  diff -u -b -r1.83 -r1.84
  --- test-jars.xml	27 Jul 2005 20:34:04 -0000	1.83
  +++ test-jars.xml	29 Jul 2005 18:48:29 -0000	1.84
  @@ -1,5 +1,5 @@
   &lt;!-- Ant project fragment for the unit tests deployment jars
  -$Id: test-jars.xml,v 1.83 2005/07/27 20:34:04 tdiesler Exp $
  +$Id: test-jars.xml,v 1.84 2005/07/29 18:48:29 starksm Exp $
   --&gt;
   &lt;project name="test-jars"&gt;
      &lt;!--
  @@ -4760,6 +4760,7 @@
         &lt;war destfile="${build.lib}/form-auth.war"
            webxml="${build.resources}/web/form-auth/form-auth-web.xml"&gt;
            &lt;webinf dir="${build.resources}/web/form-auth"&gt;
  +            &lt;include name="context.xml"/&gt;
               &lt;include name="jboss-web.xml"/&gt;
            &lt;/webinf&gt;
            &lt;classes dir="${build.classes}"&gt;
  @@ -4769,6 +4770,7 @@
            &lt;/classes&gt;
            &lt;fileset dir="${build.resources}/web/form-auth"&gt;
               &lt;include name="**/*.html"/&gt;
  +            &lt;include name="**/*.jsp"/&gt;
            &lt;/fileset&gt;
         &lt;/war&gt;
         &lt;zip destfile="${build.lib}/form-auth.ear"&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785353">[jboss-cvs] jbosstest/src/resources/web/form-auth/restricted  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Scott Stark &lt;scott.stark@jb...&gt; -	2005-07-29 18:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: starksm 
  Date: 05/07/29 14:43:32

  Added:       src/resources/web/form-auth/restricted  errors.jsp
  Log:
  An erorr page that adds a X-JException custom reply header if the session contains a j_exception value.
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 18:43:32;  author: starksm;  state: Exp;jbosstest/src/resources/web/form-auth/restricted/errors.jsp
  
  Index: errors.jsp
  ===================================================================
  &lt;%@ page import="java.util.Enumeration,
                   java.io.StringWriter,
                   java.io.PrintWriter"%&gt;
  &lt;%@ page isErrorPage="true" %&gt;
  
  &lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;Error Page&lt;/title&gt;
  &lt;/head&gt;
  
  &lt;h1&gt;Request Attributes&lt;/h1&gt;
  &lt;ul&gt;
  &lt;%
     Enumeration names = request.getAttributeNames();
     while( names.hasMoreElements() )
     {
        String name = (String) names.nextElement();
        Object value = request.getAttribute(name);
        out.println("&lt;li&gt;Name:&lt;b&gt;"+name+"&lt;/b&gt; = "+value+"&lt;/li&gt;");
     }
  %&gt;
  &lt;/ul&gt;
  &lt;h1&gt;Session Attributes&lt;/h1&gt;
  &lt;ul&gt;
  &lt;%
     names = session.getAttributeNames();
     while( names.hasMoreElements() )
     {
        String name = (String) names.nextElement();
        Object value = session.getAttribute(name);
        out.println("&lt;li&gt;Name:&lt;b&gt;"+name+"&lt;/b&gt; = "+value+"&lt;/li&gt;");
     }
     // Add an X-JException header if we see the j_exception attribute
     Object j_exception = session.getAttribute("j_exception");
     if( j_exception != null )
     {
        response.setHeader("X-JException", j_exception.getClass().getName());
     }
  %&gt;
  &lt;/ul&gt;
  &lt;h1&gt;Caller Trace&lt;/h1&gt;
  &lt;pre&gt;
  &lt;%
     Throwable t = new Throwable();
     PrintWriter pw = new PrintWriter(out);
     t.printStackTrace(pw);
     pw.flush();
  %&gt;
  &lt;/pre&gt;
  &lt;/html&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785350">[jboss-cvs] JBossCache/docs/faq/en  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 18:32</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 14:31:25

  Modified:    docs/faq/en  master.xml
  Log:
  UPD
  
  Revision  Changes    Path
  1.5       +38 -0     JBossCache/docs/faq/en/master.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: master.xml
  ===================================================================
  RCS file: /cvsroot/jboss/JBossCache/docs/faq/en/master.xml,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- master.xml	30 May 2005 16:55:12 -0000	1.4
  +++ master.xml	29 Jul 2005 18:31:25 -0000	1.5
  @@ -949,6 +949,44 @@
   
         &lt;qandaentry&gt;
           &lt;question&gt;
  +           &lt;para&gt;What is the propery way of assigning two different keys with Collection class object?&lt;/para&gt;
  +         &lt;/question&gt;
  +
  +         &lt;answer&gt;
  +           &lt;para&gt;Let's say you want to assign a &lt;literal&gt;List&lt;/literal&gt; object under two different names, you
  +              will need to use the class proxy to insert the second time to ensure both are managed by the cache.
  + Here is the code snippet.
  + &lt;/para&gt;
  +
  +&lt;programlisting&gt;ArrayList list = new ArrayList();
  +list.add("first");
  +
  +cache.putObject("/list", list); // Put the list under the aop cache
  +
  +ArrayList myList = (List)cache.getObject("/list"); // we are getting a dynamic proxy instead
  +myList.add("second");  // it works now
  +
  +cache.putObject("/list_alias", myList); // Note you will need to use the proxy here!!
  +myList.remove("second");&lt;/programlisting&gt;
  +         &lt;/answer&gt;
  +       &lt;/qandaentry&gt;
  +
  +       &lt;qandaentry&gt;
  +         &lt;question&gt;
  +           &lt;para&gt;OK, so I know I am supposed to use proxy when manipulating the Collection classes once
  + they are managed by the cache. But what happens to Pojos that share the Collection objects, e.g.,
  +           a &lt;literal&gt;List&lt;/literal&gt; instance that is shared by 2 Pojos?&lt;/para&gt;
  +         &lt;/question&gt;
  +
  +         &lt;answer&gt;
  +           &lt;para&gt;Pojos that share Collection instance references will be handled by the cache automatically. That
  + is, when you ask the Cache to manage it, the Cache will dynamically swap out the regular Collection referecens with
  + the dynamic proxy ones. As a result, it is transparent to the users.&lt;/para&gt;
  +         &lt;/answer&gt;
  +       &lt;/qandaentry&gt;
  +
  +      &lt;qandaentry&gt;
  +        &lt;question&gt;
             &lt;para&gt;What happens when my "aspectized" POJO has field members that
             are of Collection class ?&lt;/para&gt;
           &lt;/question&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785348">[jboss-cvs] jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/unit  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:45

  Added:       src/test/org/jboss/ejb3/test/standalone/jms/unit 
                        MDBUnitTestCase.java
  Log:
  Embeddable MDB3.  Works with a remote JBoss server instance.
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 17:44:45;  author: bill;  state: Exp;jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/unit/MDBUnitTestCase.java
  
  Index: MDBUnitTestCase.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   * 
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.test.standalone.jms.unit;
  
  import java.util.Hashtable;
  import javax.jms.Queue;
  import javax.jms.QueueConnection;
  import javax.jms.QueueConnectionFactory;
  import javax.jms.QueueSender;
  import javax.jms.QueueSession;
  import javax.jms.TextMessage;
  import javax.naming.InitialContext;
  import org.jboss.ejb3.embedded.EJB3StandaloneBootstrap;
  import org.jboss.ejb3.embedded.EJB3StandaloneDeployer;
  import org.jboss.ejb3.test.standalone.jms.TestStatus;
  import org.jboss.test.JBossTestCase;
  import org.apache.log4j.BasicConfigurator;
  import org.apache.log4j.PatternLayout;
  import org.apache.log4j.ConsoleAppender;
  import org.apache.log4j.FileAppender;
  import junit.framework.Test;
  
  /**
   * POJO Environment tests
   * 
   * @author &lt;a href="bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class MDBUnitTestCase extends JBossTestCase
  {
     private static boolean booted = false;
  
     public MDBUnitTestCase(String name)
     {
        super(name);
     }
  
     protected void setUp() throws Exception
     {
        // set bad properties to make sure that we're injecting InitialContext correct
  //      System.setProperty("java.naming.factory.initial", "ERROR");
  //      System.setProperty("java.naming.factory.url.pkgs", "ERROR");
  
        super.setUp();
        BasicConfigurator.resetConfiguration();
        PatternLayout layout = new PatternLayout("%r %-5p [%c{1}] %m%n");
        ConsoleAppender appender = new ConsoleAppender(layout);
        BasicConfigurator.configure(appender);
        String file = System.getProperty("org.jboss.test.logfile");
        if (file != null)
        {
           FileAppender fileAppender = new FileAppender(layout, file);
           BasicConfigurator.configure(fileAppender);
        }
        long start = System.currentTimeMillis();
        log.info("Starting");
        try
        {
           if (!booted)
           {
              booted = true;
              EJB3StandaloneBootstrap.boot("");
           }
        }
        catch (Exception e)
        {
           throw e;
        }
        catch (Throwable t)
        {
           throw new RuntimeException(t);
        }
        log.info("setup took: " + (System.currentTimeMillis() - start));
     }
  
     protected InitialContext getLocalInitialContext() throws Exception
     {
        return new InitialContext(getLocalInitialContextProperties());
     }
  
     protected Hashtable getLocalInitialContextProperties()
     {
        return (Hashtable)EJB3StandaloneBootstrap.getKernel().getRegistry().getEntry("InitialContextProperties").getTarget();
     }
  
     public void testQueue() throws Throwable
     {
        InitialContext ctx = getLocalInitialContext();
  
        EJB3StandaloneDeployer deployer = new EJB3StandaloneDeployer();
        deployer.setJndiProperties(getLocalInitialContextProperties());
        deployer.getArchivesByResource().add("marker.txt");
  
        completeTest(deployer, ctx);
  
     }
  
     private void completeTest(EJB3StandaloneDeployer deployer, InitialContext ctx)
             throws Exception
     {
        deployer.create();
        deployer.start();
  
        executeEJBs(ctx);
  
        deployer.stop();
        deployer.destroy();
     }
  
     private void executeEJBs(InitialContext ctx)
             throws Exception
     {
        TestStatus status = (TestStatus) getLocalInitialContext().lookup(TestStatus.class.getName());
        status.clear();
        QueueConnection cnn = null;
        QueueSender sender = null;
        QueueSession session = null;
  
        Queue queue = (Queue) getInitialContext().lookup("queue/mdbtest");
        QueueConnectionFactory factory = (QueueConnectionFactory) getInitialContext().lookup("ConnectionFactory");
        cnn = factory.createQueueConnection();
        session = cnn.createQueueSession(false, QueueSession.AUTO_ACKNOWLEDGE);
  
        TextMessage msg = session.createTextMessage("Hello World");
  
        sender = session.createSender(queue);
        sender.send(msg);
  
        Thread.sleep(1000);
        assertTrue(status.queueFired());
     }
  
     protected void configureLoggingAfterBootstrap()
     {
        //enableTrace("org.jboss.tm");
     }
  
     public static Test suite() throws Exception
     {
        return getDeploySetup(MDBUnitTestCase.class, "mdbtest-service.xml");
     }
  }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785342">[jboss-cvs] jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:45

  Added:       src/test/org/jboss/ejb3/test/standalone/jms   
                        QueueTestMDB.java TestStatus.java
                        TestStatusBean.java
  Log:
  Embeddable MDB3.  Works with a remote JBoss server instance.
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 17:44:45;  author: bill;  state: Exp;jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/QueueTestMDB.java
  
  Index: QueueTestMDB.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.test.standalone.jms;
  
  import javax.ejb.ActivationConfigProperty;
  import javax.ejb.MessageDriven;
  import javax.jms.Message;
  import javax.jms.MessageListener;
  import org.jboss.logging.Logger;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  @MessageDriven(activateConfig =
          {
          @ActivationConfigProperty(propertyName="destinationType", propertyValue="javax.jms.Queue"),
          @ActivationConfigProperty(propertyName="destination", propertyValue="queue/mdbtest")
          })
  public class QueueTestMDB implements MessageListener
  {
     private static final Logger log = Logger.getLogger(QueueTestMDB.class);
  
  
  
     public void onMessage(Message recvMsg)
     {
        System.out.println("QueueTestMDB onMessage");
        TestStatusBean.queueRan = true;
     }
  
  }
  
  
  
  1.1      date: 2005/07/29 17:44:45;  author: bill;  state: Exp;jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/TestStatus.java
  
  Index: TestStatus.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.test.standalone.jms;
  
  import javax.ejb.Remote;
  
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  @Remote
  public interface TestStatus
  {
     void clear();
  
     boolean queueFired();
  
     boolean topicFired();
  
     boolean interceptedTopic();
  
     boolean interceptedQueue();
  
     boolean postConstruct();
  
     boolean preDestroy();
  }
  
  
  
  1.1      date: 2005/07/29 17:44:45;  author: bill;  state: Exp;jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/TestStatusBean.java
  
  Index: TestStatusBean.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jboss.ejb3.test.standalone.jms;
  
  import javax.ejb.Stateless;
  
  /**
   * Comment
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  @Stateless
  public class TestStatusBean implements TestStatus
  {
     public static boolean queueRan = false;
     public static boolean topicRan = false;
     public static boolean interceptedTopic = false;
     public static boolean interceptedQueue = false;
     public static boolean postConstruct = false;
     public static boolean preDestroy = false;
  
     public void clear()
     {
        queueRan = false;
        topicRan = false;
        interceptedTopic = false;
        interceptedQueue = false;
        postConstruct = false;
        preDestroy = false;
     }
  
     public boolean queueFired()
     {
        return queueRan;
     }
  
     public boolean topicFired()
     {
        return topicRan;
     }
  
     public boolean interceptedTopic()
     {
        return interceptedTopic;
     }
  
     public boolean interceptedQueue()
     {
        return interceptedQueue;
     }
  
     public boolean postConstruct()
     {
        return postConstruct;
     }
  
     public boolean preDestroy()
     {
        return preDestroy;
     }
  }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785336">[jboss-cvs] jboss-ejb3/src/resources/standalone  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:45

  Modified:    src/resources/standalone  bootstrap.xml
  Log:
  Embeddable MDB3.  Works with a remote JBoss server instance.
  
  Revision  Changes    Path
  1.5       +50 -1     jboss-ejb3/src/resources/standalone/bootstrap.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: bootstrap.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-ejb3/src/resources/standalone/bootstrap.xml,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- bootstrap.xml	26 Jul 2005 20:57:02 -0000	1.4
  +++ bootstrap.xml	29 Jul 2005 17:44:45 -0000	1.5
  @@ -11,7 +11,7 @@
               &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
                  &lt;entry&gt;
                     &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
  -                  &lt;value&gt;org.jnp.interfaces.NamingContextFactory&lt;/value&gt;
  +                  &lt;value&gt;org.jnp.interfaces.LocalOnlyContextFactory&lt;/value&gt;
                  &lt;/entry&gt;
                  &lt;entry&gt;
                      &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
  @@ -28,6 +28,14 @@
   
      &lt;bean name="XidFactory" class="org.jboss.tm.XidFactoryImpl"/&gt;
   
  +   &lt;bean name="XidFactoryMBean" class="org.jboss.ejb3.embedded.XidFactoryMBean"&gt;
  +      &lt;constructor&gt;
  +         &lt;parameter class="org.jboss.tm.XidFactoryBase"&gt;
  +            &lt;inject bean="XidFactory"/&gt;
  +         &lt;/parameter&gt;
  +      &lt;/constructor&gt;
  +   &lt;/bean&gt;
  +
      &lt;bean name="TransactionManagerInitializer" class="org.jboss.tm.TransactionManagerInitializer"&gt;
         &lt;property name="xidFactory"&gt;&lt;inject bean="XidFactory"/&gt;&lt;/property&gt;
         &lt;property name="initialContextProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
  @@ -42,6 +50,47 @@
         &lt;property name="transactionManager"&gt;&lt;inject bean="TransactionManager"/&gt;&lt;/property&gt;
      &lt;/bean&gt;
   
  +   &lt;bean name="RemoteJBossJMSProviderAdapter" class="org.jboss.jms.jndi.JNDIProviderAdapter"&gt;
  +      &lt;property name="factoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="queueFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="topicFactoryRef"&gt;&lt;value&gt;XAConnectionFactory&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="properties" class="java.util.Properties"&gt;
  +               &lt;map keyClass="java.lang.String" valueClass="java.lang.String"&gt;
  +                  &lt;entry&gt;
  +                     &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
  +                     &lt;value&gt;org.jnp.interfaces.NamingContextFactory&lt;/value&gt;
  +                  &lt;/entry&gt;
  +                  &lt;entry&gt;
  +                      &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
  +                      &lt;value&gt;org.jboss.naming:org.jnp.interfaces&lt;/value&gt;
  +                  &lt;/entry&gt;
  +                  &lt;entry&gt;
  +                      &lt;key&gt;java.naming.provider.url&lt;/key&gt;
  +                      &lt;value&gt;<a href="jnp://localhost:1099&lt;/value" target="_new">jnp://localhost:1099&lt;/value</a>&gt;
  +                  &lt;/entry&gt;
  +               &lt;/map&gt;
  +      &lt;/property&gt;
  +   &lt;/bean&gt;
  +
  +   &lt;bean name="b1" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
  +      &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
  +      &lt;property name="target"&gt;&lt;inject bean="RemoteJBossJMSProviderAdapter"/&gt;&lt;/property&gt;
  +      &lt;property name="bindTo"&gt;&lt;value&gt;java:/DefaultJMSProvider&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="serializable"&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;
  +   &lt;/bean&gt;
  +
  +   &lt;bean name="JmsServerSessionPool" class="org.jboss.jms.asf.StdServerSessionPoolFactory"&gt;
  +      &lt;property name="name"&gt;&lt;value&gt;StdJMSPool&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="xidFactory"&gt;&lt;inject bean="XidFactoryMBean"/&gt;&lt;/property&gt;
  +   &lt;/bean&gt;
  +
  +   &lt;bean name="b2" class="org.jboss.ejb3.embedded.JndiBinder"&gt;
  +      &lt;property name="jndiProperties"&gt;&lt;inject bean="InitialContextProperties"/&gt;&lt;/property&gt;
  +      &lt;property name="target"&gt;&lt;inject bean="JmsServerSessionPool"/&gt;&lt;/property&gt;
  +      &lt;property name="bindTo"&gt;&lt;value&gt;java:/StdJMSPool&lt;/value&gt;&lt;/property&gt;
  +      &lt;property name="serializable"&gt;&lt;value&gt;false&lt;/value&gt;&lt;/property&gt;
  +   &lt;/bean&gt;
  +
      &lt;bean name="DefaultDS" class="org.jboss.resource.adapter.jdbc.local.LocalTxDataSource"&gt;
         &lt;property name="driverClass"&gt;&lt;value&gt;org.hsqldb.jdbcDriver&lt;/value&gt;&lt;/property&gt;
         &lt;property name="connectionURL"&gt;&lt;value&gt;jdbc:hsqldb:.&lt;/value&gt;&lt;/property&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785333">[jboss-cvs] jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/unit - New directory ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:26

  Log:
  Directory /cvsroot/jboss/jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms/unit added to the repository

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785331">[jboss-cvs] jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms - New directory ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:44:24

  Log:
  Directory /cvsroot/jboss/jboss-ejb3/src/test/org/jboss/ejb3/test/standalone/jms added to the repository

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785330">[jboss-cvs] jnp/src/main/org/jnp/interfaces  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill Burke &lt;bill@jb...&gt; -	2005-07-29 17:42</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bill    
  Date: 05/07/29 13:41:40

  Added:       src/main/org/jnp/interfaces  LocalOnlyContextFactory.java
  Log:
  You cannot override provider URL if it is in your system environment or in a jndi.properties file.  Want  to be able to have an embeddable MDB3 that hooks to a remote JBoss server.
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 17:41:40;  author: bill;  state: Exp;jnp/src/main/org/jnp/interfaces/LocalOnlyContextFactory.java
  
  Index: LocalOnlyContextFactory.java
  ===================================================================
  /*
   * JBoss, the OpenSource J2EE webOS
   *
   * Distributable under LGPL license.
   * See terms of license at gnu.org.
   */
  package org.jnp.interfaces;
  
  import java.util.Hashtable;
  import javax.naming.Context;
  import javax.naming.Name;
  import javax.naming.NamingException;
  import javax.naming.Reference;
  import javax.naming.spi.InitialContextFactory;
  import javax.naming.spi.ObjectFactory;
  
  /**
   * Only use locally available naming server
   *
   * @author &lt;a href="mailto:bill@... Burke&lt;/a&gt;
   * @version $Revision: 1.1 $
   */
  public class LocalOnlyContextFactory
          implements InitialContextFactory, ObjectFactory
       {
           // InitialContextFactory implementation --------------------------
           public Context getInitialContext(Hashtable env)
             throws NamingException
           {
               if (NamingContext.localServer == null) throw new NamingException("Local server is not initialized");
               return new NamingContext(env, null, NamingContext.localServer);
           }
  
          // ObjectFactory implementation ----------------------------------
          public Object getObjectInstance(Object obj,
                                          Name name,
                                          Context nameCtx,
                                          Hashtable environment)
                                throws Exception
          {
             Context ctx = getInitialContext(environment);
             Reference ref = (Reference)obj;
             return ctx.lookup((String)ref.get("URL").getContent());
          }
  
       }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785329">[jboss-cvs] JBossCache/src/org/jboss/cache/aop   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Ben Wang &lt;bwang@jb...&gt; -	2005-07-29 16:52</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bwang   
  Date: 05/07/29 12:51:41

  Modified:    src/org/jboss/cache/aop   CachedListInterceptor.java
                        CachedSetInterceptor.java
  Log:
  Rollbacked size impl and defer it to next release
  
  Revision  Changes    Path
  1.6       +10 -20    JBossCache/src/org/jboss/cache/aop/CachedListInterceptor.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CachedListInterceptor.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossCache/src/org/jboss/cache/aop/CachedListInterceptor.java,v
  retrieving revision 1.5
  retrieving revision 1.6
  diff -u -b -r1.5 -r1.6
  --- CachedListInterceptor.java	29 Jul 2005 06:20:06 -0000	1.5
  +++ CachedListInterceptor.java	29 Jul 2005 16:51:41 -0000	1.6
  @@ -31,14 +31,11 @@
   
      protected TreeCacheAop cache;
      protected Map methodMap;
  -   // Track size
  -   protected int size_;
   
      public CachedListInterceptor(TreeCacheAop cache, Fqn fqn, Class clazz)
      {
         this.cache = cache;
         this.fqn = fqn;
  -      size_ = 0;
         methodMap = CollectionInterceptorUtil.getMethodMap(clazz);
      }
   
  @@ -91,19 +88,21 @@
   
      public int size()
      {
  -      return size_;
  +      Node node = getNode();
  +      if(node == null) {
  +         return 0;
  +      }
  +
  +      Map children = node.getChildren();
  +      return children == null ? 0 : children.size();
      }
   
      public void clear()
      {
         // TODO Can use optimization here
  -      int size = size();
  -      for(int i=size-1; i &gt;= 0; i--) {
  +      for(int i=size()-1; i &gt;= 0; i--) {
            remove(i);
         }
  -
  -      if(size_ != 0)
  -         throw new IllegalStateException("CachedListInterceptor.clear(): size of List is not 0 after clear but: " +size_);
      }
   
      public boolean isEmpty()
  @@ -154,8 +153,6 @@
         } catch (Exception e) {
            throw new NestedRuntimeException(e);
         }
  -
  -      size_++;
      }
   
      public int indexOf(Object o)
  @@ -191,26 +188,21 @@
   
      public Object remove(int index)
      {
  -      Object result = null;
         try {
            checkIndex(index);
            // Object result = cache.removeObject(((Fqn) fqn.clone()).add(new Integer(index)));
  +         Object result = cache.removeObject(new Fqn(fqn, Integer.toString(index)));
            int size = size();
  -         result = cache.removeObject(new Fqn(fqn, Integer.toString(index)));
            for (int i = index; i &lt; size; i++) {
               // Object obj = cache.removeObject(((Fqn) fqn.clone()).add(new Integer(i + 1)));
               Object obj = cache.removeObject(new Fqn(fqn, Integer.toString(i + 1)));
               // cache.putObject(((Fqn) fqn.clone()).add(new Integer(i)), obj);
               cache.putObject(new Fqn(fqn, Integer.toString(i)), obj);
            }
  +         return result;
         } catch (Exception e) {
            throw new NestedRuntimeException(e);
         }
  -
  -      if(size_-- == 0)
  -         throw new IllegalStateException("CacheListInterceptor.remove(): try to remove but size is 0 already.");
  -
  -      return result;
      }
   
      public boolean remove(Object o)
  @@ -339,8 +331,6 @@
               } catch (Exception e) {
                  throw new NestedRuntimeException(e);
               }
  -
  -            size_--;
            }
         };
      }
  
  
  
  1.6       +8 -11     JBossCache/src/org/jboss/cache/aop/CachedSetInterceptor.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CachedSetInterceptor.java
  ===================================================================
  RCS file: /cvsroot/jboss/JBossCache/src/org/jboss/cache/aop/CachedSetInterceptor.java,v
  retrieving revision 1.5
  retrieving revision 1.6
  diff -u -b -r1.5 -r1.6
  --- CachedSetInterceptor.java	29 Jul 2005 06:20:06 -0000	1.5
  +++ CachedSetInterceptor.java	29 Jul 2005 16:51:41 -0000	1.6
  @@ -29,7 +29,6 @@
   
      protected TreeCacheAop cache;
      protected Map methodMap;
  -   protected int size_;
   
      protected static Map managedMethods =
            CollectionInterceptorUtil.getManagedMethods(Set.class);
  @@ -38,7 +37,6 @@
      {
         this.cache = cache;
         this.fqn = fqn;
  -      this.size_ = 0;
         methodMap = CollectionInterceptorUtil.getMethodMap(clazz);
      }
   
  @@ -67,7 +65,13 @@
      // implementation of the java.util.Set interface
      public int size()
      {
  -      return size_;
  +      Node node = getNode();
  +      if(node == null) {
  +         return 0;
  +      }
  +
  +      Map children = node.getChildren();
  +      return children == null ? 0 : children.size();
      }
   
      public void clear()
  @@ -75,9 +79,6 @@
         for(Iterator i = iterator(); i.hasNext(); ) {
            remove(i.next());
         }
  -
  -      if(size_ != 0)
  -         throw new IllegalStateException("CachedSetInterceptor.clear(): size of Set is not 0 after clear but: " +size_);
      }
   
      public boolean isEmpty()
  @@ -135,8 +136,6 @@
               } catch (Exception e) {
                  throw new NestedRuntimeException(e);
               }
  -
  -            size_--;
            }
         };
      }
  @@ -153,12 +152,10 @@
         try {
            // cache.putObject(((Fqn) fqn.clone()).add(Integer.toString(size())), o);
            cache.putObject(new Fqn(fqn, Integer.toString(size())), o);
  +         return true;
         } catch (Exception e) {
            throw new NestedRuntimeException(e);
         }
  -
  -      size_++;
  -      return true;
      }
   
      public boolean contains(Object o)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785326">[jboss-cvs] jboss-ejb3/src/resources/schema    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill DeCoste &lt;bdecoste@jb...&gt; -	2005-07-29 16:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bdecoste
  Date: 05/07/29 12:35:54

  Added:       src/resources/schema    sun-ejb-jar_3_0.xsd ejb-jar_3_0a.xsd
                        jboss_5_0.dtd
  Log:
  EJB3 schemas and DTDs
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 16:35:54;  author: bdecoste;  state: Exp;jboss-ejb3/src/resources/schema/sun-ejb-jar_3_0.xsd
  
  Index: sun-ejb-jar_3_0.xsd
  ===================================================================
  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;xsd:schema xmlns="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>"
  	    targetNamespace="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	    xmlns:j2ee="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	    xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>"
  	    elementFormDefault="qualified"
  	    attributeFormDefault="unqualified"
  	    version="3.0"&gt;
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
        @(#)ejb-jar_3_0.xsds	1.44 06/07/05
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
  
  	This is the XML Schema for the EJB 3.0 deployment descriptor.
  	The deployment descriptor must be named "META-INF/ejb-jar.xml" in
  	the EJB's jar file.  All EJB deployment descriptors must indicate
  	the ejb-jar schema by using the J2EE namespace:
  
  	<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>
  
  	and by indicating the version of the schema by
  	using the version element as shown below:
  
  	    &lt;ejb-jar xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	      xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
  	      xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>
  		  <a href="http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd" target="_new">http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd</a>"
  	      version="3.0"&gt;
  	      ...
  	    &lt;/ejb-jar&gt;
  
  	The instance documents may indicate the published version of
  	the schema using the xsi:schemaLocation attribute for the
  	J2EE namespace with the following location:
  
  	<a href="http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd" target="_new">http://java.sun.com/xml/ns/j2ee/ejb-jar_3_0.xsd</a>
  
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
  
        The following conventions apply to all J2EE
        deployment descriptor elements unless indicated otherwise.
  
        - In elements that specify a pathname to a file within the
  	same JAR file, relative filenames (i.e., those not
  	starting with "/") are considered relative to the root of
  	the JAR file's namespace.  Absolute filenames (i.e., those
  	starting with "/") also specify names in the root of the
  	JAR file's namespace.  In general, relative names are
  	preferred.  The exception is .war files where absolute
  	names are preferred for consistency with the Servlet API.
  
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:include schemaLocation="j2ee_5_0.xsd"/&gt;
  
  
  &lt;!-- **************************************************** --&gt;
  
  
    &lt;xsd:element name="ejb-jar" type="j2ee:ejb-jarType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	This is the root of the ejb-jar deployment descriptor.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:key name="ejb-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The ejb-name element contains the name of an enterprise
  	  bean. The name must be unique within the ejb-jar file.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:enterprise-beans/*"/&gt;
        &lt;xsd:field    xpath="j2ee:ejb-name"/&gt;
      &lt;/xsd:key&gt;
  
      &lt;xsd:keyref name="ejb-name-references"
  		refer="j2ee:ejb-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The keyref indicates the references from
  	  relationship-role-source must be to a specific ejb-name
  	  defined within the scope of enterprise-beans element.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector
  	   xpath=".//j2ee:ejb-relationship-role/j2ee:relationship-role-source"/&gt;
        &lt;xsd:field
  	   xpath="j2ee:ejb-name"/&gt;
      &lt;/xsd:keyref&gt;
  
      &lt;xsd:key name="role-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  A role-name-key is specified to allow the references
  	  from the security-role-refs.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:assembly-descriptor/j2ee:security-role"/&gt;
        &lt;xsd:field    xpath="j2ee:role-name"/&gt;
      &lt;/xsd:key&gt;
  
      &lt;xsd:keyref name="role-name-references"
  		refer="j2ee:role-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The keyref indicates the references from
  	  security-role-ref to a specified role-name.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:enterprise-beans/*/j2ee:security-role-ref"/&gt;
        &lt;xsd:field    xpath="j2ee:role-link"/&gt;
      &lt;/xsd:keyref&gt;
    &lt;/xsd:element&gt;
  
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="activation-config-propertyType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The activation-config-propertyType contains a name/value
  	configuration property pair for a message-driven bean.
  
  	The properties that are recognized for a particular
  	message-driven bean are determined by the messaging type.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="activation-config-property-name"
  		   type="j2ee:xsdStringType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The activation-config-property-name element contains
  	    the name for an activation configuration property of
  	    a message-driven bean.
  
  	    For JMS message-driven beans, the following property
  	    names are recognized: acknowledgeMode,
  	    messageSelector, destinationType, subscriptionDurability
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="activation-config-property-value"
  		   type="j2ee:xsdStringType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The activation-config-property-value element
  	    contains the value for an activation configuration
  	    property of a message-driven bean.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="activation-configType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The activation-configType defines information about the
  	expected configuration properties of the message-driven bean
  	in its operational environment. This may include information
  	about message acknowledgement, message selector, expected
  	destination type, etc.
  
  	The configuration information is expressed in terms of
  	name/value configuration properties.
  
  	The properties that are recognized for a particular
  	message-driven bean are determined by the messaging type.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="activation-config-property"
  		   type="j2ee:activation-config-propertyType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="application-exceptionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
          The application-exceptionType declares an application
          exception. The declaration consists of:
  
              - the exception class. When the container receives
                an exception of this type, it is required to
                forward this exception as an applcation exception
                to the client regardless of whether it is a checked
                or unchecked exception.
              - an optional rollback element. If this element is
                present, the container must rollback the current
                transaction before forwarding the exception to the
                client.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="exception-class"
  		   type="j2ee:fully-qualified-classType"/&gt;
        &lt;xsd:element name="rollback"
                     type="j2ee:emptyType"
                     minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="assembly-descriptorType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The assembly-descriptorType defines
  	application-assembly information.
  
  	The application-assembly information consists of the
  	following parts: the definition of security roles, the
  	definition of method permissions, the definition of
  	transaction attributes for enterprise beans with
  	container-managed transaction demarcation and a list of
  	methods to be excluded from being invoked.
  
  	All the parts are optional in the sense that they are
  	omitted if the lists represented by them are empty.
  
  	Providing an assembly-descriptor in the deployment
  	descriptor is optional for the ejb-jar file producer.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="security-role"
  		   type="j2ee:security-roleType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method-permission"
  		   type="j2ee:method-permissionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="container-transaction"
  		   type="j2ee:container-transactionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="message-destination"
  		   type="j2ee:message-destinationType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="exclude-list"
  		   type="j2ee:exclude-listType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="application-exception"
                     type="j2ee:application-exceptionType"
                     minOccurs="0"
                     maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="callback-listenerType"&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="callback-listener-class"
  		   type="j2ee:fully-qualified-classType"/&gt;
        &lt;xsd:element name="post-construct-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-destroy-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="post-activate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-passivate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmp-fieldType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmp-fieldType describes a container-managed field. The
  	cmp-fieldType contains an optional description of the field,
  	and the name of the field.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="field-name"
  		   type="j2ee:java-identifierType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The field-name element specifies the name of a
  	    container managed field.
  
  	    The name of the cmp-field of an entity bean with
  	    cmp-version 2.x must begin with a lowercase
  	    letter. This field is accessed by methods whose
  	    names consists of the name of the field specified by
  	    field-name in which the first letter is uppercased,
  	    prefixed by "get" or "set".
  
  	    The name of the cmp-field of an entity bean with
  	    cmp-version 1.x must denote a public field of the
  	    enterprise bean class or one of its superclasses.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmp-versionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmp-versionType specifies the version of an entity bean
  	with container-managed persistence. It is used by
  	cmp-version elements.
  
  	The value must be one of the two following:
  
  	    1.x
  	    2.x
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="1.x"/&gt;
  	&lt;xsd:enumeration value="2.x"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmr-field-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmr-field-type element specifies the class of a
  	collection-valued logical relationship field in the entity
  	bean class. The value of an element using cmr-field-typeType
  	must be either: java.util.Collection or java.util.Set.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="java.util.Collection"/&gt;
  	&lt;xsd:enumeration value="java.util.Set"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmr-fieldType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmr-fieldType describes the bean provider's view of
  	a relationship. It consists of an optional description, and
  	the name and the class type of a field in the source of a
  	role of a relationship. The cmr-field-name element
  	corresponds to the name used for the get and set accessor
  	methods for the relationship. The cmr-field-type element is
  	used only for collection-valued cmr-fields. It specifies the
  	type of the collection that is used.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="cmr-field-name"
  		   type="j2ee:string"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The cmr-field-name element specifies the name of a
  	    logical relationship field in the entity bean
  	    class. The name of the cmr-field must begin with a
  	    lowercase letter. This field is accessed by methods
  	    whose names consist of the name of the field
  	    specified by cmr-field-name in which the first
  	    letter is uppercased, prefixed by "get" or "set".
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmr-field-type"
  		   type="j2ee:cmr-field-typeType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="container-transactionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The container-transactionType specifies how the container
  	must manage transaction scopes for the enterprise bean's
  	method invocations. It defines an optional description, a
  	list of method elements, and a transaction attribute. The
  	transaction attribute is to be applied to all the specified
  	methods.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="trans-attribute"
  		   type="j2ee:trans-attributeType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-classType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	  The ejb-classType contains the fully-qualified name of the
  	  enterprise bean's class. It is used by ejb-class elements.
  
  	  Example:
  
  	      &lt;ejb-class&gt;com.wombat.empl.EmployeeServiceBean&lt;/ejb-class&gt;
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:fully-qualified-classType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-jarType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The ejb-jarType defines the root element of the EJB
  	deployment descriptor. It contains
  
  	    - an optional description of the ejb-jar file
  	    - an optional display name
  	    - an optional icon that contains a small and a large
  	      icon file name
  	    - structural information about all included
  	      enterprise beans that is not specified through annotations
  	    - a descriptor for container managed relationships,
  	      if any.
  	    - an optional application-assembly descriptor
  	    - an optional name of an ejb-client-jar file for the
  	      ejb-jar.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="enterprise-beans"
  		   type="j2ee:enterprise-beansType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="relationships"
  		   type="j2ee:relationshipsType"
  		   minOccurs="0"&gt;
  	&lt;xsd:unique name="relationship-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-relation-name contains the name of a
  	      relation. The name must be unique within
  	      relationships.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-relation"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-relation-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="assembly-descriptor"
  		   type="j2ee:assembly-descriptorType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    Providing an assembly-descriptor in the deployment
  	    descriptor is optional for the ejb-jar file
  	    producer.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-client-jar"
  		   type="j2ee:pathType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	      The optional ejb-client-jar element specifies a JAR
  	      file that contains the class files necessary for a
  	      client program to access the
  	      enterprise beans in the ejb-jar file.
  
  	      Example:
  
  		  &lt;ejb-client-jar&gt;employee_service_client.jar
  		  &lt;/ejb-client-jar&gt;
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
  		   type="j2ee:dewey-versionType"
  		   fixed="3.0"
  		   use="required"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The version specifies the version of the
  	  EJB specification that the instance document must
  	  comply with. This information enables deployment tools
  	  to validate a particular EJB Deployment
  	  Descriptor with respect to a specific version of the EJB
  	  schema.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
      &lt;xsd:attribute name="full" type="xsd:boolean"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The full attribute defines whether this deployment
  	  descriptor is complete, or whether the class files
  	  of the jar file should be examined for annotations
  	  that specify deployment information.
  
  	  If full is set to "true", the deployment tool
  	  must ignore any EJB annotations present in the
  	  class files of the application.
  
  	  If full is not specified or is set to "false", the
  	  deployment tool must examine the class files of the
  	  application for annotations, as specified by the EJB
  	  specifications.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
  
      &lt;/xsd:attribute&gt;
  
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-nameType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	  The ejb-nameType specifies an enterprise bean's name. It is
  	  used by ejb-name elements. This name is assigned by the
  	  ejb-jar file producer to name the enterprise bean in the
  	  ejb-jar file's deployment descriptor. The name must be
  	  unique among the names of the enterprise beans in the same
  	  ejb-jar file.
  
  	  There is no architected relationship between the used
  	  ejb-name in the deployment descriptor and the JNDI name that
  	  the Deployer will assign to the enterprise bean's home.
  
  	  The name for an entity bean must conform to the lexical
  	  rules for an NMTOKEN.
  
  	  Example:
  
  	  &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:xsdNMTOKENType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-relationType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The ejb-relationType describes a relationship between two
  	entity beans with container-managed persistence.  It is used
  	by ejb-relation elements. It contains a description; an
  	optional ejb-relation-name element; and exactly two
  	relationship role declarations, defined by the
  	ejb-relationship-role elements. The name of the
  	relationship, if specified, is unique within the ejb-jar
  	file.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relation-name"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The ejb-relation-name element provides a unique name
  	    within the ejb-jar file for a relationship.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-relationship-role"
  		   type="j2ee:ejb-relationship-roleType"/&gt;
        &lt;xsd:element name="ejb-relationship-role"
  		   type="j2ee:ejb-relationship-roleType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-relationship-roleType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	  The ejb-relationship-roleType describes a role within a
  	  relationship. There are two roles in each relationship.
  
  	  The ejb-relationship-roleType contains an optional
  	  description; an optional name for the relationship role; a
  	  specification of the multiplicity of the role; an optional
  	  specification of cascade-delete functionality for the role;
  	  the role source; and a declaration of the cmr-field, if any,
  	  by means of which the other side of the relationship is
  	  accessed from the perspective of the role source.
  
  	  The multiplicity and role-source element are mandatory.
  
  	  The relationship-role-source element designates an entity
  	  bean by means of an ejb-name element. For bidirectional
  	  relationships, both roles of a relationship must declare a
  	  relationship-role-source element that specifies a cmr-field
  	  in terms of which the relationship is accessed. The lack of
  	  a cmr-field element in an ejb-relationship-role specifies
  	  that the relationship is unidirectional in navigability and
  	  the entity bean that participates in the relationship is
  	  "not aware" of the relationship.
  
  	  Example:
  
  	  &lt;ejb-relation&gt;
  	      &lt;ejb-relation-name&gt;Product-LineItem&lt;/ejb-relation-name&gt;
  	      &lt;ejb-relationship-role&gt;
  		  &lt;ejb-relationship-role-name&gt;product-has-lineitems
  		  &lt;/ejb-relationship-role-name&gt;
  		  &lt;multiplicity&gt;One&lt;/multiplicity&gt;
  		  &lt;relationship-role-source&gt;
  		  &lt;ejb-name&gt;ProductEJB&lt;/ejb-name&gt;
  		  &lt;/relationship-role-source&gt;
  	       &lt;/ejb-relationship-role&gt;
  	  &lt;/ejb-relation&gt;
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relationship-role-name"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The ejb-relationship-role-name element defines a
  	    name for a role that is unique within an
  	    ejb-relation. Different relationships can use the
  	    same name for a role.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="multiplicity"
  		   type="j2ee:multiplicityType"/&gt;
        &lt;xsd:element name="cascade-delete"
  		   type="j2ee:emptyType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The cascade-delete element specifies that, within a
  	    particular relationship, the lifetime of one or more
  	    entity beans is dependent upon the lifetime of
  	    another entity bean. The cascade-delete element can
  	    only be specified for an ejb-relationship-role
  	    element contained in an ejb-relation element in
  	    which the other ejb-relationship-role
  	    element specifies a multiplicity of One.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="relationship-role-source"
  		   type="j2ee:relationship-role-sourceType"/&gt;
        &lt;xsd:element name="cmr-field"
  		   type="j2ee:cmr-fieldType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="enterprise-beansType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The enterprise-beansType declares one or more enterprise
  	beans. Each bean can be a session, entity or message-driven
  	bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:choice maxOccurs="unbounded"&gt;
        &lt;xsd:element name="session"
  		   type="j2ee:session-beanType"&gt;
  	&lt;xsd:unique name="session-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
        &lt;xsd:element name="entity"
  		   type="j2ee:entity-beanType"&gt;
  	&lt;xsd:unique name="entity-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
        &lt;xsd:element name="message-driven"
  		   type="j2ee:message-driven-beanType"&gt;
  	&lt;xsd:unique name="messaged-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
      &lt;/xsd:choice&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="entity-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The entity-beanType declares an entity bean. The declaration
  	consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name
  	    - a unique name assigned to the enterprise bean
  	      in the deployment descriptor
  	    - the names of the entity bean's remote home
  	      and remote interfaces, if any
  	    - the names of the entity bean's local home and local
  	      interfaces, if any
  	    - the entity bean's implementation class
  	    - the optional entity bean's persistence management type. If
                this element is not specified it is defaulted to Container.
  	    - the entity bean's primary key class name
  	    - an indication of the entity bean's reentrancy
  	    - an optional specification of the
  	      entity bean's cmp-version
  	    - an optional specification of the entity bean's
  	      abstract schema name
  	    - an optional list of container-managed fields
  	    - an optional specification of the primary key
  	      field
  	    - an optional declaration of the bean's environment
  	      entries
  	    - an optional declaration of the bean's EJB
  	      references
  	    - an optional declaration of the bean's local
  	      EJB references
  	    - an optional declaration of the bean's web
  	      service references
  	    - an optional declaration of the security role
  	      references
  	    - an optional declaration of the security identity
  	      to be used for the execution of the bean's methods
  	    - an optional declaration of the bean's
  	      resource manager connection factory references
  	    - an optional declaration of the bean's
  	      resource environment references
  	    - an optional declaration of the bean's message
  	      destination references
  	    - an optional set of query declarations
  	      for finder and select methods for an entity
  	      bean with cmp-version 2.x.
  
  	The optional abstract-schema-name element must be specified
  	for an entity bean with container-managed persistence and
  	cmp-version 2.x.
  
  	The optional primkey-field may be present in the descriptor
  	if the entity's persistence-type is Container.
  
  	The optional cmp-version element may be present in the
  	descriptor if the entity's persistence-type is Container. If
  	the persistence-type is Container and the cmp-version
  	element is not specified, its value defaults to 2.x.
  
  	The optional home and remote elements must be specified if
  	the entity bean cmp-version is 1.x.
  
  	The optional home and remote elements must be specified if
  	the entity bean has a remote home and remote interface.
  
  	The optional local-home and local elements must be specified
  	if the entity bean has a local home and local interface.
  
  	Either both the local-home and the local elements or both
  	the home and the remote elements must be specified.
  
  	The optional query elements must be present if the
  	persistence-type is Container and the cmp-version is 2.x and
  	query methods other than findByPrimaryKey have been defined
  	for the entity bean.
  
  	The other elements that are optional are "optional" in the
  	sense that they are omitted if the lists represented by them
  	are empty.
  
  	At least one cmp-field element must be present in the
  	descriptor if the entity's persistence-type is Container and
  	the cmp-version is 1.x, and none must not be present if the
  	entity's persistence-type is Bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="home"
  		   type="j2ee:homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="remote"
  		   type="j2ee:remoteType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local-home"
  		   type="j2ee:local-homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local"
  		   type="j2ee:localType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"/&gt;
        &lt;xsd:element name="persistence-type"
  		   type="j2ee:persistence-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="prim-key-class"
  		   type="j2ee:fully-qualified-classType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The prim-key-class element contains the
  	    fully-qualified name of an
  	    entity bean's primary key class.
  
  	    If the definition of the primary key class is
  	    deferred to deployment time, the prim-key-class
  	    element should specify java.lang.Object.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="reentrant"
  		   type="j2ee:true-falseType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The reentrant element specifies whether an entity
  	    bean is reentrant or not.
  
  	    The reentrant element must be one of the two
  	    following: true or false
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmp-version"
  		   type="j2ee:cmp-versionType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="abstract-schema-name"
  		   type="j2ee:java-identifierType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The abstract-schema-name element specifies the name
  	    of the abstract schema type of an entity bean with
  	    cmp-version 2.x. It is used in EJB QL queries.
  
  	    For example, the abstract-schema-name for an entity
  	    bean whose local interface is
  	    com.acme.commerce.Order might be Order.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmp-field"
  		   type="j2ee:cmp-fieldType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="primkey-field"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The primkey-field element is used to specify the
  	    name of the primary key field for an entity with
  	    container-managed persistence.
  
  	    The primkey-field must be one of the fields declared
  	    in the cmp-field element, and the type of the field
  	    must be the same as the primary key type.
  
  	    The primkey-field element is not used if the primary
  	    key maps to multiple container-managed fields
  	    (i.e. the key is a compound key). In this case, the
  	    fields of the primary key class must be public, and
  	    their names must correspond to the field names of
  	    the entity bean class that comprise the key.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-role-ref"
  		   type="j2ee:security-role-refType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="query"
  		   type="j2ee:queryType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="exclude-listType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The exclude-listType specifies one or more methods which
  	the Assembler marks to be uncallable.
  
  	If the method permission relation contains methods that are
  	in the exclude list, the Deployer should consider those
  	methods to be uncallable.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="init-methodType"&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="create-method"
  		   type="j2ee:named-methodType"/&gt;
        &lt;xsd:element name="bean-method"
  		   type="j2ee:named-methodType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="interceptorType"&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="interceptor-class"
  		   type="j2ee:fully-qualified-classType"/&gt;
        &lt;xsd:element name="around-invoke-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="message-driven-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The message-driven element declares a message-driven
  	bean. The declaration consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name.
  	    - an optional declaration of the enterprise bean's name
  	    - an optional declaration of the message-driven bean's 
  	      implementation class
  	    - an optional declaration of the bean's messaging
  	      type
  	    - the optional message-driven bean's transaction management
                type. If it is not defined, it is defaulted to Container.
  	    - an optional declaration of the bean's
  	      message-destination-type
  	    - an optional declaration of the bean's
  	      message-destination-link
  	    - an optional declaration of the message-driven bean's
  	      activation configuration properties
  	    - an optional declaration of the bean's environment
  	      entries
  	    - an optional declaration of the bean's EJB references
  	    - an optional declaration of the bean's local EJB
  	      references
  	    - an optional declaration of the bean's web service
  	      references
  	    - an optional declaration of the security
  	      identity to be used for the execution of the bean's
  	      methods
  	    - an optional declaration of the bean's
  	      resource manager connection factory
  	      references
  	    - an optional declaration of the bean's resource
  	      environment references.
  	    - an optional declaration of the bean's message
  	      destination references
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="messaging-type"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The messaging-type element specifies the message
  	    listener interface of the message-driven bean. If
  	    the messaging-type element is not specified, it is
  	    assumed to be javax.jms.MessageListener.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="interceptor"
                     type="j2ee:interceptorType"
                     minOccurs="0"
                     maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="around-invoke-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="callback-listener"
                     type="j2ee:callback-listenerType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="post-construct-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-destroy-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="post-activate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-passivate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="timeout-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="transaction-type"
  		   type="j2ee:transaction-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="message-destination-type"
  		   type="j2ee:message-destination-typeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="message-destination-link"
  		   type="j2ee:message-destination-linkType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="activation-config"
  		   type="j2ee:activation-configType"
  		   minOccurs="0"/&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-intfType"&gt;
  
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-intf element allows a method element to
  	differentiate between the methods with the same name and
  	signature that are multiply defined across the home and
  	component interfaces (e.g, in both an enterprise bean's
  	remote and local interfaces or in both an enterprise bean's
  	home and remote interfaces, etc.); the component and web
  	service endpoint interfaces, and so on. The Local applies to
          both local component interface and local business interface.
          Similarly, Remote applies to both remote component interface
          and the remote business interface.
  
  	The method-intf element must be one of the following:
  
  	    Home
  	    Remote
  	    LocalHome
  	    Local
  	    ServiceEndpoint
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Home"/&gt;
  	&lt;xsd:enumeration value="Remote"/&gt;
  	&lt;xsd:enumeration value="LocalHome"/&gt;
  	&lt;xsd:enumeration value="Local"/&gt;
  	&lt;xsd:enumeration value="ServiceEndpoint"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-nameType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-nameType contains a name of an enterprise
  	bean method or the asterisk (*) character. The asterisk is
  	used when the element denotes all the methods of an
  	enterprise bean's client view interfaces.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-paramsType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-paramsType defines a list of the
  	fully-qualified Java type names of the method parameters.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="method-param"
  		   type="j2ee:java-typeType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The method-param element contains a primitive
  	    or a fully-qualified Java type name of a method
  	    parameter.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-permissionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-permissionType specifies that one or more
  	security roles are allowed to invoke one or more enterprise
  	bean methods. The method-permissionType consists of an
  	optional description, a list of security role names or an
  	indicator to state that the method is unchecked for
  	authorization, and a list of method elements.
  
  	The security roles used in the method-permissionType
  	must be defined in the security-role elements of the
  	deployment descriptor, and the methods must be methods
  	defined in the enterprise bean's business, home, component
          and/or web service endpoint interfaces.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:choice&gt;
  	&lt;xsd:element name="role-name"
  		     type="j2ee:role-nameType"
  		     maxOccurs="unbounded"/&gt;
  	&lt;xsd:element name="unchecked"
  		     type="j2ee:emptyType"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The unchecked element specifies that a method is
  	      not checked for authorization by the container
  	      prior to invocation of the method.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	&lt;/xsd:element&gt;
        &lt;/xsd:choice&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="methodType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	  The methodType is used to denote a method of an enterprise
  	  bean's business, home, component, and/or web service endpoint
  	  interface, or, in the case of a message-driven bean, the
  	  bean's message listener method, or a set of such
  	  methods. The ejb-name element must be the name of one of the
  	  enterprise beans declared in the deployment descriptor; the
  	  optional method-intf element allows to distinguish between a
  	  method with the same signature that is multiply defined
  	  across the business, home, component, and/or web service
            endpoint nterfaces; the method-name element specifies the
            method name; and the optional method-params elements identify
            a single method among multiple methods with an overloaded
  	  method name.
  
  	  There are three possible styles of using methodType element
  	  within a method element:
  
  	  1.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to all the methods of the
  	     specified enterprise bean's business, home, component,
               and/or web service endpoint interfaces.
  
  	  2.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;METHOD&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to the specified method of
  	     the specified enterprise bean. If there are multiple
  	     methods with the same overloaded name, the element of
  	     this style refers to all the methods with the overloaded
  	     name.
  
  	  3.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;METHOD&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;PARAM-1&lt;/method-param&gt;
  		  &lt;method-param&gt;PARAM-2&lt;/method-param&gt;
  		  ...
  		  &lt;method-param&gt;PARAM-n&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to a single method within a
  	     set of methods with an overloaded name. PARAM-1 through
  	     PARAM-n are the fully-qualified Java types of the
  	     method's input parameters (if the method has no input
  	     arguments, the method-params element contains no
  	     method-param elements). Arrays are specified by the
  	     array element's type, followed by one or more pair of
  	     square brackets (e.g. int[][]). If there are multiple
  	     methods with the same overloaded name, this style refers
  	     to all of the overloaded methods.
  
  	  Examples:
  
  	  Style 1: The following method element refers to all the
  	  methods of the EmployeeService bean's business, home,
            component, and/or web service endpoint interfaces:
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	  Style 2: The following method element refers to all the
  	  create methods of the EmployeeService bean's home
  	  interface(s).
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	  Style 3: The following method element refers to the
  	  create(String firstName, String LastName) method of the
  	  EmployeeService bean's home interface(s).
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The following example illustrates a Style 3 element with
  	  more complex parameter types. The method
  	  foobar(char s, int i, int[] iar, mypackage.MyClass mycl,
  	  mypackage.MyClass[][] myclaar) would be specified as:
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;foobar&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;char&lt;/method-param&gt;
  		  &lt;method-param&gt;int&lt;/method-param&gt;
  		  &lt;method-param&gt;int[]&lt;/method-param&gt;
  		  &lt;method-param&gt;mypackage.MyClass&lt;/method-param&gt;
  		  &lt;method-param&gt;mypackage.MyClass[][]&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The optional method-intf element can be used when it becomes
  	  necessary to differentiate between a method that is multiply
  	  defined across the enterprise bean's business, home, component,
            and/or web service endpoint interfaces with the same name and
  	  signature. However, if the same method is a method of both the
            local business interface, and the local component interface,
            the same attribute applies to the method for both interfaces.
            Likewise, if the same method is a method of both the remote
            business interface and the remote component interface, the same
            attribute applies to the method for both interfaces.
  
  	  For example, the method element
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Remote&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  can be used to differentiate the create(String, String)
  	  method defined in the remote interface from the
  	  create(String, String) method defined in the remote home
  	  interface, which would be defined as
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Home&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  and the create method that is defined in the local home
  	  interface which would be defined as
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;LocalHome&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The method-intf element can be used with all three Styles
  	  of the method element usage. For example, the following
  	  method element example could be used to refer to all the
  	  methods of the EmployeeService bean's remote home interface
            and the remote business interface.
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Home&lt;/method-intf&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="method-intf"
  		   type="j2ee:method-intfType"
  		   minOccurs="0"&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="method-name"
  		   type="j2ee:method-nameType"/&gt;
        &lt;xsd:element name="method-params"
  		   type="j2ee:method-paramsType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="multiplicityType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The multiplicityType describes the multiplicity of the
  	role that participates in a relation.
  
  	The value must be one of the two following:
  
  	    One
  	    Many
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="One"/&gt;
  	&lt;xsd:enumeration value="Many"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="named-methodType"&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="method-name"
  		   type="j2ee:string"/&gt;
        &lt;xsd:element name="method-params"
  		   type="j2ee:method-paramsType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="persistence-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The persistence-typeType specifies an entity bean's persistence
  	management type.
  
  	The persistence-type element must be one of the two following:
  
  	    Bean
  	    Container
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Bean"/&gt;
  	&lt;xsd:enumeration value="Container"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="query-methodType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	  The query-method specifies the method for a finder or select
  	  query.
  
  	  The method-name element specifies the name of a finder or select
  	  method in the entity bean's implementation class.
  
  	  Each method-param must be defined for a query-method using the
  	  method-params element.
  
  	  It is used by the query-method element.
  
  	  Example:
  
  	  &lt;query&gt;
  	      &lt;description&gt;Method finds large orders&lt;/description&gt;
  	      &lt;query-method&gt;
  		  &lt;method-name&gt;findLargeOrders&lt;/method-name&gt;
  		  &lt;method-params&gt;&lt;/method-params&gt;
  	      &lt;/query-method&gt;
  	      &lt;ejb-ql&gt;
  		SELECT OBJECT(o) FROM Order o
  		  WHERE o.amount &amp;gt; 1000
  	      &lt;/ejb-ql&gt;
  	  &lt;/query&gt;
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="method-name"
  		   type="j2ee:method-nameType"/&gt;
        &lt;xsd:element name="method-params"
  		   type="j2ee:method-paramsType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="queryType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The queryType defines a finder or select
  	query. It contains
  	    - an optional description of the query
  	    - the specification of the finder or select
  	      method it is used by
  		- an optional specification of the result type
  		  mapping, if the query is for a select method
  		  and entity objects are returned.
  		- the EJB QL query string that defines the query.
  
  	Queries that are expressible in EJB QL must use the ejb-ql
  	element to specify the query. If a query is not expressible
  	in EJB QL, the description element should be used to
  	describe the semantics of the query and the ejb-ql element
  	should be empty.
  
  	The result-type-mapping is an optional element. It can only
  	be present if the query-method specifies a select method
  	that returns entity objects.  The default value for the
  	result-type-mapping element is "Local".
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType" minOccurs="0"/&gt;
        &lt;xsd:element name="query-method"
  		   type="j2ee:query-methodType"/&gt;
        &lt;xsd:element name="result-type-mapping"
  		   type="j2ee:result-type-mappingType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="ejb-ql"
  		   type="j2ee:xsdStringType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="relationship-role-sourceType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The relationship-role-sourceType designates the source of a
  	role that participates in a relationship. A
  	relationship-role-sourceType is used by
  	relationship-role-source elements to uniquely identify an
  	entity bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="relationshipsType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The relationshipsType describes the relationships in
  	which entity beans with container-managed persistence
  	participate. The relationshipsType contains an optional
  	description; and a list of ejb-relation elements, which
  	specify the container managed relationships.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relation"
  		   type="j2ee:ejb-relationType"
  		   maxOccurs="unbounded"&gt;
  
  	&lt;xsd:unique name="role-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-relationship-role-name contains the name of a
  	      relationship role. The name must be unique within
  	      a relationship, but can be reused in different
  	      relationships.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector
  	       xpath=".//j2ee:ejb-relationship-role-name"/&gt;
  	  &lt;xsd:field
  	       xpath="."/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="remove-methodType"&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="bean-method"
  		   type="j2ee:named-methodType"/&gt;
        &lt;xsd:element name="retain-if-exception"
  		   type="j2ee:emptyType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="result-type-mappingType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The result-type-mappingType is used in the query element to
  	specify whether an abstract schema type returned by a query
  	for a select method is to be mapped to an EJBLocalObject or
  	EJBObject type.
  
  	The value must be one of the following:
  
  	    Local
  	    Remote
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Local"/&gt;
  	&lt;xsd:enumeration value="Remote"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="security-identityType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The security-identityType specifies whether the caller's
  	security identity is to be used for the execution of the
  	methods of the enterprise bean or whether a specific run-as
  	identity is to be used. It contains an optional description
  	and a specification of the security identity to be used.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:choice&gt;
  	&lt;xsd:element name="use-caller-identity"
  		     type="j2ee:emptyType"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The use-caller-identity element specifies that
  	      the caller's security identity be used as the
  	      security identity for the execution of the
  	      enterprise bean's methods.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	&lt;/xsd:element&gt;
  	&lt;xsd:element name="run-as"
  		     type="j2ee:run-asType"/&gt;
        &lt;/xsd:choice&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="session-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The session-beanType declares an session bean. The
  	declaration consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name
  	    - an optional declaration of the enterprise bean's name
              - the names of all the remote or local business interfaces,
                if any
  	    - the names of the session bean's remote home and
  	      remote interfaces, if any
  	    - the names of the session bean's local home and
  	      local interfaces, if any
  	    - the name of the session bean's web service endpoint
  	      interface, if any
  	    - an optional declaration of the message-driven bean's 
  	      implementation class
  	    - the session bean's state management type
  	    - the optional session bean's transaction management type.
                If it is not present, it is defaulted to Container.
  	    - an optional declaration of the bean's
  	      environment entries
  	    - an optional declaration of the bean's EJB references
  	    - an optional declaration of the bean's local
  	      EJB references
  	    - an optional declaration of the bean's web
  	      service references
  	    - an optional declaration of the security role
  	      references
  	    - an optional declaration of the security identity
  	      to be used for the execution of the bean's methods
  	    - an optional declaration of the bean's resource
  	      manager connection factory references
  	    - an optional declaration of the bean's resource
  	      environment references.
  	    - an optional declaration of the bean's message
  	      destination references
  
  	The elements that are optional are "optional" in the sense
  	that they are omitted when if lists represented by them are
  	empty.
  
  	Either both the local-home and the local elements or both
  	the home and the remote elements must be specified for the
  	session bean.
  
  	The service-endpoint element may only be specified if the
  	bean is a stateless session bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="home"
  		   type="j2ee:homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="remote"
  		   type="j2ee:remoteType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local-home"
  		   type="j2ee:local-homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local"
  		   type="j2ee:localType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="business-local"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"
                     maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="business-remote"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"
                     maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="service-endpoint"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The service-endpoint element contains the
  	    fully-qualified name of the enterprise bean's web
  	    service endpoint interface. The service-endpoint
  	    element may only be specified for a stateless
  	    session bean. The specified interface must be a
  	    valid JAX-RPC service endpoint interface.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="session-type"
  		   type="j2ee:session-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="interceptor"
                     type="j2ee:interceptorType"
                     minOccurs="0"
                     maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="around-invoke-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="callback-listener"
                     type="j2ee:callback-listenerType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="post-construct-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-destroy-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="post-activate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="pre-passivate-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="timeout-method"
                     type="j2ee:named-methodType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="init-method"
                     type="j2ee:init-methodType"
                     minOccurs="0"
                     maxOccurs="unbounded"&gt;
          &lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The init-method element specifies the mappings for
  	    EJB 2.x style create methods for an EJB 3.0 bean.
  	    This element can only be specified for stateful
              session beans.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="remove-method"
                     type="j2ee:remove-methodType"
                     minOccurs="0"
                     maxOccurs="unbounded"&gt;
          &lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The remove-method element specifies the mappings for
  	    EJB 2.x style remove methods for an EJB 3.0 bean.
  	    This element can only be specified for stateful
              session beans.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="transaction-type"
  		   type="j2ee:transaction-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-role-ref"
  		   type="j2ee:security-role-refType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="session-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The session-typeType describes whether the session bean is a
  	stateful session or stateless session. It is used by
  	session-type elements.
  
  	The value must be one of the two following:
  
  	    Stateful
  	    Stateless
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Stateful"/&gt;
  	&lt;xsd:enumeration value="Stateless"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="trans-attributeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The trans-attributeType specifies how the container must
  	manage the transaction boundaries when delegating a method
  	invocation to an enterprise bean's business method.
  
  	The value must be one of the following:
  
  	    NotSupported
  	    Supports
  	    Required
  	    RequiresNew
  	    Mandatory
  	    Never
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="NotSupported"/&gt;
  	&lt;xsd:enumeration value="Supports"/&gt;
  	&lt;xsd:enumeration value="Required"/&gt;
  	&lt;xsd:enumeration value="RequiresNew"/&gt;
  	&lt;xsd:enumeration value="Mandatory"/&gt;
  	&lt;xsd:enumeration value="Never"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="transaction-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The transaction-typeType specifies an enterprise bean's
  	transaction management type.
  
  	The transaction-type must be one of the two following:
  
  	    Bean
  	    Container
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Bean"/&gt;
  	&lt;xsd:enumeration value="Container"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;/xsd:schema&gt;
  
  
  
  
  
  1.1      date: 2005/07/29 16:35:54;  author: bdecoste;  state: Exp;jboss-ejb3/src/resources/schema/ejb-jar_3_0a.xsd
  
  Index: ejb-jar_3_0a.xsd
  ===================================================================
  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;xsd:schema xmlns="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>"
  	    targetNamespace="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	    xmlns:j2ee="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	    xmlns:xsd="<a href="http://www.w3.org/2001/XMLSchema" target="_new">http://www.w3.org/2001/XMLSchema</a>"
  	    elementFormDefault="qualified"
  	    attributeFormDefault="unqualified"
  	    version="3.0"&gt;
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
        @(#)ejb-jar_2_1.xsds	1.23 08/01/03
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
  
        Copyright 2003 Sun Microsystems, Inc., 901 San Antonio
        Road, Palo Alto, California 94303, U.S.A. All rights
        reserved.
  
        Sun Microsystems, Inc. has intellectual property rights
        relating to technology described in this document. In
        particular, and without limitation, these intellectual
        property rights may include one or more of the U.S. patents
        listed at <a href="http://www.sun.com/patents" target="_new">http://www.sun.com/patents</a> and one or more
        additional patents or pending patent applications in the
        U.S. and other countries.
  
        This document and the technology which it describes are
        distributed under licenses restricting their use, copying,
        distribution, and decompilation. No part of this document
        may be reproduced in any form by any means without prior
        written authorization of Sun and its licensors, if any.
  
        Third-party software, including font technology, is
        copyrighted and licensed from Sun suppliers.
  
        Sun, Sun Microsystems, the Sun logo, Solaris, Java, J2EE,
        JavaServer Pages, Enterprise JavaBeans and the Java Coffee
        Cup logo are trademarks or registered trademarks of Sun
        Microsystems, Inc. in the U.S. and other countries.
  
        Federal Acquisitions: Commercial Software - Government Users
        Subject to Standard License Terms and Conditions.
  
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
        &lt;![CDATA[
  
  	This is the XML Schema for the EJB 3.0 deployment descriptor.
  	The deployment descriptor must be named "META-INF/ejb-jar.xml" in
  	the EJB's jar file.  All EJB deployment descriptors must indicate
  	the ejb-jar schema by using the J2EE namespace:
  
  	<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>
  
  	and by indicating the version of the schema by
  	using the version element as shown below:
  
  	    &lt;ejb-jar xmlns="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>"
  	      xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
  	      xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/j2ee" target="_new">http://java.sun.com/xml/ns/j2ee</a>
  		  <a href="http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd" target="_new">http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd</a>"
  	      version="3.0"&gt;
  	      ...
  	    &lt;/ejb-jar&gt;
  
  	The instance documents may indicate the published version of
  	the schema using the xsi:schemaLocation attribute for the
  	J2EE namespace with the following location:
  
  	<a href="http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd" target="_new">http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd</a>
  
  	]]&gt;
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:annotation&gt;
      &lt;xsd:documentation&gt;
  
        The following conventions apply to all J2EE
        deployment descriptor elements unless indicated otherwise.
  
        - In elements that specify a pathname to a file within the
  	same JAR file, relative filenames (i.e., those not
  	starting with "/") are considered relative to the root of
  	the JAR file's namespace.  Absolute filenames (i.e., those
  	starting with "/") also specify names in the root of the
  	JAR file's namespace.  In general, relative names are
  	preferred.  The exception is .war files where absolute
  	names are preferred for consistency with the Servlet API.
  
      &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;
  
    &lt;xsd:include schemaLocation="<a href="file:///C:/eclipse3.1M6/workspace/xml-test/j2ee_5_0a.xsd"/" target="_new">file:///C:/eclipse3.1M6/workspace/xml-test/j2ee_5_0a.xsd"/</a>&gt;
  
  &lt;!-- **************************************************** --&gt;
  
  
    &lt;xsd:element name="ejb-jar" type="j2ee:ejb-jarType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	This is the root of the ejb-jar deployment descriptor.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:key name="ejb-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The ejb-name element contains the name of an enterprise
  	  bean. The name must be unique within the ejb-jar file.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:enterprise-beans/*"/&gt;
        &lt;xsd:field    xpath="j2ee:ejb-name"/&gt;
      &lt;/xsd:key&gt;
  
      &lt;xsd:keyref name="ejb-name-references"
  		refer="j2ee:ejb-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The keyref indicates the references from
  	  relationship-role-source must be to a specific ejb-name
  	  defined within the scope of enterprise-beans element.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector
  	   xpath=".//j2ee:ejb-relationship-role/j2ee:relationship-role-source"/&gt;
        &lt;xsd:field
  	   xpath="j2ee:ejb-name"/&gt;
      &lt;/xsd:keyref&gt;
  
      &lt;xsd:key name="role-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  A role-name-key is specified to allow the references
  	  from the security-role-refs.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:assembly-descriptor/j2ee:security-role"/&gt;
        &lt;xsd:field    xpath="j2ee:role-name"/&gt;
      &lt;/xsd:key&gt;
  
      &lt;xsd:keyref name="role-name-references"
  		refer="j2ee:role-name-key"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The keyref indicates the references from
  	  security-role-ref to a specified role-name.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:selector xpath="j2ee:enterprise-beans/*/j2ee:security-role-ref"/&gt;
        &lt;xsd:field    xpath="j2ee:role-link"/&gt;
      &lt;/xsd:keyref&gt;
    &lt;/xsd:element&gt;
  
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="activation-config-propertyType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The activation-config-propertyType contains a name/value
  	configuration property pair for a message-driven bean.
  
  	The properties that are recognized for a particular
  	message-driven bean are determined by the messaging type.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="activation-config-property-name"
  		   type="j2ee:xsdStringType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The activation-config-property-name element contains
  	    the name for an activation configuration property of
  	    a message-driven bean.
  
  	    For JMS message-driven beans, the following property
  	    names are recognized: acknowledgeMode,
  	    messageSelector, destinationType, subscriptionDurability
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="activation-config-property-value"
  		   type="j2ee:xsdStringType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The activation-config-property-value element
  	    contains the value for an activation configuration
  	    property of a message-driven bean.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="activation-configType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The activation-configType defines information about the
  	expected configuration properties of the message-driven bean
  	in its operational environment. This may include information
  	about message acknowledgement, message selector, expected
  	destination type, etc.
  
  	The configuration information is expressed in terms of
  	name/value configuration properties.
  
  	The properties that are recognized for a particular
  	message-driven bean are determined by the messaging type.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="activation-config-property"
  		   type="j2ee:activation-config-propertyType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="assembly-descriptorType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The assembly-descriptorType defines
  	application-assembly information.
  
  	The application-assembly information consists of the
  	following parts: the definition of security roles, the
  	definition of method permissions, the definition of
  	transaction attributes for enterprise beans with
  	container-managed transaction demarcation and a list of
  	methods to be excluded from being invoked.
  
  	All the parts are optional in the sense that they are
  	omitted if the lists represented by them are empty.
  
  	Providing an assembly-descriptor in the deployment
  	descriptor is optional for the ejb-jar file producer.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="callback"
  		   type="j2ee:callbackType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="remove-list"
  		   type="j2ee:remove-listType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="init-list"
  		   type="j2ee:init-listType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="security-role"
  		   type="j2ee:security-roleType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method-permission"
  		   type="j2ee:method-permissionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="container-transaction"
  		   type="j2ee:container-transactionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="message-destination"
  		   type="j2ee:message-destinationType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="exclude-list"
  		   type="j2ee:exclude-listType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmp-fieldType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmp-fieldType describes a container-managed field. The
  	cmp-fieldType contains an optional description of the field,
  	and the name of the field.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="field-name"
  		   type="j2ee:java-identifierType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The field-name element specifies the name of a
  	    container managed field.
  
  	    The name of the cmp-field of an entity bean with
  	    cmp-version 2.x must begin with a lowercase
  	    letter. This field is accessed by methods whose
  	    names consists of the name of the field specified by
  	    field-name in which the first letter is uppercased,
  	    prefixed by "get" or "set".
  
  	    The name of the cmp-field of an entity bean with
  	    cmp-version 1.x must denote a public field of the
  	    enterprise bean class or one of its superclasses.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmp-versionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmp-versionType specifies the version of an entity bean
  	with container-managed persistence. It is used by
  	cmp-version elements.
  
  	The value must be one of the two following:
  
  	    1.x
  	    2.x
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="1.x"/&gt;
  	&lt;xsd:enumeration value="2.x"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmr-field-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmr-field-type element specifies the class of a
  	collection-valued logical relationship field in the entity
  	bean class. The value of an element using cmr-field-typeType
  	must be either: java.util.Collection or java.util.Set.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="java.util.Collection"/&gt;
  	&lt;xsd:enumeration value="java.util.Set"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="cmr-fieldType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The cmr-fieldType describes the bean provider's view of
  	a relationship. It consists of an optional description, and
  	the name and the class type of a field in the source of a
  	role of a relationship. The cmr-field-name element
  	corresponds to the name used for the get and set accessor
  	methods for the relationship. The cmr-field-type element is
  	used only for collection-valued cmr-fields. It specifies the
  	type of the collection that is used.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="cmr-field-name"
  		   type="j2ee:string"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The cmr-field-name element specifies the name of a
  	    logical relationship field in the entity bean
  	    class. The name of the cmr-field must begin with a
  	    lowercase letter. This field is accessed by methods
  	    whose names consist of the name of the field
  	    specified by cmr-field-name in which the first
  	    letter is uppercased, prefixed by "get" or "set".
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmr-field-type"
  		   type="j2ee:cmr-field-typeType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="container-transactionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The container-transactionType specifies how the container
  	must manage transaction scopes for the enterprise bean's
  	method invocations. It defines an optional description, a
  	list of method elements, and a transaction attribute. The
  	transaction attribute is to be applied to all the specified
  	methods.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="trans-attribute"
  		   type="j2ee:trans-attributeType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-classType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-classType contains the fully-qualified name of the
  	  enterprise bean's class. It is used by ejb-class elements.
  
  	  Example:
  
  	      &lt;ejb-class&gt;com.wombat.empl.EmployeeServiceBean&lt;/ejb-class&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:fully-qualified-classType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="callback-listenerType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-classType contains the fully-qualified name of the
  	  enterprise bean's callback listener. 
  
  	  Example:
  
  	      &lt;callback-listener&gt;com.wombat.empl.EmployeeCallbackListener&lt;/callback-listener&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:fully-qualified-classType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="interceptorType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-interceptorType contains the fully-qualified name of an
  	  interceptor for the enterprise bean. 
  
  	  Example:
  
  	      &lt;interceptor&gt;com.wombat.empl.Interceptor&lt;/interceptor&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:fully-qualified-classType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="interceptorsType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-interceptorsType contains a comma separated list of fully-qualified
  	  names of a interceptors for the enterprise bean. 
  
  	  Example:
  
  	      &lt;interceptors&gt;com.wombat.empl.Interceptor1,com.wombat.empl.Interceptor2&lt;/interceptors&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:fully-qualified-classType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-jarType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The ejb-jarType defines the root element of the EJB
  	deployment descriptor. It contains
  
  	    - an optional description of the ejb-jar file
  	    - an optional display name
  	    - an optional icon that contains a small and a large
  	      icon file name
  	    - mandatory structural information about all included
  	      enterprise beans
  	    - a descriptor for container managed relationships,
  	      if any
  	    - an optional application-assembly descriptor
  	    - an optional name of an ejb-client-jar file for the
  	      ejb-jar.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="enterprise-beans"
  		   type="j2ee:enterprise-beansType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="relationships"
  		   type="j2ee:relationshipsType"
  		   minOccurs="0"&gt;
  	&lt;xsd:unique name="relationship-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-relation-name contains the name of a
  	      relation. The name must be unique within
  	      relationships.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-relation"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-relation-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="assembly-descriptor"
  		   type="j2ee:assembly-descriptorType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    Providing an assembly-descriptor in the deployment
  	    descriptor is optional for the ejb-jar file
  	    producer.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-client-jar"
  		   type="j2ee:pathType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  	    &lt;![CDATA[
  
  	      The optional ejb-client-jar element specifies a JAR
  	      file that contains the class files necessary for a
  	      client program to access the
  	      enterprise beans in the ejb-jar file.
  
  	      Example:
  
  		  &lt;ejb-client-jar&gt;employee_service_client.jar
  		  &lt;/ejb-client-jar&gt;
  
  	      ]]&gt;
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="version"
  		   type="j2ee:dewey-versionType"
  		   fixed="3.0"
  		   use="required"&gt;
        &lt;xsd:annotation&gt;
  	&lt;xsd:documentation&gt;
  
  	  The version specifies the version of the
  	  EJB specification that the instance document must
  	  comply with. This information enables deployment tools
  	  to validate a particular EJB Deployment
  	  Descriptor with respect to a specific version of the EJB
  	  schema.
  
  	&lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
      &lt;/xsd:attribute&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-nameType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-nameType specifies an enterprise bean's name. It is
  	  used by ejb-name elements. This name is assigned by the
  	  ejb-jar file producer to name the enterprise bean in the
  	  ejb-jar file's deployment descriptor. The name must be
  	  unique among the names of the enterprise beans in the same
  	  ejb-jar file.
  
  	  There is no architected relationship between the used
  	  ejb-name in the deployment descriptor and the JNDI name that
  	  the Deployer will assign to the enterprise bean's home.
  
  	  The name for an entity bean must conform to the lexical
  	  rules for an NMTOKEN.
  
  	  Example:
  
  	  &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:xsdNMTOKENType"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-relationType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The ejb-relationType describes a relationship between two
  	entity beans with container-managed persistence.  It is used
  	by ejb-relation elements. It contains a description; an
  	optional ejb-relation-name element; and exactly two
  	relationship role declarations, defined by the
  	ejb-relationship-role elements. The name of the
  	relationship, if specified, is unique within the ejb-jar
  	file.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relation-name"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The ejb-relation-name element provides a unique name
  	    within the ejb-jar file for a relationship.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-relationship-role"
  		   type="j2ee:ejb-relationship-roleType"/&gt;
        &lt;xsd:element name="ejb-relationship-role"
  		   type="j2ee:ejb-relationship-roleType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="ejb-relationship-roleType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The ejb-relationship-roleType describes a role within a
  	  relationship. There are two roles in each relationship.
  
  	  The ejb-relationship-roleType contains an optional
  	  description; an optional name for the relationship role; a
  	  specification of the multiplicity of the role; an optional
  	  specification of cascade-delete functionality for the role;
  	  the role source; and a declaration of the cmr-field, if any,
  	  by means of which the other side of the relationship is
  	  accessed from the perspective of the role source.
  
  	  The multiplicity and role-source element are mandatory.
  
  	  The relationship-role-source element designates an entity
  	  bean by means of an ejb-name element. For bidirectional
  	  relationships, both roles of a relationship must declare a
  	  relationship-role-source element that specifies a cmr-field
  	  in terms of which the relationship is accessed. The lack of
  	  a cmr-field element in an ejb-relationship-role specifies
  	  that the relationship is unidirectional in navigability and
  	  the entity bean that participates in the relationship is
  	  "not aware" of the relationship.
  
  	  Example:
  
  	  &lt;ejb-relation&gt;
  	      &lt;ejb-relation-name&gt;Product-LineItem&lt;/ejb-relation-name&gt;
  	      &lt;ejb-relationship-role&gt;
  		  &lt;ejb-relationship-role-name&gt;product-has-lineitems
  		  &lt;/ejb-relationship-role-name&gt;
  		  &lt;multiplicity&gt;One&lt;/multiplicity&gt;
  		  &lt;relationship-role-source&gt;
  		  &lt;ejb-name&gt;ProductEJB&lt;/ejb-name&gt;
  		  &lt;/relationship-role-source&gt;
  	       &lt;/ejb-relationship-role&gt;
  	  &lt;/ejb-relation&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relationship-role-name"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The ejb-relationship-role-name element defines a
  	    name for a role that is unique within an
  	    ejb-relation. Different relationships can use the
  	    same name for a role.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="multiplicity"
  		   type="j2ee:multiplicityType"/&gt;
        &lt;xsd:element name="cascade-delete"
  		   type="j2ee:emptyType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The cascade-delete element specifies that, within a
  	    particular relationship, the lifetime of one or more
  	    entity beans is dependent upon the lifetime of
  	    another entity bean. The cascade-delete element can
  	    only be specified for an ejb-relationship-role
  	    element contained in an ejb-relation element in
  	    which the other ejb-relationship-role
  	    element specifies a multiplicity of One.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="relationship-role-source"
  		   type="j2ee:relationship-role-sourceType"/&gt;
        &lt;xsd:element name="cmr-field"
  		   type="j2ee:cmr-fieldType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="enterprise-beansType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The enterprise-beansType declares one or more enterprise
  	beans. Each bean can be a session, entity or message-driven
  	bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:choice maxOccurs="unbounded"&gt;
        &lt;xsd:element name="session"
  		   type="j2ee:session-beanType"&gt;
  	&lt;xsd:unique name="session-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="session-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
        &lt;xsd:element name="entity"
  		   type="j2ee:entity-beanType"&gt;
  	&lt;xsd:unique name="entity-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="entity-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
        &lt;xsd:element name="message-driven"
  		   type="j2ee:message-driven-beanType"&gt;
  	&lt;xsd:unique name="messaged-ejb-local-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of
  	      an EJB reference. The EJB reference is an entry in
  	      the component's environment and is relative to the
  	      java:comp/env context.  The name must be unique within
  	      the component.
  
  	      It is recommended that name be prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-local-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-ejb-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-ref-name element contains the name of an EJB
  	      reference. The EJB reference is an entry in the
  	      component's environment and is relative to the
  	      java:comp/env context. The name must be unique
  	      within the component.
  
  	      It is recommended that name is prefixed with "ejb/".
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:ejb-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:ejb-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-resource-env-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The resource-env-ref-name element specifies the name
  	      of a resource environment reference; its value is
  	      the environment entry name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-env-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:resource-env-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-message-destination-ref-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The message-destination-ref-name element specifies the name
  	      of a message destination reference; its value is
  	      the message destination reference name used in the component
  	      code. The name is a JNDI name relative to the
  	      java:comp/env context and must be unique within an
  	      component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:message-destination-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:message-destination-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-res-ref-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The res-ref-name element specifies the name of a
  	      resource manager connection factory reference.  The name
  	      is a JNDI name relative to the java:comp/env context.
  	      The name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:resource-ref"/&gt;
  	  &lt;xsd:field    xpath="j2ee:res-ref-name"/&gt;
  	&lt;/xsd:unique&gt;
  
  	&lt;xsd:unique name="messaged-env-entry-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The env-entry-name element contains the name of a
  	      component's environment entry.  The name is a JNDI
  	      name relative to the java:comp/env context.  The
  	      name must be unique within an component.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector xpath="j2ee:env-entry"/&gt;
  	  &lt;xsd:field    xpath="j2ee:env-entry-name"/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
  
      &lt;/xsd:choice&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="entity-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The entity-beanType declares an entity bean. The declaration
  	consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name
  	    - a unique name assigned to the enterprise bean
  	      in the deployment descriptor
  	    - the names of the entity bean's remote home
  	      and remote interfaces, if any
  	    - the names of the entity bean's local home and local
  	      interfaces, if any
  	    - the entity bean's implementation class
  	    - the entity bean's persistence management type
  	    - the entity bean's primary key class name
  	    - an indication of the entity bean's reentrancy
  	    - an optional specification of the
  	      entity bean's cmp-version
  	    - an optional specification of the entity bean's
  	      abstract schema name
  	    - an optional list of container-managed fields
  	    - an optional specification of the primary key
  	      field
  	    - an optional declaration of the bean's environment
  	      entries
  	    - an optional declaration of the bean's EJB
  	      references
  	    - an optional declaration of the bean's local
  	      EJB references
  	    - an optional declaration of the bean's web
  	      service references
  	    - an optional declaration of the security role
  	      references
  	    - an optional declaration of the security identity
  	      to be used for the execution of the bean's methods
  	    - an optional declaration of the bean's
  	      resource manager connection factory references
  	    - an optional declaration of the bean's
  	      resource environment references
  	    - an optional declaration of the bean's message
  	      destination references
  	    - an optional set of query declarations
  	      for finder and select methods for an entity
  	      bean with cmp-version 2.x.
  
  	The optional abstract-schema-name element must be specified
  	for an entity bean with container-managed persistence and
  	cmp-version 2.x.
  
  	The optional primkey-field may be present in the descriptor
  	if the entity's persistence-type is Container.
  
  	The optional cmp-version element may be present in the
  	descriptor if the entity's persistence-type is Container. If
  	the persistence-type is Container and the cmp-version
  	element is not specified, its value defaults to 2.x.
  
  	The optional home and remote elements must be specified if
  	the entity bean cmp-version is 1.x.
  
  	The optional home and remote elements must be specified if
  	the entity bean has a remote home and remote interface.
  
  	The optional local-home and local elements must be specified
  	if the entity bean has a local home and local interface.
  
  	Either both the local-home and the local elements or both
  	the home and the remote elements must be specified.
  
  	The optional query elements must be present if the
  	persistence-type is Container and the cmp-version is 2.x and
  	query methods other than findByPrimaryKey have been defined
  	for the entity bean.
  
  	The other elements that are optional are "optional" in the
  	sense that they are omitted if the lists represented by them
  	are empty.
  
  	At least one cmp-field element must be present in the
  	descriptor if the entity's persistence-type is Container and
  	the cmp-version is 1.x, and none must not be present if the
  	entity's persistence-type is Bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="home"
  		   type="j2ee:homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="remote"
  		   type="j2ee:remoteType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local-home"
  		   type="j2ee:local-homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local"
  		   type="j2ee:localType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="persistence-type"
  		   type="j2ee:persistence-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="callback-listener"
  		   type="j2ee:callback-listenerType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="interceptor"
  		   type="j2ee:interceptorType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="interceptors"
  		   type="j2ee:interceptorsType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="prim-key-class"
  		   type="j2ee:fully-qualified-classType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The prim-key-class element contains the
  	    fully-qualified name of an
  	    entity bean's primary key class.
  
  	    If the definition of the primary key class is
  	    deferred to deployment time, the prim-key-class
  	    element should specify java.lang.Object.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="reentrant"
  		   type="j2ee:true-falseType"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The reentrant element specifies whether an entity
  	    bean is reentrant or not.
  
  	    The reentrant element must be one of the two
  	    following: true or false
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmp-version"
  		   type="j2ee:cmp-versionType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="abstract-schema-name"
  		   type="j2ee:java-identifierType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The abstract-schema-name element specifies the name
  	    of the abstract schema type of an entity bean with
  	    cmp-version 2.x. It is used in EJB QL queries.
  
  	    For example, the abstract-schema-name for an entity
  	    bean whose local interface is
  	    com.acme.commerce.Order might be Order.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="cmp-field"
  		   type="j2ee:cmp-fieldType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="primkey-field"
  		   type="j2ee:string"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The primkey-field element is used to specify the
  	    name of the primary key field for an entity with
  	    container-managed persistence.
  
  	    The primkey-field must be one of the fields declared
  	    in the cmp-field element, and the type of the field
  	    must be the same as the primary key type.
  
  	    The primkey-field element is not used if the primary
  	    key maps to multiple container-managed fields
  	    (i.e. the key is a compound key). In this case, the
  	    fields of the primary key class must be public, and
  	    their names must correspond to the field names of
  	    the entity bean class that comprise the key.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-role-ref"
  		   type="j2ee:security-role-refType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="query"
  		   type="j2ee:queryType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="exclude-listType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The exclude-listType specifies one or more methods which
  	the Assembler marks to be uncallable.
  
  	If the method permission relation contains methods that are
  	in the exclude list, the Deployer should consider those
  	methods to be uncallable.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="remove-listType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The remove-listType specifies one or more methods which
  	the Assembler marks to remove a stateful session.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="init-listType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The remove-listType specifies one or more methods which
  	the Assembler marks to initialize a stateful session.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="message-driven-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The message-driven element declares a message-driven
  	bean. The declaration consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name.
  	    - a name assigned to the enterprise bean in
  	      the deployment descriptor
  	    - the message-driven bean's implementation class
  	    - an optional declaration of the bean's messaging
  	      type
  	    - the message-driven bean's transaction management type
  	    - an optional declaration of the bean's
  	      message-destination-type
  	    - an optional declaration of the bean's
  	      message-destination-link
  	    - an optional declaration of the message-driven bean's
  	      activation configuration properties
  	    - an optional declaration of the bean's environment
  	      entries
  	    - an optional declaration of the bean's EJB references
  	    - an optional declaration of the bean's local EJB
  	      references
  	    - an optional declaration of the bean's web service
  	      references
  	    - an optional declaration of the security
  	      identity to be used for the execution of the bean's
  	      methods
  	    - an optional declaration of the bean's
  	      resource manager connection factory
  	      references
  	    - an optional declaration of the bean's resource
  	      environment references.
  	    - an optional declaration of the bean's message
  	      destination references
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="messaging-type"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The messaging-type element specifies the message
  	    listener interface of the message-driven bean. If
  	    the messaging-type element is not specified, it is
  	    assumed to be javax.jms.MessageListener.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="transaction-type"
  		   type="j2ee:transaction-typeType"/&gt;
        &lt;xsd:element name="callback-listener"
  		   type="j2ee:callback-listenerType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="interceptor"
  		   type="j2ee:interceptorType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="interceptors"
  		   type="j2ee:interceptorsType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="message-destination-type"
  		   type="j2ee:message-destination-typeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="message-destination-link"
  		   type="j2ee:message-destination-linkType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="activation-config"
  		   type="j2ee:activation-configType"
  		   minOccurs="0"/&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-intfType"&gt;
  
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-intf element allows a method element to
  	differentiate between the methods with the same name and
  	signature that are multiply defined across the home and
  	component interfaces (e.g, in both an enterprise bean's
  	remote and local interfaces or in both an enterprise bean's
  	home and remote interfaces, etc.); the component and web
  	service endpoint interfaces, and so on.
  
  	The method-intf element must be one of the following:
  
  	    Home
  	    Remote
  	    LocalHome
  	    Local
  	    ServiceEndpoint
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Home"/&gt;
  	&lt;xsd:enumeration value="Remote"/&gt;
  	&lt;xsd:enumeration value="LocalHome"/&gt;
  	&lt;xsd:enumeration value="Local"/&gt;
  	&lt;xsd:enumeration value="ServiceEndpoint"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-nameType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-nameType contains a name of an enterprise
  	bean method or the asterisk (*) character. The asterisk is
  	used when the element denotes all the methods of an
  	enterprise bean's client view interfaces.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"/&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-paramsType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-paramsType defines a list of the
  	fully-qualified Java type names of the method parameters.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="method-param"
  		   type="j2ee:java-typeType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The method-param element contains a primitive
  	    or a fully-qualified Java type name of a method
  	    parameter.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="callbackType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The callbackType specifies one or more methods as enterprise
  	bean callbacks (i.e. PostConstruct, PostActivate, PrePassivate,
  	or PreDestroy)
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="annotation"
  		   type="j2ee:annotationType"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="annotationType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The annotationType designates the name of a callback
  	annotation.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:pattern value="(PostConstruct|PostActivate|PrePassivate|PreDestroy)"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="method-permissionType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The method-permissionType specifies that one or more
  	security roles are allowed to invoke one or more enterprise
  	bean methods. The method-permissionType consists of an
  	optional description, a list of security role names or an
  	indicator to state that the method is unchecked for
  	authorization, and a list of method elements.
  
  	The security roles used in the method-permissionType
  	must be defined in the security-role elements of the
  	deployment descriptor, and the methods must be methods
  	defined in the enterprise bean's home, component and/or web
  	service endpoint interfaces.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:choice&gt;
  	&lt;xsd:element name="role-name"
  		     type="j2ee:role-nameType"
  		     maxOccurs="unbounded"/&gt;
  	&lt;xsd:element name="unchecked"
  		     type="j2ee:emptyType"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The unchecked element specifies that a method is
  	      not checked for authorization by the container
  	      prior to invocation of the method.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	&lt;/xsd:element&gt;
        &lt;/xsd:choice&gt;
        &lt;xsd:element name="method"
  		   type="j2ee:methodType"
  		   maxOccurs="unbounded"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="methodType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The methodType is used to denote a method of an enterprise
  	  bean's home, component, and/or web service endpoint
  	  interface, or, in the case of a message-driven bean, the
  	  bean's message listener method, or a set of such
  	  methods. The ejb-name element must be the name of one of the
  	  enterprise beans declared in the deployment descriptor; the
  	  optional method-intf element allows to distinguish between a
  	  method with the same signature that is multiply defined
  	  across the home, component, and/or web service endpoint
  	  interfaces; the method-name element specifies the method
  	  name; and the optional method-params elements identify a
  	  single method among multiple methods with an overloaded
  	  method name.
  
  	  There are three possible styles of using methodType element
  	  within a method element:
  
  	  1.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to all the methods of the
  	     specified enterprise bean's home, component, and/or web
  	     service endpoint interfaces.
  
  	  2.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;METHOD&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to the specified method of
  	     the specified enterprise bean. If there are multiple
  	     methods with the same overloaded name, the element of
  	     this style refers to all the methods with the overloaded
  	     name.
  
  	  3.
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EJBNAME&lt;/ejb-name&gt;
  	      &lt;method-name&gt;METHOD&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;PARAM-1&lt;/method-param&gt;
  		  &lt;method-param&gt;PARAM-2&lt;/method-param&gt;
  		  ...
  		  &lt;method-param&gt;PARAM-n&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	     This style is used to refer to a single method within a
  	     set of methods with an overloaded name. PARAM-1 through
  	     PARAM-n are the fully-qualified Java types of the
  	     method's input parameters (if the method has no input
  	     arguments, the method-params element contains no
  	     method-param elements). Arrays are specified by the
  	     array element's type, followed by one or more pair of
  	     square brackets (e.g. int[][]). If there are multiple
  	     methods with the same overloaded name, this style refers
  	     to all of the overloaded methods.
  
  	  Examples:
  
  	  Style 1: The following method element refers to all the
  	  methods of the EmployeeService bean's home, component,
  	  and/or web service endpoint interfaces:
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	  Style 2: The following method element refers to all the
  	  create methods of the EmployeeService bean's home
  	  interface(s).
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	  Style 3: The following method element refers to the
  	  create(String firstName, String LastName) method of the
  	  EmployeeService bean's home interface(s).
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The following example illustrates a Style 3 element with
  	  more complex parameter types. The method
  	  foobar(char s, int i, int[] iar, mypackage.MyClass mycl,
  	  mypackage.MyClass[][] myclaar) would be specified as:
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-name&gt;foobar&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;char&lt;/method-param&gt;
  		  &lt;method-param&gt;int&lt;/method-param&gt;
  		  &lt;method-param&gt;int[]&lt;/method-param&gt;
  		  &lt;method-param&gt;mypackage.MyClass&lt;/method-param&gt;
  		  &lt;method-param&gt;mypackage.MyClass[][]&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The optional method-intf element can be used when it becomes
  	  necessary to differentiate between a method that is multiply
  	  defined across the enterprise bean's home, component, and/or
  	  web service endpoint interfaces with the same name and
  	  signature.
  
  	  For example, the method element
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Remote&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  can be used to differentiate the create(String, String)
  	  method defined in the remote interface from the
  	  create(String, String) method defined in the remote home
  	  interface, which would be defined as
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Home&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  and the create method that is defined in the local home
  	  interface which would be defined as
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;LocalHome&lt;/method-intf&gt;
  	      &lt;method-name&gt;create&lt;/method-name&gt;
  	      &lt;method-params&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  		  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  	      &lt;/method-params&gt;
  	  &lt;/method&gt;
  
  	  The method-intf element can be used with all th ree Styles
  	  of the method element usage. For example, the following
  	  method element example could be used to refer to all the
  	  methods of the EmployeeService bean's remote home interface.
  
  	  &lt;method&gt;
  	      &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
  	      &lt;method-intf&gt;Home&lt;/method-intf&gt;
  	      &lt;method-name&gt;*&lt;/method-name&gt;
  	  &lt;/method&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="method-intf"
  		   type="j2ee:method-intfType"
  		   minOccurs="0"&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="method-name"
  		   type="j2ee:method-nameType"/&gt;
        &lt;xsd:element name="method-params"
  		   type="j2ee:method-paramsType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="multiplicityType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The multiplicityType describes the multiplicity of the
  	role that participates in a relation.
  
  	The value must be one of the two following:
  
  	    One
  	    Many
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="One"/&gt;
  	&lt;xsd:enumeration value="Many"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="persistence-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The persistence-typeType specifies an entity bean's persistence
  	management type.
  
  	The persistence-type element must be one of the two following:
  
  	    Bean
  	    Container
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Bean"/&gt;
  	&lt;xsd:enumeration value="Container"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="query-methodType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  	&lt;![CDATA[
  
  	  The query-method specifies the method for a finder or select
  	  query.
  
  	  The method-name element specifies the name of a finder or select
  	  method in the entity bean's implementation class.
  
  	  Each method-param must be defined for a query-method using the
  	  method-params element.
  
  	  It is used by the query-method element.
  
  	  Example:
  
  	  &lt;query&gt;
  	      &lt;description&gt;Method finds large orders&lt;/description&gt;
  	      &lt;query-method&gt;
  		  &lt;method-name&gt;findLargeOrders&lt;/method-name&gt;
  		  &lt;method-params&gt;&lt;/method-params&gt;
  	      &lt;/query-method&gt;
  	      &lt;ejb-ql&gt;
  		SELECT OBJECT(o) FROM Order o
  		  WHERE o.amount &amp;gt; 1000
  	      &lt;/ejb-ql&gt;
  	  &lt;/query&gt;
  
  	  ]]&gt;
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="method-name"
  		   type="j2ee:method-nameType"/&gt;
        &lt;xsd:element name="method-params"
  		   type="j2ee:method-paramsType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="queryType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The queryType defines a finder or select
  	query. It contains
  	    - an optional description of the query
  	    - the specification of the finder or select
  	      method it is used by
  		- an optional specification of the result type
  		  mapping, if the query is for a select method
  		  and entity objects are returned.
  		- the EJB QL query string that defines the query.
  
  	Queries that are expressible in EJB QL must use the ejb-ql
  	element to specify the query. If a query is not expressible
  	in EJB QL, the description element should be used to
  	describe the semantics of the query and the ejb-ql element
  	should be empty.
  
  	The result-type-mapping is an optional element. It can only
  	be present if the query-method specifies a select method
  	that returns entity objects.  The default value for the
  	result-type-mapping element is "Local".
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType" minOccurs="0"/&gt;
        &lt;xsd:element name="query-method"
  		   type="j2ee:query-methodType"/&gt;
        &lt;xsd:element name="result-type-mapping"
  		   type="j2ee:result-type-mappingType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="ejb-ql"
  		   type="j2ee:xsdStringType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="relationship-role-sourceType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The relationship-role-sourceType designates the source of a
  	role that participates in a relationship. A
  	relationship-role-sourceType is used by
  	relationship-role-source elements to uniquely identify an
  	entity bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="relationshipsType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The relationshipsType describes the relationships in
  	which entity beans with container-managed persistence
  	participate. The relationshipsType contains an optional
  	description; and a list of ejb-relation elements, which
  	specify the container managed relationships.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="ejb-relation"
  		   type="j2ee:ejb-relationType"
  		   maxOccurs="unbounded"&gt;
  
  	&lt;xsd:unique name="role-name-uniqueness"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The ejb-relationship-role-name contains the name of a
  	      relationship role. The name must be unique within
  	      a relationship, but can be reused in different
  	      relationships.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	  &lt;xsd:selector
  	       xpath=".//j2ee:ejb-relationship-role-name"/&gt;
  	  &lt;xsd:field
  	       xpath="."/&gt;
  	&lt;/xsd:unique&gt;
        &lt;/xsd:element&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="result-type-mappingType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The result-type-mappingType is used in the query element to
  	specify whether an abstract schema type returned by a query
  	for a select method is to be mapped to an EJBLocalObject or
  	EJBObject type.
  
  	The value must be one of the following:
  
  	    Local
  	    Remote
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Local"/&gt;
  	&lt;xsd:enumeration value="Remote"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="security-identityType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The security-identityType specifies whether the caller's
  	security identity is to be used for the execution of the
  	methods of the enterprise bean or whether a specific run-as
  	identity is to be used. It contains an optional description
  	and a specification of the security identity to be used.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:element name="description"
  		   type="j2ee:descriptionType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:choice&gt;
  	&lt;xsd:element name="use-caller-identity"
  		     type="j2ee:emptyType"&gt;
  	  &lt;xsd:annotation&gt;
  	    &lt;xsd:documentation&gt;
  
  	      The use-caller-identity element specifies that
  	      the caller's security identity be used as the
  	      security identity for the execution of the
  	      enterprise bean's methods.
  
  	    &lt;/xsd:documentation&gt;
  	  &lt;/xsd:annotation&gt;
  	&lt;/xsd:element&gt;
  	&lt;xsd:element name="run-as"
  		     type="j2ee:run-asType"/&gt;
        &lt;/xsd:choice&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="session-beanType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The session-beanType declares an session bean. The
  	declaration consists of:
  
  	    - an optional description
  	    - an optional display name
  	    - an optional icon element that contains a small and a large
  	      icon file name
  	    - a name assigned to the enterprise bean
  	      in the deployment description
  	    - the names of the session bean's remote home and
  	      remote interfaces, if any
  	    - the names of the session bean's local home and
  	      local interfaces, if any
  	    - the name of the session bean's web service endpoint
  	      interface, if any
  	    - the session bean's implementation class
  	    - the session bean's state management type
  	    - the session bean's transaction management type
  	    - an optional declaration of the bean's
  	      environment entries
  	    - an optional declaration of the bean's EJB references
  	    - an optional declaration of the bean's local
  	      EJB references
  	    - an optional declaration of the bean's web
  	      service references
  	    - an optional declaration of the security role
  	      references
  	    - an optional declaration of the security identity
  	      to be used for the execution of the bean's methods
  	    - an optional declaration of the bean's resource
  	      manager connection factory references
  	    - an optional declaration of the bean's resource
  	      environment references.
  	    - an optional declaration of the bean's message
  	      destination references
  
  	The elements that are optional are "optional" in the sense
  	that they are omitted when if lists represented by them are
  	empty.
  
  	Either both the local-home and the local elements or both
  	the home and the remote elements must be specified for the
  	session bean.
  
  	The service-endpoint element may only be specified if the
  	bean is a stateless session bean.
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
  
      &lt;xsd:sequence&gt;
        &lt;xsd:group ref="j2ee:descriptionGroup"/&gt;
        &lt;xsd:element name="ejb-name"
  		   type="j2ee:ejb-nameType"/&gt;
        &lt;xsd:element name="home"
  		   type="j2ee:homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="remote"
  		   type="j2ee:remoteType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local-home"
  		   type="j2ee:local-homeType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="local"
  		   type="j2ee:localType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="service-endpoint"
  		   type="j2ee:fully-qualified-classType"
  		   minOccurs="0"&gt;
  	&lt;xsd:annotation&gt;
  	  &lt;xsd:documentation&gt;
  
  	    The service-endpoint element contains the
  	    fully-qualified name of the enterprise bean's web
  	    service endpoint interface. The service-endpoint
  	    element may only be specified for a stateless
  	    session bean. The specified interface must be a
  	    valid JAX-RPC service endpoint interface.
  
  	  &lt;/xsd:documentation&gt;
  	&lt;/xsd:annotation&gt;
        &lt;/xsd:element&gt;
        &lt;xsd:element name="ejb-class"
  		   type="j2ee:ejb-classType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="session-type"
  		   type="j2ee:session-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="transaction-type"
  		   type="j2ee:transaction-typeType"
                     minOccurs="0"/&gt;
        &lt;xsd:element name="callback-listener"
  		   type="j2ee:callback-listenerType"
  		   minOccurs="0"/&gt;
        &lt;xsd:element name="interceptor"
  		   type="j2ee:interceptorType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="interceptors"
  		   type="j2ee:interceptorsType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:group ref="j2ee:jndiEnvironmentRefsGroup"/&gt;
        &lt;xsd:element name="security-role-ref"
  		   type="j2ee:security-role-refType"
  		   minOccurs="0"
  		   maxOccurs="unbounded"/&gt;
        &lt;xsd:element name="security-identity"
  		   type="j2ee:security-identityType"
  		   minOccurs="0"/&gt;
      &lt;/xsd:sequence&gt;
      &lt;xsd:attribute name="id" type="xsd:ID"/&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="session-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The session-typeType describes whether the session bean is a
  	stateful session or stateless session. It is used by
  	session-type elements.
  
  	The value must be one of the two following:
  
  	    Stateful
  	    Stateless
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Stateful"/&gt;
  	&lt;xsd:enumeration value="Stateless"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="trans-attributeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The trans-attributeType specifies how the container must
  	manage the transaction boundaries when delegating a method
  	invocation to an enterprise bean's business method.
  
  	The value must be one of the following:
  
  	    NotSupported
  	    Supports
  	    Required
  	    RequiresNew
  	    Mandatory
  	    Never
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="NotSupported"/&gt;
  	&lt;xsd:enumeration value="Supports"/&gt;
  	&lt;xsd:enumeration value="Required"/&gt;
  	&lt;xsd:enumeration value="RequiresNew"/&gt;
  	&lt;xsd:enumeration value="Mandatory"/&gt;
  	&lt;xsd:enumeration value="Never"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;!-- **************************************************** --&gt;
  
    &lt;xsd:complexType name="transaction-typeType"&gt;
      &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
  
  	The transaction-typeType specifies an enterprise bean's
  	transaction management type.
  
  	The transaction-type must be one of the two following:
  
  	    Bean
  	    Container
  
        &lt;/xsd:documentation&gt;
      &lt;/xsd:annotation&gt;
      &lt;xsd:simpleContent&gt;
        &lt;xsd:restriction base="j2ee:string"&gt;
  	&lt;xsd:enumeration value="Bean"/&gt;
  	&lt;xsd:enumeration value="Container"/&gt;
        &lt;/xsd:restriction&gt;
      &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;
  
  &lt;/xsd:schema&gt;
  
  
  
  
  1.1      date: 2005/07/29 16:35:54;  author: bdecoste;  state: Exp;jboss-ejb3/src/resources/schema/jboss_5_0.dtd
  
  Index: jboss_5_0.dtd
  ===================================================================
  &lt;?xml version='1.0' encoding='UTF-8' ?&gt;
  
  &lt;!--
  This is the XML DTD for the JBoss 4.0 EJB deployment descriptor.
  The DOCTYPE is:
  
  $Id: jboss_4_0.dtd,v 1.20.2.9 2005/04/05 18:58:55 ejort Exp $
  
    &lt;!DOCTYPE jboss PUBLIC
        "-//JBoss//DTD JBOSS 4.0//EN"
        "<a href="http://www.jboss.org/j2ee/dtd/jboss_4_0.dtd" target="_new">http://www.jboss.org/j2ee/dtd/jboss_4_0.dtd</a>"&gt;
  
  Overview of the architecture of jboss.xml
  
  &lt;jboss&gt;
  
    &lt;enforce-ejb-restrictions /&gt;
    &lt;security-domain /&gt;
    &lt;unauthenticated-principal /&gt;
  
    &lt;enterprise-beans&gt;
  
      &lt;entity&gt;
        &lt;ejb-name /&gt;
        &lt;jndi-name /&gt;
        &lt;interceptor-stack /&gt;
  	&lt;client-bind-url /&gt;
        &lt;binding-factory /&gt;
        &lt;local-jndi-name /&gt;
        &lt;call-by-value&gt;
        &lt;read-only&gt;
        &lt;call-by-value&gt;
        &lt;aop-domain-name&gt;
        &lt;security-proxy&gt;
        &lt;ejb-ref&gt;
        &lt;ejb-local-ref&gt;
        &lt;service-ref&gt;
        &lt;security-identity&gt;
          &lt;run-as-principal&gt;
        &lt;/security-identity&gt;
        &lt;resource-ref&gt;
          &lt;res-ref-name /&gt;
          &lt;resource-name /&gt;
        &lt;/resource-ref&gt;
        &lt;resource-env-ref&gt;
        &lt;clustered /&gt;
      &lt;/entity&gt;
  
      &lt;session&gt;
        &lt;ejb-name /&gt;
        &lt;jndi-name /&gt;
        &lt;interceptor-stack /&gt;
  	&lt;client-bind-url /&gt;
        &lt;binding-factory /&gt;
        &lt;local-jndi-name /&gt;
        &lt;call-by-value&gt;
        &lt;aop-domain-name&gt;
        &lt;security-proxy&gt;
        &lt;ejb-ref&gt;
        &lt;ejb-local-ref&gt;
        &lt;service-ref&gt;
        &lt;security-identity&gt;
          &lt;run-as-principal&gt;
        &lt;/security-identity&gt;
        &lt;resource-ref&gt;
          &lt;res-ref-name /&gt;
          &lt;resource-name /&gt;
        &lt;/resource-ref&gt;
        &lt;resource-env-ref&gt;
        &lt;clustered/&gt;
        &lt;port-component&gt;
          &lt;port-component-name&gt;
          &lt;port-component-uri&gt;
          &lt;auth-method&gt;
          &lt;transport-guarantee&gt;
        &lt;/port-component&gt;
      &lt;/session&gt;
  
      &lt;message-driven&gt;
        &lt;ejb-name&gt;
        &lt;destination-jndi-name&gt;
        &lt;mdb-user&gt;
        &lt;mdb-passwd&gt;
        &lt;mdb-client-id&gt;
        &lt;mdb-subscription-id&gt;
        &lt;resource-adapter-name&gt;
        &lt;aop-domain-name&gt;
        &lt;security-proxy&gt;
        &lt;ejb-ref&gt;
        &lt;service-ref&gt;
        &lt;security-identity&gt;
          &lt;run-as-principal&gt;
        &lt;/security-identity&gt;
        &lt;resource-ref&gt;
        &lt;resource-env-ref&gt;
      &lt;/message-driven&gt;
  
      &lt;webservice-description&gt;
        &lt;webservice-description-name&gt;
        &lt;wsdl-publish-location&gt;
      &lt;/webservice-description&gt;
  
    &lt;/enterprise-beans&gt;
  
    &lt;assembly-descriptor&gt;
      &lt;security-role&gt;
        &lt;role-name&gt;
        &lt;principal-name&gt;
      &lt;/security-role&gt;
    &lt;/assembly-descriptor&gt;
  
    &lt;resource-managers&gt;
  
      &lt;resource-manager&gt;
        &lt;res-name /&gt;
        &lt;res-jndi-name /&gt;
      &lt;/resource-manager&gt;
  
      &lt;resource-manager&gt;
        &lt;res-name /&gt;
        &lt;res-url /&gt;
      &lt;/resource-manager&gt;
  
    &lt;/resource-managers&gt;
  
    &lt;container-configurations&gt;
  
      &lt;container-configuration&gt;
        &lt;container-name /&gt;
        &lt;container-interceptors /&gt;
        &lt;client-interceptors /&gt;
        &lt;instance-pool /&gt;
        &lt;instance-cache /&gt;
        &lt;persistence-manager /&gt;
        &lt;web-class-loader /&gt;
        &lt;locking-policy /&gt;
        &lt;container-cache-conf /&gt;
        &lt;container-pool-conf /&gt;
        &lt;commit-option /&gt;
        &lt;optiond-refresh-rate /&gt;
        &lt;security-domain/&gt;
      &lt;/container-configuration&gt;
  
    &lt;/container-configurations&gt;
  
  &lt;/jboss&gt;
  --&gt;
  
  &lt;!--
    The jboss element is the root element of the jboss.xml file. It
    contains all the information used by jboss but not described in the
    ejb-jar.xml file. All of it is optional.
  
    1- the application assembler can define custom container configurations
       for the beans. Standard configurations are provided in standardjboss.xml
    2- the deployer can override the jndi names under which the beans are deployed
    3- the deployer can specify runtime jndi names for resource managers.
  
  --&gt;
  &lt;!ELEMENT jboss (loader-repository?, jmx-name?, enforce-ejb-restrictions?,
   security-domain?, missing-method-permissions-excluded-mode?,
   unauthenticated-principal?, exception-on-rollback? , enterprise-beans?, assembly-descriptor?,
   resource-managers?, invoker-proxy-bindings?, container-configurations?)&gt;
  
  &lt;!-- The loader-repository specifies the name of the UnifiedLoaderRepository
     MBean to use for the ear to provide ear level scoping of classes deployed
     in the ear. It is a unique JMX ObjectName string. It may also specify
     an arbitrary configuration by including a loader-repository-config element.
  
  Examples:
     &lt;loader-repository&gt;jboss.test:loader=cts-cmp2v1-sar.ear&lt;/loader-repository&gt;
  
     &lt;loader-repository loaderRepositoryClass='dot.com.LoaderRepository'&gt;
        &lt;value&gt;dot.com:loader=unique-archive-name&lt;/value&gt;
        &lt;loader-repository-config configParserClass='dot.com.LoaderParser'&gt;
           &lt;value&gt;java2ParentDelegaton=true&lt;/value&gt;
        &lt;/loader-repository-config&gt;
     &lt;/loader-repository&gt;
  --&gt;
  &lt;!ELEMENT loader-repository (value | loader-repository-config)*&gt;
  &lt;!-- The loaderRepositoryClass attribute gives the classname of the
  org.jboss.mx.loading.LoaderRepository implementation.
  --&gt;
  &lt;!ATTLIST loader-repository loaderRepositoryClass CDATA #IMPLIED&gt;
  
  &lt;!-- The loader-repository-config element specifies any arbitrary configuration
  fragment for use in configuring the loader-repository instance. The actual
  content of this element is specific to the loaderRepositoryClass and the
  code parsing the element.
  --&gt;
  &lt;!ELEMENT loader-repository-config (value)&gt;
  &lt;!-- The configParserClass attribute gives the classname of the
  org.jboss.mx.loading.LoaderRepositoryFactory.LoaderRepositoryConfigParser
  implementation to use to parse the loader-repository-config content.
  --&gt;
  &lt;!ATTLIST loader-repository-config configParserClass CDATA #IMPLIED&gt;
  
  &lt;!ELEMENT value (#PCDATA)&gt;
  
  &lt;!-- The jmx-name element allows one to specify the JMX ObjectName to use
  for the MBean associated with the ejb-jar module. This must be a unique
  name and valid JMX ObjectName string.
  
     Used in: jboss
  --&gt;
  &lt;!ELEMENT jmx-name (#PCDATA)&gt;
  
  &lt;!--
    The enforce-ejb-restrictions element tells the container to enforce ejb1.1 restrictions
    It must be one of the following :
      &lt;enforce-ejb-restrictions&gt;true&lt;/enforce-ejb-restrictions&gt;
      &lt;enforce-ejb-restrictions&gt;false&lt;/enforce-ejb-restrictions&gt;
  
    Used in: jboss
  --&gt;
  &lt;!ELEMENT enforce-ejb-restrictions (#PCDATA)&gt;
  
  &lt;!--
    The security-domain element specifies the JNDI name of the security
    manager that implements the EJBSecurityManager and RealmMapping for
    the domain. When specified at the jboss level it specifies the security
    domain for all j2ee components in the deployment unit.
    One can override the global security-domain at the container
    level using the security-domain element at the container-configuration
    level.
  
    Used in: jboss, container-configuration
  --&gt;
  &lt;!ELEMENT security-domain (#PCDATA)&gt;
  
  &lt;!-- The missing-method-permissions-excluded-mode determines the treatment
  of missing method-permission mappings in the ejb-jar descriptor. The ejb 2.1
  spec states: "It is possible that some methods are not assigned to any security
  roles nor contained in the exclude-list element. In this case, it is the
  responsibility of the Deployer to assign method permissions for all of the
  unspecified methods, either by assigning them to security roles, or by marking
  them as unchecked." The missing-method-permissions-excluded-mode is a boolean
  that allows the deployer to globally indicate that all methods without a
  method-permission element should be treated as excluded(= true and the default),
  or that methods without a method-permission element should be treated as
  unchecked(= false)
  
  &lt;missing-method-permissions-excluded-mode&gt;true&lt;/missing-method-permissions-excluded-mode&gt;
  &lt;missing-method-permissions-excluded-mode&gt;false&lt;/missing-method-permissions-excluded-mode&gt;
  
  --&gt;
  &lt;!ELEMENT missing-method-permissions-excluded-mode (#PCDATA)&gt;
  
  &lt;!--
    The unauthenticated-principal element specifies the name of the principal
    that will be returned by the EJBContext.getCallerPrincipal() method if there
    is no authenticated user. This Principal has no roles or privaledges to call
    any other beans.
  --&gt;
  &lt;!ELEMENT unauthenticated-principal (#PCDATA)&gt;
  
  &lt;!-- The invoker-proxy-bindings defines the invokers available for use with
  the ejb container configurations.
  --&gt;
  &lt;!ELEMENT invoker-proxy-bindings (invoker-proxy-binding*)&gt;
  &lt;!-- The invoker-proxy-binding defines an invoker service and proxy factory
  --&gt;
  &lt;!ELEMENT invoker-proxy-binding (name, invoker-mbean, proxy-factory, proxy-factory-config)&gt;
  &lt;!-- The name gives a unique name for the invoker-proxy-binding
  --&gt;
  &lt;!ELEMENT name (#PCDATA)&gt;
  &lt;!-- The invoker-mbean gives the JMX ObjectName of the invoker MBean service
  --&gt;
  &lt;!ELEMENT invoker-mbean (#PCDATA)&gt;
  &lt;!-- The org.jboss.ejb.EJBProxyFactory implementation class
  --&gt;
  &lt;!ELEMENT proxy-factory (#PCDATA)&gt;
  &lt;!-- The proxy-factory-config defines the client-interceptors stack
  and other configuration options to use for the various EJB proxies.
  --&gt;
  &lt;!ELEMENT proxy-factory-config (client-interceptors?, endpoint-interceptors? , web-class-loader? ,
  activation-config?, JMSProviderAdapterJNDI? , ServerSessionPoolFactoryJNDI? , 
  CreateJBossMQDestination? , MinimumSize? , MaximumSize? ,
  KeepAliveMillis? , MaxMessages? , MDBConfig? , poa? , register-ejbs-in-jnp-context? , 
  jnp-context? , interface-repository-supported?)&gt;
  
  &lt;!--
    The jndi name of the jms provider adapter in the java:/ namespace.
    This is mandatory for an MDB and must implement
    org.jboss.jms.jndi.JMSProviderAdapter
  
    Used in: proxy-factory-config for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT JMSProviderAdapterJNDI (#PCDATA)&gt;
  &lt;!--
    The jndi name of the session pool in the java:/ namespace.
    This is mandatory for an MDB and must implement
    org.jboss.jms.asf.ServerSessionPoolFactory
  
    Used in: proxy-factory-config for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT ServerSessionPoolFactoryJNDI (#PCDATA)&gt;
  &lt;!--
    Whether to create destinations in JBossMQ if the
    destination cannot be found.
  
    Used in: proxy-factory-config for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT CreateJBossMQDestination (#PCDATA)&gt;
  &lt;!--
    The maximum number of messages parameter for the mdb's
    connection consumer.
  
    Used in: proxy-factory-config for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT MaxMessages (#PCDATA)&gt;
  &lt;!--
    Configuration for the MDB
  
    Used in: proxy-factory-config for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT MDBConfig (ReconnectIntervalSec , DeliveryActive? , DLQConfig?)&gt;
  &lt;!--
    The time to wait (in seconds) before trying to recover
    the connection to the JMS server.
  
    Used in: MDBConfig
  --&gt;
  &lt;!ELEMENT ReconnectIntervalSec (#PCDATA)&gt;
  &lt;!--
    Whether delivery of messages is active at startup,
    valid values are "True" or "False".
  
    Used in: MDBConfig
  --&gt;
  &lt;!ELEMENT DeliveryActive (#PCDATA)&gt;
  &lt;!--
    Configuration for an MDB's dead letter queue, used
    when messages are redelivered too many times.
  
    Used in: MDBConfig
  --&gt;
  &lt;!ELEMENT DLQConfig (DestinationQueue , MaxTimesRedelivered , TimeToLive, DLQUser?,  DLQPassword?)&gt;
  &lt;!--
    The jndi name of the queue to use as the dead letter queue.
  
    Used in: DLQConfig
  --&gt;
  &lt;!ELEMENT DestinationQueue (#PCDATA)&gt;
  &lt;!--
    The maximum number of times a message is redelivered before it
    is placed in the dead letter queue.
  
    Used in: DLQConfig
  --&gt;
  &lt;!ELEMENT MaxTimesRedelivered (#PCDATA)&gt;
  &lt;!--
    The time-to-live of the message in the dead letter queue.
    See javax.jms.Message
  
    Used in: DLQConfig
  --&gt;
  &lt;!ELEMENT TimeToLive (#PCDATA)&gt;
  
  &lt;!--
    The user for the dlq connection
  
    Used in: DLQConfig
  --&gt;
  &lt;!ELEMENT DLQUser (#PCDATA)&gt;
  
  &lt;!--
    The password for the dlq connection
  
    Used in: DLQConfig
  --&gt;
  &lt;!ELEMENT DLQPassword (#PCDATA)&gt;
  &lt;!--
    The portable object adapter usage, one of
    &lt;poa&gt;per-servent&lt;/poa&gt;
    &lt;poa&gt;shared&lt;/poa&gt;
  
    Used in: proxy-factory-config for IORFactory
  --&gt;
  &lt;!ELEMENT poa (#PCDATA)&gt;
  &lt;!--
    Whether to register ejbs in jnp (jndi)
  
    Used in: proxy-factory-config for IORFactory
  --&gt;
  &lt;!ELEMENT register-ejbs-in-jnp-context (#PCDATA)&gt;
  &lt;!--
    The jndi context in which to register ejbs
  
    Used in: proxy-factory-config for IORFactory
  --&gt;
  &lt;!ELEMENT jnp-context (#PCDATA)&gt;
  &lt;!--
    Whether a deployed ejb has its own CORBA interface repository or not
  
    Used in: proxy-factory-config for IORFactory
  --&gt;
  &lt;!ELEMENT interface-repository-supported (#PCDATA)&gt;
  
  &lt;!--
    The enterprise-beans element contains additional information about
    the beans. These informations, such as jndi names, resource managers and
    container configurations, are specific to jboss and not described in
    ejb-jar.xml.
  
    jboss will provide a standard behaviour if no enterprise-beans element
    is found, see container-configurations, jndi-name and resource-managers
    for defaults.
  
    Used in: jboss
  --&gt;
  &lt;!ELEMENT enterprise-beans ((session | entity | message-driven)*, webservice-description*)&gt;
  
  &lt;!--
    The entity element holds information specific to jboss and not declared
    in ejb-jar.xml about an entity bean, such as jndi name, container
    configuration, and resource managers. (see tags for details)
    The bean should already be declared in ejb-jar.xml, with the same
    ejb-name.
  
    Used in: enterprise-beans
  --&gt;
  &lt;!ELEMENT entity (ejb-name , jndi-name? , interceptor-stack?, client-bind-url?, binding-factory?, local-jndi-name? , call-by-value?, read-only? , exception-on-rollback?,
   aop-domain-name? , invoker-bindings?, security-proxy? , ejb-ref* , ejb-local-ref* , service-ref*, security-identity? ,
   resource-ref* , resource-env-ref*, message-destination-ref* , method-attributes? , clustered? ,
   cache-invalidation? , cache-invalidation-config?, depends*, ior-security-config?)&gt;
  
  &lt;!--
    The session element holds information specific to jboss and not declared
    in ejb-jar.xml about a session bean, such as jndi name, container
    configuration, and resource managers. (see tags for details)
    The bean should already be declared in ejb-jar.xml, with the same
    ejb-name.
  
    Used in: enterprise-beans
  --&gt;
  &lt;!ELEMENT session (ejb-name , jndi-name? , interceptor-stack?, client-bind-url?, binding-factory?, local-jndi-name?, call-by-value?, exception-on-rollback?, aop-domain-name?, 
   invoker-bindings?, security-proxy? , ejb-ref* ,  ejb-local-ref* , service-ref*, security-identity? ,
   resource-ref* , resource-env-ref*, message-destination-ref* , clustered? , method-attributes?, depends*,
   ior-security-config?, port-component*)&gt;
  
  &lt;!--
    The message-driven element holds information specific to jboss and not declared
    in ejb-jar.xml about a message-driven bean, such as container
    configuration and resources.
    The bean should already be declared in ejb-jar.xml, with the same
    ejb-name.
  
    Used in: enterprise-beans
  --&gt;
  &lt;!ELEMENT message-driven (ejb-name , activation-config?, destination-jndi-name? ,
   mdb-user?,  mdb-passwd? , mdb-client-id? , mdb-subscription-id? , resource-adapter-name? ,
   exception-on-rollback? , aop-domain-name? , invoker-bindings?,
   security-proxy? , ejb-ref* ,  ejb-local-ref*, service-ref*, security-identity?, resource-ref*,
   resource-env-ref*, message-destination-ref*, depends*, ior-security-config?)&gt;
  
  &lt;!--
    The ejb-name element gives the name of the bean, it must correspond to
    an ejb-name element in ejb-jar.xml
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT ejb-name (#PCDATA)&gt;
  
  &lt;!--
    The jndi-name element gives the actual jndi name under which
    the bean will be deployed when used in the entity, session and
    message-driven elements. If it is not provided jboss will assume
    "jndi-name" = "ejb-name"
  
    When used in the ejb-ref,  ejb-local-ref, resource-ref, resource-env-ref, 
    message-destination-ref, message-destination elements this specifies the jndi name to 
    which the reference should link.
  
    Used in: entity, session and message-driven
      ejb-ref, resource-ref, resource-env-ref
  --&gt;
  &lt;!ELEMENT jndi-name (#PCDATA)&gt;
  
  &lt;!ELEMENT interceptor-stack (#PCDATA)&gt;
  
  &lt;!ELEMENT client-bind-url (#PCDATA)&gt;
  
  &lt;!ELEMENT binding-factory (#PCDATA)&gt;
  
  &lt;!--
    The JNDI name under with the local home interface should be bound
  
    Used in: entity and session
  --&gt;
  &lt;!ELEMENT local-jndi-name (#PCDATA)&gt;
  
  &lt;!--
    Determine if the bean should use by value call semantics
  
    Used in: entity and session
  --&gt;
  &lt;!ELEMENT call-by-value (#PCDATA)&gt;
  
  &lt;!--
    The read-only element flags an entity bean as read only.
    The bean will never be ejbStored. Defaults to false.
    It must be one of the following :
      &lt;read-only&gt;true&lt;/read-only&gt;
      &lt;read-only&gt;false&lt;/read-only&gt;
  
    Used in: entity
  --&gt;
  &lt;!ELEMENT read-only (#PCDATA)&gt;
  
  &lt;!--
    Whether to throw an exception if the CMT controlled
    transaction is no longer active (e.g. marked rollback)
    but the application has not itself thrown an exception.
    If the bean specifies false, it uses the
    jboss/exception-on-rollback config.
    Defaults to false.
    It must be one of the following :
      &lt;exception-on-rollback&gt;true&lt;/exception-on-rollback&gt;
      &lt;exception-on-rollback&gt;false&lt;/exception-on-rollback&gt;
  
    Used in: jboss, session, entity and message-driven
  --&gt;
  &lt;!ELEMENT exception-on-rollback (#PCDATA)&gt;
  
  &lt;!--
    The aop-domain-name element gives the name of the container
    configuration for this bean. It must match one of the container-name
    tags in the container-configurations section, or one of the standard
    configurations. If no element is provided, jboss will automatically use the
    right standard configuration, see container-configurations.
  
    Note: unlike earlier releases, this element may not be specified as an
     empty element to achieve the same effect as not specifying the element.
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT aop-domain-name (#PCDATA)&gt;
  
  &lt;!-- The depends element gives a JMX ObjectName of a service on which the
  container or ejb depends.
  --&gt;
  &lt;!ELEMENT depends (#PCDATA)&gt;
  
  &lt;!-- The queue/topic jndi name from which we receive messages --&gt;
  &lt;!ELEMENT destination-jndi-name (#PCDATA)&gt;
  
  &lt;!-- The optional user for the jms connection that delivers messages --&gt;
  &lt;!ELEMENT mdb-user (#PCDATA)&gt;
  
  &lt;!-- The optional password for the jms connection that delivers messages --&gt;
  &lt;!ELEMENT mdb-passwd (#PCDATA)&gt;
  
  &lt;!-- The optional client-id for the jms connection that delivers messages --&gt;
  &lt;!ELEMENT mdb-client-id (#PCDATA)&gt;
  
  &lt;!-- The subscription name for topic delivery --&gt;
  &lt;!ELEMENT mdb-subscription-id (#PCDATA)&gt;
  
  &lt;!-- The name of the rar used in JCA 1.5 message inflow
  e.g.
     &lt;resource-adapter-name&gt;jms-ra.rar&lt;/resource-adapter-name&gt;
  or for embedded rars
     &lt;resource-adapter-name&gt;myapp.ear#myconnector.rar&lt;/resource-adapter-name&gt;
  --&gt;
  &lt;!ELEMENT resource-adapter-name (#PCDATA)&gt;
  
  &lt;!-- The security-proxy gives the class name of the security proxy implementation.
    This may be an instance of org.jboss.security.SecurityProxy, or an
    just an object that implements methods in the home or remote interface
    of an EJB without implementating any common interface.
  
        Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT security-proxy (#PCDATA)&gt;
  
  &lt;!--
    The ejb-ref element is used to give the jndi-name of an external
    ejb reference. In the case of an external ejb reference, you don't
    provide a ejb-link element in ejb-jar.xml, but you provide a jndi-name
    in jboss.xml
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT ejb-ref (ejb-ref-name , jndi-name)&gt;
  
  &lt;!--
    The ejb-ref-name element is the name of the ejb reference as given in
    ejb-jar.xml.
  
    Used in: ejb-ref
  --&gt;
  &lt;!ELEMENT ejb-ref-name (#PCDATA)&gt;
  
  
  &lt;!--
    The ejb-local-ref element is used to give the jndi-name of an external
    ejb reference. This is an alternative to using ejb-link in ejb-jar.xml
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT ejb-local-ref (ejb-ref-name , local-jndi-name)&gt;
  
  &lt;!-- The service-ref element provides jboss specific deployment values to
  the web service reference in ejb-jar.xml.
  Example:
      &lt;service-ref&gt;
          &lt;service-ref-name&gt;OrganizationService&lt;/service-ref-name&gt;
          &lt;wsdl-override&gt;file:/wsdlRepository/organization-service.wsdl&lt;/wsdl-override&gt;
      &lt;/service-ref&gt;
  
      &lt;service-ref&gt;
          &lt;service-ref-name&gt;OrganizationService&lt;/service-ref-name&gt;
          &lt;port-component-ref&gt;
            &lt;service-endpoint-interface&gt;com.dot.SEI&lt;/service-endpoint-interface&gt;
            &lt;call-property&gt;
              &lt;prop-name&gt;X&lt;/prop-name&gt;
              &lt;prop-value&gt;Y&lt;/prop-value&gt;
            &lt;/call-property&gt;
          &lt;/port-component-ref&gt;
      &lt;/service-ref&gt;
  --&gt;
  &lt;!ELEMENT service-ref (service-ref-name, port-component-ref*, wsdl-override?, call-property*)&gt;
  
  &lt;!-- The service-ref-name element gives the ENC relative name used
  in the ejb-jar.xml service-ref-name element.
  
  Used in: service-ref
  --&gt;
  &lt;!ELEMENT service-ref-name (#PCDATA)&gt;
  
  &lt;!-- The port-component-ref element provides additional information about
  the standard j2ee service-reference/port-component-ref. Currently this includes
  properties that should be associated with the call/stub for the port.
  
  Used in: service-ref
  --&gt;
  &lt;!ELEMENT port-component-ref (service-endpoint-interface?, call-property*)&gt;
  
  &lt;!-- Fully qualified name of service endpoint interface
  --&gt;
  &lt;!ELEMENT service-endpoint-interface ( #PCDATA )&gt;
  
  &lt;!-- Arbitrary jaxrpc property values that should be set on a Call object
  before it's returned to the web service client. The valid properties can be any
  properties supported by the jaxrpc Call implementation.
  --&gt;
  &lt;!ELEMENT call-property ( prop-name, prop-value )&gt;
  
  &lt;!-- The string value of a property name
  --&gt;
  &lt;!ELEMENT prop-name (#PCDATA)&gt;
  
  &lt;!-- The string value of a property value
  --&gt;
  &lt;!ELEMENT prop-value (#PCDATA)&gt;
  
  &lt;!--
    The security-identity element specifies whether a specific run-as identity is to be
    used. If there is a run-as role defined for an enterprise bean, there can also be a
    run-as-principal define here. If you don't define a run-as principal the callee will
    see ctx.getCallerPrincipal() == 'anonymous'
  
    Used in: entity, message-driven, session
  --&gt;
  &lt;!ELEMENT security-identity (run-as-principal)&gt;
  
  &lt;!--
    The run-as-principal element is the name of the principal that is used
    when the enterprise bean calls out with a run-as role.
  
    Used in: security-identity
  --&gt;
  &lt;!ELEMENT run-as-principal (#PCDATA)&gt;
  
  &lt;!--
    The resource-env-ref element gives a mapping between the "code name"
    of a env resource (res-ref-name, provided by the Bean Developer) and
    its deployed JNDI name.
  
    Used in: session, entity, message-driven
  --&gt;
  &lt;!ELEMENT resource-env-ref (resource-env-ref-name , jndi-name)&gt;
  
  &lt;!--
    The resource-env-ref-name element gives the "code name" of a resource. It is
    provided by the Bean Developer.
  
    Used in: resource-env-ref
  --&gt;
  &lt;!ELEMENT resource-env-ref-name (#PCDATA)&gt;
  
  &lt;!--
    The method-attributes element can be used to specify which methods are read only
    or idempotent.  This is used to reduce the need for locks and replication.
  --&gt;
  &lt;!ELEMENT method-attributes (method*)&gt;
  
  &lt;!--
    The method element is used to specify attributes for one method or all those
    matching a pattern startingstring*.
  --&gt;
  &lt;!ELEMENT method (method-name, read-only?, idempotent?, transaction-timeout?)&gt;
  
  &lt;!--
    The method-name element specifies a complete method name or a pattern consisting of an
    initial match followed by '*'
  --&gt;
  &lt;!ELEMENT method-name (#PCDATA)&gt;
  
  &lt;!--
    The idempotent element is used in method-attributes to indicate that a method
    is completely stateless. Really the same as read-only and should be dropped.
  --&gt;
  &lt;!ELEMENT idempotent (#PCDATA)&gt;
  
  &lt;!--
    The transaction timeout in seconds (overriding the default timeout).
    This will only work for Required (where the method starts the transaction) and RequiresNew.
    The special value of 0 (zero) uses the default timeout configured on jboss:service=TransactionManager
    NOTE: any subsequent use of RequiresNew that is not explicitly overridden will use this value.
  --&gt;
  &lt;!ELEMENT transaction-timeout (#PCDATA)&gt;
  
  &lt;!--
    The clustered element allows to specify cluster specific settings.
    WARNING: session-state-manager-jndi-name is only for SFSB.
  
    Used in: session, entity, container-configuration
  --&gt;
  &lt;!ELEMENT clustered (partition-name? , load-balance-policy? ,
    session-state-manager-jndi-name?)&gt;
  
  &lt;!--
    The partition-name element indicates the name of the HAPartition to be used
    by the container to exchange clustering information. This is a name and *not*
    a JNDI name. Given name will be prefixed by "/HASessionState/" by the container to get
    the actual JNDI name of the HAPartition. If not, jboss will assume partition-name = "DefaultPartition".
  
    Used in: entity and session (in clustered element)
  --&gt;
  &lt;!ELEMENT partition-name (#PCDATA)&gt;
  
  &lt;!--
    The load-balance-policy element indicates the java class name to be used
    to load balance calls in the bean proxy.
    If not, jboss will assume :
      - for EB and SFSB : load-balance-policy = "org.jboss.ha.framework.interfaces.RoundRobin"
      - for SLSB        : load-balance-policy = "org.jboss.ha.framework.interfaces.RoundRobin"
  
    Used in: entity and session (in clustered element)
  --&gt;
  &lt;!ELEMENT load-balance-policy (#PCDATA)&gt;
  
  &lt;!--
    The cache-invalidation element indicates if this bean cache should listen to cache
    invalidation events and clear its cache accordingly as well as send cache invalidation
    messages.
    It is provided by the deployer. If not, jboss will assume cache-invalidation = True
    NOTE: This value will *only* be applied if the correct cache plugin and interceptor(s)
          are defined in the container configuration.
    Possible values: "False", "True" (default)
  
    Used in: entity (only commit-option A and D will invalidate their cache)
  --&gt;
  &lt;!ELEMENT cache-invalidation (#PCDATA)&gt;
  
  &lt;!--
    The cache-invalidation-config element allows to specify cache invalidation specific settings.
  
    Used in: entity
  --&gt;
  &lt;!ELEMENT cache-invalidation-config (invalidation-group-name? , invalidation-manager-name?)&gt;
  
  &lt;!--
    The invalidation-group-name element indicates the name of a group in which all
    invalidation messages are exchanged i.e. all beans sharing a given invalidation-group-name
    should share the same PK semantic.
    By default, invalidation-group-name equals to the EJB name. Thus, when using cache invalidation
    accross a cluster, it is not necessary to specify a name as all beans will have the same name
    accross the cluster. Nevertheless, if you deploy, on the same node, the same EJB, once with
    commit-option C (RW access) and once in commit-option A (RO) and want the RW EJB to invalidate
    entries of RO EJB, each one will obviously have its own EJB name. Consequently, you can assign
    a common invalidation-group-name to both EJBs so that they share their cache invalidation messages.
  
    Used in: entity (in cache-invalidation-config element)
  --&gt;
  &lt;!ELEMENT invalidation-group-name (#PCDATA)&gt;
  
  &lt;!--
    The invalidation-manager-name references the InvalidationManager MBean to be used.
    By Default, the default InvalidationManager is used.
  
    Used in: entity (in cache-invalidation-config element)
  --&gt;
  &lt;!ELEMENT invalidation-manager-name (#PCDATA)&gt;
  
  &lt;!--
    The session-state-manager-jndi-name element indicates the name of the HASessionState to be used
    by the container as a backend for state session management in the cluster.
    This *is* a JNDI name (not like the partition-name element).
    If not, jboss will assume partition-name = "/HASessionState/Default".
  
    Used in: session (in clustered element)
  --&gt;
  &lt;!ELEMENT session-state-manager-jndi-name (#PCDATA)&gt;
  
  &lt;!--
    The resource-ref element gives a mapping between the "code name"
    of a resource (res-ref-name, provided by the Bean Developer) and
    its "xml name" (resource-name, provided by the Application Assembler).
    If no resource-ref is provided, jboss will assume that
    "xml-name" = "code name"
  
    See resource-managers.
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT resource-ref (res-ref-name , (resource-name | jndi-name | res-url))&gt;
  
  &lt;!--
    The res-ref-name element gives the "code name" of a resource. It is
    provided by the Bean Developer. See resource-managers for the actual
    configuration of the resource.
  
    Used in: resource-ref
  --&gt;
  &lt;!ELEMENT res-ref-name (#PCDATA)&gt;
  
  &lt;!--
    The resource-name element gives the "xml name" of the resource. It is
    provided by the Application Assembler. See resource-managers for the
    actual configuration of the resource.
  
    Used in: resource-ref
  --&gt;
  &lt;!ELEMENT resource-name (#PCDATA)&gt;
  
  &lt;!--
    The resource-managers element is used to declare resource managers.
  
    A resource has 3 names:
    - the "code name" is the name used in the code of the bean, supplied by
      the Bean Developer in the resource-ref section of the ejb-jar.xml file
  
    - the "xml name" is an intermediary name used by the Application Assembler
      to identify resources in the XML file.
  
    - the "runtime jndi name" is the actual jndi-name or url of the deployed
      resource, it is supplied by the Deployer.
  
    The mapping between the "code name" and the "xml name" is given
    in the resource-ref section for the bean. If not, jboss will assume that
    "xml name" = "code name".
  
    The mapping between the "xml name" and the "runtime jndi name" is given in
    a resource-manager section. If not, and if the datasource is of type
    javax.sql.DataSource, jboss will look for a javax.sql.DataSource in the jndi
    tree.
  
    Used in: jboss
  --&gt;
  &lt;!ELEMENT resource-managers (resource-manager*)&gt;
  
  &lt;!--
    The resource-manager element is used to provide a mapping between the
    "xml name" of a resource (res-name) and its "runtime jndi name"
    (res-jndi-name or res-url according to the type of the resource).
    If it is not provided, and if the type of the resource is
    javax.sql.DataSource, jboss will look for a javax.sql.DataSource in the
    jndi tree.
  
    See resource-managers.
  
    Used in: resource-managers
  --&gt;
  &lt;!ELEMENT resource-manager (res-name , (res-jndi-name | res-url))&gt;
  
  &lt;!--
    The res-name element gives the "xml name" of a resource, it is provided
    by the Application Assembler. See resource-managers.
  
    Used in: resource-manager
  --&gt;
  &lt;!ELEMENT res-name (#PCDATA)&gt;
  
  &lt;!--
    The res-jndi-name element is the "deployed jndi name" of a resource, it
    is provided by the Deployer. See resource-managers.
  
    Used in: resource-manager
  --&gt;
  &lt;!ELEMENT res-jndi-name (#PCDATA)&gt;
  
  &lt;!-- The res-url element value is a URL string for a resource-ref of
  res-type = java.net.URL. Using a res-url creates a binding of the URL
  instance under the java:comp/env. If you want to link to another binding
  of a URL, you can use the jndi-name to do so.
  
  // Binds the URL(<a href="http://x.y.z" target="_new">http://x.y.z</a>) under java:comp/env/jdbc/XYZHome
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt;jdbc/XYZHome&lt;/res-ref-name&gt;
      &lt;res-url&gt;<a href="http://x.y.z&lt;/res-url" target="_new">http://x.y.z&lt;/res-url</a>&gt;
  &lt;/resource-ref&gt;
  // Binds a link to urls/XYZHomePage under java:comp/env/jdbc/XYZHome
  &lt;resource-ref&gt;
      &lt;res-ref-name&gt;jdbc/XYZHome&lt;/res-ref-name&gt;
      &lt;res-url&gt;urls/XYZHomePage&lt;/res-url&gt;
  &lt;/resource-ref&gt;
  
     Used in: resource-ref, resource-manager
  --&gt;
  &lt;!ELEMENT res-url (#PCDATA)&gt;
  
  &lt;!--
    The message-destination-ref element is used to configure the
    jndi-name for a message-destination-ref in ejb-jar.xml
  
    Used in: entity, session, and message-driven
  --&gt;
  &lt;!ELEMENT message-destination-ref (message-destination-ref-name, jndi-name)&gt;
  
  &lt;!--
    The message-destination-ref-name element identifies the
    message-destination-ref. It must match the name in ejb-jar.xml
  
    Used in: message-destination-ref
  --&gt;
  &lt;!ELEMENT message-destination-ref-name (#PCDATA)&gt;
  
  &lt;!--
    The assembly-descriptor element contains application-assembly information.
  
    The definition of security roles allows you to map assembly roles to one or more
    principals. For example, you may define a run-as principal in the security-identity
    element and include that principal in one or more security-role(s) in the
    assembly descriptor. When called with a run-as role, the callee will see all
    those roles in ctx.isCallerInRole(...)
  
    Used in: jboss
  --&gt;
  &lt;!ELEMENT assembly-descriptor (security-role*, message-destination*)&gt;
  
  &lt;!--
    The security-role element contains the definition of a security role.
    The definition consists of an the security role name and principal name element(s).
  
  Used in: assembly-descriptor
  
  Example:
  		&lt;security-role&gt;
        &lt;role-name&gt;Manager&lt;/role-name&gt;
        &lt;principal-name&gt;j2ee&lt;/principal-name&gt;
        &lt;principal-name&gt;javajoe&lt;/principal-name&gt;
  		&lt;/security-role&gt;
  --&gt;
  &lt;!ELEMENT security-role (role-name, principal-name+)&gt;
  
  &lt;!--
    The role-name element is the name of the role.
  
    Used in: security-role
  --&gt;
  &lt;!ELEMENT role-name (#PCDATA)&gt;
  
  &lt;!--
    The principal-name element is the name of the principal that is mapped
    to the assembly role-name.
  
    Used in: security-role
  --&gt;
  &lt;!ELEMENT principal-name (#PCDATA)&gt;
  
  &lt;!--
    The message-destination element is used to configure the
    jndi-name for a message-destination in ejb-jar.xml
  
    Used in: assembly-descriptor
  --&gt;
  &lt;!ELEMENT message-destination (message-destination-name, jndi-name)&gt;
  
  &lt;!--
    The message-destination-name element identifies the
    message-destination. It must match the name in ejb-jar.xml
  
    Used in: message-destination
  --&gt;
  &lt;!ELEMENT message-destination-name (#PCDATA)&gt;
  
  &lt;!--
    The container-configurations element declares the different possible
    container configurations that the beans can use. standardjboss.xml
    provides 15 standard configurations with the following container-names:
      - Standard CMP 2.x EntityBean
      - Standard CMP EntityBean
      - Clustered CMP 2.x EntityBean
      - Clustered CMP EntityBean
      - IIOP CMP 2.x EntityBean
      - IIOP CMP EntityBean
      - Standard Stateless SessionBean
      - Clustered Stateless SessionBean
      - IIOP Stateless SessionBean
      - Standard Stateful SessionBean
      - Clustered Stateful SessionBean
      - IIOP Stateful SessionBean
      - Standard BMP EntityBean
      - Clustered BMP EntityBean
      - IIOP BMP EntityBean
      - Standard message Driven Bean
  
    The standard configurations will automatically be used if no custom
    configuration is specified.
  
    The application assembler can define advanced custom configurations here.
  
    Used in: jboss
  --&gt;
  &lt;!ELEMENT container-configurations (container-configuration*)&gt;
  
  &lt;!--
    The container-configuration element describes a configuration for the
    container.
    The different plugins to use are declared here, as well as their
    configurations. The configuration-class attribute is no longer used.
  
    Used in: container-configurations
  --&gt;
  &lt;!ELEMENT container-configuration (container-name , call-logging?,
   invoker-proxy-binding-name?, sync-on-commit-only?,
   insert-after-ejb-post-create?, call-ejb-store-on-clean?, container-interceptors? ,
   instance-pool? , instance-cache? ,  persistence-manager? , web-class-loader? ,
   locking-policy? ,  container-cache-conf? , container-pool-conf? ,
   commit-option? , optiond-refresh-rate? , security-domain?, clustered?,
   depends*)&gt;
  
  &lt;!-- The extends attribute gives the container-name value of the configuration the container-configuration
  is extending. This allows one to specify an extension configuration without having to reiterate all of
  the other duplicate configuration info.
  
          &lt;container-configuration extends="Standard Stateful SessionBean"&gt;
              &lt;container-name&gt;Secure Stateless SessionBean&lt;/container-name&gt;
              &lt;security-domain&gt;java:/jaas/other&lt;/security-domain&gt;
          &lt;/container-configuration&gt;
  --&gt;
  &lt;!ATTLIST container-configuration extends CDATA  #IMPLIED&gt;
  
  &lt;!--
    The container-name element gives the name of the configuration being
    defined. Beans may refer to this name in their aop-domain-name tag.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT container-name (#PCDATA)&gt;
  
  &lt;!--
    The call-logging element tells if the container must log every method
    invocation for this bean or not. Its value must be true or false.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT call-logging (#PCDATA)&gt;
  
  &lt;!--
    The invoker-bindings element gives the invokers configuration for an
    ejb container.
  
    Used in: entity, session, message-driven
  --&gt;
  &lt;!ELEMENT invoker-bindings (invoker+)&gt;
  &lt;!--
   --&gt;
  &lt;!ELEMENT invoker (invoker-proxy-binding-name, jndi-name?, ejb-ref*)&gt;
  
  &lt;!-- The invoker-proxy-binding-name elements maps to the name element of
  an invoker-proxy-binding definition.
  
    Used in: container-configuration, invoker
  --&gt;
  &lt;!ELEMENT invoker-proxy-binding-name (#PCDATA)&gt;
  
  &lt;!-- The sync-on-commit-only element determines the behavior of ejbStore
  calls on finds, selects and removes. If set to true, ejbStore will only be
  called on transaction commit.
  --&gt;
  &lt;!ELEMENT sync-on-commit-only (#PCDATA)&gt;
  
  &lt;!-- The insert-after-ejb-post-create element defines when the INSERT
   statement will be executed for created entity instance.
   Possible values are:
   false - the default value, INSERT will be executed after ejbCreate but before
           ejbPostCreate;
   true - INSERT will be executed after ejbPostCreate.
  --&gt;
  &lt;!ELEMENT insert-after-ejb-post-create (#PCDATA)&gt;
  
  &lt;!-- The call-ejb-store-for-clean says whether ejbStore should be called on clean instances
   at synchronization time. By the spec it should be true. But users wanted it to be false.
   False is the default, meaning ejbStore is called only on dirty instances.
  --&gt;
  &lt;!ELEMENT call-ejb-store-on-clean (#PCDATA)&gt;
  
  &lt;!--
    The container-interceptors element gives the chain of Interceptors
    (instances of org.jboss.ejb.Interceptor) that are associated with the container.
    The declared order of the interceptor elements corresponds to the order of the
    interceptor chain.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT container-interceptors (interceptor+)&gt;
  
  &lt;!--
  The client-interceptors defines the home and bean client side interceptor chain
  
    Used in: proxy-factory-config
  --&gt;
  &lt;!ELEMENT client-interceptors (home , bean, list-entity?)&gt;
  
  &lt;!-- Define whether the ejb proxy should expose an org.jboss.proxy.IClientContainer
     interface to provide access to the invocation context and interceptors.
  --&gt;
  &lt;!ATTLIST client-interceptors exposeContainer (true | false )  "false"&gt;
  
  &lt;!--
  The endpoint-interceptors element gives the chain of interceptors
  (instances of org.jboss.proxy.Interceptor) that are associated with the
  message endpoint.
  
    Used in: proxy-factory-config for message inflow
  --&gt;
  &lt;!ELEMENT endpoint-interceptors (interceptor+)&gt;
  
  &lt;!--
  The home element gives the chain of interceptors
  (instances of org.jboss.proxy.Interceptor) that are associated with the home
  proxy and operate in the client VM. The declared order of the interceptor
  elements corresponds to the order of the interceptor chain.
  
    Used in: client-interceptors
  --&gt;
  &lt;!ELEMENT home (interceptor+)&gt;
  
  &lt;!--
  The bean element gives the chain of interceptors
  (instances of org.jboss.proxy.Interceptor) that are associated with the remote
  proxy and operate in the client VM. The declared order of the interceptor
  elements corresponds to the order of the interceptor chain.
  
    Used in: client-interceptors
  --&gt;
  &lt;!ELEMENT bean (interceptor+)&gt;
  
  &lt;!--
  The list-entity element gives the chain of interceptors
  (instances of org.jboss.proxy.Interceptor) that are associated with the remote
  proxy and operate in the client VM. The declared order of the interceptor
  elements corresponds to the order of the interceptor chain.
  
    Used in: client-interceptors
  --&gt;
  &lt;!ELEMENT list-entity (interceptor+)&gt;
  
  &lt;!--
    The interceptor element specifies an instance of org.jboss.ejb.Interceptor
    that is to be added to the container interceptor stack.
  
    Used in: home, bean, list-entity, endpoint-interceptors
  --&gt;
  &lt;!ELEMENT interceptor (#PCDATA)&gt;
  
  &lt;!--
    The transaction attribute is used to indicate what type of container its
    interceptor applies to. It is an enumerated value that can take on one of: Bean,
    Container or Both. A value of Bean indicates that the interceptor should only be
    added to a container for bean-managed transaction.
    A value of Container indicates that the interceptor should only be added to a
    container for container-managed transactions.
    A value of Both indicates that the interceptor should be added to all
    containers. This is the default value if the transaction attribute is not
    explictlygiven.
  --&gt;
  &lt;!ATTLIST interceptor transaction     (Bean | Container | Both )  "Both"&gt;
  
  &lt;!--
    The metricsEnabled attributes is used to indicate if the interceptor
    should only be included when the org.jboss.ejb.ContainerFactory metricsEnabled
    flag is set to true. The allowed values are true and false with false being the
    default if metricsEnabled is not explicitly given.
  --&gt;
  &lt;!ATTLIST interceptor metricsEnabled  (true | false )  "false"&gt;
  
  &lt;!--
    The call-by-value attribute is used to indicate that the interceptor
    should only be included when the value of the attribute corresponds
    to the value of org.jboss.metadata.BeanMetaData callByValue.
    For example, if a bean defines the element &lt;call-by-value&gt;true&lt;/call-by-value&gt;
    then a marshalling invoker interceptor will be used instead of the
    non marshalling optimized invoker interceptor.
  --&gt;
  &lt;!ATTLIST interceptor call-by-value  (true | false )  #IMPLIED&gt;
  
  &lt;!--
    The instance-pool element gives the class name of the instance pool
    jboss must use for in this configuration. This class must implement
    the org.jboss.ejb.InstancePool interface. The defaults are:
    - org.jboss.ejb.plugins.EntityInstancePool for entity beans
    - org.jboss.ejb.plugins.StatelessSessionInstancePool for stateless
    session beans.
    - no pool is used for stateful session beans
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT instance-pool (#PCDATA)&gt;
  
  &lt;!--
    The instance-cache element gives the class name of the instance cache
    jboss must use for in this configuration. This class must implement
    the org.jboss.ejb.InstanceCache interface. The defaults are:
    - org.jboss.ejb.plugins.NoPassivationEntityInstanceCache for entity beans
    - org.jboss.ejb.plugins.NoPassivationStatefulSessionInstanceCache for
    stateful session beans.
    - no cache is used for stateless session beans
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT instance-cache (#PCDATA)&gt;
  
  &lt;!--
    The persistence-manager element gives the class name of the persistence
    manager / persistence store jboss must use for in this configuration.
    This class must implement:
    - org.jboss.ejb.EntityPersistenceStore for CMP Entity Beans (default is
    org.jboss.ejb.plugins.jaws.JAWSPersistenceManager)
    - org.jboss.ejb.EntityPersistenceManager for BMP entity beans (default
    is org.jboss.ejb.plugins.BMPPersistenceManager)
    - org.jboss.ejb.StatefulSessionPersistenceManager for stateless session
    beans.
    - no persistence-manager is used for stateless session beans
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT persistence-manager (#PCDATA)&gt;
  
  &lt;!--
    The locking-policy element gives the class name of the EJB lock
    implementation JBoss must use for in this configuration. This class must
    implement  the org.jboss.ejb.BeanLock interface. The default is
    org.jboss.ejb.plugins.lock.QueuedPessimisticEJBLock.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT locking-policy (#PCDATA)&gt;
  
  &lt;!--
    The web-class-loader element gives the class name of the web classloader
    jboss must use for in this configuration. This class must be a subclass
    of org.jboss.web.WebClassLoader. The default is org.jboss.web.WebClassLoader.
  
    Used in: container-configuration
    Used in: proxy-factory-config
  --&gt;
  &lt;!ELEMENT web-class-loader (#PCDATA)&gt;
  
  &lt;!--
    The container-cache-conf element holds dynamic configuration data
    for the instance cache.
    jboss does not read directly the subtree for this element: instead,
    it is passed to the instance cache instance (if it implements
    org.jboss.metadata.XmlLoadable) for it to load its parameters.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT container-cache-conf (cache-policy? , cache-policy-conf?, cache-policy-conf-other?)&gt;
  
  &lt;!--
    The implementation class for the cache policy, which controls
    when instances will be passivated, etc.
  
    Used in: container-cache-conf
  --&gt;
  &lt;!ELEMENT cache-policy (#PCDATA)&gt;
  
  &lt;!--
    The configuration settings for the selected cache policy.  This
    is currently only valid for the LRU cache.
    When the cache is the LRU one for the stateful container, the elements
    remover-period and max-bean-life specifies the period of the remover
    task that removes stateful beans (that normally have been passivated)
    that have age greater than the specified max-bean-life element.
  
    Used in: container-cache-conf (when cache-policy is the LRU cache)
  --&gt;
  &lt;!ELEMENT cache-policy-conf (min-capacity , max-capacity , remover-period? ,
   max-bean-life? , overager-period? , max-bean-age? , resizer-period? ,
   max-cache-miss-period? , min-cache-miss-period? , cache-load-factor?)&gt;
  
  &lt;!--
    The minimum capacity of this cache
  --&gt;
  &lt;!ELEMENT min-capacity (#PCDATA)&gt;
  
  &lt;!--
    The maximum capacity of this cache
  --&gt;
  &lt;!ELEMENT max-capacity (#PCDATA)&gt;
  
  &lt;!--
    The period of the overager's runs
  --&gt;
  &lt;!ELEMENT overager-period (#PCDATA)&gt;
  
  &lt;!--
    The period of the remover's runs
  --&gt;
  &lt;!ELEMENT remover-period (#PCDATA)&gt;
  
  &lt;!--
    The max-bean-life specifies the period of the remover
    task that removes stateful beans (that normally have been passivated)
    that have age greater than the specified max-bean-life element.
  --&gt;
  &lt;!ELEMENT max-bean-life (#PCDATA)&gt;
  
  &lt;!--
    The period of the resizer's runs
  --&gt;
  &lt;!ELEMENT resizer-period (#PCDATA)&gt;
  
  &lt;!--
    The age after which a bean is automatically passivated
  --&gt;
  &lt;!ELEMENT max-bean-age (#PCDATA)&gt;
  
  &lt;!--
    Shrink cache capacity if there is a cache miss every or more
    this member's value
  --&gt;
  &lt;!ELEMENT max-cache-miss-period (#PCDATA)&gt;
  
  &lt;!--
    Enlarge cache capacity if there is a cache miss every or less
    this member's value
  --&gt;
  &lt;!ELEMENT min-cache-miss-period (#PCDATA)&gt;
  
  &lt;!--
    The resizer will always try to keep the cache capacity so that
    the cache is this member's value loaded of cached objects
  --&gt;
  &lt;!ELEMENT cache-load-factor (#PCDATA)&gt;
  
  &lt;!--
    Arbitrary XML configuration
  --&gt;
  &lt;!ELEMENT cache-policy-conf-other ANY&gt;
  
  &lt;!--
    The container-pool-conf element holds configuration data for the
    instance pool.
    jboss does not read directly the subtree for this element: instead,
    it is passed to the instance pool instance (if it implements
    org.jboss.metadata.XmlLoadable) for it to load its parameters.
  
    The default instance pools, EntityInstancePool and
    StatelessSessionInstancePool, both accept the following configuration.
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT container-pool-conf (MinimumSize?, MaximumSize?,
     strictMaximumSize?, strictTimeout?)&gt;
  
  &lt;!-- The theoretical minimum size of the pool. Currently unused by JBoss
  EJB pools.
  
  Used in: invoker-proxy-conf for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT MinimumSize (#PCDATA)&gt;
  
  &lt;!--
    The capacity of the Pool. For pools where reclaim is possible, the pool will
    also be repopulated when the instance is free to be reused.
    This is not an hard limit, if instances are needed when the pool is at
    its MaximumSize, new instances will be created following the demand unless
    a strictMaximumSize of true is specified.
  
    Used in: container-pool-conf and invoker-proxy-conf for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT MaximumSize (#PCDATA)&gt;
  
  &lt;!-- A boolean flag indicating if attempts to access the pool will block when
  MaximumSize instances are active. The default is false.
  
    Used in: container-pool-conf
  --&gt;
  &lt;!ELEMENT strictMaximumSize (#PCDATA)&gt;
  
  &lt;!-- The time in milliseconds to wait for the strictMaximumSize semaphore. The
  default is Long.MAX_VALUE or essentially enternity.
  
    Used in: container-pool-conf
  --&gt;
  &lt;!ELEMENT strictTimeout (#PCDATA)&gt;
  
  &lt;!--
    The number of millis to keep an unused object in the pool. Currently unused by
    JBoss EJB Pools.
  
    Used in: invoker-proxy-conf for JMSContainerInvoker
  --&gt;
  &lt;!ELEMENT KeepAliveMillis (#PCDATA)&gt;
  
  &lt;!--
    This option is only used for entity container configurations.
  
    The commit-option element tells the container which option to use for transactions.
    Its value must be A, B C, or D.
  
    - option A: the entiry instance has exclusive access to the database. The instance
    stays ready after a transaction.
    - option B: the entity instance does not have exclusive access to the database.
    The state is loaded before the next transaction.
    - option C: same as B, except the container does not keep the instance after commit:
    a passivate is immediately performed after the commit.
  
    - option D: a lazy update. default is every 30 secs.
                 can be updated with &lt;optiond-refresh-rate&gt;
  
    See ejb1.1 specification for details (p118).
  
    Used in: container-configuration
  --&gt;
  &lt;!ELEMENT commit-option (#PCDATA)&gt;
  
  &lt;!--
    This element is used to specify the refresh rate of commit option d
  --&gt;
  &lt;!ELEMENT optiond-refresh-rate (#PCDATA)&gt;
  
  &lt;!--
  ior-security-config element describes the security configuration information for the IOR.
  --&gt;  
  &lt;!ELEMENT ior-security-config ( transport-config? , as-context?, sas-context?  )&gt; 
  
  &lt;!--
  transport-config is the root element for security between the end points
  --&gt;
  &lt;!ELEMENT transport-config ( integrity, confidentiality,
   establish-trust-in-target, establish-trust-in-client, detect-misordering?,
   detect-replay?)&gt; 
  
  &lt;!--
  integrity element indicates if the server (target) supports integrity protected messages. 
  The valid values are NONE, SUPPORTED or REQUIRED
  --&gt;  
  &lt;!ELEMENT integrity ( #PCDATA)&gt;
  
  &lt;!--
  confidentiality element indicates if the server (target) supports privacy protected 
  messages. The values are NONE, SUPPORTED or REQUIRED
  --&gt;  
  &lt;!ELEMENT confidentiality ( #PCDATA)&gt;
  
  &lt;!--
  establish-trust-in-target element indicates if the target is capable of authenticating to a client. 
  The values are NONE or SUPPORTED.
  --&gt;  
  &lt;!ELEMENT establish-trust-in-target ( #PCDATA)&gt;
  
  &lt;!--
  establish-trust-in-client element indicates if the target is capable of authenticating a client. The
  values are NONE, SUPPORTED or REQUIRED.
  --&gt;  
  &lt;!ELEMENT establish-trust-in-client ( #PCDATA)&gt;
  
  &lt;!--
  The optional detect-misordering indicates if the server (target) supports
  detection of message sequence errors. The values are NONE, SUPPORTED or REQUIRED.
  --&gt;  
  &lt;!ELEMENT detect-misordering ( #PCDATA)&gt;
  
  &lt;!--
  The optional detect-replay indicates if the server (target) supports detection
  of message replay attempts. The values are NONE, SUPPORTED or REQUIRED.
  --&gt;  
  &lt;!ELEMENT detect-replay ( #PCDATA)&gt;
  
  &lt;!--
  as-context (CSIv2 authentication service) is the element describing the authentication 
  mechanism that will be used to authenticate the client. If specified it will be the 
  username-password mechanism.
  --&gt;  
  &lt;!ELEMENT as-context ( auth-method, realm, required )&gt; 
  
  &lt;!--
  required element specifies if the authentication method specified is required
  to be used for client authentication. If so the EstablishTrustInClient bit
  will be set in the target_requires field of the AS_Context. The element value
  is either true or false. 
  --&gt;  
  &lt;!ELEMENT required ( #PCDATA )&gt; 
  
  &lt;!--
  auth-method element describes the authentication method. The only supported value
  for as-context is USERNAME_PASSWORD
  
  For port-component, the auth-method element is used to configure the
  authentication mechanism for the web service. As a prerequisite to gaining
  access to any web service which are protected by an authorization
  constraint, a user must have authenticated using the configured
  mechanism. Legal values for this element are "BASIC", or "CLIENT-CERT".
  
  Used in: as-context, port-component
  
  --&gt;  
  &lt;!ELEMENT auth-method ( #PCDATA )&gt; 
  
  &lt;!--
  realm element describes the realm in which the user is authenticated. Must be 
  a valid realm that is registered in server configuration.
  --&gt;  
  &lt;!ELEMENT realm ( #PCDATA )&gt; 
  
  &lt;!--
  sas-context (related to CSIv2 security attribute service) element describes 
  the sas-context fields.
  --&gt;  
  &lt;!ELEMENT sas-context ( caller-propagation )&gt; 
  
  &lt;!--
  caller-propagation element indicates if the target will accept propagated caller identities
  The values are NONE or SUPPORTED.
  --&gt;  
  &lt;!ELEMENT caller-propagation ( #PCDATA) &gt;
  
  &lt;!-- The port-component element specifies a mapping from a webservice
  port-component whose service-impl-bean/ejb-link value maps to an ejb.
  
  Used in: session
  --&gt;
  &lt;!ELEMENT port-component (port-component-name, port-component-uri?, auth-method?,
   transport-guarantee?) &gt;
  
  &lt;!-- Maps to the port-component-name in the webservices.xml descriptor.
  
  Used in: port-component
  --&gt;
  &lt;!ELEMENT port-component-name (#PCDATA) &gt;
  
  &lt;!-- Absolute path starting with web context root to form fully qualified
  endpoint address for a web service endpoint. The port component uri, if present
  must contain at least two token seperated by '/'. The first token is the web context root,
  which must be identical among all port component uris in a given deployment.
  
  If this element is not present, the web context root will be derived from the
  deployment canonical name.
  
  Used in: port-component
  --&gt;
  &lt;!ELEMENT port-component-uri (#PCDATA) &gt;
  
  &lt;!--
  The transport-guarantee element specifies that the communication
  between client and server should be NONE, INTEGRAL, or
  CONFIDENTIAL. NONE means that the application does not require any
  transport guarantees. A value of INTEGRAL means that the application
  requires that the data sent between the client and server be sent in
  such a way that it can't be changed in transit. CONFIDENTIAL means
  that the application requires that the data be transmitted in a
  fashion that prevents other entities from observing the contents of
  the transmission. In most cases, the presence of the INTEGRAL or
  CONFIDENTIAL flag will indicate that the use of SSL is required.
  
  Used in: port-component
  --&gt;
  &lt;!ELEMENT transport-guarantee (#PCDATA)&gt;
  
  &lt;!--
  Runtime information about a web service.
  
  wsdl-publish-location is optionally used to specify
  where the final wsdl and any dependent files should be stored.  This location
  resides on the file system from which deployment is initiated.
  --&gt;
  &lt;!ELEMENT webservice-description ( webservice-description-name, wsdl-publish-location? )&gt;
  
  &lt;!--
  Unique name of a webservice within a module
  --&gt;
  &lt;!ELEMENT webservice-description-name ( #PCDATA )&gt;
  
  &lt;!--
  This is a valid URL pointing to a final WSDL document. It is optional.
  If specified, the WSDL document at this URL will be used during
  deployment instead of the WSDL document associated with the
  service-ref in the standard deployment descriptor.
  
  Examples :
  
    // available via HTTP
    &lt;wsdl-override&gt;<a href="http://localhost:8000/myservice/myport?WSDL&lt;/wsdl-override" target="_new">http://localhost:8000/myservice/myport?WSDL&lt;/wsdl-override</a>&gt;
  
    // in a file
    &lt;wsdl-override&gt;file:/home/user1/myfinalwsdl.wsdl&lt;/wsdl-override&gt;
  
  --&gt;
  &lt;!ELEMENT wsdl-override ( #PCDATA )&gt;
  
  &lt;!--
  file: URL of a directory to which a web-service-description's wsdl should be
  published during deployment.  Any required files will be published to this
  directory, preserving their location relative to the module-specific
  wsdl directory(META-INF/wsdl or WEB-INF/wsdl).
  
  Example :
  
    For an ejb.jar whose webservices.xml wsdl-file element contains
      META-INF/wsdl/a/Foo.wsdl
  
    &lt;wsdl-publish-location&gt;file:/home/user1/publish
    &lt;/wsdl-publish-location&gt;
  
    The final wsdl will be stored in /home/user1/publish/a/Foo.wsdl
  
  --&gt;
  &lt;!ELEMENT wsdl-publish-location ( #PCDATA )&gt;
  
  &lt;!--
  Activation config
  
  used in message-driven and proxy-factory-config
  --&gt;
  &lt;!ELEMENT activation-config ( activation-config-property* )&gt;
  
  &lt;!--
  Activation config properties 
  
  used in activation-config
  --&gt;
  &lt;!ELEMENT activation-config-property ( activation-config-property-name, 
                                         activation-config-property-value )&gt;
  
  &lt;!--
  Activation config property name
  
  used in activation-config-property
  --&gt;
  &lt;!ELEMENT activation-config-property-name ( #PCDATA )&gt;
  
  &lt;!--
  Activation config property value
  
  used in activation-config-property
  --&gt;
  &lt;!ELEMENT activation-config-property-value ( #PCDATA )&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785321">[jboss-cvs] jboss-ejb3/src/resources/schema - New directory ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill DeCoste &lt;bdecoste@jb...&gt; -	2005-07-29 16:36</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bdecoste
  Date: 05/07/29 12:35:00

  Log:
  Directory /cvsroot/jboss/jboss-ejb3/src/resources/schema added to the repository

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785318">[jboss-cvs] jrunit-testsuite/libs  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 15:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 11:49:58

  Added:       libs     concurrent.jar
  Log:
  Adding concurrent.jar
  
  Revision  Changes    Path
  1.1      date: 2005/07/29 15:49:58;  author: csuconic;  state: Exp;jrunit-testsuite/libs/concurrent.jar
  
  	&lt;&lt;Binary file&gt;&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785315">[jboss-cvs] jrunit-testsuite  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 15:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 11:50:46

  Modified:    jrunit-testsuite  build.xml
  Log:
  Changes on Benchmark
  
  Revision  Changes    Path
  1.3       +4 -4      jrunit-testsuite/build.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: build.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit-testsuite/build.xml,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- build.xml	26 Jul 2005 22:10:58 -0000	1.2
  +++ build.xml	29 Jul 2005 15:50:46 -0000	1.3
  @@ -29,7 +29,6 @@
         &lt;pathelement path="${tests.classes}"/&gt;
         &lt;pathelement path="${extra.classes}"/&gt;
         &lt;pathelement path="./src/extras"/&gt;
  -      &lt;pathelement path="../testsuite/output/classes"/&gt;
         &lt;fileset dir="${cvs-repo}/JBossCache/dist/lib" includes="*.jar,*.zip" /&gt;      
         &lt;fileset dir="./libs" includes="*.jar,*.zip" /&gt;      
       &lt;/path&gt;
  @@ -121,11 +120,12 @@
           &lt;antcall target="init-receiver"/&gt;
           &lt;antcall target="tests-jboss-cache"/&gt;
           &lt;antcall target="quit-receiver"/&gt;
  +        &lt;antcall target="tests-reports"/&gt;
       &lt;/target&gt;
   
       &lt;target name="tests-jboss-cache" depends="init, compile, install-extras"&gt;
   
  -        &lt;junit dir="${module.output}" printsummary="true"&gt;
  +        &lt;junit dir="." printsummary="true"&gt;
   
             &lt;!-- Used for JGroups --&gt;
             &lt;!-- &lt;jvmarg value="-Dbind.address=${node0}"/&gt; --&gt;
  @@ -149,7 +149,7 @@
             &lt;batchtest todir="${build.reports}"
               haltonerror="${junit.batchtest.haltonerror}"
               haltonfailure="${junit.batchtest.haltonfailure}"
  -            fork="${junit.batchtest.fork}"&gt;
  +            fork="true"&gt;
   
               &lt;fileset dir="${tests.classes}"&gt;
                 &lt;include name="**/*JRunitTestCase.class"/&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785312">[jboss-cvs] jrunit-testsuite/src/tests/org/jboss/jrunit/tests/jbosscache  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Clebert Suconic &lt;csuconic@jb...&gt; -	2005-07-29 15:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: csuconic
  Date: 05/07/29 11:50:46

  Modified:    src/tests/org/jboss/jrunit/tests/jbosscache 
                        CacheMemJRunitTestCase.java
  Log:
  Changes on Benchmark
  
  Revision  Changes    Path
  1.3       +1 -1      jrunit-testsuite/src/tests/org/jboss/jrunit/tests/jbosscache/CacheMemJRunitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CacheMemJRunitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jrunit-testsuite/src/tests/org/jboss/jrunit/tests/jbosscache/CacheMemJRunitTestCase.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- CacheMemJRunitTestCase.java	26 Jul 2005 23:06:52 -0000	1.2
  +++ CacheMemJRunitTestCase.java	29 Jul 2005 15:50:46 -0000	1.3
  @@ -28,7 +28,7 @@
   
       public static Test suite()
       {
  -        return new ThreadLocalDecorator(CacheMemJRunitTestCase.class,1,2,500,true);
  +        return new ThreadLocalDecorator(CacheMemJRunitTestCase.class,100,5,0,true);
       }
   
       public static void threadSetup() throws Throwable

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785309">[jboss-cvs] jboss-portal/core/src/main/org/jboss/portal/core/command  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:55

  Modified:    core/src/main/org/jboss/portal/core/command 
                        RenderPageCommand.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.13      +22 -16    jboss-portal/core/src/main/org/jboss/portal/core/command/RenderPageCommand.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: RenderPageCommand.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/core/src/main/org/jboss/portal/core/command/RenderPageCommand.java,v
  retrieving revision 1.12
  retrieving revision 1.13
  diff -u -b -r1.12 -r1.13
  --- RenderPageCommand.java	28 Jul 2005 17:00:34 -0000	1.12
  +++ RenderPageCommand.java	29 Jul 2005 15:42:55 -0000	1.13
  @@ -41,12 +41,12 @@
   import org.jboss.portal.server.util.Parameters;
   import org.jboss.portal.server.util.Properties;
   import org.jboss.portal.theme.LayoutDispatcher;
  -import org.jboss.portal.theme.page.WindowResult;
   import org.jboss.portal.theme.impl.strategy.StrategyFactory;
   import org.jboss.portal.theme.page.PageInvocation;
   import org.jboss.portal.theme.page.PageResponse;
   import org.jboss.portal.theme.page.PageService;
   import org.jboss.portal.theme.page.WindowContext;
  +import org.jboss.portal.theme.page.WindowResult;
   import org.jboss.portal.theme.strategy.StrategyContext;
   
   import javax.servlet.ServletException;
  @@ -54,18 +54,17 @@
   import javax.servlet.http.HttpServletResponse;
   import java.io.IOException;
   import java.io.PrintWriter;
  +import java.util.ArrayList;
   import java.util.HashMap;
   import java.util.Iterator;
  +import java.util.List;
   import java.util.Locale;
   import java.util.Map;
   import java.util.Set;
  -import java.util.Arrays;
  -import java.util.List;
  -import java.util.ArrayList;
   
   /**
    * @author &lt;a href="mailto:julien@... Viet&lt;/a&gt;
  - * @version $Revision: 1.12 $
  + * @version $Revision: 1.13 $
    */
   public class RenderPageCommand extends ControllerCommand
   {
  @@ -357,7 +356,7 @@
   
               //
               List modes = new ArrayList(cinv.getRequest().getSupportedModes().size());
  -            for (Iterator j = cinv.getRequest().getSupportedModes().iterator();j.hasNext();)
  +            for (Iterator j = cinv.getRequest().getSupportedModes().iterator(); j.hasNext();)
               {
                  Mode mode = (Mode)j.next();
                  ServerURL serverURL = crespctx.createInvokeURL("nav");
  @@ -372,7 +371,7 @@
   
               //
               List windowStates = new ArrayList(cinv.getRequest().getSupportedWindowStates().size());
  -            for (Iterator j = cinv.getRequest().getSupportedWindowStates().iterator();j.hasNext();)
  +            for (Iterator j = cinv.getRequest().getSupportedWindowStates().iterator(); j.hasNext();)
               {
                  WindowState windowState = (WindowState)j.next();
                  ServerURL serverURL = crespctx.createInvokeURL("nav");
  @@ -565,15 +564,21 @@
         Map windows = new HashMap();
         for (Iterator i = page.getChildren().iterator(); i.hasNext();)
         {
  +         String instanceID = null;
            Window window = (Window)i.next();
  -         WindowContext windowContext = StrategyFactory.createWindowContext(window.getName(), window.getRegion(), window.getOrder());
  +         String instanceHandle = window.getInstanceHandle();
  +         Instance instance = (Instance)registry.getObject(instanceHandle);
  +         if (instance != null)
  +         {
  +            instanceID = instance.getID();
  +         }
  +         WindowContext windowContext = StrategyFactory.createWindowContext(window.getName(), window.getRegion(), window.getOrder(), instanceID);
            windows.put(window.getName(), windowContext);
         }
   
         // get the targeted portlet of this request (if any)
         String targetWindowID = getTargetWindowID(invocation.getRequest());
  -      StrategyContext strategyContext = StrategyFactory.createStrategyContext(
  -            request,
  +      StrategyContext strategyContext = StrategyFactory.createStrategyContext(invocation.getRequest(),
               portal.getSupportedWindowStates(),
               portal.getSupportedModes(),
               windows, targetWindowID,
  @@ -595,11 +600,12 @@
            String type = controlParameters.getValue("type");
            if (type != null)
            {
  -            if (Integer.toString(ComponentURL.TYPE_RENDER).equals(type) ||
  -               Integer.toString(ComponentURL.TYPE_ACTION).equals(type))
  +//+++TODO: are there constants for these ?
  +            if ("action".equals(type) || "render".equals(type) || "nav".equals(type))
               {
                  return controlParameters.getValue("wid");
               }
  +
            }
         }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785306">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/strategy  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:55

  Modified:    theme/src/main/org/jboss/portal/theme/strategy 
                        PortletContext.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.7       +4 -3      jboss-portal/theme/src/main/org/jboss/portal/theme/strategy/PortletContext.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: PortletContext.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/strategy/PortletContext.java,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- PortletContext.java	27 Jul 2005 19:43:59 -0000	1.6
  +++ PortletContext.java	29 Jul 2005 15:42:55 -0000	1.7
  @@ -10,6 +10,7 @@
   import org.jboss.portal.Mode;
   import org.jboss.portal.WindowState;
   import org.jboss.portal.common.MediaType;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.page.WindowContext;
   
   import java.util.Set;
  @@ -21,7 +22,7 @@
    * The PortletContext is the way for the portal to communicate the state of an individual portlet to the layout strategy.
    *
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;.
  - * @version &lt;tt&gt;$Revision: 1.6 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.7 $&lt;/tt&gt;
    * @see LayoutStrategy
    * @see StrategyContext
    */
  @@ -40,7 +41,7 @@
       * @return the current portlet window state of this portlet instance
       * @see org.jboss.portal.WindowState
       */
  -   WindowState getWindowState();
  +   WindowState getWindowState() throws ThemeException;
   
      /**
       * Check if the provided WindowState is allowed for this portlet.
  @@ -97,7 +98,7 @@
       */
      String getWindowID();
   
  -   Mode getMode();
  +   Mode getMode() throws ThemeException;
   
      Set getSupportedPortletModes(MediaType contentType);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785303">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/page  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:55

  Modified:    theme/src/main/org/jboss/portal/theme/page 
                        WindowContext.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.2       +3 -1      jboss-portal/theme/src/main/org/jboss/portal/theme/page/WindowContext.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: WindowContext.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/page/WindowContext.java,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- WindowContext.java	27 Jul 2005 19:43:58 -0000	1.1
  +++ WindowContext.java	29 Jul 2005 15:42:55 -0000	1.2
  @@ -11,12 +11,14 @@
   
   /**
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;
  - * @version $Revision: 1.1 $
  + * @version $Revision: 1.2 $
    */
   public interface WindowContext
   {
      String getWindowID();
   
  +   String getInstanceID();
  +
      String getRegionName();
   
      void setRegionName(String regionName);

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785300">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy     ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:54

  Modified:    theme/src/main/org/jboss/portal/theme/impl/strategy    
                        DefaultStrategyImpl.java PortletContextImpl.java
                        StrategyContextImpl.java StrategyFactory.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.5       +48 -30    jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/DefaultStrategyImpl.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DefaultStrategyImpl.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/DefaultStrategyImpl.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- DefaultStrategyImpl.java	21 Jul 2005 18:20:29 -0000	1.4
  +++ DefaultStrategyImpl.java	29 Jul 2005 15:42:54 -0000	1.5
  @@ -10,6 +10,7 @@
   import org.apache.log4j.Logger;
   import org.jboss.portal.WindowState;
   import org.jboss.portal.common.MediaType;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.strategy.AbstractLayoutStrategy;
   import org.jboss.portal.theme.strategy.PortletContext;
   import org.jboss.portal.theme.strategy.StrategyContext;
  @@ -27,7 +28,7 @@
    * the current request is targeted to this portlet.&lt;/p&gt;
    *
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;.
  - * @version &lt;tt&gt;$Revision: 1.4 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.5 $&lt;/tt&gt;
    * @see org.jboss.portal.theme.strategy.LayoutStrategy
    */
   public class DefaultStrategyImpl extends AbstractLayoutStrategy
  @@ -81,6 +82,8 @@
         {
            PortletContext portlet = (PortletContext)i.next();
   //         log.debug("evaluating portlet: " + portlet.getPortletName());
  +         try
  +         {
            if (WindowState.MAXIMIZED.equals(portlet.getWindowState()))
            {
               log.debug("found maximized portlet: " + portlet);
  @@ -98,6 +101,13 @@
               */
            }
         }
  +         catch (ThemeException e)
  +         {
  +            // window state not known
  +            log.warn(e);
  +            response.addNoRender(portlet);
  +         }
  +      }
         // if there is at least one portlet with maximized window state, then
         // switch the layout to the maximized layout, and
         // flag all portlets that are not part of the header region (except the maximized one) as 'do-not-render'
  @@ -109,6 +119,8 @@
            // there can only be one maximized portlet! when in doubt, the targeted portlet wins
            if (context.getTargetPortlet() != null &amp;&amp; maximizedPortlets.size() &gt; 1)
            {
  +            try
  +            {
               if (maximizedPortlets.contains(context.getTargetPortlet()) &amp;&amp;
                  WindowState.MAXIMIZED.equals(context.getTargetPortlet().getWindowState()))
               {
  @@ -127,16 +139,22 @@
                     else
                     {
                        // move the maximized portlet to the maximized region
  -                     portlet.setRegionName(WindowState.MAXIMIZED.toString());
  +//                     portlet.setRegionName(WindowState.MAXIMIZED.toString());
  +                     }
                     }
                  }
               }
  +            catch (ThemeException e)
  +            {
  +               // the target portlet's state isn't known (portlet was deregistered?) , so exclude it
  +               response.addNoRender(context.getTargetPortlet());
  +            }
            }
            else
            {
               // move the maximized portlet to the maximized region
  -            PortletContext portlet = (PortletContext)maximizedPortlets.get(0);
  -            portlet.setRegionName(WindowState.MAXIMIZED.toString());
  +//            PortletContext portlet = (PortletContext)maximizedPortlets.get(0);
  +//            portlet.setRegionName(WindowState.MAXIMIZED.toString());
            }
   
            // try to see if there is a layout uri specified for the maximized state
  
  
  
  1.9       +12 -11    jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/PortletContextImpl.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: PortletContextImpl.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/PortletContextImpl.java,v
  retrieving revision 1.8
  retrieving revision 1.9
  diff -u -b -r1.8 -r1.9
  --- PortletContextImpl.java	27 Jul 2005 19:43:58 -0000	1.8
  +++ PortletContextImpl.java	29 Jul 2005 15:42:54 -0000	1.9
  @@ -13,6 +13,7 @@
   import org.jboss.portal.server.navigation.NavigationalState;
   import org.jboss.portal.server.plugins.mode.ModeProvider;
   import org.jboss.portal.server.plugins.windowstate.WindowStateProvider;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.page.WindowContext;
   import org.jboss.portal.theme.strategy.PortletContext;
   
  @@ -23,7 +24,7 @@
    * &lt;p&gt;This implementation currently does not windowID region and order changes.&lt;/p&gt;
    *
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;.
  - * @version &lt;tt&gt;$Revision: 1.8 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.9 $&lt;/tt&gt;
    * @see PortletContext
    */
   public class PortletContextImpl implements PortletContext
  @@ -51,19 +52,15 @@
         this.windowContext = windowContext;
      }
   
  -//   /**
  -//    * @see org.jboss.portal.theme.strategy.PortletContext#getPortletName()
  -//    */
  -//   public String getPortletName()
  -//   {
  -//      return component.getName();
  -//   }
  -
      /**
       * @see org.jboss.portal.theme.strategy.PortletContext#getWindowState()
       */
  -   public WindowState getWindowState()
  +   public WindowState getWindowState() throws ThemeException
  +   {
  +      if (navState == null)
      {
  +         throw new ThemeException("WindowState unknown");
  +      }
         return navState.getWindowState();
      }
   
  @@ -129,8 +126,12 @@
         return windowID;
      }
   
  -   public Mode getMode()
  +   public Mode getMode() throws ThemeException
      {
  +      if (navState == null)
  +      {
  +         throw new ThemeException("Mode unknown");
  +      }
         return navState.getMode();
      }
   
  
  
  
  1.9       +28 -12    jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyContextImpl.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StrategyContextImpl.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyContextImpl.java,v
  retrieving revision 1.8
  retrieving revision 1.9
  diff -u -b -r1.8 -r1.9
  --- StrategyContextImpl.java	27 Jul 2005 19:43:58 -0000	1.8
  +++ StrategyContextImpl.java	29 Jul 2005 15:42:54 -0000	1.9
  @@ -7,6 +7,7 @@
   
   package org.jboss.portal.theme.impl.strategy;
   
  +import org.jboss.portal.server.ServerRequest;
   import org.jboss.portal.server.navigation.NavigationalState;
   import org.jboss.portal.server.navigation.NavigationalStateContext;
   import org.jboss.portal.server.plugins.mode.ModeProvider;
  @@ -32,7 +33,7 @@
    * the state of those windowIDs, etc.&lt;/p&gt;
    *
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;.
  - * @version &lt;tt&gt;$Revision: 1.8 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.9 $&lt;/tt&gt;
    * @see org.jboss.portal.theme.strategy.StrategyContext
    */
   public class StrategyContextImpl implements StrategyContext
  @@ -41,7 +42,7 @@
      private final String[] regionNames;
      private final String targetPortletID;
      private final WindowStateProvider windowStates;
  -   private final HttpServletRequest request;
  +   private final ServerRequest request;
      private final ModeProvider portletModes;
      private PortalLayout layout;
      private PortalTheme theme;
  @@ -55,7 +56,7 @@
       * @param regionNames       an array of all the region names that are available on the requested page
       * @throws NullPointerException if httpRequest, portalName or pageName are null
       */
  -   StrategyContextImpl(HttpServletRequest request, WindowStateProvider windowStates, ModeProvider supportedModes,
  +   StrategyContextImpl(ServerRequest request, WindowStateProvider windowStates, ModeProvider supportedModes,
                          Map windows, String targetedPortletID, String[] regionNames)
      {
         this.windows = windows == null ? Collections.EMPTY_MAP : windows;
  @@ -73,14 +74,15 @@
      public List getPortletContexts()
      {
         List portletList = new ArrayList(windows.size());
  -      NavigationalStateContext ctx = (NavigationalStateContext)request.getSession().getAttribute("MYCONTEXT");
   
         for (Iterator i = windows.keySet().iterator(); i.hasNext();)
         {
            String windowID = (String)i.next();
  -         NavigationalState state = ctx.getNavigationalState(windowID);
  -         WindowContext windowContext = (WindowContext)windows.get(windowID);
  -         portletList.add(StrategyFactory.createPortletContext(windowStates, portletModes, windowID, state, windowContext));
  +         PortletContext portletContext = createPortletContext(windowID);
  +         if (portletContext != null)
  +         {
  +            portletList.add(portletContext);
  +         }
         }
   
         return Collections.unmodifiableList(portletList);
  @@ -91,10 +93,11 @@
       */
      public PortletContext getTargetPortlet()
      {
  -      NavigationalStateContext ctx = (NavigationalStateContext)request.getSession().getAttribute("MYCONTEXT");
  -      NavigationalState state = ctx.getNavigationalState(targetPortletID);
  -      WindowContext windowContext = (WindowContext)windows.get(targetPortletID);
  -      return StrategyFactory.createPortletContext(windowStates, portletModes, targetPortletID, state, windowContext);
  +      if (targetPortletID != null)
  +      {
  +         return createPortletContext(targetPortletID);
  +      }
  +      return null;
      }
   
      /**
  @@ -141,6 +144,19 @@
       */
      public HttpServletRequest getHttpServletRequest()
      {
  -      return request;
  +      return request.getContext().getHTTPRequest();
  +   }
  +
  +   private PortletContext createPortletContext(String windowID)
  +   {
  +      NavigationalStateContext ctx = request.getNavigationalStateContext();
  +      WindowContext windowContext = (WindowContext)windows.get(windowID);
  +
  +      NavigationalState state = null;
  +      if (windowContext.getInstanceID() != null)
  +      {
  +         state = ctx.getNavigationalState(windowContext.getInstanceID());
  +      }
  +      return StrategyFactory.createPortletContext(windowStates, portletModes, windowID, state, windowContext);
      }
   }
  
  
  
  1.10      +5 -6      jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyFactory.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StrategyFactory.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/strategy/StrategyFactory.java,v
  retrieving revision 1.9
  retrieving revision 1.10
  diff -u -b -r1.9 -r1.10
  --- StrategyFactory.java	28 Jul 2005 17:00:34 -0000	1.9
  +++ StrategyFactory.java	29 Jul 2005 15:42:54 -0000	1.10
  @@ -8,6 +8,7 @@
   package org.jboss.portal.theme.impl.strategy;
   
   import org.apache.log4j.Logger;
  +import org.jboss.portal.server.ServerRequest;
   import org.jboss.portal.server.navigation.NavigationalState;
   import org.jboss.portal.server.plugins.mode.ModeProvider;
   import org.jboss.portal.server.plugins.windowstate.WindowStateProvider;
  @@ -17,15 +18,13 @@
   import org.jboss.portal.theme.strategy.PortletContext;
   import org.jboss.portal.theme.strategy.StrategyContext;
   
  -import javax.servlet.http.HttpServletRequest;
   import java.util.Map;
  -import java.util.Collections;
   
   /**
    * Factory to find and instantiate Portal Layout Strategies.
    *
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;.
  - * @version &lt;tt&gt;$Revision: 1.9 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.10 $&lt;/tt&gt;
    * @see org.jboss.portal.theme.strategy.LayoutStrategy
    */
   public class StrategyFactory
  @@ -48,7 +47,7 @@
       * @see PortalLayout
       * @see org.jboss.portal.theme.strategy.PortletContext
       */
  -   public static StrategyContext createStrategyContext(HttpServletRequest request, WindowStateProvider windowStates, ModeProvider supportedModes, Map windows,
  +   public static StrategyContext createStrategyContext(ServerRequest request, WindowStateProvider windowStates, ModeProvider supportedModes, Map windows,
                                                          String targetedPortletID, String[] regionNames)
      {
   //      log.debug("creating strategy context for: " + (layout.getName() == null ? "[no layout]" : layout.getName()) +
  @@ -73,8 +72,8 @@
         return new PortletContextImpl(windowStates, portletModes, windowID, navState, windowContext);
      }
   
  -   public static WindowContext createWindowContext(String windowID, String regionName, int order)
  +   public static WindowContext createWindowContext(String windowID, String regionName, int order, String instanceID)
      {
  -      return new WindowContextImpl(windowID, regionName, order);
  +      return new WindowContextImpl(windowID, regionName, order, instanceID);
      }
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785297">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/invocation  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:55

  Modified:    theme/src/main/org/jboss/portal/theme/invocation 
                        StrategyInterceptor.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.6       +11 -12    jboss-portal/theme/src/main/org/jboss/portal/theme/invocation/StrategyInterceptor.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StrategyInterceptor.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/invocation/StrategyInterceptor.java,v
  retrieving revision 1.5
  retrieving revision 1.6
  diff -u -b -r1.5 -r1.6
  --- StrategyInterceptor.java	22 Jul 2005 19:53:11 -0000	1.5
  +++ StrategyInterceptor.java	29 Jul 2005 15:42:55 -0000	1.6
  @@ -35,7 +35,7 @@
   
   /**
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;
  - * @version $Revision: 1.5 $
  + * @version $Revision: 1.6 $
    */
   public final class StrategyInterceptor extends PageInterceptor
   {
  @@ -80,9 +80,9 @@
                  //             handle excluded portlets
                  handleExcludedPortlets(strategyResponse, request, response);
                  //             handle changes in window state of one or more portlets
  -               handleWindowStateChanges(strategyResponse, session, request);
  +               handleWindowStateChanges(strategyResponse, request);
                  //             handle changes of the portlet mode of one or more portlets
  -               handlePortletModeChanges(strategyResponse, session, request);
  +               handlePortletModeChanges(strategyResponse, request);
                  //             handle changes in the region and order
                  transferPortletContexts(request, response);
   
  @@ -138,11 +138,10 @@
       * look for changed window states and portlet modes, and update the navigational state of the portlet instance
       *
       * @param strategyResponse
  -    * @param session
       */
  -   private void handleWindowStateChanges(StrategyResponse strategyResponse, HttpSession session, PageRequest request)
  +   private void handleWindowStateChanges(StrategyResponse strategyResponse, PageRequest request)
      {
  -      NavigationalStateContext ctx = (NavigationalStateContext)session.getAttribute("MYCONTEXT");
  +      NavigationalStateContext ctx = request.getContext().getServerRequest().getNavigationalStateContext();
         List portletContexts = request.getPortletContexts();
   
         Map changeMap = strategyResponse.getWindowStateChangeMap();
  @@ -151,9 +150,9 @@
            PortletContext pContext = (PortletContext)i.next();
   
            // only if the portlet is part of this request do we allow for the change
  -         if (portletContexts.contains(pContext))
  +         if (portletContexts.contains(pContext) &amp;&amp; pContext.getWindowContext().getInstanceID() != null)
            {
  -            NavigationalState state = ctx.getNavigationalState(pContext.getWindowID());
  +            NavigationalState state = ctx.getNavigationalState(pContext.getWindowContext().getInstanceID());
               state.setWindowState((WindowState)changeMap.get(pContext));
            }
            else
  @@ -163,9 +162,9 @@
         }
      }
   
  -   private void handlePortletModeChanges(StrategyResponse strategyResponse, HttpSession session, PageRequest request)
  +   private void handlePortletModeChanges(StrategyResponse strategyResponse, PageRequest request)
      {
  -      NavigationalStateContext ctx = (NavigationalStateContext)session.getAttribute("MYCONTEXT");
  +      NavigationalStateContext ctx = request.getContext().getServerRequest().getNavigationalStateContext();
         List portletContexts = request.getPortletContexts();
   
         Map changeMap = strategyResponse.getPortletModeChangeMap();
  @@ -174,9 +173,9 @@
            PortletContext pContext = (PortletContext)i.next();
   
            // only if the portlet is part of this request do we allow for the change
  -         if (portletContexts.contains(pContext))
  +         if (portletContexts.contains(pContext) &amp;&amp; pContext.getWindowContext().getInstanceID() != null)
            {
  -            NavigationalState state = ctx.getNavigationalState(pContext.getWindowID());
  +            NavigationalState state = ctx.getNavigationalState(pContext.getWindowContext().getInstanceID());
               state.setMode((Mode)changeMap.get(pContext));
            }
            else

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785294">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render     ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:54

  Modified:    theme/src/main/org/jboss/portal/theme/impl/render    
                        DivDecorationRenderer.java DivWindowRenderer.java
                        EmptyWindowRenderer.java TableWindowRenderer.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.4       +24 -13    jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/DivDecorationRenderer.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DivDecorationRenderer.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/DivDecorationRenderer.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- DivDecorationRenderer.java	19 Jul 2005 17:14:27 -0000	1.3
  +++ DivDecorationRenderer.java	29 Jul 2005 15:42:54 -0000	1.4
  @@ -13,6 +13,7 @@
   import org.jboss.portal.Mode;
   import org.jboss.portal.WindowState;
   import org.jboss.portal.server.output.Result;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.render.DecorationRenderer;
   import org.jboss.portal.theme.render.RenderContext;
   import org.jboss.portal.theme.render.RenderException;
  @@ -58,14 +59,17 @@
      public void render(RenderContext renderContext, PortletContext portletContext, Result result)
         throws RenderException
      {
  -      Mode currentMode = portletContext.getMode();
  -      WindowState currentWindowState = portletContext.getWindowState();
  -//      Window window = (Window)renderContext.getPortalRequest().getServer().getObject(windowContext.getID());
  +      renderStart(renderContext);
   
  +      Mode currentMode = null;
  +      WindowState currentWindowState = null;
  +      try
  +      {
  +         currentMode = portletContext.getMode();
  +         currentWindowState = portletContext.getWindowState();
         Set supportedModes = portletContext.getSupportedPortletModes(renderContext.getContentType());
         Set supportedWindowStates = portletContext.getSupportedWindowStates();
   
  -      renderStart(renderContext);
         renderContext.getMarkupFragment().append("&lt;td class='portlet-titleBarBorderLeft'&gt;&amp;nbsp;&lt;/td&gt;");
         createTitle(renderContext, portletContext.getTitle());
         renderContext.getMarkupFragment().append("&lt;td class='portlet-titleBarContentRight'&gt;");
  @@ -73,6 +77,13 @@
         createStates(renderContext, currentWindowState, supportedWindowStates, portletContext);
         renderContext.getMarkupFragment().append("&lt;/td&gt;");
         renderContext.getMarkupFragment().append("&lt;td class='portlet-titleBarBorderRight'&gt;&amp;nbsp;&lt;/td&gt;");
  +      }
  +      catch (ThemeException e)
  +      {
  +         // the mode or state is not known (portlet registration is gone), handle it
  +         e.printStackTrace(); //+++TODO
  +      }
  +
         renderEnd(renderContext);
      }
   
  
  
  
  1.3       +13 -3     jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/DivWindowRenderer.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DivWindowRenderer.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/DivWindowRenderer.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- DivWindowRenderer.java	19 Jul 2005 17:14:27 -0000	1.2
  +++ DivWindowRenderer.java	29 Jul 2005 15:42:54 -0000	1.3
  @@ -11,6 +11,7 @@
   
   import org.jboss.portal.WindowState;
   import org.jboss.portal.server.output.Result;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.render.RenderContext;
   import org.jboss.portal.theme.render.RenderException;
   import org.jboss.portal.theme.render.WindowRenderer;
  @@ -33,13 +34,22 @@
      {
         renderStart(renderContext);
   
  +      try
  +      {
  +         WindowState windowState = portletContext.getWindowState();
         renderContext.getDecorationRenderer().render(renderContext, portletContext, result);
  -
  -      if (!WindowState.MINIMIZED.equals(portletContext.getWindowState()))
  +         if (!WindowState.MINIMIZED.equals(windowState))
         {
            renderContext.getPortletRenderer().render(renderContext, portletContext, result);
         }
   
  +      }
  +      catch (ThemeException e)
  +      {
  +         // the portlet state is not known (the portlet registration is gone), handle it
  +         e.printStackTrace(); //+++TODO
  +      }
  +
         renderEnd(renderContext);
      }
   
  
  
  
  1.3       +13 -3     jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/EmptyWindowRenderer.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: EmptyWindowRenderer.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/EmptyWindowRenderer.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- EmptyWindowRenderer.java	19 Jul 2005 17:14:27 -0000	1.2
  +++ EmptyWindowRenderer.java	29 Jul 2005 15:42:54 -0000	1.3
  @@ -12,6 +12,7 @@
   import org.apache.log4j.Logger;
   import org.jboss.portal.WindowState;
   import org.jboss.portal.server.output.Result;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.render.RenderContext;
   import org.jboss.portal.theme.render.RenderException;
   import org.jboss.portal.theme.render.WindowRenderer;
  @@ -37,12 +38,21 @@
      {
   //      log.debug("render window for portlet : " + portletContext.);
   
  +      try
  +      {
  +         WindowState windowState = portletContext.getWindowState();
         renderContext.getDecorationRenderer().render(renderContext, portletContext, result);
  -      if (!WindowState.MINIMIZED.equals(portletContext.getWindowState()))
  +         if (!WindowState.MINIMIZED.equals(windowState))
         {
            renderContext.getPortletRenderer().render(renderContext, portletContext, result);
         }
      }
  +      catch (ThemeException e)
  +      {
  +         // the portlet state is not known (the portlet registration is gone), handle it
  +         e.printStackTrace(); //+++TODO
  +      }
  +   }
   
      /**
       * @see org.jboss.portal.theme.render.Renderer#renderStart
  
  
  
  1.3       +19 -7     jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/TableWindowRenderer.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: TableWindowRenderer.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/render/TableWindowRenderer.java,v
  retrieving revision 1.2
  retrieving revision 1.3
  diff -u -b -r1.2 -r1.3
  --- TableWindowRenderer.java	19 Jul 2005 17:14:27 -0000	1.2
  +++ TableWindowRenderer.java	29 Jul 2005 15:42:54 -0000	1.3
  @@ -12,6 +12,7 @@
   import org.apache.log4j.Logger;
   import org.jboss.portal.WindowState;
   import org.jboss.portal.server.output.Result;
  +import org.jboss.portal.theme.ThemeException;
   import org.jboss.portal.theme.render.RenderContext;
   import org.jboss.portal.theme.render.RenderException;
   import org.jboss.portal.theme.render.WindowRenderer;
  @@ -42,18 +43,29 @@
   
         renderStart(renderContext);
   
  +      try
  +      {
  +         WindowState windowState = portletContext.getWindowState();
         renderContext.getMarkupFragment().append("&lt;tr&gt;&lt;td&gt;");
         renderContext.getDecorationRenderer().render(renderContext, portletContext, result);
         renderContext.getMarkupFragment().append("&lt;/td&gt;&lt;/tr&gt;");
   
  -      if (!WindowState.MINIMIZED.equals(portletContext.getWindowState()))
  +         if (!WindowState.MINIMIZED.equals(windowState))
         {
            renderContext.getMarkupFragment().append("&lt;tr&gt;&lt;td&gt;");
            renderContext.getPortletRenderer().render(renderContext, portletContext, result);
            renderContext.getMarkupFragment().append("&lt;/td&gt;&lt;/tr&gt;");
  -         renderEnd(renderContext);
         }
   
  +      }
  +      catch (ThemeException e)
  +      {
  +         // the portlet state is not known (the portlet registration is gone), handle it
  +         e.printStackTrace(); //+++TODO
  +      }
  +
  +      renderEnd(renderContext);
  +
         log.debug("ending with: " + renderContext.getMarkupFragment());
      }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785291">[jboss-cvs] jboss-portal/theme/src/main/org/jboss/portal/theme/impl  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Martin Holzner &lt;mholzner@no...&gt; -	2005-07-29 15:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: mholzner
  Date: 05/07/29 11:42:55

  Modified:    theme/src/main/org/jboss/portal/theme/impl 
                        WindowContextImpl.java
  Log:
  fixed bug in window state and portlet mode handling inside the layout strategy
  
  Revision  Changes    Path
  1.4       +9 -2      jboss-portal/theme/src/main/org/jboss/portal/theme/impl/WindowContextImpl.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: WindowContextImpl.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-portal/theme/src/main/org/jboss/portal/theme/impl/WindowContextImpl.java,v
  retrieving revision 1.3
  retrieving revision 1.4
  diff -u -b -r1.3 -r1.4
  --- WindowContextImpl.java	27 Jul 2005 19:43:58 -0000	1.3
  +++ WindowContextImpl.java	29 Jul 2005 15:42:55 -0000	1.4
  @@ -13,19 +13,21 @@
   
   /**
    * @author &lt;a href="mailto:mholzner@... Holzner&lt;/a&gt;
  - * @version $Revision: 1.3 $
  + * @version $Revision: 1.4 $
    */
   public class WindowContextImpl implements WindowContext, Comparable
   {
      private final String windowID;
      private String regionName;
      private int order;
  +   private final String instanceID;
   
  -   public WindowContextImpl(String windowID, String regionName, int order)
  +   public WindowContextImpl(String windowID, String regionName, int order, String instanceID)
      {
         this.windowID = windowID;
         this.regionName = regionName;
         this.order = order;
  +      this.instanceID = instanceID;
      }
   
      public String getWindowID()
  @@ -33,6 +35,11 @@
         return windowID;
      }
   
  +   public String getInstanceID()
  +   {
  +      return instanceID;
  +   }
  +
      public String getRegionName()
      {
         return regionName;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785288">[jboss-cvs] jbosstest/src/main/org/jboss/test/xml   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:36:07

  Modified:    src/main/org/jboss/test/xml   Tag: Branch_4_0
                        JNDIBindingUnitTestCase.java
                        MBeanServerUnitTestCase.java
  Log:
  backport from HEAD
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.3.2.2   +29 -4     jbosstest/src/main/org/jboss/test/xml/JNDIBindingUnitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: JNDIBindingUnitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/xml/JNDIBindingUnitTestCase.java,v
  retrieving revision 1.3.2.1
  retrieving revision 1.3.2.2
  diff -u -b -r1.3.2.1 -r1.3.2.2
  --- JNDIBindingUnitTestCase.java	25 Jul 2005 05:06:10 -0000	1.3.2.1
  +++ JNDIBindingUnitTestCase.java	29 Jul 2005 15:36:07 -0000	1.3.2.2
  @@ -9,6 +9,7 @@
   import java.util.Properties;
   import java.net.URL;
   import java.net.InetAddress;
  +import java.io.IOException;
   
   import org.jboss.xb.binding.Unmarshaller;
   import org.jboss.xb.binding.UnmarshallerFactory;
  @@ -16,6 +17,9 @@
   import org.jboss.xb.binding.sunday.unmarshalling.XsdBinder;
   import org.jboss.naming.JNDIBindings;
   import org.jboss.naming.JNDIBinding;
  +import org.jboss.util.xml.JBossEntityResolver;
  +import org.xml.sax.InputSource;
  +import org.xml.sax.SAXException;
   
   import junit.framework.TestCase;
   
  @@ -24,7 +28,7 @@
    * the org.jboss.naming.JNDIBindings and related objects.
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.3.2.1 $
  + * @version $Revision: 1.3.2.2 $
    */
   public class JNDIBindingUnitTestCase
      extends TestCase
  @@ -36,9 +40,30 @@
         schemaBinding.setIgnoreUnresolvedFieldOrClass(false);
   
         Unmarshaller unmarshaller = UnmarshallerFactory.newInstance().newUnmarshaller();
  +      unmarshaller.setEntityResolver(new JBossEntityResolver(){
  +         public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException
  +         {
  +            if(systemId.endsWith("jndi-binding-service_1_0.xsd"))
  +            {
  +               URL url = Thread.currentThread().getContextClassLoader().
  +                  getResource("xml/naming/jndi-binding-service_1_0.xsd");
  +               return new InputSource(url.toExternalForm());
  +            }
  +            else if(systemId.endsWith("custom-object-binding.xsd"))
  +            {
  +               URL url = Thread.currentThread().getContextClassLoader().
  +                  getResource("xml/naming/custom-object-binding.xsd");
  +               return new InputSource(url.toExternalForm());
  +            }
  +            else
  +            {
  +               return super.resolveEntity(publicId, systemId);
  +            }
  +         }
  +      });
  +
         URL xml = getResource("xml/naming/testBindings.xml");
  -      JNDIBindings bindings = (JNDIBindings)unmarshaller.unmarshal(xml.openStream(),
  -         schemaBinding);
  +      JNDIBindings bindings = (JNDIBindings)unmarshaller.unmarshal(xml.openStream(), schemaBinding);
         JNDIBinding[] values = bindings.getBindings();
         assertTrue("There are 5 bindings("+values.length+")", values.length == 5);
   
  
  
  
  1.13.2.1  +37 -8     jbosstest/src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MBeanServerUnitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java,v
  retrieving revision 1.13
  retrieving revision 1.13.2.1
  diff -u -b -r1.13 -r1.13.2.1
  --- MBeanServerUnitTestCase.java	24 Jul 2005 22:34:07 -0000	1.13
  +++ MBeanServerUnitTestCase.java	29 Jul 2005 15:36:07 -0000	1.13.2.1
  @@ -43,6 +43,8 @@
   import org.w3c.dom.Document;
   import org.w3c.dom.NodeList;
   import org.w3c.dom.Node;
  +import org.xml.sax.InputSource;
  +import org.xml.sax.SAXException;
   
   import junit.framework.TestCase;
   
  @@ -51,7 +53,7 @@
    * the org.jboss.test.xml.mbeanserver.Services and related objects.
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.13 $
  + * @version $Revision: 1.13.2.1 $
    */
   public class MBeanServerUnitTestCase
      extends TestCase
  @@ -63,6 +65,16 @@
         schemaBinding.setIgnoreUnresolvedFieldOrClass(true);
         schemaBinding.setSchemaResolver(new SchemaBindingResolver()
         {
  +         public String getBaseURI()
  +         {
  +            throw new UnsupportedOperationException("getBaseURI is not implemented.");
  +         }
  +
  +         public void setBaseURI(String baseURI)
  +         {
  +            throw new UnsupportedOperationException("setBaseURI is not implemented.");
  +         }
  +
            public SchemaBinding resolve(String nsUri, String localName,
               String baseURI, String schemaLocation)
            {
  @@ -71,7 +83,9 @@
                  if("urn:jboss:login-config2".equals(nsUri))
                  {
                     InputStream is = getResource("xml/mbeanserver/login-config2.xsd");
  -                  return XsdBinder.bind(is, null, baseURI);
  +                  SchemaBinding schemaBinding = XsdBinder.bind(is, null, baseURI);
  +                  schemaBinding.setSchemaResolver(this);
  +                  return schemaBinding;
                  }
                  else if("urn:jboss:user-roles".equals(nsUri))
                  {
  @@ -172,13 +186,28 @@
         can be easily specified to the SARDeployer, or the schema can be made
         available to the entity resolver via some other configuration.
         */
  -      SchemaBinding schemaBinding = new SchemaBinding();
  -      DefaultSchemaResolver resolver = new DefaultSchemaResolver(new JBossEntityResolver());
  -      schemaBinding.setSchemaResolver(resolver);
  -      URL url = Thread.currentThread().getContextClassLoader().getResource("xml/naming/");
  -      schemaBinding.setBaseURI(url.toString());
  +      final URL url = Thread.currentThread().getContextClassLoader().getResource("xml/naming/");
  +      DefaultSchemaResolver resolver = new DefaultSchemaResolver();
  +      resolver.setBaseURI(url.toString());
  +
         Unmarshaller unmarshaller = UnmarshallerFactory.newInstance().newUnmarshaller();
  -      JNDIBindings bindings = (JNDIBindings) unmarshaller.unmarshal(is2, schemaBinding);
  +      unmarshaller.setEntityResolver(new JBossEntityResolver(){
  +         public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException
  +         {
  +            if(systemId.endsWith("custom-object-binding.xsd"))
  +            {
  +               URL url = Thread.currentThread().getContextClassLoader().
  +                  getResource("xml/naming/custom-object-binding.xsd");
  +               return new InputSource(url.toExternalForm());
  +            }
  +            else
  +            {
  +               return super.resolveEntity(publicId, systemId);
  +            }
  +         }
  +      });
  +
  +      JNDIBindings bindings = (JNDIBindings) unmarshaller.unmarshal(is2, resolver);
         is2.close();
   
         // Validate the bindings

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785285">[jboss-cvs] jbosstest/src/main/org/jboss/test/xml/mbeanserver  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:36:07

  Modified:    src/main/org/jboss/test/xml/mbeanserver  Tag: Branch_4_0
                        MBeanDepends.java
  Log:
  backport from HEAD
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.4.1   +2 -2      jbosstest/src/main/org/jboss/test/xml/mbeanserver/MBeanDepends.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MBeanDepends.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/xml/mbeanserver/MBeanDepends.java,v
  retrieving revision 1.1
  retrieving revision 1.1.4.1
  diff -u -b -r1.1 -r1.1.4.1
  --- MBeanDepends.java	20 Jun 2005 15:12:06 -0000	1.1
  +++ MBeanDepends.java	29 Jul 2005 15:36:07 -0000	1.1.4.1
  @@ -13,7 +13,7 @@
   
   /**
    * @author Scott.Stark@...
  - * @version $Revision: 1.1 $
  + * @version $Revision: 1.1.4.1 $
    */
   public class MBeanDepends
   {
  @@ -55,6 +55,6 @@
         throws MalformedObjectNameException
   
      {
  -      return text == null ? null : new ObjectName(text);
  +      return text == null ? null : new ObjectName(text.trim());
      }
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785282">[jboss-cvs] jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling         ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:36</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:34:49

  Modified:    src/main/org/jboss/xb/binding/sunday/unmarshalling        
                        Tag: Branch_4_0 CharactersHandler.java
                        SundayContentHandler.java XsdBinder.java
                        AttributeBinding.java TypeBinding.java
                        DefaultSchemaResolver.java SchemaBinding.java
                        SchemaBindingResolver.java
  Log:
  backport from HEAD
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.3   +1 -1      jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/CharactersHandler.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CharactersHandler.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/CharactersHandler.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- CharactersHandler.java	25 Jul 2005 04:57:16 -0000	1.1.2.2
  +++ CharactersHandler.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -15,7 +15,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public abstract class CharactersHandler
   {
  
  
  
  1.1.2.5   +41 -29    jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SundayContentHandler.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SundayContentHandler.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SundayContentHandler.java,v
  retrieving revision 1.1.2.4
  retrieving revision 1.1.2.5
  diff -u -b -r1.1.2.4 -r1.1.2.5
  --- SundayContentHandler.java	25 Jul 2005 04:57:16 -0000	1.1.2.4
  +++ SundayContentHandler.java	29 Jul 2005 15:34:49 -0000	1.1.2.5
  @@ -9,10 +9,10 @@
   import java.util.LinkedList;
   import java.util.List;
   import javax.xml.namespace.QName;
  -import javax.xml.XMLConstants;
   
   import org.jboss.xb.binding.JBossXBRuntimeException;
   import org.jboss.xb.binding.NamespaceRegistry;
  +import org.jboss.xb.binding.Util;
   import org.jboss.xb.binding.metadata.CharactersMetaData;
   import org.jboss.xb.binding.metadata.ValueMetaData;
   import org.jboss.xb.binding.parser.JBossXBParser;
  @@ -27,7 +27,7 @@
    * re-gathering this same metadata again.
    *
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.4 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.5 $&lt;/tt&gt;
    */
   public class SundayContentHandler
      implements JBossXBParser.ContentHandler
  @@ -37,15 +37,23 @@
      private final static Object NIL = new Object();
   
      private final SchemaBinding schema;
  +   private final SchemaBindingResolver schemaResolver;
      private final StackImpl elementStack = new StackImpl();
      private final StackImpl objectStack = new StackImpl();
      private StringBuffer textContent = new StringBuffer();
      private Object root;
      private NamespaceRegistry nsRegistry = new NamespaceRegistry();
   
  -   public SundayContentHandler(SchemaBinding cursor)
  +   public SundayContentHandler(SchemaBinding schema)
      {
  -      this.schema = cursor;
  +      this.schema = schema;
  +      this.schemaResolver = null;
  +   }
  +
  +   public SundayContentHandler(SchemaBindingResolver schemaResolver)
  +   {
  +      this.schemaResolver = schemaResolver;
  +      this.schema = null;
      }
   
      public void characters(char[] ch, int start, int length)
  @@ -77,6 +85,7 @@
               if(textContent.length() &gt; 0 || simpleType != null)
               {
                  String dataContent;
  +               SchemaBinding schema = elementBinding.getSchema();
                  if(textContent.length() == 0)
                  {
                     dataContent = null;
  @@ -85,8 +94,10 @@
                  {
                     
                     dataContent = textContent.toString();
  -                  if( schema.isReplacePropertyRefs() )
  +                  if(schema != null &amp;&amp; schema.isReplacePropertyRefs())
  +                  {
                        dataContent = StringPropertyReplacer.replaceProperties(dataContent);
  +                  }
                     textContent.delete(0, textContent.length());
                  }
   
  @@ -94,7 +105,7 @@
   
                  if(simpleType == null)
                  {
  -                  if(schema.isStrictSchema())
  +                  if(schema != null &amp;&amp; schema.isStrictSchema())
                     {
                        throw new JBossXBRuntimeException("Element " +
                           endName +
  @@ -186,8 +197,6 @@
               }
               else if(parentElement != null)
               {
  -               if(parentElement.getType().getSchemaResolver() != null)
  -               {
                     // todo: review this&gt; the parent has anyType, so it gets the value of its child
                     if(!objectStack.isEmpty())
                     {
  @@ -200,7 +209,6 @@
                     }
                  }
               }
  -         }
            else
            {
               while(i-- &gt; 0)
  @@ -229,22 +237,25 @@
         ElementBinding binding = null;
   
         ElementBinding parentBinding = null;
  +      SchemaBinding schemaBinding = schema;
         if(elementStack.isEmpty())
         {
  -         binding = schema.getElement(startName);
  -         if( binding == null )
  +         if(schemaBinding != null)
            {
  -            /* This can happen when an empty SchemaBinding was used to kick
  -            start the unmarshalling. The actual document schema needs to be
  -            obtained based on the first element's namespace.
  -            */
  -            String schemaLocation = atts.getValue(
  -               XMLConstants.W3C_XML_SCHEMA_INSTANCE_NS_URI,
  -               "schemaLocation");
  -            SchemaBinding nextSchema = schema.resolve(namespaceURI, localName,
  -               schema.getBaseURI(), schemaLocation);
  -            if( nextSchema != null )
  -               binding = nextSchema.getElement(startName);
  +            binding = schemaBinding.getElement(startName);
  +         }
  +         else if(schemaResolver != null)
  +         {
  +            String schemaLocation = atts == null ? null : Util.getSchemaLocation(atts, namespaceURI);
  +            schemaBinding = schemaResolver.resolve(namespaceURI, localName, null, schemaLocation);
  +            if(schemaBinding != null)
  +            {
  +               binding = schemaBinding.getElement(startName);
  +            }
  +         }
  +         else
  +         {
  +            throw new JBossXBRuntimeException("Neither schema binding nor schema binding resolver is not available!");
            }
         }
         else
  @@ -253,6 +264,7 @@
            if(parentBinding != null)
            {
               binding = parentBinding.getType().getElement(startName, atts);
  +            schemaBinding = parentBinding.getSchema();
            }
         }
   
  @@ -291,7 +303,7 @@
               typeBinding.attributes(o, startName, binding, atts, nsRegistry);
            }
         }
  -      else if(schema.isStrictSchema())
  +      else if(schemaBinding != null &amp;&amp; schemaBinding.isStrictSchema())
         {
            throw new JBossXBRuntimeException("Element " +
               startName +
  
  
  
  1.1.2.9   +7 -10     jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/XsdBinder.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: XsdBinder.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/XsdBinder.java,v
  retrieving revision 1.1.2.8
  retrieving revision 1.1.2.9
  diff -u -b -r1.1.2.8 -r1.1.2.9
  --- XsdBinder.java	25 Jul 2005 04:57:16 -0000	1.1.2.8
  +++ XsdBinder.java	29 Jul 2005 15:34:49 -0000	1.1.2.9
  @@ -31,7 +31,6 @@
   import org.jboss.xb.binding.metadata.XsdAnnotation;
   import org.jboss.xb.binding.metadata.XsdAppInfo;
   import org.jboss.xb.binding.sunday.unmarshalling.impl.runtime.RtAttributeHandler;
  -import org.jboss.util.xml.JBossEntityResolver;
   import org.apache.xerces.xs.XSModel;
   import org.apache.xerces.xs.XSImplementation;
   import org.apache.xerces.xs.XSLoader;
  @@ -53,7 +52,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.8 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.9 $&lt;/tt&gt;
    */
   public class XsdBinder
   {
  @@ -93,8 +92,7 @@
       * @param encoding - optional stream encoding
       * @return SchemaBinding mapping
       */ 
  -   public static final SchemaBinding bind(InputStream xsdStream, String encoding,
  -      String baseURI)
  +   public static final SchemaBinding bind(InputStream xsdStream, String encoding, String baseURI)
      {
         XSModel model = loadSchema(xsdStream, encoding, baseURI);
         return bind(model, baseURI);
  @@ -106,8 +104,7 @@
       * @param encoding - optional reader encoding
       * @return SchemaBinding mapping
       */ 
  -   public static final SchemaBinding bind(Reader xsdReader, String encoding,
  -      String baseURI)
  +   public static final SchemaBinding bind(Reader xsdReader, String encoding, String baseURI)
      {
         XSModel model = loadSchema(xsdReader, encoding, baseURI);
         return bind(model, baseURI);
  @@ -129,12 +126,13 @@
      {
         return bind(model, null);
      }
  +
      public static final SchemaBinding bind(XSModel model, String baseURI)
      {
  +      DefaultSchemaResolver resolver = new DefaultSchemaResolver();
  +      resolver.setBaseURI(baseURI);
         SchemaBinding schema = getXsdBinding().schemaBinding;
  -      DefaultSchemaResolver resolver = new DefaultSchemaResolver(new JBossEntityResolver());
         schema.setSchemaResolver(resolver);
  -      schema.setBaseURI(baseURI);
   
         // read annotations. for now just log the ones that are going to be used
         XSObjectList annotations = model.getAnnotations();
  @@ -620,7 +618,6 @@
      private static void bindWildcard(SchemaBinding schema, XSWildcard wildcard)
      {
         TypeBinding typeBinding = peekType();
  -      typeBinding.setSchemaResolver(schema);
   
         XSAnnotation annotation = wildcard.getAnnotation();
         if(annotation != null)
  @@ -651,7 +648,7 @@
         QName qName = new QName(element.getNamespace(), element.getName());
   
         TypeBinding parentType = peekType();
  -      ElementBinding binding = parentType == null ? null : parentType.getElement(qName);
  +      ElementBinding binding = parentType == null ? null : parentType.getLocalElement(qName);
   
         if(binding == null)
         {
  
  
  
  1.1.2.3   +1 -1      jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/AttributeBinding.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AttributeBinding.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/AttributeBinding.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- AttributeBinding.java	25 Jul 2005 04:57:16 -0000	1.1.2.2
  +++ AttributeBinding.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -11,7 +11,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public class AttributeBinding
   {
  
  
  
  1.1.2.7   +20 -17    jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/TypeBinding.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: TypeBinding.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/TypeBinding.java,v
  retrieving revision 1.1.2.6
  retrieving revision 1.1.2.7
  diff -u -b -r1.1.2.6 -r1.1.2.7
  --- TypeBinding.java	26 Jul 2005 23:39:15 -0000	1.1.2.6
  +++ TypeBinding.java	29 Jul 2005 15:34:49 -0000	1.1.2.7
  @@ -12,7 +12,6 @@
   import java.util.Iterator;
   import javax.xml.namespace.QName;
   import javax.xml.namespace.NamespaceContext;
  -import javax.xml.XMLConstants;
   
   import org.xml.sax.Attributes;
   import org.xml.sax.helpers.AttributesImpl;
  @@ -24,10 +23,11 @@
   import org.jboss.xb.binding.metadata.ValueMetaData;
   import org.jboss.xb.binding.sunday.unmarshalling.impl.runtime.RtCharactersHandler;
   import org.jboss.xb.binding.sunday.unmarshalling.impl.runtime.RtElementHandler;
  +import org.jboss.xb.binding.Util;
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.6 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.7 $&lt;/tt&gt;
    */
   public class TypeBinding
   {
  @@ -97,35 +97,38 @@
         return qName;
      }
   
  +   public ElementBinding getLocalElement(QName name)
  +   {
  +      return (ElementBinding)elements.get(name);
  +   }
  +
      public ElementBinding getElement(QName name)
      {
         return getElement(name, null);
      }
  +
      public ElementBinding getElement(QName name, Attributes atts)
      {
         ElementBinding element = (ElementBinding)elements.get(name);
  -      if(element == null &amp;&amp; schemaResolver != null)
  -      {
  -         // this is wildcard handling
  -         SchemaBinding schema = null;
  -         if( schemaResolver != null )
  +      if(element == null)
            {
  -            String schemaLocation = null;
  -            if( atts != null )
  +         SchemaBindingResolver resolver = schemaResolver;
  +         if(resolver == null &amp;&amp; schemaBinding != null)
               {
  -               schemaLocation = atts.getValue(
  -                  XMLConstants.W3C_XML_SCHEMA_INSTANCE_NS_URI,
  -                  "schemaLocation");
  -            }
  -            schema = schemaResolver.resolve(name.getNamespaceURI(),
  -               name.getLocalPart(), schemaBinding.getBaseURI(), schemaLocation);
  +            resolver = schemaBinding.getSchemaResolver();
            }
   
  +         if(resolver != null)
  +         {
  +            // this is wildcard handling
  +            String schemaLocation = atts == null ? null : Util.getSchemaLocation(atts, name.getNamespaceURI());
  +            SchemaBinding schema = resolver.resolve(name.getNamespaceURI(), name.getLocalPart(), null, schemaLocation);
            if(schema != null)
            {
               element = schema.getElement(name);
            }
         }
  +      }
         return element;
      }
   
  
  
  
  1.1.2.1   +27 -5     jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/DefaultSchemaResolver.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: DefaultSchemaResolver.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/DefaultSchemaResolver.java,v
  retrieving revision 1.1
  retrieving revision 1.1.2.1
  diff -u -b -r1.1 -r1.1.2.1
  --- DefaultSchemaResolver.java	23 Jul 2005 03:16:59 -0000	1.1
  +++ DefaultSchemaResolver.java	29 Jul 2005 15:34:49 -0000	1.1.2.1
  @@ -19,20 +19,36 @@
    * the schema xsd.
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.1 $
  + * @version $Revision: 1.1.2.1 $
    */
   public class DefaultSchemaResolver
      implements SchemaBindingResolver
   {
      private static Logger log = Logger.getLogger(DefaultSchemaResolver.class);
   
  +   private String baseURI;
      private JBossEntityResolver resolver;
   
  +   public DefaultSchemaResolver()
  +   {
  +      this(new JBossEntityResolver());
  +   }
  +
      public DefaultSchemaResolver(JBossEntityResolver resolver)
      {
         this.resolver =  resolver;
      }
   
  +   public String getBaseURI()
  +   {
  +      return baseURI;
  +   }
  +
  +   public void setBaseURI(String baseURI)
  +   {
  +      this.baseURI = baseURI;
  +   }
  +
      /**
       * The uses the JBossEntityResolver.resolveEntity by:
       * 1. Using the nsUri as the systemID
  @@ -49,8 +65,7 @@
       * @param schemaLocation
       * @return
       */ 
  -   public SchemaBinding resolve(String nsUri, String localName,
  -      String baseURI, String schemaLocation)
  +   public SchemaBinding resolve(String nsUri, String localName, String baseURI, String schemaLocation)
      {
         boolean trace = log.isTraceEnabled();
         InputSource is = null;
  @@ -63,7 +78,7 @@
         catch (Exception e)
         {
            if( trace )
  -            log.trace("Failed to nsUri as systemID", e);
  +            log.trace("Failed to use nsUri as systemID", e);
         }
   
         if( is == null &amp;&amp; schemaLocation != null )
  @@ -76,14 +91,20 @@
            catch (Exception e)
            {
               if( trace )
  -               log.trace("Failed to schemaLocation as systemID", e);
  +               log.trace("Failed to use schemaLocation as systemID", e);
            }
  +
            if( is == null )
            {
               URL schemaURL = null;
               // Just try resolving the schemaLocation against the baseURI
               try
               {
  +               if(baseURI == null)
  +               {
  +                  baseURI = this.baseURI;
  +               }
  +
                  if( baseURI != null )
                  {
                     URL baseURL = new URL(baseURI);
  @@ -93,6 +114,7 @@
                  {
                     schemaURL = new URL(schemaLocation);
                  }
  +
                  if( schemaURL != null )
                  {
                     InputStream is2 = schemaURL.openStream();
  
  
  
  1.1.2.4   +1 -52     jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBinding.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SchemaBinding.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBinding.java,v
  retrieving revision 1.1.2.3
  retrieving revision 1.1.2.4
  diff -u -b -r1.1.2.3 -r1.1.2.4
  --- SchemaBinding.java	25 Jul 2005 04:57:16 -0000	1.1.2.3
  +++ SchemaBinding.java	29 Jul 2005 15:34:49 -0000	1.1.2.4
  @@ -8,7 +8,6 @@
   
   import java.util.Map;
   import java.util.HashMap;
  -import java.util.StringTokenizer;
   import javax.xml.namespace.QName;
   
   import org.jboss.xb.binding.Constants;
  @@ -17,10 +16,9 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.4 $&lt;/tt&gt;
    */
   public class SchemaBinding
  -   implements SchemaBindingResolver
   {
      private static final Map SIMPLE_TYPES = new HashMap();
   
  @@ -86,7 +84,6 @@
      private boolean ignoreUnresolvedFieldOrClass = true;
      private boolean ignoreLowLine = true;
      private boolean replacePropertyRefs = true;
  -   private String baseURI;
   
      public TypeBinding getType(QName qName)
      {
  @@ -197,52 +194,4 @@
      {
         this.ignoreLowLine = ignoreLowLine;
      }
  -
  -   public String getBaseURI()
  -   {
  -      return baseURI;
  -   }
  -   public void setBaseURI(String baseURI)
  -   {
  -      this.baseURI = baseURI;
  -   }
  -
  -   // SchemaBindingResolver implementation
  -
  -   public SchemaBinding resolve(String nsUri, String localName,
  -      String baseURI, String schemaLocation)
  -   {
  -      SchemaBinding schema = null;
  -      if(schemaResolver != null)
  -      {
  -         String location = null;
  -         if( schemaLocation != null )
  -            location = parseSchemaLocation(nsUri, schemaLocation);
  -         schema = schemaResolver.resolve(nsUri, localName, baseURI, location);
  -      }
  -      return schema;
  -   }
  -
  -   /**
  -    * Parse the namespace location pairs in the schemaLocation and return the
  -    * location that matches the nsURI argument.
  -    * 
  -    * @param nsURI
  -    * @param schemaLocation
  -    * @return the location uri if found, null otherwise
  -    */ 
  -   public String parseSchemaLocation(String nsURI, String schemaLocation)
  -   {
  -      StringTokenizer tokenizer = new StringTokenizer(schemaLocation, " \t\n\r");
  -      String location = null;
  -      String ns = tokenizer.nextToken();
  -      while( ns != null )
  -      {
  -         location = tokenizer.nextToken();
  -         if( ns.equals(nsURI) )
  -            break;
  -         ns = tokenizer.nextToken();
  -      }
  -      return location;
  -   }
   }
  
  
  
  1.1.2.3   +6 -3      jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBindingResolver.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SchemaBindingResolver.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/SchemaBindingResolver.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- SchemaBindingResolver.java	25 Jul 2005 04:57:16 -0000	1.1.2.2
  +++ SchemaBindingResolver.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -8,10 +8,14 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public interface SchemaBindingResolver
   {
  +   String getBaseURI();
  +
  +   void setBaseURI(String baseURI);
  +
      /**
       * Returns an instance of SchemaBinding corresponding to the namespace URI.
       *
  @@ -24,6 +28,5 @@
       * or null if the namespace URI is not recognized (though, in this case it
       * could also throw an exception)
       */
  -   SchemaBinding resolve(String nsUri, String localName,
  -      String baseURI, String schemaLocation);
  +   SchemaBinding resolve(String nsUri, String localName, String baseURI, String schemaLocation);
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785279">[jboss-cvs] jboss-common/src/main/org/jboss/xb/binding       ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:36</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:34:49

  Modified:    src/main/org/jboss/xb/binding       Tag: Branch_4_0
                        MappingObjectModelProvider.java
                        SimpleTypeBindings.java XercesXsMarshaller.java
                        Unmarshaller.java UnmarshallerImpl.java Util.java
  Log:
  backport from HEAD
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.3   +1 -1      jboss-common/src/main/org/jboss/xb/binding/MappingObjectModelProvider.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MappingObjectModelProvider.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/MappingObjectModelProvider.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- MappingObjectModelProvider.java	25 Jul 2005 16:19:40 -0000	1.1.2.2
  +++ MappingObjectModelProvider.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -18,7 +18,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public class MappingObjectModelProvider
      implements GenericObjectModelProvider
  
  
  
  1.1.2.4   +1 -1      jboss-common/src/main/org/jboss/xb/binding/SimpleTypeBindings.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SimpleTypeBindings.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/SimpleTypeBindings.java,v
  retrieving revision 1.1.2.3
  retrieving revision 1.1.2.4
  diff -u -b -r1.1.2.3 -r1.1.2.4
  --- SimpleTypeBindings.java	25 Jul 2005 16:19:40 -0000	1.1.2.3
  +++ SimpleTypeBindings.java	29 Jul 2005 15:34:49 -0000	1.1.2.4
  @@ -25,7 +25,7 @@
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
    * @author Thomas.Diesler@...
  - * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.4 $&lt;/tt&gt;
    */
   public final class SimpleTypeBindings
      implements Serializable
  
  
  
  1.1.2.5   +0 -0      jboss-common/src/main/org/jboss/xb/binding/XercesXsMarshaller.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: XercesXsMarshaller.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/XercesXsMarshaller.java,v
  retrieving revision 1.1.2.4
  retrieving revision 1.1.2.5
  diff -u -b -r1.1.2.4 -r1.1.2.5
  --- XercesXsMarshaller.java	25 Jul 2005 16:19:40 -0000	1.1.2.4
  +++ XercesXsMarshaller.java	29 Jul 2005 15:34:49 -0000	1.1.2.5
  @@ -42,7 +42,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.4 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.5 $&lt;/tt&gt;
    */
   public class XercesXsMarshaller
      extends AbstractMarshaller
  
  
  
  1.1.2.3   +14 -6     jboss-common/src/main/org/jboss/xb/binding/Unmarshaller.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Unmarshaller.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/Unmarshaller.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- Unmarshaller.java	25 Jul 2005 16:19:40 -0000	1.1.2.2
  +++ Unmarshaller.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -8,16 +8,18 @@
   
   import java.io.InputStream;
   import java.io.Reader;
  +
   import org.jboss.xb.binding.metadata.unmarshalling.BindingCursor;
   import org.jboss.xb.binding.metadata.unmarshalling.DocumentBinding;
   import org.jboss.xb.binding.parser.JBossXBParser;
   import org.jboss.xb.binding.sunday.unmarshalling.SchemaBinding;
  +import org.jboss.xb.binding.sunday.unmarshalling.SchemaBindingResolver;
   import org.xml.sax.EntityResolver;
   import org.xml.sax.ErrorHandler;
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public interface Unmarshaller
   {
  @@ -45,7 +47,17 @@
   
      Object unmarshal(String xmlFile) throws JBossXBException;
   
  -   Object unmarshal(String xmlFile, SchemaBinding handler) throws JBossXBException;
  +   Object unmarshal(String xml, SchemaBinding schemaBinding) throws JBossXBException;
  +
  +   Object unmarshal(Reader xmlReader, SchemaBinding schemaBinding) throws JBossXBException;
  +
  +   Object unmarshal(InputStream xmlStream, SchemaBinding schemaBinding) throws JBossXBException;
  +
  +   Object unmarshal(String xml, SchemaBindingResolver schemaResolver) throws JBossXBException;
  +
  +   Object unmarshal(Reader xmlReader, SchemaBindingResolver schemaResolver) throws JBossXBException;
  +
  +   Object unmarshal(InputStream xmlStream, SchemaBindingResolver schemaResolver) throws JBossXBException;
   
      Object unmarshal(String xmlFile, ObjectModelFactory factory, DocumentBinding metadata) throws JBossXBException;
   
  @@ -60,8 +72,4 @@
   
      Object unmarshal(String systemId, BindingCursor cursor, ObjectModelFactory factory)
         throws JBossXBException;
  -
  -   Object unmarshal(Reader xmlFile, SchemaBinding handler) throws JBossXBException;
  -
  -   Object unmarshal(InputStream is, SchemaBinding schemaBinding) throws JBossXBException;
   }
  
  
  
  1.1.2.4   +31 -10    jboss-common/src/main/org/jboss/xb/binding/UnmarshallerImpl.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: UnmarshallerImpl.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/UnmarshallerImpl.java,v
  retrieving revision 1.1.2.3
  retrieving revision 1.1.2.4
  diff -u -b -r1.1.2.3 -r1.1.2.4
  --- UnmarshallerImpl.java	25 Jul 2005 16:19:40 -0000	1.1.2.3
  +++ UnmarshallerImpl.java	29 Jul 2005 15:34:49 -0000	1.1.2.4
  @@ -16,9 +16,9 @@
   import org.jboss.xb.binding.metadata.unmarshalling.impl.RuntimeDocumentBinding;
   import org.jboss.xb.binding.parser.JBossXBParser;
   import org.jboss.xb.binding.parser.sax.SaxJBossXBParser;
  -import org.jboss.xb.binding.parser.xni.XniJBossXBParser;
   import org.jboss.xb.binding.sunday.unmarshalling.SchemaBinding;
   import org.jboss.xb.binding.sunday.unmarshalling.SundayContentHandler;
  +import org.jboss.xb.binding.sunday.unmarshalling.SchemaBindingResolver;
   import org.xml.sax.EntityResolver;
   import org.xml.sax.ErrorHandler;
   
  @@ -27,7 +27,7 @@
    * WARNING: this implementation is not thread-safe.
    *
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.4 $&lt;/tt&gt;
    */
   public class UnmarshallerImpl
      implements Unmarshaller
  @@ -99,25 +99,46 @@
         return handler.getRoot();
      }
   
  -   public Object unmarshal(Reader xmlFile, SchemaBinding handler) throws JBossXBException
  +   public Object unmarshal(String xml, SchemaBinding schemaBinding) throws JBossXBException
      {
  -      SundayContentHandler cHandler = new SundayContentHandler(handler);
  -      parser.parse(xmlFile, cHandler);
  +      SundayContentHandler cHandler = new SundayContentHandler(schemaBinding);
  +      parser.parse(xml, cHandler);
         return cHandler.getRoot();
      }
   
  -   public Object unmarshal(InputStream is, SchemaBinding schemaBinding)
  +   public Object unmarshal(Reader xmlReader, SchemaBinding schemaBinding) throws JBossXBException
  +   {
  +      SundayContentHandler cHandler = new SundayContentHandler(schemaBinding);
  +      parser.parse(xmlReader, cHandler);
  +      return cHandler.getRoot();
  +   }
  +
  +   public Object unmarshal(InputStream xmlStream, SchemaBinding schemaBinding)
         throws JBossXBException
      {
         SundayContentHandler cHandler = new SundayContentHandler(schemaBinding);
  -      parser.parse(is, cHandler);
  +      parser.parse(xmlStream, cHandler);
  +      return cHandler.getRoot();
  +   }
  +
  +   public Object unmarshal(String xml, SchemaBindingResolver schemaResolver) throws JBossXBException
  +   {
  +      SundayContentHandler cHandler = new SundayContentHandler(schemaResolver);
  +      parser.parse(xml, cHandler);
  +      return cHandler.getRoot();
  +   }
  +
  +   public Object unmarshal(Reader xmlReader, SchemaBindingResolver schemaResolver) throws JBossXBException
  +   {
  +      SundayContentHandler cHandler = new SundayContentHandler(schemaResolver);
  +      parser.parse(xmlReader, cHandler);
         return cHandler.getRoot();
      }
   
  -   public Object unmarshal(String xmlFile, SchemaBinding handler) throws JBossXBException
  +   public Object unmarshal(InputStream xmlStream, SchemaBindingResolver schemaResolver) throws JBossXBException
      {
  -      SundayContentHandler cHandler = new SundayContentHandler(handler);
  -      parser.parse(xmlFile, cHandler);
  +      SundayContentHandler cHandler = new SundayContentHandler(schemaResolver);
  +      parser.parse(xmlStream, cHandler);
         return cHandler.getRoot();
      }
   
  
  
  
  1.1.2.3   +31 -1     jboss-common/src/main/org/jboss/xb/binding/Util.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Util.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/Util.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- Util.java	25 Jul 2005 16:19:40 -0000	1.1.2.2
  +++ Util.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -6,13 +6,16 @@
    */
   package org.jboss.xb.binding;
   
  +import java.util.StringTokenizer;
  +import javax.xml.XMLConstants;
   import org.jboss.util.Classes;
  +import org.xml.sax.Attributes;
   
   /**
    * Various utilities for XML binding.
    *
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public final class Util
   {
  @@ -215,6 +218,33 @@
            type == java.util.Date.class;
      }
   
  +   /**
  +    * Parse the namespace location pairs in the schemaLocation and return the
  +    * location that matches the nsURI argument.
  +    *
  +    * @return the location uri if found, null otherwise
  +    */
  +   public static String getSchemaLocation(Attributes attrs, String nsUri)
  +   {
  +      String location = null;
  +      String schemaLocation = attrs.getValue(XMLConstants.W3C_XML_SCHEMA_INSTANCE_NS_URI, "schemaLocation");
  +      if(schemaLocation != null)
  +      {
  +         StringTokenizer tokenizer = new StringTokenizer(schemaLocation, " \t\n\r");
  +         String ns = tokenizer.nextToken();
  +         while(ns != null)
  +         {
  +            location = tokenizer.nextToken();
  +            if(ns.equals(nsUri))
  +            {
  +               break;
  +            }
  +            ns = tokenizer.nextToken();
  +         }
  +      }
  +      return location;
  +   }
  +
      // Private
   
      /**

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785276">[jboss-cvs] jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/impl/runtime  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:36</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:34:49

  Modified:    src/main/org/jboss/xb/binding/sunday/unmarshalling/impl/runtime 
                        Tag: Branch_4_0 RtUtil.java
  Log:
  backport from HEAD
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.3   +1 -1      jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/impl/runtime/RtUtil.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: RtUtil.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-common/src/main/org/jboss/xb/binding/sunday/unmarshalling/impl/runtime/RtUtil.java,v
  retrieving revision 1.1.2.2
  retrieving revision 1.1.2.3
  diff -u -b -r1.1.2.2 -r1.1.2.3
  --- RtUtil.java	25 Jul 2005 16:19:40 -0000	1.1.2.2
  +++ RtUtil.java	29 Jul 2005 15:34:49 -0000	1.1.2.3
  @@ -19,7 +19,7 @@
   
   /**
    * @author &lt;a href="mailto:alex@... Loubyansky&lt;/a&gt;
  - * @version &lt;tt&gt;$Revision: 1.1.2.2 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.1.2.3 $&lt;/tt&gt;
    */
   public class RtUtil
   {

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785274">[jboss-cvs] jbosstest/src/main/org/jboss/test/xml  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 15:29</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 11:28:13

  Modified:    src/main/org/jboss/test/xml  MBeanServerUnitTestCase.java
  Log:
  fixed entity resolution
  
  Revision  Changes    Path
  1.18      +20 -1     jbosstest/src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: MBeanServerUnitTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/xml/MBeanServerUnitTestCase.java,v
  retrieving revision 1.17
  retrieving revision 1.18
  diff -u -b -r1.17 -r1.18
  --- MBeanServerUnitTestCase.java	29 Jul 2005 12:12:21 -0000	1.17
  +++ MBeanServerUnitTestCase.java	29 Jul 2005 15:28:13 -0000	1.18
  @@ -38,10 +38,13 @@
   import org.jboss.xb.binding.sunday.unmarshalling.DefaultSchemaResolver;
   import org.jboss.naming.JNDIBindings;
   import org.jboss.naming.JNDIBinding;
  +import org.jboss.util.xml.JBossEntityResolver;
   import org.w3c.dom.Element;
   import org.w3c.dom.Document;
   import org.w3c.dom.NodeList;
   import org.w3c.dom.Node;
  +import org.xml.sax.InputSource;
  +import org.xml.sax.SAXException;
   
   import junit.framework.TestCase;
   
  @@ -50,7 +53,7 @@
    * the org.jboss.test.xml.mbeanserver.Services and related objects.
    * 
    * @author Scott.Stark@...
  - * @version $Revision: 1.17 $
  + * @version $Revision: 1.18 $
    */
   public class MBeanServerUnitTestCase
      extends TestCase
  @@ -186,7 +189,23 @@
         final URL url = Thread.currentThread().getContextClassLoader().getResource("xml/naming/");
         DefaultSchemaResolver resolver = new DefaultSchemaResolver();
         resolver.setBaseURI(url.toString());
  +
         Unmarshaller unmarshaller = UnmarshallerFactory.newInstance().newUnmarshaller();
  +      unmarshaller.setEntityResolver(new JBossEntityResolver(){
  +         public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException
  +         {
  +            if(systemId.endsWith("custom-object-binding.xsd"))
  +            {
  +               URL url = Thread.currentThread().getContextClassLoader().
  +                  getResource("xml/naming/custom-object-binding.xsd");
  +               return new InputSource(url.toExternalForm());
  +            }
  +            else
  +            {
  +               return super.resolveEntity(publicId, systemId);
  +            }
  +         }
  +      });
   
         JNDIBindings bindings = (JNDIBindings) unmarshaller.unmarshal(is2, resolver);
         is2.close();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785271">[jboss-cvs] microkernel/src/tests/org/jboss/test/kernel/xml/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:48

  Modified:    src/tests/org/jboss/test/kernel/xml/test  XMLTestCase.java
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.11      +2 -2      microkernel/src/tests/org/jboss/test/kernel/xml/test/XMLTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: XMLTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/tests/org/jboss/test/kernel/xml/test/XMLTestCase.java,v
  retrieving revision 1.10
  retrieving revision 1.11
  diff -u -b -r1.10 -r1.11
  --- XMLTestCase.java	26 Jun 2005 20:49:16 -0000	1.10
  +++ XMLTestCase.java	29 Jul 2005 15:25:48 -0000	1.11
  @@ -23,7 +23,7 @@
    * XML Test Case.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.10 $
  + * @version $Revision: 1.11 $
    */
   public class XMLTestCase extends AbstractKernelTest
   {
  @@ -67,7 +67,7 @@
         Long longValue = new Long("12345");
         Float floatValue = new Float("3.14");
         Double doubleValue = new Double("3.14e12");
  -      Date dateValue = createDate(2012, 12, 12);
  +      Date dateValue = createDate("Mon Jan 01 00:00:00 CET 2001");
         BigDecimal bigDecimalValue = new BigDecimal("12e4");
         BigInteger bigIntegerValue = new BigInteger("123456");

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785268">[jboss-cvs] microkernel/src/resources/xml-test/org/jboss/test/kernel/config/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:49

  Modified:    src/resources/xml-test/org/jboss/test/kernel/config/test 
                        testConfigure.xml
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.2       +1 -1      microkernel/src/resources/xml-test/org/jboss/test/kernel/config/test/testConfigure.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: testConfigure.xml
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/resources/xml-test/org/jboss/test/kernel/config/test/testConfigure.xml,v
  retrieving revision 1.1
  retrieving revision 1.2
  diff -u -b -r1.1 -r1.2
  --- testConfigure.xml	2 May 2005 23:56:02 -0000	1.1
  +++ testConfigure.xml	29 Jul 2005 15:25:49 -0000	1.2
  @@ -12,7 +12,7 @@
         &lt;property name="aLong"&gt;12345&lt;/property&gt;
         &lt;property name="aFloat"&gt;3.14&lt;/property&gt;
         &lt;property name="aDouble"&gt;3.14e12&lt;/property&gt;
  -      &lt;property name="aDate"&gt;12/12/12&lt;/property&gt;
  +      &lt;property name="aDate"&gt;Mon Jan 01 00:00:00 CET 2001&lt;/property&gt;
         &lt;property name="aBigDecimal"&gt;12e4&lt;/property&gt;
         &lt;property name="aBigInteger"&gt;123456&lt;/property&gt;
         &lt;property name="abyte"&gt;12&lt;/property&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785265">[jboss-cvs] microkernel/src/tests/org/jboss/test/kernel  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:49

  Modified:    src/tests/org/jboss/test/kernel  AbstractKernelTest.java
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.6       +18 -1     microkernel/src/tests/org/jboss/test/kernel/AbstractKernelTest.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AbstractKernelTest.java
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/tests/org/jboss/test/kernel/AbstractKernelTest.java,v
  retrieving revision 1.5
  retrieving revision 1.6
  diff -u -b -r1.5 -r1.6
  --- AbstractKernelTest.java	12 May 2005 21:11:48 -0000	1.5
  +++ AbstractKernelTest.java	29 Jul 2005 15:25:49 -0000	1.6
  @@ -6,6 +6,8 @@
    */
   package org.jboss.test.kernel;
   
  +import java.text.DateFormat;
  +import java.text.SimpleDateFormat;
   import java.util.Calendar;
   import java.util.Date;
   
  @@ -14,15 +16,18 @@
   import org.jboss.kernel.plugins.registry.AbstractKernelRegistryEntry;
   import org.jboss.kernel.spi.registry.KernelRegistryEntry;
   import org.jboss.test.BaseTestCase;
  +import org.jboss.util.NestedRuntimeException;
   
   /**
    * An abstract kernel test.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.5 $
  + * @version $Revision: 1.6 $
    */
   public class AbstractKernelTest extends BaseTestCase
   {
  +   private static DateFormat dateFormat = new SimpleDateFormat("EEE MMM d HH:mm:ss z yyyy");
  +   
      public AbstractKernelTest(String name)
      {
         super(name);
  @@ -46,6 +51,18 @@
         return new AbstractKernelRegistryEntry(o);
      }
   
  +   protected Date createDate(String date)
  +   {
  +      try
  +      {
  +         return dateFormat.parse(date);
  +      }
  +      catch (Exception e)
  +      {
  +         throw new NestedRuntimeException(e);
  +      }
  +   }
  +
      protected Date createDate(int year, int month, int day)
      {
         Calendar calender = Calendar.getInstance();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785262">[jboss-cvs] microkernel/src/tests/org/jboss/test/kernel/config/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:49

  Modified:    src/tests/org/jboss/test/kernel/config/test 
                        ConfigureFromStringTestCase.java
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.7       +2 -2      microkernel/src/tests/org/jboss/test/kernel/config/test/ConfigureFromStringTestCase.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ConfigureFromStringTestCase.java
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/tests/org/jboss/test/kernel/config/test/ConfigureFromStringTestCase.java,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- ConfigureFromStringTestCase.java	2 May 2005 23:56:02 -0000	1.6
  +++ ConfigureFromStringTestCase.java	29 Jul 2005 15:25:49 -0000	1.7
  @@ -22,7 +22,7 @@
    * Configuration from object Test Case.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.6 $
  + * @version $Revision: 1.7 $
    */
   public class ConfigureFromStringTestCase extends AbstractKernelConfigTest
   {
  @@ -46,7 +46,7 @@
      Long longValue = new Long("12345");
      Float floatValue = new Float("3.14");
      Double doubleValue = new Double("3.14e12");
  -   Date dateValue = createDate(2012, 12, 12);
  +   Date dateValue = createDate("Mon Jan 01 00:00:00 CET 2001");
      BigDecimal bigDecimalValue = new BigDecimal("12e4");
      BigInteger bigIntegerValue = new BigInteger("123456");

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785259">[jboss-cvs] microkernel/src/resources/xml-test/org/jboss/test/kernel/xml/test  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:49

  Modified:    src/resources/xml-test/org/jboss/test/kernel/xml/test 
                        testConfigure.xml
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.7       +1 -1      microkernel/src/resources/xml-test/org/jboss/test/kernel/xml/test/testConfigure.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: testConfigure.xml
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/resources/xml-test/org/jboss/test/kernel/xml/test/testConfigure.xml,v
  retrieving revision 1.6
  retrieving revision 1.7
  diff -u -b -r1.6 -r1.7
  --- testConfigure.xml	10 May 2005 01:06:23 -0000	1.6
  +++ testConfigure.xml	29 Jul 2005 15:25:49 -0000	1.7
  @@ -11,7 +11,7 @@
         &lt;property name="aLong"&gt;12345&lt;/property&gt;
         &lt;property name="aFloat"&gt;3.14&lt;/property&gt;
         &lt;property name="aDouble"&gt;3.14e12&lt;/property&gt;
  -      &lt;property name="aDate"&gt;12/12/12&lt;/property&gt;
  +      &lt;property name="aDate"&gt;Mon Jan 01 00:00:00 CET 2001&lt;/property&gt;
         &lt;property name="aBigDecimal"&gt;12e4&lt;/property&gt;
         &lt;property name="aBigInteger"&gt;123456&lt;/property&gt;
         &lt;property name="abyte"&gt;12&lt;/property&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785256">[jboss-cvs] microkernel/src/main/org/jboss/beans/metadata/plugins  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:26</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:25:49

  Modified:    src/main/org/jboss/beans/metadata/plugins 
                        StringValueMetaData.java
  Log:
  Try to load the JBoss properties editors in StringValueMetaData.
  
  Change the Date config tests to use the problem CET date that Alex was seeing.
  
  Revision  Changes    Path
  1.11      +16 -1     microkernel/src/main/org/jboss/beans/metadata/plugins/StringValueMetaData.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StringValueMetaData.java
  ===================================================================
  RCS file: /cvsroot/jboss/microkernel/src/main/org/jboss/beans/metadata/plugins/StringValueMetaData.java,v
  retrieving revision 1.10
  retrieving revision 1.11
  diff -u -b -r1.10 -r1.11
  --- StringValueMetaData.java	27 Jul 2005 23:03:58 -0000	1.10
  +++ StringValueMetaData.java	29 Jul 2005 15:25:49 -0000	1.11
  @@ -11,22 +11,37 @@
   import java.lang.reflect.Constructor;
   import java.lang.reflect.InvocationTargetException;
   
  +import org.jboss.logging.Logger;
   import org.jboss.reflect.spi.TypeInfo;
   
   /**
    * String value.
    * 
    * @author &lt;a href="adrian@... Brock&lt;/a&gt;
  - * @version $Revision: 1.10 $
  + * @version $Revision: 1.11 $
    */
   public class StringValueMetaData extends AbstractTypeMetaData
   {
      // Constants -----------------------------------------------------
   
  +   private static final Logger log = Logger.getLogger(StringValueMetaData.class);
  +   
      // Attributes ----------------------------------------------------
      
      // Static --------------------------------------------------------
      
  +   static
  +   {
  +      try
  +      {
  +         Class.forName("org.jboss.util.propertyeditor.PropertyEditors");
  +      }
  +      catch (ClassNotFoundException ignored)
  +      {
  +         log.trace("Unable to load property editors", ignored);
  +      }
  +   }
  +   
      // Constructors --------------------------------------------------
   
      /**

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785254">[jboss-cvs] jboss  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Adrian Brock &lt;adrian.brock@jb...&gt; -	2005-07-29 15:25</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: adrian  
  Date: 05/07/29 11:24:42

  Modified:    jboss    .classpath
  Log:
  Fix the eclipse build
  
  Revision  Changes    Path
  1.23      +21 -88    jboss/.classpath
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: .classpath
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/.classpath,v
  retrieving revision 1.22
  retrieving revision 1.23
  diff -u -b -r1.22 -r1.23
  --- .classpath	13 May 2005 01:00:56 -0000	1.22
  +++ .classpath	29 Jul 2005 15:24:42 -0000	1.23
  @@ -1,92 +1,25 @@
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;classpath&gt;
  -	&lt;classpathentry kind="src" path="output/parsers"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="src/jdk15"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="src/main"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/common"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/system"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/j2ee"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/naming"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/transaction"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/apache-bcel/lib/bcel.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/gjt-jpl-util/lib/jpl-pattern.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/gjt-jpl-util/lib/jpl-util.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/apache-log4j/lib/log4j.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/oswego-concurrent/lib/concurrent.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/gnu-getopt/lib/getopt.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/apache-commons/lib/commons-logging.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/sun-servlet/lib/servlet-api.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/ibm-wsdl4j/lib/wsdl4j.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/j2se"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="src" path="/mbeans"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/apache-xerces/lib/xercesImpl.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  -	&lt;classpathentry kind="lib" path="/thirdparty/jboss/remoting/lib/jboss-remoting.jar"&gt;
  -		&lt;attributes&gt;
  -		&lt;/attributes&gt;
  -	&lt;/classpathentry&gt;
  +	&lt;classpathentry kind="src" path="output/parsers"/&gt;
  +	&lt;classpathentry kind="src" path="src/main"/&gt;
  +	&lt;classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/&gt;
  +	&lt;classpathentry kind="src" path="/common"/&gt;
  +	&lt;classpathentry kind="src" path="/system"/&gt;
  +	&lt;classpathentry kind="src" path="/j2ee"/&gt;
  +	&lt;classpathentry kind="src" path="/naming"/&gt;
  +	&lt;classpathentry kind="src" path="/transaction"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/apache-bcel/lib/bcel.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/gjt-jpl-util/lib/jpl-pattern.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/gjt-jpl-util/lib/jpl-util.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/apache-log4j/lib/log4j.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/oswego-concurrent/lib/concurrent.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/gnu-getopt/lib/getopt.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/apache-commons/lib/commons-logging.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/sun-servlet/lib/servlet-api.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/ibm-wsdl4j/lib/wsdl4j.jar"/&gt;
  +	&lt;classpathentry kind="src" path="/j2se"/&gt;
  +	&lt;classpathentry kind="src" path="/mbeans"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/apache-xerces/lib/xercesImpl.jar"/&gt;
  +	&lt;classpathentry kind="lib" path="/thirdparty/jboss/remoting/lib/jboss-remoting.jar"/&gt;
   	&lt;classpathentry kind="output" path="output/eclipse-classes"/&gt;
   &lt;/classpath&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785251">[jboss-cvs] jboss-tomcat/src/main/org/jboss/web/tomcat/filters  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Remy Maucherat &lt;remm@jb...&gt; -	2005-07-29 14:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: remm    
  Date: 05/07/29 10:37:30

  Added:       src/main/org/jboss/web/tomcat/filters  Tag: Branch_4_0
                        SemaphoreValve.java
  Log:
  - Add concurrency control valve for JDK 1.4, submitted by Scott Marlow.
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.1.2.2   +213 -0    jboss-tomcat/src/main/org/jboss/web/tomcat/filters/SemaphoreValve.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SemaphoreValve.java
  ===================================================================
  RCS file: SemaphoreValve.java
  diff -N SemaphoreValve.java
  --- /dev/null	1 Jan 1970 00:00:00 -0000
  +++ SemaphoreValve.java	29 Jul 2005 14:37:30 -0000	1.1.2.2
  @@ -0,0 +1,213 @@
  +/*
  + * Copyright 1999-2001,2005 The Apache Software Foundation.
  + * 
  + * Licensed under the Apache License, Version 2.0 (the "License");
  + * you may not use this file except in compliance with the License.
  + * You may obtain a copy of the License at
  + * 
  + *      <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
  + * 
  + * Unless required by applicable law or agreed to in writing, software
  + * distributed under the License is distributed on an "AS IS" BASIS,
  + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  + * See the License for the specific language governing permissions and
  + * limitations under the License.
  + */
  +
  +
  +package org.jboss.web.tomcat.filters;
  +
  +
  +import java.io.IOException;
  +
  +import javax.servlet.ServletException;
  +
  +import org.apache.catalina.Lifecycle;
  +import org.apache.catalina.LifecycleException;
  +import org.apache.catalina.LifecycleListener;
  +import org.apache.catalina.connector.Request;
  +import org.apache.catalina.connector.Response;
  +import org.apache.catalina.util.LifecycleSupport;
  +import org.apache.catalina.util.StringManager;
  +import org.apache.catalina.valves.ValveBase;
  +
  +import EDU.oswego.cs.dl.util.concurrent.FIFOSemaphore;
  +import EDU.oswego.cs.dl.util.concurrent.Sync;
  +
  +/**
  + * &lt;p&gt;Implementation of a Valve that limits concurrency.&lt;/p&gt;
  + *
  + * &lt;p&gt;This Valve may be attached to any Container, depending on the granularity
  + * of the concurrency control you wish to perform.  This is a Java 1.4 port
  + * of the SemaphoreValve class that Remy implemented.&lt;/p&gt;
  + * 
  + * @author Remy Maucherat, Scott Marlow
  + * @version $Revision: 1.1.2.2 $ $Date: 2005/07/29 14:37:30 $
  + */
  +
  +public class SemaphoreValve
  +    extends ValveBase
  +    implements Lifecycle {
  +
  +
  +    // ----------------------------------------------------- Instance Variables
  +
  +
  +    /**
  +     * The descriptive information related to this implementation.
  +     */
  +    private static final String info =
  +        "org.jboss.web.tomcat.filters.SemaphoreValve/1.0";
  +
  +
  +    /**
  +     * Semaphore.
  +     */
  +    protected Sync semaphore = null;
  +    
  +
  +    /**
  +     * The lifecycle event support for this component.
  +     */
  +    protected LifecycleSupport lifecycle = new LifecycleSupport(this);
  +
  +
  +    /**
  +     * Has this component been started yet?
  +     */
  +    private boolean started = false;
  +
  +
  +    // ------------------------------------------------------------- Properties
  +
  +    
  +    /**
  +     * Concurrency level of the semaphore.
  +     */
  +    protected int concurrency = 10;
  +    public int getConcurrency() { return concurrency; }
  +    public void setConcurrency(int concurrency) { this.concurrency = concurrency; }
  +    
  +
  +    // ------------------------------------------------------ Lifecycle Methods
  +
  +
  +    /**
  +     * Add a lifecycle event listener to this component.
  +     *
  +     * @param listener The listener to add
  +     */
  +    public void addLifecycleListener(LifecycleListener listener) {
  +
  +        lifecycle.addLifecycleListener(listener);
  +
  +    }
  +
  +
  +    /**
  +     * Get the lifecycle listeners associated with this lifecycle. If this
  +     * Lifecycle has no listeners registered, a zero-length array is returned.
  +     */
  +    public LifecycleListener[] findLifecycleListeners() {
  +
  +        return lifecycle.findLifecycleListeners();
  +
  +    }
  +
  +
  +    /**
  +     * Remove a lifecycle event listener from this component.
  +     *
  +     * @param listener The listener to add
  +     */
  +    public void removeLifecycleListener(LifecycleListener listener) {
  +
  +        lifecycle.removeLifecycleListener(listener);
  +
  +    }
  +
  +
  +    /**
  +     * Prepare for the beginning of active use of the public methods of this
  +     * component.  This method should be called after &lt;code&gt;configure()&lt;/code&gt;,
  +     * and before any of the public methods of the component are utilized.
  +     *
  +     * @exception LifecycleException if this component detects a fatal error
  +     *  that prevents this component from being used
  +     */
  +    public void start() throws LifecycleException {
  +
  +        // Validate and update our current component state
  +        if (started)
  +            throw new LifecycleException
  +                ("Semaphore valve already started");
  +        lifecycle.fireLifecycleEvent(START_EVENT, null);
  +        started = true;
  +
  +        semaphore = new FIFOSemaphore(concurrency);
  +
  +    }
  +
  +
  +    /**
  +     * Gracefully terminate the active use of the public methods of this
  +     * component.  This method should be the last one called on a given
  +     * instance of this component.
  +     *
  +     * @exception LifecycleException if this component detects a fatal error
  +     *  that needs to be reported
  +     */
  +    public void stop() throws LifecycleException {
  +
  +        // Validate and update our current component state
  +        if (!started)
  +            throw new LifecycleException
  +                ("Semaphore valve not started");
  +        lifecycle.fireLifecycleEvent(STOP_EVENT, null);
  +        started = false;
  +
  +        semaphore = null;
  +
  +    }
  +
  +    
  +    // --------------------------------------------------------- Public Methods
  +
  +
  +    /**
  +     * Return descriptive information about this Valve implementation.
  +     */
  +    public String getInfo() {
  +        return (info);
  +    }
  +
  +
  +    /**
  +     * Do concurrency control on the request using the semaphore.
  +     *
  +     * @param request The servlet request to be processed
  +     * @param response The servlet response to be created
  +     *
  +     * @exception IOException if an input/output error occurs
  +     * @exception ServletException if a servlet error occurs
  +     */
  +    public void invoke(Request request, Response response)
  +        throws IOException, ServletException {
  +
  +	boolean shouldRelease = false;
  +        try {
  +            semaphore.acquire();
  +            shouldRelease = true;
  +            // Perform the request
  +            getNext().invoke(request, response);
  +        } catch( java.lang.InterruptedException e)  {
  +            container.getLogger().error(e.getMessage(), e);
  +        } finally {
  +            if (shouldRelease)
  +                semaphore.release();
  +        }
  +
  +    }
  +
  +
  +}

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785250">[jboss-cvs] webservice  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Thomas Diesler &lt;thomas.diesler@jb...&gt; -	2005-07-29 14:28</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: tdiesler
  Date: 05/07/29 10:27:46

  Modified:    webservice  build.xml
  Log:
  Exclude all jbossws from jdk14 build
  
  Revision  Changes    Path
  1.66      +2 -2      webservice/build.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: build.xml
  ===================================================================
  RCS file: /cvsroot/jboss/webservice/build.xml,v
  retrieving revision 1.65
  retrieving revision 1.66
  diff -u -b -r1.65 -r1.66
  --- build.xml	29 Jul 2005 10:03:32 -0000	1.65
  +++ build.xml	29 Jul 2005 14:27:46 -0000	1.66
  @@ -15,7 +15,7 @@
   &lt;!--                                                                        --&gt;
   &lt;!-- ====================================================================== --&gt;
   
  -&lt;!-- $Id: build.xml,v 1.65 2005/07/29 10:03:32 tdiesler Exp $ --&gt;
  +&lt;!-- $Id: build.xml,v 1.66 2005/07/29 14:27:46 tdiesler Exp $ --&gt;
   
   &lt;project default="main" name="JBoss/Webservice"&gt;
   
  @@ -157,7 +157,7 @@
         includeAntRuntime="${javac.include.ant.runtime}"
         includeJavaRuntime="${javac.include.java.runtime}"
         failonerror="${javac.fail.onerror}"
  -      excludes="org/jboss/ws/**"&gt;
  +      includes="org/jboss/webservice/**"&gt;
         &lt;src path="${source.java}"/&gt;
         &lt;classpath refid="javac.classpath"/&gt;
       &lt;/javac&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785249">[jboss-cvs] jboss-j2ee/src/main/javax/ejb  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill DeCoste &lt;bdecoste@jb...&gt; -	2005-07-29 14:09</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bdecoste
  Date: 05/07/29 10:08:05

  Modified:    src/main/javax/ejb  Tag: Branch_4_0 SessionContext.java
  Log:
  JIRA EJB3 184
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.4.6.1   +11 -1     jboss-j2ee/src/main/javax/ejb/SessionContext.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: SessionContext.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss-j2ee/src/main/javax/ejb/SessionContext.java,v
  retrieving revision 1.4
  retrieving revision 1.4.6.1
  diff -u -b -r1.4 -r1.4.6.1
  --- SessionContext.java	17 Mar 2004 01:33:06 -0000	1.4
  +++ SessionContext.java	29 Jul 2005 14:08:05 -0000	1.4.6.1
  @@ -14,7 +14,7 @@
    * instance. The container passes the SessionContext interface to an
    * instance after the instance has been created. The session context
    * remains associated with the instance for the lifetime of the instance.
  - * @version $Revision: 1.4 $
  + * @version $Revision: 1.4.6.1 $
    */
   public interface SessionContext extends EJBContext
   {
  @@ -61,4 +61,14 @@
       * the instance is in a state that does not allow access to this method.
       */ 
      public MessageContext getMessageContext() throws IllegalStateException;
  +
  +   /** Returns the session beanÂ’s business interface. Only session beans with an EJB 3.0 business interface
  +    * can call this method.
  +    * 
  +    * @return The business interface associated with the instance.
  +    * @throws IllegalStateException - Thrown if this method is invoked while
  +    * the instance is in a state that does not allow access to this method.
  +    */ 
  +   public Object getBusinessObject(Class businessInterface) throws IllegalStateException;
  +
   }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785248">[jboss-cvs] jboss/src/main/org/jboss/ejb   ...</a><!-- google_ad_section_end --></b></div>		<small>From: Bill DeCoste &lt;bdecoste@jb...&gt; -	2005-07-29 14:09</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: bdecoste
  Date: 05/07/29 10:08:05

  Modified:    src/main/org/jboss/ejb   Tag: Branch_4_0
                        StatelessSessionEnterpriseContext.java
                        StatefulSessionEnterpriseContext.java
  Log:
  JIRA EJB3 184
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.27.6.1  +6 -1      jboss/src/main/org/jboss/ejb/StatelessSessionEnterpriseContext.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StatelessSessionEnterpriseContext.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/src/main/org/jboss/ejb/StatelessSessionEnterpriseContext.java,v
  retrieving revision 1.27
  retrieving revision 1.27.6.1
  diff -u -b -r1.27 -r1.27.6.1
  --- StatelessSessionEnterpriseContext.java	22 Apr 2004 17:44:21 -0000	1.27
  +++ StatelessSessionEnterpriseContext.java	29 Jul 2005 14:08:05 -0000	1.27.6.1
  @@ -22,7 +22,7 @@
    *      
    * @author &lt;a href="mailto:rickard.oberg@... Ã–berg&lt;/a&gt;
    * @author &lt;a href="sebastien.alborini@... Alborini&lt;/a&gt;
  - * @version $Revision: 1.27 $
  + * @version $Revision: 1.27.6.1 $
    */
   public class StatelessSessionEnterpriseContext
      extends EnterpriseContext
  @@ -171,6 +171,11 @@
            return ejbObject;
         }
   
  +      public Object getBusinessObject(Class businessInterface) throws IllegalStateException
  +      {
  +         throw new RuntimeException("NOT IMPLEMENTED");
  +      }
  +
         public EJBLocalObject getEJBLocalObject()
         {
            AllowedOperationsAssociation.assertAllowedIn("getEJBLocalObject",
  
  
  
  1.31.6.2  +6 -1      jboss/src/main/org/jboss/ejb/StatefulSessionEnterpriseContext.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: StatefulSessionEnterpriseContext.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/src/main/org/jboss/ejb/StatefulSessionEnterpriseContext.java,v
  retrieving revision 1.31.6.1
  retrieving revision 1.31.6.2
  diff -u -b -r1.31.6.1 -r1.31.6.2
  --- StatefulSessionEnterpriseContext.java	3 Apr 2005 07:22:55 -0000	1.31.6.1
  +++ StatefulSessionEnterpriseContext.java	29 Jul 2005 14:08:05 -0000	1.31.6.2
  @@ -26,7 +26,7 @@
    *
    * @author &lt;a href="mailto:rickard.oberg@... Ã¯Â¿Â½berg&lt;/a&gt;
    * @author &lt;a href="mailto:docodan@... OConnor&lt;/a&gt;
  - * @version $Revision: 1.31.6.1 $
  + * @version $Revision: 1.31.6.2 $
    */
   public class StatefulSessionEnterpriseContext
      extends EnterpriseContext
  @@ -201,6 +201,11 @@
            return ejbObject;
         }
   
  +      public Object getBusinessObject(Class businessInterface) throws IllegalStateException
  +      {
  +         throw new RuntimeException("NOT IMPLEMENTED");
  +      }
  +
         public EJBLocalObject getEJBLocalObject()
         {
            AllowedOperationsAssociation.assertAllowedIn("getEJBLocalObject",

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785240">[jboss-cvs] jbosstest/src/main/org/jboss/test/cmp2/commerce    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 13:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:49:37

  Modified:    src/main/org/jboss/test/cmp2/commerce    AddressBean.java
                        AddressHome.java CommerceTest.java
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  1.5       +11 -1     jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressBean.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- AddressBean.java	21 Jul 2002 01:54:43 -0000	1.4
  +++ AddressBean.java	29 Jul 2005 13:49:37 -0000	1.5
  @@ -1,8 +1,10 @@
   package org.jboss.test.cmp2.commerce;
   
  +import java.util.Collection;
   import javax.ejb.CreateException;
   import javax.ejb.EntityBean; 
   import javax.ejb.EntityContext; 
  +import javax.ejb.FinderException;
   
   import org.jboss.varia.autonumber.AutoNumberFactory;
   
  @@ -25,6 +27,14 @@
      public void ejbPostCreate(Long id) {
      }
   
  +   public abstract Collection ejbSelectAddresses(String street) throws FinderException;
  +   public abstract Collection ejbSelectAddresses(int zip) throws FinderException;
  +
  +   public Collection ejbHomeSelectAddresses(String street) throws FinderException
  +   {
  +      return ejbSelectAddresses(street);
  +   }
  +
      public abstract Long getId();
      public abstract void setId(Long id);
   
  
  
  
  1.5       +2 -0      jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressHome.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java,v
  retrieving revision 1.4
  retrieving revision 1.5
  diff -u -b -r1.4 -r1.5
  --- AddressHome.java	22 Mar 2004 10:49:39 -0000	1.4
  +++ AddressHome.java	29 Jul 2005 13:49:37 -0000	1.5
  @@ -14,4 +14,6 @@
   	public Collection findAll() throws FinderException;
   
      public Address findByOrdernumber(long orderNumber) throws FinderException;
  +
  +   Collection selectAddresses(String street) throws FinderException;
   }
  
  
  
  1.13      +5 -0      jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CommerceTest.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java,v
  retrieving revision 1.12
  retrieving revision 1.13
  diff -u -b -r1.12 -r1.13
  --- CommerceTest.java	22 Apr 2004 11:41:56 -0000	1.12
  +++ CommerceTest.java	29 Jul 2005 13:49:37 -0000	1.13
  @@ -297,6 +297,11 @@
         assertTrue("order.isIdentical(order)", order.isIdentical(order));
      }
   
  +   public void testOverloadedEjbSelects() throws Exception
  +   {
  +      getAddressHome().selectAddresses("");
  +   }
  +
      public void setUpEJB() throws Exception {
         deleteAllOrders(getOrderHome());
         deleteAllLineItems(getLineItemHome());

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785243">[jboss-cvs] jbosstest/src/main/org/jboss/test/cmp2/commerce    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 13:55</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:54:41

  Modified:    src/main/org/jboss/test/cmp2/commerce    Tag: Branch_4_0
                        AddressBean.java AddressHome.java CommerceTest.java
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.4.16.2  +11 -1     jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressBean.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java,v
  retrieving revision 1.4.16.1
  retrieving revision 1.4.16.2
  diff -u -b -r1.4.16.1 -r1.4.16.2
  --- AddressBean.java	6 Apr 2005 21:23:45 -0000	1.4.16.1
  +++ AddressBean.java	29 Jul 2005 13:54:41 -0000	1.4.16.2
  @@ -6,9 +6,11 @@
   */
   package org.jboss.test.cmp2.commerce;
   
  +import java.util.Collection;
   import javax.ejb.CreateException;
   import javax.ejb.EntityBean; 
   import javax.ejb.EntityContext; 
  +import javax.ejb.FinderException;
   
   import org.jboss.varia.autonumber.AutoNumberFactory;
   
  @@ -31,6 +33,14 @@
      public void ejbPostCreate(Long id) {
      }
   
  +   public abstract Collection ejbSelectAddresses(String street) throws FinderException;
  +   public abstract Collection ejbSelectAddresses(int zip) throws FinderException;
  +
  +   public Collection ejbHomeSelectAddresses(String street) throws FinderException
  +   {
  +      return ejbSelectAddresses(street);
  +   }
  +
      public abstract Long getId();
      public abstract void setId(Long id);
   
  
  
  
  1.4.6.2   +2 -0      jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressHome.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java,v
  retrieving revision 1.4.6.1
  retrieving revision 1.4.6.2
  diff -u -b -r1.4.6.1 -r1.4.6.2
  --- AddressHome.java	6 Apr 2005 21:23:45 -0000	1.4.6.1
  +++ AddressHome.java	29 Jul 2005 13:54:41 -0000	1.4.6.2
  @@ -20,4 +20,6 @@
   	public Collection findAll() throws FinderException;
   
      public Address findByOrdernumber(long orderNumber) throws FinderException;
  +
  +   Collection selectAddresses(String street) throws FinderException;
   }
  
  
  
  1.12.6.2  +5 -0      jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CommerceTest.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java,v
  retrieving revision 1.12.6.1
  retrieving revision 1.12.6.2
  diff -u -b -r1.12.6.1 -r1.12.6.2
  --- CommerceTest.java	6 Apr 2005 21:23:45 -0000	1.12.6.1
  +++ CommerceTest.java	29 Jul 2005 13:54:41 -0000	1.12.6.2
  @@ -303,6 +303,11 @@
         assertTrue("order.isIdentical(order)", order.isIdentical(order));
      }
   
  +   public void testOverloadedEjbSelects() throws Exception
  +   {
  +      getAddressHome().selectAddresses("");
  +   }
  +
      public void setUpEJB() throws Exception {
         deleteAllOrders(getOrderHome());
         deleteAllLineItems(getLineItemHome());

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785247">[jboss-cvs] jbosstest/src/main/org/jboss/test/cmp2/commerce    ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 14:05</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 10:04:27

  Modified:    src/main/org/jboss/test/cmp2/commerce    Tag: Branch_3_2
                        AddressBean.java AddressHome.java CommerceTest.java
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.4.2.1   +11 -1     jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressBean.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressBean.java,v
  retrieving revision 1.4
  retrieving revision 1.4.2.1
  diff -u -b -r1.4 -r1.4.2.1
  --- AddressBean.java	21 Jul 2002 01:54:43 -0000	1.4
  +++ AddressBean.java	29 Jul 2005 14:04:27 -0000	1.4.2.1
  @@ -1,8 +1,10 @@
   package org.jboss.test.cmp2.commerce;
   
  +import java.util.Collection;
   import javax.ejb.CreateException;
   import javax.ejb.EntityBean; 
   import javax.ejb.EntityContext; 
  +import javax.ejb.FinderException;
   
   import org.jboss.varia.autonumber.AutoNumberFactory;
   
  @@ -25,6 +27,14 @@
      public void ejbPostCreate(Long id) {
      }
   
  +   public abstract Collection ejbSelectAddresses(String street) throws FinderException;
  +   public abstract Collection ejbSelectAddresses(int zip) throws FinderException;
  +
  +   public Collection ejbHomeSelectAddresses(String street) throws FinderException
  +   {
  +      return ejbSelectAddresses(street);
  +   }
  +
      public abstract Long getId();
      public abstract void setId(Long id);
   
  
  
  
  1.3.2.1   +4 -0      jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: AddressHome.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/AddressHome.java,v
  retrieving revision 1.3
  retrieving revision 1.3.2.1
  diff -u -b -r1.3 -r1.3.2.1
  --- AddressHome.java	21 Jul 2002 01:54:43 -0000	1.3
  +++ AddressHome.java	29 Jul 2005 14:04:27 -0000	1.3.2.1
  @@ -12,4 +12,8 @@
   	public Address findByPrimaryKey(Long id) throws FinderException;
   
   	public Collection findAll() throws FinderException;
  +
  +   public Address findByOrdernumber(long orderNumber) throws FinderException;
  +
  +   Collection selectAddresses(String street) throws FinderException;
   }
  
  
  
  1.5.2.5   +6 -1      jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: CommerceTest.java
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/main/org/jboss/test/cmp2/commerce/CommerceTest.java,v
  retrieving revision 1.5.2.4
  retrieving revision 1.5.2.5
  diff -u -b -r1.5.2.4 -r1.5.2.5
  --- CommerceTest.java	4 Jul 2004 10:18:47 -0000	1.5.2.4
  +++ CommerceTest.java	29 Jul 2005 14:04:27 -0000	1.5.2.5
  @@ -193,7 +193,7 @@
         orderMN.setShippingAddress(shipMN);
   
         Collection c = orderMN.getAddressesInCA();
  -      System.out.println("test_getAddressesInCA&gt;" + c);
  +      System.out.println(c);
         assertTrue(c.contains(shipCA1));
         assertTrue(c.contains(shipCA2));
         assertTrue(c.contains(billCA1));
  @@ -297,6 +297,11 @@
         assertTrue("order.isIdentical(order)", order.isIdentical(order));
      }
   
  +   public void testOverloadedEjbSelects() throws Exception
  +   {
  +      getAddressHome().selectAddresses("");
  +   }
  +
      public void setUpEJB() throws Exception {
         deleteAllOrders(getOrderHome());
         deleteAllLineItems(getLineItemHome());

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785239">[jboss-cvs] jbosstest/src/resources/cmp2/commerce/META-INF  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 13:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:48:53

  Modified:    src/resources/cmp2/commerce/META-INF  ejb-jar.xml
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  1.15      +18 -0     jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ejb-jar.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml,v
  retrieving revision 1.14
  retrieving revision 1.15
  diff -u -b -r1.14 -r1.15
  --- ejb-jar.xml	21 Jul 2004 16:30:24 -0000	1.14
  +++ ejb-jar.xml	29 Jul 2005 13:48:53 -0000	1.15
  @@ -371,6 +371,24 @@
               &lt;/query-method&gt;
               &lt;ejb-ql&gt;select o.shippingAddress from OrderX o where o.ordernumber=?1&lt;/ejb-ql&gt;
            &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;int&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.zip=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.street=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
         &lt;/entity&gt;
         &lt;entity&gt;
            &lt;description&gt;Order Line Item&lt;/description&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785242">[jboss-cvs] jbosstest/src/resources/cmp2/commerce/META-INF  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 13:53</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:52:29

  Modified:    src/resources/cmp2/commerce/META-INF  Tag: Branch_4_0
                        ejb-jar.xml
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.14.4.1  +18 -0     jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ejb-jar.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml,v
  retrieving revision 1.14
  retrieving revision 1.14.4.1
  diff -u -b -r1.14 -r1.14.4.1
  --- ejb-jar.xml	21 Jul 2004 16:30:24 -0000	1.14
  +++ ejb-jar.xml	29 Jul 2005 13:52:29 -0000	1.14.4.1
  @@ -371,6 +371,24 @@
               &lt;/query-method&gt;
               &lt;ejb-ql&gt;select o.shippingAddress from OrderX o where o.ordernumber=?1&lt;/ejb-ql&gt;
            &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;int&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.zip=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.street=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
         &lt;/entity&gt;
         &lt;entity&gt;
            &lt;description&gt;Order Line Item&lt;/description&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785246">[jboss-cvs] jbosstest/src/resources/cmp2/commerce/META-INF  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 14:03</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 10:02:45

  Modified:    src/resources/cmp2/commerce/META-INF  Tag: Branch_3_2
                        ejb-jar.xml
  Log:
  testcase for jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.5.2.9   +27 -0     jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: ejb-jar.xml
  ===================================================================
  RCS file: /cvsroot/jboss/jbosstest/src/resources/cmp2/commerce/META-INF/ejb-jar.xml,v
  retrieving revision 1.5.2.8
  retrieving revision 1.5.2.9
  diff -u -b -r1.5.2.8 -r1.5.2.9
  --- ejb-jar.xml	5 Aug 2004 10:04:51 -0000	1.5.2.8
  +++ ejb-jar.xml	29 Jul 2005 14:02:45 -0000	1.5.2.9
  @@ -362,6 +362,33 @@
                  FROM Address a
               &lt;/ejb-ql&gt;
            &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;findByOrdernumber&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;long&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;select o.shippingAddress from OrderX o where o.ordernumber=?1&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;int&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.zip=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
  +         &lt;query&gt;
  +            &lt;query-method&gt;
  +               &lt;method-name&gt;ejbSelectAddresses&lt;/method-name&gt;
  +               &lt;method-params&gt;
  +                  &lt;method-param&gt;java.lang.String&lt;/method-param&gt;
  +               &lt;/method-params&gt;
  +            &lt;/query-method&gt;
  +            &lt;ejb-ql&gt;&lt;![CDATA[select object(o) from Address o where o.street=?1]]&gt;&lt;/ejb-ql&gt;
  +         &lt;/query&gt;
         &lt;/entity&gt;
         &lt;entity&gt;
            &lt;description&gt;Order Line Item&lt;/description&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785241">[jboss-cvs] jboss/src/main/org/jboss/proxy/compiler  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 13:51</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:50:24

  Modified:    src/main/org/jboss/proxy/compiler  Proxies.java
  Log:
  fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  1.9       +2 -2      jboss/src/main/org/jboss/proxy/compiler/Proxies.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Proxies.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/src/main/org/jboss/proxy/compiler/Proxies.java,v
  retrieving revision 1.8
  retrieving revision 1.9
  diff -u -b -r1.8 -r1.9
  --- Proxies.java	27 Aug 2003 04:32:33 -0000	1.8
  +++ Proxies.java	29 Jul 2005 13:50:24 -0000	1.9
  @@ -22,7 +22,7 @@
    * Routines for converting between strongly-typed interfaces and
    * generic InvocationHandler objects.
    *
  - * @version &lt;tt&gt;$Revision: 1.8 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.9 $&lt;/tt&gt;
    * @author Unknown
    * @author &lt;a href="mailto:jason@... Dillon&lt;/a&gt;
    */
  @@ -529,7 +529,7 @@
            if( a1.length != a2.length )
               return false;
            for( int i=0; i &lt; a1.length; i++)
  -            if( !a1[i].equals(a1[i]) )
  +            if( !a1[i].equals(a2[i]) )
                  return false;
            
            return true;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
<ul>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785244">[jboss-cvs] jboss/src/main/org/jboss/proxy/compiler  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 14:00</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 09:59:14

  Modified:    src/main/org/jboss/proxy/compiler  Tag: Branch_4_0
                        Proxies.java
  Log:
  fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.8.6.2   +2 -2      jboss/src/main/org/jboss/proxy/compiler/Proxies.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Proxies.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/src/main/org/jboss/proxy/compiler/Proxies.java,v
  retrieving revision 1.8.6.1
  retrieving revision 1.8.6.2
  diff -u -b -r1.8.6.1 -r1.8.6.2
  --- Proxies.java	3 Apr 2005 07:22:59 -0000	1.8.6.1
  +++ Proxies.java	29 Jul 2005 13:59:14 -0000	1.8.6.2
  @@ -22,7 +22,7 @@
    * Routines for converting between strongly-typed interfaces and
    * generic InvocationHandler objects.
    *
  - * @version &lt;tt&gt;$Revision: 1.8.6.1 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.8.6.2 $&lt;/tt&gt;
    * @author Unknown
    * @author &lt;a href="mailto:jason@... Dillon&lt;/a&gt;
    */
  @@ -530,7 +530,7 @@
            if( a1.length != a2.length )
               return false;
            for( int i=0; i &lt; a1.length; i++)
  -            if( !a1[i].equals(a1[i]) )
  +            if( !a1[i].equals(a2[i]) )
                  return false;
            
            return true;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

<p>
<!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785245">[jboss-cvs] jboss/src/main/org/jboss/proxy/compiler  ...</a><!-- google_ad_section_end --></b></div>		<small>From: Alex Loubyansky &lt;alex@jb...&gt; -	2005-07-29 14:02</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: aloubyansky
  Date: 05/07/29 10:01:13

  Modified:    src/main/org/jboss/proxy/compiler  Tag: Branch_3_2
                        Proxies.java
  Log:
  fixed jbas-1546 'ejbSelect methods with same name, diferent signatures does not work'
  
  Revision  Changes    Path
  No                   revision
  
  
  No                   revision
  
  
  1.4.2.2   +2 -2      jboss/src/main/org/jboss/proxy/compiler/Proxies.java
  
  (In the diff below, changes in quantity of whitespace are not shown.)
  
  Index: Proxies.java
  ===================================================================
  RCS file: /cvsroot/jboss/jboss/src/main/org/jboss/proxy/compiler/Proxies.java,v
  retrieving revision 1.4.2.1
  retrieving revision 1.4.2.2
  diff -u -b -r1.4.2.1 -r1.4.2.2
  --- Proxies.java	3 May 2003 14:54:34 -0000	1.4.2.1
  +++ Proxies.java	29 Jul 2005 14:01:13 -0000	1.4.2.2
  @@ -22,7 +22,7 @@
    * Routines for converting between strongly-typed interfaces and
    * generic InvocationHandler objects.
    *
  - * @version &lt;tt&gt;$Revision: 1.4.2.1 $&lt;/tt&gt;
  + * @version &lt;tt&gt;$Revision: 1.4.2.2 $&lt;/tt&gt;
    * @author Unknown
    * @author &lt;a href="mailto:jason@... Dillon&lt;/a&gt;
    */
  @@ -529,7 +529,7 @@
            if( a1.length != a2.length )
               return false;
            for( int i=0; i &lt; a1.length; i++)
  -            if( !a1[i].equals(a1[i]) )
  +            if( !a1[i].equals(a2[i]) )
                  return false;
            
            return true;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</p>

</ul>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=17785238">[jboss-cvs] jboss-common/src/main/org/jboss/util           ...</a><!-- google_ad_section_end --></b></div>		<small>From: Dimitris Andreadis &lt;dimitris.andreadis@jb...&gt; -	2005-07-29 13:45</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>User: dimitris
  Date: 05/07/29 09:44:26

  Removed:     src/main/org/jboss/util           Tag: Branch_4_0
                        MuBoolean.java MuByte.java MuCharacter.java
                        MuDouble.java MuFloat.java MuInteger.java
                        MuLong.java MuNumber.java MuShort.java Mutable.java
  Log:
  [JBAS-1990] - remove unused classes

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    





<table width="100%" border="0">
    <tr bgcolor="#eeeeee">
        <td width="50%">
                    &nbsp;
                </td>
        <td>&nbsp;</td>
        <td align="right" width="50%">
                                <a href="forum.php?forum_name=jboss-cvs-commits&amp;max_rows=100&amp;offset=79&amp;style=nested&amp;viewmonth=200507">
                        <strong>Next Messages</strong></a><a href="forum.php?max_rows=100&style=nested&offset=79&forum_name=jboss-cvs-commits"><img src="http://a.fsdn.com/sf/images/images/t.gif" alt="" width="15" height="15" /></a>
                </td>
    </tr>
</table>

</form>

            </div>
        </div>
      </div>
    
    <footer id="site-footer">
        <div class="wrapper">
            <nav>
                <h5>SourceForge</h5>
                <a href="/about">About</a>
                <a href="/blog/category/sitestatus/">Site Status</a>
                <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
            </nav>
            <nav>
                <h5>Find and Develop Software</h5>
                <a href="/create/">Create a Project</a>
                <a href="/directory/">Software Directory</a>
                <a href="/top">Top Downloaded Projects</a>
            </nav>
            <nav>
                <h5>Community</h5>
                <a href="/blog/">Blog</a>
                <a href="http://twitter.com/sourceforge">@sourceforge</a>
                <a href="/jobs?source=footer">Job Board</a>
                <a href="http://library.slashdotmedia.com/?source=sfnet_footer">Resources</a>
            </nav>
            <nav>
                <h5>Help</h5>
                <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
                <a href="/support">Support Request</a>
                <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
            </nav>
        </div>
    </footer>
    <footer id="site-copyright-footer">
        <div class="wrapper">
            <div id="copyright">
                Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
                SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
            </div>
            <nav>
                <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
                <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
                <a href="http://slashdotmedia.com/opt-out-choices">Cookies/Opt Out</a>
                <a href="http://slashdotmedia.com">Advertise</a>
                <a href="http://sourceforge.jp/">SourceForge.JP</a>
            </nav>
        </div>
    </footer>
        <!--[if lt IE 7 ]>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
    <![endif]-->
<!--[if IE]></div><![endif]-->
<!--[if IE 6]></div><![endif]-->
<!--[if IE 7]></div><![endif]-->

    
    <!-- Begin comScore Tag -->
    <script>
        document.write(unescape("%3Cscript src='" + (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js' %3E%3C/script%3E"));
    </script>
    <script>
        COMSCORE.beacon({
            c1:2,
            c2:6035546,
            c3:"",
            c4:"",
            c5:"",
            c6:"",
            c15:""
        });
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035546&amp;c3=&amp;c4=&amp;c5=&amp;c6=&amp;c15=&amp;cj=1" />
    </noscript>
    <!-- End comScore Tag -->
    




        </div>
    </body>
</html>
