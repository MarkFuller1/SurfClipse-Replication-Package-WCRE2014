




<!DOCTYPE html>
<html>
<head>
    















<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />

<title>[#GROOVY-4832] when two java classes extend a groovy class, both subclasses have a metaClass for whichever subclass was loaded first - jira.codehaus.org</title>
<meta name="application-name" content="JIRA" data-name="jira" data-version="5.2.7">
<meta name="ajs-can-edit-watchers" content="false">
<meta name="ajs-can-search-users" content="false">
<meta name="ajs-issue-key" content="GROOVY-4832">
<meta name="ajs-default-avatar-url" content="/secure/useravatar?size=small&amp;avatarId=10233">
<meta name="ajs-search-pos" content="0">
<meta name="ajs-dev-mode" content="false">
<meta name="ajs-context-path" content="">
<meta name="ajs-version-number" content="5.2.7">
<meta name="ajs-build-number" content="850">
<meta name="ajs-remote-user" content="">
<meta name="ajs-remote-user-fullname" content="">
<meta name="ajs-user-locale" content="en_UK">
<meta name="ajs-app-title" content="jira.codehaus.org">
<meta name="ajs-keyboard-shortcuts-enabled" content="true">
<meta name="ajs-enabled-dark-features" content="[&quot;jira.frother.reporter.field&quot;,&quot;jira.user.darkfeature.admin&quot;,&quot;frother.assignee.field&quot;,&quot;com.atlassian.jira.config.CoreFeatures.KICKASS_SEARCH&quot;]">

        <meta name="ajs-whats-new-iframe-src-override" content=""> <meta name="ajs-whatsnew-full-link" content="https://docs.atlassian.com/jira/docs-052/whatsnew/iframe">
    




    
<meta id="atlassian-token" name="atlassian-token" content="ACIO-CAVI-QX7G-9IAS|b59d9c84d86e0080ce6932c9e4c8c29b22216f02|lout">



<link rel="shortcut icon" href="/s/en_UK-1mvw8p-418945332/850/7/_/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/osd.jsp" title="jira.codehaus.org"/>

    










<!--[if IE]><![endif]-->
<script type="text/javascript">var contextPath = '';</script>
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/css/batch.css" media="all">
<!--[if lte IE 8]>
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+8" media="all">
<![endif]-->
<!--[if IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/css/batch.css?conditionalComment=IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/921f4759adaf82faed2737f6ba35ad26/_/download/contextbatch/css/jira.view.issue,atl.general/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/5cf73a169fba05b27efe61e342f57769/_/download/contextbatch/css/jira.general/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/c2e41f2cf09f8b3c8914470a6617682d/_/download/contextbatch/css/jira.global/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/5.0-m10/_/download/batch/com.atlassian.auiplugin:aui-experimental-tooltips/com.atlassian.auiplugin:aui-experimental-tooltips.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:jquery-fancybox/jira.webresources:jquery-fancybox.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:common/com.atlassian.jira.jira-issue-nav-plugin:common.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:viewissue/com.atlassian.jira.jira-issue-nav-plugin:viewissue.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:global-static/jira.webresources:global-static.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:old_header_resources/jira.webresources:old_header_resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.1.1/_/download/batch/com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources/com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_UK-1mvw8p-418945332/850/7/1.3.16/_/download/batch/com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts/com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts.css" media="all">
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/js/batch.js" ></script>
<!--[if lte IE 8]>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1/_/download/superbatch/js/batch.js?conditionalComment=lte+IE+8" ></script>
<![endif]-->
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/921f4759adaf82faed2737f6ba35ad26/_/download/contextbatch/js/jira.view.issue,atl.general/batch.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/5cf73a169fba05b27efe61e342f57769/_/download/contextbatch/js/jira.general/batch.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/c2e41f2cf09f8b3c8914470a6617682d/_/download/contextbatch/js/jira.global/batch.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/5.0-m10/_/download/batch/com.atlassian.auiplugin:aui-experimental-tooltips/com.atlassian.auiplugin:aui-experimental-tooltips.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:jquery-easing/jira.webresources:jquery-easing.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:jquery-fancybox/jira.webresources:jquery-fancybox.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:viewissue/jira.webresources:viewissue.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:backbone-ext/com.atlassian.jira.jira-issue-nav-plugin:backbone-ext.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:common/com.atlassian.jira.jira-issue-nav-plugin:common.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:focus-shifter-tip/com.atlassian.jira.jira-issue-nav-plugin:focus-shifter-tip.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:viewissue/com.atlassian.jira.jira-issue-nav-plugin:viewissue.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.25.20/_/download/batch/com.atlassian.jira.jira-issue-nav-plugin:standalone-issue/com.atlassian.jira.jira-issue-nav-plugin:standalone-issue.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.0/_/download/batch/jira.webresources:calendar-en/jira.webresources:calendar-en.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.1.1/_/download/batch/com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources/com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.3.16/_/download/batch/com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts/com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts.js" ></script>
<script type="text/javascript" src="/s/en_UK-1mvw8p-418945332/850/7/1.0.54/_/download/batch/com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue/com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue.js" ></script>

    <script type="text/javascript" src="/rest/api/1.0/shortcuts/850/6f24d7c53c4580e75a5ae02b9e75eb5f/shortcuts.js?context=issueaction&amp;context=issuenavigation"></script>


    
    <link rel="index" href="/secure/IssueNavigator.jspa"/>
    
    
    

</head>
<body id="jira" class="aui-layout aui-theme-default ka page-type-navigator navigator-collapsed navigator-issue-only" data-version="5.2.7">
<div id="page">
    <header id="header" role="banner">
        



    
        
            
        
    






        





        



















<fieldset class="parameters hidden dont-default-focus">
    <input type="hidden" title="tzdetect.pref.tzid" value="America/Chicago" />
    <input type="hidden" title="tzdetect.pref.tzname" value="(GMT-06:00) Chicago" />
    <input type="hidden" title="tzdetect.pref.tzoffset" value="(GMT-06:00)" />
    <input type="hidden" title="tzdetect.pref.tzdst" value="true" />
    <input type="hidden" title="tzdetect.pref.nothanks" value="" />
</fieldset>


<nav class="global" role="navigation">
    <div class="primary">
        <h1 id="logo"><a href="/secure/MyJiraHome.jspa"><img src="http://www.codehaus.org/codehaus-small.gif" alt="jira.codehaus.org" /></a></h1>
    </div>
    <div class="secondary">
        <ul>
                                    
            



<li id="header-details-user" class="aui-dd-parent">
            <a class="lnk" rel="nofollow" href="/login.jsp?os_destination=%2Fbrowse%2FGROOVY-4832">Log In</a>
        <span class="drop-wrap">
        <a class="drop aui-dd-link"
                        href="#"><span>Access more options</span>
        </a>
    </span>
    <div id="user-options-list" class="aui-list hidden">
                                                                                        <ul id="jira-help" class="aui-list-section  aui-first     aui-last  ">
                                                                        <li class="aui-list-item"><a  id="view_help"   class="aui-list-item-link "  title="Goto the online documentation for JIRA" href="https://docs.atlassian.com/jira/docs-052/JIRA+Documentation">Online Help</a></li>
                                                                                                <li class="aui-list-item"><a  id="keyshortscuthelp"   class="aui-list-item-link "  title="Get more information about JIRA's Keyboard Shortcuts" href="/secure/ViewKeyboardShortcuts!default.jspa">Keyboard Shortcuts</a></li>
                                                                                                <li class="aui-list-item"><a  id="view_about"   class="aui-list-item-link "  title="Get more information about JIRA" href="http://www.atlassian.com/software/jira">About JIRA</a></li>
                                                                                                <li class="aui-list-item"><a  id="view_credits"   class="aui-list-item-link "  title="See who did what" href="/secure/JiraCreditsPage!default.jspa">JIRA Credits</a></li>
                                                                                                <li class="aui-list-item"><a  id="whats-new-menu-link"   class="aui-list-item-link "   href="https://docs.atlassian.com/jira/docs-052/whatsnew/iframe">What?s New</a></li>
                                                            </ul>
                        </div>

</li>

            
        </ul>
    </div>
</nav>
<nav class="local" role="navigation">
    <div class="primary">
                    
            
<ul id="main-nav" class="standard-menu-bar">
                                            <li class="aui-dd-parent lazy">
            <a class="lnk"
                href="/secure/Dashboard.jspa"
                 id="home_link"                 accessKey="h"                 title="View your current Dashboard"                >Dashboards</a>

                    <span class="drop-wrap">
            <a class="drop aui-dd-link"
                                    id="home_link_drop"
                    rel="home_link"
                     accessKey="d"                    title="Access more options (Alt+d)"
                                href="#"><span>Access more options (Alt+d)</span></a></span>
                </li>
                                            <li class="aui-dd-parent lazy">
            <a class="lnk"
                href="/browse/GROOVY"
                 id="browse_link"                 accessKey="b"                 title="Browse currently active project 'groovy'"                >Projects</a>

                    <span class="drop-wrap">
            <a class="drop aui-dd-link"
                                    id="browse_link_drop"
                    rel="browse_link"
                     accessKey="p"                    title="Access more options (Alt+p)"
                                href="#"><span>Access more options (Alt+p)</span></a></span>
                </li>
                                            <li class="aui-dd-parent lazy selected">
            <a class="lnk"
                href="/secure/IssueNavigator.jspa"
                 id="find_link"                 accessKey="f"                 title="View your current filter"                >Issues</a>

                    <span class="drop-wrap">
            <a class="drop aui-dd-link"
                                    id="find_link_drop"
                    rel="find_link"
                     accessKey="i"                    title="Access more options (Alt+i)"
                                href="#"><span>Access more options (Alt+i)</span></a></span>
                </li>
    </ul>

            
            </div>
    <div class="secondary">
        <ul>
                            <li>
                    <form id="quicksearch" action="/secure/QuickSearch.jspa" method="post" class="dont-default-focus">
                        <div>
                            <input id="quickSearchInput" class="text" type="text" title="Quick Search" name="searchString" accessKey="q" />
                            <label for="quickSearchInput" class="overlabel">Quick Search</label>
                            <input type="submit" class="hidden" value="Search" />
                        </div>
                    </form>
                </li>
                                </ul>
    </div>
</nav>

    </header>
    

<div id="announcement-banner" class="alertHeader">
    <div style='position: absolute; right: 20em; top: -2em'>
  <a href='https://xircles.codehaus.org/signup'>Signup</a>
</div>
</div>


    <section id="content" role="main">
        


<div class="content-container">
    <div class="content-body">
        <div class="result-panel">
            <div id="issue-content">

                <header id="stalker"  class="issue-header js-stalker">
                    <div class="issue-header-content">
                        
                            











    
        <div id="heading-avatar">
            
                    <img id="project-avatar" alt="groovy" class="project-avatar-48" height="48" src="/secure/projectavatar?pid=10242&amp;avatarId=10011&amp;size=large" width="48" />
            
        </div>
    

<ul class="breadcrumbs">
    <li><a id="project-name-val" href="/browse/GROOVY">groovy</a></li>
    
    <li><a id="key-val" rel="125543" href="/browse/GROOVY-4832">GROOVY-4832</a></li>
</ul>
<h1 id="summary-val">
    when two java classes extend a groovy class, both subclasses have a metaClass for whichever subclass was loaded first
    
</h1>
                        
                        



    <div class="command-bar">
        <div class="ops-cont">
            <div class="ops-menus aui-toolbar">
                <div class="toolbar-split toolbar-split-left">
                    
                        
                            <ul class="toolbar-group">
                                <li class="toolbar-item">
                                    <a id="ops-login-lnk"
                                       title="Log In"
                                       class="toolbar-trigger "
                                       href="/login.jsp?os_destination=%2Fbrowse%2FGROOVY-4832"><span class="trigger-text">Log In</span></a>
                                </li>
                            </ul>
                        
                    
                    
                        
                            
                        
                    
                        
                            
                        
                    
                </div>
                <div class="toolbar-split toolbar-split-right">
                    <ul class="toolbar-group pluggable-ops">
                    
                        
                    
                    
                        
                            <li class="toolbar-item toolbar-dropdown">
                                <a href="#" title="View this issue in another format" class="toolbar-trigger js-default-dropdown"><span class="dropdown-text"><span class="icon icon-view"></span>Views</span><span class="icon drop-menu"></span></a>

                                <div class="aui-list hidden">
                                    <ul class="aui-first aui-last aui-list-section">
                                        
                                            <li class="aui-list-item">
                                                <a class="aui-list-item-link" rel="nofollow" href="/si/jira.issueviews:issue-xml/GROOVY-4832/GROOVY-4832.xml">XML</a>
                                            </li>
                                        
                                            <li class="aui-list-item">
                                                <a class="aui-list-item-link" rel="nofollow" href="/si/jira.issueviews:issue-word/GROOVY-4832/GROOVY-4832.doc">Word</a>
                                            </li>
                                        
                                            <li class="aui-list-item">
                                                <a class="aui-list-item-link" rel="nofollow" href="/si/jira.issueviews:issue-html/GROOVY-4832/GROOVY-4832.html">Printable</a>
                                            </li>
                                        
                                    </ul>
                                </div>
                            </li>
                        
                    
                    </ul>
                </div>
            </div>
        </div>
    </div>


                    </div>
                </header>
                <div class="content-container issue-body-content navigator-collapsed">
                    <div class="content-body aui-panel">
                        <div class="aui-group">
                            <div class="aui-item issue-main-column">
                                
                                    <div class='module toggle-wrap' id='details-module'><div id='details-module_heading' class='mod-header'><h3 class='toggle-title'>Details</h3></div><div class='mod-content'>

<ul id="issuedetails" class="property-list two-cols">
    <li class="item">
        <div class="wrap">
            <strong class="name">Type:</strong>
            <span id="type-val" class="value">
                                <img  alt="Bug" height="16" src="/images/icons/issuetypes/bug.png" title="Bug - A problem which impairs or prevents the functions of the product." width="16" /> Bug
            </span>
        </div>
    </li>
    <li class="item item-right">
        <div class="wrap">
            <strong class="name">Status:</strong>
            <span id="status-val" class="value">
                                <img  alt="Closed" height="16" src="/images/icons/statuses/closed.png" title="Closed - The issue is considered finished, the resolution is correct. Issues which are closed can be reopened." width="16" /> Closed
            </span>
                    </div>
    </li>
            <li class="item">
            <div class="wrap">
                <strong class="name">Priority:</strong>
                <span id="priority-val" class="value">
                                        <img  alt="Major" height="16" src="/images/icons/priorities/major.png" title="Major - Major loss of function." width="16" /> Major
                </span>
            </div>
        </li>
                                <li class="item item-right">
            <div class="wrap">
                <strong class="name">Resolution:</strong>
                <span id="resolution-val" class="value resolved" >
                                     Fixed
                                </span>
            </div>
        </li>
                <li class="item">
            <div class="wrap">
                <strong class="name">Affects Version/s:</strong>
                <span id="versions-val" class="value">
                                            <span class="shorten" id="versions-field">
                                                            <span title="1.7.10 ">1.7.10</span>,                                                            <span title="1.8.0 official 1.8 final release">1.8.0</span>                                                    </span>
                                    </span>
            </div>
        </li>
                <li class="item item-right">
            <div class="wrap">
                <strong class="name">Fix Version/s:</strong>
                <span id="fixfor-val" class="value">
                                            <span class="shorten" id="fixVersions-field">
                                                            <a href="/browse/GROOVY/fixforversion/17495" title="1.8.2 ">1.8.2</a>,                                                            <a href="/browse/GROOVY/fixforversion/17494" title="1.9-beta-3 ">1.9-beta-3</a>,                                                            <a href="/browse/GROOVY/fixforversion/17244" title="1.7.11 ">1.7.11</a>                                                    </span>
                                    </span>
            </div>
        </li>
                <li class="item">
            <div class="wrap">
                <strong class="name">Component/s:</strong>
                <span id="components-val" class="value">
                                            None
                                    </span>
            </div>
        </li>
                    <li class="item full-width">
            <div class="wrap" id="wrap-labels">
                <strong class="name">Labels:</strong>
                    <div class="labels-wrap value">
            <span class="labels" id="labels-125543-value">None</span>
                </div>
            </div>
        </li>
                <li class="item full-width">
            <div class="wrap">
                <strong class="name">Environment:</strong>
                <div id="environment-val" class="value">
                                  WinXP
      
                </div>
            </div>
        </li>
    </ul>

<div id="customfieldmodule">
            <ul id="tabCellPane1" class="property-list  ">
                                    <li id="rowForcustomfield_10110" class="item">
                    <div class="wrap">
                        <strong title="Testcase included" class="name">Testcase included:</strong>
                        <div id="customfield_10110-val" class="value type-radiobuttons" data-fieldtype="radiobuttons" data-fieldtypecompletekey="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                                yes

                        </div>
                    </div>
                </li>
                                                <li id="rowForcustomfield_10210" class="item">
                    <div class="wrap">
                        <strong title="Number of attachments " class="name">Number of attachments :</strong>
                        <div id="customfield_10210-val" class="value type-attachments" data-fieldtype="attachments" data-fieldtypecompletekey="com.atlassian.jira.toolkit:attachments">
                                1

                        </div>
                    </div>
                </li>
                        </ul>
    </div>
</div></div><div class='module toggle-wrap' id='descriptionmodule'><div id='descriptionmodule_heading' class='mod-header'><h3 class='toggle-title'>Description</h3></div><div class='mod-content'><div id="description-val" class="field-ignore-highlight">
    <div class="user-content-block">
                    <p><b>Original problem:</b></p>

<p>I have an abstract groovy class, and two (or more) concrete java subclasses extend it.  The superclass has an abstract method, which each concrete subclass overrides (of course).</p>

<p>When I use just one subclass, everything works fine: I call a superclass method that calls the abstract method, and I get the behavior I expect.  But when the other subclass has already been loaded, things are different.  Then, I get an IllegalArgumentException: object is not an instance of declaring class.</p>

<p>This problem corresponds to testGenericSubclassWithBafflingSymptom() in the attached junit tests.  See that test for additional details.</p>

<p><b>Simpler case that illustrates the likely underlying problem (and does not involve generics):</b></p>

<p>I have an abstract groovy class, and two concrete java subclasses extend it.  If I have an instance of just one of the subclasses, then instance.metaClass.theClass returns exactly what I expect.  But if I've already loaded the other subclass, then the metaClass on an instance of <b>either</b> subclass is for the class that was used first!</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-comment">// snippet of the groovy version of testSubclass(), also attached
</span>      OtherConcreteJavaSubclass unrelatedInstance = <span class="code-keyword">new</span> OtherConcreteJavaSubclass();
      ConcreteJavaSubclass instance = <span class="code-keyword">new</span> ConcreteJavaSubclass();
      assertEquals(<span class="code-quote">"<span class="code-keyword">this</span> one works"</span>, OtherConcreteJavaSubclass, unrelatedInstance.metaClass.theClass)
      assertEquals(<span class="code-quote">"but <span class="code-keyword">this</span> one is wrong"</span>, ConcreteJavaSubclass, instance.metaClass.theClass)
</pre>
</div></div>


<p>This mixture of groovy and java may sound a little odd, but we actually ran into it when converting an existing class from java to groovy, and it stumped us for quite a while.</p>
            </div>
</div>
</div></div><div class='module toggle-wrap' id='attachmentmodule'><div id='attachmentmodule_heading' class='mod-header'><ul class='ops'><li class='drop'><div class='aui-dd-parent'><a href='#' class='icon drop-menu js-default-dropdown' title='Options'><span>Options</span></a><div class='aui-dropdown-content aui-list'><ul id='attachment-sorting-options' class='aui-list-section aui-first'><li class='aui-list-item'><a id='attachment-sort-key-name' href='/browse/GROOVY-4832?attachmentSortBy=fileName#attachmentmodule' class='aui-list-checked aui-checked aui-list-item-link' title='viewissue.subtasks.tab.show.all.name'><span>Sort By Name</span></a></li><li class='aui-list-item'><a id='attachment-sort-key-date' href='/browse/GROOVY-4832?attachmentSortBy=dateTime#attachmentmodule' class='aui-list-checked aui-list-item-link' title='Sort By Date'><span>Sort By Date</span></a></li></ul><ul id='attachment-sorting-order-options' class='aui-list-section'><li class='aui-list-item'><a id='attachment-sort-direction-asc' href='/browse/GROOVY-4832?attachmentOrder=asc#attachmentmodule' class='aui-list-checked aui-checked aui-list-item-link' title='Ascending'><span>Ascending</span></a></li><li class='aui-list-item'><a id='attachment-sort-direction-desc' href='/browse/GROOVY-4832?attachmentOrder=desc#attachmentmodule' class='aui-list-checked aui-list-item-link' title='Descending'><span>Descending</span></a></li></ul><ul id='attachment-manage-options' class='aui-list-section  aui-last'><li class='aui-list-item'><a id='aszip' href='/secure/attachmentzip/125543.zip' class='aui-list-checked aui-list-item-link' title='Download all attachments as a ZIP file'><span>Download All</span></a></li></ul></div></div></li></ul><h3 class='toggle-title'>Attachments</h3></div><div class='mod-content'>
            <ol id="file_attachments" class="item-attachments">
                            <li class="attachment-content">
                                            <div class="twixi-block collapsed">
                            <div class="twixi-wrap verbose">
                                <a href="#" class="twixi"><span class="icon twixi-opened"><span>Hide</span></span></a>
                                <div class="attachment-thumb">
                                    <a href="/secure/attachment/55176/${fileAttachment.fileNameUrlEncoded}" draggable="true" data-downloadurl="application/zip:groovy-subclass-project.zip:http://jira.codehaus.org/secure/attachment/55176/groovy-subclass-project.zip">
                                            <img src="/images/icons/attach/zip.gif" height="16" width="16" border="0" alt="Zip Archive">
                                    </a>
                                </div>
                                <dl>
                                        <dt class="attachment-title">
        <a href="/secure/attachment/55176/groovy-subclass-project.zip"
            title="Latest  18/May/11 3:34 PM - Laura Dean" draggable="true"
            data-downloadurl="application/zip:groovy-subclass-project.zip:http://jira.codehaus.org/secure/attachment/55176/groovy-subclass-project.zip">groovy-subclass-project.zip
        </a>
    </dt>
    <dd class="attachment-delete">
                    <span class="icon"></span>
            </dd>
    <dd class="attachment-date">18/May/11 3:34 PM</dd>
    <dd class="attachment-size">219 kB</dd>
    <dd class="attachment-author">Laura Dean</dd>
                                    <dd class="zip-contents">
                                        <ol>
                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B1%5D/groovy-subclass-project/AbstractGenericGroovySuperclass.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/AbstractGenericGroovySuperclass.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B1%5D/groovy-subclass-project/AbstractGenericGroovySuperclass.groovy">
                                                                    <img src="/images/icons/attach/file.gif" height="16" width="16" border="0" alt="File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B1%5D/groovy-subclass-project/AbstractGenericGroovySuperclass.groovy" title="groovy-subclass-project/AbstractGenericGroovySuperclass.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/AbstractGenericGroovySuperclass.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B1%5D/groovy-subclass-project/AbstractGenericGroovySuperclass.groovy">
                                                            groovy-subclass-project/AbstractGenericGroovySuperclass.groovy
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.3 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B2%5D/groovy-subclass-project/AbstractGroovySuperclass.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/AbstractGroovySuperclass.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B2%5D/groovy-subclass-project/AbstractGroovySuperclass.groovy">
                                                                    <img src="/images/icons/attach/file.gif" height="16" width="16" border="0" alt="File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B2%5D/groovy-subclass-project/AbstractGroovySuperclass.groovy" title="groovy-subclass-project/AbstractGroovySuperclass.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/AbstractGroovySuperclass.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B2%5D/groovy-subclass-project/AbstractGroovySuperclass.groovy">
                                                            groovy-subclass-project/AbstractGroovySuperclass.groovy
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.2 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B3%5D/groovy-subclass-project/build.xml" draggable="true" data-downloadurl="application/xml:groovy-subclass-project/build.xml:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B3%5D/groovy-subclass-project/build.xml">
                                                                    <img src="/images/icons/attach/xml.gif" height="16" width="16" border="0" alt="XML File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B3%5D/groovy-subclass-project/build.xml" title="groovy-subclass-project/build.xml" draggable="true" data-downloadurl="application/xml:groovy-subclass-project/build.xml:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B3%5D/groovy-subclass-project/build.xml">
                                                            groovy-subclass-project/build.xml
                                                        </a>
                                                        <span class="attachment-size">
                                                            1 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B4%5D/groovy-subclass-project/ConcreteGenericJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/ConcreteGenericJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B4%5D/groovy-subclass-project/ConcreteGenericJavaSubclass.java">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Source File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B4%5D/groovy-subclass-project/ConcreteGenericJavaSubclass.java" title="groovy-subclass-project/ConcreteGenericJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/ConcreteGenericJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B4%5D/groovy-subclass-project/ConcreteGenericJavaSubclass.java">
                                                            groovy-subclass-project/ConcreteGenericJavaSubclass.java
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.3 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B5%5D/groovy-subclass-project/ConcreteJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/ConcreteJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B5%5D/groovy-subclass-project/ConcreteJavaSubclass.java">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Source File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B5%5D/groovy-subclass-project/ConcreteJavaSubclass.java" title="groovy-subclass-project/ConcreteJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/ConcreteJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B5%5D/groovy-subclass-project/ConcreteJavaSubclass.java">
                                                            groovy-subclass-project/ConcreteJavaSubclass.java
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.2 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B6%5D/groovy-subclass-project/hamcrest-core-1.1.jar" draggable="true" data-downloadurl="application/java-archive:groovy-subclass-project/hamcrest-core-1.1.jar:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B6%5D/groovy-subclass-project/hamcrest-core-1.1.jar">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Archive File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B6%5D/groovy-subclass-project/hamcrest-core-1.1.jar" title="groovy-subclass-project/hamcrest-core-1.1.jar" draggable="true" data-downloadurl="application/java-archive:groovy-subclass-project/hamcrest-core-1.1.jar:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B6%5D/groovy-subclass-project/hamcrest-core-1.1.jar">
                                                            groovy-subclass-project/hamcrest-core-1.1.jar
                                                        </a>
                                                        <span class="attachment-size">
                                                            33 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B7%5D/groovy-subclass-project/junit-dep-4.8.2.jar" draggable="true" data-downloadurl="application/java-archive:groovy-subclass-project/junit-dep-4.8.2.jar:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B7%5D/groovy-subclass-project/junit-dep-4.8.2.jar">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Archive File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B7%5D/groovy-subclass-project/junit-dep-4.8.2.jar" title="groovy-subclass-project/junit-dep-4.8.2.jar" draggable="true" data-downloadurl="application/java-archive:groovy-subclass-project/junit-dep-4.8.2.jar:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B7%5D/groovy-subclass-project/junit-dep-4.8.2.jar">
                                                            groovy-subclass-project/junit-dep-4.8.2.jar
                                                        </a>
                                                        <span class="attachment-size">
                                                            213 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B8%5D/groovy-subclass-project/OtherConcreteGenericJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/OtherConcreteGenericJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B8%5D/groovy-subclass-project/OtherConcreteGenericJavaSubclass.java">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Source File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B8%5D/groovy-subclass-project/OtherConcreteGenericJavaSubclass.java" title="groovy-subclass-project/OtherConcreteGenericJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/OtherConcreteGenericJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B8%5D/groovy-subclass-project/OtherConcreteGenericJavaSubclass.java">
                                                            groovy-subclass-project/OtherConcreteGenericJavaSubclass.java
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.3 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B9%5D/groovy-subclass-project/OtherConcreteJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/OtherConcreteJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B9%5D/groovy-subclass-project/OtherConcreteJavaSubclass.java">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Source File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B9%5D/groovy-subclass-project/OtherConcreteJavaSubclass.java" title="groovy-subclass-project/OtherConcreteJavaSubclass.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/OtherConcreteJavaSubclass.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B9%5D/groovy-subclass-project/OtherConcreteJavaSubclass.java">
                                                            groovy-subclass-project/OtherConcreteJavaSubclass.java
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.2 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B10%5D/groovy-subclass-project/SubclassingTestInGroovy.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/SubclassingTestInGroovy.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B10%5D/groovy-subclass-project/SubclassingTestInGroovy.groovy">
                                                                    <img src="/images/icons/attach/file.gif" height="16" width="16" border="0" alt="File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B10%5D/groovy-subclass-project/SubclassingTestInGroovy.groovy" title="groovy-subclass-project/SubclassingTestInGroovy.groovy" draggable="true" data-downloadurl="${zipEntry.mimetype}:groovy-subclass-project/SubclassingTestInGroovy.groovy:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B10%5D/groovy-subclass-project/SubclassingTestInGroovy.groovy">
                                                            groovy-subclass-project/SubclassingTestInGroovy.groovy
                                                        </a>
                                                        <span class="attachment-size">
                                                            1 kB
                                                        </span>
                                                    </li>
                                                                                                                                                                                                <li>
                                                        <div class="attachment-thumb">
                                                            <a href="/secure/attachmentzip/unzip/125543/55176%5B11%5D/groovy-subclass-project/SubclassingTestInJava.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/SubclassingTestInJava.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B11%5D/groovy-subclass-project/SubclassingTestInJava.java">
                                                                    <img src="/images/icons/attach/java.gif" height="16" width="16" border="0" alt="Java Source File">
                                                            </a>
                                                        </div>
                                                        <a href="/secure/attachmentzip/unzip/125543/55176%5B11%5D/groovy-subclass-project/SubclassingTestInJava.java" title="groovy-subclass-project/SubclassingTestInJava.java" draggable="true" data-downloadurl="text/plain:groovy-subclass-project/SubclassingTestInJava.java:http://jira.codehaus.org/secure/attachmentzip/unzip/125543/55176%5B11%5D/groovy-subclass-project/SubclassingTestInJava.java">
                                                            groovy-subclass-project/SubclassingTestInJava.java
                                                        </a>
                                                        <span class="attachment-size">
                                                            0.9 kB
                                                        </span>
                                                    </li>
                                                                                                                                    </ol>
                                        <span class="zip-contents-trailer">
                                                                                        <a href="/secure/attachment/55176/groovy-subclass-project.zip" draggable="true" data-downloadurl="application/zip:groovy-subclass-project.zip:http://jira.codehaus.org/secure/attachment/55176/${fileAttachment.fileNameUrlEncoded}">Download Zip</a>
                                        </span>
                                    </dd>
                                </dl>
                            </div>
                            <div class="twixi-wrap concise">
                                <a href="#" class="twixi"><span class="icon twixi-closed"><span>Show</span></span></a>

                                <div class="attachment-thumb">
                                    <a href="/secure/attachment/55176/groovy-subclass-project.zip" draggable="true" data-downloadurl="application/zip:groovy-subclass-project.zip:http://jira.codehaus.org/secure/attachment/55176/groovy-subclass-project.zip">
                                            <img src="/images/icons/attach/zip.gif" height="16" width="16" border="0" alt="Zip Archive">
                                    </a>
                                </div>
                                <dl>
                                        <dt class="attachment-title">
        <a href="/secure/attachment/55176/groovy-subclass-project.zip"
            title="Latest  18/May/11 3:34 PM - Laura Dean" draggable="true"
            data-downloadurl="application/zip:groovy-subclass-project.zip:http://jira.codehaus.org/secure/attachment/55176/groovy-subclass-project.zip">groovy-subclass-project.zip
        </a>
    </dt>
    <dd class="attachment-delete">
                    <span class="icon"></span>
            </dd>
    <dd class="attachment-date">18/May/11 3:34 PM</dd>
    <dd class="attachment-size">219 kB</dd>
    <dd class="attachment-author">Laura Dean</dd>
                                </dl>
                            </div>
                        </div>
                                    </li>
                    </ol>
        </div></div><div class='module toggle-wrap' id='activitymodule'><div id='activitymodule_heading' class='mod-header'><h3 class='toggle-title'>Activity</h3></div><div class='mod-content'>










    <div class="tabwrap tabs2">
                    <div class="sortwrap">
                                    <a class="icon icon-sort-down ajax-activity-content" rel="nofollow" href="/browse/GROOVY-4832?actionOrder=desc" title="Ascending order - Click to sort in descending order"><span>Ascending order - Click to sort in descending order</span></a>
                            </div>
                <ul id="issue-tabs" class="tabs horizontal">
                                
            <li  data-id="all-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel" data-label="All" data-href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel">
                            <a class="ajax-activity-content" id="all-tabpanel" href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel"><strong>All</strong></a>
                        </li>
                                
            <li  class="active" id="comment-tabpanel"  data-id="comment-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel" data-label="Comments" data-href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel">
                            <strong>Comments</strong>
                        </li>
                                
            <li  data-id="worklog-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel" data-label="Work Log" data-href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel">
                            <a class="ajax-activity-content" id="worklog-tabpanel" href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel"><strong>Work Log</strong></a>
                        </li>
                                
            <li  data-id="changehistory-tabpanel" data-key="com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel" data-label="History" data-href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel">
                            <a class="ajax-activity-content" id="changehistory-tabpanel" href="/browse/GROOVY-4832?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel"><strong>History</strong></a>
                        </li>
                                
            <li  data-id="activity-stream-issue-tab" data-key="com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab" data-label="Activity" data-href="/browse/GROOVY-4832?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab">
                            <a class="ajax-activity-content" id="activity-stream-issue-tab" href="/browse/GROOVY-4832?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"><strong>Activity</strong></a>
                        </li>
                </ul>
    </div>
    <div class="issuePanelProgress"></div>
    <div class="issuePanelContainer" id="issue_actions_container">
                        <div id="comment-273187" class="issue-data-block activity-comment twixi-block expanded">
    <div class="twixi-wrap verbose actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-opened"><span>Hide</span></span></a>
        <div class="action-links">
            <a href="/browse/GROOVY-4832?focusedCommentId=273187&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-273187" title="A permanent link to this comment." class="icon icon-perma activitymodule-link"><span>Permalink</span></a>
                                </div>
        <div class="action-details">
    
    
                                            
    
                

    <a class="user-hover user-avatar" rel="alexhen" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_273187_verbose" href="/secure/ViewProfile.jspa?name=alexhen">Alex Heneveld</a>
 added a comment  - <span class='commentdate_273187_verbose subText'><span class='date user-tz' title='13/Jul/11 6:37 PM'><time datetime='2011-07-13T18:37-0500'>13/Jul/11 6:37 PM</time></span></span>   - <span class="redText subText" title="Alex Heneveld - 13/Jul/11 6:42 PM">edited</span> </div>
        <div class="action-body flooded"><p>This bit us as well--as it manifests subtly, because unit tests pass when run in isolation but once both classes are loaded the same code will throw the exception mentioned above:</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
java.lang.IllegalArgumentException: object is not an instance of declaring class
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
	at instance.methodFromGroovySuperclass
</pre>
</div></div>

<p>Suggest high priority as this takes a long time to track down and mixing Java and Groovy will be common in a large team.</p>

<p>The simple <b>workaround</b> we use is to put the following in the groovy superclass constructor (getting the metaclass of the java subclass, curiously, seems to work):</p>

<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
setMetaClass(DefaultGroovyMethods.getMetaClass(getClass()))
</pre>
</div></div> </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-closed"><span>Show</span></span></a>
        <div class="action-details flooded">
            
    
    
                                            
    
                

    <a class="user-hover user-avatar" rel="alexhen" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_273187_concise" href="/secure/ViewProfile.jspa?name=alexhen">Alex Heneveld</a>
 added a comment  - <span class='commentdate_273187_concise subText'><span class='date user-tz' title='13/Jul/11 6:37 PM'><time datetime='2011-07-13T18:37-0500'>13/Jul/11 6:37 PM</time></span></span>   - <span class="redText subText" title="Alex Heneveld - 13/Jul/11 6:42 PM">edited</span>               This bit us as well--as it manifests subtly, because unit tests pass when run in isolation but once both classes are loaded the same code will throw the exception mentioned above: 

  
 
java.lang.IllegalArgumentException: object is not an instance of declaring class
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
	at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
	at instance.methodFromGroovySuperclass
 
  

 Suggest high priority as this takes a long time to track down and mixing Java and Groovy will be common in a large team. 

 The simple  workaround  we use is to put the following in the groovy superclass constructor (getting the metaclass of the java subclass, curiously, seems to work): 

  
 
setMetaClass(DefaultGroovyMethods.getMetaClass(getClass()))
 
           </div>
    </div>
</div>
                     <div id="comment-273531" class="issue-data-block activity-comment twixi-block expanded">
    <div class="twixi-wrap verbose actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-opened"><span>Hide</span></span></a>
        <div class="action-links">
            <a href="/browse/GROOVY-4832?focusedCommentId=273531&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-273531" title="A permanent link to this comment." class="icon icon-perma activitymodule-link"><span>Permalink</span></a>
                                </div>
        <div class="action-details">
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_273531_verbose" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_273531_verbose subText'><span class='date user-tz' title='18/Jul/11 5:43 PM'><time datetime='2011-07-18T17:43-0500'>18/Jul/11 5:43 PM</time></span></span>  </div>
        <div class="action-body flooded"><p>closed wrong issue</p> </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-closed"><span>Show</span></span></a>
        <div class="action-details flooded">
            
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_273531_concise" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_273531_concise subText'><span class='date user-tz' title='18/Jul/11 5:43 PM'><time datetime='2011-07-18T17:43-0500'>18/Jul/11 5:43 PM</time></span></span>                closed wrong issue          </div>
    </div>
</div>
                     <div id="comment-277671" class="issue-data-block activity-comment twixi-block expanded">
    <div class="twixi-wrap verbose actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-opened"><span>Hide</span></span></a>
        <div class="action-links">
            <a href="/browse/GROOVY-4832?focusedCommentId=277671&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-277671" title="A permanent link to this comment." class="icon icon-perma activitymodule-link"><span>Permalink</span></a>
                                </div>
        <div class="action-details">
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_277671_verbose" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_277671_verbose subText'><span class='date user-tz' title='02/Sep/11 5:35 PM'><time datetime='2011-09-02T17:35-0500'>02/Sep/11 5:35 PM</time></span></span>  </div>
        <div class="action-body flooded"><p>when I wrote the only place it could be going wrong, the method $getStaticMetaClass from bytecode to Java, I came up with this:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
<span class="code-keyword">protected</span> MetaClass $getStaticMetaClass() {
  <span class="code-keyword">if</span> (<span class="code-keyword">this</span>.getClass()!=A.class) {
    <span class="code-keyword">return</span> ScriptBytecodeAdapter.initMetaClass(<span class="code-keyword">this</span>)
  } <span class="code-keyword">else</span> {
    ClassInfo ci = A.$staticClassInfo
    <span class="code-keyword">if</span> (ci==<span class="code-keyword">null</span>) {
      ci = ClassInfo.getClassInfo(<span class="code-keyword">this</span>.getClass())
      A.$staticClassInfo = ci
    }
    <span class="code-keyword">return</span> ci.getMetaClass()
  }
}
</pre>
</div></div>
<p>compiling this to bytecode and comparing it with the actual bytecode revealed, that my translation to Java is wrong. In the byteocde</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">
   <span class="code-keyword">protected</span> $getStaticMetaClass()Lgroovy/lang/MetaClass;
     ALOAD 0
     INVOKEVIRTUAL java/lang/<span class="code-object">Object</span>.getClass ()Ljava/lang/<span class="code-object">Class</span>;
     INVOKESTATIC A.$get$$class$A ()Ljava/lang/<span class="code-object">Class</span>;
     IF_ACMPNE L0
     ALOAD 0
     INVOKESTATIC org/codehaus/groovy/runtime/ScriptBytecodeAdapter.initMetaClass (Ljava/lang/<span class="code-object">Object</span>;)Lgroovy/lang/MetaClass;
     ARETURN
    L0
     GETSTATIC A.$staticClassInfo : Lorg/codehaus/groovy/reflection/ClassInfo;
     ASTORE 1
     ALOAD 1
     IFNONNULL L1
     ALOAD 0
     INVOKEVIRTUAL java/lang/<span class="code-object">Object</span>.getClass ()Ljava/lang/<span class="code-object">Class</span>;
     INVOKESTATIC org/codehaus/groovy/reflection/ClassInfo.getClassInfo (Ljava/lang/<span class="code-object">Class</span>;)Lorg/codehaus/groovy/reflection/ClassInfo;
     DUP
     ASTORE 1
     PUTSTATIC A.$staticClassInfo : Lorg/codehaus/groovy/reflection/ClassInfo;
    L1
     ALOAD 1
     INVOKEVIRTUAL org/codehaus/groovy/reflection/ClassInfo.getMetaClass ()Lgroovy/lang/MetaClass;
     ARETURN
     MAXSTACK = 2
     MAXLOCALS = 2
</pre>
</div></div>
<p>the IF_ACMPNE should be a IF_ACMPEQ. Doing this change makes the tests in the attached project pass, while it does not without. IF_ACMPNE means we don't do this.getClass()!=A.class, we do this.getClass()==A.class and then it becomes clear that the code above makes no sense like this.</p> </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-closed"><span>Show</span></span></a>
        <div class="action-details flooded">
            
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_277671_concise" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_277671_concise subText'><span class='date user-tz' title='02/Sep/11 5:35 PM'><time datetime='2011-09-02T17:35-0500'>02/Sep/11 5:35 PM</time></span></span>                when I wrote the only place it could be going wrong, the method $getStaticMetaClass from bytecode to Java, I came up with this: 
  
 
 protected  MetaClass $getStaticMetaClass() {
   if  ( this .getClass()!=A.class) {
     return  ScriptBytecodeAdapter.initMetaClass( this )
  }  else  {
    ClassInfo ci = A.$staticClassInfo
     if  (ci== null ) {
      ci = ClassInfo.getClassInfo( this .getClass())
      A.$staticClassInfo = ci
    }
     return  ci.getMetaClass()
  }
}
 
  
 compiling this to bytecode and comparing it with the actual bytecode revealed, that my translation to Java is wrong. In the byteocde 
  
 
    protected  $getStaticMetaClass()Lgroovy/lang/MetaClass;
     ALOAD 0
     INVOKEVIRTUAL java/lang/ Object .getClass ()Ljava/lang/ Class ;
     INVOKESTATIC A.$get$$class$A ()Ljava/lang/ Class ;
     IF_ACMPNE L0
     ALOAD 0
     INVOKESTATIC org/codehaus/groovy/runtime/ScriptBytecodeAdapter.initMetaClass (Ljava/lang/ Object ;)Lgroovy/lang/MetaClass;
     ARETURN
    L0
     GETSTATIC A.$staticClassInfo : Lorg/codehaus/groovy/reflection/ClassInfo;
     ASTORE 1
     ALOAD 1
     IFNONNULL L1
     ALOAD 0
     INVOKEVIRTUAL java/lang/ Object .getClass ()Ljava/lang/ Class ;
     INVOKESTATIC org/codehaus/groovy/reflection/ClassInfo.getClassInfo (Ljava/lang/ Class ;)Lorg/codehaus/groovy/reflection/ClassInfo;
     DUP
     ASTORE 1
     PUTSTATIC A.$staticClassInfo : Lorg/codehaus/groovy/reflection/ClassInfo;
    L1
     ALOAD 1
     INVOKEVIRTUAL org/codehaus/groovy/reflection/ClassInfo.getMetaClass ()Lgroovy/lang/MetaClass;
     ARETURN
     MAXSTACK = 2
     MAXLOCALS = 2
 
  
 the IF_ACMPNE should be a IF_ACMPEQ. Doing this change makes the tests in the attached project pass, while it does not without. IF_ACMPNE means we don't do this.getClass()!=A.class, we do this.getClass()==A.class and then it becomes clear that the code above makes no sense like this.          </div>
    </div>
</div>
                     <div id="comment-277728" class="issue-data-block activity-comment twixi-block expanded">
    <div class="twixi-wrap verbose actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-opened"><span>Hide</span></span></a>
        <div class="action-links">
            <a href="/browse/GROOVY-4832?focusedCommentId=277728&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-277728" title="A permanent link to this comment." class="icon icon-perma activitymodule-link"><span>Permalink</span></a>
                                </div>
        <div class="action-details">
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_277728_verbose" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_277728_verbose subText'><span class='date user-tz' title='04/Sep/11 3:00 PM'><time datetime='2011-09-04T15:00-0500'>04/Sep/11 3:00 PM</time></span></span>  </div>
        <div class="action-body flooded"><p>I corrected the coe as stated before, would be nice if people could test this</p> </div>
    </div>
    <div class="twixi-wrap concise actionContainer">
        <a href="#" class="twixi"><span class="icon twixi-closed"><span>Show</span></span></a>
        <div class="action-details flooded">
            
    
    
    
                

    <a class="user-hover user-avatar" rel="blackdrag" style="background-image:url(/secure/useravatar?size=small&amp;avatarId=10232);" id="commentauthor_277728_concise" href="/secure/ViewProfile.jspa?name=blackdrag">blackdrag blackdrag</a>
 added a comment  - <span class='commentdate_277728_concise subText'><span class='date user-tz' title='04/Sep/11 3:00 PM'><time datetime='2011-09-04T15:00-0500'>04/Sep/11 3:00 PM</time></span></span>                I corrected the coe as stated before, would be nice if people could test this          </div>
    </div>
</div>
                 </div>
</div></div>
                                
                            </div>
                            <div id="viewissuesidebar" class="aui-item issue-side-column">
                                
                                    <div class='module toggle-wrap' id='peoplemodule'><div id='peoplemodule_heading' class='mod-header'><h3 class='toggle-title'>People</h3></div><div class='mod-content'><ul class="item-details" id="peopledetails">
    <li class="people-details">
                <dl>
            <dt>Assignee:</dt>
            <dd>
                <span id="assignee-val">        <span class="user-hover" rel="blackdrag" id="issue_summary_assignee_blackdrag">blackdrag blackdrag</span></span>
            </dd>
        </dl>
                        <dl>
            <dt>Reporter:</dt>
            <dd>
                <span id="reporter-val">        <span class="user-hover" rel="lgdean" id="issue_summary_reporter_lgdean">Laura Dean</span></span>
            </dd>
        </dl>
                    </li>
</ul>
<div id="votes-val">
                <span id="vote-label" title="You cannot vote or change your vote on resolved issues."><span class="icon icon-vote-disabled"></span><span class="action-text">Vote</span></span>
    
                (<span id="vote-data">3</span>)
    </div>
<div id="watchers-val">
            <span id="watch-label" title="You have to be logged in to watch an issue."><span class="icon icon-watch-disabled"></span>Watch</span>
    
        
            (<span id="watcher-data">2</span>)
    </div>
</div></div><div class='module toggle-wrap' id='datesmodule'><div id='datesmodule_heading' class='mod-header'><h3 class='toggle-title'>Dates</h3></div><div class='mod-content'><ul class="item-details">
    <li>
            <dl class="dates">
            <dt>Created:</dt>
            <dd class="date user-tz"  title="18/May/11 3:34 PM" >

                <span data-name="Created" id="create-date"  >
                                            <time datetime="2011-05-18T15:34-0500">18/May/11 3:34 PM</time>                                     </span>
            </dd>
        </dl>
            <dl class="dates">
            <dt>Updated:</dt>
            <dd class="date user-tz"  title="04/Sep/11 3:00 PM" >

                <span data-name="Updated" id="updated-date"  >
                                            <time datetime="2011-09-04T15:00-0500">04/Sep/11 3:00 PM</time>                                     </span>
            </dd>
        </dl>
            <dl class="dates">
            <dt>Resolved:</dt>
            <dd class="date user-tz"  title="04/Sep/11 3:00 PM" >

                <span data-name="Resolved" id="resolved-date"  >
                                            <time datetime="2011-09-04T15:00-0500">04/Sep/11 3:00 PM</time>                                     </span>
            </dd>
        </dl>
        </li>
</ul>
</div></div>
                                
                            </div>
                        </div>
                        <div class="issue-body">
                            
                                
                                    
                                
                            
                        </div>
                    </div>
                </div>
                <fieldset class="hidden parameters">
                    <input type="hidden" id="viewMoreMsg" value="Click to view {0} more">
                    <input type="hidden" id="hideMsg" value="Hide">
                    <input type="hidden" id="error-401" value="Cannot perform this operation. You are not logged in.">
                    <input type="hidden" id="issueOpTitleUnvote" value="Remove vote for this issue">
                    <input type="hidden" id="issueOpTitleVote" value="Vote for this issue">
                    <input type="hidden" id="issueOpTitleWatch" value="Start watching this issue">
                    <input type="hidden" id="issueOpTitleUnwatch" value="Stop watching this issue">
                    <input type="hidden" id="issueOpUnvote" value="Remove Vote">
                    <input type="hidden" id="issueOpVote" value="Add Vote">
                    <input type="hidden" id="issueOpWatch" value="Watch Issue">
                    <input type="hidden" id="issueOpUnwatch" value="Stop Watching">
                    <input type="hidden" id="i18nVote" value="Vote">
                    <input type="hidden" id="i18nVoted" value="Voted">
                    <input type="hidden" id="i18nWatch" value="Watch">
                    <input type="hidden" id="i18nWatching" value="Watching">
                </fieldset>



            </div>
        </div>
    </div>
</div>


    </section>
    <footer id="footer" role="contentinfo">
        
        












<div class="footer-body">
    <ul>
        <li>
                        <a href="http://www.atlassian.com/software/jira">Atlassian JIRA</a>

                                                    
                        
            <span id="footer-build-information">(v5.2.7#850-<span title='b2af0c8dc8537b36121c6a579fabbdf79fc919e5' data-commit-id='b2af0c8dc8537b36121c6a579fabbdf79fc919e5}'>sha1:b2af0c8</span>)</span>
        </li>
        <li>
                                    <a id="footer-report-problem-link" href="/secure/CreateIssue!default.jspa">Report a problem</a>
        </li>
    </ul>
            <ul>
            <li class="licensemessage">
                                    Powered by a free Atlassian <a href='http://www.atlassian.com/software/jira'>JIRA</a> open source license for Codehaus. Try JIRA - <a href='http://www.atlassian.com/software/jira'>bug tracking software</a> for <i>your</i> team.

                            </li>
        </ul>
    </div>


<form id="jira_request_timing_info" class="dont-default-focus" >
	<fieldset class="parameters hidden">
		<input type="hidden" title="jira.request.start.millis" value="1386977249511" />
		<input type="hidden" title="jira.request.server.time" value="393" />
		<input type="hidden" title="jira.request.id" value="1047x11286821x1" />
		<input type="hidden" title="jira.session.expiry.time" value="-" />
		<input type="hidden" title="jira.session.expiry.in.mins" value="-" />
		<input id="jiraConcurrentRequests" type="hidden" name="jira.request.concurrent.requests" value="1" />
	</fieldset>
</form>
<!--
	                 REQUEST ID : 1047x11286821x1
	          REQUEST TIMESTAMP : [13/Dec/2013:17:27:29 -0600]
	               REQUEST TIME : 0.3930
	                 ASESSIONID : -
	        CONCURRENT REQUESTS : 1

	                      db.reads : name=db.reads; inv=35; ms=116; cpu=0; rss=0;
	                      db.conns : name=db.conns; inv=35; ms=120; cpu=0; rss=0;
-->










<fieldset class="hidden parameters">
    <input type="hidden" title="loggedInUser" value="">
    <input type="hidden" title="ajaxTimeout" value="The call to the JIRA server did not complete within the timeout period.  We are unsure of the result of this operation.">
    <input type="hidden" title="JiraVersion" value="5.2.7" />
    <input type="hidden" title="ajaxUnauthorised" value="You are not authorised to perform this operation.  Please log in.">
    <input type="hidden" title="baseURL" value="http://jira.codehaus.org:80">
    <input type="hidden" title="ajaxCommsError" value="The JIRA server could not be contacted.  This may be a temporary glitch or the server may be down.">
    <input type="hidden" title="ajaxServerError" value="The JIRA server was contacted but has returned an error response. We are unsure of the result of this operation.">
    <input type="hidden" title="ajaxErrorCloseDialog" value="Close this dialog and press refresh in your browser">
    <input type="hidden" title="ajaxErrorDialogHeading" value="Communications Breakdown">

    <input type="hidden" title="dirtyMessage" value="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.">
    <input type="hidden" title="dirtyDialogMessage" value="You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog.">
    <input type="hidden" title="keyType" value="Type">
    <input type="hidden" title="keyThen" value="then">
    <input type="hidden" title="dblClickToExpand" value="Double click to expand">
    <input type="hidden" title="actions" value="Actions">
    <input type="hidden" title="removeItem" value="Remove">
    <input type="hidden" title="workflow" value="Workflow">
    <input type="hidden" title="labelNew" value="New Label">
    <input type="hidden" title="issueActionsHint" value="Begin typing for available operations or press down to see all">
    <input type="hidden" title="closelink" value="Close">
    <input type="hidden" title="dotOperations" value="Operations">
    <input type="hidden" title="dotLoading" value="Loading...">
    <input type="hidden" title="frotherSuggestions" value="Suggestions">
    <input type="hidden" title="frotherNomatches" value="No Matches">
    <input type="hidden" title="multiselectVersionsError" value="{0} is not a valid version.">
    <input type="hidden" title="multiselectComponentsError" value="{0} is not a valid component.">
    <input type="hidden" title="multiselectGenericError" value="The value {0} is invalid.">
</fieldset>

    </footer>
</div>
</body>
</html>
