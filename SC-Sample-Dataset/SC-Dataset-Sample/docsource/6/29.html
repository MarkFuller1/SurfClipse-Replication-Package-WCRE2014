


<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=10">
        <title>imageio-jpeg does not handle IIOMetaData  · Issue #4 · haraldk/TwelveMonkeys · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <link rel="logo" type="image/svg" href="https://github-media-downloads.s3.amazonaws.com/github-logo.svg" />
    <meta property="og:image" content="https://github.global.ssl.fastly.net/images/modules/logos_page/Octocat.png">
    <meta name="hostname" content="github-fe126-cp1-prd.iad.github.net">
    <meta name="ruby" content="ruby 1.9.3p194-tcs-github-tcmalloc (e1c0c3f392) [x86_64-linux]">
    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />
    


    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_issues" data-pjax-transient />
    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="80E93F25:2C4E:2B69B28:52AB975D" name="octolytics-dimension-request_id" />
    

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="m14YDsKsT29owIURAdybzmJs4RSqbjEuml5JMTU98+Q=" name="csrf-token" />

    <link href="https://github.global.ssl.fastly.net/assets/github-57e7b076c45ea1a1a64bba5ee473eecb65fe9d7b.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://github.global.ssl.fastly.net/assets/github2-739ae94074bd58ea5f487331d9a79836678e5db7.css" media="all" rel="stylesheet" type="text/css" />
    

    

      <script src="https://github.global.ssl.fastly.net/assets/frameworks-5970f5a0a3dcc441d5f7ff74326ffd59bbe9388e.js" type="text/javascript"></script>
      <script src="https://github.global.ssl.fastly.net/assets/github-44188494b76ae62bb834f936309193eec69b2810.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="673481c1299373d170ad7f3d60ff3fc1">

        <meta property="og:title" content="TwelveMonkeys"/>
  <meta property="og:type" content="githubog:gitrepository"/>
  <meta property="og:url" content="https://github.com/haraldk/TwelveMonkeys"/>
  <meta property="og:image" content="https://github.global.ssl.fastly.net/images/gravatars/gravatar-user-420.png"/>
  <meta property="og:site_name" content="GitHub"/>
  <meta property="og:description" content="I&#39;m currently trying to convert a CMYK jpeg to an RGB one while preserving its meta data. Then i recognized that JPEGImageReader.getImageMetadata(...) method always returns null."/>

  <meta name="description" content="I&#39;m currently trying to convert a CMYK jpeg to an RGB one while preserving its meta data. Then i recognized that JPEGImageReader.getImageMetadata(...) method always returns null." />

  <meta content="110299" name="octolytics-dimension-user_id" /><meta content="haraldk" name="octolytics-dimension-user_login" /><meta content="296658" name="octolytics-dimension-repository_id" /><meta content="haraldk/TwelveMonkeys" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="296658" name="octolytics-dimension-repository_network_root_id" /><meta content="haraldk/TwelveMonkeys" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/haraldk/TwelveMonkeys/commits/master.atom" rel="alternate" title="Recent Commits to TwelveMonkeys:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  env-production  vis-public">
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions">
        <a class="button primary" href="/join">Sign up</a>
      <a class="button signin" href="/login?return_to=%2Fharaldk%2FTwelveMonkeys%2Fissues%2F4">Sign in</a>
    </div>

    <div class="command-bar js-command-bar  in-repository">

      <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
        <li class="features"><a href="/features">Features</a></li>
          <li class="enterprise"><a href="https://enterprise.github.com/">Enterprise</a></li>
          <li class="blog"><a href="/blog">Blog</a></li>
      </ul>
        <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    
      data-repo="haraldk/TwelveMonkeys"
      data-branch="master"
      data-sha="d9c5a544168eff15552975278461b11b519d69b7"
  >

    <input type="hidden" name="nwo" value="haraldk/TwelveMonkeys" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="octicon help tooltipped downwards" title="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>

    <input type="hidden" name="type" value="Issues" />

  <input type="hidden" name="ref" value="cmdform">

</form>
    </div>

  </div>
</div>


      


          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">


  <li>
    <a href="/login?return_to=%2Fharaldk%2FTwelveMonkeys"
    class="minibutton with-count js-toggler-target star-button tooltipped upwards"
    title="You must be signed in to use this feature" rel="nofollow">
    <span class="octicon octicon-star"></span>Star
  </a>

    <a class="social-count js-social-count" href="/haraldk/TwelveMonkeys/stargazers">
      44
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fharaldk%2FTwelveMonkeys"
        class="minibutton with-count js-toggler-target fork-button tooltipped upwards"
        title="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-git-branch"></span>Fork
      </a>
      <a href="/haraldk/TwelveMonkeys/network" class="social-count">
        28
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author">
            <a href="/haraldk" class="url fn" itemprop="url" rel="author"><span itemprop="title">haraldk</span></a>
          </span>
          <span class="repohead-name-divider">/</span>
          <strong><a href="/haraldk/TwelveMonkeys" class="js-current-repository js-repo-home-link">TwelveMonkeys</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">

      <div class="repository-with-sidebar repo-container  ">

        <div class="repository-sidebar">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped leftwards" title="Code">
        <a href="/haraldk/TwelveMonkeys" aria-label="Code" class="js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /haraldk/TwelveMonkeys">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped leftwards" title="Issues">
          <a href="/haraldk/TwelveMonkeys/issues" aria-label="Issues" class="selected js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="i" data-selected-links="repo_issues /haraldk/TwelveMonkeys/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>4</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped leftwards" title="Pull Requests">
        <a href="/haraldk/TwelveMonkeys/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /haraldk/TwelveMonkeys/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>2</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


        <li class="tooltipped leftwards" title="Wiki">
          <a href="/haraldk/TwelveMonkeys/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_wiki /haraldk/TwelveMonkeys/wiki">
            <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>
    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped leftwards" title="Pulse">
        <a href="/haraldk/TwelveMonkeys/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /haraldk/TwelveMonkeys/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" title="Graphs">
        <a href="/haraldk/TwelveMonkeys/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /haraldk/TwelveMonkeys/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" title="Network">
        <a href="/haraldk/TwelveMonkeys/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /haraldk/TwelveMonkeys/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

            <div class="only-with-full-nav">
              

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/haraldk/TwelveMonkeys.git" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/haraldk/TwelveMonkeys.git" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/haraldk/TwelveMonkeys" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/haraldk/TwelveMonkeys" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>,
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="octicon help tooltipped upwards" title="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>



              <a href="/haraldk/TwelveMonkeys/archive/master.zip"
                 class="minibutton sidebar-button"
                 title="Download this repository as a zip file"
                 rel="nofollow">
                <span class="octicon octicon-cloud-download"></span>
                Download ZIP
              </a>
            </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          
<style type="text/css" media="screen">
  
</style>



<div id="issues_next">
  <div class="tabnav tabnav-issues">
    <div class="tabnav-right">
      <div class="tabnav-widget ">
        <a href="/haraldk/TwelveMonkeys/issues/new" class="button minibutton primary bigger js-new-issue-button" data-hotkey="c">New Issue</a>
      </div>
    </div>

    <ul class="tabnav-tabs">
      <li><a href="/haraldk/TwelveMonkeys/issues" class="tabnav-tab selected">Browse Issues</a></li>
      <li><a href="/haraldk/TwelveMonkeys/issues/milestones" class="tabnav-tab ">Milestones</a></li>
    </ul>
  </div>
    <div id="show_issue" class="js-issues-results">

      <div class="issue-head clearfix">
        <span class="back">
          <span class="octicon octicon-arrow-left"></span>
          <a href="/haraldk/TwelveMonkeys/issues" data-hotkey="u" id="to_isssues_list">Back to issue list</a>
        </span>

        <span class="number">
          Issue <strong>#4</strong>
        </span>
      </div><!-- /.issue-head -->

    <div id="discussion_bucket" class="tab-content">
      <div class="discussion-sidebar">
        
<div id="js-discussion-stats"
     class="discussion-stats js-socket-channel js-updatable-content"
     data-channel="haraldk/TwelveMonkeys:issue:14937775"
     data-url="/haraldk/TwelveMonkeys/issues/4/show_partial?partial=discussion_stats">

    <span class="state-indicator closed">
      Closed
    </span>

    <p>
      <strong>37</strong>
      comments
    </p>
</div>


  <hr>
  <div class="discussion-labels">
    <div class="label-manager">
  <strong>Labels</strong>
</div>

<ul class="color-label-list filter-list small">
  
</ul>

  </div>

      </div>

      <div class="discussion-timeline js-quote-selection-container">

        <div class="js-discussion">
            

<div class="discussion-bubble js-comment-container js-task-list-container">
  <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>

  <div class="discussion-bubble-content bubble ">
    <div class="discussion-bubble-inner">
      <div class="js-comment comment discussion-topic starting-comment" id="issue-14937775" data-body-version="29aa1e4145396e140f0d4efd5e629757">

        <div class="discussion-topic-header ">
          <span class="discussion-topic-author"><a href="/marcuslinke">marcuslinke</a> opened this issue <time class="js-relative-date" datetime="2013-05-30T05:24:40-07:00" title="2013-05-30 05:24:40">May 30, 2013</time></span>
            <h2 class="discussion-topic-title js-comment-body-title">imageio-jpeg does not handle IIOMetaData </h2>
        </div> <!-- /.topic-comment-header -->

        <div class="discusion-topic-infobar js-infobar js-form-issues">
          <div class="milestone infobar-widget">
  <span class="text js-milestone-infobar-item-wrapper">
      No milestone

  </span>

</div>

<div class="assignee infobar-widget">
  <span class="css-truncate text js-assignee-infobar-item-wrapper">
      <span class="avatar"><img height="18" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="18" /></span>
      <a href="/haraldk" class="css-truncate-target">haraldk</a> is assigned
  </span>

</div>
        </div> <!-- /.discusion-topic-infobar -->

        <div class="comment-content">

          <div class="edit-comment-hide">
            <div class="js-comment-body comment-body markdown-body markdown-format">
                <p>I'm currently trying to convert a CMYK jpeg to an RGB one while preserving its meta data. Then i recognized that JPEGImageReader.getImageMetadata(...) method always returns null.</p>
            </div>
          </div>

          

        </div> <!-- /.comment-content -->
      </div> <!-- /.comment -->
    </div> <!-- /.discussion-bubble-content -->
  </div> <!-- /.discussion-bubble-inner -->
</div> <!-- /.discussion-bubble -->


            
<div id="js-users-participants" class="js-socket-channel js-updatable-content"
    data-channel="haraldk/TwelveMonkeys:issue:14937775"
      data-url="/haraldk/TwelveMonkeys/issues/4/show_partial?partial=participants"
  >
  <div class="pull-participation">
    <p class="quickstat"><a href="#pr_contributors_box" rel="facebox"><strong>2</strong> participants</a></p>

      <a class="avatar tooltipped downwards" title="marcuslinke" href="/marcuslinke"><img height="24" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="24" /></a>
      <a class="avatar tooltipped downwards" title="haraldk" href="/haraldk"><img height="24" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="24" /></a>
  </div>
</div>

<div id="pr_contributors_box" style="display:none">
  <h2 class="facebox-header">People participating in this issue</h2>
  <ul class="facebox-user-list">
    <li class="facebox-user-list-item">
      <img height="24" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="24" />
      <a href="/marcuslinke">marcuslinke</a>
    </li>
    <li class="facebox-user-list-item">
      <img height="24" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="24" />
      <a href="/haraldk">haraldk</a>
    </li>
  </ul>
</div>



          

  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18679601" class="js-comment comment  js-task-list-container" data-body-version="8e67b5df97c82aa48ebf62c69fcffcc2">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18679601" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18679601">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18679601" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-30T06:23:57-07:00" title="2013-05-30 06:23:57">May 30, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Marcus,</p>

<p>You are right, and I'm aware of the issue. :-(</p>

<p>I have a quick fix in the local branch, where the methods are overridden to just call <code>delegate.getXxMetadata()</code> instead of <code>super.getXxMetadata()</code> which always return null. </p>

<p>Unfortunately, the metadata from the delegate isn't necessary correct (ie: it never contains a APP2/ICC_PROFILE), because I filter out certain JPEG segments from the delegate, to prevent it from crashing. Now, this is probably OK for you, as you won't need the original CMYK color profile in the converted RGB image. But it's still an issue that I feel should be resolved, and relying on this "feature" might break things in the future.</p>

<p>I do have a couple of ideas for how to fix the issue, but they are all quite time consuming, as the <code>com.sun.imageio.plugins.jpeg.JPEGMetadata</code> isn't extendable or mutable... So I need to recreate it all from scratch + extend it with the fixes that the new reader brings along. In addition, we probably want support for the EXIF flavor (in contrast to JFIF) that the current metadata just ignores.</p>

<p>A rough guesstimate would be a full weeks worth of work, just for the basics.</p>

<p>So... How badly do you need metadata? ;-)</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18683329" class="js-comment comment  js-task-list-container" data-body-version="3b88f3927a402be540c2bc6d4d43eb53">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18683329" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18683329">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18683329" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-30T07:24:45-07:00" title="2013-05-30 07:24:45">May 30, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Harald,</p>

<p>thanks for explanation. I'm not sure if I need the metadata but hey...maybe my employer will! ;-) </p>

<p>Sadly your advice to call the delegate does not work:</p>

<p>javax.imageio.IIOException: Inconsistent metadata read from stream<br>
    at com.sun.imageio.plugins.jpeg.JPEGMetadata.(JPEGMetadata.java:343)<br>
    at com.sun.imageio.plugins.jpeg.JPEGImageReader.getImageMetadata(JPEGImageReader.java:998)</p>

<p>However, i'm not very familar with all this image/metadata stuff, but wouldn't it be better to not rely on that delegate with all the filtering stuff needed? What about to implement the fixed logic directly (by copying most of the OpenJDK implementation for example). Is it that what you have in mind? At least this is it what i would try to do if my employer insists this functionality. Maybe thats some kind naive and/or violates some licence terms.  WDYT?</p>

<p>Regards</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18688040" class="js-comment comment  js-task-list-container" data-body-version="49f7dcbd69e056d5ecd51c779612770a">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18688040" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18688040">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18688040" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-30T08:30:52-07:00" title="2013-05-30 08:30:52">May 30, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Too bad, we're out of luck for a quick fix then... (these exceptions are part of the reason I created the reader in the first place).</p>

<p>I agree, the best thing is not to rely on the delegate, and that is my goal. However, the metadata code for the JPEG format alone is about 4000+ lines, and requires quite extensive knowledge of the JPEG/JFIF format. The OpenJDK code is LGPL licensed, and I can't use it, but I have thought about looking at the code from JAI (jai-imageio), which is BSD licensed and thus more compatible (license-wise). That code should provide compatible metadata.</p>

<p>It's still several days work I'm afraid, just to shoe-horn one of these implementations onto my reader...</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18728634" class="js-comment comment  js-task-list-container" data-body-version="8adac3c632d44f13fea8aa83ff0104ac">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18728634" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18728634">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18728634" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-31T00:33:06-07:00" title="2013-05-31 00:33:06">May 31, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Yeah, i agree. It will be much work to implement it. After consulting my employer we decided to renounce the meta data functionality as we can live without it at the moment. However, could you shortly explain the licence compatibility issue with LGPL code? I did not found any licence terms in your code.</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18732378" class="js-comment comment  js-task-list-container" data-body-version="6d8163636ea05010fb4be3c8256f0727">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18732378" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18732378">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18732378" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-31T01:31:45-07:00" title="2013-05-31 01:31:45">May 31, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>The project may be distributed under <a href="http://opensource.org/licenses/BSD-3-Clause">BSD license</a>, every source file should include the license in the header. Most modules have a license.txt in them as well.</p>

<p>I'm not a lawyer, but from my understanding of the (L)GPL license, is that if I add parts from (L)GPL licensed projects (in contrast to just dynamic linking), my project has to become (L)GPL licensed as well. So, I try to avoid that, just in case.</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18733575" class="js-comment comment  js-task-list-container" data-body-version="c940391be82884b21588ef233fb5c019">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18733575" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18733575">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18733575" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-31T01:56:38-07:00" title="2013-05-31 01:56:38">May 31, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hmmm. So i should have searched for 'license' and not 'licence' :) Thanks for clearing this up! </p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18733737" class="js-comment comment  js-task-list-container" data-body-version="47e66f88e66a0d45de65d66218b2cb45">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18733737" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18733737">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18733737" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-31T02:00:23-07:00" title="2013-05-31 02:00:23">May 31, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>While the research regarding the meta data topic i found</p>

<p><a href="https://github.com/cescoffier/Commons-Image-IO">https://github.com/cescoffier/Commons-Image-IO</a></p>

<p>Would it be an option to handle the metadata stuff via Apache commons-imaging?</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-18734821" class="js-comment comment  js-task-list-container" data-body-version="8b7c2122b6ed36e4a1795cf67e739289">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-18734821" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-18734821">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-18734821" class="comment-header-date"><time class="js-relative-date" datetime="2013-05-31T02:28:03-07:00" title="2013-05-31 02:28:03">May 31, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hmmm.. Re. license: I wasn't even aware there were alternative spellings.. But yes, I use american english. ;-)</p>

<p>The twelvemonkeys library has decent support for reading (not writing at the moment) EXIF, IPTC, and XMP metadata (see the <code>com.twelvemonkeys.imageio.medata</code> package). </p>

<p>Commons Image IO seems to have a nice API, but my guess is, it relies on ImageIO for the metadata, so you'll have the same problem with "Inconsistent metadata". Apache commons-imaging might help. I have no experience with either of these libraries though.</p>

<p>Might be worth giving it a try!</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  
    <div class="discussion-bubble discussion-reference js-comment-container">
      <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
      <div class="discussion-bubble-content bubble">
        <div class="discussion-bubble-inner">
          <div class="js-comment comment issue-ref-comment" id="ref-issue-15478600">

            <div class="comment-header">
              <a href="#ref-issue-15478600"><span class="comment-type-icon octicon octicon-move-left"></span></a>
              <a href="/haraldk" class="comment-header-author" truncate="true">haraldk</a>
              <span class='comment-header-action-text'>
                <a href='#ref-issue-15478600'>
                  referenced
                  this issue
                </a>
              </span>

              <span class="comment-header-right">
                <a href="#ref-issue-15478600" class="comment-header-date"><time class="js-relative-date" datetime="2013-06-13T00:37:34-07:00" title="2013-06-13 00:37:34">June 13, 2013</time></a>
              </span>
            </div> <!-- /.comment-header -->

            <div class="comment-content discussion-reference-content">
              <div class="comment-body">
                  <strong class="state state-closed">
                    Closed
                  </strong>
                <h2>
                  <a href="/haraldk/TwelveMonkeys/issues/7">
                    <span>Issue #7:</span>
                    NPE in JPEGImageReader.getImageMetadata()
</a>                </h2>
                
              </div>
            </div> <!-- /.comment-content -->
          </div> <!-- ./comment -->
        </div>
      </div>
    </div><!-- /.discussion-bubble -->

  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-25295852" class="js-comment comment  js-task-list-container" data-body-version="c3ea6af6fcc8019d1c9f0ac174bc9465">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-25295852" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-25295852">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-25295852" class="comment-header-date"><time class="js-relative-date" datetime="2013-09-28T03:40:41-07:00" title="2013-09-28 03:40:41">September 28, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Marcus!</p>

<p>Good news! :-) <br>
I think I "accidentally" found a way to fix this issue, without having to re-invent all of the metadata-classes, as part of another issue I was working on. Do you have some more sample images that throws the "inconsistent metadata" exception you could add to this issue? Preferably not too large in size, but I'll take what you've got. :-)</p>

<p>This way, I can create a more robust test case/regression test, and get rid of this bug, hopefully.</p>

<p>Thanks for all your input so far!</p>

<p>Regards,</p>

<h2></h2>

<p>Harald K</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26035927" class="js-comment comment  js-task-list-container" data-body-version="be2c680d4052320bb3acd68ddc33657c">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26035927" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26035927">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26035927" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-10T01:14:30-07:00" title="2013-10-10 01:14:30">October 10, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Harald,</p>

<p>sorry for the late answer but i was really busy last days... I will continue the work on the mentioned CMYK -&gt; RGB topic soon. I have a bunch of CMYK test/example images here and probably i will find some proper images  for the regression test then. So stay patient with me for 2-3 weeks please. However, have you already committed the fix or do you have it in a local branch only?</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26036342" class="js-comment comment  js-task-list-container" data-body-version="0a8f71fb2990abc01cb39be182396e8d">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26036342" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26036342">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26036342" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-10T01:22:36-07:00" title="2013-10-10 01:22:36">October 10, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>No stress! :-)</p>

<p>I checked in a small part of it, but I have much more comprehensive changes in the local branch. Unfortunately, I got stuck on some bugs in the com.sun...metadata classes when I started more heavy testing, but I might work them out. It's annoying, because if not, I'd have a solution by now... In any case, more test cases can only be good.</p>

<p>Regards,</p>

<h2></h2>

<p>Harald K</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26911260" class="js-comment comment  js-task-list-container" data-body-version="c8fa1f8c38da5a957a2e8fb297e42c0f">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26911260" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26911260">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26911260" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-23T07:50:38-07:00" title="2013-10-23 07:50:38">October 23, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Marcus,</p>

<p>Update: I now checked in the fix I was working on, please give it a try.</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26972102" class="js-comment comment  js-task-list-container" data-body-version="aaacd7ad952da5c34b38226d646df981">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26972102" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26972102">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26972102" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T00:38:39-07:00" title="2013-10-24 00:38:39">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Harald,</p>

<p>i checked out your latest changes and tested it with the attached image. Unfortunately the known</p>

<p>javax.imageio.IIOException: Inconsistent metadata read from stream</p>

<p>is thrown then.</p>

<p><a href="https://f.cloud.github.com/assets/2578608/1396986/646e333a-3c7b-11e3-97bd-597d4ac3c511.jpg" target="_blank"><img src="https://f.cloud.github.com/assets/2578608/1396986/646e333a-3c7b-11e3-97bd-597d4ac3c511.jpg" alt="bb286f0f-3b9aca00-2-luk_cvt_kette_und_gleitschiene_0001a5af_pra_4c_de_de" style="max-width:100%;"></a></p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26972415" class="js-comment comment  js-task-list-container" data-body-version="ff6719425f4d5d327ec019a10326d87b">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26972415" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26972415">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26972415" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T00:44:14-07:00" title="2013-10-24 00:44:14">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>...while another image's metadata can be read. But when i try to write metadata back to a file via:</p>

<p>writer.write(null, new IIOImage(image, null, metadata),writer.getDefaultWriteParam());</p>

<p>i get</p>

<p>javax.imageio.IIOException: Metadata components != number of destination bands<br>
    at com.sun.imageio.plugins.jpeg.JPEGImageWriter.checkSOFBands(JPEGImageWriter.java:1324)<br>
    at com.sun.imageio.plugins.jpeg.JPEGImageWriter.writeOnThread(JPEGImageWriter.java:695)<br>
    at com.sun.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:340)<br>
    at com.twelvemonkeys.imageio.plugins.jpeg.JPEGImageWriter.write(JPEGImageWriter.java:155)</p>

<p>Any idea? </p>

<p><a href="https://f.cloud.github.com/assets/2578608/1397131/a9de0b8a-3c7f-11e3-95b7-55094084114d.jpg" target="_blank"><img src="https://f.cloud.github.com/assets/2578608/1397131/a9de0b8a-3c7f-11e3-95b7-55094084114d.jpg" alt="sabinespitz_dhu_pr_02" style="max-width:100%;"></a></p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26974888" class="js-comment comment  js-task-list-container" data-body-version="97abee92028cf00df6365eb9bd364aad">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26974888" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26974888">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26974888" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T01:34:38-07:00" title="2013-10-24 01:34:38">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Thanks for giving it a try! </p>

<p>Really appreciate the feedback. Close but no cigar, it seems then.. :-(</p>

<p>I'll try to create some test cases from your attached images, and see if I can figure it out. Will report back when I have some progress!</p>

<h2></h2>

<p>Harald K</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26979020" class="js-comment comment  js-task-list-container" data-body-version="2ed27cde8c4f8c6bc3d2bdfc8988bfe2">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26979020" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26979020">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26979020" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T02:44:48-07:00" title="2013-10-24 02:44:48">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>I have to thank you Harald. I'm looking forward for a working solution.. ;) Having some other images here for both cases but they are rather big. But if you need more test files i will post it here...</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26981879" class="js-comment comment  js-task-list-container" data-body-version="9701d30096e9db1f7dcdd94019498a7f">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26981879" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26981879">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26981879" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T03:36:36-07:00" title="2013-10-24 03:36:36">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">I'm sure we'll get a working solution one day... ;-)

I'm not able to reproduce the "inconsistent metadata" issue for your first image, so I'm not sure how we should proceed there. I've tested both Apple's Java 1.6 and Oracle's 7 on OS X (Mountain Lion and Mavericks), and no issues. What Java version/vendor do you use, and what platform?

If you have some more images, especially for the "inconsistent metadata" issue, maybe you can email them to me directly (or share a zip via dropbox or similar)?

For the second issue I might have to do some work on the JPEGImageWriter as well, to handle writing of the metadata. The problem is that the image is converted from CMYK to RGB by default, but the metadata still contains SOF, SOS, Adobe DCT, ICC profile etc for CMYK data... I was hoping the writer would just see that these values were no longer correct, thus ignoring them.

It IS possible to read CMYK images as CMYK (without conversion), you could try that as a workaround (using ImageReader.getImageTypes and ImageReadParam.setDestination/setDestinationType).</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26984832" class="js-comment comment  js-task-list-container" data-body-version="1363dcb876293f3180e1ac0d9b9d2a25">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26984832" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26984832">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26984832" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T04:34:30-07:00" title="2013-10-24 04:34:30">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>The first image fails with latest 1.6.0_51 from Apple under Mountain Lion here. Don't know why this is not reproducable. Could you post your test code to see if there are any differences regarding our test conditions?</p>

<p>Beside this here are a few CMYK test images: <a href="https://www.dropbox.com/sh/avsx712khejcbyh/PwYm3cLDiK">https://www.dropbox.com/sh/avsx712khejcbyh/PwYm3cLDiK</a></p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-26985625" class="js-comment comment  js-task-list-container" data-body-version="aa4455cc579ec879759d5ffab61fe8de">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-26985625" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-26985625">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-26985625" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-24T04:49:43-07:00" title="2013-10-24 04:49:43">October 24, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Great,

Thanks I've downloaded them.

I'm for some reason still using 1.6.0_33, could be some changes there... Downloading the latest 1.6.0_65 now, hoping it will expose the problem. Will try it out tonight. :-)</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
<div class="email-quoted-reply">On 24. okt. 2013, at 13:34, marcuslinke &lt;notifications@github.com&gt; wrote:
 The first image fails with latest 1.6.0_51 from Apple under Mountain Lion here. Don't know why this is not reproducable. Could you post your test code to see if there are any differences regarding our test conditions?

 Beside this here are a few CMYK test images: <a href="https://www.dropbox.com/sh/avsx712khejcbyh/PwYm3cLDiK">https://www.dropbox.com/sh/avsx712khejcbyh/PwYm3cLDiK</a>

 —
 Reply to this email directly or view it on GitHub.
</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27072433" class="js-comment comment  js-task-list-container" data-body-version="fdc0082b09f86556e854dc5612f649a7">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27072433" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27072433">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27072433" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T01:08:57-07:00" title="2013-10-25 01:08:57">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Hi Harald,</p>

<p>just working on the CMYK -&gt; RGB conversion topic and one question raised up. How could i detect that the source JPEG was CMYK encoded? Is there any possibility to check this? </p>

<p>Regards</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27074231" class="js-comment comment  js-task-list-container" data-body-version="17afbc7256e1d7d79ebcc09157731196">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27074231" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27074231">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27074231" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T01:42:45-07:00" title="2013-10-25 01:42:45">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Hi Marcus,

Good question! ;-)

The idea is that the metadata should be able to tell you this. Unfortunately, the algorithm (heuristic) for detecting it is somewhat complicated. The basics are described here <a href="http://docs.oracle.com/javase/6/docs/api/javax/imageio/metadata/doc-files/jpeg_metadata.html#color">http://docs.oracle.com/javase/6/docs/api/javax/imageio/metadata/doc-files/jpeg_metadata.html#color</a>, but not all JPEGs are conforming to this (the "inconsistent metadata" issue, others are just malformed or contain garbage data that confuses the IJG library), further complicating matters.

Normally, the source color space can be derived from `ImageReader.getRawImageType`. However, there's no Java color space matching YCbCr or YCCK, and the documentation (same link as above) says we should return `null` in these cases.

I suggest you have a look at `JPEGImageReader.getSourceCSType`, which is what the reader itself uses to determine source color space. Maybe it could make sense to expose this functionality (or something similar) as a utility method?


Regards,</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
<div class="email-quoted-reply">On 25. okt. 2013, at 10:08, marcuslinke &lt;notifications@github.com&gt; wrote:
 Hi Harald,

 just working on the CMYK -&gt; RGB conversion topic and one question raised up. How could i detect that the source JPEG was CMYK encoded? Is there any possibility to check this?

 Regards

 —
 Reply to this email directly or view it on GitHub.
</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27076268" class="js-comment comment  js-task-list-container" data-body-version="0fe7cb3101cf28becf52f4bd1205a5b7">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27076268" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27076268">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27076268" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T02:19:51-07:00" title="2013-10-25 02:19:51">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Thanks for the detailed explanation. What a mess... things get even more complicated than i thought ;) So it would be really cool to have that functionality as a utility method. For me at the moment it seems enough to detect whether the source image is RGB and otherwise load and save as such. But maybe requirements changes sometimes...</p>

<p>Regards</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27079603" class="js-comment comment  js-task-list-container" data-body-version="8e462b63abcbbc43316241844eab89b2">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27079603" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27079603">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27079603" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T03:22:20-07:00" title="2013-10-25 03:22:20">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Regarding the non-reproducable "javax.imageio.IIOException: Inconsistent metadata read from stream" while processing of the first image: I just found that i used accidentally an old version of TwelveMonkeys lib for the tests. So with the latest 3.0-SNAPSHOT it works as expected. No Exception at all then... Sorry for confusing you!</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27080701" class="js-comment comment  js-task-list-container" data-body-version="97e1041815f324b07865eb127cfbd829">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27080701" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27080701">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27080701" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T03:37:26-07:00" title="2013-10-25 03:37:26">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">All right!

Thanks for reporting back. I'm not spending more time on that issue then. The main focus is to make the writer accept the metadata it receives, and possibly adapt it to the current image data.

BTW: How to you read your images? Using readAll() or reading the image and metadata separately?</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27084911" class="js-comment comment  js-task-list-container" data-body-version="b395723db31c832c0be01bfd23ecec38">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27084911" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27084911">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27084911" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T05:04:12-07:00" title="2013-10-25 05:04:12">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Looking at your <code>ImageReader.getRawImageType</code> implementation i see that the method mostly returns null in case the delegate returns null. The only exception is made when CMYK is detected via metadata. Is this the expected behavior?<br>
I mean if metadata says its RGB it returns null nevertheless.</p>

<p>...and back to your question: I read the images using read() method and get the metadata separately. </p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27087632" class="js-comment comment  js-task-list-container" data-body-version="7ef3ead1cfbff41682994230ed4c4de9">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27087632" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27087632">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27087632" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T05:41:37-07:00" title="2013-10-25 05:41:37">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Hmmm..

Yes, it's intentional. The delegate will return null if the image is encoded in YCbCr  (which does not have a corresponding Java ColorSpace), OR if it's in a color space the delegate does not support (like CMYK). So my idea, is to keep this behavior, with the exception that the reader now supports CMYK and YCCK. There's no color space for YCCK, so I return null (analogous to YCbCr). I have a color space for CMYK, so I can return that. Makes sense? :-)

Ok, thanks. I was just considering if it would make sense to make sure the image/metadata from readAll would correspond to each other. But it won't matter then. The only thing that makes sense I think, is leaving it to the Writer to figure it out. Any metadata that doesn't match the input image, should be updated to reflect the current image/write param (and generate warnings, not exceptions). Does that make sense?</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
<div class="email-quoted-reply">On 25. okt. 2013, at 14:04, marcuslinke &lt;notifications@github.com&gt; wrote:
 Looking at your ImageReader.getRawImageType implementation i see that the method mostly returns null in case the delegate returns null. The only exception is made when CMYK is detected via metadata. Is this the expected behavior?

 ...and back to your question: I read the images using read() method and get the metadata separately.

 —
 Reply to this email directly or view it on GitHub.
</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27087998" class="js-comment comment  js-task-list-container" data-body-version="2c83d3f8d5333b4f0c47b15c88df052f">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27087998" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27087998">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27087998" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T05:45:45-07:00" title="2013-10-25 05:45:45">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Sounds good! However I checked approx. 1800 JPEGs with the <code>ImageReader.getRawImageType</code> method and in 1700 cases the method returns null. This seems strange to me. The test images are uploaded by our customers over the last 6 months. So RGB JPEGs are rare cases?</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27088762" class="js-comment comment  js-task-list-container" data-body-version="d6e004338245cb479fe9e6067a671bae">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27088762" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27088762">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27088762" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T05:53:53-07:00" title="2013-10-25 05:53:53">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Yes,

RGB JPEGs are rather rare (If you find one, please send it over :-) ). I'd guess 90+ % of all JPEGs are YCbCr encoded (note that JFIF only supports YCbCr and Gray). The conversion to/from RGB is mostly perfect and subsampling in YCbCr space gives a lot better visual results.</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
<div class="email-quoted-reply">On 25. okt. 2013, at 14:45, marcuslinke &lt;notifications@github.com&gt; wrote:
 Sounds good! However I checked approx. 1800 JPEGs with the ImageReader.getRawImageType method and in 1700 cases the method returns null. This seems strange to me. The test images are uploaded by our customers over the last 6 month. So RGB JPEGs are rare cases?

 —
 Reply to this email directly or view it on GitHub.
</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27091174" class="js-comment comment  js-task-list-container" data-body-version="2e27c7296ba49b7190f73f305350c725">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27091174" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27091174">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27091174" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T06:18:26-07:00" title="2013-10-25 06:18:26">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>OK. Thanks. So i'm fucked ATM... ;-) Need to think about it. The only solution for me seems to extract  <code>ImageReader.getSourceCSType</code> as utility method... However, have a nice weekend!</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27092464" class="js-comment comment  js-task-list-container" data-body-version="f60b9a743d0a484645f036431751e2b3">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27092464" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27092464">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27092464" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T06:33:51-07:00" title="2013-10-25 06:33:51">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Hmm..

Just got an idea. If this is your lucky day, have a look at the ColroSpaceType of the Chroma node int the standard metadata format ("javax_imageio_1.0"/IIOMetadataFormatImpl.standardMetadataFormatName). It seems to report the correct color space type (as a string, but anyway). :-)

Didn't think of it before, and it seems almost too easy.. ;-)

Have a nice weekend!</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
<div class="email-quoted-reply">On 25. okt. 2013, at 15:18, marcuslinke &lt;notifications@github.com&gt; wrote:
 OK. Thanks. So i'm fucked ATM... ;-) Need to think about it. The only solution for me seems to extract the ImageReader.getSourceCSType as utility method... However have a nice weekend!

 —
 Reply to this email directly or view it on GitHub.
</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27094595" class="js-comment comment  js-task-list-container" data-body-version="c47b4972836fd9f94b29bafc379e326f">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27094595" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27094595">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27094595" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T06:59:02-07:00" title="2013-10-25 06:59:02">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Good news: A quick test shows that the Chroma node is correct most of the time. :-)</p>

<p>It sometimes reports RGB for YCbCr, but I guess that's less of a problem, as the image will be decoded to RGB in both cases.</p>

<p>I also found that <code>getSourceCSType</code> reports wrong in a few cases where the Adobe transform segment is present (but the transform doesn't match the number of color components in the SOF, ie. YCCK but only 3 components). I'll fix that at some point. Chroma node was right in this case (but I think that was coincidence).</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27095732" class="js-comment comment  js-task-list-container" data-body-version="b033b9dd88145cb77694bdd1ceed7e55">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27095732" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27095732">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27095732" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T07:15:36-07:00" title="2013-10-25 07:15:36">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Yeah but parsing <code>Chroma</code>node sometimes throws:</p>

<p>javax.imageio.metadata.IIOInvalidTreeException: Xdensity attribute out of range<br>
    at com.sun.imageio.plugins.jpeg.MarkerSegment.getAttributeValue(MarkerSegment.java:141)<br>
    at com.sun.imageio.plugins.jpeg.JFIFMarkerSegment.updateFromNativeNode(JFIFMarkerSegment.java:248)<br>
    at com.sun.imageio.plugins.jpeg.JFIFMarkerSegment.(JFIFMarkerSegment.java:133)<br>
    at com.sun.imageio.plugins.jpeg.JPEGMetadata.setFromNativeTree(JPEGMetadata.java:2184)<br>
    at com.sun.imageio.plugins.jpeg.JPEGMetadata.setFromTree(JPEGMetadata.java:2149)<br>
    at com.twelvemonkeys.imageio.plugins.jpeg.JPEGImage10MetadataCleaner.cleanMetadata(JPEGImage10MetadataCleaner.java:259)<br>
    at com.twelvemonkeys.imageio.plugins.jpeg.JPEGImageReader.getImageMetadata(JPEGImageReader.java:1043) </p>

<p>So for now i will use <code>getSourceCSType</code>method probably. Therefore I switched it to <code>public</code> so i can use it. Would it be possible to merge that into master? WDYT? </p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27096329" class="js-comment comment  js-task-list-container" data-body-version="01d09ccf8ed9424099c4d7eb628fd5e5">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27096329" class="comment-type-icon octicon octicon-mail-read tooltipped downwards" title="This comment left via email reply."></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27096329">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27096329" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T07:23:40-07:00" title="2013-10-25 07:23:40">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body email-format">
                  <div class="email-fragment">Hmm.. I just ran through my extended test case with 200+ bad (and some good) images, and all of them happily reported chroma without exception... Do you have a test image for me (and possibly show the code, the stack trace looks odd)? :-)

Feel free to use getSourceCSType as a workaround for now, but I really don't want to make it public. I'd rather fix the metadata and stick to the standard interface.</div>
<span class="email-hidden-toggle"><a href="#">&#8230;</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-signature-reply">-- 
Harald K</div>
</div>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27097240" class="js-comment comment  js-task-list-container" data-body-version="666b6e0c14d9881fad45832451c92d63">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27097240" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27097240">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27097240" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T07:34:51-07:00" title="2013-10-25 07:34:51">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>OK. So refactor method  <code>getSourceCSType</code> out of <code>JPEGImageReader</code>would be an option for master? Anyhow here is one test image as requested.</p>

<p><a href="https://f.cloud.github.com/assets/2578608/1408471/89f73be4-3d82-11e3-8e79-7ac81c994e53.jpeg" target="_blank"><img src="https://f.cloud.github.com/assets/2578608/1408471/89f73be4-3d82-11e3-8e79-7ac81c994e53.jpeg" alt="obs2_100" style="max-width:100%;"></a></p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27100354" class="js-comment comment  js-task-list-container" data-body-version="7050fc06dcc26cff10c227ba797806f0">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27100354" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27100354">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27100354" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T08:12:38-07:00" title="2013-10-25 08:12:38">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Progress: Just pushed a fix for the X density out of range issue. Your sample image reads fine now. It was unrelated to the Chroma node reading. It's just another example on how to break the JFIF spec.. <em>sigh</em></p>

<p>I'm still cheering for the Chroma node. And no, I don't want the <code>getSourceCSType</code> public in master. Sorry. :-)</p>

<p>.k</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  <div class="discussion-bubble js-comment-container">
    <a href="/marcuslinke"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/97df1dbf67014fdc055b5daf57d04505?d=https%3A%2F%2Fidenticons.github.com%2F9581cf6de3b3d4848b180fb0d767fc68.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27119633" class="js-comment comment  js-task-list-container" data-body-version="d891c409e1a69c09ac7b644dd251511d">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27119633" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/marcuslinke" class="comment-header-author">marcuslinke</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27119633">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27119633" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-25T12:35:28-07:00" title="2013-10-25 12:35:28">October 25, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Great! Now that i can use the metadata approach there is no need for making <code>getSourceCSType</code> public anymore. Thanks for your effort and have a nice weekend!</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->
  




    <div class="action-bubble action-bubble-closed">
      <span class="action">
        <span class="state-indicator closed">Closed</span>
      </span>
      <div class="bubble">
          <p>
            <strong><span class="avatar"><img height="24" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="24" /></span>
              <a href="/haraldk">haraldk</a></strong>
            closed the issue
            
            <time class="js-relative-date" datetime="2013-10-30T03:21:26-07:00" title="2013-10-30 03:21:26">October 30, 2013</time>
          </p>
      </div><!-- /.bubble -->
    </div><!-- /.action-bubble -->


    <div class="closed-banner"></div>

  <div class="discussion-bubble js-comment-container">
    <a href="/haraldk"><img class="discussion-bubble-avatar" height="48" src="https://2.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?d=https%3A%2F%2Fidenticons.github.com%2Fd41014ec55cd1391e2e0a3634879f7ef.png&amp;r=x&amp;s=140" width="48" /></a>
    <div class="discussion-bubble-content bubble">
      <div class="discussion-bubble-inner">
        

        <div id="issuecomment-27377960" class="js-comment comment  js-task-list-container" data-body-version="d0f4760c2040f80544372db7f0ce1e23">
          <div class="comment-header -comment-header">
              <a href="#issuecomment-27377960" class="comment-type-icon octicon octicon-comment" title=""></a>
            <a href="/haraldk" class="comment-header-author">haraldk</a>
            <span class='comment-header-action-text'>
              <a href="#issuecomment-27377960">
              commented
              </a>
            </span>

            <span class="comment-header-right">
                <a href="#issuecomment-27377960" class="comment-header-date"><time class="js-relative-date" datetime="2013-10-30T03:21:26-07:00" title="2013-10-30 03:21:26">October 30, 2013</time></a>
            </span>
          </div> <!-- /.comment-header -->

          <div class="comment-content">

            <div class="edit-comment-hide">
              <div class="js-comment-body comment-body markdown-body markdown-format">
                  <p>Cool,</p>

<p>I'd like to close this issue for now, if you don't mind? And if you discover more problems, maybe file new issues with more specific details?</p>

<p>Regards,</p>

<h2></h2>

<p>Harald K</p>
              </div>
            </div>
          </div> <!-- /.comment-content -->
        </div> <!-- /.comment -->


      </div>
    </div>
  </div><!-- /.discussion-bubble -->



<!-- Rendered timeline since 2013-10-30 03:21:26 -->
<div id="js-timeline-marker"
      class="js-socket-channel js-updatable-content"
      data-channel="haraldk/TwelveMonkeys:issue:14937775"
      data-url="/haraldk/TwelveMonkeys/issues/4/show_partial?partial=timeline_marker&amp;since=1383128486"
      data-last-modified="Wed, 30 Oct 2013 10:21:26 GMT">
</div>



        </div>

          <div class="signed-out-comment">
	<a href="/join" class="minibutton btn-default green" rel="nofollow">Sign up for free</a>
	<strong>to join this conversation on GitHub</strong>.
	Already have an account?
	<a href="/login?return_to=%2Fharaldk%2FTwelveMonkeys%2Fissues%2F4" rel="nofollow">Sign in to comment</a>
</div>


        

      </div><!-- /.discussion-timeline -->

    </div><!-- /#discussion_bucket -->
    <div class="clear"></div>
  </div>

</div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2013 <span title="0.08207s from github-fe126-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
          <div class="suggester-container">
              <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                 data-url="/haraldk/TwelveMonkeys/suggestions/commit">
              </div>
          </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" title="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      title="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-remove-close close ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  </body>
</html>

