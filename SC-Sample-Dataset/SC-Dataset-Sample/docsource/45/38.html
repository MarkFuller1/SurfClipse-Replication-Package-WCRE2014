<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Re: problem in generating stub on https</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>axis-java-user mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/axis-java-user" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/axis-java-user/200806.mbox/%3c60708f4b0806212153v4e27ad02k5286669bff7eb017@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/axis-java-user/200806.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/axis-java-user/200806.mbox/%3c60708f4b0806212222q22f3ca87wed3a6445601fc51@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/axis-java-user/200806.mbox/%3cb72c94b30806200439i14c59013o74aa2285df6cc9fb@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/axis-java-user/200806.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/axis-java-user/200806.mbox/%3cb15f5be20806220432q501a2475lc22a3a9994e8cae1@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/axis-java-user/200806.mbox/%3c60708f4b0806212153v4e27ad02k5286669bff7eb017@mail.gmail.com%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/axis-java-user/200806.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/axis-java-user/200806.mbox/%3c60708f4b0806212222q22f3ca87wed3a6445601fc51@mail.gmail.com%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/axis-java-user/200806.mbox/%3cb72c94b30806200439i14c59013o74aa2285df6cc9fb@mail.gmail.com%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/axis-java-user/200806.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/axis-java-user/200806.mbox/%3cb15f5be20806220432q501a2475lc22a3a9994e8cae1@mail.gmail.com%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">&quot;Amila Suriarachchi&quot; &lt;amilasuriarach...@gmail.com&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">Re: problem in generating stub on https</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Sun, 22 Jun 2008 05:00:11 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>
On Fri, Jun 20, 2008 at 4:59 PM, Rafaqat Ali &lt;smoken0@gmail.com&gt; wrote:

&gt; I was using http before but when tried to run client, I was getting
&gt; Exception
&gt; Exception in thread "main" org.apache.axis2.AxisFault: SOAP message MUST
&gt; NOT contain a Document Type Declaration(DTD)


Do you know how actual  service is implemented. I mean the framwork that
service uses.
Axis2 Soap messages send the Document type declaration which is wrong
according to the SOAP spec. But even .Net does not check for this.

Amila.

&gt;
&gt;         at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
&gt;         at
&gt; org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:90)
&gt;         at
&gt; org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:353)
&gt;         at
&gt; org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:416)
&gt;         at
&gt; org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228)
&gt;         at
&gt; org.apache.axis2.client.OperationClient.execute(OperationClient.java:163)
&gt;         at pk.ingen.wstest.client.GreetingServiceStub.greeting(Unknown
&gt; Source)
&gt;         at pk.ingen.wstest.client.GreetingServiceCGClient.main(Unknown
&gt; Source)
&gt; Caused by: org.apache.axiom.om.OMException: SOAP message MUST NOT contain a
&gt; Document Type Declaration(DTD)
&gt;         at
&gt; org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.createDTD(StAXSOAPModelBuilder.java:407)
&gt;         at
&gt; org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:226)
&gt;         at
&gt; org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:156)
&gt;         at
&gt; org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.&lt;init&gt;(StAXSOAPModelBuilder.java:105)
&gt;         at
&gt; org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:677)
&gt;         at
&gt; org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:182)
&gt;         at
&gt; org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:112)
&gt;         at
&gt; org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:88)
&gt;         ... 6 more
&gt;
&gt;
&gt; So I tried to generate stub from https.
&gt; And stubs generated from http are giving this exception, coninuesly.
&gt;
&gt; --RAFI
&gt;
&gt;
&gt; On Fri, Jun 20, 2008 at 5:21 PM, Charitha Kankanamge &lt;charitha@wso2.com&gt;
&gt; wrote:
&gt;
&gt;&gt; Hi Rafaqat,
&gt;&gt; Try to generate the stub as follows. Please use http port instead of https
&gt;&gt; one.
&gt;&gt; $AXIS2_HOME//bin/wsdl2java.sh -uri
&gt;&gt; http://localhost:8080/axis2/services/GreetingService?wsdl &lt;
&gt;&gt; https://localhost:8443/axis2/services/GreetingService?wsdl&gt; -p
&gt;&gt; test.wstest.client -uw  -o
&gt;&gt;
&gt;&gt; regards
&gt;&gt; Charitha
&gt;&gt;
&gt;&gt;
&gt;&gt; Rafaqat Ali wrote:
&gt;&gt;
&gt;&gt;  Hi,
&gt;&gt;&gt;  I am trying to generate stub using $AXIS2_HOME/bin/bin/wsdl2java.sh from
&gt;&gt;&gt; https://localhost:8443/axis2/services/SomeService?wsdl
&gt;&gt;&gt; following instruction from
&gt;&gt;&gt; http://article.gmane.org/gmane.comp.apache.webservices.axis.user/58499*
&gt;&gt;&gt; *
&gt;&gt;&gt; Now when I try to generate stub using command
&gt;&gt;&gt; $AXIS2_HOME//bin/wsdl2java.sh -uri
&gt;&gt;&gt; https://localhost:8443/axis2/services/GreetingService?wsdl -p
&gt;&gt;&gt; test.wstest.client -uw  -o .
&gt;&gt;&gt; It throws Exception
&gt;&gt;&gt;
&gt;&gt;&gt; Exception in thread "main"
&gt;&gt;&gt; org.apache.axis2.wsdl.codegen.CodeGenerationException: Error parsing WSDL
&gt;&gt;&gt;        at
&gt;&gt;&gt; org.apache.axis2.wsdl.codegen.CodeGenerationEngine.&lt;init&gt;(CodeGenerationEngine.java:156)
&gt;&gt;&gt;        at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
&gt;&gt;&gt;        at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
&gt;&gt;&gt; Caused by: javax.wsdl.WSDLException: WSDLException:
&gt;&gt;&gt; faultCode=OTHER_ERROR: Unable to resolve imported document at '
&gt;&gt;&gt; https://localhost:8443/axis2/services/GreetingService?wsdl' &lt;
&gt;&gt;&gt; https://localhost:8443/axis2/services/GreetingService?wsdl%27&gt;.:
&gt;&gt;&gt; javax.net.ssl.SSLHandshakeException:
&gt;&gt;&gt; java.security.cert.CertificateException: No name matching localhost found
&gt;&gt;&gt;
&gt;&gt;&gt;        at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
&gt;&gt;&gt;        at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
&gt;&gt;&gt;        at
&gt;&gt;&gt; org.apache.axis2.wsdl.codegen.CodeGenerationEngine.readInTheWSDLFile(CodeGenerationEngine.java:288)
&gt;&gt;&gt;        at
&gt;&gt;&gt; org.apache.axis2.wsdl.codegen.CodeGenerationEngine.&lt;init&gt;(CodeGenerationEngine.java:111)
&gt;&gt;&gt;        ... 2 more
&gt;&gt;&gt; Caused by: javax.net.ssl.SSLHandshakeException:
&gt;&gt;&gt; java.security.cert.CertificateException: No name matching localhost found
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1591)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:187)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:181)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:975)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:123)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:405)
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:977)
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
&gt;&gt;&gt;        at java.net.URL.openStream(URL.java:1009)
&gt;&gt;&gt;        at com.ibm.wsdl.util.StringUtils.getContentAsInputStream(Unknown
&gt;&gt;&gt; Source)
&gt;&gt;&gt;        ... 6 more
&gt;&gt;&gt; Caused by: java.security.cert.CertificateException: No name matching
&gt;&gt;&gt; localhost found
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:210)
&gt;&gt;&gt;        at
&gt;&gt;&gt; sun.security.util.HostnameChecker.match(HostnameChecker.java:77)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:264)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:250)
&gt;&gt;&gt;        at
&gt;&gt;&gt; com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:954)
&gt;&gt;&gt;        ... 19 more
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Can some one tell me how to resolve ?
&gt;&gt;&gt;
&gt;&gt;&gt; Thanks,
&gt;&gt;&gt; --RAFI
&gt;&gt;&gt;
&gt;&gt;&gt; ------------------------------------------------------------------------
&gt;&gt;&gt;
&gt;&gt;&gt; No virus found in this incoming message.
&gt;&gt;&gt; Checked by AVG. Version: 7.5.524 / Virus Database: 270.4.1/1510 - Release
&gt;&gt;&gt; Date: 6/19/2008 3:21 PM
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; ---------------------------------------------------------------------
&gt;&gt; To unsubscribe, e-mail: axis-user-unsubscribe@ws.apache.org
&gt;&gt; For additional commands, e-mail: axis-user-help@ws.apache.org
&gt;&gt;
&gt;&gt;
&gt;


-- 
Amila Suriarachchi,
WSO2 Inc.

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li>Unnamed multipart/alternative (inline, None, 0 bytes)</li>
<ul>
<li><a rel="nofollow" href="/mod_mbox/axis-java-user/200806.mbox/raw/%3c60708f4b0806212200j4c63df8es1c3eeace737b8179@mail.gmail.com%3e/1">Unnamed text/plain</a> (inlin, 7-Bit, 7491 bytes)</li>
</ul>
<ul>
<li><a rel="nofollow" href="/mod_mbox/axis-java-user/200806.mbox/raw/%3c60708f4b0806212200j4c63df8es1c3eeace737b8179@mail.gmail.com%3e/2">Unnamed text/html</a> (inlin, 7-Bit, 10404 bytes)</li>
</ul>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/axis-java-user/200806.mbox/raw/%3c60708f4b0806212200j4c63df8es1c3eeace737b8179@mail.gmail.com%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
