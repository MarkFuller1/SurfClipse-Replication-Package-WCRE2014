<!DOCTYPE html>
<!--[if lt IE 7]><html lang="en-US" class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html lang="en-US" class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html lang="en-US" class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en-US" class="no-js"><!--<![endif]--> 
<head>
    
	<meta charset="UTF-8">
	<title>  Support Forums : DataStax</title>
	
	<!-- Meta -->
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="description" content="DataStax &#8211; Software, support, and training for Apache Cassandra">
	<link rel="shortcut icon" href="http://www.datastax.com/wp-content/themes/datastax-2013/favicon.ico">
		
	<!-- CSS + jQuery + JavaScript -->
	<link rel='stylesheet' id='otw_sbm.css-css'  href='http://www.datastax.com/wp-content/plugins/sidebar-manager-light/css/otw_sbm.css?ver=3.5.1' media='all' />
<link rel='stylesheet' id='css-css'  href='http://www.datastax.com/wp-content/themes/datastax-2013/css/styles.css?ver=1.0' media='all' />
<link rel="stylesheet" type="text/css" href="http://www.datastax.com/wp-content/plugins/wp-facebox-gallery/facebox3.css" />
<link rel="stylesheet" href="http://www.datastax.com/support-forums/my-templates/DataStaxBBpress/style.css" type="text/css">
<script type="text/javascript">/* wp-facebox */
	WPFB = { root: "http://www.datastax.com/wp-content/plugins/wp-facebox-gallery", home: "http://www.datastax.com", site: "http://www.datastax.com" };
	WPFB.options = {
		image_types     : [ 'png', 'jpg', 'jpeg', 'gif' ],
		loadingImage	: WPFB.root + '/images/v3/loading.gif',
		closeImage		: WPFB.root + '/images/v3/closelabel.png',
		next_image      : WPFB.root + '/images/v3/fast_forward.png',
        prev_image      : WPFB.root + '/images/v3/rewind.png',
        play_image      : WPFB.root + '/images/v3/play.png',
        pause_image     : WPFB.root + '/images/v3/pause.png'
	};
</script>
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js?ver=1.9.0'></script>
<script type='text/javascript' src='http://www.datastax.com/wp-content/plugins/wp-facebox-gallery/facebox3.js?ver=3.0'></script>
<script type='text/javascript' src='http://www.datastax.com/wp-content/themes/datastax-2013/js/modernizr.min.js?ver=2.6.2'></script>
<script type='text/javascript' src='http://www.datastax.com/wp-content/themes/datastax-2013/js/scripts.js?ver=1.0.0'></script>

<!-- All in One SEO Pack 1.6.13.3 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<meta name="description" content="DataStax Company Overview Customer Testimonial: SourceNinja Customer Testimonial: Hobsons Customer" />
<!-- /all in one seo pack -->
<script type="text/javascript">if (jQuery && jQuery.facebox) jQuery(function($) { $("a[rel*='facebox'], .gallery-item a").facebox(WPFB.options); });</script>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />
	
		
	    <script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-20879577-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	
	</script>


<link rel="alternate" type="application/rss+xml" title="DataStax Support Forums &raquo; Topic: Cassandra - java.lang.OutOfMemoryError: Java heap space" href="http://www.datastax.com/support-forums/rss/topic/cassandra-javalangoutofmemoryerror-java-heap-space" />
<meta name="generator" content="bbPress 1.0.3" />

</head>
<body id="topic-page" class="page page-template">
	<div id="Wrapper" class="row">
		<div class="twelve columns wrapperContainer">
        
        	<div id="Header" class="row">
		    <div class="three columns offset-by-one">
		      <div id="SiteId">
              	<a href="http://www.datastax.com">
					<img src="http://www.datastax.com/wp-content/themes/datastax-2013/images/common/logo.png" alt="DataStax logo" />
				</a>
              </div>
		    </div>
			<div class="seven columns end clearfix">
			    <div class="toolbar">
						<div class="search clearfix">
							<div class="formContainer">
								<form class="gsc-search-box" accept-charset="utf-8" action="/">
									<div class="searchBox">
										<input type="text" autocomplete="off" size="10" class="gsc-input" name="s" title="search" id="gsc-i-id1" dir="ltr" spellcheck="false" style="outline: medium none;">
										<input type="image" alt="Search" class="gsc-search-button" title="search" src="http://www.datastax.com/wp-content/themes/datastax-2013/images/common/search-submit.png" />
									</div>
								</form>
							</div>
							<a href="http://planetcassandra.org/" class="planetCassandra"><img src="http://www.datastax.com/wp-content/themes/datastax-2013/images/common/planet-cassandra.png" alt="Planet Cassandra Community" target="_blank"/></a>
						</div>
						<ul class="links right"><li id="menu-item-13820" class="first-menu-item menu-item menu-item-type-post_type menu-item-object-page menu-item-13820"><a href="http://www.datastax.com/what-we-offer/products-services/support">Support</a></li>
<li id="menu-item-13821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13821"><a href="/blog">Blog</a></li>
<li id="menu-item-13819" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-161 current_page_item menu-item-13819"><a href="http://www.datastax.com/resources">Resources</a></li>
<li id="menu-item-13823" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13823"><a href="http://www.datastax.com/company/careers">Careers</a></li>
<li id="menu-item-14754" class="last-menu-item menu-item menu-item-type-custom menu-item-object-custom menu-item-14754"><a href="/company#contact">Contact Us</a></li>
</ul>			</div>
            <div id="NavigationPrimary">
            	<ul><li id="menu-item-13695" class="first-menu-item menu-item menu-item-type-custom menu-item-object-custom menu-item-13695"><a href="/big-data-challenges">Big Data Challenges</a>
<ul class="sub-menu">
	<li id="menu-item-13696" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13696"><a href="/big-data-challenges">Overview</a></li>
</ul>
</li>
<li id="menu-item-13653" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13653"><a href="/customers">Customers</a>
<ul class="sub-menu">
	<li id="menu-item-13651" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13651"><a href="/customers">Overview</a></li>
</ul>
</li>
<li id="menu-item-13663" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-13663"><a href="http://www.datastax.com/what-we-offer/products-services">What We Offer</a>
<ul class="sub-menu">
	<li id="menu-item-9738" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9738"><a href="http://www.datastax.com/what-we-offer/products-services">Overview</a></li>
	<li id="menu-item-5952" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5952"><a href="http://www.datastax.com/what-we-offer/products-services/datastax-enterprise">DataStax Enterprise</a></li>
	<li id="menu-item-416" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-416"><a href="http://www.datastax.com/what-we-offer/products-services/datastax-opscenter">DataStax OpsCenter</a></li>
	<li id="menu-item-9768" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9768"><a href="http://www.datastax.com/what-we-offer/products-services/support">Support</a></li>
	<li id="menu-item-9767" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9767"><a href="http://www.datastax.com/what-we-offer/products-services/training">Training</a></li>
	<li id="menu-item-9772" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9772"><a href="http://www.datastax.com/what-we-offer/products-services/consulting">Consulting</a></li>
</ul>
</li>
<li id="menu-item-2361" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2361"><a href="/dev">Developer Center</a>
<ul class="sub-menu">
	<li id="menu-item-13649" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13649"><a href="/dev">Overview</a></li>
	<li id="menu-item-10081" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-10081"><a href="/docs/quick_start/quickstart">Quick Start Guide</a></li>
	<li id="menu-item-2365" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2365"><a href="/docs">Documentation</a></li>
	<li id="menu-item-2363" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2363"><a href="http://www.datastax.com/support-forums/">Support Forums</a></li>
	<li id="menu-item-2364" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2364"><a href="/dev/blog">Developer Blog</a></li>
	<li id="menu-item-2369" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2369"><a href="http://www.datastax.com/dev/tutorials">Tutorials</a></li>
</ul>
</li>
<li id="menu-item-434" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-434"><a href="http://www.datastax.com/company">Company</a>
<ul class="sub-menu">
	<li id="menu-item-433" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-433"><a href="http://www.datastax.com/company">About DataStax</a></li>
	<li id="menu-item-14305" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14305"><a href="/company#management">Management</a></li>
	<li id="menu-item-427" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-427"><a href="http://www.datastax.com/company/news-and-events/press-releases">Press Releases</a></li>
	<li id="menu-item-428" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-428"><a href="http://www.datastax.com/company/news-and-events/in-the-news">In the News</a></li>
	<li id="menu-item-553" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-553"><a href="http://www.datastax.com/company/news-and-events/events">Events</a></li>
	<li id="menu-item-431" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-431"><a href="http://www.datastax.com/company/investors">Investors</a></li>
	<li id="menu-item-15026" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15026"><a href="/company#partners">Partners</a></li>
	<li id="menu-item-14307" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14307"><a href="/company#mvp">MVP Program</a></li>
	<li id="menu-item-14308" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14308"><a href="/company#careers">Careers</a></li>
	<li id="menu-item-14309" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14309"><a href="/company#contact">Contact Us</a></li>
</ul>
</li>
<li id="menu-item-13652" class="last-menu-item menu-item menu-item-type-custom menu-item-object-custom menu-item-13652"><a href="/download">Download</a></li>
</ul>            </div>
			
		</div>
	</div> <!-- #Header -->
	<div id="wrapper">
		<div id="bb-header" role="banner">

<form class="login" method="post" action="http://www.datastax.com/support-forums/bb-login.php">
	<p>
		<a href="http://www.datastax.com/support-forums/register.php">Register</a> or log in - <a href="http://www.datastax.com/support-forums/bb-login.php">lost password?</a>
	</p>
	<div>
		<label>
			Username<br />
			<input name="user_login" type="text" id="quick_user_login" size="13" maxlength="40" value="" tabindex="1" />
		</label>
		<label>
			Password<br />
			<input name="password" type="password" id="quick_password" size="13" maxlength="40" tabindex="2" />
		</label>
		<input name="re" type="hidden" value="" />
		<input type="hidden" name="_wp_http_referer" value="/support-forums/topic/cassandra-javalangoutofmemoryerror-java-heap-space" />
		<input type="submit" name="Submit" class="submit" value="Log in &raquo;" tabindex="4" />
	</div>
	<div class="remember">
		<label>
			<input name="remember" type="checkbox" id="quick_remember" value="1" tabindex="3" />
			Remember me
		</label>
	</div>
</form>
			<div class="search">
<form class="search-form" role="search" action="http://www.datastax.com/support-forums/search.php" method="get">
	<p>
		<label class="hidden" for="q">Search:</label>
		<input class="text" type="text" size="14" maxlength="100" name="q" id="q" />
		<input class="submit" type="submit" value="Search &raquo;" />
	</p>
</form>
			</div>
		</div>
		<div id="main">


<div class="bbcrumb"><a href="http://www.datastax.com/support-forums/">DataStax Support Forums</a> &raquo; <a href="http://www.datastax.com/support-forums/forum/cassandra">Apache Cassandra</a></div>
<div class="infobox" role="main">
<p>In an effort to consolidate free help offered for our products we have decided to move these forums to a more widely used forum. Please use one of the following queries (or any combination):</p>

<ul>
<li>Cassandra: <a href="http://stackoverflow.com/questions/tagged/cassandra" target="_blank">tag search</a> or <a href="http://stackoverflow.com/search?q=cassandra" target="_blank">plain text search</a>
<li>DataStax Enterprise: <a href="http://stackoverflow.com/questions/tagged/datastax-enterprise">tag search</a> or <a href="http://stackoverflow.com/search?q=datastax" target="_blank">plain text search</a>
<li>DataStax OpsCenter: <a href="http://serverfault.com/questions/tagged/opscenter">tag search</a> or <a href="http://serverfault.com/search?q=opscenter" target="_blank">plain text search</a>
</ul>

<div id="topic-info">
<span id="topic_labels"><img src="http://www.datastax.com/support-forums/my-plugins/support-forums/icons/support-forums-not-support.png" alt="not a support question" title="not a support question" style="vertical-align: middle;" /> </span>
<h2 class="topictitle">Cassandra - java.lang.OutOfMemoryError: Java heap space</h2>
<span id="topic_posts">(6 posts)</span>
<span id="topic_voices">(4 voices)</span>

<ul class="topicmeta">
	<li>Started 1 year ago by </li>
	<li><a href="http://www.datastax.com/support-forums/topic/cassandra-javalangoutofmemoryerror-java-heap-space#post-1443">Latest reply</a> from joaquin</li>
<li id="support-status">This topic is <img src="http://www.datastax.com/support-forums/my-plugins/support-forums/icons/support-forums-not-support.png" alt="" title="not a support question" style="vertical-align: middle;" /> not a support question</li>
</ul>
</div>

<div id="topic-tags">
<p>Tags:</p>


<p>No <a href="http://www.datastax.com/support-forums/tags/">tags</a> yet.</p>



</div>

<div style="clear:both;"></div>
</div>
<div id="ajax-response"></div>
<ol id="thread" class="list:post">

	<li id="post-1376">
		<div id="position-1">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/cc5f52c98723a2349c97bfe4c00fd799?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Anonymous</strong><br />
					<small>Unregistered</small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>Hi,</p>
<p>We are currently using cassandra ver 0.6.2 in Production.<br />
The issue we are having is OOM (java.lang.OutOfMemoryError: Java heap space)<br />
Below i have added the logs and cassandra configuration to identify the issue.</p>
<p>Log:<br />
--------</p>
<p>INFO [COMPACTION-POOL:1] 2012-02-20 22:14:36,715 CompactionManager.java (line 246) Compacting [org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/Traps-4833-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/Traps-5478-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/Traps-6085-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/Traps-7065-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/Traps-11706-Data.db')]<br />
 INFO [GC inspection] 2012-02-20 22:14:51,307 GCInspector.java (line 110) GC for ConcurrentMarkSweep: 1548 ms, 462469616 reclaimed leaving 576773008 used; max is 2277179392<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,310 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/Alarms-13823-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,311 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/CircuitID-756-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,311 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/CircuitID-757-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,312 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/CircuitID-755-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,312 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/Alarms-13824-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,312 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/Alarms-13825-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,312 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/AlertDate-13806-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,313 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/AlertDate-13805-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,318 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/Alarms-13822-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,321 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/AlertDate-13803-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,321 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/CircuitID-758-Data.db<br />
 INFO [SSTABLE-CLEANUP-TIMER] 2012-02-20 22:15:01,321 SSTableDeletingReference.java (line 104) Deleted /cassandra/data/beacon/AlertDate-13804-Data.db<br />
 INFO [GC inspection] 2012-02-20 22:16:08,795 GCInspector.java (line 110) GC for ConcurrentMarkSweep: 3650 ms, 125120 reclaimed leaving 1917886152 used; max is 2277179392<br />
ERROR [COMPACTION-POOL:1] 2012-02-20 22:16:08,798 DebuggableThreadPoolExecutor.java (line 94) Error in executor futuretask<br />
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space<br />
	at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)<br />
	at java.util.concurrent.FutureTask.get(FutureTask.java:83)<br />
	at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:86)<br />
	at org.apache.cassandra.db.CompactionManager$CompactionExecutor.afterExecute(CompactionManager.java:582)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:887)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)<br />
	at java.lang.Thread.run(Thread.java:619)<br />
Caused by: java.lang.OutOfMemoryError: Java heap space<br />
	at java.util.Arrays.copyOf(Arrays.java:2786)<br />
	at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)<br />
	at java.io.DataOutputStream.write(DataOutputStream.java:90)<br />
	at java.io.FilterOutputStream.write(FilterOutputStream.java:80)<br />
	at org.apache.cassandra.db.ColumnSerializer.writeName(ColumnSerializer.java:39)<br />
	at org.apache.cassandra.db.ColumnSerializer.serialize(ColumnSerializer.java:61)<br />
	at org.apache.cassandra.db.SuperColumnSerializer.serialize(SuperColumn.java:311)<br />
	at org.apache.cassandra.db.SuperColumnSerializer.serialize(SuperColumn.java:284)<br />
	at org.apache.cassandra.db.ColumnFamilySerializer.serializeForSSTable(ColumnFamilySerializer.java:87)<br />
	at org.apache.cassandra.db.ColumnFamilySerializer.serializeWithIndexes(ColumnFamilySerializer.java:99)<br />
	at org.apache.cassandra.io.CompactionIterator.getReduced(CompactionIterator.java:131)<br />
	at org.apache.cassandra.io.CompactionIterator.getReduced(CompactionIterator.java:41)<br />
	at org.apache.cassandra.utils.ReducingIterator.computeNext(ReducingIterator.java:73)<br />
	at com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:135)<br />
	at com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:130)<br />
	at org.apache.commons.collections.iterators.FilterIterator.setNextObject(FilterIterator.java:183)<br />
	at org.apache.commons.collections.iterators.FilterIterator.hasNext(FilterIterator.java:94)<br />
	at org.apache.cassandra.db.CompactionManager.doCompaction(CompactionManager.java:299)<br />
	at org.apache.cassandra.db.CompactionManager$1.call(CompactionManager.java:102)<br />
	at org.apache.cassandra.db.CompactionManager$1.call(CompactionManager.java:83)<br />
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)<br />
	at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br />
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)<br />
	... 2 more<br />
 INFO [COMPACTION-POOL:1] 2012-02-20 22:16:08,798 CompactionManager.java (line 246) Compacting [org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/AlertGroups-13840-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/AlertGroups-13841-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/AlertGroups-13842-Data.db'),org.apache.cassandra.io.SSTableReader(path='/cassandra/data/beacon/AlertGroups-13843-Data.db')]<br />
 INFO [COMPACTION-POOL:1] 2012-02-20 22:16:08,913 CompactionManager.java (line 326) Compacted to /cassandra/data/beacon/AlertGroups-13844-Data.db.  1863395/1575561 bytes for 2554 keys.  Time: 114ms.<br />
 INFO [FLUSH-TIMER] 2012-02-20 23:14:33,889 ColumnFamilyStore.java (line 357) ActiveGroups has reached its threshold; switching in a fresh Memtable at CommitLogContext(file='/var/cassandra/commitlog/CommitLog-1329745139372.log', position=2624553)</p>
<p>cassandra configuration:<br />
------------------------</p>
<p># Arguments to pass to the JVM<br />
JVM_OPTS=" \<br />
        -ea \<br />
        -Xms256M \<br />
        -Xmx6G \<br />
        -XX:+UseParNewGC \<br />
        -XX:+UseConcMarkSweepGC \<br />
        -XX:+CMSParallelRemarkEnabled \<br />
        -XX:SurvivorRatio=8 \<br />
        -XX:MaxTenuringThreshold=1 \<br />
        -XX:+HeapDumpOnOutOfMemoryError \<br />
        -Dcom.sun.management.jmxremote.port=8080 \<br />
        -Dcom.sun.management.jmxremote.ssl=false \<br />
        -Dcom.sun.management.jmxremote.authenticate=false"</p>
<p>Please advice me how to resolve this issue.</p>
<p>Thanks<br />
Ramesh Kasi
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1376">#</a> </div>
			</div>
		</div>	</li>
	<li id="post-1378" class="alt">
		<div id="position-2">
			<div class="threadauthor">
				<a href="http://datastax.com"><img alt="" src="http://www.gravatar.com/avatar/bc157185a40228ca05c3f4cc4d69b061?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://datastax.com">jbellis</a></strong><br />
					<small><a href="http://www.datastax.com/support-forums/profile/jbellis">Moderator</a></small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>Upgrade to the latest 0.6 release, then follow the advice here: <a href="http://www.datastax.com/docs/0.6/troubleshooting/index#nodes-are-dying-with-oom-errors" rel="nofollow">http://www.datastax.com/docs/0.6/troubleshooting/index#nodes-are-dying-with-oom-errors</a>
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1378">#</a> </div>
			</div>
		</div>	</li>
	<li id="post-1385">
		<div id="position-3">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/c6102b3727b2a7d8b1bb6981147081ef?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Anonymous</strong><br />
					<small>Unregistered</small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>Hello Bellis,</p>
<p> Have found some info from the forums, after upgraded to cassandra 0.6.1 still the user facing the same problem when adding more rows/columns. So it means cassandra is not consistent? I think, Increasing the JVM Heap Space and upgrading to latest version will not resolve the above issue. Please give up the solution to resolve the issue  quickly...</p>
<p><a href="http://permalink.gmane.org/gmane.comp.db.cassandra.user/5017" rel="nofollow">http://permalink.gmane.org/gmane.comp.db.cassandra.user/5017</a></p>
<p>Thanks in advance...
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1385">#</a> </div>
			</div>
		</div>	</li>
	<li id="post-1387" class="alt">
		<div id="position-4">
			<div class="threadauthor">
				<a href="http://datastax.com"><img alt="" src="http://www.gravatar.com/avatar/bc157185a40228ca05c3f4cc4d69b061?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://datastax.com">jbellis</a></strong><br />
					<small><a href="http://www.datastax.com/support-forums/profile/jbellis">Moderator</a></small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>The latest 0.6 release is 0.6.13: <a href="http://archive.apache.org/dist/cassandra/0.6.13/" rel="nofollow">http://archive.apache.org/dist/cassandra/0.6.13/</a></p>
<p>Please follow the same troubleshooting guide I linked above and post your findings.
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1387">#</a> </div>
			</div>
		</div>	</li>
	<li id="post-1424">
		<div id="position-5">
			<div class="threadauthor">
				<img alt="" src="http://www.gravatar.com/avatar/cc5f52c98723a2349c97bfe4c00fd799?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="avatar avatar-48" style="height:48px; width:48px;" />				<p>
					<strong>Anonymous</strong><br />
					<small>Unregistered</small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>Hi Jbellis,</p>
<p>Thanks for your quick response.</p>
<p>I'm trying to avoid cassandra OOM exception.</p>
<p>heap size = memtable_throughput_in_mb * 3 * number of hot CFs + 1G + internal caches</p>
<p>1. Based on your formula, we can calculate the heap size.<br />
But Where can i get memtable_throughput_in_mb and internal caches To calculate the heap size?</p>
<p>2.Below Key cache hit rate value is high. To improve the performance, How much i need to set by using setcachecapacity?     </p>
<p>My cf statistics:<br />
Keyspace: beacon<br />
	Read Count: 58098<br />
	Read Latency: 3.6910174704809116 ms.<br />
	Write Count: 2875<br />
	Write Latency: 0.015630956521739132 ms.<br />
	Pending Tasks: 0<br />
		Column Family: Alarms<br />
		SSTable count: 2<br />
		Space used (live): 5133969<br />
		Space used (total): 5133969<br />
		Memtable Columns Count: 0<br />
		Memtable Data Size: 0<br />
		Memtable Switch Count: 0<br />
		Read Count: 68<br />
		Read Latency: 9.724 ms.<br />
		Write Count: 0<br />
		Write Latency: NaN ms.<br />
		Pending Tasks: 0<br />
		Key cache capacity: 3264<br />
		Key cache size: 6<br />
		Key cache hit rate: 0.9491525423728814<br />
		Row cache: disabled<br />
		Compacted row minimum size: 0<br />
		Compacted row maximum size: 0<br />
		Compacted row mean size: 0</p>
<p>Kindly provide your valuable feedback asap to improve the performance.</p>
<p>Thanks,<br />
Ramesh Kasi
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1424">#</a> </div>
			</div>
		</div>	</li>
	<li id="post-1443" class="alt">
		<div id="position-6">
			<div class="threadauthor">
				<a href="http://datastax.com"><img alt="" src="http://www.gravatar.com/avatar/608f623995f0a30e786d088f0d8451da?s=48&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D48&amp;r=g" class="photo avatar avatar-48" style="height:48px; width:48px;" /></a>				<p>
					<strong><a href="http://datastax.com">joaquin</a></strong><br />
					<small><a href="http://www.datastax.com/support-forums/profile/joaquin">Administrator</a></small>
				</p>
			</div>
			<div class="threadpost">
				<div class="post"><p>Hello,</p>
<p>1. Even though this article is for 0.7.x, it should help answer more thoroughly how memtable_throughput_in_mb and internal caches should be calculated:<br />
<a href="http://www.datastax.com/docs/0.7/operations/tuning#heap-sizing" rel="nofollow">http://www.datastax.com/docs/0.7/operations/tuning#heap-sizing</a></p>
<p>2. You can try by increasing the key cache capacity by 2x and see where that puts you. If you do this, make sure to do this in conjunction with step 1 to ensure your tune with this new key cache capacity.</p>
<p>Also, try not to set your heap size to anything larger than 8GB. How much RAM is on your machine?</p>
<p>Thanks,<br />
Joaquin
</p></div>
				<div class="poststuff">Posted 1 year ago <a href="#post-1443">#</a> </div>
			</div>
		</div>	</li>

</ol>
<div class="clearit"><br style=" clear: both;" /></div>
<p class="rss-link"><a href="http://www.datastax.com/support-forums/rss/topic/cassandra-javalangoutofmemoryerror-java-heap-space" class="rss-link"><abbr title="Really Simple Syndication">RSS</abbr> feed for this topic</a></p>
		</div>
	</div>


</body>
</html>
