<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <!-- BS20071201: For Google Webmaster Tools -->
  <meta name="verify-v1" content="xMi75wiJ7XeqfMQoK2w6U/8gi8IZrxKpdefH5Y5W9k4=" />
  <title>R: Increase heap size for rJava | bramschoenmakers.nl</title>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/misc/favicon.ico" type="image/x-icon" />
  <style type="text/css" media="all">@import "/sites/bramschoenmakers.nl/www/files/css/a13a98b0e97eca641e187f9a668f3cbf.css";</style>
    
<script type="text/javascript" src="/sites/bramschoenmakers.nl/www/files/js/5501934017dbc3f44bd097d1939aae92.js"></script>

<script type="text/javascript">Drupal.extend({ settings: { "googleanalytics": { "trackDownload": "pdf|zip|mp3" } } });</script>
<script type="text/javascript">
        $(document).ready(function() {
          // find all external links and set target to new window
          $("a.external-link").attr("target", "_blank");
        });
      </script>

</head>

<body>

    <div id="container">
      <div id="header">
        <div id="logoWrapper">
                        <div id="siteName"><a href="/" title="Home">bramschoenmakers.nl</a></div>                    </div>
      <!-- BS20080322: Uitgezet -->
      <!--<div id="nav">
             </div>-->
    </div>

  <div id="content">
                <div class="breadcrumb"><a href="/">Home</a></div>        <div class="pageTitle">R: Increase heap size for rJava</div>
        <div class="tabs"></div>
                	          <div class="node">
            <span class="submitted">Submitted by Bram Schoenmakers on 10 June, 2010 - 00:15.</span>
    <div class="taxonomy">Tagged: <span class="first taxonomy_term_427"><a href="/en/taxonomy/term/427" rel="tag" title="" class="taxonomy_term_427">Java</a></span>
&nbsp;&bull; &nbsp;<span class="taxonomy_term_476"><a href="/en/taxonomy/term/476" rel="tag" title="" class="taxonomy_term_476">R</a></span>
&nbsp;&bull; &nbsp;<span class="taxonomy_term_478"><a href="/en/taxonomy/term/478" rel="tag" title="" class="taxonomy_term_478">rJava</a></span>
&nbsp;&bull; &nbsp;<span class="last taxonomy_term_477"><a href="/en/taxonomy/term/477" rel="tag" title="" class="taxonomy_term_477">RWeka</a></span>
</div>    <div class="content"><p>Technically speaking, this is not strictly a Unix Revelation. Still, to me it's useful enough to note this down.</p>
<p>We all know Java runs in a virtual machine, and assigns itself in 80% of the cases too little memory to do some real work. Result? Well, this:</p>
<div class="error">java.lang.OutOfMemoryError: Java heap space</div>
<p>Sun gave us the <span class="commandtxt">-Xmx flag</span> to increase the heap size (and <span class="commandtxt">-Xms</span> to increase the stack size).</p>
<p>This works nicely from the commandline, the next challenge was to do something similar from an <a href="http://www.r-project.org" class="external-link">R</a> environment. Using <a href="http://cran.r-project.org/web/packages/RWeka/index.html" class="external-link">RWeka</a>, which in turn depends on <a href="http://cran.r-project.org/web/packages/rJava/index.html" class="external-link">rJava</a>, I found myself hitting the limit every time (which defaults to 512 MB).</p>
<p>The solution is to supply this <span class="commandtxt">-Xmx</span> parameter before the Java Virtual Machine is initialized. From the R shell, invoke this:</p>
<div class="command">&gt; options( java.parameters = "-Xmx4g" )<br />
&gt; library( "RWeka" )</div>
<p>This will override the default setting and assign 4 gigabytes of heap space to the Java environment. Of course, you still need to have at least that amount of RAM.</p>
</div>
      </div>
<div id="comments"></div>                  </div>

  <div id="sidebarWrapper">
    <div id="sidebar">
              <div class="block block-menu" id="block-menu-82">
    <h2 class="title">Menu</h2>
    <div class="content">
<ul class="menu">
<li class="expanded"><a href="/en/blog/1" title="An aggregation of all non-issues I wrote about.">My blog</a>
<ul class="menu">
<li class="leaf"><a href="/en/blog/en">English</a></li>
<li class="leaf"><a href="/en/blog/nl">Nederlands</a></li>
<li class="leaf"><a href="/en/blog/list">List</a></li>
<li class="leaf"><a href="/en/node/291">Tags</a></li>

</ul>
</li>
<li class="collapsed"><a href="/en/node/261">Features</a></li>
<li class="collapsed"><a href="/en/unixrevelations">Unix Revelations</a></li>
<li class="leaf"><a href="/en/user/login">Log in</a></li>

</ul>
</div>
 </div>
  <div class="block block-block" id="block-block-9">
    <h2 class="title"></h2>
    <div class="content"><form action="http://www.google.com/cse" id="cse-search-box">
<div>
    <input type="hidden" name="cx" value="001174737424413819622:hbcxveln_xk" /><br />
    <input type="hidden" name="ie" value="UTF-8" /><br />
    <input type="text" name="q" size="20" /><br />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script></div>
 </div>
  <div class="block block-block" id="block-block-8">
    <h2 class="title">Online profiles</h2>
    <div class="content"><ul class="profile-list">
<li><span class="profile-icon" style="background-position: 0px 0px;"></span><a class="profile-link external-link" href="http://www.google.com/profiles/bramschoenmakers" rel="me">Google Profile</a></li>
<li><span class="profile-icon" style="background-position: -48px -16px;"></span><a class="profile-link external-link" href="http://twitter.com/bram85" rel="me">Twitter</a></li>
<li><span class="profile-icon" style="background-position: -16px -0px;"></span><a class="profile-link external-link" href="http://facebook.com/bramschoenmakers" rel="me">Facebook</a></li>
<li><span class="profile-icon" style="background-position: 0px -16px;"></span><a class="profile-link external-link" href="http://www.last.fm/user/bram85" rel="me">Last.fm</a></li>
<li><span class="profile-icon" style="background-position: -32px -0px;"></span><a class="profile-link external-link" href="http://www.flickr.com/people/bramschoenmakers/" rel="me">Flickr</a></li>
<li><span class="profile-icon" style="background-position: -64px -16px;"></span><a class="profile-link external-link" href="http://nl.linkedin.com/in/bramschoenmakers" rel="me">LinkedIn</a></li>
<li><span class="profile-icon" style="background-position: -48px -0px;"></span><a class="profile-link external-link" href="http://github.com/bram85" rel="me">Github</a></li>
<li><span class="profile-icon" style="background-position: -64px -0px;"></span><a class="profile-link external-link" href="http://stackoverflow.com/users/322263/bram-schoenmakers" rel="me">Stack Overflow</a></li>
</ul>
</div>
 </div>
  <div class="block block-views" id="block-views-recentblogs">
    <h2 class="title">Recent blogs</h2>
    <div class="content"><div class='view view-recentblogs'><div class='view-content view-content-recentblogs'><div class="item-list"><ul><li><div class='view-item view-item-recentblogs'><div class='view-field view-data-node-title'><a href="/en/node/754">Never miss a phone call again with Tasker (Android) and KDialog (KDE)</a></div></div>
</li><li><div class='view-item view-item-recentblogs'><div class='view-field view-data-node-title'><a href="/en/node/751">Backup online services with Backupify</a></div></div>
</li><li><div class='view-item view-item-recentblogs'><div class='view-field view-data-node-title'><a href="/en/node/750">Backup your brain with Evernote</a></div></div>
</li></ul></div></div></div>
</div>
 </div>
    </div>
  </div>


  <div id="footer">
    &#169; 2005-2011 Bram Schoenmakers --- <a href="/contact">Contact</a><br />
Hosted by <a href="http://www.secure-hosting.nl">Secure-Hosting.nl</a>
  </div>
</div>
<script type="text/javascript" src="/sites/bramschoenmakers.nl/www/files/googleanalytics/urchin.js"></script>
<script type="text/javascript">
_uacct = "UA-2979244-1";urchinTracker();
</script>
<script type="text/javascript" src="/sites/bramschoenmakers.nl/modules/google_analytics/downloadtracker.js"></script>
</body>
</html>
