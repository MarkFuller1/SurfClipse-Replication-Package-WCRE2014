<!DOCTYPE html>
<html>
<head>
    
    <title>How should Domain Services call Infrastructure services? - Stack Overflow</title>
    <link rel="shortcut icon" href="//cdn.sstatic.net/stackoverflow/img/favicon.ico">
    <link rel="apple-touch-icon image_src" href="//cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="stackoverflow.com"/>
    <meta name="og:type" content="website" />
    <meta name="og:image" content="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon@2.png?v=fde65a5a78c6"/>
    <meta name="og:title" content="How should Domain Services call Infrastructure services?" />
    <meta name="og:description" content="1) When Domain layer is using an Infrastructure Service IS, then its interface is defined within a Domain layer, while its implementation is defined within an Infrastructure layer.

We shouldn&#39;t in..." />
    <meta name="og:url" content="http://stackoverflow.com/questions/14612673/how-should-domain-services-call-infrastructure-services"/>
    <link rel="canonical" href="http://stackoverflow.com/questions/14612673/how-should-domain-services-call-infrastructure-services" />

    
    
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//cdn.sstatic.net/Js/stub.en.js?v=184c221cbfa3" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.sstatic.net/stackoverflow/all.css?v=1b6de4192b97">
    
    <link rel="alternate" type="application/atom+xml" title="Feed for question &#39;How should Domain Services call Infrastructure services?&#39;" href="/feeds/question/14612673">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            StackExchange.using("postValidation", function () {
                StackExchange.postValidation.initOnBlurAndSubmit($('#post-form'), 2, 'answer');
            });

            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:2,shownCommentCount:2,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:14612673});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('1', '14612673');
            
                    });
    </script>


    <script type="text/javascript">
        StackExchange.init({"locale":"en","stackAuthUrl":"https://stackauth.com","serverTime":1386977795,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Stack Overflow","description":"Q&A for professional and enthusiast programmers","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdchgIAAAAAAJwGpIzRQSOFaO0pU6s44Xt8aTwc","nonAsciiTags":true,"enableSocialMediaInSharePopup":true},"user":{"fkey":"924444e9d656bd8bb28009690bceb305","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.en.js":"e0bbd4760e83","js/moderator.en.js":"1a411fd265fe","js/full-anon.en.js":"f11ad0c721c5","js/full.en.js":"4281101ad6b6","js/wmd.en.js":"849f408083f3","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/third-party/jquery.autocomplete.min.en.js":"","js/mobile.en.js":"d1d834ef85d2","js/help.en.js":"d3cc74d8a93a","js/tageditor.en.js":"6d51a5f8d7f3","js/tageditornew.en.js":"111b781cf314","js/inline-tag-editing.en.js":"f951bd09dc69","js/revisions.en.js":"33fd38144303","js/review.en.js":"b44cee8b2b0b","js/tagsuggestions.en.js":"e4e7b952fcc7","js/post-validation.en.js":"c275fe37d674","js/explore-qlist.en.js":"73825bd006fc","js/events.en.js":"23bb11cfe220"});
        StackExchange.using("gps", function() {
             StackExchange.gps.init(true);
        });
        
    </script>
    
        <script type="text/javascript">
            StackExchange.ready(function () {
                $('#nav-tour').click(function () {
                    StackExchange.using("gps", function() {
                        StackExchange.gps.track("aboutpage.click", { aboutclick_location: "headermain" }, true);
                    });
                });
            });
        </script>
</head>
<body class="question-page new-topbar">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>
<div class="topbar">
    <div class="topbar-wrapper">
        
        <div class="js-topbar-dialog-corral">

<div class="topbar-dialog siteSwitcher-dialog dno">
    <div class="header">
        <h3><a href="//stackexchange.com/sites">Explore our sites</a></h3>
    </div>
    <div class="modal-content">
        <ul class="current-site">
                <li>
                        <a href="//stackoverflow.com" 
       class="current-site-link site-link js-site-link js-gps-track"
            data-gps-track="site_switcher.click({ item_type:3 })"
>
        <div class="site-icon favicon favicon-stackoverflow" title="Stack Overflow"></div>
        Stack Overflow
    </a>
    <div class="related-links js-related-links">
            <a href="http://chat.stackoverflow.com"     data-gps-track="site_switcher.click({ item_type:6 })"
>chat</a>
                    <a href="http://blog.stackexchange.com"     data-gps-track="site_switcher.click({ item_type:7 })"
>blog</a>
            </div>

                </li>
                <li class="related-site">
                        <a href="//meta.stackoverflow.com" 
       class="site-link js-site-link js-gps-track"
            data-gps-track="site.switch({ target_site:4, item_type:3 });site_switcher.click({ item_type:4 })"
>
        <div class="site-icon favicon favicon-stackoverflowmeta" title="Meta Stack Overflow"></div>
        Meta Stack Overflow
    </a>

                    
                </li>
                            <li class="related-site">
                    <a class="site-link js-site-link" 
                       href="//careers.stackoverflow.com" 
                           data-gps-track="site_switcher.click({ item_type:9 })"
>
                        <div class="site-icon favicon favicon-careers" title="Stack Overflow Careers"></div>
                        Careers 2.0
                    </a>
                </li>
        </ul>
        


        
            <div class="child-content"></div>

    </div>
</div>        </div>

        <div class="network-items">
            
            <a href="//stackexchange.com" 
               class="topbar-icon icon-site-switcher js-site-switcher-button js-gps-track"
               data-gps-track="site_switcher.show"
               data-child-content-url="/topbar/site-switcher/site-list"
               data-on-class="icon-site-switcher-on"
               title="A list of all 112 Stack Exchange sites">
                <span class="hidden-text">Stack Exchange</span>
            </a>
            
        </div>

        <div class="topbar-links">
            
                <div class="links-container">
                    <span class="topbar-menu-links">
                        <a href="/users/login?returnurl=%2fquestions%2f14612673%2fhow-should-domain-services-call-infrastructure-services" class="login-link">sign up</a>    
                        <a href="/users/login?returnurl=%2fquestions%2f14612673%2fhow-should-domain-services-call-infrastructure-services" class="login-link">log in</a>
                        <a href="/tour">tour</a>
                        <a href="/help">help</a>
                            <a href="//careers.stackoverflow.com">careers 2.0</a>
                    </span>
                </div>

			<div class="search-container">
                <form id="search" action="/search" method="get" autocomplete="off">
                    <input name="q" type="text" placeholder="search" value="" tabindex="1" autocomplete="off" maxlength="240" />
                </form>
			</div>
            	
        </div>      
    </div> 
</div>
<script>
    StackExchange.ready(function () {
        //topbar.init();
        StackExchange.topbar.init();
    });
</script>    <div class="container">
        <div id="header" class=headeranon>
            <br class="cbt">
            <div id="hlogo">
                <a href="/">
                    Stack Overflow
                </a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs mainnavsanon">
                    <ul>
                            <li class="youarehere"><a id="nav-questions" href="/questions">Questions</a></li>
                            <li><a id="nav-tags" href="/tags">Tags</a></li>
                            <li><a id="nav-tour" href="/about">Tour</a></li>
                            <li><a id="nav-users" href="/users">Users</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion"  href="/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        



        <div id="content">
            

<div itemscope itemtype="http://schema.org/Article">
	<link itemprop="image" href="//cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png">
			<!--googleoff: all-->
<div id="herobox-mini">
    <div id="hero-content">
        <span id="controls">
            <a href="/about" id="tell-me-more" class="button">Take the tour</a>
            <span id="close"><a title="click to dismiss">&times;</a></span>
        </span>
        <div id="blurb">
            Stack Overflow is a question and answer site for professional and enthusiast programmers. It&#39;s 100% free, no registration required.
        </div>        
    </div>
    <script>
        $('#tell-me-more').click(function () {
            var clickSource = $("body").attr("class") + '-mini';
            if ($("body").hasClass("questions-page")) {
                clickSource = 'questionpagemini';
            }
            if ($("body").hasClass("home-page")) {
                clickSource = 'homepagemini';
            }

            StackExchange.using("gps", function () {
                StackExchange.gps.track("aboutpage.click", { aboutclick_location: clickSource } , true);
            });
        });
        $('#herobox-mini #close').click(function () {
            StackExchange.using("gps", function () {
                StackExchange.gps.track("hero.action", { hero_action_type: "close" }, true);
            });
            $.cookie("hero", "none", { path: "/" });
            var $hero = $("#herobox-mini");
            $hero.slideUp('fast', function () { $hero.remove(); });
            return false;
        });
    </script>
</div>
			<!--googleon: all-->
			<div id="question-header">
			<h1 itemprop="name"><a href="/questions/14612673/how-should-domain-services-call-infrastructure-services" class="question-hyperlink">How should Domain Services call Infrastructure services?</a></h1>
		</div>
			<div id="mainbar">

			

<div class="question" data-questionid="14612673"  id="question">
    
    <script type="text/javascript">
                var ados = ados || {};ados.run = ados.run || [];
                ados.run.push(function() { ados_add_placement(22,8277,"adzerk1169817375",4).setZone(43) ; });                    
            </script>
            <div class="everyonelovesstackoverflow" id="adzerk1169817375">
            </div>    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="14612673">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b></b></div>   

</div>

            </td>
            
<td class="postcell">
<div>
    <div class="post-text" itemprop="description">

        <p>1) When <em>Domain layer</em> is using an <em>Infrastructure Service</em> <strong>IS</strong>, then its interface is defined within a <em>Domain layer</em>, while its implementation is defined within an <em>Infrastructure layer</em>.</p>

<p>We shouldn't inject <strong>IS</strong> ( such as a Repository or E-mail service) directly into <em>Domain entities</em>:</p>

<pre><code>class Foo
{
       IRepository repo;
           ...
       public int DoSomething()
       {
            var info = repo.Get...;
              ...
       }
}
</code></pre>

<p>Instead, if a some method of a <em>Domain Entity</em> needs a particular <strong>IS</strong>, then <em>Application layer</em> could pass that <strong>IS</strong> as an argument to that method:</p>

<pre><code> class Foo
{
           ...
       public int DoSomething(IRepository repo)
       {
            var info = repo.Get...;
              ...
       }
}
</code></pre>

<p>a) I assume <strong>IS</strong> also shouldn't be injected directly into <em>Domain Services</em>:</p>

<pre><code>class TransferService
{
         IRepository repo;
             ...
         public bool Transfer()
         {
            var info = repo.Get...;
              ...
         } 
} 
</code></pre>

<p>, but instead <strong>IS</strong> should be passed as an argument to those methods of <em>Domain Service</em> which intend to use it:</p>

<pre><code>class TransferService
{
         public bool Transfer(IRepository repo)
         {
            var info = repo.Get...;
              ...
         } 
} 
</code></pre>

<p>b) I assume if a method of <em>Domain Entity</em> needs to use a <em>Domain Service</em>, it doesn't need to receive it via an argument ( though passing <em>Domain Service</em> as an argument has a benefit of explicitly conveying method's dependencies ), but instead can call it directly, reason being that both <em>Domain Entity</em> and <em>Domain Service</em> are both domain concepts:</p>

<pre><code>class Foo
{
       ...

       public int DoSomething()
       {
            var info = TransferService.Transfer(...);
              ...
       }
}
</code></pre>

<p><strong>UPDATE:</strong></p>

<p>1)</p>

<blockquote>
  <p>An IS can be injected into a domain service if it needs it for
  functionality - ie not passed to method. This is different than
  entities and it is because a domain service is stateless and so it can
  be configured with required dependencies once and used where needed,
  such as by other entities.</p>
</blockquote>

<p>a) So major reason why <strong>IS</strong> shouldn't be injected into <em>Domain Entities</em> is due to their statefulf nature?  </p>

<p>b) But I thought primary reason for not to injecting <strong>IS</strong> into <em>Domain Entities</em> is because it would violate <em>Persistence Ignorance</em> rule? </p>

<p>c) What problems does statefull nature of an entity cause if we inject it with <strong>IS</strong>? </p>

<p>d) Doesn't injecting <strong>IS</strong> into <em>Domain Service</em> violate PI? If not, why not?</p>

<p>2)</p>

<blockquote>
  <p>A domain service should be passed to entity as argument much like you
  would pass a repository interface as argument. The same principles
  apply.</p>
</blockquote>

<p>But unlike <em>Repository</em> a <em>Domain Service</em> is a domain concept, so what do you mean by "same principles apply"? Namely, injecting <em>Domain Service</em> into <em>Domain Entity</em> wouldn't violate <strong>PI</strong> while injecting a <em>Repository</em> would!</p>

<p><strong>SECOND UPDATE:</strong></p>

<p>1)</p>

<p>a)</p>

<blockquote>
  <p>That is one reason. Another is that is creates needless coupling. If a
  repository is needed for only a single behavior on the entity, why
  inject it into entity all the time? Also, now you have to consider how
  you will resolve those dependencies? Make entities part of dependency
  injection graph? This quickly overloads the responsibilities of the
  entity.</p>
</blockquote>

<p>So if I understood you correctly - Injecting <strong>IS</strong> into <em>Domain Service</em> <strong>DS</strong> doesn't violate SRP,  because <strong>DS</strong> is using it to execute its designated tasks ( ie its designated responsibility), while injecting <strong>IS</strong> into <em>Domain Entity</em> is a violation of SRP because primary responsibility of <em>Domain Entity</em> is focusing on its life cycle and identity, and <strong>IS</strong> most of the times isn't an integral part in managing these two tasks ( ie focusing on life cycle and identity )?</p>

<p>b)</p>

<blockquote>
  <p>You can still pass an IS to a domain entity method and the problem
  here wouldn't be violation of PI since you're passing an interface,
  not an implementation. The problem would be violation of SRP if the
  domain method only used one method on the IS interface.</p>
</blockquote>

<p>I - But in several of your previous posts you noted that it's ok to pass <strong>IS</strong> as an argument to a method of <em>Domain Entity</em>, but here you're saying that it would violate SRP if this domain method used only one method on <strong>IS</strong> instance?</p>

<p>II - If <strong>IS</strong> implemented a role-based interface containing a single method, and instead we pass this role-based interface as an argument to domain method, would you still consider this as a violation of SRP? If not, why not?</p>

<p>d)  </p>

<blockquote>
  <p>PI is maintained with the use of interfaces.</p>
</blockquote>

<p>I've read several times that even if domain method is referencing a repository via an interface, it's still considered a violation of PI. Why don't you agree with that? </p>

<p>2)</p>

<blockquote>
  <p>It is better however to be very explicit. So instead of passing a
  repository and implicitly understanding that it happens to provide a
  service to the entity, declare the provided functionality as its own
  interface and have the entity depend on that.</p>
</blockquote>

<p>a) So single reason for not injecting <em>Domain Service</em> into <em>Domain Entity</em> is due to violation of SRP?</p>

<p>b) </p>

<blockquote>
  <p>declare the provided functionality as its own interface</p>
</blockquote>

<p>I assume you're suggesting to use role-based interfaces? But wouldn't even injecting a role-based interface  ( implemented by say <em>Domain Service</em> ) into <em>Domain Entity</em> cause violation of SRP, since as you noted in <strong>1a</strong>, the injected functionality would most probably be needed only for a single behavior of <em>Domain Entity</em>?! </p>

<p>It appears you and Aaron Hawkins are on the opposite sides with regards to passing <strong>IS</strong> to methods of <em>Domain Entities</em>?!</p>

<p><strong>THIRD UPDATE:</strong></p>

<p>1)</p>

<p>a)</p>

<blockquote>
  <blockquote>
    <p>So if I understood you correctly - Injecting IS into Domain Service DS
    doesn't violate SRP, because DS is using it to execute its designated
    tasks ( ie its designated responsibility), while injecting IS into
    Domain Entity is a violation of SRP because primary responsibility of
    Domain Entity is focusing on its life cycle and identity, and ISmost
    of the times isn't an integral part in managing these two tasks ( ie
    focusing on life cycle and identity )?</p>
  </blockquote>
  
  <p>Yes that is correct and one of the primary reasons.</p>
</blockquote>

<p>I - From the distance it seems perfectly reasonable how by injecting <strong>IS</strong> into <em>Domain Entity</em> <strong>DE</strong>, this <strong>DE</strong> would violate SRP, because <strong>IS</strong> won't contribute to managing the two task designated to <strong>DE</strong>.</p>

<p>But it's a bit harder when trying to imagine this scenario in more detail. Namely, if methods of <strong>DE</strong> are focused on managing the two designated task ( ie its life cycle and identity ), then if one of these methods needs <strong>IS</strong>, wouldn't it be reasonable to assume it needs <strong>IS</strong> to accomplish the two designated task and not some other task unrelated to <strong>DE's</strong> life cycle and identity? If yes, then how could we claim <strong>DE</strong> violates SRP?</p>

<p>II - I also have hard time imagining what exactly is meant by managing <strong>DE's</strong> life cycle and identity. For starters, once <strong>DE</strong> is assigned an identity, this identity doesn't change. So what about its identity would we need to manage? </p>

<p>III - And what is meant by managing <strong>DE's</strong> life cycle? Perhaps defining the invariants on <strong>DE</strong> which keep its data consistent or ...?</p>

<p>IV -  So all other tasks ( ie those that aren't related to DE's life cycle and identity )  that real world entity performs should  be factored out from <strong>DE</strong> and put into related objects? </p>

<p>d) </p>

<blockquote>
  <blockquote>
    <p>If IS implemented a role-based interface containing a single method,
    and instead we pass this role-based interface as an argument to domain
    method, would you still consider this as a violation of SRP? If not,
    why not?</p>
  </blockquote>
  
  <p>It isn't terrible to do it, but it has potential to violate SRP or as
  more clearly specified by guillaume31 - ISP. </p>
</blockquote>

<p>I'm not sure how we can claim injecting <strong>IS</strong> into <strong>DE</strong> could violate <strong>ISP</strong>, since to my knowledge <strong>ISP</strong> can only be violated by an object that implements this interface and not an object into which an implementation of this interface is injected? </p>

<p><strong>FOURTH UPDATE:</strong></p>

<p>I'm beginning to realize SRP is way more confusing than I initially thought</p>

<p>a)</p>

<blockquote>
  <p>Behavior associated with the entity, which usually entails state
  changes, should also be placed into the entity. If such behavior
  requires use of a service, pass that service in, but generally try to
  place as much behavior into the entity as possible.</p>
</blockquote>

<p>IV â€“ 1 The following behavioral methods don't include state changes, but I gather they too should belong to a <code>Dog</code> entity:</p>

<pre><code>class Dog
{
            ...
       void DoBark();
       void DoFetch();
       void DoGuard();

       Breed    GetBreed();
       Pedigree GetPedigree();
       Snack    FavSnack();
}
</code></pre>

<p>IV â€“ b) Are <code>GetBreed</code>, <code>GetPedigree</code> and <code>FavSnack</code> behavioral methods? If yes, then properties <code>Breed</code>, <code>Pedigree</code> and <code>Snack</code> should also be considered as behaviors, since they essentially provide the same functionality ( assuming that <code>GetBreed</code>, <code>GetPedigree</code> and <code>FavSnack</code> don't do some heavy computation, but simply return the objects ):</p>

<pre><code>class Dog
{
            ...
       void DoBark();
       void DoFetch();
       void DoGuard();

       Breed    Breed { get{...} }
       Pedigree Pedigree { get{...} }
       Snack    Snack { get{...} }
}
</code></pre>

<p>IV â€“ c) if above properties also had <em>setters</em>, would we say they contain <em>state-changing behavior</em>?</p>

<p>IV â€“ d) </p>

<blockquote>
  <p>Behavior associated with the entity, which usually entails state
  changes, should also be placed into the entity.</p>
</blockquote>

<p>But if main responsibility of <em>Domain Entity</em> is managing its life cycle, then wouldn't including behavior not related to managing the life cycle be a violation of SRP ( in above example, methods such as <code>Dog.DoBark</code> most probably don't have much to do with <code>Dog</code>'s life cycle)?!</p>

<p>d)</p>

<p>I. </p>

<blockquote>
  <p>Passing IS to a DE behavioral method is better, however can violate
  SRP/ISP if IS interface has lots of things unrelated to the behavior
  at hand. This is the basic premise of ISP - dependencies should be
  made on specific interfaces as opposed to bloated interfaces that
  happen to contain the required functionality.</p>
</blockquote>

<p>so if <strong>IS</strong> passed as an argument to one of DE's <em>behavioral methods</em> does have some operations unrelated to behavior at hand, but DE's method <strong>M</strong> doesn't use any of <strong>IS</strong>'s methods unrelated to behavior <strong>M</strong> should be handling, we still consider DE to be violating SRP/ISP?</p>

<p>II. â€“ I understand what you're saying, but my confusion steams from the fact that according to the following definitions of ISP, the term should only be used to designate that an object <strong>ServObj</strong> implementing  a particular interface is violating ISP, while object into which <strong>ServObj</strong> is injected is violating SRP ( due to receiving <strong>ServObj</strong> ):</p>

<blockquote>
  <p>The Interface Segregation Principle is similar to the Single
  Responsibility Principle in that both deal with the cohesion of
  responsibilities. In fact, the ISP can be understood as the
  application of the SRP to an objectâ€™s public interface.</p>
  
  <p>To a certain extent, ISP can be considered a sub-set, or more specific
  form of the Single Responsibility Principle. The perspective shift of
  ISP, though, examines the public API for a given class or module.</p>
</blockquote>

<p>thank you</p>

    </div>
    <div class="post-taglist">
        <a href="/questions/tagged/domain-driven-design" class="post-tag" title="show questions tagged &#39;domain-driven-design&#39;" rel="tag">domain-driven-design</a> 
    </div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/q/14612673" title="short permalink to this question" class="short-link" id="link-post-14612673">share</a><span class="lsep">|</span><a href="/posts/14612673/edit" class="suggest-edit-post" title="">improve this question</a></div>        
    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/14612673/revisions" title="show all edits to this post">edited <span title="2013-02-01 19:58:00Z" class="relativetime">Feb 1 at 19:58</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
    <td class="post-signature owner">
        <div class="user-info ">
    <div class="user-action-time">
        asked <span title="2013-01-30 20:04:35Z" class="relativetime">Jan 30 at 20:04</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/437291/user437291"><div><img src="https://www.gravatar.com/avatar/1a9015aa066c0cef4f2ac7a99e3e3706?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/437291/user437291">user437291</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">1,191</span><span title="11 silver badges"><span class="badge2"></span><span class="badgecount">11</span></span><span title="21 bronze badges"><span class="badge3"></span><span class="badgecount">21</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</div>
</td>
        </tr>
<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-14612673" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-20423580" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">It seems you&#39;re mixing up responsibility with collaboration. An object can perfectly need multiple collaborators (either injected into it via its constructor or passed as arguments of methods) in order to achieve its sole responsibility. This doesn&#39;t violate SRP. Injecting a collaborator != adding a responsibility.</span>
	&ndash;&nbsp;
		<a href="/users/329660/guillaume31" 
		   title="3456 reputation" 
		   class="comment-user">guillaume31</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 10:33:23Z" class="relativetime-clean">Jan 31 at 10:33</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20428356" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@guillaume31: A - So you don&#39;t agree with eulerfx that injecting a collaborator breaks SRP of an entity? B - with regards to your comment about ISP - can&#39;t ISP be violated only by object that implements the interface and not an object into which this interface implementation is injected?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 13:08:14Z" class="relativetime-clean">Jan 31 at 13:08</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-14612673" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid answering questions in comments." 
				>add comment</a>
    </td>
</tr>            </table>    
</div>


			<div id="answers">

				<a name="tab-top"></a>
				<div id="answers-header">
					<div class="subheader answers-subheader">
						<h2>
								2 Answers
						</h2>
						<div>
							<div id="tabs">
        <a href="/questions/14612673/how-should-domain-services-call-infrastructure-services?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
        <a href="/questions/14612673/how-should-domain-services-call-infrastructure-services?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
        <a class="youarehere" href="/questions/14612673/how-should-domain-services-call-infrastructure-services?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>
</div>
						</div>
					</div>    
				</div>    




  
<a name="14613743"></a>
<div id="answer-14613743" class="answer accepted-answer" data-answerid="14613743" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="14613743">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">4</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


        <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>1a) An IS can be injected into a domain service if it needs it for functionality - ie not passed to method. This is different than entities and it is because a domain service is stateless and so it can be configured with required dependencies once and used where needed, such as by other entities.</p>

<p>1b) A domain service should be passed to entity as argument much like you would pass a repository interface as argument. The same principles apply. Also, passing entire repository interface can create needless coupling and so it is better to declare and pass a role specific interface.</p>

<p><strong>UPDATE</strong></p>

<p>1a) That is one reason. Another is that is creates needless coupling. If a repository is needed for only a single behavior on the entity, why inject it into entity all the time? Also, now you have to consider how you will resolve those dependencies? Make entities part of dependency injection graph? This quickly overloads the responsibilities of the entity.</p>

<p>1b) Violation of PI is an instance of the more general concept of violating the single responsibility principle. You can still pass an IS to a domain entity method and the problem here wouldn't be violation of PI since you're passing an interface, not an implementation. The problem would be violation of SRP if the domain method only used one method on the IS interface.</p>

<p>1c) See 1a)</p>

<p>1d) No because PI is maintained with the use of interfaces. </p>

<p>2) Yes, which is why I would suggest avoiding passing repository interfaces directly. The principles are similar because you can think of both a repository interface and a domain service as abstract services that provide some behavior interesting for a domain entity. It is better however to be very explicit. So instead of passing a repository and implicitly understanding that it happens to provide a service to the entity, declare the provided functionality as its own interface and have the entity depend on that.</p>

<p><strong>UPDATE 2</strong></p>

<p>1a) Yes that is correct and one of the primary reasons.</p>

<p>1b) It isn't terrible to do it, but it has potential to violate SRP or as more clearly specified by <strong>guillaume31</strong> - <a href="http://en.wikipedia.org/wiki/Interface_segregation_principle" rel="nofollow">ISP</a>. So it is better than say injecting into entity instance, but could be improved by declaring a specific interface.</p>

<p>And no, if you create a role-based interface then this is as good as it gets in this scenario.</p>

<p>1d) If an entity uses a repository interface to persist itself then this is a violation of PI. However, if it uses a repository interface to perform some query in order to run its business logic, then we're not really talking about persistence. And to really decouple the repository, employ a role specific interface instead.</p>

<p>2a) Yes, for the same reason that it isn't appropriate to inject repository into entity.</p>

<p>2b) Yes, but I'm only suggesting that in the scenario where you're passing a domain service to a behavioral method on the entity, not injecting it into the entity instance itself.</p>

<p><strong>UPDATE 3</strong></p>

<p>1a) This can be a point of contention I agree. However, from a practical point of view, it is better to design DEs such that their dependencies on external services are either eliminated or made very explicit and isolated. If your DE has an instance dependency on an IS, that means that whenever an instance of the DE is created, such as during reconstitution or when creating a new entity, the IS must be provided at that time. This complicates the dependency graph. Moreover, if a DE is responsible for maintaining the integrity of its own state, why would there be a dependency on an external service? There may be a need for a service to invoke some behavior, but to maintaining integrity can usually be accomplished without external services. In fact, dependencies on external services in this way is usually a smell of conflated responsibilities.</p>

<p>II, III) This includes such things as protecting invariants. For example, an entity could ensure that its values don't get into an inconsistent state by raising an exception. This is a fundamental premise of OOP - encapsulate state and expose behavior.</p>

<p>IV) Behavior associated with the entity, which usually entails state changes, should also be placed into the entity. If such behavior requires use of a service, pass that service in, but generally try to place as much behavior into the entity as possible. This won't always be perfect, but you can strive for the ideal.</p>

<p>d) To be sure, when I say injecting IS I mean having a required instance reference to an IS from a DE. This is discouraged for reasons above. Passing IS to a DE behavioral method is better, however can violate SRP/ISP if IS interface has lots of things unrelated to the behavior at hand. This is the basic premise of ISP - dependencies should be made on specific interfaces as opposed to bloated interfaces that happen to contain the required functionality.</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/14613743" title="short permalink to this answer" class="short-link" id="link-post-14613743">share</a><span class="lsep">|</span><a href="/posts/14613743/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/14613743/revisions" title="show all edits to this post">edited <span title="2013-02-01 17:10:29Z" class="relativetime">Feb 1 at 17:10</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info user-hover">
    <div class="user-action-time">
        answered <span title="2013-01-30 21:04:17Z" class="relativetime">Jan 30 at 21:04</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/13855/eulerfx"><div><img src="https://www.gravatar.com/avatar/b77449b8f50156a990b943706370410e?s=32&d=identicon&r=PG" alt="" width="32" height="32"></div></a>
    </div>
    <div class="user-details">
        <a href="/users/13855/eulerfx">eulerfx</a><br>
        <span class="reputation-score" title="reputation score 13871" dir="ltr">13.9k</span><span title="3 gold badges"><span class="badge1"></span><span class="badgecount">3</span></span><span title="19 silver badges"><span class="badge2"></span><span class="badgecount">19</span></span><span title="43 bronze badges"><span class="badge3"></span><span class="badgecount">43</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-14613743" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="1" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-20408791" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Can you see my update?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-30 22:08:37Z" class="relativetime-clean">Jan 30 at 22:08</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20422315" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">&quot;The problem would be violation of SRP if the domain method only used one method on the IS interface.&quot; - you mean violation of <b>ISP</b>, right ?</span>
	&ndash;&nbsp;
		<a href="/users/329660/guillaume31" 
		   title="3456 reputation" 
		   class="comment-user">guillaume31</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 09:52:54Z" class="relativetime-clean">Jan 31 at 9:52</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20428362" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Eulerfx, can you see my second update?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 13:08:50Z" class="relativetime-clean">Jan 31 at 13:08</span></span>
		<span class="edited-yes" title="this comment was edited 1 time"></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20436577" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">@guillaume31 yes, SRP, ISP, they are all essentially the same</span>
	&ndash;&nbsp;
		<a href="/users/13855/eulerfx" 
		   title="13871 reputation" 
		   class="comment-user">eulerfx</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 16:54:34Z" class="relativetime-clean">Jan 31 at 16:54</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20440860" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Can you see my third update?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 19:13:15Z" class="relativetime-clean">Jan 31 at 19:13</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-14613743" data-rep=50 data-anon=true
			   class="comments-link " 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like â€œ+1â€? or â€œthanksâ€?." 
				>show <b>1</b> more comment</a>
    </td>
</tr>
    </table>
</div>
<script type="text/javascript">
                var ados = ados || {};ados.run = ados.run || [];
                ados.run.push(function() { ados_add_placement(22,8277,"adzerk523380138",4).setZone(44) ; });                    
            </script>
            <div class="everyonelovesstackoverflow" id="adzerk523380138">
            </div>
  
<a name="14613695"></a>
<div id="answer-14613695" class="answer" data-answerid="14613695" >
    <table>
        <tr>
            <td class="votecell">
                

<div class="vote">
    <input type="hidden" name="_id_" value="14613695">
    <a class="vote-up-off" title="This answer is useful">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This answer is not useful">down vote</a>
    


</div>

            </td>



<td class="answercell">
    <div class="post-text"><p>The domain entities should know nothing about persistence (repositories) or processes (domain services).  Instead, your application will orchestrate these together.  </p>

<p>Here is the repository orchestration for example:</p>

<pre><code>ISomeAggregateRepository repository = //TODO: Construct repository and load it with the de-hydrated aggregates you intend to work with under your scope.
foreach (SomeAggregate someAggregate in repository) //The repository functions like an in memory collection.
{
    someAggregate.DoSomethingCool(); //The domain aggregate would expose an event to let the repository know that this method has been called and that the instance should be saved afterwards. (mimicking saving to a reference)
}
</code></pre>

<p>Here is the domain service orchestration for example:</p>

<pre><code>ISomeDomainService service = new ConcreteInfrastructuralSpecificDomainService();
service.DoSomethingCool(SomeAggregate target); //Send the aggregate to the domain service, not the other way around.
</code></pre>

<p>I was on the same track as you for the longest time and was very confused, but once I figured out how to organize the code in the way my examples depict, things became much more clear. </p>

<p>Just remember that the application should be what chooses the implementation (usually infrastructure specific) of your repositories, domain services, and potentially your unit of work.</p>

<p>Hope this helps!</p>

<p><strong>UPDATE</strong></p>

<blockquote>
  <p>A - You mean only Application layer should create and use Domain Services, while Domain Entities shouldn't even know they exist? But why?</p>
</blockquote>

<p>Here are a few that I came up with off the top of my head.  I wouldn't consider this a complete list, but should be enough to warrant my statement.</p>

<ul>
<li><p>Encapsulation (The inner workings of the domain aggregates are not exposed to implementations of the would-be passed repositories and/or domain services)</p></li>
<li><p>Repositories/Domain Services are inherently infrastructure and as such, should not be combined into your business domain which keeps your business logic clean and expressive. (The interfaces are in the domain to provide implementers a contractual way of implementing repositories/domain services preventing the need for an application to reference more projects than needed.)</p></li>
<li><p>Making your domain ignorant of repositories/domain services further enforces the decoupling and possible dependency that would be going in the wrong direction (infrastructure project should reference domain project, not vice versa which could happen if someone implements your domain without dependency injection by passing in a <em>referenced</em> concrete implementation).</p></li>
<li><p>Change Management/Maintainability (see <a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/" rel="nofollow">Onion Architecture</a>)</p></li>
</ul>

<blockquote>
  <p>B - I assume all of the code you posted resides within Application layer?</p>
</blockquote>

<p>You are correct good sir!</p>
</div>
    <table class="fw">
    <tr>
    <td class="vt">
<div class="post-menu"><a href="/a/14613695" title="short permalink to this answer" class="short-link" id="link-post-14613695">share</a><span class="lsep">|</span><a href="/posts/14613695/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td align="right" class="post-signature">
<div class="user-info ">
    <div class="user-action-time">
        <a href="/posts/14613695/revisions" title="show all edits to this post">edited <span title="2013-01-30 23:01:08Z" class="relativetime">Jan 30 at 23:01</span></a>
    </div>
    <div class="user-gravatar32">
        
    </div>
    <div class="user-details">
        <br>
        
    </div>
</div>    </td>
            


    <td align="right" class="post-signature">   
       

    <div class="user-info ">
    <div class="user-action-time">
        answered <span title="2013-01-30 21:01:39Z" class="relativetime">Jan 30 at 21:01</span>
    </div>
    <div class="user-gravatar32">
        <a href="/users/291638/aaron-hawkins"><div class="gravatar-wrapper-32"><img src="http://i.stack.imgur.com/nt344.png?s=32&g=1" alt=""></div></a>
    </div>
    <div class="user-details">
        <a href="/users/291638/aaron-hawkins">Aaron Hawkins</a><br>
        <span class="reputation-score" title="reputation score " dir="ltr">543</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="9 bronze badges"><span class="badge3"></span><span class="badgecount">9</span></span>
    </div>
</div>
    </td>
    </tr>
    </table>
</td>        </tr>

<tr>
    <td class="votecell"></td>
    <td>
	    <div id="comments-14613695" class="comments" data-localized="true">
		    <table>
			    <tbody data-remaining-comments-count="0" 
			           data-addlink-html="add comment" 
			           data-addlink-disabled="true">

    <tr id="comment-20408847" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">A - &quot;Just remember that the application should be what chooses the implementation (usually infrastructure specific) of your repositories, domain services ...&quot; You mean only Application layer should create and use Domain Services, while Domain Entities shouldn&#39;t even know they exist? But why? B - I assume all of the code you posted resides within Application layer?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-30 22:10:29Z" class="relativetime-clean">Jan 30 at 22:10</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20410056" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Please see update.</span>
	&ndash;&nbsp;
		<a href="/users/291638/aaron-hawkins" 
		   title="543 reputation" 
		   class="comment-user">Aaron Hawkins</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-30 23:01:23Z" class="relativetime-clean">Jan 30 at 23:01</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20411949" class="comment">
        <td>
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">&quot;Encapsulation (The inner workings of the domain aggregates are not exposed to implementations of the would-be passed repositories and/or domain services)&quot; How would passing Repositories/Domain Services to a Domain Entity expose its inner workings ( perhaps you&#39;re suggesting that methods on domain entities should be exposed to Application layer )?</span>
	&ndash;&nbsp;
		<a href="/users/437291/user437291" 
		   title="1191 reputation" 
		   class="comment-user owner">user437291</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 00:42:52Z" class="relativetime-clean">Jan 31 at 0:42</span></span>
				</div>

        </td>
    </tr>
    <tr id="comment-20430394" class="comment">
        <td class="comment-actions">
            <table>
                <tbody>
                    <tr>
                        <td class="comment-score">
                            
                                <span title="number of &#39;useful comment&#39; votes received" 
                                        class="cool">1</span>   
                        </td>
                        <td>
                                &nbsp;
                        </td>
                    </tr>
                </tbody>
            </table>   
        </td>
        <td class="comment-text">
            <div style="display: block;" class="comment-body">
	<span class="comment-copy">Maybe exposed was the wrong word.  If you&#39;re passing the repositories/domain services into the entity for the entity to call, you may end up writing code inside your repository/domain service expecting the entity to be in a particular state when that method is called which means that it will be expecting the call at a certain stage within the domain method.  This breaks encapsulation because the repository/domain service should not care (aside from validation) what state the domain entity is in.  The entity should be able to be persisted or processed regardless of its state.</span>
	&ndash;&nbsp;
		<a href="/users/291638/aaron-hawkins" 
		   title="543 reputation" 
		   class="comment-user">Aaron Hawkins</a>
	<span class="comment-date" dir="ltr"><span title="2013-01-31 14:04:37Z" class="relativetime-clean">Jan 31 at 14:04</span></span>
				</div>

        </td>
    </tr>
			    </tbody>
		    </table>
	    </div>
			<a id="comments-link-14613695" data-rep=50 data-anon=true
			   class="comments-link disabled-link" 
			   title="Use comments to ask for more information or suggest improvements. Avoid comments like â€œ+1â€? or â€œthanksâ€?." 
				>add comment</a>
    </td>
</tr>
    </table>
</div>
									<a name='new-answer'></a>
						<form id="post-form" action="/questions/14612673/answer/submit" method="post"  class="post-form">
							<input type="hidden" id="post-id" value="14612673" />
							<h2 class="space">Your Answer</h2>



    

<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">

    <div style="position: relative;">     
        <div class="wmd-container">
            <div id="wmd-button-bar" class="wmd-button-bar"></div>
            <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101" data-min-length=""></textarea>
        </div>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" type="hidden" value="924444e9d656bd8bb28009690bceb305">
        <input id="author" name="author" type="text">
    </div>
</div>
							<div style="position: relative;">
								
            <div class="form-item dno new-post-login">
        
                <div class="new-login-form">
                    <div class="new-login-left">
                        <h3>Sign up or <a id="login-link" href="/users/login?returnurl=%2fquestions%2f14612673%2fhow-should-domain-services-call-infrastructure-services%23new-answer">login</a></h3>
                        <script type="text/javascript">
                            StackExchange.ready(function () {
                                StackExchange.helpers.onClickDraftSave('#login-link');
                            });
                        </script>
                        <div class="preferred-login google-login">
                            <p><span class="icon"></span><span>Sign up using Google</span></p>
                        </div>
                        <div class="preferred-login facebook-login">
                            <p><span class="icon"></span><span>Sign up using Facebook</span></p>
                        </div>
                        <div class="preferred-login stackexchange-login">
                            <p><span class="icon"></span><span>Sign up using Stack Exchange</span></p>
                        </div>
                    </div>
                    <input type="hidden" name="manual-openid" class="manual-openid" />
                    <input type="hidden" name="use-facebook" class="use-facebook" value="false" />
                    <input type="button" class="submit-openid" value="Submit" style="display:none" />
                    <div class="new-login-right">
                                <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                StackExchange.ready(
                    function () {
                        StackExchange.openid.initPostLogin('.new-post-login', '%2fquestions%2f14612673%2fhow-should-domain-services-call-infrastructure-services%23new-answer');
                    }
                );
            </script>
            <noscript>
                        <h3>Post as a guest</h3>
    <div class="form-item">
        <table>
        <tr>
                    <script type="text/javascript">
                StackExchange.ready(function () {
                    StackExchange.helpers.bindHelpOverlayEvents($('.vm input'));
                });
            </script>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" type="text" size="30" maxlength="30" value="" tabindex="105">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" type="text" size="30" maxlength="100" value="" tabindex="106">
                    <span class="edit-field-overlay">required, but not shown</span>
                </div>
            </td>
        </tr>
        </table>
    </div>

            </noscript>
							</div>
           
															<div class="form-submit cbt">
									<input id="submit-button" type="submit" value="Post Your Answer" tabindex="110">
									<a href="#" class="discard-answer dno">discard</a>

<p class="privacy-policy-agreement">
By posting your answer, you agree to the <a href='http://stackexchange.com/legal/privacy-policy' target='_blank'>privacy policy</a> and <a href='http://stackexchange.com/legal/terms-of-service' target='_blank'>terms of service</a>.</p>
<input type="hidden" name="legalLinksShown" value="1" />								</div>
						</form>



						<h2 class="bottom-notice">
Not the answer you&#39;re looking for?							Browse other questions tagged <a href="/questions/tagged/domain-driven-design" class="post-tag" title="show questions tagged &#39;domain-driven-design&#39;" rel="tag">domain-driven-design</a>  or <a href="/questions/ask">ask your own question</a>.						</h2>
			</div>
		</div>
				<div id="sidebar" class="show-votes">
							<div class="module question-stats">
					<p class="label-key">tagged</p>
					<div class="tagged"><a href="/questions/tagged/domain-driven-design" class="post-tag" title="show questions tagged &#39;domain-driven-design&#39;" rel="tag">domain-driven-design</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">&times;</span>&nbsp;<span class="item-multiplier-count">2629</span></span><br>
</div>
					<table id="qinfo">
						<tr>
							<td>
								<p class="label-key">asked</p>
							</td>
							<td style="padding-left: 10px">
								<p class="label-key" title="2013-01-30 20:04:35Z"><b>10 months ago</b></p>
							</td>
						</tr>
						<tr>
							<td>
								<p class="label-key">viewed</p>
							</td>

							<td style="padding-left: 10px">
								<p class="label-key">
									<b>323 times</b>
								</p>
							</td>
						</tr>
							<tr>
								<td>
									<p class="label-key">active</p>
								</td>
								<td style="padding-left: 10px">
									<p class="label-key"><b><a href="?lastactivity" class="lastactivity-link" title="2013-02-01 19:58:00Z">10 months ago</a></b></p>
								</td>
							</tr>
					</table>
				</div>
						
			<script type="text/javascript">
                var ados = ados || {};ados.run = ados.run || [];
                ados.run.push(function() { ados_add_placement(22,8277,"adzerk61205029",17).setZone(45) ; });                    
            </script>
            <div class="everyonelovesstackoverflow" id="adzerk61205029">
            </div>  
    <div id="hireme">
        <script type="text/javascript">
window.careers_adurl="//careers.stackoverflow.com/gethired/js",window.careers_cssurl="//cdn-careers.sstatic.net/careers/gethired/sidebar.min.css?v=3c55a7a05afd",window.careers_leaderboardcssurl="//cdn-careers.sstatic.net/careers/gethired/ninja.min.css?v=78ccbfa5c59f",window.careers_companycssurl="//cdn-careers.sstatic.net/careers/gethired/company",window.careers_adselector="div.hireme, div#hireme",StackExchange.ready(function(){$.ajax({url:"//cdn-careers.sstatic.net/careers/gethired/loader.min.js?v=c151d0261983",dataType:"script",cache:!0})});        </script>
    </div>
			  
    
            

				<div class="module sidebar-related">
					<h4 id="h-related">Related</h4>
					<div class="related" data-tracker="rq=1">
						<div class="spacer">
<a href="/q/693221" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">10
    </div>
</a><a href="/questions/693221/ddd-where-to-keep-domain-interfaces-the-infrastructure" class="question-hyperlink">DDD: Where to keep domain Interfaces, the Infrastructure?</a>
</div>
<div class="spacer">
<a href="/q/4300859" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/4300859/interface-with-service-layer-or-domain-objects-themselves-ddd" class="question-hyperlink">Interface with service layer or domain objects themselves? (DDD)</a>
</div>
<div class="spacer">
<a href="/q/7252048" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">2
    </div>
</a><a href="/questions/7252048/entities-and-infrastructure-services" class="question-hyperlink">Entities and Infrastructure services</a>
</div>
<div class="spacer">
<a href="/q/7306109" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">7
    </div>
</a><a href="/questions/7306109/having-trouble-putting-real-world-logic-into-the-ddd-domain-layer" class="question-hyperlink">Having trouble putting real-world logic into the DDD domain layer</a>
</div>
<div class="spacer">
<a href="/q/14326230" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">3
    </div>
</a><a href="/questions/14326230/why-must-domain-services-use-domain-objects-as-parameters-and-return-values" class="question-hyperlink">Why must Domain services use domain objects as parameters and return values?</a>
</div>
<div class="spacer">
<a href="/q/14589641" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">3
    </div>
</a><a href="/questions/14589641/some-confusion-with-dependencies-between-application-and-infrastructure-layers" class="question-hyperlink">Some confusion with dependencies between Application and Infrastructure layers</a>
</div>
<div class="spacer">
<a href="/q/14860327" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">1
    </div>
</a><a href="/questions/14860327/do-domain-events-also-replace-injections-of-domain-services-into-entities" class="question-hyperlink">Do Domain Events also replace injections of Domain Services into entities?</a>
</div>
<div class="spacer">
<a href="/q/14943169" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes default">1
    </div>
</a><a href="/questions/14943169/anticorruption-layers-facades-services-and-srp" class="question-hyperlink">AntiCorruption layer&#39;s Facades, Services and SRP</a>
</div>
<div class="spacer">
<a href="/q/17503514" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">1
    </div>
</a><a href="/questions/17503514/domain-driven-design-where-should-we-put-repositories" class="question-hyperlink">Domain Driven Design - where should we put repositories?</a>
</div>
<div class="spacer">
<a href="/q/17979774" title="Vote score (upvotes - downvotes)">
    <div class="answer-votes answered-accepted default">4
    </div>
</a><a href="/questions/17979774/application-service-parameters-return-types" class="question-hyperlink">Application service parameters / return types</a>
</div>

					</div>
				</div>
		</div>
	
<div id="feed-link">
    <div id="feed-link-text"><a href="/feeds/question/14612673" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
	<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/14612673/ivc/04fc');});
</script>
<noscript>
    <div><img src="/posts/14612673/ivc/04fc" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang"></div></div>


        </div>
    </div>
    <div id="footer" class="categories">
        <div class="footerwrap">
            <div id="footer-menu">
                <div class="top-footer-links">
                        <a href="/about">about</a>
                    <a href="/help">help</a>
                        <a href="/help/badges">badges</a>
                    <a href="http://blog.stackexchange.com?blb=1">blog</a>
                        <a href="http://chat.stackoverflow.com">chat</a>
                    <a href="http://data.stackexchange.com">data</a>
                    <a href="http://stackexchange.com/legal">legal</a>
                    <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a>
                    <a href="http://stackexchange.com/about/hiring">jobs</a>
                    <a href="http://engine.adzerk.net/r?e=eyJhdiI6NDE0LCJhdCI6MjAsImNtIjo5NTQsImNoIjoxMTc4LCJjciI6Mjc3NiwiZG0iOjQsImZjIjoyODYyLCJmbCI6Mjc1MSwibnciOjIyLCJydiI6MCwicHIiOjExNSwic3QiOjAsInVyIjoiaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2Fib3V0L2NvbnRhY3QiLCJyZSI6MX0&s=hRods5B22XvRBwWIwtIMekcyNF8">advertising info</a>

                    <a onclick='StackExchange.switchMobile("on")'>mobile</a>
                    <b><a href="/contact">contact us</a></b>
                        <b><a href="http://meta.stackoverflow.com">feedback</a></b>
                    
                </div>
                <div id="footer-sites">
                    <table>
    <tr>
            <th colspan=3>
                Technology
            </th>
            <th >
                Life / Arts
            </th>
            <th >
                Culture / Recreation
            </th>
            <th >
                Science
            </th>
            <th >
                Other
            </th>
    </tr>
    <tr>
            <td>
                <ol>
                        <li><a href="http://stackoverflow.com" title="professional and enthusiast programmers">Stack Overflow</a></li>
                        <li><a href="http://serverfault.com" title="professional system and network administrators">Server Fault</a></li>
                        <li><a href="http://superuser.com" title="computer enthusiasts and power users">Super User</a></li>
                        <li><a href="http://webapps.stackexchange.com" title="power users of web applications">Web Applications</a></li>
                        <li><a href="http://askubuntu.com" title="Ubuntu users and developers">Ask Ubuntu</a></li>
                        <li><a href="http://webmasters.stackexchange.com" title="pro webmasters">Webmasters</a></li>
                        <li><a href="http://gamedev.stackexchange.com" title="professional and independent game developers">Game Development</a></li>
                        <li><a href="http://tex.stackexchange.com" title="users of TeX, LaTeX, ConTeXt, and related typesetting systems">TeX - LaTeX</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://programmers.stackexchange.com" title="professional programmers interested in conceptual questions about software development">Programmers</a></li>
                        <li><a href="http://unix.stackexchange.com" title="users of Linux, FreeBSD and other Un*x-like operating systems.">Unix &amp; Linux</a></li>
                        <li><a href="http://apple.stackexchange.com" title="power users of Apple hardware and software">Ask Different (Apple)</a></li>
                        <li><a href="http://wordpress.stackexchange.com" title="WordPress developers and administrators">WordPress Answers</a></li>
                        <li><a href="http://gis.stackexchange.com" title="cartographers, geographers and GIS professionals">Geographic Information Systems</a></li>
                        <li><a href="http://electronics.stackexchange.com" title="electronics and electrical engineering professionals, students, and enthusiasts">Electrical Engineering</a></li>
                        <li><a href="http://android.stackexchange.com" title="enthusiasts and power users of the Android operating system">Android Enthusiasts</a></li>
                        <li><a href="http://security.stackexchange.com" title="Information security professionals">Information Security</a></li>
                            </ol></td><td><ol>
                        <li><a href="http://dba.stackexchange.com" title="database professionals who wish to improve their database skills and learn from others in the community">Database Administrators</a></li>
                        <li><a href="http://drupal.stackexchange.com" title="Drupal developers and administrators">Drupal Answers</a></li>
                        <li><a href="http://sharepoint.stackexchange.com" title="SharePoint enthusiasts">SharePoint</a></li>
                        <li><a href="http://ux.stackexchange.com" title="user experience researchers and experts">User Experience</a></li>
                        <li><a href="http://mathematica.stackexchange.com" title="users of Mathematica">Mathematica</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#technology" class="more">
                                more (14)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://photo.stackexchange.com" title="professional, enthusiast and amateur photographers">Photography</a></li>
                        <li><a href="http://scifi.stackexchange.com" title="science fiction and fantasy enthusiasts">Science Fiction &amp; Fantasy</a></li>
                        <li><a href="http://cooking.stackexchange.com" title="professional and amateur chefs">Seasoned Advice (cooking)</a></li>
                        <li><a href="http://diy.stackexchange.com" title="contractors and serious DIYers">Home Improvement</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#lifearts" class="more">
                                more (13)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://english.stackexchange.com" title="linguists, etymologists, and serious English language enthusiasts">English Language &amp; Usage</a></li>
                        <li><a href="http://skeptics.stackexchange.com" title="scientific skepticism">Skeptics</a></li>
                        <li><a href="http://judaism.stackexchange.com" title="those who base their lives on Jewish law and tradition and anyone interested in learning more">Mi Yodeya (Judaism)</a></li>
                        <li><a href="http://travel.stackexchange.com" title="road warriors and seasoned travelers">Travel</a></li>
                        <li><a href="http://christianity.stackexchange.com" title="committed Christians, experts in Christianity and those interested in learning more">Christianity</a></li>
                        <li><a href="http://gaming.stackexchange.com" title="passionate videogamers on all platforms">Arqade (gaming)</a></li>
                        <li><a href="http://bicycles.stackexchange.com" title="people who build and repair bicycles, people who train cycling, or commute on bicycles">Bicycles</a></li>
                        <li><a href="http://rpg.stackexchange.com" title="gamemasters and players of tabletop, paper-and-pencil role-playing games">Role-playing Games</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#culturerecreation" class="more">
                                more (21)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://math.stackexchange.com" title="people studying math at any level and professionals in related fields">Mathematics</a></li>
                        <li><a href="http://stats.stackexchange.com" title="statisticians, data analysts, data miners and data visualization experts">Cross Validated (stats)</a></li>
                        <li><a href="http://cstheory.stackexchange.com" title="theoretical computer scientists and researchers in related fields">Theoretical Computer Science</a></li>
                        <li><a href="http://physics.stackexchange.com" title="active researchers, academics and students of physics">Physics</a></li>
                        <li><a href="http://mathoverflow.net" title="professional mathematicians">MathOverflow</a></li>
                    
                        <li>
                            <a href="http://stackexchange.com/sites#science" class="more">
                                more (7)
                            </a>
                        </li>
                </ol>
            </td>
            <td>
                <ol>
                        <li><a href="http://stackapps.com" title="apps, scripts, and development with the Stack Exchange API">Stack Apps</a></li>
                        <li><a href="http://meta.stackoverflow.com" title="meta-discussion of the Stack Exchange family of Q&amp;A websites">Meta Stack Overflow</a></li>
                        <li><a href="http://area51.stackexchange.com" title="proposing new sites in the Stack Exchange network">Area 51</a></li>
                        <li><a href="http://careers.stackoverflow.com">Stack Overflow Careers</a></li>
                    
                </ol>
            </td>
    </tr>
</table>
                </div>
            </div>

            <div id="copyright">
                site design / logo &#169; 2013 stack exchange inc; user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> 
 with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            <div id="footer-flair">
                <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
            </div>
            <div id="svnrev">
                rev 2013.12.13.1229
            </div>
            
        </div>
    </div>
    <noscript>
        <div id="noscript-warning">Stack Overflow works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>
<script type="text/javascript">var p = "http", d = "static"; if (document.location.protocol == "https:") { p += "s"; d = "engine"; } var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = p + "://" + d + ".adzerk.net/ados.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script>
<script type="text/javascript">
    var ados = ados || {};
    ados.run = ados.run || [];
    ados.run.push(function () { ados_setKeywords('domain-driven-design');; ados_load(); });         
</script>

    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-1']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|domain-driven-design|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    var _comscore = _comscore || [];
    (function () {
        var ssl='https:'==document.location.protocol,
            s=document.getElementsByTagName('script')[0],
            ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src=(ssl?'https://ssl':'http://www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src=(ssl?'https://secure':'http://edge')+'.quantserve.com/quant.js';
        s.parentNode.insertBefore(sc, s);
        
        var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
        s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
        el.parentNode.insertBefore(s, el);
        
    })();
    _comscore.push({ c1: "2", c2: "17440561" });
    _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>
            
</body>
</html>
