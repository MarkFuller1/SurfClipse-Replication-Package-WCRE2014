<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="en">  <head>    <TITLE>Java > Open Source Codes > java > io > ObjectInputStream _ Java API By Example, From Geeks To Geeks.</TITLE>    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">    <META name="description" content="Java > Open Source Codes > java > io > ObjectInputStream">    <META name="keywords" content="Free Books,Free book,Free Computer Books,Free Computer Book,Free Tech Books,Free Tech Book, j2ee, j2ee example, j2se, j2se example, j2me, j2me example, java, java example, java api, java api example, java jobs, free java books, Free Java Downloads, free java book, java development,enterprise java, java developer,java news,java,resources,jsp,servlets,tomcat,ejb,java and xml,jdo,jdbc,sqlj,jax,jaxp,jaxm,jaxb,jax-rpc,apache,jakarta,open source,wireless java,java 2 micro edition,struts,turbine,velocity,p2p java,jxta,jini,javaspaces,waba,java phone,i-mode,palm,java media,jvm,java 2 standard edition,c#,c sharp,jboss,java book excerpts,java api map,java.io.ObjectInputStream">    <link rel="stylesheet" type="text/css" href="/cmn/stylesheet.css" />    <link rel="stylesheet" type="text/css" href="/cmn/kickjava.css" />    <script type="text/javascript" src="/cmn/kickjava.js"></script>    <script type="text/javascript" src="/cmn/kickjava1.js"></script>  </head>  <body lang="en" onload="doBodyOnLoad();">     <script type="text/javascript">doBodyBegin();</script>     <noscript>     <BR/>      Your browser does not support JavaScript and this site utilizes JavaScript to build content and provide links to additional information. You should either enable JavaScript in your browser settings or use a browser that supports JavaScript in order to take full advantage of this site.     <BR/>     </noscript>    <div id="pageWrapper">      <table id="masthead">        <tr>          <td id="mastheadLeft" >            <A href="http://KickJava.com" target="_top"><img src="/cmn/kickjava.gif" alt="KickJava"></a>&nbsp;&nbsp;&nbsp;Java <acronym title="Application Programming Interface">API</acronym> By Example, From Geeks To Geeks.          </td>          <td id="mastheadRight">            <!-- Google CSE Search Box Begins -->            <form id="searchbox_016019849777797803616:sbkqcucs8tc" action="http://KickJava.com/cmn/googlesearch.html">              <input type="hidden" name="cx" value="016019849777797803616:sbkqcucs8tc" />              <input name="q" type="text" size="20" />                    <input type="image" src="/cmn/go.gif"  name="sa"  border="0" alt="Search Now">              <input type="hidden" name="cof" value="FORID:9" />            </form>            <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_016019849777797803616%3Asbkqcucs8tc"></script>            <!-- Google CSE Search Box Ends -->          </td>        </tr>      </table>      <div id="PageHeading" class="inside">        <h1><A HREF="/">Java</A> > <A HREF="/src">Open Source Codes</A> > <a href="/src/java.index.htm">java</a> > <a href="/src/java.io.index.htm">io</a> > <B>ObjectInputStream</B></h1>        <script type="text/javascript">doPageHeading();</script>      </div>      <table id="Top1">        <tr>          <td id="Top11"><script type="text/javascript">doTop11();</script></td>          <td id="Top12"><script type="text/javascript">doTop12();</script></td>        </tr>      </table>      <table id="Top2">        <tr>          <td id="Top21"><script type="text/javascript">doTop21();</script></td>          <td id="Top22"><script type="text/javascript">doTop22();</script></td>        </tr>      </table>      <table id="outerColumnContainer">        <tr id="innerColumnContainer">          <td id="contentColumn">            <div id="contentHeading1" class="inside">              <!--contentHeading1-->            </div>            <div id="contentColumn1" class="inside">              <!--contentColumn1-->              <script type="text/javascript">doContentColumn1();</script>            </div>            <div id="contentHeading2" class="inside">              <!--contentHeading2-->            </div>            <div id="contentColumn2" class="inside">              <CODE><br><FONT ID="LN">1   </FONT><A NAME="1"></A><FONT ID="MultiLineComment">/*<br><FONT ID="LN">2   </FONT><A NAME="2"></A>&nbsp;* @(#)ObjectInputStream.java   1.157 06/04/05<br><FONT ID="LN">3   </FONT><A NAME="3"></A>&nbsp;*<br><FONT ID="LN">4   </FONT><A NAME="4"></A>&nbsp;* Copyright 2004 Sun Microsystems, Inc. All rights reserved.<br><FONT ID="LN">5   </FONT><A NAME="5"></A>&nbsp;* SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.<br><FONT ID="LN">6   </FONT><A NAME="6"></A>&nbsp;*/</FONT><br><FONT ID="LN">7   </FONT><A NAME="7"></A><br><FONT ID="LN">8   </FONT><A NAME="8"></A><FONT ID="Package">package</FONT> java.io;<br><FONT ID="LN">9   </FONT><A NAME="9"></A><br><FONT ID="LN">10  </FONT><A NAME="10"></A><FONT ID="Import">import</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">java.io.ObjectStreamClass.WeakClassKey</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">11  </FONT><A NAME="11"></A><FONT ID="Import">import</FONT> <A HREF="../../java/lang/ref/ReferenceQueue.java.htm">java.lang.ref.ReferenceQueue</A>  <A HREF= "/1492.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">12  </FONT><A NAME="12"></A><FONT ID="Import">import</FONT> <A HREF="../../java/lang/reflect/Array.java.htm">java.lang.reflect.Array</A>  <A HREF= "/1144.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">13  </FONT><A NAME="13"></A><FONT ID="Import">import</FONT> <A HREF="../../java/lang/reflect/Modifier.java.htm">java.lang.reflect.Modifier</A>  <A HREF= "/24.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">14  </FONT><A NAME="14"></A><FONT ID="Import">import</FONT> <A HREF="../../java/lang/reflect/Proxy.java.htm">java.lang.reflect.Proxy</A>  <A HREF= "/1159.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">15  </FONT><A NAME="15"></A><FONT ID="Import">import</FONT> <A HREF="../../java/security/AccessController.java.htm">java.security.AccessController</A>  <A HREF= "/2433.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">16  </FONT><A NAME="16"></A><FONT ID="Import">import</FONT> <A HREF="../../java/security/PrivilegedAction.java.htm">java.security.PrivilegedAction</A>  <A HREF= "/1819.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">17  </FONT><A NAME="17"></A><FONT ID="Import">import</FONT> <A HREF="../../java/util/Arrays.java.htm">java.util.Arrays</A>  <A HREF= "/548.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">18  </FONT><A NAME="18"></A><FONT ID="Import">import</FONT> <A HREF="../../java/util/HashMap.java.htm">java.util.HashMap</A>  <A HREF= "/754.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">19  </FONT><A NAME="19"></A><FONT ID="Import">import</FONT> <A HREF="../../java/util/concurrent/ConcurrentHashMap.java.htm">java.util.concurrent.ConcurrentHashMap</A>  <A HREF= "/3646.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">20  </FONT><A NAME="20"></A><FONT ID="Import">import</FONT> <A HREF="../../java/util/concurrent/ConcurrentMap.java.htm">java.util.concurrent.ConcurrentMap</A>  <A HREF= "/3797.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">21  </FONT><A NAME="21"></A><FONT ID="Import">import</FONT> <A HREF="../../java/util/concurrent/atomic/AtomicBoolean.java.htm">java.util.concurrent.atomic.AtomicBoolean</A>  <A HREF= "/3612.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">22  </FONT><A NAME="22"></A><FONT ID="Import">import</FONT> <FONT ID="Static">static</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">java.io.ObjectStreamClass.processQueue</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">23  </FONT><A NAME="23"></A><br><FONT ID="LN">24  </FONT><A NAME="24"></A><FONT ID="FormalComment">/**<br><FONT ID="LN">25  </FONT><A NAME="25"></A>&nbsp;* An ObjectInputStream deserializes primitive data and objects previously<br><FONT ID="LN">26  </FONT><A NAME="26"></A>&nbsp;* written using an ObjectOutputStream.<br><FONT ID="LN">27  </FONT><A NAME="27"></A>&nbsp;* <br><FONT ID="LN">28  </FONT><A NAME="28"></A>&nbsp;* &lt;p&gt;ObjectOutputStream and ObjectInputStream can provide an application with<br><FONT ID="LN">29  </FONT><A NAME="29"></A>&nbsp;* persistent storage for graphs of objects when used with a FileOutputStream<br><FONT ID="LN">30  </FONT><A NAME="30"></A>&nbsp;* and FileInputStream respectively.  ObjectInputStream is used to recover<br><FONT ID="LN">31  </FONT><A NAME="31"></A>&nbsp;* those objects previously serialized. Other uses include passing objects<br><FONT ID="LN">32  </FONT><A NAME="32"></A>&nbsp;* between hosts using a socket stream or for marshaling and unmarshaling<br><FONT ID="LN">33  </FONT><A NAME="33"></A>&nbsp;* arguments and parameters in a remote communication system.<br><FONT ID="LN">34  </FONT><A NAME="34"></A>&nbsp;*<br><FONT ID="LN">35  </FONT><A NAME="35"></A>&nbsp;* &lt;p&gt;ObjectInputStream ensures that the types of all objects in the graph<br><FONT ID="LN">36  </FONT><A NAME="36"></A>&nbsp;* created from the stream match the classes present in the Java Virtual<br><FONT ID="LN">37  </FONT><A NAME="37"></A>&nbsp;* Machine.  Classes are loaded as required using the standard mechanisms.<br><FONT ID="LN">38  </FONT><A NAME="38"></A>&nbsp;*<br><FONT ID="LN">39  </FONT><A NAME="39"></A>&nbsp;* &lt;p&gt;Only objects that support the java.io.Serializable or<br><FONT ID="LN">40  </FONT><A NAME="40"></A>&nbsp;* java.io.Externalizable interface can be read from streams.<br><FONT ID="LN">41  </FONT><A NAME="41"></A>&nbsp;*<br><FONT ID="LN">42  </FONT><A NAME="42"></A>&nbsp;* &lt;p&gt;The method &lt;code&gt;readObject&lt;/code&gt; is used to read an object from the<br><FONT ID="LN">43  </FONT><A NAME="43"></A>&nbsp;* stream.  Java's safe casting should be used to get the desired type.  In<br><FONT ID="LN">44  </FONT><A NAME="44"></A>&nbsp;* Java, strings and arrays are objects and are treated as objects during<br><FONT ID="LN">45  </FONT><A NAME="45"></A>&nbsp;* serialization. When read they need to be cast to the expected type.<br><FONT ID="LN">46  </FONT><A NAME="46"></A>&nbsp;*<br><FONT ID="LN">47  </FONT><A NAME="47"></A>&nbsp;* &lt;p&gt;Primitive data types can be read from the stream using the appropriate<br><FONT ID="LN">48  </FONT><A NAME="48"></A>&nbsp;* method on DataInput.<br><FONT ID="LN">49  </FONT><A NAME="49"></A>&nbsp;* <br><FONT ID="LN">50  </FONT><A NAME="50"></A>&nbsp;* &lt;p&gt;The default deserialization mechanism for objects restores the contents<br><FONT ID="LN">51  </FONT><A NAME="51"></A>&nbsp;* of each field to the value and type it had when it was written.  Fields<br><FONT ID="LN">52  </FONT><A NAME="52"></A>&nbsp;* declared as transient or static are ignored by the deserialization process.<br><FONT ID="LN">53  </FONT><A NAME="53"></A>&nbsp;* References to other objects cause those objects to be read from the stream<br><FONT ID="LN">54  </FONT><A NAME="54"></A>&nbsp;* as necessary.  Graphs of objects are restored correctly using a reference<br><FONT ID="LN">55  </FONT><A NAME="55"></A>&nbsp;* sharing mechanism.  New objects are always allocated when deserializing,<br><FONT ID="LN">56  </FONT><A NAME="56"></A>&nbsp;* which prevents existing objects from being overwritten.<br><FONT ID="LN">57  </FONT><A NAME="57"></A>&nbsp;*<br><FONT ID="LN">58  </FONT><A NAME="58"></A>&nbsp;* &lt;p&gt;Reading an object is analogous to running the constructors of a new<br><FONT ID="LN">59  </FONT><A NAME="59"></A>&nbsp;* object.  Memory is allocated for the object and initialized to zero (NULL).<br><FONT ID="LN">60  </FONT><A NAME="60"></A>&nbsp;* No-arg constructors are invoked for the non-serializable classes and then<br><FONT ID="LN">61  </FONT><A NAME="61"></A>&nbsp;* the fields of the serializable classes are restored from the stream starting<br><FONT ID="LN">62  </FONT><A NAME="62"></A>&nbsp;* with the serializable class closest to java.lang.object and finishing with<br><FONT ID="LN">63  </FONT><A NAME="63"></A>&nbsp;* the object's most specific class.<br><FONT ID="LN">64  </FONT><A NAME="64"></A>&nbsp;*<br><FONT ID="LN">65  </FONT><A NAME="65"></A>&nbsp;* &lt;p&gt;For example to read from a stream as written by the example in<br><FONT ID="LN">66  </FONT><A NAME="66"></A>&nbsp;* ObjectOutputStream:<br><FONT ID="LN">67  </FONT><A NAME="67"></A>&nbsp;* &lt;br&gt;<br><FONT ID="LN">68  </FONT><A NAME="68"></A>&nbsp;* &lt;pre&gt;<br><FONT ID="LN">69  </FONT><A NAME="69"></A>&nbsp;*  FileInputStream fis = new FileInputStream("t.tmp");<br><FONT ID="LN">70  </FONT><A NAME="70"></A>&nbsp;*  ObjectInputStream ois = new ObjectInputStream(fis);<br><FONT ID="LN">71  </FONT><A NAME="71"></A>&nbsp;*<br><FONT ID="LN">72  </FONT><A NAME="72"></A>&nbsp;*  int i = ois.readInt();<br><FONT ID="LN">73  </FONT><A NAME="73"></A>&nbsp;*  String today = (String) ois.readObject();<br><FONT ID="LN">74  </FONT><A NAME="74"></A>&nbsp;*  Date date = (Date) ois.readObject();<br><FONT ID="LN">75  </FONT><A NAME="75"></A>&nbsp;*<br><FONT ID="LN">76  </FONT><A NAME="76"></A>&nbsp;*  ois.close();<br><FONT ID="LN">77  </FONT><A NAME="77"></A>&nbsp;* &lt;/pre&gt;<br><FONT ID="LN">78  </FONT><A NAME="78"></A>&nbsp;*<br><FONT ID="LN">79  </FONT><A NAME="79"></A>&nbsp;* &lt;p&gt;Classes control how they are serialized by implementing either the<br><FONT ID="LN">80  </FONT><A NAME="80"></A>&nbsp;* java.io.Serializable or java.io.Externalizable interfaces.<br><FONT ID="LN">81  </FONT><A NAME="81"></A>&nbsp;*<br><FONT ID="LN">82  </FONT><A NAME="82"></A>&nbsp;* &lt;p&gt;Implementing the Serializable interface allows object serialization to<br><FONT ID="LN">83  </FONT><A NAME="83"></A>&nbsp;* save and restore the entire state of the object and it allows classes to<br><FONT ID="LN">84  </FONT><A NAME="84"></A>&nbsp;* evolve between the time the stream is written and the time it is read.  It<br><FONT ID="LN">85  </FONT><A NAME="85"></A>&nbsp;* automatically traverses references between objects, saving and restoring<br><FONT ID="LN">86  </FONT><A NAME="86"></A>&nbsp;* entire graphs.<br><FONT ID="LN">87  </FONT><A NAME="87"></A>&nbsp;*<br><FONT ID="LN">88  </FONT><A NAME="88"></A>&nbsp;* &lt;p&gt;Serializable classes that require special handling during the<br><FONT ID="LN">89  </FONT><A NAME="89"></A>&nbsp;* serialization and deserialization process should implement the following<br><FONT ID="LN">90  </FONT><A NAME="90"></A>&nbsp;* methods:&lt;p&gt;<br><FONT ID="LN">91  </FONT><A NAME="91"></A>&nbsp;* <br><FONT ID="LN">92  </FONT><A NAME="92"></A>&nbsp;* &lt;pre&gt;<br><FONT ID="LN">93  </FONT><A NAME="93"></A>&nbsp;* private void writeObject(java.io.ObjectOutputStream stream)<br><FONT ID="LN">94  </FONT><A NAME="94"></A>&nbsp;*     throws IOException;<br><FONT ID="LN">95  </FONT><A NAME="95"></A>&nbsp;* private void readObject(java.io.ObjectInputStream stream)<br><FONT ID="LN">96  </FONT><A NAME="96"></A>&nbsp;*     throws IOException, ClassNotFoundException; <br><FONT ID="LN">97  </FONT><A NAME="97"></A>&nbsp;* private void readObjectNoData() <br><FONT ID="LN">98  </FONT><A NAME="98"></A>&nbsp;*     throws ObjectStreamException;<br><FONT ID="LN">99  </FONT><A NAME="99"></A>&nbsp;* &lt;/pre&gt;<br><FONT ID="LN">100 </FONT><A NAME="100"></A>&nbsp;*<br><FONT ID="LN">101 </FONT><A NAME="101"></A>&nbsp;* &lt;p&gt;The readObject method is responsible for reading and restoring the state<br><FONT ID="LN">102 </FONT><A NAME="102"></A>&nbsp;* of the object for its particular class using data written to the stream by<br><FONT ID="LN">103 </FONT><A NAME="103"></A>&nbsp;* the corresponding writeObject method.  The method does not need to concern<br><FONT ID="LN">104 </FONT><A NAME="104"></A>&nbsp;* itself with the state belonging to its superclasses or subclasses.  State is<br><FONT ID="LN">105 </FONT><A NAME="105"></A>&nbsp;* restored by reading data from the ObjectInputStream for the individual<br><FONT ID="LN">106 </FONT><A NAME="106"></A>&nbsp;* fields and making assignments to the appropriate fields of the object.<br><FONT ID="LN">107 </FONT><A NAME="107"></A>&nbsp;* Reading primitive data types is supported by DataInput.<br><FONT ID="LN">108 </FONT><A NAME="108"></A>&nbsp;*<br><FONT ID="LN">109 </FONT><A NAME="109"></A>&nbsp;* &lt;p&gt;Any attempt to read object data which exceeds the boundaries of the<br><FONT ID="LN">110 </FONT><A NAME="110"></A>&nbsp;* custom data written by the corresponding writeObject method will cause an<br><FONT ID="LN">111 </FONT><A NAME="111"></A>&nbsp;* OptionalDataException to be thrown with an eof field value of true.<br><FONT ID="LN">112 </FONT><A NAME="112"></A>&nbsp;* Non-object reads which exceed the end of the allotted data will reflect the<br><FONT ID="LN">113 </FONT><A NAME="113"></A>&nbsp;* end of data in the same way that they would indicate the end of the stream:<br><FONT ID="LN">114 </FONT><A NAME="114"></A>&nbsp;* bytewise reads will return -1 as the byte read or number of bytes read, and<br><FONT ID="LN">115 </FONT><A NAME="115"></A>&nbsp;* primitive reads will throw EOFExceptions.  If there is no corresponding<br><FONT ID="LN">116 </FONT><A NAME="116"></A>&nbsp;* writeObject method, then the end of default serialized data marks the end of<br><FONT ID="LN">117 </FONT><A NAME="117"></A>&nbsp;* the allotted data.<br><FONT ID="LN">118 </FONT><A NAME="118"></A>&nbsp;*<br><FONT ID="LN">119 </FONT><A NAME="119"></A>&nbsp;* &lt;p&gt;Primitive and object read calls issued from within a readExternal method<br><FONT ID="LN">120 </FONT><A NAME="120"></A>&nbsp;* behave in the same manner--if the stream is already positioned at the end of<br><FONT ID="LN">121 </FONT><A NAME="121"></A>&nbsp;* data written by the corresponding writeExternal method, object reads will<br><FONT ID="LN">122 </FONT><A NAME="122"></A>&nbsp;* throw OptionalDataExceptions with eof set to true, bytewise reads will<br><FONT ID="LN">123 </FONT><A NAME="123"></A>&nbsp;* return -1, and primitive reads will throw EOFExceptions.  Note that this<br><FONT ID="LN">124 </FONT><A NAME="124"></A>&nbsp;* behavior does not hold for streams written with the old<br><FONT ID="LN">125 </FONT><A NAME="125"></A>&nbsp;* &lt;code&gt;ObjectStreamConstants.PROTOCOL_VERSION_1&lt;/code&gt; protocol, in which the<br><FONT ID="LN">126 </FONT><A NAME="126"></A>&nbsp;* end of data written by writeExternal methods is not demarcated, and hence<br><FONT ID="LN">127 </FONT><A NAME="127"></A>&nbsp;* cannot be detected.<br><FONT ID="LN">128 </FONT><A NAME="128"></A>&nbsp;*<br><FONT ID="LN">129 </FONT><A NAME="129"></A>&nbsp;* &lt;p&gt;The readObjectNoData method is responsible for initializing the state of<br><FONT ID="LN">130 </FONT><A NAME="130"></A>&nbsp;* the object for its particular class in the event that the serialization<br><FONT ID="LN">131 </FONT><A NAME="131"></A>&nbsp;* stream does not list the given class as a superclass of the object being<br><FONT ID="LN">132 </FONT><A NAME="132"></A>&nbsp;* deserialized.  This may occur in cases where the receiving party uses a<br><FONT ID="LN">133 </FONT><A NAME="133"></A>&nbsp;* different version of the deserialized instance's class than the sending<br><FONT ID="LN">134 </FONT><A NAME="134"></A>&nbsp;* party, and the receiver's version extends classes that are not extended by<br><FONT ID="LN">135 </FONT><A NAME="135"></A>&nbsp;* the sender's version.  This may also occur if the serialization stream has<br><FONT ID="LN">136 </FONT><A NAME="136"></A>&nbsp;* been tampered; hence, readObjectNoData is useful for initializing<br><FONT ID="LN">137 </FONT><A NAME="137"></A>&nbsp;* deserialized objects properly despite a "hostile" or incomplete source<br><FONT ID="LN">138 </FONT><A NAME="138"></A>&nbsp;* stream.<br><FONT ID="LN">139 </FONT><A NAME="139"></A>&nbsp;* <br><FONT ID="LN">140 </FONT><A NAME="140"></A>&nbsp;* &lt;p&gt;Serialization does not read or assign values to the fields of any object<br><FONT ID="LN">141 </FONT><A NAME="141"></A>&nbsp;* that does not implement the java.io.Serializable interface.  Subclasses of<br><FONT ID="LN">142 </FONT><A NAME="142"></A>&nbsp;* Objects that are not serializable can be serializable. In this case the<br><FONT ID="LN">143 </FONT><A NAME="143"></A>&nbsp;* non-serializable class must have a no-arg constructor to allow its fields to<br><FONT ID="LN">144 </FONT><A NAME="144"></A>&nbsp;* be initialized.  In this case it is the responsibility of the subclass to<br><FONT ID="LN">145 </FONT><A NAME="145"></A>&nbsp;* save and restore the state of the non-serializable class. It is frequently<br><FONT ID="LN">146 </FONT><A NAME="146"></A>&nbsp;* the case that the fields of that class are accessible (public, package, or<br><FONT ID="LN">147 </FONT><A NAME="147"></A>&nbsp;* protected) or that there are get and set methods that can be used to restore<br><FONT ID="LN">148 </FONT><A NAME="148"></A>&nbsp;* the state.<br><FONT ID="LN">149 </FONT><A NAME="149"></A>&nbsp;*<br><FONT ID="LN">150 </FONT><A NAME="150"></A>&nbsp;* &lt;p&gt;Any exception that occurs while deserializing an object will be caught by<br><FONT ID="LN">151 </FONT><A NAME="151"></A>&nbsp;* the ObjectInputStream and abort the reading process.<br><FONT ID="LN">152 </FONT><A NAME="152"></A>&nbsp;*<br><FONT ID="LN">153 </FONT><A NAME="153"></A>&nbsp;* &lt;p&gt;Implementing the Externalizable interface allows the object to assume<br><FONT ID="LN">154 </FONT><A NAME="154"></A>&nbsp;* complete control over the contents and format of the object's serialized<br><FONT ID="LN">155 </FONT><A NAME="155"></A>&nbsp;* form.  The methods of the Externalizable interface, writeExternal and<br><FONT ID="LN">156 </FONT><A NAME="156"></A>&nbsp;* readExternal, are called to save and restore the objects state.  When<br><FONT ID="LN">157 </FONT><A NAME="157"></A>&nbsp;* implemented by a class they can write and read their own state using all of<br><FONT ID="LN">158 </FONT><A NAME="158"></A>&nbsp;* the methods of ObjectOutput and ObjectInput.  It is the responsibility of<br><FONT ID="LN">159 </FONT><A NAME="159"></A>&nbsp;* the objects to handle any versioning that occurs.<br><FONT ID="LN">160 </FONT><A NAME="160"></A>&nbsp;*<br><FONT ID="LN">161 </FONT><A NAME="161"></A>&nbsp;* &lt;p&gt;Enum constants are deserialized differently than ordinary serializable or<br><FONT ID="LN">162 </FONT><A NAME="162"></A>&nbsp;* externalizable objects.  The serialized form of an enum constant consists<br><FONT ID="LN">163 </FONT><A NAME="163"></A>&nbsp;* solely of its name; field values of the constant are not transmitted.  To<br><FONT ID="LN">164 </FONT><A NAME="164"></A>&nbsp;* deserialize an enum constant, ObjectInputStream reads the constant name from<br><FONT ID="LN">165 </FONT><A NAME="165"></A>&nbsp;* the stream; the deserialized constant is then obtained by calling the static<br><FONT ID="LN">166 </FONT><A NAME="166"></A>&nbsp;* method &lt;code&gt;Enum.valueOf(Class, String)&lt;/code&gt; with the enum constant's<br><FONT ID="LN">167 </FONT><A NAME="167"></A>&nbsp;* base type and the received constant name as arguments.  Like other<br><FONT ID="LN">168 </FONT><A NAME="168"></A>&nbsp;* serializable or externalizable objects, enum constants can function as the<br><FONT ID="LN">169 </FONT><A NAME="169"></A>&nbsp;* targets of back references appearing subsequently in the serialization<br><FONT ID="LN">170 </FONT><A NAME="170"></A>&nbsp;* stream.  The process by which enum constants are deserialized cannot be<br><FONT ID="LN">171 </FONT><A NAME="171"></A>&nbsp;* customized: any class-specific readObject, readObjectNoData, and readResolve<br><FONT ID="LN">172 </FONT><A NAME="172"></A>&nbsp;* methods defined by enum types are ignored during deserialization.<br><FONT ID="LN">173 </FONT><A NAME="173"></A>&nbsp;* Similarly, any serialPersistentFields or serialVersionUID field declarations<br><FONT ID="LN">174 </FONT><A NAME="174"></A>&nbsp;* are also ignored--all enum types have a fixed serialVersionUID of 0L.<br><FONT ID="LN">175 </FONT><A NAME="175"></A>&nbsp;*<br><FONT ID="LN">176 </FONT><A NAME="176"></A>&nbsp;* @author  Mike Warres<br><FONT ID="LN">177 </FONT><A NAME="177"></A>&nbsp;* @author  Roger Riggs<br><FONT ID="LN">178 </FONT><A NAME="178"></A>&nbsp;* @version 1.157, 06/04/05<br><FONT ID="LN">179 </FONT><A NAME="179"></A>&nbsp;* @see java.io.DataInput<br><FONT ID="LN">180 </FONT><A NAME="180"></A>&nbsp;* @see java.io.ObjectOutputStream<br><FONT ID="LN">181 </FONT><A NAME="181"></A>&nbsp;* @see java.io.Serializable<br><FONT ID="LN">182 </FONT><A NAME="182"></A>&nbsp;* @see &lt;a HREF="../../../guide/serialization/spec/input.doc.html"&gt; Object Serialization Specification, Section 3, Object Input Classes&lt;/a&gt;<br><FONT ID="LN">183 </FONT><A NAME="183"></A>&nbsp;* @since   JDK1.1<br><FONT ID="LN">184 </FONT><A NAME="184"></A>&nbsp;*/</FONT><br><FONT ID="LN">185 </FONT><A NAME="185"></A><FONT ID="Public">public</FONT> <FONT ID="Class">class</FONT> ObjectInputStream <br><FONT ID="LN">186 </FONT><A NAME="186"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Extends">extends</FONT> <A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <FONT ID="Implements">implements</FONT> <A HREF="../../java/io/ObjectInput.java.htm">ObjectInput</A>  <A HREF= "/601.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/io/ObjectStreamConstants.java.htm">ObjectStreamConstants</A>  <A HREF= "/1597.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">187 </FONT><A NAME="187"></A>{ <br><FONT ID="LN">188 </FONT><A NAME="188"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** handle value representing null */</FONT><br><FONT ID="LN">189 </FONT><A NAME="189"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> NULL_HANDLE = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">190 </FONT><A NAME="190"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">191 </FONT><A NAME="191"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** marker for unshared objects in internal handle table */</FONT><br><FONT ID="LN">192 </FONT><A NAME="192"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> unsharedMarker = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">193 </FONT><A NAME="193"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">194 </FONT><A NAME="194"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** table mapping primitive type names to corresponding class objects */</FONT><br><FONT ID="LN">195 </FONT><A NAME="195"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/util/HashMap.java.htm">HashMap</A>  <A HREF= "/754.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> primClasses = <FONT ID="New">new</FONT> <A HREF="../../java/util/HashMap.java.htm">HashMap</A>  <A HREF= "/754.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="IntegerLiteral">8</FONT>, <FONT ID="FloatPointLiteral">1.0F</FONT>);<br><FONT ID="LN">196 </FONT><A NAME="196"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Static">static</FONT> {<br><FONT ID="LN">197 </FONT><A NAME="197"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"boolean"</FONT>, <FONT ID="Boolean">boolean</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">198 </FONT><A NAME="198"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"byte"</FONT>, <FONT ID="Byte">byte</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">199 </FONT><A NAME="199"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"char"</FONT>, <FONT ID="Char">char</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">200 </FONT><A NAME="200"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"short"</FONT>, <FONT ID="Short">short</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">201 </FONT><A NAME="201"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"int"</FONT>, <FONT ID="Int">int</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">202 </FONT><A NAME="202"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"long"</FONT>, <FONT ID="Long">long</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">203 </FONT><A NAME="203"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"float"</FONT>, <FONT ID="Float">float</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">204 </FONT><A NAME="204"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"double"</FONT>, <FONT ID="Double">double</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">205 </FONT><A NAME="205"></A>&nbsp;&nbsp;&nbsp;&nbsp;primClasses.put(<FONT ID="StringLiteral">"void"</FONT>, <FONT ID="Void">void</FONT>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">206 </FONT><A NAME="206"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">207 </FONT><A NAME="207"></A><br><FONT ID="LN">208 </FONT><A NAME="208"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> Caches {<br><FONT ID="LN">209 </FONT><A NAME="209"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** cache of subclass security audit results */</FONT><br><FONT ID="LN">210 </FONT><A NAME="210"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/util/concurrent/ConcurrentMap.java.htm">ConcurrentMap</A>  <A HREF= "/3797.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;WeakClassKey,<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&gt; subclassAudits = <br><FONT ID="LN">211 </FONT><A NAME="211"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="New">new</FONT> <A HREF="../../java/util/concurrent/ConcurrentHashMap.java.htm">ConcurrentHashMap</A>  <A HREF= "/3646.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;WeakClassKey,<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&gt;();<br><FONT ID="LN">212 </FONT><A NAME="212"></A><br><FONT ID="LN">213 </FONT><A NAME="213"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** queue for WeakReferences to audited subclasses */</FONT><br><FONT ID="LN">214 </FONT><A NAME="214"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/lang/ref/ReferenceQueue.java.htm">ReferenceQueue</A>  <A HREF= "/1492.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;?&gt;&gt; subclassAuditsQueue = <br><FONT ID="LN">215 </FONT><A NAME="215"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="New">new</FONT> <A HREF="../../java/lang/ref/ReferenceQueue.java.htm">ReferenceQueue</A>  <A HREF= "/1492.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;?&gt;&gt;();<br><FONT ID="LN">216 </FONT><A NAME="216"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">217 </FONT><A NAME="217"></A><br><FONT ID="LN">218 </FONT><A NAME="218"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** filter stream for handling block data conversion */</FONT><br><FONT ID="LN">219 </FONT><A NAME="219"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> BlockDataInputStream bin;<br><FONT ID="LN">220 </FONT><A NAME="220"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** validation callback list */</FONT><br><FONT ID="LN">221 </FONT><A NAME="221"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> ValidationList vlist;<br><FONT ID="LN">222 </FONT><A NAME="222"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** recursion depth */</FONT><br><FONT ID="LN">223 </FONT><A NAME="223"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> depth;<br><FONT ID="LN">224 </FONT><A NAME="224"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** whether stream is closed */</FONT><br><FONT ID="LN">225 </FONT><A NAME="225"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> closed;<br><FONT ID="LN">226 </FONT><A NAME="226"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">227 </FONT><A NAME="227"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** wire handle -&gt; obj/exception map */</FONT><br><FONT ID="LN">228 </FONT><A NAME="228"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> HandleTable handles;<br><FONT ID="LN">229 </FONT><A NAME="229"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** scratch field for passing handle values up/down call stack */</FONT><br><FONT ID="LN">230 </FONT><A NAME="230"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> passHandle = NULL_HANDLE;<br><FONT ID="LN">231 </FONT><A NAME="231"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** flag set when at end of field value block with no TC_ENDBLOCKDATA */</FONT><br><FONT ID="LN">232 </FONT><A NAME="232"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> defaultDataEnd = <FONT ID="False">false</FONT>;<br><FONT ID="LN">233 </FONT><A NAME="233"></A><br><FONT ID="LN">234 </FONT><A NAME="234"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** buffer for reading primitive field values */</FONT><br><FONT ID="LN">235 </FONT><A NAME="235"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Byte">byte</FONT>[] primVals;<br><FONT ID="LN">236 </FONT><A NAME="236"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">237 </FONT><A NAME="237"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** if true, invoke readObjectOverride() instead of readObject() */</FONT><br><FONT ID="LN">238 </FONT><A NAME="238"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Boolean">boolean</FONT> enableOverride;<br><FONT ID="LN">239 </FONT><A NAME="239"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** if true, invoke resolveObject() */</FONT><br><FONT ID="LN">240 </FONT><A NAME="240"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> enableResolve;<br><FONT ID="LN">241 </FONT><A NAME="241"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">242 </FONT><A NAME="242"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">243 </FONT><A NAME="243"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Context during upcalls to class-defined readObject methods; holds <br><FONT ID="LN">244 </FONT><A NAME="244"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object currently being deserialized and descriptor for current class.<br><FONT ID="LN">245 </FONT><A NAME="245"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Null when not during readObject upcall.<br><FONT ID="LN">246 </FONT><A NAME="246"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">247 </FONT><A NAME="247"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> CallbackContext curContext;<br><FONT ID="LN">248 </FONT><A NAME="248"></A><br><FONT ID="LN">249 </FONT><A NAME="249"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">250 </FONT><A NAME="250"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates an ObjectInputStream that reads from the specified InputStream.<br><FONT ID="LN">251 </FONT><A NAME="251"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* A serialization stream header is read from the stream and verified.<br><FONT ID="LN">252 </FONT><A NAME="252"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This constructor will block until the corresponding ObjectOutputStream<br><FONT ID="LN">253 </FONT><A NAME="253"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* has written and flushed the header.<br><FONT ID="LN">254 </FONT><A NAME="254"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">255 </FONT><A NAME="255"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;If a security manager is installed, this constructor will check for<br><FONT ID="LN">256 </FONT><A NAME="256"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the "enableSubclassImplementation" SerializablePermission when invoked<br><FONT ID="LN">257 </FONT><A NAME="257"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* directly or indirectly by the constructor of a subclass which overrides<br><FONT ID="LN">258 </FONT><A NAME="258"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the ObjectInputStream.readFields or ObjectInputStream.readUnshared<br><FONT ID="LN">259 </FONT><A NAME="259"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* methods.<br><FONT ID="LN">260 </FONT><A NAME="260"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">261 </FONT><A NAME="261"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   in input stream to read from<br><FONT ID="LN">262 </FONT><A NAME="262"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  StreamCorruptedException if the stream header is incorrect<br><FONT ID="LN">263 </FONT><A NAME="263"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if an I/O error occurs while reading stream header<br><FONT ID="LN">264 </FONT><A NAME="264"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  SecurityException if untrusted subclass illegally overrides<br><FONT ID="LN">265 </FONT><A NAME="265"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      security-sensitive methods<br><FONT ID="LN">266 </FONT><A NAME="266"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  NullPointerException if &lt;code&gt;in&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;<br><FONT ID="LN">267 </FONT><A NAME="267"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see ObjectInputStream#ObjectInputStream()<br><FONT ID="LN">268 </FONT><A NAME="268"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see ObjectInputStream#readFields()<br><FONT ID="LN">269 </FONT><A NAME="269"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see ObjectOutputStream#ObjectOutputStream(OutputStream)<br><FONT ID="LN">270 </FONT><A NAME="270"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">271 </FONT><A NAME="271"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> ObjectInputStream(<A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> in) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">272 </FONT><A NAME="272"></A>&nbsp;&nbsp;&nbsp;&nbsp;verifySubclass();<br><FONT ID="LN">273 </FONT><A NAME="273"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin = <FONT ID="New">new</FONT> BlockDataInputStream(in);<br><FONT ID="LN">274 </FONT><A NAME="274"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles = <FONT ID="New">new</FONT> HandleTable(<FONT ID="IntegerLiteral">10</FONT>);<br><FONT ID="LN">275 </FONT><A NAME="275"></A>&nbsp;&nbsp;&nbsp;&nbsp;vlist = <FONT ID="New">new</FONT> ValidationList();<br><FONT ID="LN">276 </FONT><A NAME="276"></A>&nbsp;&nbsp;&nbsp;&nbsp;enableOverride = <FONT ID="False">false</FONT>;<br><FONT ID="LN">277 </FONT><A NAME="277"></A>&nbsp;&nbsp;&nbsp;&nbsp;readStreamHeader();<br><FONT ID="LN">278 </FONT><A NAME="278"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">279 </FONT><A NAME="279"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">280 </FONT><A NAME="280"></A><br><FONT ID="LN">281 </FONT><A NAME="281"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">282 </FONT><A NAME="282"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Provide a way for subclasses that are completely reimplementing<br><FONT ID="LN">283 </FONT><A NAME="283"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ObjectInputStream to not have to allocate private data just used by this<br><FONT ID="LN">284 </FONT><A NAME="284"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* implementation of ObjectInputStream.<br><FONT ID="LN">285 </FONT><A NAME="285"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">286 </FONT><A NAME="286"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;If there is a security manager installed, this method first calls the<br><FONT ID="LN">287 </FONT><A NAME="287"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* security manager's &lt;code&gt;checkPermission&lt;/code&gt; method with the<br><FONT ID="LN">288 </FONT><A NAME="288"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;SerializablePermission("enableSubclassImplementation")&lt;/code&gt;<br><FONT ID="LN">289 </FONT><A NAME="289"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* permission to ensure it's ok to enable subclassing.<br><FONT ID="LN">290 </FONT><A NAME="290"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">291 </FONT><A NAME="291"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  SecurityException if a security manager exists and its<br><FONT ID="LN">292 </FONT><A NAME="292"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      &lt;code&gt;checkPermission&lt;/code&gt; method denies enabling<br><FONT ID="LN">293 </FONT><A NAME="293"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      subclassing.<br><FONT ID="LN">294 </FONT><A NAME="294"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see SecurityManager#checkPermission<br><FONT ID="LN">295 </FONT><A NAME="295"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see java.io.SerializablePermission<br><FONT ID="LN">296 </FONT><A NAME="296"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">297 </FONT><A NAME="297"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> ObjectInputStream() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/SecurityException.java.htm">SecurityException</A>  <A HREF= "/1840.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">298 </FONT><A NAME="298"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/SecurityManager.java.htm">SecurityManager</A>  <A HREF= "/1841.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sm = System.getSecurityManager();<br><FONT ID="LN">299 </FONT><A NAME="299"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (sm != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">300 </FONT><A NAME="300"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sm.checkPermission(SUBCLASS_IMPLEMENTATION_PERMISSION);<br><FONT ID="LN">301 </FONT><A NAME="301"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">302 </FONT><A NAME="302"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">303 </FONT><A NAME="303"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">304 </FONT><A NAME="304"></A>&nbsp;&nbsp;&nbsp;&nbsp;vlist = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">305 </FONT><A NAME="305"></A>&nbsp;&nbsp;&nbsp;&nbsp;enableOverride = <FONT ID="True">true</FONT>;<br><FONT ID="LN">306 </FONT><A NAME="306"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">307 </FONT><A NAME="307"></A><br><FONT ID="LN">308 </FONT><A NAME="308"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">309 </FONT><A NAME="309"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Read an object from the ObjectInputStream.  The class of the object, the<br><FONT ID="LN">310 </FONT><A NAME="310"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* signature of the class, and the values of the non-transient and<br><FONT ID="LN">311 </FONT><A NAME="311"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* non-static fields of the class and all of its supertypes are read.<br><FONT ID="LN">312 </FONT><A NAME="312"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Default deserializing for a class can be overriden using the writeObject<br><FONT ID="LN">313 </FONT><A NAME="313"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and readObject methods.  Objects referenced by this object are read<br><FONT ID="LN">314 </FONT><A NAME="314"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* transitively so that a complete equivalent graph of objects is<br><FONT ID="LN">315 </FONT><A NAME="315"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reconstructed by readObject.<br><FONT ID="LN">316 </FONT><A NAME="316"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">317 </FONT><A NAME="317"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;The root object is completely restored when all of its fields and the<br><FONT ID="LN">318 </FONT><A NAME="318"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* objects it references are completely restored.  At this point the object<br><FONT ID="LN">319 </FONT><A NAME="319"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* validation callbacks are executed in order based on their registered<br><FONT ID="LN">320 </FONT><A NAME="320"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* priorities. The callbacks are registered by objects (in the readObject<br><FONT ID="LN">321 </FONT><A NAME="321"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* special methods) as they are individually restored.<br><FONT ID="LN">322 </FONT><A NAME="322"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">323 </FONT><A NAME="323"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;Exceptions are thrown for problems with the InputStream and for<br><FONT ID="LN">324 </FONT><A NAME="324"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* classes that should not be deserialized.  All exceptions are fatal to<br><FONT ID="LN">325 </FONT><A NAME="325"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the InputStream and leave it in an indeterminate state; it is up to the<br><FONT ID="LN">326 </FONT><A NAME="326"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* caller to ignore or recover the stream state.<br><FONT ID="LN">327 </FONT><A NAME="327"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">328 </FONT><A NAME="328"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException Class of a serialized object cannot be<br><FONT ID="LN">329 </FONT><A NAME="329"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      found.<br><FONT ID="LN">330 </FONT><A NAME="330"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  InvalidClassException Something is wrong with a class used by<br><FONT ID="LN">331 </FONT><A NAME="331"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      serialization.<br><FONT ID="LN">332 </FONT><A NAME="332"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  StreamCorruptedException Control information in the<br><FONT ID="LN">333 </FONT><A NAME="333"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      stream is inconsistent.<br><FONT ID="LN">334 </FONT><A NAME="334"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  OptionalDataException Primitive data was found in the <br><FONT ID="LN">335 </FONT><A NAME="335"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      stream instead of objects.<br><FONT ID="LN">336 </FONT><A NAME="336"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException Any of the usual Input/Output related exceptions.<br><FONT ID="LN">337 </FONT><A NAME="337"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">338 </FONT><A NAME="338"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readObject() <br><FONT ID="LN">339 </FONT><A NAME="339"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">340 </FONT><A NAME="340"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">341 </FONT><A NAME="341"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (enableOverride) {<br><FONT ID="LN">342 </FONT><A NAME="342"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readObjectOverride();<br><FONT ID="LN">343 </FONT><A NAME="343"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">344 </FONT><A NAME="344"></A><br><FONT ID="LN">345 </FONT><A NAME="345"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// if nested read, passHandle contains handle of enclosing object<br><FONT ID="LN">346 </FONT><A NAME="346"></A></FONT>    <FONT ID="Int">int</FONT> outerHandle = passHandle;<br><FONT ID="LN">347 </FONT><A NAME="347"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">348 </FONT><A NAME="348"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj = readObject0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">349 </FONT><A NAME="349"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markDependency(outerHandle, passHandle);<br><FONT ID="LN">350 </FONT><A NAME="350"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex = handles.lookupException(passHandle);<br><FONT ID="LN">351 </FONT><A NAME="351"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ex != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">352 </FONT><A NAME="352"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">353 </FONT><A NAME="353"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">354 </FONT><A NAME="354"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">355 </FONT><A NAME="355"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vlist.doCallbacks();<br><FONT ID="LN">356 </FONT><A NAME="356"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">357 </FONT><A NAME="357"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">358 </FONT><A NAME="358"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">359 </FONT><A NAME="359"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passHandle = outerHandle;<br><FONT ID="LN">360 </FONT><A NAME="360"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (closed &amp;&amp; depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">361 </FONT><A NAME="361"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear();<br><FONT ID="LN">362 </FONT><A NAME="362"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">363 </FONT><A NAME="363"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">364 </FONT><A NAME="364"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">365 </FONT><A NAME="365"></A><br><FONT ID="LN">366 </FONT><A NAME="366"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">367 </FONT><A NAME="367"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method is called by trusted subclasses of ObjectOutputStream that<br><FONT ID="LN">368 </FONT><A NAME="368"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* constructed ObjectOutputStream using the protected no-arg constructor.<br><FONT ID="LN">369 </FONT><A NAME="369"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The subclass is expected to provide an override method with the modifier<br><FONT ID="LN">370 </FONT><A NAME="370"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "final".<br><FONT ID="LN">371 </FONT><A NAME="371"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">372 </FONT><A NAME="372"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the Object read from the stream.<br><FONT ID="LN">373 </FONT><A NAME="373"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException Class definition of a serialized object<br><FONT ID="LN">374 </FONT><A NAME="374"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      cannot be found.<br><FONT ID="LN">375 </FONT><A NAME="375"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  OptionalDataException Primitive data was found in the stream<br><FONT ID="LN">376 </FONT><A NAME="376"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      instead of objects.<br><FONT ID="LN">377 </FONT><A NAME="377"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if I/O errors occurred while reading from the<br><FONT ID="LN">378 </FONT><A NAME="378"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      underlying stream<br><FONT ID="LN">379 </FONT><A NAME="379"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see #ObjectInputStream()<br><FONT ID="LN">380 </FONT><A NAME="380"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see #readObject()<br><FONT ID="LN">381 </FONT><A NAME="381"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @since 1.2<br><FONT ID="LN">382 </FONT><A NAME="382"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">383 </FONT><A NAME="383"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readObjectOverride()<br><FONT ID="LN">384 </FONT><A NAME="384"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">385 </FONT><A NAME="385"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">386 </FONT><A NAME="386"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;<br><FONT ID="LN">387 </FONT><A NAME="387"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">388 </FONT><A NAME="388"></A>&nbsp;<br><FONT ID="LN">389 </FONT><A NAME="389"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">390 </FONT><A NAME="390"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads an "unshared" object from the ObjectInputStream.  This method is<br><FONT ID="LN">391 </FONT><A NAME="391"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* identical to readObject, except that it prevents subsequent calls to<br><FONT ID="LN">392 </FONT><A NAME="392"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* readObject and readUnshared from returning additional references to the<br><FONT ID="LN">393 </FONT><A NAME="393"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* deserialized instance obtained via this call.  Specifically:<br><FONT ID="LN">394 </FONT><A NAME="394"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;ul&gt;<br><FONT ID="LN">395 </FONT><A NAME="395"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*   &lt;li&gt;If readUnshared is called to deserialize a back-reference (the<br><FONT ID="LN">396 </FONT><A NAME="396"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       stream representation of an object which has been written<br><FONT ID="LN">397 </FONT><A NAME="397"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       previously to the stream), an ObjectStreamException will be<br><FONT ID="LN">398 </FONT><A NAME="398"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       thrown.<br><FONT ID="LN">399 </FONT><A NAME="399"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">400 </FONT><A NAME="400"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*   &lt;li&gt;If readUnshared returns successfully, then any subsequent attempts<br><FONT ID="LN">401 </FONT><A NAME="401"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       to deserialize back-references to the stream handle deserialized<br><FONT ID="LN">402 </FONT><A NAME="402"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*       by readUnshared will cause an ObjectStreamException to be thrown.<br><FONT ID="LN">403 </FONT><A NAME="403"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;/ul&gt;<br><FONT ID="LN">404 </FONT><A NAME="404"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Deserializing an object via readUnshared invalidates the stream handle<br><FONT ID="LN">405 </FONT><A NAME="405"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with the returned object.  Note that this in itself does not<br><FONT ID="LN">406 </FONT><A NAME="406"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* always guarantee that the reference returned by readUnshared is unique;<br><FONT ID="LN">407 </FONT><A NAME="407"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the deserialized object may define a readResolve method which returns an<br><FONT ID="LN">408 </FONT><A NAME="408"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object visible to other parties, or readUnshared may return a Class<br><FONT ID="LN">409 </FONT><A NAME="409"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object or enum constant obtainable elsewhere in the stream or through<br><FONT ID="LN">410 </FONT><A NAME="410"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* external means.<br><FONT ID="LN">411 </FONT><A NAME="411"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">412 </FONT><A NAME="412"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;However, for objects which are not enum constants or instances of<br><FONT ID="LN">413 </FONT><A NAME="413"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* java.lang.Class and do not define readResolve methods, readUnshared<br><FONT ID="LN">414 </FONT><A NAME="414"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* guarantees that the returned object reference is unique and cannot be<br><FONT ID="LN">415 </FONT><A NAME="415"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* obtained a second time from the ObjectInputStream that created it, even<br><FONT ID="LN">416 </FONT><A NAME="416"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* if the underlying data stream has been manipulated.  This guarantee<br><FONT ID="LN">417 </FONT><A NAME="417"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* applies only to the base-level object returned by readUnshared, and not<br><FONT ID="LN">418 </FONT><A NAME="418"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to any transitively referenced sub-objects in the returned object graph.<br><FONT ID="LN">419 </FONT><A NAME="419"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">420 </FONT><A NAME="420"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;ObjectInputStream subclasses which override this method can only be<br><FONT ID="LN">421 </FONT><A NAME="421"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* constructed in security contexts possessing the<br><FONT ID="LN">422 </FONT><A NAME="422"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "enableSubclassImplementation" SerializablePermission; any attempt to<br><FONT ID="LN">423 </FONT><A NAME="423"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* instantiate such a subclass without this permission will cause a<br><FONT ID="LN">424 </FONT><A NAME="424"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* SecurityException to be thrown.<br><FONT ID="LN">425 </FONT><A NAME="425"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">426 </FONT><A NAME="426"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  reference to deserialized object<br><FONT ID="LN">427 </FONT><A NAME="427"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException if class of an object to deserialize<br><FONT ID="LN">428 </FONT><A NAME="428"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*          cannot be found<br><FONT ID="LN">429 </FONT><A NAME="429"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  StreamCorruptedException if control information in the stream<br><FONT ID="LN">430 </FONT><A NAME="430"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*          is inconsistent<br><FONT ID="LN">431 </FONT><A NAME="431"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ObjectStreamException if object to deserialize has already<br><FONT ID="LN">432 </FONT><A NAME="432"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*          appeared in stream<br><FONT ID="LN">433 </FONT><A NAME="433"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  OptionalDataException if primitive data is next in stream<br><FONT ID="LN">434 </FONT><A NAME="434"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if an I/O error occurs during deserialization<br><FONT ID="LN">435 </FONT><A NAME="435"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">436 </FONT><A NAME="436"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readUnshared() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">437 </FONT><A NAME="437"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// if nested read, passHandle contains handle of enclosing object<br><FONT ID="LN">438 </FONT><A NAME="438"></A></FONT>    <FONT ID="Int">int</FONT> outerHandle = passHandle;<br><FONT ID="LN">439 </FONT><A NAME="439"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">440 </FONT><A NAME="440"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj = readObject0(<FONT ID="True">true</FONT>);<br><FONT ID="LN">441 </FONT><A NAME="441"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markDependency(outerHandle, passHandle);<br><FONT ID="LN">442 </FONT><A NAME="442"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex = handles.lookupException(passHandle);<br><FONT ID="LN">443 </FONT><A NAME="443"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ex != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">444 </FONT><A NAME="444"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">445 </FONT><A NAME="445"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">446 </FONT><A NAME="446"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">447 </FONT><A NAME="447"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vlist.doCallbacks();<br><FONT ID="LN">448 </FONT><A NAME="448"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">449 </FONT><A NAME="449"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">450 </FONT><A NAME="450"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">451 </FONT><A NAME="451"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passHandle = outerHandle;<br><FONT ID="LN">452 </FONT><A NAME="452"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (closed &amp;&amp; depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">453 </FONT><A NAME="453"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear();<br><FONT ID="LN">454 </FONT><A NAME="454"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">455 </FONT><A NAME="455"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">456 </FONT><A NAME="456"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">457 </FONT><A NAME="457"></A><br><FONT ID="LN">458 </FONT><A NAME="458"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">459 </FONT><A NAME="459"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Read the non-static and non-transient fields of the current class from<br><FONT ID="LN">460 </FONT><A NAME="460"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this stream.  This may only be called from the readObject method of the<br><FONT ID="LN">461 </FONT><A NAME="461"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class being deserialized. It will throw the NotActiveException if it is<br><FONT ID="LN">462 </FONT><A NAME="462"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* called otherwise.<br><FONT ID="LN">463 </FONT><A NAME="463"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">464 </FONT><A NAME="464"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException if the class of a serialized object<br><FONT ID="LN">465 </FONT><A NAME="465"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      could not be found.<br><FONT ID="LN">466 </FONT><A NAME="466"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if an I/O error occurs.<br><FONT ID="LN">467 </FONT><A NAME="467"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  NotActiveException if the stream is not currently reading<br><FONT ID="LN">468 </FONT><A NAME="468"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      objects.<br><FONT ID="LN">469 </FONT><A NAME="469"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">470 </FONT><A NAME="470"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> defaultReadObject()<br><FONT ID="LN">471 </FONT><A NAME="471"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">472 </FONT><A NAME="472"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">473 </FONT><A NAME="473"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (curContext == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">474 </FONT><A NAME="474"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"not in call to readObject"</FONT>);<br><FONT ID="LN">475 </FONT><A NAME="475"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">476 </FONT><A NAME="476"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> curObj = curContext.getObj();<br><FONT ID="LN">477 </FONT><A NAME="477"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> curDesc = curContext.getDesc();<br><FONT ID="LN">478 </FONT><A NAME="478"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="False">false</FONT>);<br><FONT ID="LN">479 </FONT><A NAME="479"></A>&nbsp;&nbsp;&nbsp;&nbsp;defaultReadFields(curObj, curDesc);<br><FONT ID="LN">480 </FONT><A NAME="480"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">481 </FONT><A NAME="481"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!curDesc.hasWriteObjectData()) {<br><FONT ID="LN">482 </FONT><A NAME="482"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">483 </FONT><A NAME="483"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fix for 4360508: since stream does not contain terminating<br><FONT ID="LN">484 </FONT><A NAME="484"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TC_ENDBLOCKDATA tag, set flag so that reading code elsewhere<br><FONT ID="LN">485 </FONT><A NAME="485"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* knows to simulate end-of-custom-data behavior.<br><FONT ID="LN">486 </FONT><A NAME="486"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">487 </FONT><A NAME="487"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultDataEnd = <FONT ID="True">true</FONT>;<br><FONT ID="LN">488 </FONT><A NAME="488"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">489 </FONT><A NAME="489"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex = handles.lookupException(passHandle);<br><FONT ID="LN">490 </FONT><A NAME="490"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ex != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">491 </FONT><A NAME="491"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">492 </FONT><A NAME="492"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">493 </FONT><A NAME="493"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">494 </FONT><A NAME="494"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">495 </FONT><A NAME="495"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">496 </FONT><A NAME="496"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads the persistent fields from the stream and makes them available by<br><FONT ID="LN">497 </FONT><A NAME="497"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* name.<br><FONT ID="LN">498 </FONT><A NAME="498"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">499 </FONT><A NAME="499"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the &lt;code&gt;GetField&lt;/code&gt; object representing the persistent<br><FONT ID="LN">500 </FONT><A NAME="500"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      fields of the object being deserialized<br><FONT ID="LN">501 </FONT><A NAME="501"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException if the class of a serialized object<br><FONT ID="LN">502 </FONT><A NAME="502"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      could not be found.<br><FONT ID="LN">503 </FONT><A NAME="503"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if an I/O error occurs.<br><FONT ID="LN">504 </FONT><A NAME="504"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  NotActiveException if the stream is not currently reading<br><FONT ID="LN">505 </FONT><A NAME="505"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      objects.<br><FONT ID="LN">506 </FONT><A NAME="506"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @since 1.2<br><FONT ID="LN">507 </FONT><A NAME="507"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">508 </FONT><A NAME="508"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/io/ObjectInputStream.java.htm">ObjectInputStream.GetField</A>  <A HREF= "/602.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readFields()<br><FONT ID="LN">509 </FONT><A NAME="509"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">510 </FONT><A NAME="510"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">511 </FONT><A NAME="511"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (curContext == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">512 </FONT><A NAME="512"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"not in call to readObject"</FONT>);<br><FONT ID="LN">513 </FONT><A NAME="513"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">514 </FONT><A NAME="514"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> curObj = curContext.getObj();<br><FONT ID="LN">515 </FONT><A NAME="515"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> curDesc = curContext.getDesc();<br><FONT ID="LN">516 </FONT><A NAME="516"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="False">false</FONT>);<br><FONT ID="LN">517 </FONT><A NAME="517"></A>&nbsp;&nbsp;&nbsp;&nbsp;GetFieldImpl getField = <FONT ID="New">new</FONT> GetFieldImpl(curDesc);<br><FONT ID="LN">518 </FONT><A NAME="518"></A>&nbsp;&nbsp;&nbsp;&nbsp;getField.readFields();<br><FONT ID="LN">519 </FONT><A NAME="519"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">520 </FONT><A NAME="520"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!curDesc.hasWriteObjectData()) {<br><FONT ID="LN">521 </FONT><A NAME="521"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">522 </FONT><A NAME="522"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fix for 4360508: since stream does not contain terminating<br><FONT ID="LN">523 </FONT><A NAME="523"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TC_ENDBLOCKDATA tag, set flag so that reading code elsewhere<br><FONT ID="LN">524 </FONT><A NAME="524"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* knows to simulate end-of-custom-data behavior.<br><FONT ID="LN">525 </FONT><A NAME="525"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">526 </FONT><A NAME="526"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultDataEnd = <FONT ID="True">true</FONT>;<br><FONT ID="LN">527 </FONT><A NAME="527"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">528 </FONT><A NAME="528"></A><br><FONT ID="LN">529 </FONT><A NAME="529"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> getField;<br><FONT ID="LN">530 </FONT><A NAME="530"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">531 </FONT><A NAME="531"></A><br><FONT ID="LN">532 </FONT><A NAME="532"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">533 </FONT><A NAME="533"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Register an object to be validated before the graph is returned.  While<br><FONT ID="LN">534 </FONT><A NAME="534"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* similar to resolveObject these validations are called after the entire<br><FONT ID="LN">535 </FONT><A NAME="535"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* graph has been reconstituted.  Typically, a readObject method will<br><FONT ID="LN">536 </FONT><A NAME="536"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* register the object with the stream so that when all of the objects are<br><FONT ID="LN">537 </FONT><A NAME="537"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* restored a final set of validations can be performed.<br><FONT ID="LN">538 </FONT><A NAME="538"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">539 </FONT><A NAME="539"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   obj the object to receive the validation callback.<br><FONT ID="LN">540 </FONT><A NAME="540"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   prio controls the order of callbacks;zero is a good default.<br><FONT ID="LN">541 </FONT><A NAME="541"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      Use higher numbers to be called back earlier, lower numbers for<br><FONT ID="LN">542 </FONT><A NAME="542"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      later callbacks. Within a priority, callbacks are processed in<br><FONT ID="LN">543 </FONT><A NAME="543"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      no particular order.<br><FONT ID="LN">544 </FONT><A NAME="544"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  NotActiveException The stream is not currently reading objects<br><FONT ID="LN">545 </FONT><A NAME="545"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      so it is invalid to register a callback.<br><FONT ID="LN">546 </FONT><A NAME="546"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  InvalidObjectException The validation object is null.<br><FONT ID="LN">547 </FONT><A NAME="547"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">548 </FONT><A NAME="548"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> registerValidation(<A HREF="../../java/io/ObjectInputValidation.java.htm">ObjectInputValidation</A>  <A HREF= "/2272.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <FONT ID="Int">int</FONT> prio)<br><FONT ID="LN">549 </FONT><A NAME="549"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">550 </FONT><A NAME="550"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">551 </FONT><A NAME="551"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">552 </FONT><A NAME="552"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"stream inactive"</FONT>);<br><FONT ID="LN">553 </FONT><A NAME="553"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">554 </FONT><A NAME="554"></A>&nbsp;&nbsp;&nbsp;&nbsp;vlist.register(obj, prio);<br><FONT ID="LN">555 </FONT><A NAME="555"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">556 </FONT><A NAME="556"></A><br><FONT ID="LN">557 </FONT><A NAME="557"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">558 </FONT><A NAME="558"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Load the local class equivalent of the specified stream class<br><FONT ID="LN">559 </FONT><A NAME="559"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* description.  Subclasses may implement this method to allow classes to<br><FONT ID="LN">560 </FONT><A NAME="560"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* be fetched from an alternate source. <br><FONT ID="LN">561 </FONT><A NAME="561"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">562 </FONT><A NAME="562"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;The corresponding method in &lt;code&gt;ObjectOutputStream&lt;/code&gt; is<br><FONT ID="LN">563 </FONT><A NAME="563"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;annotateClass&lt;/code&gt;.  This method will be invoked only once for<br><FONT ID="LN">564 </FONT><A NAME="564"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* each unique class in the stream.  This method can be implemented by<br><FONT ID="LN">565 </FONT><A NAME="565"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* subclasses to use an alternate loading mechanism but must return a<br><FONT ID="LN">566 </FONT><A NAME="566"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;Class&lt;/code&gt; object.  Once returned, the serialVersionUID of the<br><FONT ID="LN">567 </FONT><A NAME="567"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class is compared to the serialVersionUID of the serialized class.  If<br><FONT ID="LN">568 </FONT><A NAME="568"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* there is a mismatch, the deserialization fails and an exception is<br><FONT ID="LN">569 </FONT><A NAME="569"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* raised.<br><FONT ID="LN">570 </FONT><A NAME="570"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">571 </FONT><A NAME="571"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;By default the class name is resolved relative to the class that<br><FONT ID="LN">572 </FONT><A NAME="572"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* called &lt;code&gt;readObject&lt;/code&gt;.<br><FONT ID="LN">573 </FONT><A NAME="573"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">574 </FONT><A NAME="574"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   desc an instance of class &lt;code&gt;ObjectStreamClass&lt;/code&gt;<br><FONT ID="LN">575 </FONT><A NAME="575"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  a &lt;code&gt;Class&lt;/code&gt; object corresponding to &lt;code&gt;desc&lt;/code&gt;<br><FONT ID="LN">576 </FONT><A NAME="576"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException any of the usual input/output exceptions<br><FONT ID="LN">577 </FONT><A NAME="577"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException if class of a serialized object cannot<br><FONT ID="LN">578 </FONT><A NAME="578"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      be found<br><FONT ID="LN">579 </FONT><A NAME="579"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">580 </FONT><A NAME="580"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;?&gt; resolveClass(<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc)<br><FONT ID="LN">581 </FONT><A NAME="581"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">582 </FONT><A NAME="582"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">583 </FONT><A NAME="583"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name = desc.getName();<br><FONT ID="LN">584 </FONT><A NAME="584"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">585 </FONT><A NAME="585"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Class.forName(name, <FONT ID="False">false</FONT>, latestUserDefinedLoader());<br><FONT ID="LN">586 </FONT><A NAME="586"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">587 </FONT><A NAME="587"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = (<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) primClasses.get(name);<br><FONT ID="LN">588 </FONT><A NAME="588"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (cl != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">589 </FONT><A NAME="589"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> cl;<br><FONT ID="LN">590 </FONT><A NAME="590"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">591 </FONT><A NAME="591"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">592 </FONT><A NAME="592"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">593 </FONT><A NAME="593"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">594 </FONT><A NAME="594"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">595 </FONT><A NAME="595"></A><br><FONT ID="LN">596 </FONT><A NAME="596"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">597 </FONT><A NAME="597"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns a proxy class that implements the interfaces named in a proxy<br><FONT ID="LN">598 </FONT><A NAME="598"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class descriptor; subclasses may implement this method to read custom<br><FONT ID="LN">599 </FONT><A NAME="599"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* data from the stream along with the descriptors for dynamic proxy<br><FONT ID="LN">600 </FONT><A NAME="600"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* classes, allowing them to use an alternate loading mechanism for the<br><FONT ID="LN">601 </FONT><A NAME="601"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interfaces and the proxy class.<br><FONT ID="LN">602 </FONT><A NAME="602"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">603 </FONT><A NAME="603"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;This method is called exactly once for each unique proxy class<br><FONT ID="LN">604 </FONT><A NAME="604"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* descriptor in the stream.<br><FONT ID="LN">605 </FONT><A NAME="605"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">606 </FONT><A NAME="606"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;The corresponding method in &lt;code&gt;ObjectOutputStream&lt;/code&gt; is<br><FONT ID="LN">607 </FONT><A NAME="607"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;annotateProxyClass&lt;/code&gt;.  For a given subclass of<br><FONT ID="LN">608 </FONT><A NAME="608"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;ObjectInputStream&lt;/code&gt; that overrides this method, the<br><FONT ID="LN">609 </FONT><A NAME="609"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;annotateProxyClass&lt;/code&gt; method in the corresponding subclass of<br><FONT ID="LN">610 </FONT><A NAME="610"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;ObjectOutputStream&lt;/code&gt; must write any data or objects read by<br><FONT ID="LN">611 </FONT><A NAME="611"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this method.<br><FONT ID="LN">612 </FONT><A NAME="612"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">613 </FONT><A NAME="613"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;The default implementation of this method in<br><FONT ID="LN">614 </FONT><A NAME="614"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;ObjectInputStream&lt;/code&gt; returns the result of calling<br><FONT ID="LN">615 </FONT><A NAME="615"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;Proxy.getProxyClass&lt;/code&gt; with the list of &lt;code&gt;Class&lt;/code&gt;<br><FONT ID="LN">616 </FONT><A NAME="616"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* objects for the interfaces that are named in the &lt;code&gt;interfaces&lt;/code&gt;<br><FONT ID="LN">617 </FONT><A NAME="617"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* parameter.  The &lt;code&gt;Class&lt;/code&gt; object for each interface name<br><FONT ID="LN">618 </FONT><A NAME="618"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;i&lt;/code&gt; is the value returned by calling<br><FONT ID="LN">619 </FONT><A NAME="619"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;pre&gt;<br><FONT ID="LN">620 </FONT><A NAME="620"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     Class.forName(i, false, loader)<br><FONT ID="LN">621 </FONT><A NAME="621"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;/pre&gt;<br><FONT ID="LN">622 </FONT><A NAME="622"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* where &lt;code&gt;loader&lt;/code&gt; is that of the first non-&lt;code&gt;null&lt;/code&gt;<br><FONT ID="LN">623 </FONT><A NAME="623"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class loader up the execution stack, or &lt;code&gt;null&lt;/code&gt; if no<br><FONT ID="LN">624 </FONT><A NAME="624"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* non-&lt;code&gt;null&lt;/code&gt; class loaders are on the stack (the same class<br><FONT ID="LN">625 </FONT><A NAME="625"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* loader choice used by the &lt;code&gt;resolveClass&lt;/code&gt; method).  Unless any<br><FONT ID="LN">626 </FONT><A NAME="626"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* of the resolved interfaces are non-public, this same value of<br><FONT ID="LN">627 </FONT><A NAME="627"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;loader&lt;/code&gt; is also the class loader passed to<br><FONT ID="LN">628 </FONT><A NAME="628"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;Proxy.getProxyClass&lt;/code&gt;; if non-public interfaces are present,<br><FONT ID="LN">629 </FONT><A NAME="629"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* their class loader is passed instead (if more than one non-public<br><FONT ID="LN">630 </FONT><A NAME="630"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* interface class loader is encountered, an<br><FONT ID="LN">631 </FONT><A NAME="631"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;IllegalAccessError&lt;/code&gt; is thrown).  <br><FONT ID="LN">632 </FONT><A NAME="632"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If &lt;code&gt;Proxy.getProxyClass&lt;/code&gt; throws an<br><FONT ID="LN">633 </FONT><A NAME="633"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;IllegalArgumentException&lt;/code&gt;, &lt;code&gt;resolveProxyClass&lt;/code&gt;<br><FONT ID="LN">634 </FONT><A NAME="634"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* will throw a &lt;code&gt;ClassNotFoundException&lt;/code&gt; containing the<br><FONT ID="LN">635 </FONT><A NAME="635"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;IllegalArgumentException&lt;/code&gt;.<br><FONT ID="LN">636 </FONT><A NAME="636"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">637 </FONT><A NAME="637"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   interfaces the list of interface names that were<br><FONT ID="LN">638 </FONT><A NAME="638"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      deserialized in the proxy class descriptor<br><FONT ID="LN">639 </FONT><A NAME="639"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  a proxy class for the specified interfaces<br><FONT ID="LN">640 </FONT><A NAME="640"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException any exception thrown by the underlying<br><FONT ID="LN">641 </FONT><A NAME="641"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">642 </FONT><A NAME="642"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException if the proxy class or any of the<br><FONT ID="LN">643 </FONT><A NAME="643"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      named interfaces could not be found<br><FONT ID="LN">644 </FONT><A NAME="644"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see ObjectOutputStream#annotateProxyClass(Class)<br><FONT ID="LN">645 </FONT><A NAME="645"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @since   1.3<br><FONT ID="LN">646 </FONT><A NAME="646"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">647 </FONT><A NAME="647"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>&lt;?&gt; resolveProxyClass(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] interfaces)<br><FONT ID="LN">648 </FONT><A NAME="648"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">649 </FONT><A NAME="649"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">650 </FONT><A NAME="650"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassLoader.java.htm">ClassLoader</A>  <A HREF= "/867.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> latestLoader = latestUserDefinedLoader();<br><FONT ID="LN">651 </FONT><A NAME="651"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassLoader.java.htm">ClassLoader</A>  <A HREF= "/867.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> nonPublicLoader = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">652 </FONT><A NAME="652"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> hasNonPublicInterface = <FONT ID="False">false</FONT>;<br><FONT ID="LN">653 </FONT><A NAME="653"></A><br><FONT ID="LN">654 </FONT><A NAME="654"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// define proxy in class loader of non-public interface(s), if any<br><FONT ID="LN">655 </FONT><A NAME="655"></A></FONT>    <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] classObjs = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[interfaces.length];<br><FONT ID="LN">656 </FONT><A NAME="656"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; interfaces.length; i++) {<br><FONT ID="LN">657 </FONT><A NAME="657"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = Class.forName(interfaces[i], <FONT ID="False">false</FONT>, latestLoader);<br><FONT ID="LN">658 </FONT><A NAME="658"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((cl.getModifiers() &amp; Modifier.PUBLIC) == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">659 </FONT><A NAME="659"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (hasNonPublicInterface) {<br><FONT ID="LN">660 </FONT><A NAME="660"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (nonPublicLoader != cl.getClassLoader()) {<br><FONT ID="LN">661 </FONT><A NAME="661"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalAccessError.java.htm">IllegalAccessError</A>  <A HREF= "/2783.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">662 </FONT><A NAME="662"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"conflicting non-public interface class loaders"</FONT>);<br><FONT ID="LN">663 </FONT><A NAME="663"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">664 </FONT><A NAME="664"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">665 </FONT><A NAME="665"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nonPublicLoader = cl.getClassLoader();<br><FONT ID="LN">666 </FONT><A NAME="666"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasNonPublicInterface = <FONT ID="True">true</FONT>;<br><FONT ID="LN">667 </FONT><A NAME="667"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">668 </FONT><A NAME="668"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">669 </FONT><A NAME="669"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classObjs[i] = cl;<br><FONT ID="LN">670 </FONT><A NAME="670"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">671 </FONT><A NAME="671"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">672 </FONT><A NAME="672"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Proxy.getProxyClass(<br><FONT ID="LN">673 </FONT><A NAME="673"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasNonPublicInterface ? nonPublicLoader : latestLoader,<br><FONT ID="LN">674 </FONT><A NAME="674"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classObjs);<br><FONT ID="LN">675 </FONT><A NAME="675"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/IllegalArgumentException.java.htm">IllegalArgumentException</A>  <A HREF= "/2785.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> e) {<br><FONT ID="LN">676 </FONT><A NAME="676"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="Null">null</FONT>, e);<br><FONT ID="LN">677 </FONT><A NAME="677"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">678 </FONT><A NAME="678"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">679 </FONT><A NAME="679"></A><br><FONT ID="LN">680 </FONT><A NAME="680"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">681 </FONT><A NAME="681"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method will allow trusted subclasses of ObjectInputStream to<br><FONT ID="LN">682 </FONT><A NAME="682"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* substitute one object for another during deserialization. Replacing<br><FONT ID="LN">683 </FONT><A NAME="683"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* objects is disabled until enableResolveObject is called. The<br><FONT ID="LN">684 </FONT><A NAME="684"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* enableResolveObject method checks that the stream requesting to resolve<br><FONT ID="LN">685 </FONT><A NAME="685"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object can be trusted. Every reference to serializable objects is passed<br><FONT ID="LN">686 </FONT><A NAME="686"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to resolveObject.  To insure that the private state of objects is not<br><FONT ID="LN">687 </FONT><A NAME="687"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* unintentionally exposed only trusted streams may use resolveObject.<br><FONT ID="LN">688 </FONT><A NAME="688"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">689 </FONT><A NAME="689"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;This method is called after an object has been read but before it is<br><FONT ID="LN">690 </FONT><A NAME="690"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* returned from readObject.  The default resolveObject method just returns<br><FONT ID="LN">691 </FONT><A NAME="691"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the same object.<br><FONT ID="LN">692 </FONT><A NAME="692"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">693 </FONT><A NAME="693"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;When a subclass is replacing objects it must insure that the<br><FONT ID="LN">694 </FONT><A NAME="694"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* substituted object is compatible with every field where the reference<br><FONT ID="LN">695 </FONT><A NAME="695"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* will be stored.  Objects whose type is not a subclass of the type of the<br><FONT ID="LN">696 </FONT><A NAME="696"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* field or array element abort the serialization by raising an exception<br><FONT ID="LN">697 </FONT><A NAME="697"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and the object is not be stored.<br><FONT ID="LN">698 </FONT><A NAME="698"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">699 </FONT><A NAME="699"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;This method is called only once when each object is first<br><FONT ID="LN">700 </FONT><A NAME="700"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* encountered.  All subsequent references to the object will be redirected<br><FONT ID="LN">701 </FONT><A NAME="701"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to the new object.<br><FONT ID="LN">702 </FONT><A NAME="702"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">703 </FONT><A NAME="703"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   obj object to be substituted<br><FONT ID="LN">704 </FONT><A NAME="704"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the substituted object<br><FONT ID="LN">705 </FONT><A NAME="705"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException Any of the usual Input/Output exceptions.<br><FONT ID="LN">706 </FONT><A NAME="706"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">707 </FONT><A NAME="707"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveObject(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">708 </FONT><A NAME="708"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">709 </FONT><A NAME="709"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">710 </FONT><A NAME="710"></A><br><FONT ID="LN">711 </FONT><A NAME="711"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">712 </FONT><A NAME="712"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Enable the stream to allow objects read from the stream to be replaced.<br><FONT ID="LN">713 </FONT><A NAME="713"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* When enabled, the resolveObject method is called for every object being<br><FONT ID="LN">714 </FONT><A NAME="714"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* deserialized.<br><FONT ID="LN">715 </FONT><A NAME="715"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">716 </FONT><A NAME="716"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;If &lt;i&gt;enable&lt;/i&gt; is true, and there is a security manager installed,<br><FONT ID="LN">717 </FONT><A NAME="717"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this method first calls the security manager's<br><FONT ID="LN">718 </FONT><A NAME="718"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;checkPermission&lt;/code&gt; method with the<br><FONT ID="LN">719 </FONT><A NAME="719"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;code&gt;SerializablePermission("enableSubstitution")&lt;/code&gt; permission to<br><FONT ID="LN">720 </FONT><A NAME="720"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ensure it's ok to enable the stream to allow objects read from the<br><FONT ID="LN">721 </FONT><A NAME="721"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* stream to be replaced.<br><FONT ID="LN">722 </FONT><A NAME="722"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">723 </FONT><A NAME="723"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   enable true for enabling use of &lt;code&gt;resolveObject&lt;/code&gt; for<br><FONT ID="LN">724 </FONT><A NAME="724"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      every object being deserialized<br><FONT ID="LN">725 </FONT><A NAME="725"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the previous setting before this method was invoked<br><FONT ID="LN">726 </FONT><A NAME="726"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  SecurityException if a security manager exists and its<br><FONT ID="LN">727 </FONT><A NAME="727"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      &lt;code&gt;checkPermission&lt;/code&gt; method denies enabling the stream<br><FONT ID="LN">728 </FONT><A NAME="728"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      to allow objects read from the stream to be replaced.<br><FONT ID="LN">729 </FONT><A NAME="729"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see SecurityManager#checkPermission<br><FONT ID="LN">730 </FONT><A NAME="730"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see java.io.SerializablePermission<br><FONT ID="LN">731 </FONT><A NAME="731"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">732 </FONT><A NAME="732"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Boolean">boolean</FONT> enableResolveObject(<FONT ID="Boolean">boolean</FONT> enable)<br><FONT ID="LN">733 </FONT><A NAME="733"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/lang/SecurityException.java.htm">SecurityException</A>  <A HREF= "/1840.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">734 </FONT><A NAME="734"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">735 </FONT><A NAME="735"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (enable == enableResolve) {<br><FONT ID="LN">736 </FONT><A NAME="736"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> enable;<br><FONT ID="LN">737 </FONT><A NAME="737"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">738 </FONT><A NAME="738"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (enable) {<br><FONT ID="LN">739 </FONT><A NAME="739"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/SecurityManager.java.htm">SecurityManager</A>  <A HREF= "/1841.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sm = System.getSecurityManager();<br><FONT ID="LN">740 </FONT><A NAME="740"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (sm != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">741 </FONT><A NAME="741"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sm.checkPermission(SUBSTITUTION_PERMISSION);<br><FONT ID="LN">742 </FONT><A NAME="742"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">743 </FONT><A NAME="743"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">744 </FONT><A NAME="744"></A>&nbsp;&nbsp;&nbsp;&nbsp;enableResolve = enable;<br><FONT ID="LN">745 </FONT><A NAME="745"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> !enableResolve;<br><FONT ID="LN">746 </FONT><A NAME="746"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">747 </FONT><A NAME="747"></A><br><FONT ID="LN">748 </FONT><A NAME="748"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">749 </FONT><A NAME="749"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The readStreamHeader method is provided to allow subclasses to read and<br><FONT ID="LN">750 </FONT><A NAME="750"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* verify their own stream headers. It reads and verifies the magic number<br><FONT ID="LN">751 </FONT><A NAME="751"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and version number.<br><FONT ID="LN">752 </FONT><A NAME="752"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">753 </FONT><A NAME="753"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if there are I/O errors while reading from the<br><FONT ID="LN">754 </FONT><A NAME="754"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      underlying &lt;code&gt;InputStream&lt;/code&gt; <br><FONT ID="LN">755 </FONT><A NAME="755"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  StreamCorruptedException if control information in the stream<br><FONT ID="LN">756 </FONT><A NAME="756"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      is inconsistent<br><FONT ID="LN">757 </FONT><A NAME="757"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">758 </FONT><A NAME="758"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <FONT ID="Void">void</FONT> readStreamHeader()<br><FONT ID="LN">759 </FONT><A NAME="759"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">760 </FONT><A NAME="760"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">761 </FONT><A NAME="761"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readShort() != STREAM_MAGIC ||<br><FONT ID="LN">762 </FONT><A NAME="762"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readShort() != STREAM_VERSION)<br><FONT ID="LN">763 </FONT><A NAME="763"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">764 </FONT><A NAME="764"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"invalid stream header"</FONT>);<br><FONT ID="LN">765 </FONT><A NAME="765"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">766 </FONT><A NAME="766"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">767 </FONT><A NAME="767"></A><br><FONT ID="LN">768 </FONT><A NAME="768"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">769 </FONT><A NAME="769"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Read a class descriptor from the serialization stream.  This method is<br><FONT ID="LN">770 </FONT><A NAME="770"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* called when the ObjectInputStream expects a class descriptor as the next<br><FONT ID="LN">771 </FONT><A NAME="771"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* item in the serialization stream.  Subclasses of ObjectInputStream may<br><FONT ID="LN">772 </FONT><A NAME="772"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* override this method to read in class descriptors that have been written<br><FONT ID="LN">773 </FONT><A NAME="773"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* in non-standard formats (by subclasses of ObjectOutputStream which have<br><FONT ID="LN">774 </FONT><A NAME="774"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* overridden the &lt;code&gt;writeClassDescriptor&lt;/code&gt; method).  By default,<br><FONT ID="LN">775 </FONT><A NAME="775"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* this method reads class descriptors according to the format defined in<br><FONT ID="LN">776 </FONT><A NAME="776"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the Object Serialization specification.<br><FONT ID="LN">777 </FONT><A NAME="777"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">778 </FONT><A NAME="778"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the class descriptor read<br><FONT ID="LN">779 </FONT><A NAME="779"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If an I/O error has occurred.<br><FONT ID="LN">780 </FONT><A NAME="780"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  ClassNotFoundException If the Class of a serialized object used<br><FONT ID="LN">781 </FONT><A NAME="781"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      in the class descriptor representation cannot be found<br><FONT ID="LN">782 </FONT><A NAME="782"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see java.io.ObjectOutputStream#writeClassDescriptor(java.io.ObjectStreamClass)<br><FONT ID="LN">783 </FONT><A NAME="783"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @since 1.3<br><FONT ID="LN">784 </FONT><A NAME="784"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">785 </FONT><A NAME="785"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Protected">protected</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readClassDescriptor() <br><FONT ID="LN">786 </FONT><A NAME="786"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">787 </FONT><A NAME="787"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">788 </FONT><A NAME="788"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = <FONT ID="New">new</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">789 </FONT><A NAME="789"></A>&nbsp;&nbsp;&nbsp;&nbsp;desc.readNonProxy(<FONT ID="This">this</FONT>);<br><FONT ID="LN">790 </FONT><A NAME="790"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> desc;<br><FONT ID="LN">791 </FONT><A NAME="791"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">792 </FONT><A NAME="792"></A><br><FONT ID="LN">793 </FONT><A NAME="793"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">794 </FONT><A NAME="794"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a byte of data. This method will block if no input is available.<br><FONT ID="LN">795 </FONT><A NAME="795"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">796 </FONT><A NAME="796"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the byte read, or -1 if the end of the stream is reached.<br><FONT ID="LN">797 </FONT><A NAME="797"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If an I/O error has occurred.<br><FONT ID="LN">798 </FONT><A NAME="798"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">799 </FONT><A NAME="799"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">800 </FONT><A NAME="800"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.read();<br><FONT ID="LN">801 </FONT><A NAME="801"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">802 </FONT><A NAME="802"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">803 </FONT><A NAME="803"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">804 </FONT><A NAME="804"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads into an array of bytes.  This method will block until some input<br><FONT ID="LN">805 </FONT><A NAME="805"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is available. Consider using java.io.DataInputStream.readFully to read<br><FONT ID="LN">806 </FONT><A NAME="806"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* exactly 'length' bytes.<br><FONT ID="LN">807 </FONT><A NAME="807"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">808 </FONT><A NAME="808"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   buf the buffer into which the data is read<br><FONT ID="LN">809 </FONT><A NAME="809"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   off the start offset of the data<br><FONT ID="LN">810 </FONT><A NAME="810"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   len the maximum number of bytes read<br><FONT ID="LN">811 </FONT><A NAME="811"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the actual number of bytes read, -1 is returned when the end of<br><FONT ID="LN">812 </FONT><A NAME="812"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      the stream is reached.<br><FONT ID="LN">813 </FONT><A NAME="813"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If an I/O error has occurred.<br><FONT ID="LN">814 </FONT><A NAME="814"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @see java.io.DataInputStream#readFully(byte[],int,int)<br><FONT ID="LN">815 </FONT><A NAME="815"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">816 </FONT><A NAME="816"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read(<FONT ID="Byte">byte</FONT>[] buf, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">817 </FONT><A NAME="817"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (buf == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">818 </FONT><A NAME="818"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/NullPointerException.java.htm">NullPointerException</A>  <A HREF= "/1249.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">819 </FONT><A NAME="819"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">820 </FONT><A NAME="820"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> endoff = off + len;<br><FONT ID="LN">821 </FONT><A NAME="821"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (off &lt; <FONT ID="IntegerLiteral">0</FONT> || len &lt; <FONT ID="IntegerLiteral">0</FONT> || endoff &gt; buf.length || endoff &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">822 </FONT><A NAME="822"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IndexOutOfBoundsException.java.htm">IndexOutOfBoundsException</A>  <A HREF= "/2800.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">823 </FONT><A NAME="823"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">824 </FONT><A NAME="824"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.read(buf, off, len, <FONT ID="False">false</FONT>);<br><FONT ID="LN">825 </FONT><A NAME="825"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">826 </FONT><A NAME="826"></A><br><FONT ID="LN">827 </FONT><A NAME="827"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">828 </FONT><A NAME="828"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns the number of bytes that can be read without blocking.<br><FONT ID="LN">829 </FONT><A NAME="829"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">830 </FONT><A NAME="830"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the number of available bytes.<br><FONT ID="LN">831 </FONT><A NAME="831"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if there are I/O errors while reading from the<br><FONT ID="LN">832 </FONT><A NAME="832"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">833 </FONT><A NAME="833"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">834 </FONT><A NAME="834"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> available() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">835 </FONT><A NAME="835"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.available();<br><FONT ID="LN">836 </FONT><A NAME="836"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">837 </FONT><A NAME="837"></A><br><FONT ID="LN">838 </FONT><A NAME="838"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">839 </FONT><A NAME="839"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Closes the input stream. Must be called to release any resources<br><FONT ID="LN">840 </FONT><A NAME="840"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with the stream.<br><FONT ID="LN">841 </FONT><A NAME="841"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">842 </FONT><A NAME="842"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If an I/O error has occurred.<br><FONT ID="LN">843 </FONT><A NAME="843"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">844 </FONT><A NAME="844"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> close() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">845 </FONT><A NAME="845"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">846 </FONT><A NAME="846"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Even if stream already closed, propagate redundant close to<br><FONT ID="LN">847 </FONT><A NAME="847"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* underlying stream to stay consistent with previous implementations.<br><FONT ID="LN">848 </FONT><A NAME="848"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">849 </FONT><A NAME="849"></A>&nbsp;&nbsp;&nbsp;&nbsp;closed = <FONT ID="True">true</FONT>;<br><FONT ID="LN">850 </FONT><A NAME="850"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (depth == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">851 </FONT><A NAME="851"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear();<br><FONT ID="LN">852 </FONT><A NAME="852"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">853 </FONT><A NAME="853"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.close();<br><FONT ID="LN">854 </FONT><A NAME="854"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">855 </FONT><A NAME="855"></A><br><FONT ID="LN">856 </FONT><A NAME="856"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">857 </FONT><A NAME="857"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in a boolean.<br><FONT ID="LN">858 </FONT><A NAME="858"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">859 </FONT><A NAME="859"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the boolean read.<br><FONT ID="LN">860 </FONT><A NAME="860"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">861 </FONT><A NAME="861"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">862 </FONT><A NAME="862"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">863 </FONT><A NAME="863"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> readBoolean() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">864 </FONT><A NAME="864"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readBoolean();<br><FONT ID="LN">865 </FONT><A NAME="865"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">866 </FONT><A NAME="866"></A><br><FONT ID="LN">867 </FONT><A NAME="867"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">868 </FONT><A NAME="868"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads an 8 bit byte.<br><FONT ID="LN">869 </FONT><A NAME="869"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">870 </FONT><A NAME="870"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 8 bit byte read.<br><FONT ID="LN">871 </FONT><A NAME="871"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">872 </FONT><A NAME="872"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">873 </FONT><A NAME="873"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">874 </FONT><A NAME="874"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Byte">byte</FONT> readByte() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>  {<br><FONT ID="LN">875 </FONT><A NAME="875"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readByte();<br><FONT ID="LN">876 </FONT><A NAME="876"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">877 </FONT><A NAME="877"></A><br><FONT ID="LN">878 </FONT><A NAME="878"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">879 </FONT><A NAME="879"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads an unsigned 8 bit byte.<br><FONT ID="LN">880 </FONT><A NAME="880"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">881 </FONT><A NAME="881"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 8 bit byte read.<br><FONT ID="LN">882 </FONT><A NAME="882"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">883 </FONT><A NAME="883"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">884 </FONT><A NAME="884"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">885 </FONT><A NAME="885"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readUnsignedByte()  <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">886 </FONT><A NAME="886"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readUnsignedByte();<br><FONT ID="LN">887 </FONT><A NAME="887"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">888 </FONT><A NAME="888"></A><br><FONT ID="LN">889 </FONT><A NAME="889"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">890 </FONT><A NAME="890"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 16 bit char.<br><FONT ID="LN">891 </FONT><A NAME="891"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">892 </FONT><A NAME="892"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 16 bit char read. <br><FONT ID="LN">893 </FONT><A NAME="893"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">894 </FONT><A NAME="894"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">895 </FONT><A NAME="895"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">896 </FONT><A NAME="896"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Char">char</FONT> readChar()  <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">897 </FONT><A NAME="897"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readChar();<br><FONT ID="LN">898 </FONT><A NAME="898"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">899 </FONT><A NAME="899"></A><br><FONT ID="LN">900 </FONT><A NAME="900"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">901 </FONT><A NAME="901"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 16 bit short.<br><FONT ID="LN">902 </FONT><A NAME="902"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">903 </FONT><A NAME="903"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 16 bit short read.<br><FONT ID="LN">904 </FONT><A NAME="904"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">905 </FONT><A NAME="905"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">906 </FONT><A NAME="906"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">907 </FONT><A NAME="907"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Short">short</FONT> readShort()  <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">908 </FONT><A NAME="908"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readShort();<br><FONT ID="LN">909 </FONT><A NAME="909"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">910 </FONT><A NAME="910"></A><br><FONT ID="LN">911 </FONT><A NAME="911"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">912 </FONT><A NAME="912"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads an unsigned 16 bit short.<br><FONT ID="LN">913 </FONT><A NAME="913"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">914 </FONT><A NAME="914"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 16 bit short read.<br><FONT ID="LN">915 </FONT><A NAME="915"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">916 </FONT><A NAME="916"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">917 </FONT><A NAME="917"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">918 </FONT><A NAME="918"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readUnsignedShort() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">919 </FONT><A NAME="919"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readUnsignedShort();<br><FONT ID="LN">920 </FONT><A NAME="920"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">921 </FONT><A NAME="921"></A><br><FONT ID="LN">922 </FONT><A NAME="922"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">923 </FONT><A NAME="923"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 32 bit int.<br><FONT ID="LN">924 </FONT><A NAME="924"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">925 </FONT><A NAME="925"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 32 bit integer read.<br><FONT ID="LN">926 </FONT><A NAME="926"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">927 </FONT><A NAME="927"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">928 </FONT><A NAME="928"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">929 </FONT><A NAME="929"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readInt()  <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">930 </FONT><A NAME="930"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readInt();<br><FONT ID="LN">931 </FONT><A NAME="931"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">932 </FONT><A NAME="932"></A><br><FONT ID="LN">933 </FONT><A NAME="933"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">934 </FONT><A NAME="934"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 64 bit long.<br><FONT ID="LN">935 </FONT><A NAME="935"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">936 </FONT><A NAME="936"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the read 64 bit long.<br><FONT ID="LN">937 </FONT><A NAME="937"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">938 </FONT><A NAME="938"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">939 </FONT><A NAME="939"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">940 </FONT><A NAME="940"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Long">long</FONT> readLong()  <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">941 </FONT><A NAME="941"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readLong();<br><FONT ID="LN">942 </FONT><A NAME="942"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">943 </FONT><A NAME="943"></A><br><FONT ID="LN">944 </FONT><A NAME="944"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">945 </FONT><A NAME="945"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 32 bit float.<br><FONT ID="LN">946 </FONT><A NAME="946"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">947 </FONT><A NAME="947"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 32 bit float read.<br><FONT ID="LN">948 </FONT><A NAME="948"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">949 </FONT><A NAME="949"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">950 </FONT><A NAME="950"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">951 </FONT><A NAME="951"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Float">float</FONT> readFloat() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">952 </FONT><A NAME="952"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readFloat();<br><FONT ID="LN">953 </FONT><A NAME="953"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">954 </FONT><A NAME="954"></A><br><FONT ID="LN">955 </FONT><A NAME="955"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">956 </FONT><A NAME="956"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a 64 bit double.<br><FONT ID="LN">957 </FONT><A NAME="957"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">958 </FONT><A NAME="958"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the 64 bit double read.<br><FONT ID="LN">959 </FONT><A NAME="959"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">960 </FONT><A NAME="960"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">961 </FONT><A NAME="961"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">962 </FONT><A NAME="962"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> readDouble() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">963 </FONT><A NAME="963"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readDouble();<br><FONT ID="LN">964 </FONT><A NAME="964"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">965 </FONT><A NAME="965"></A><br><FONT ID="LN">966 </FONT><A NAME="966"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">967 </FONT><A NAME="967"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads bytes, blocking until all bytes are read.<br><FONT ID="LN">968 </FONT><A NAME="968"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">969 </FONT><A NAME="969"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   buf the buffer into which the data is read<br><FONT ID="LN">970 </FONT><A NAME="970"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">971 </FONT><A NAME="971"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">972 </FONT><A NAME="972"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">973 </FONT><A NAME="973"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] buf) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">974 </FONT><A NAME="974"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, buf.length, <FONT ID="False">false</FONT>);<br><FONT ID="LN">975 </FONT><A NAME="975"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">976 </FONT><A NAME="976"></A><br><FONT ID="LN">977 </FONT><A NAME="977"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">978 </FONT><A NAME="978"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads bytes, blocking until all bytes are read.<br><FONT ID="LN">979 </FONT><A NAME="979"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">980 </FONT><A NAME="980"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   buf the buffer into which the data is read<br><FONT ID="LN">981 </FONT><A NAME="981"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   off the start offset of the data<br><FONT ID="LN">982 </FONT><A NAME="982"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   len the maximum number of bytes to read<br><FONT ID="LN">983 </FONT><A NAME="983"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">984 </FONT><A NAME="984"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">985 </FONT><A NAME="985"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">986 </FONT><A NAME="986"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] buf, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">987 </FONT><A NAME="987"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> endoff = off + len;<br><FONT ID="LN">988 </FONT><A NAME="988"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (off &lt; <FONT ID="IntegerLiteral">0</FONT> || len &lt; <FONT ID="IntegerLiteral">0</FONT> || endoff &gt; buf.length || endoff &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">989 </FONT><A NAME="989"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IndexOutOfBoundsException.java.htm">IndexOutOfBoundsException</A>  <A HREF= "/2800.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">990 </FONT><A NAME="990"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">991 </FONT><A NAME="991"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.readFully(buf, off, len, <FONT ID="False">false</FONT>);<br><FONT ID="LN">992 </FONT><A NAME="992"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">993 </FONT><A NAME="993"></A><br><FONT ID="LN">994 </FONT><A NAME="994"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">995 </FONT><A NAME="995"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Skips bytes, block until all bytes are skipped.<br><FONT ID="LN">996 </FONT><A NAME="996"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">997 </FONT><A NAME="997"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param   len the number of bytes to be skipped<br><FONT ID="LN">998 </FONT><A NAME="998"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the actual number of bytes skipped.<br><FONT ID="LN">999 </FONT><A NAME="999"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  EOFException If end of file is reached.<br><FONT ID="LN">1000</FONT><A NAME="1000"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException If other I/O error has occurred.<br><FONT ID="LN">1001</FONT><A NAME="1001"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1002</FONT><A NAME="1002"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> skipBytes(<FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1003</FONT><A NAME="1003"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.skipBytes(len);<br><FONT ID="LN">1004</FONT><A NAME="1004"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1005</FONT><A NAME="1005"></A><br><FONT ID="LN">1006</FONT><A NAME="1006"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1007</FONT><A NAME="1007"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in a line that has been terminated by a \n, \r, \r\n or EOF.<br><FONT ID="LN">1008</FONT><A NAME="1008"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1009</FONT><A NAME="1009"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  a String copy of the line.<br><FONT ID="LN">1010</FONT><A NAME="1010"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if there are I/O errors while reading from the<br><FONT ID="LN">1011</FONT><A NAME="1011"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1012</FONT><A NAME="1012"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @deprecated This method does not properly convert bytes to characters.<br><FONT ID="LN">1013</FONT><A NAME="1013"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      see DataInputStream for the details and alternatives.<br><FONT ID="LN">1014</FONT><A NAME="1014"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1015</FONT><A NAME="1015"></A>&nbsp;&nbsp;&nbsp;&nbsp;@<A HREF="../../java/lang/Deprecated.java.htm">Deprecated</A>  <A HREF= "/4137.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">1016</FONT><A NAME="1016"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readLine() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1017</FONT><A NAME="1017"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readLine();<br><FONT ID="LN">1018</FONT><A NAME="1018"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1019</FONT><A NAME="1019"></A><br><FONT ID="LN">1020</FONT><A NAME="1020"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1021</FONT><A NAME="1021"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads a String in<br><FONT ID="LN">1022</FONT><A NAME="1022"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;a HREF="DataInput.html#modified-utf-8"&gt;modified UTF-8&lt;/a&gt;<br><FONT ID="LN">1023</FONT><A NAME="1023"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* format.<br><FONT ID="LN">1024</FONT><A NAME="1024"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1025</FONT><A NAME="1025"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the String.<br><FONT ID="LN">1026</FONT><A NAME="1026"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  IOException if there are I/O errors while reading from the<br><FONT ID="LN">1027</FONT><A NAME="1027"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1028</FONT><A NAME="1028"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws  UTFDataFormatException if read bytes do not represent a valid<br><FONT ID="LN">1029</FONT><A NAME="1029"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*      modified UTF-8 encoding of a string<br><FONT ID="LN">1030</FONT><A NAME="1030"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1031</FONT><A NAME="1031"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readUTF() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1032</FONT><A NAME="1032"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> bin.readUTF();<br><FONT ID="LN">1033</FONT><A NAME="1033"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1034</FONT><A NAME="1034"></A><br><FONT ID="LN">1035</FONT><A NAME="1035"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1036</FONT><A NAME="1036"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Provide access to the persistent fields read from the input stream.<br><FONT ID="LN">1037</FONT><A NAME="1037"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1038</FONT><A NAME="1038"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Static">static</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Class">class</FONT> GetField {<br><FONT ID="LN">1039</FONT><A NAME="1039"></A>&nbsp;<br><FONT ID="LN">1040</FONT><A NAME="1040"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1041</FONT><A NAME="1041"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the ObjectStreamClass that describes the fields in the stream.<br><FONT ID="LN">1042</FONT><A NAME="1042"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1043</FONT><A NAME="1043"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return  the descriptor class that describes the serializable fields<br><FONT ID="LN">1044</FONT><A NAME="1044"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1045</FONT><A NAME="1045"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getObjectStreamClass();<br><FONT ID="LN">1046</FONT><A NAME="1046"></A>&nbsp;<br><FONT ID="LN">1047</FONT><A NAME="1047"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1048</FONT><A NAME="1048"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Return true if the named field is defaulted and has no value in this<br><FONT ID="LN">1049</FONT><A NAME="1049"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* stream.<br><FONT ID="LN">1050</FONT><A NAME="1050"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1051</FONT><A NAME="1051"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1052</FONT><A NAME="1052"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return true, if and only if the named field is defaulted<br><FONT ID="LN">1053</FONT><A NAME="1053"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from<br><FONT ID="LN">1054</FONT><A NAME="1054"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     the underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1055</FONT><A NAME="1055"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1056</FONT><A NAME="1056"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     correspond to a serializable field<br><FONT ID="LN">1057</FONT><A NAME="1057"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1058</FONT><A NAME="1058"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Boolean">boolean</FONT> defaulted(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1059</FONT><A NAME="1059"></A>&nbsp;<br><FONT ID="LN">1060</FONT><A NAME="1060"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1061</FONT><A NAME="1061"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named boolean field from the persistent field.<br><FONT ID="LN">1062</FONT><A NAME="1062"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1063</FONT><A NAME="1063"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1064</FONT><A NAME="1064"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1065</FONT><A NAME="1065"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1066</FONT><A NAME="1066"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;boolean&lt;/code&gt; field<br><FONT ID="LN">1067</FONT><A NAME="1067"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1068</FONT><A NAME="1068"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1069</FONT><A NAME="1069"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1070</FONT><A NAME="1070"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1071</FONT><A NAME="1071"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1072</FONT><A NAME="1072"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Boolean">boolean</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Boolean">boolean</FONT> val) <br><FONT ID="LN">1073</FONT><A NAME="1073"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1074</FONT><A NAME="1074"></A>&nbsp;<br><FONT ID="LN">1075</FONT><A NAME="1075"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1076</FONT><A NAME="1076"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named byte field from the persistent field.<br><FONT ID="LN">1077</FONT><A NAME="1077"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1078</FONT><A NAME="1078"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1079</FONT><A NAME="1079"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1080</FONT><A NAME="1080"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1081</FONT><A NAME="1081"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;byte&lt;/code&gt; field<br><FONT ID="LN">1082</FONT><A NAME="1082"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1083</FONT><A NAME="1083"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1084</FONT><A NAME="1084"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1085</FONT><A NAME="1085"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1086</FONT><A NAME="1086"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1087</FONT><A NAME="1087"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Byte">byte</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Byte">byte</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1088</FONT><A NAME="1088"></A>&nbsp;<br><FONT ID="LN">1089</FONT><A NAME="1089"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1090</FONT><A NAME="1090"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named char field from the persistent field.<br><FONT ID="LN">1091</FONT><A NAME="1091"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1092</FONT><A NAME="1092"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1093</FONT><A NAME="1093"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1094</FONT><A NAME="1094"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1095</FONT><A NAME="1095"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;char&lt;/code&gt; field<br><FONT ID="LN">1096</FONT><A NAME="1096"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1097</FONT><A NAME="1097"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1098</FONT><A NAME="1098"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1099</FONT><A NAME="1099"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1100</FONT><A NAME="1100"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1101</FONT><A NAME="1101"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Char">char</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Char">char</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1102</FONT><A NAME="1102"></A>&nbsp;<br><FONT ID="LN">1103</FONT><A NAME="1103"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1104</FONT><A NAME="1104"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named short field from the persistent field.<br><FONT ID="LN">1105</FONT><A NAME="1105"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1106</FONT><A NAME="1106"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1107</FONT><A NAME="1107"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1108</FONT><A NAME="1108"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1109</FONT><A NAME="1109"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;short&lt;/code&gt; field<br><FONT ID="LN">1110</FONT><A NAME="1110"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1111</FONT><A NAME="1111"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1112</FONT><A NAME="1112"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1113</FONT><A NAME="1113"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1114</FONT><A NAME="1114"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1115</FONT><A NAME="1115"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Short">short</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Short">short</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1116</FONT><A NAME="1116"></A>&nbsp;<br><FONT ID="LN">1117</FONT><A NAME="1117"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1118</FONT><A NAME="1118"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named int field from the persistent field.<br><FONT ID="LN">1119</FONT><A NAME="1119"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1120</FONT><A NAME="1120"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1121</FONT><A NAME="1121"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1122</FONT><A NAME="1122"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1123</FONT><A NAME="1123"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;int&lt;/code&gt; field<br><FONT ID="LN">1124</FONT><A NAME="1124"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1125</FONT><A NAME="1125"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1126</FONT><A NAME="1126"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1127</FONT><A NAME="1127"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1128</FONT><A NAME="1128"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1129</FONT><A NAME="1129"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Int">int</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Int">int</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1130</FONT><A NAME="1130"></A>&nbsp;<br><FONT ID="LN">1131</FONT><A NAME="1131"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1132</FONT><A NAME="1132"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named long field from the persistent field.<br><FONT ID="LN">1133</FONT><A NAME="1133"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1134</FONT><A NAME="1134"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1135</FONT><A NAME="1135"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1136</FONT><A NAME="1136"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1137</FONT><A NAME="1137"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;long&lt;/code&gt; field<br><FONT ID="LN">1138</FONT><A NAME="1138"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1139</FONT><A NAME="1139"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1140</FONT><A NAME="1140"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1141</FONT><A NAME="1141"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1142</FONT><A NAME="1142"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1143</FONT><A NAME="1143"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Long">long</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Long">long</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1144</FONT><A NAME="1144"></A>&nbsp;<br><FONT ID="LN">1145</FONT><A NAME="1145"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1146</FONT><A NAME="1146"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named float field from the persistent field.<br><FONT ID="LN">1147</FONT><A NAME="1147"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1148</FONT><A NAME="1148"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1149</FONT><A NAME="1149"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1150</FONT><A NAME="1150"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1151</FONT><A NAME="1151"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;float&lt;/code&gt; field<br><FONT ID="LN">1152</FONT><A NAME="1152"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1153</FONT><A NAME="1153"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1154</FONT><A NAME="1154"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1155</FONT><A NAME="1155"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1156</FONT><A NAME="1156"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1157</FONT><A NAME="1157"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Float">float</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Float">float</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1158</FONT><A NAME="1158"></A>&nbsp;<br><FONT ID="LN">1159</FONT><A NAME="1159"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1160</FONT><A NAME="1160"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named double field from the persistent field.<br><FONT ID="LN">1161</FONT><A NAME="1161"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1162</FONT><A NAME="1162"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1163</FONT><A NAME="1163"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1164</FONT><A NAME="1164"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1165</FONT><A NAME="1165"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;double&lt;/code&gt; field<br><FONT ID="LN">1166</FONT><A NAME="1166"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1167</FONT><A NAME="1167"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1168</FONT><A NAME="1168"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1169</FONT><A NAME="1169"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1170</FONT><A NAME="1170"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1171</FONT><A NAME="1171"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <FONT ID="Double">double</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Double">double</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1172</FONT><A NAME="1172"></A>&nbsp;<br><FONT ID="LN">1173</FONT><A NAME="1173"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1174</FONT><A NAME="1174"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Get the value of the named Object field from the persistent field.<br><FONT ID="LN">1175</FONT><A NAME="1175"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br><FONT ID="LN">1176</FONT><A NAME="1176"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  name the name of the field<br><FONT ID="LN">1177</FONT><A NAME="1177"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param  val the default value to use if &lt;code&gt;name&lt;/code&gt; does not<br><FONT ID="LN">1178</FONT><A NAME="1178"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     have a value<br><FONT ID="LN">1179</FONT><A NAME="1179"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @return the value of the named &lt;code&gt;Object&lt;/code&gt; field<br><FONT ID="LN">1180</FONT><A NAME="1180"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IOException if there are I/O errors while reading from the<br><FONT ID="LN">1181</FONT><A NAME="1181"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     underlying &lt;code&gt;InputStream&lt;/code&gt;<br><FONT ID="LN">1182</FONT><A NAME="1182"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @throws IllegalArgumentException if type of &lt;code&gt;name&lt;/code&gt; is<br><FONT ID="LN">1183</FONT><A NAME="1183"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     not serializable or if the field type is incorrect<br><FONT ID="LN">1184</FONT><A NAME="1184"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1185</FONT><A NAME="1185"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Abstract">abstract</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>;<br><FONT ID="LN">1186</FONT><A NAME="1186"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1187</FONT><A NAME="1187"></A><br><FONT ID="LN">1188</FONT><A NAME="1188"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1189</FONT><A NAME="1189"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Verifies that this (possibly subclass) instance can be constructed<br><FONT ID="LN">1190</FONT><A NAME="1190"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* without violating security constraints: the subclass must not override<br><FONT ID="LN">1191</FONT><A NAME="1191"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* security-sensitive non-final methods, or else the<br><FONT ID="LN">1192</FONT><A NAME="1192"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "enableSubclassImplementation" SerializablePermission is checked.<br><FONT ID="LN">1193</FONT><A NAME="1193"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1194</FONT><A NAME="1194"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> verifySubclass() {<br><FONT ID="LN">1195</FONT><A NAME="1195"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = getClass();<br><FONT ID="LN">1196</FONT><A NAME="1196"></A>&nbsp;&nbsp;&nbsp;&nbsp;processQueue(Caches.subclassAuditsQueue, Caches.subclassAudits);<br><FONT ID="LN">1197</FONT><A NAME="1197"></A>&nbsp;&nbsp;&nbsp;&nbsp;WeakClassKey key = <FONT ID="New">new</FONT> WeakClassKey(cl, Caches.subclassAuditsQueue);<br><FONT ID="LN">1198</FONT><A NAME="1198"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> result = Caches.subclassAudits.get(key);<br><FONT ID="LN">1199</FONT><A NAME="1199"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (result == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1200</FONT><A NAME="1200"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = Boolean.valueOf(auditSubclass(cl));<br><FONT ID="LN">1201</FONT><A NAME="1201"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Caches.subclassAudits.putIfAbsent(key, result);<br><FONT ID="LN">1202</FONT><A NAME="1202"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1203</FONT><A NAME="1203"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (result.booleanValue()) {<br><FONT ID="LN">1204</FONT><A NAME="1204"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">1205</FONT><A NAME="1205"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1206</FONT><A NAME="1206"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/SecurityManager.java.htm">SecurityManager</A>  <A HREF= "/1841.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sm = System.getSecurityManager();<br><FONT ID="LN">1207</FONT><A NAME="1207"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (sm != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1208</FONT><A NAME="1208"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sm.checkPermission(SUBCLASS_IMPLEMENTATION_PERMISSION);<br><FONT ID="LN">1209</FONT><A NAME="1209"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1210</FONT><A NAME="1210"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1211</FONT><A NAME="1211"></A><br><FONT ID="LN">1212</FONT><A NAME="1212"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1213</FONT><A NAME="1213"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Performs reflective checks on given subclass to verify that it doesn't<br><FONT ID="LN">1214</FONT><A NAME="1214"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* override security-sensitive non-final methods.  Returns true if subclass<br><FONT ID="LN">1215</FONT><A NAME="1215"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is "safe", false otherwise.<br><FONT ID="LN">1216</FONT><A NAME="1216"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1217</FONT><A NAME="1217"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Boolean">boolean</FONT> auditSubclass(<FONT ID="Final">final</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> subcl) {<br><FONT ID="LN">1218</FONT><A NAME="1218"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> result = (<A HREF="../../java/lang/Boolean.java.htm">Boolean</A>  <A HREF= "/2110.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) AccessController.doPrivileged(<br><FONT ID="LN">1219</FONT><A NAME="1219"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="New">new</FONT> <A HREF="../../java/security/PrivilegedAction.java.htm">PrivilegedAction</A>  <A HREF= "/1819.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>() {<br><FONT ID="LN">1220</FONT><A NAME="1220"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> run() {<br><FONT ID="LN">1221</FONT><A NAME="1221"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = subcl;<br><FONT ID="LN">1222</FONT><A NAME="1222"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cl != <A HREF="../../java/io/ObjectInputStream.java.htm">ObjectInputStream</A>  <A HREF= "/602.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>.<FONT ID="Class">class</FONT>;<br><FONT ID="LN">1223</FONT><A NAME="1223"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cl = cl.getSuperclass())<br><FONT ID="LN">1224</FONT><A NAME="1224"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1225</FONT><A NAME="1225"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1226</FONT><A NAME="1226"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cl.getDeclaredMethod(<FONT ID="StringLiteral">"readUnshared"</FONT>, <FONT ID="New">new</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[<FONT ID="IntegerLiteral">0</FONT>]);<br><FONT ID="LN">1227</FONT><A NAME="1227"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.FALSE;<br><FONT ID="LN">1228</FONT><A NAME="1228"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/NoSuchMethodException.java.htm">NoSuchMethodException</A>  <A HREF= "/1221.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1229</FONT><A NAME="1229"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1230</FONT><A NAME="1230"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1231</FONT><A NAME="1231"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cl.getDeclaredMethod(<FONT ID="StringLiteral">"readFields"</FONT>, <FONT ID="New">new</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[<FONT ID="IntegerLiteral">0</FONT>]);<br><FONT ID="LN">1232</FONT><A NAME="1232"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.FALSE;<br><FONT ID="LN">1233</FONT><A NAME="1233"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/NoSuchMethodException.java.htm">NoSuchMethodException</A>  <A HREF= "/1221.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1234</FONT><A NAME="1234"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1235</FONT><A NAME="1235"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1236</FONT><A NAME="1236"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> Boolean.TRUE;<br><FONT ID="LN">1237</FONT><A NAME="1237"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1238</FONT><A NAME="1238"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1239</FONT><A NAME="1239"></A>&nbsp;&nbsp;&nbsp;&nbsp;);<br><FONT ID="LN">1240</FONT><A NAME="1240"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> result.booleanValue();<br><FONT ID="LN">1241</FONT><A NAME="1241"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1242</FONT><A NAME="1242"></A><br><FONT ID="LN">1243</FONT><A NAME="1243"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1244</FONT><A NAME="1244"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Clears internal data structures.<br><FONT ID="LN">1245</FONT><A NAME="1245"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1246</FONT><A NAME="1246"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> clear() {<br><FONT ID="LN">1247</FONT><A NAME="1247"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.clear();<br><FONT ID="LN">1248</FONT><A NAME="1248"></A>&nbsp;&nbsp;&nbsp;&nbsp;vlist.clear();<br><FONT ID="LN">1249</FONT><A NAME="1249"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1250</FONT><A NAME="1250"></A><br><FONT ID="LN">1251</FONT><A NAME="1251"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1252</FONT><A NAME="1252"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Underlying readObject implementation.<br><FONT ID="LN">1253</FONT><A NAME="1253"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1254</FONT><A NAME="1254"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readObject0(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1255</FONT><A NAME="1255"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> oldMode = bin.getBlockDataMode();<br><FONT ID="LN">1256</FONT><A NAME="1256"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (oldMode) {<br><FONT ID="LN">1257</FONT><A NAME="1257"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> remain = bin.currentBlockRemaining();<br><FONT ID="LN">1258</FONT><A NAME="1258"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (remain &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">1259</FONT><A NAME="1259"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/OptionalDataException.java.htm">OptionalDataException</A>  <A HREF= "/803.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(remain);<br><FONT ID="LN">1260</FONT><A NAME="1260"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (defaultDataEnd) {<br><FONT ID="LN">1261</FONT><A NAME="1261"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">1262</FONT><A NAME="1262"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fix for 4360508: stream is currently at the end of a field<br><FONT ID="LN">1263</FONT><A NAME="1263"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* value block written via default serialization; since there<br><FONT ID="LN">1264</FONT><A NAME="1264"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is no terminating TC_ENDBLOCKDATA tag, simulate<br><FONT ID="LN">1265</FONT><A NAME="1265"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* end-of-custom-data behavior explicitly.<br><FONT ID="LN">1266</FONT><A NAME="1266"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1267</FONT><A NAME="1267"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/OptionalDataException.java.htm">OptionalDataException</A>  <A HREF= "/803.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1268</FONT><A NAME="1268"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1269</FONT><A NAME="1269"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1270</FONT><A NAME="1270"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1271</FONT><A NAME="1271"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1272</FONT><A NAME="1272"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Byte">byte</FONT> tc;<br><FONT ID="LN">1273</FONT><A NAME="1273"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> ((tc = bin.peekByte()) == TC_RESET) {<br><FONT ID="LN">1274</FONT><A NAME="1274"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readByte();<br><FONT ID="LN">1275</FONT><A NAME="1275"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleReset();<br><FONT ID="LN">1276</FONT><A NAME="1276"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1277</FONT><A NAME="1277"></A><br><FONT ID="LN">1278</FONT><A NAME="1278"></A>&nbsp;&nbsp;&nbsp;&nbsp;depth++;<br><FONT ID="LN">1279</FONT><A NAME="1279"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1280</FONT><A NAME="1280"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (tc) {<br><FONT ID="LN">1281</FONT><A NAME="1281"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_NULL:<br><FONT ID="LN">1282</FONT><A NAME="1282"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readNull();<br><FONT ID="LN">1283</FONT><A NAME="1283"></A><br><FONT ID="LN">1284</FONT><A NAME="1284"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_REFERENCE:<br><FONT ID="LN">1285</FONT><A NAME="1285"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readHandle(unshared);<br><FONT ID="LN">1286</FONT><A NAME="1286"></A><br><FONT ID="LN">1287</FONT><A NAME="1287"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_CLASS:<br><FONT ID="LN">1288</FONT><A NAME="1288"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readClass(unshared);<br><FONT ID="LN">1289</FONT><A NAME="1289"></A><br><FONT ID="LN">1290</FONT><A NAME="1290"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_CLASSDESC:<br><FONT ID="LN">1291</FONT><A NAME="1291"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_PROXYCLASSDESC:<br><FONT ID="LN">1292</FONT><A NAME="1292"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readClassDesc(unshared);<br><FONT ID="LN">1293</FONT><A NAME="1293"></A><br><FONT ID="LN">1294</FONT><A NAME="1294"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_STRING:<br><FONT ID="LN">1295</FONT><A NAME="1295"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_LONGSTRING:<br><FONT ID="LN">1296</FONT><A NAME="1296"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> checkResolve(readString(unshared));<br><FONT ID="LN">1297</FONT><A NAME="1297"></A><br><FONT ID="LN">1298</FONT><A NAME="1298"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_ARRAY:<br><FONT ID="LN">1299</FONT><A NAME="1299"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> checkResolve(readArray(unshared));<br><FONT ID="LN">1300</FONT><A NAME="1300"></A><br><FONT ID="LN">1301</FONT><A NAME="1301"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_ENUM:<br><FONT ID="LN">1302</FONT><A NAME="1302"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> checkResolve(readEnum(unshared));<br><FONT ID="LN">1303</FONT><A NAME="1303"></A><br><FONT ID="LN">1304</FONT><A NAME="1304"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_OBJECT:<br><FONT ID="LN">1305</FONT><A NAME="1305"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> checkResolve(readOrdinaryObject(unshared));<br><FONT ID="LN">1306</FONT><A NAME="1306"></A><br><FONT ID="LN">1307</FONT><A NAME="1307"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_EXCEPTION:<br><FONT ID="LN">1308</FONT><A NAME="1308"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex = readFatalException();<br><FONT ID="LN">1309</FONT><A NAME="1309"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/WriteAbortedException.java.htm">WriteAbortedException</A>  <A HREF= "/2379.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"writing aborted"</FONT>, ex);<br><FONT ID="LN">1310</FONT><A NAME="1310"></A><br><FONT ID="LN">1311</FONT><A NAME="1311"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATA:<br><FONT ID="LN">1312</FONT><A NAME="1312"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATALONG:<br><FONT ID="LN">1313</FONT><A NAME="1313"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (oldMode) {<br><FONT ID="LN">1314</FONT><A NAME="1314"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1315</FONT><A NAME="1315"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.peek();     <FONT ID="SingleLineComment">// force header read<br><FONT ID="LN">1316</FONT><A NAME="1316"></A></FONT>            <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/OptionalDataException.java.htm">OptionalDataException</A>  <A HREF= "/803.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1317</FONT><A NAME="1317"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.currentBlockRemaining());<br><FONT ID="LN">1318</FONT><A NAME="1318"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1319</FONT><A NAME="1319"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1320</FONT><A NAME="1320"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"unexpected block data"</FONT>);<br><FONT ID="LN">1321</FONT><A NAME="1321"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1322</FONT><A NAME="1322"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1323</FONT><A NAME="1323"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_ENDBLOCKDATA:<br><FONT ID="LN">1324</FONT><A NAME="1324"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (oldMode) {<br><FONT ID="LN">1325</FONT><A NAME="1325"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/OptionalDataException.java.htm">OptionalDataException</A>  <A HREF= "/803.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1326</FONT><A NAME="1326"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1327</FONT><A NAME="1327"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1328</FONT><A NAME="1328"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"unexpected end of block data"</FONT>);<br><FONT ID="LN">1329</FONT><A NAME="1329"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1330</FONT><A NAME="1330"></A><br><FONT ID="LN">1331</FONT><A NAME="1331"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">1332</FONT><A NAME="1332"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1333</FONT><A NAME="1333"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1334</FONT><A NAME="1334"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">1335</FONT><A NAME="1335"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth--;<br><FONT ID="LN">1336</FONT><A NAME="1336"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(oldMode);<br><FONT ID="LN">1337</FONT><A NAME="1337"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1338</FONT><A NAME="1338"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1339</FONT><A NAME="1339"></A><br><FONT ID="LN">1340</FONT><A NAME="1340"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1341</FONT><A NAME="1341"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If resolveObject has been enabled and given object does not have an<br><FONT ID="LN">1342</FONT><A NAME="1342"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* exception associated with it, calls resolveObject to determine<br><FONT ID="LN">1343</FONT><A NAME="1343"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* replacement for object, and updates handle table accordingly.  Returns<br><FONT ID="LN">1344</FONT><A NAME="1344"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* replacement object, or echoes provided object if no replacement<br><FONT ID="LN">1345</FONT><A NAME="1345"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* occurred.  Expects that passHandle is set to given object's handle prior<br><FONT ID="LN">1346</FONT><A NAME="1346"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to calling this method.<br><FONT ID="LN">1347</FONT><A NAME="1347"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1348</FONT><A NAME="1348"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> checkResolve(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1349</FONT><A NAME="1349"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!enableResolve || handles.lookupException(passHandle) != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1350</FONT><A NAME="1350"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">1351</FONT><A NAME="1351"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1352</FONT><A NAME="1352"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> rep = resolveObject(obj);<br><FONT ID="LN">1353</FONT><A NAME="1353"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (rep != obj) {<br><FONT ID="LN">1354</FONT><A NAME="1354"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.setObject(passHandle, rep);<br><FONT ID="LN">1355</FONT><A NAME="1355"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1356</FONT><A NAME="1356"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> rep;<br><FONT ID="LN">1357</FONT><A NAME="1357"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1358</FONT><A NAME="1358"></A><br><FONT ID="LN">1359</FONT><A NAME="1359"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1360</FONT><A NAME="1360"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads string without allowing it to be replaced in stream.  Called from<br><FONT ID="LN">1361</FONT><A NAME="1361"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* within ObjectStreamClass.read().<br><FONT ID="LN">1362</FONT><A NAME="1362"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1363</FONT><A NAME="1363"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readTypeString() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1364</FONT><A NAME="1364"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> oldHandle = passHandle;<br><FONT ID="LN">1365</FONT><A NAME="1365"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1366</FONT><A NAME="1366"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (bin.peekByte()) {<br><FONT ID="LN">1367</FONT><A NAME="1367"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_NULL:<br><FONT ID="LN">1368</FONT><A NAME="1368"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) readNull();<br><FONT ID="LN">1369</FONT><A NAME="1369"></A><br><FONT ID="LN">1370</FONT><A NAME="1370"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_REFERENCE:<br><FONT ID="LN">1371</FONT><A NAME="1371"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) readHandle(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1372</FONT><A NAME="1372"></A><br><FONT ID="LN">1373</FONT><A NAME="1373"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_STRING:<br><FONT ID="LN">1374</FONT><A NAME="1374"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_LONGSTRING:<br><FONT ID="LN">1375</FONT><A NAME="1375"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readString(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1376</FONT><A NAME="1376"></A><br><FONT ID="LN">1377</FONT><A NAME="1377"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">1378</FONT><A NAME="1378"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1379</FONT><A NAME="1379"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1380</FONT><A NAME="1380"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">1381</FONT><A NAME="1381"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passHandle = oldHandle;<br><FONT ID="LN">1382</FONT><A NAME="1382"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1383</FONT><A NAME="1383"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1384</FONT><A NAME="1384"></A><br><FONT ID="LN">1385</FONT><A NAME="1385"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1386</FONT><A NAME="1386"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in null code, sets passHandle to NULL_HANDLE and returns null.<br><FONT ID="LN">1387</FONT><A NAME="1387"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1388</FONT><A NAME="1388"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readNull() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1389</FONT><A NAME="1389"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_NULL) {<br><FONT ID="LN">1390</FONT><A NAME="1390"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1391</FONT><A NAME="1391"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1392</FONT><A NAME="1392"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = NULL_HANDLE;<br><FONT ID="LN">1393</FONT><A NAME="1393"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1394</FONT><A NAME="1394"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1395</FONT><A NAME="1395"></A><br><FONT ID="LN">1396</FONT><A NAME="1396"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1397</FONT><A NAME="1397"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in object handle, sets passHandle to the read handle, and returns<br><FONT ID="LN">1398</FONT><A NAME="1398"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object associated with the handle.<br><FONT ID="LN">1399</FONT><A NAME="1399"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1400</FONT><A NAME="1400"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readHandle(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1401</FONT><A NAME="1401"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_REFERENCE) {<br><FONT ID="LN">1402</FONT><A NAME="1402"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1403</FONT><A NAME="1403"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1404</FONT><A NAME="1404"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = bin.readInt() - baseWireHandle;<br><FONT ID="LN">1405</FONT><A NAME="1405"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (passHandle &lt; <FONT ID="IntegerLiteral">0</FONT> || passHandle &gt;= handles.size()) {<br><FONT ID="LN">1406</FONT><A NAME="1406"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"illegal handle value"</FONT>);<br><FONT ID="LN">1407</FONT><A NAME="1407"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1408</FONT><A NAME="1408"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (unshared) {<br><FONT ID="LN">1409</FONT><A NAME="1409"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: what type of exception to throw here?<br><FONT ID="LN">1410</FONT><A NAME="1410"></A></FONT>        <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1411</FONT><A NAME="1411"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"cannot read back reference as unshared"</FONT>);<br><FONT ID="LN">1412</FONT><A NAME="1412"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1413</FONT><A NAME="1413"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1414</FONT><A NAME="1414"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj = handles.lookupObject(passHandle);<br><FONT ID="LN">1415</FONT><A NAME="1415"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj == unsharedMarker) {<br><FONT ID="LN">1416</FONT><A NAME="1416"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: what type of exception to throw here?<br><FONT ID="LN">1417</FONT><A NAME="1417"></A></FONT>        <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1418</FONT><A NAME="1418"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"cannot read back reference to unshared object"</FONT>);<br><FONT ID="LN">1419</FONT><A NAME="1419"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1420</FONT><A NAME="1420"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">1421</FONT><A NAME="1421"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1422</FONT><A NAME="1422"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1423</FONT><A NAME="1423"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1424</FONT><A NAME="1424"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns class object.  Sets passHandle to class object's<br><FONT ID="LN">1425</FONT><A NAME="1425"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* assigned handle.  Returns null if class is unresolvable (in which case a<br><FONT ID="LN">1426</FONT><A NAME="1426"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ClassNotFoundException will be associated with the class' handle in the<br><FONT ID="LN">1427</FONT><A NAME="1427"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* handle table).<br><FONT ID="LN">1428</FONT><A NAME="1428"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1429</FONT><A NAME="1429"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readClass(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1430</FONT><A NAME="1430"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_CLASS) {<br><FONT ID="LN">1431</FONT><A NAME="1431"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1432</FONT><A NAME="1432"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1433</FONT><A NAME="1433"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = readClassDesc(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1434</FONT><A NAME="1434"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = desc.forClass();<br><FONT ID="LN">1435</FONT><A NAME="1435"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = handles.assign(unshared ? unsharedMarker : cl);<br><FONT ID="LN">1436</FONT><A NAME="1436"></A><br><FONT ID="LN">1437</FONT><A NAME="1437"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = desc.getResolveException();<br><FONT ID="LN">1438</FONT><A NAME="1438"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (resolveEx != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1439</FONT><A NAME="1439"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(passHandle, resolveEx);<br><FONT ID="LN">1440</FONT><A NAME="1440"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1441</FONT><A NAME="1441"></A><br><FONT ID="LN">1442</FONT><A NAME="1442"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(passHandle);<br><FONT ID="LN">1443</FONT><A NAME="1443"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> cl;<br><FONT ID="LN">1444</FONT><A NAME="1444"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1445</FONT><A NAME="1445"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1446</FONT><A NAME="1446"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1447</FONT><A NAME="1447"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns (possibly null) class descriptor.  Sets passHandle<br><FONT ID="LN">1448</FONT><A NAME="1448"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* to class descriptor's assigned handle.  If class descriptor cannot be<br><FONT ID="LN">1449</FONT><A NAME="1449"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* resolved to a class in the local VM, a ClassNotFoundException is<br><FONT ID="LN">1450</FONT><A NAME="1450"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with the class descriptor's handle.<br><FONT ID="LN">1451</FONT><A NAME="1451"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1452</FONT><A NAME="1452"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readClassDesc(<FONT ID="Boolean">boolean</FONT> unshared) <br><FONT ID="LN">1453</FONT><A NAME="1453"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <br><FONT ID="LN">1454</FONT><A NAME="1454"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1455</FONT><A NAME="1455"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (bin.peekByte()) {<br><FONT ID="LN">1456</FONT><A NAME="1456"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_NULL:<br><FONT ID="LN">1457</FONT><A NAME="1457"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) readNull();<br><FONT ID="LN">1458</FONT><A NAME="1458"></A><br><FONT ID="LN">1459</FONT><A NAME="1459"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_REFERENCE:<br><FONT ID="LN">1460</FONT><A NAME="1460"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) readHandle(unshared);<br><FONT ID="LN">1461</FONT><A NAME="1461"></A><br><FONT ID="LN">1462</FONT><A NAME="1462"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_PROXYCLASSDESC:<br><FONT ID="LN">1463</FONT><A NAME="1463"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readProxyDesc(unshared);<br><FONT ID="LN">1464</FONT><A NAME="1464"></A><br><FONT ID="LN">1465</FONT><A NAME="1465"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_CLASSDESC:<br><FONT ID="LN">1466</FONT><A NAME="1466"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readNonProxyDesc(unshared);<br><FONT ID="LN">1467</FONT><A NAME="1467"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1468</FONT><A NAME="1468"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">1469</FONT><A NAME="1469"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1470</FONT><A NAME="1470"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1471</FONT><A NAME="1471"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1472</FONT><A NAME="1472"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1473</FONT><A NAME="1473"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1474</FONT><A NAME="1474"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns class descriptor for a dynamic proxy class.  Sets<br><FONT ID="LN">1475</FONT><A NAME="1475"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* passHandle to proxy class descriptor's assigned handle.  If proxy class<br><FONT ID="LN">1476</FONT><A NAME="1476"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* descriptor cannot be resolved to a class in the local VM, a<br><FONT ID="LN">1477</FONT><A NAME="1477"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ClassNotFoundException is associated with the descriptor's handle.<br><FONT ID="LN">1478</FONT><A NAME="1478"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1479</FONT><A NAME="1479"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readProxyDesc(<FONT ID="Boolean">boolean</FONT> unshared) <br><FONT ID="LN">1480</FONT><A NAME="1480"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <br><FONT ID="LN">1481</FONT><A NAME="1481"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1482</FONT><A NAME="1482"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_PROXYCLASSDESC) {<br><FONT ID="LN">1483</FONT><A NAME="1483"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1484</FONT><A NAME="1484"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1485</FONT><A NAME="1485"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1486</FONT><A NAME="1486"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = <FONT ID="New">new</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1487</FONT><A NAME="1487"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> descHandle = handles.assign(unshared ? unsharedMarker : desc);<br><FONT ID="LN">1488</FONT><A NAME="1488"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = NULL_HANDLE;<br><FONT ID="LN">1489</FONT><A NAME="1489"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1490</FONT><A NAME="1490"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> numIfaces = bin.readInt();<br><FONT ID="LN">1491</FONT><A NAME="1491"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] ifaces = <FONT ID="New">new</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[numIfaces];<br><FONT ID="LN">1492</FONT><A NAME="1492"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; numIfaces; i++) {<br><FONT ID="LN">1493</FONT><A NAME="1493"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ifaces[i] = bin.readUTF();<br><FONT ID="LN">1494</FONT><A NAME="1494"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1495</FONT><A NAME="1495"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1496</FONT><A NAME="1496"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1497</FONT><A NAME="1497"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1498</FONT><A NAME="1498"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1499</FONT><A NAME="1499"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1500</FONT><A NAME="1500"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((cl = resolveProxyClass(ifaces)) == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1501</FONT><A NAME="1501"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"null class"</FONT>);<br><FONT ID="LN">1502</FONT><A NAME="1502"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1503</FONT><A NAME="1503"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1504</FONT><A NAME="1504"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolveEx = ex;<br><FONT ID="LN">1505</FONT><A NAME="1505"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1506</FONT><A NAME="1506"></A>&nbsp;&nbsp;&nbsp;&nbsp;skipCustomData();<br><FONT ID="LN">1507</FONT><A NAME="1507"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1508</FONT><A NAME="1508"></A>&nbsp;&nbsp;&nbsp;&nbsp;desc.initProxy(cl, resolveEx, readClassDesc(<FONT ID="False">false</FONT>));<br><FONT ID="LN">1509</FONT><A NAME="1509"></A><br><FONT ID="LN">1510</FONT><A NAME="1510"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(descHandle);<br><FONT ID="LN">1511</FONT><A NAME="1511"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = descHandle;<br><FONT ID="LN">1512</FONT><A NAME="1512"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> desc;<br><FONT ID="LN">1513</FONT><A NAME="1513"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1514</FONT><A NAME="1514"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1515</FONT><A NAME="1515"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1516</FONT><A NAME="1516"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns class descriptor for a class that is not a dynamic<br><FONT ID="LN">1517</FONT><A NAME="1517"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* proxy class.  Sets passHandle to class descriptor's assigned handle.  If<br><FONT ID="LN">1518</FONT><A NAME="1518"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class descriptor cannot be resolved to a class in the local VM, a<br><FONT ID="LN">1519</FONT><A NAME="1519"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ClassNotFoundException is associated with the descriptor's handle.<br><FONT ID="LN">1520</FONT><A NAME="1520"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1521</FONT><A NAME="1521"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readNonProxyDesc(<FONT ID="Boolean">boolean</FONT> unshared) <br><FONT ID="LN">1522</FONT><A NAME="1522"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <br><FONT ID="LN">1523</FONT><A NAME="1523"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1524</FONT><A NAME="1524"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_CLASSDESC) {<br><FONT ID="LN">1525</FONT><A NAME="1525"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1526</FONT><A NAME="1526"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1527</FONT><A NAME="1527"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1528</FONT><A NAME="1528"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = <FONT ID="New">new</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1529</FONT><A NAME="1529"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> descHandle = handles.assign(unshared ? unsharedMarker : desc);<br><FONT ID="LN">1530</FONT><A NAME="1530"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = NULL_HANDLE;<br><FONT ID="LN">1531</FONT><A NAME="1531"></A><br><FONT ID="LN">1532</FONT><A NAME="1532"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readDesc = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1533</FONT><A NAME="1533"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1534</FONT><A NAME="1534"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readDesc = readClassDescriptor();<br><FONT ID="LN">1535</FONT><A NAME="1535"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1536</FONT><A NAME="1536"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidClassException.java.htm">InvalidClassException</A>  <A HREF= "/2445.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1537</FONT><A NAME="1537"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"failed to read class descriptor"</FONT>).initCause(ex);<br><FONT ID="LN">1538</FONT><A NAME="1538"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1539</FONT><A NAME="1539"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1540</FONT><A NAME="1540"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1541</FONT><A NAME="1541"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1542</FONT><A NAME="1542"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1543</FONT><A NAME="1543"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1544</FONT><A NAME="1544"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((cl = resolveClass(readDesc)) == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1545</FONT><A NAME="1545"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"null class"</FONT>);<br><FONT ID="LN">1546</FONT><A NAME="1546"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1547</FONT><A NAME="1547"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1548</FONT><A NAME="1548"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolveEx = ex;<br><FONT ID="LN">1549</FONT><A NAME="1549"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1550</FONT><A NAME="1550"></A>&nbsp;&nbsp;&nbsp;&nbsp;skipCustomData();<br><FONT ID="LN">1551</FONT><A NAME="1551"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1552</FONT><A NAME="1552"></A>&nbsp;&nbsp;&nbsp;&nbsp;desc.initNonProxy(readDesc, cl, resolveEx, readClassDesc(<FONT ID="False">false</FONT>));<br><FONT ID="LN">1553</FONT><A NAME="1553"></A><br><FONT ID="LN">1554</FONT><A NAME="1554"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(descHandle);<br><FONT ID="LN">1555</FONT><A NAME="1555"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = descHandle;<br><FONT ID="LN">1556</FONT><A NAME="1556"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> desc;<br><FONT ID="LN">1557</FONT><A NAME="1557"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1558</FONT><A NAME="1558"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1559</FONT><A NAME="1559"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1560</FONT><A NAME="1560"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns new string.  Sets passHandle to new string's<br><FONT ID="LN">1561</FONT><A NAME="1561"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* assigned handle.<br><FONT ID="LN">1562</FONT><A NAME="1562"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1563</FONT><A NAME="1563"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readString(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1564</FONT><A NAME="1564"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> str;<br><FONT ID="LN">1565</FONT><A NAME="1565"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (bin.readByte()) {<br><FONT ID="LN">1566</FONT><A NAME="1566"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_STRING:<br><FONT ID="LN">1567</FONT><A NAME="1567"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str = bin.readUTF();<br><FONT ID="LN">1568</FONT><A NAME="1568"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">1569</FONT><A NAME="1569"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1570</FONT><A NAME="1570"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_LONGSTRING:<br><FONT ID="LN">1571</FONT><A NAME="1571"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str = bin.readLongUTF();<br><FONT ID="LN">1572</FONT><A NAME="1572"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">1573</FONT><A NAME="1573"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1574</FONT><A NAME="1574"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">1575</FONT><A NAME="1575"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1576</FONT><A NAME="1576"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1577</FONT><A NAME="1577"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = handles.assign(unshared ? unsharedMarker : str);<br><FONT ID="LN">1578</FONT><A NAME="1578"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(passHandle);<br><FONT ID="LN">1579</FONT><A NAME="1579"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> str;<br><FONT ID="LN">1580</FONT><A NAME="1580"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1581</FONT><A NAME="1581"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1582</FONT><A NAME="1582"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1583</FONT><A NAME="1583"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns array object, or null if array class is<br><FONT ID="LN">1584</FONT><A NAME="1584"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* unresolvable.  Sets passHandle to array's assigned handle.<br><FONT ID="LN">1585</FONT><A NAME="1585"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1586</FONT><A NAME="1586"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readArray(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1587</FONT><A NAME="1587"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_ARRAY) {<br><FONT ID="LN">1588</FONT><A NAME="1588"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1589</FONT><A NAME="1589"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1590</FONT><A NAME="1590"></A><br><FONT ID="LN">1591</FONT><A NAME="1591"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = readClassDesc(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1592</FONT><A NAME="1592"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> len = bin.readInt();<br><FONT ID="LN">1593</FONT><A NAME="1593"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1594</FONT><A NAME="1594"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> array = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1595</FONT><A NAME="1595"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl, ccl = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1596</FONT><A NAME="1596"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((cl = desc.forClass()) != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1597</FONT><A NAME="1597"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ccl = cl.getComponentType();<br><FONT ID="LN">1598</FONT><A NAME="1598"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array = Array.newInstance(ccl, len);<br><FONT ID="LN">1599</FONT><A NAME="1599"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1600</FONT><A NAME="1600"></A><br><FONT ID="LN">1601</FONT><A NAME="1601"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> arrayHandle = handles.assign(unshared ? unsharedMarker : array);<br><FONT ID="LN">1602</FONT><A NAME="1602"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = desc.getResolveException();<br><FONT ID="LN">1603</FONT><A NAME="1603"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (resolveEx != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1604</FONT><A NAME="1604"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(arrayHandle, resolveEx);<br><FONT ID="LN">1605</FONT><A NAME="1605"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1606</FONT><A NAME="1606"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1607</FONT><A NAME="1607"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ccl == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1608</FONT><A NAME="1608"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; len; i++) {<br><FONT ID="LN">1609</FONT><A NAME="1609"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readObject0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1610</FONT><A NAME="1610"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1611</FONT><A NAME="1611"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl.isPrimitive()) {<br><FONT ID="LN">1612</FONT><A NAME="1612"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (ccl == Integer.TYPE) {<br><FONT ID="LN">1613</FONT><A NAME="1613"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readInts((<FONT ID="Int">int</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1614</FONT><A NAME="1614"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Byte.TYPE) {<br><FONT ID="LN">1615</FONT><A NAME="1615"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readFully((<FONT ID="Byte">byte</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len, <FONT ID="True">true</FONT>);<br><FONT ID="LN">1616</FONT><A NAME="1616"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Long.TYPE) {<br><FONT ID="LN">1617</FONT><A NAME="1617"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readLongs((<FONT ID="Long">long</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1618</FONT><A NAME="1618"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Float.TYPE) {<br><FONT ID="LN">1619</FONT><A NAME="1619"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readFloats((<FONT ID="Float">float</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1620</FONT><A NAME="1620"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Double.TYPE) {<br><FONT ID="LN">1621</FONT><A NAME="1621"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readDoubles((<FONT ID="Double">double</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1622</FONT><A NAME="1622"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Short.TYPE) {<br><FONT ID="LN">1623</FONT><A NAME="1623"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readShorts((<FONT ID="Short">short</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1624</FONT><A NAME="1624"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Character.TYPE) {<br><FONT ID="LN">1625</FONT><A NAME="1625"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readChars((<FONT ID="Char">char</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1626</FONT><A NAME="1626"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (ccl == Boolean.TYPE) {<br><FONT ID="LN">1627</FONT><A NAME="1627"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readBooleans((<FONT ID="Boolean">boolean</FONT>[]) array, <FONT ID="IntegerLiteral">0</FONT>, len);<br><FONT ID="LN">1628</FONT><A NAME="1628"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1629</FONT><A NAME="1629"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1630</FONT><A NAME="1630"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1631</FONT><A NAME="1631"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1632</FONT><A NAME="1632"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] oa = (<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[]) array;<br><FONT ID="LN">1633</FONT><A NAME="1633"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; len; i++) {<br><FONT ID="LN">1634</FONT><A NAME="1634"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oa[i] = readObject0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1635</FONT><A NAME="1635"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markDependency(arrayHandle, passHandle);<br><FONT ID="LN">1636</FONT><A NAME="1636"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1637</FONT><A NAME="1637"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1638</FONT><A NAME="1638"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1639</FONT><A NAME="1639"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(arrayHandle);<br><FONT ID="LN">1640</FONT><A NAME="1640"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = arrayHandle;<br><FONT ID="LN">1641</FONT><A NAME="1641"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> array;<br><FONT ID="LN">1642</FONT><A NAME="1642"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1643</FONT><A NAME="1643"></A><br><FONT ID="LN">1644</FONT><A NAME="1644"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1645</FONT><A NAME="1645"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns enum constant, or null if enum type is<br><FONT ID="LN">1646</FONT><A NAME="1646"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* unresolvable.  Sets passHandle to enum constant's assigned handle.<br><FONT ID="LN">1647</FONT><A NAME="1647"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1648</FONT><A NAME="1648"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Enum.java.htm">Enum</A>  <A HREF= "/3725.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readEnum(<FONT ID="Boolean">boolean</FONT> unshared) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1649</FONT><A NAME="1649"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_ENUM) {<br><FONT ID="LN">1650</FONT><A NAME="1650"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1651</FONT><A NAME="1651"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1652</FONT><A NAME="1652"></A><br><FONT ID="LN">1653</FONT><A NAME="1653"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = readClassDesc(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1654</FONT><A NAME="1654"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!desc.isEnum()) {<br><FONT ID="LN">1655</FONT><A NAME="1655"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidClassException.java.htm">InvalidClassException</A>  <A HREF= "/2445.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"non-enum class: "</FONT> + desc);<br><FONT ID="LN">1656</FONT><A NAME="1656"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1657</FONT><A NAME="1657"></A><br><FONT ID="LN">1658</FONT><A NAME="1658"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> enumHandle = handles.assign(unshared ? unsharedMarker : <FONT ID="Null">null</FONT>);<br><FONT ID="LN">1659</FONT><A NAME="1659"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = desc.getResolveException();<br><FONT ID="LN">1660</FONT><A NAME="1660"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (resolveEx != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1661</FONT><A NAME="1661"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(enumHandle, resolveEx);<br><FONT ID="LN">1662</FONT><A NAME="1662"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1663</FONT><A NAME="1663"></A><br><FONT ID="LN">1664</FONT><A NAME="1664"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name = readString(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1665</FONT><A NAME="1665"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Enum.java.htm">Enum</A>  <A HREF= "/3725.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> en = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1666</FONT><A NAME="1666"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = desc.forClass();<br><FONT ID="LN">1667</FONT><A NAME="1667"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (cl != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1668</FONT><A NAME="1668"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1669</FONT><A NAME="1669"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;en = Enum.valueOf(cl, name);<br><FONT ID="LN">1670</FONT><A NAME="1670"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/IllegalArgumentException.java.htm">IllegalArgumentException</A>  <A HREF= "/2785.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1671</FONT><A NAME="1671"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1672</FONT><A NAME="1672"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"enum constant "</FONT> + name + <FONT ID="StringLiteral">" does not exist in "</FONT> +<br><FONT ID="LN">1673</FONT><A NAME="1673"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cl).initCause(ex);<br><FONT ID="LN">1674</FONT><A NAME="1674"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1675</FONT><A NAME="1675"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!unshared) {<br><FONT ID="LN">1676</FONT><A NAME="1676"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.setObject(enumHandle, en);<br><FONT ID="LN">1677</FONT><A NAME="1677"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1678</FONT><A NAME="1678"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1679</FONT><A NAME="1679"></A><br><FONT ID="LN">1680</FONT><A NAME="1680"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(enumHandle);<br><FONT ID="LN">1681</FONT><A NAME="1681"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = enumHandle;<br><FONT ID="LN">1682</FONT><A NAME="1682"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> en;<br><FONT ID="LN">1683</FONT><A NAME="1683"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1684</FONT><A NAME="1684"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1685</FONT><A NAME="1685"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1686</FONT><A NAME="1686"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads and returns "ordinary" (i.e., not a String, Class,<br><FONT ID="LN">1687</FONT><A NAME="1687"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ObjectStreamClass, array, or enum constant) object, or null if object's<br><FONT ID="LN">1688</FONT><A NAME="1688"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class is unresolvable (in which case a ClassNotFoundException will be<br><FONT ID="LN">1689</FONT><A NAME="1689"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with object's handle).  Sets passHandle to object's assigned<br><FONT ID="LN">1690</FONT><A NAME="1690"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* handle.<br><FONT ID="LN">1691</FONT><A NAME="1691"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1692</FONT><A NAME="1692"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readOrdinaryObject(<FONT ID="Boolean">boolean</FONT> unshared) <br><FONT ID="LN">1693</FONT><A NAME="1693"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <br><FONT ID="LN">1694</FONT><A NAME="1694"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1695</FONT><A NAME="1695"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_OBJECT) {<br><FONT ID="LN">1696</FONT><A NAME="1696"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1697</FONT><A NAME="1697"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1698</FONT><A NAME="1698"></A><br><FONT ID="LN">1699</FONT><A NAME="1699"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc = readClassDesc(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1700</FONT><A NAME="1700"></A>&nbsp;&nbsp;&nbsp;&nbsp;desc.checkDeserialize();<br><FONT ID="LN">1701</FONT><A NAME="1701"></A><br><FONT ID="LN">1702</FONT><A NAME="1702"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj;<br><FONT ID="LN">1703</FONT><A NAME="1703"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1704</FONT><A NAME="1704"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj = desc.isInstantiable() ? desc.newInstance() : <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1705</FONT><A NAME="1705"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/Exception.java.htm">Exception</A>  <A HREF= "/2619.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1706</FONT><A NAME="1706"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidClassException.java.htm">InvalidClassException</A>  <A HREF= "/2445.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">1707</FONT><A NAME="1707"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc.forClass().getName(), <FONT ID="StringLiteral">"unable to create instance"</FONT>);<br><FONT ID="LN">1708</FONT><A NAME="1708"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1709</FONT><A NAME="1709"></A><br><FONT ID="LN">1710</FONT><A NAME="1710"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = handles.assign(unshared ? unsharedMarker : obj);<br><FONT ID="LN">1711</FONT><A NAME="1711"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> resolveEx = desc.getResolveException();<br><FONT ID="LN">1712</FONT><A NAME="1712"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (resolveEx != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1713</FONT><A NAME="1713"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(passHandle, resolveEx);<br><FONT ID="LN">1714</FONT><A NAME="1714"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1715</FONT><A NAME="1715"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1716</FONT><A NAME="1716"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (desc.isExternalizable()) {<br><FONT ID="LN">1717</FONT><A NAME="1717"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readExternalData((<A HREF="../../java/io/Externalizable.java.htm">Externalizable</A>  <A HREF= "/1736.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) obj, desc);<br><FONT ID="LN">1718</FONT><A NAME="1718"></A>&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1719</FONT><A NAME="1719"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readSerialData(obj, desc);<br><FONT ID="LN">1720</FONT><A NAME="1720"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1721</FONT><A NAME="1721"></A><br><FONT ID="LN">1722</FONT><A NAME="1722"></A>&nbsp;&nbsp;&nbsp;&nbsp;handles.finish(passHandle);<br><FONT ID="LN">1723</FONT><A NAME="1723"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1724</FONT><A NAME="1724"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT> &amp;&amp; <br><FONT ID="LN">1725</FONT><A NAME="1725"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.lookupException(passHandle) == <FONT ID="Null">null</FONT> &amp;&amp;<br><FONT ID="LN">1726</FONT><A NAME="1726"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc.hasReadResolveMethod())<br><FONT ID="LN">1727</FONT><A NAME="1727"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1728</FONT><A NAME="1728"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> rep = desc.invokeReadResolve(obj);<br><FONT ID="LN">1729</FONT><A NAME="1729"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (rep != obj) {<br><FONT ID="LN">1730</FONT><A NAME="1730"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.setObject(passHandle, obj = rep);<br><FONT ID="LN">1731</FONT><A NAME="1731"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1732</FONT><A NAME="1732"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1733</FONT><A NAME="1733"></A><br><FONT ID="LN">1734</FONT><A NAME="1734"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">1735</FONT><A NAME="1735"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1736</FONT><A NAME="1736"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1737</FONT><A NAME="1737"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1738</FONT><A NAME="1738"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If obj is non-null, reads externalizable data by invoking readExternal()<br><FONT ID="LN">1739</FONT><A NAME="1739"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* method of obj; otherwise, attempts to skip over externalizable data.<br><FONT ID="LN">1740</FONT><A NAME="1740"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Expects that passHandle is set to obj's handle before this method is<br><FONT ID="LN">1741</FONT><A NAME="1741"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* called.<br><FONT ID="LN">1742</FONT><A NAME="1742"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1743</FONT><A NAME="1743"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> readExternalData(<A HREF="../../java/io/Externalizable.java.htm">Externalizable</A>  <A HREF= "/1736.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc) <br><FONT ID="LN">1744</FONT><A NAME="1744"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <br><FONT ID="LN">1745</FONT><A NAME="1745"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1746</FONT><A NAME="1746"></A>&nbsp;&nbsp;&nbsp;&nbsp;CallbackContext oldContext = curContext;<br><FONT ID="LN">1747</FONT><A NAME="1747"></A>&nbsp;&nbsp;&nbsp;&nbsp;curContext = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">1748</FONT><A NAME="1748"></A><br><FONT ID="LN">1749</FONT><A NAME="1749"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> blocked = desc.hasBlockExternalData();<br><FONT ID="LN">1750</FONT><A NAME="1750"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blocked) {<br><FONT ID="LN">1751</FONT><A NAME="1751"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1752</FONT><A NAME="1752"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1753</FONT><A NAME="1753"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1754</FONT><A NAME="1754"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1755</FONT><A NAME="1755"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.readExternal(<FONT ID="This">this</FONT>);<br><FONT ID="LN">1756</FONT><A NAME="1756"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1757</FONT><A NAME="1757"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">1758</FONT><A NAME="1758"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* In most cases, the handle table has already propagated a<br><FONT ID="LN">1759</FONT><A NAME="1759"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* CNFException to passHandle at this point; this mark call is<br><FONT ID="LN">1760</FONT><A NAME="1760"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* included to address cases where the readExternal method has<br><FONT ID="LN">1761</FONT><A NAME="1761"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* cons'ed and thrown a new CNFException of its own.<br><FONT ID="LN">1762</FONT><A NAME="1762"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1763</FONT><A NAME="1763"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(passHandle, ex);<br><FONT ID="LN">1764</FONT><A NAME="1764"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1765</FONT><A NAME="1765"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1766</FONT><A NAME="1766"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blocked) {<br><FONT ID="LN">1767</FONT><A NAME="1767"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skipCustomData();<br><FONT ID="LN">1768</FONT><A NAME="1768"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1769</FONT><A NAME="1769"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1770</FONT><A NAME="1770"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">1771</FONT><A NAME="1771"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* At this point, if the externalizable data was not written in<br><FONT ID="LN">1772</FONT><A NAME="1772"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* block-data form and either the externalizable class doesn't exist<br><FONT ID="LN">1773</FONT><A NAME="1773"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* locally (i.e., obj == null) or readExternal() just threw a<br><FONT ID="LN">1774</FONT><A NAME="1774"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* CNFException, then the stream is probably in an inconsistent state,<br><FONT ID="LN">1775</FONT><A NAME="1775"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* since some (or all) of the externalizable data may not have been<br><FONT ID="LN">1776</FONT><A NAME="1776"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* consumed.  Since there's no "correct" action to take in this case,<br><FONT ID="LN">1777</FONT><A NAME="1777"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* we mimic the behavior of past serialization implementations and<br><FONT ID="LN">1778</FONT><A NAME="1778"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* blindly hope that the stream is in sync; if it isn't and additional<br><FONT ID="LN">1779</FONT><A NAME="1779"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* externalizable data remains in the stream, a subsequent read will<br><FONT ID="LN">1780</FONT><A NAME="1780"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* most likely throw a StreamCorruptedException.<br><FONT ID="LN">1781</FONT><A NAME="1781"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1782</FONT><A NAME="1782"></A><br><FONT ID="LN">1783</FONT><A NAME="1783"></A>&nbsp;&nbsp;&nbsp;&nbsp;curContext = oldContext;<br><FONT ID="LN">1784</FONT><A NAME="1784"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1785</FONT><A NAME="1785"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1786</FONT><A NAME="1786"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1787</FONT><A NAME="1787"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads (or attempts to skip, if obj is null or is tagged with a<br><FONT ID="LN">1788</FONT><A NAME="1788"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* ClassNotFoundException) instance data for each serializable class of<br><FONT ID="LN">1789</FONT><A NAME="1789"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object in stream, from superclass to subclass.  Expects that passHandle<br><FONT ID="LN">1790</FONT><A NAME="1790"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is set to obj's handle before this method is called.<br><FONT ID="LN">1791</FONT><A NAME="1791"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1792</FONT><A NAME="1792"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> readSerialData(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc)<br><FONT ID="LN">1793</FONT><A NAME="1793"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">1794</FONT><A NAME="1794"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1795</FONT><A NAME="1795"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass.ClassDataSlot</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] slots = desc.getClassDataLayout();<br><FONT ID="LN">1796</FONT><A NAME="1796"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; slots.length; i++) {<br><FONT ID="LN">1797</FONT><A NAME="1797"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> slotDesc = slots[i].desc;<br><FONT ID="LN">1798</FONT><A NAME="1798"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1799</FONT><A NAME="1799"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (slots[i].hasData) {<br><FONT ID="LN">1800</FONT><A NAME="1800"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT> &amp;&amp; <br><FONT ID="LN">1801</FONT><A NAME="1801"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slotDesc.hasReadObjectMethod() &amp;&amp;<br><FONT ID="LN">1802</FONT><A NAME="1802"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.lookupException(passHandle) == <FONT ID="Null">null</FONT>) <br><FONT ID="LN">1803</FONT><A NAME="1803"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1804</FONT><A NAME="1804"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CallbackContext oldContext = curContext;<br><FONT ID="LN">1805</FONT><A NAME="1805"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curContext = <FONT ID="New">new</FONT> CallbackContext(obj, slotDesc);<br><FONT ID="LN">1806</FONT><A NAME="1806"></A><br><FONT ID="LN">1807</FONT><A NAME="1807"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1808</FONT><A NAME="1808"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">1809</FONT><A NAME="1809"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slotDesc.invokeReadObject(obj, <FONT ID="This">this</FONT>);<br><FONT ID="LN">1810</FONT><A NAME="1810"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">1811</FONT><A NAME="1811"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">1812</FONT><A NAME="1812"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* In most cases, the handle table has already<br><FONT ID="LN">1813</FONT><A NAME="1813"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* propagated a CNFException to passHandle at this<br><FONT ID="LN">1814</FONT><A NAME="1814"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* point; this mark call is included to address cases<br><FONT ID="LN">1815</FONT><A NAME="1815"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* where the custom readObject method has cons'ed and<br><FONT ID="LN">1816</FONT><A NAME="1816"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* thrown a new CNFException of its own.<br><FONT ID="LN">1817</FONT><A NAME="1817"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1818</FONT><A NAME="1818"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markException(passHandle, ex);<br><FONT ID="LN">1819</FONT><A NAME="1819"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">1820</FONT><A NAME="1820"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curContext.setUsed();<br><FONT ID="LN">1821</FONT><A NAME="1821"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1822</FONT><A NAME="1822"></A><br><FONT ID="LN">1823</FONT><A NAME="1823"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curContext = oldContext;<br><FONT ID="LN">1824</FONT><A NAME="1824"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1825</FONT><A NAME="1825"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">1826</FONT><A NAME="1826"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* defaultDataEnd may have been set indirectly by custom<br><FONT ID="LN">1827</FONT><A NAME="1827"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* readObject() method when calling defaultReadObject() or<br><FONT ID="LN">1828</FONT><A NAME="1828"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* readFields(); clear it to restore normal read behavior.<br><FONT ID="LN">1829</FONT><A NAME="1829"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1830</FONT><A NAME="1830"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultDataEnd = <FONT ID="False">false</FONT>;<br><FONT ID="LN">1831</FONT><A NAME="1831"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1832</FONT><A NAME="1832"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultReadFields(obj, slotDesc);<br><FONT ID="LN">1833</FONT><A NAME="1833"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1834</FONT><A NAME="1834"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (slotDesc.hasWriteObjectData()) {<br><FONT ID="LN">1835</FONT><A NAME="1835"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skipCustomData();<br><FONT ID="LN">1836</FONT><A NAME="1836"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1837</FONT><A NAME="1837"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1838</FONT><A NAME="1838"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1839</FONT><A NAME="1839"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">1840</FONT><A NAME="1840"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT> &amp;&amp; <br><FONT ID="LN">1841</FONT><A NAME="1841"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slotDesc.hasReadObjectNoDataMethod() &amp;&amp;<br><FONT ID="LN">1842</FONT><A NAME="1842"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.lookupException(passHandle) == <FONT ID="Null">null</FONT>)<br><FONT ID="LN">1843</FONT><A NAME="1843"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1844</FONT><A NAME="1844"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slotDesc.invokeReadObjectNoData(obj);<br><FONT ID="LN">1845</FONT><A NAME="1845"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1846</FONT><A NAME="1846"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1847</FONT><A NAME="1847"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1848</FONT><A NAME="1848"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1849</FONT><A NAME="1849"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1850</FONT><A NAME="1850"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1851</FONT><A NAME="1851"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Skips over all block data and objects until TC_ENDBLOCKDATA is<br><FONT ID="LN">1852</FONT><A NAME="1852"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* encountered.<br><FONT ID="LN">1853</FONT><A NAME="1853"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1854</FONT><A NAME="1854"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> skipCustomData() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1855</FONT><A NAME="1855"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> oldHandle = passHandle;<br><FONT ID="LN">1856</FONT><A NAME="1856"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (;;) {<br><FONT ID="LN">1857</FONT><A NAME="1857"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.getBlockDataMode()) {<br><FONT ID="LN">1858</FONT><A NAME="1858"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.skipBlockData();<br><FONT ID="LN">1859</FONT><A NAME="1859"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1860</FONT><A NAME="1860"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1861</FONT><A NAME="1861"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (bin.peekByte()) {<br><FONT ID="LN">1862</FONT><A NAME="1862"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATA:<br><FONT ID="LN">1863</FONT><A NAME="1863"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATALONG:<br><FONT ID="LN">1864</FONT><A NAME="1864"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.setBlockDataMode(<FONT ID="True">true</FONT>);<br><FONT ID="LN">1865</FONT><A NAME="1865"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">1866</FONT><A NAME="1866"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1867</FONT><A NAME="1867"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_ENDBLOCKDATA:<br><FONT ID="LN">1868</FONT><A NAME="1868"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readByte();<br><FONT ID="LN">1869</FONT><A NAME="1869"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passHandle = oldHandle;<br><FONT ID="LN">1870</FONT><A NAME="1870"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">1871</FONT><A NAME="1871"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1872</FONT><A NAME="1872"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">1873</FONT><A NAME="1873"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readObject0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1874</FONT><A NAME="1874"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">1875</FONT><A NAME="1875"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1876</FONT><A NAME="1876"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1877</FONT><A NAME="1877"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1878</FONT><A NAME="1878"></A><br><FONT ID="LN">1879</FONT><A NAME="1879"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1880</FONT><A NAME="1880"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in values of serializable fields declared by given class<br><FONT ID="LN">1881</FONT><A NAME="1881"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* descriptor.  If obj is non-null, sets field values in obj.  Expects that<br><FONT ID="LN">1882</FONT><A NAME="1882"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* passHandle is set to obj's handle before this method is called.<br><FONT ID="LN">1883</FONT><A NAME="1883"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1884</FONT><A NAME="1884"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> defaultReadFields(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc)<br><FONT ID="LN">1885</FONT><A NAME="1885"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">1886</FONT><A NAME="1886"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">1887</FONT><A NAME="1887"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: is isInstance check necessary?<br><FONT ID="LN">1888</FONT><A NAME="1888"></A></FONT>    <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> cl = desc.forClass();<br><FONT ID="LN">1889</FONT><A NAME="1889"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (cl != <FONT ID="Null">null</FONT> &amp;&amp; obj != <FONT ID="Null">null</FONT> &amp;&amp; !cl.isInstance(obj)) {<br><FONT ID="LN">1890</FONT><A NAME="1890"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/ClassCastException.java.htm">ClassCastException</A>  <A HREF= "/2442.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1891</FONT><A NAME="1891"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1892</FONT><A NAME="1892"></A><br><FONT ID="LN">1893</FONT><A NAME="1893"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> primDataSize = desc.getPrimDataSize();<br><FONT ID="LN">1894</FONT><A NAME="1894"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (primVals == <FONT ID="Null">null</FONT> || primVals.length &lt; primDataSize) {<br><FONT ID="LN">1895</FONT><A NAME="1895"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primVals = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[primDataSize];<br><FONT ID="LN">1896</FONT><A NAME="1896"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1897</FONT><A NAME="1897"></A>&nbsp;&nbsp;&nbsp;&nbsp;bin.readFully(primVals, <FONT ID="IntegerLiteral">0</FONT>, primDataSize, <FONT ID="False">false</FONT>);<br><FONT ID="LN">1898</FONT><A NAME="1898"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1899</FONT><A NAME="1899"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc.setPrimFieldValues(obj, primVals);<br><FONT ID="LN">1900</FONT><A NAME="1900"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1901</FONT><A NAME="1901"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1902</FONT><A NAME="1902"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> objHandle = passHandle;<br><FONT ID="LN">1903</FONT><A NAME="1903"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamField.java.htm">ObjectStreamField</A>  <A HREF= "/1273.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] fields = desc.getFields(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1904</FONT><A NAME="1904"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] objVals = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[desc.getNumObjFields()];<br><FONT ID="LN">1905</FONT><A NAME="1905"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> numPrimFields = fields.length - objVals.length;<br><FONT ID="LN">1906</FONT><A NAME="1906"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; objVals.length; i++) {<br><FONT ID="LN">1907</FONT><A NAME="1907"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamField.java.htm">ObjectStreamField</A>  <A HREF= "/1273.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> f = fields[numPrimFields + i];<br><FONT ID="LN">1908</FONT><A NAME="1908"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objVals[i] = readObject0(f.isUnshared());<br><FONT ID="LN">1909</FONT><A NAME="1909"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (f.getField() != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1910</FONT><A NAME="1910"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markDependency(objHandle, passHandle);<br><FONT ID="LN">1911</FONT><A NAME="1911"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1912</FONT><A NAME="1912"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1913</FONT><A NAME="1913"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">1914</FONT><A NAME="1914"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desc.setObjFieldValues(obj, objVals);<br><FONT ID="LN">1915</FONT><A NAME="1915"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1916</FONT><A NAME="1916"></A>&nbsp;&nbsp;&nbsp;&nbsp;passHandle = objHandle;<br><FONT ID="LN">1917</FONT><A NAME="1917"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1918</FONT><A NAME="1918"></A><br><FONT ID="LN">1919</FONT><A NAME="1919"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1920</FONT><A NAME="1920"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in and returns IOException that caused serialization to abort.<br><FONT ID="LN">1921</FONT><A NAME="1921"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* All stream state is discarded prior to reading in fatal exception.  Sets<br><FONT ID="LN">1922</FONT><A NAME="1922"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* passHandle to fatal exception's handle.<br><FONT ID="LN">1923</FONT><A NAME="1923"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1924</FONT><A NAME="1924"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readFatalException() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1925</FONT><A NAME="1925"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (bin.readByte() != TC_EXCEPTION) {<br><FONT ID="LN">1926</FONT><A NAME="1926"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">1927</FONT><A NAME="1927"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1928</FONT><A NAME="1928"></A>&nbsp;&nbsp;&nbsp;&nbsp;clear();<br><FONT ID="LN">1929</FONT><A NAME="1929"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) readObject0(<FONT ID="False">false</FONT>);<br><FONT ID="LN">1930</FONT><A NAME="1930"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1931</FONT><A NAME="1931"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1932</FONT><A NAME="1932"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1933</FONT><A NAME="1933"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If recursion depth is 0, clears internal data structures; otherwise,<br><FONT ID="LN">1934</FONT><A NAME="1934"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* throws a StreamCorruptedException.  This method is called when a<br><FONT ID="LN">1935</FONT><A NAME="1935"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TC_RESET typecode is encountered.<br><FONT ID="LN">1936</FONT><A NAME="1936"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1937</FONT><A NAME="1937"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> handleReset() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">1938</FONT><A NAME="1938"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (depth &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">1939</FONT><A NAME="1939"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"unexpected reset"</FONT>);<br><FONT ID="LN">1940</FONT><A NAME="1940"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1941</FONT><A NAME="1941"></A>&nbsp;&nbsp;&nbsp;&nbsp;clear();<br><FONT ID="LN">1942</FONT><A NAME="1942"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1943</FONT><A NAME="1943"></A><br><FONT ID="LN">1944</FONT><A NAME="1944"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1945</FONT><A NAME="1945"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Converts specified span of bytes into float values.<br><FONT ID="LN">1946</FONT><A NAME="1946"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1947</FONT><A NAME="1947"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: remove once hotspot inlines Float.intBitsToFloat<br><FONT ID="LN">1948</FONT><A NAME="1948"></A></FONT>    <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> bytesToFloats(<FONT ID="Byte">byte</FONT>[] src, <FONT ID="Int">int</FONT> srcpos,<br><FONT ID="LN">1949</FONT><A NAME="1949"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Float">float</FONT>[] dst, <FONT ID="Int">int</FONT> dstpos, <br><FONT ID="LN">1950</FONT><A NAME="1950"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> nfloats);<br><FONT ID="LN">1951</FONT><A NAME="1951"></A><br><FONT ID="LN">1952</FONT><A NAME="1952"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1953</FONT><A NAME="1953"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Converts specified span of bytes into double values.<br><FONT ID="LN">1954</FONT><A NAME="1954"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1955</FONT><A NAME="1955"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: remove once hotspot inlines Double.longBitsToDouble<br><FONT ID="LN">1956</FONT><A NAME="1956"></A></FONT>    <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Native">native</FONT> <FONT ID="Void">void</FONT> bytesToDoubles(<FONT ID="Byte">byte</FONT>[] src, <FONT ID="Int">int</FONT> srcpos,<br><FONT ID="LN">1957</FONT><A NAME="1957"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Double">double</FONT>[] dst, <FONT ID="Int">int</FONT> dstpos, <br><FONT ID="LN">1958</FONT><A NAME="1958"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> ndoubles);<br><FONT ID="LN">1959</FONT><A NAME="1959"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">1960</FONT><A NAME="1960"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1961</FONT><A NAME="1961"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns the first non-null class loader (not counting class loaders of<br><FONT ID="LN">1962</FONT><A NAME="1962"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* generated reflection implementation classes) up the execution stack, or<br><FONT ID="LN">1963</FONT><A NAME="1963"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* null if only code from the null class loader is on the stack.  This<br><FONT ID="LN">1964</FONT><A NAME="1964"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* method is also called via reflection by the following RMI-IIOP class:<br><FONT ID="LN">1965</FONT><A NAME="1965"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">1966</FONT><A NAME="1966"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     com.sun.corba.se.internal.util.JDKClassLoader<br><FONT ID="LN">1967</FONT><A NAME="1967"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*     <br><FONT ID="LN">1968</FONT><A NAME="1968"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method should not be removed or its signature changed without<br><FONT ID="LN">1969</FONT><A NAME="1969"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* corresponding modifications to the above class.<br><FONT ID="LN">1970</FONT><A NAME="1970"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1971</FONT><A NAME="1971"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: change name to something more accurate?<br><FONT ID="LN">1972</FONT><A NAME="1972"></A></FONT>    <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Native">native</FONT> <A HREF="../../java/lang/ClassLoader.java.htm">ClassLoader</A>  <A HREF= "/867.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> latestUserDefinedLoader();<br><FONT ID="LN">1973</FONT><A NAME="1973"></A><br><FONT ID="LN">1974</FONT><A NAME="1974"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1975</FONT><A NAME="1975"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Default GetField implementation.<br><FONT ID="LN">1976</FONT><A NAME="1976"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1977</FONT><A NAME="1977"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Class">class</FONT> GetFieldImpl <FONT ID="Extends">extends</FONT> GetField {<br><FONT ID="LN">1978</FONT><A NAME="1978"></A>&nbsp;<br><FONT ID="LN">1979</FONT><A NAME="1979"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** class descriptor describing serializable fields */</FONT><br><FONT ID="LN">1980</FONT><A NAME="1980"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc;<br><FONT ID="LN">1981</FONT><A NAME="1981"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** primitive field values */</FONT><br><FONT ID="LN">1982</FONT><A NAME="1982"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT>[] primVals;<br><FONT ID="LN">1983</FONT><A NAME="1983"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** object field values */</FONT><br><FONT ID="LN">1984</FONT><A NAME="1984"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] objVals;<br><FONT ID="LN">1985</FONT><A NAME="1985"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** object field value handles */</FONT><br><FONT ID="LN">1986</FONT><A NAME="1986"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT>[] objHandles;<br><FONT ID="LN">1987</FONT><A NAME="1987"></A><br><FONT ID="LN">1988</FONT><A NAME="1988"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">1989</FONT><A NAME="1989"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates GetFieldImpl object for reading fields defined in given<br><FONT ID="LN">1990</FONT><A NAME="1990"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class descriptor.<br><FONT ID="LN">1991</FONT><A NAME="1991"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">1992</FONT><A NAME="1992"></A>&nbsp;&nbsp;&nbsp;&nbsp;GetFieldImpl(<A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc) {<br><FONT ID="LN">1993</FONT><A NAME="1993"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.desc = desc;<br><FONT ID="LN">1994</FONT><A NAME="1994"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primVals = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[desc.getPrimDataSize()];<br><FONT ID="LN">1995</FONT><A NAME="1995"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objVals = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[desc.getNumObjFields()];<br><FONT ID="LN">1996</FONT><A NAME="1996"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objHandles = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[objVals.length];<br><FONT ID="LN">1997</FONT><A NAME="1997"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">1998</FONT><A NAME="1998"></A><br><FONT ID="LN">1999</FONT><A NAME="1999"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getObjectStreamClass() {<br><FONT ID="LN">2000</FONT><A NAME="2000"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> desc;<br><FONT ID="LN">2001</FONT><A NAME="2001"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2002</FONT><A NAME="2002"></A>&nbsp;<br><FONT ID="LN">2003</FONT><A NAME="2003"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> defaulted(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2004</FONT><A NAME="2004"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (getFieldOffset(name, <FONT ID="Null">null</FONT>) &lt; <FONT ID="IntegerLiteral">0</FONT>);<br><FONT ID="LN">2005</FONT><A NAME="2005"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2006</FONT><A NAME="2006"></A>&nbsp;<br><FONT ID="LN">2007</FONT><A NAME="2007"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Boolean">boolean</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2008</FONT><A NAME="2008"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Boolean.TYPE);<br><FONT ID="LN">2009</FONT><A NAME="2009"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getBoolean(primVals, off) : val;<br><FONT ID="LN">2010</FONT><A NAME="2010"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2011</FONT><A NAME="2011"></A>&nbsp;<br><FONT ID="LN">2012</FONT><A NAME="2012"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Byte">byte</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Byte">byte</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2013</FONT><A NAME="2013"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Byte.TYPE);<br><FONT ID="LN">2014</FONT><A NAME="2014"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? primVals[off] : val;<br><FONT ID="LN">2015</FONT><A NAME="2015"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2016</FONT><A NAME="2016"></A>&nbsp;<br><FONT ID="LN">2017</FONT><A NAME="2017"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Char">char</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Char">char</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2018</FONT><A NAME="2018"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Character.TYPE);<br><FONT ID="LN">2019</FONT><A NAME="2019"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getChar(primVals, off) : val;<br><FONT ID="LN">2020</FONT><A NAME="2020"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2021</FONT><A NAME="2021"></A>&nbsp;<br><FONT ID="LN">2022</FONT><A NAME="2022"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Short">short</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Short">short</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2023</FONT><A NAME="2023"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Short.TYPE);<br><FONT ID="LN">2024</FONT><A NAME="2024"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getShort(primVals, off) : val;<br><FONT ID="LN">2025</FONT><A NAME="2025"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2026</FONT><A NAME="2026"></A>&nbsp;<br><FONT ID="LN">2027</FONT><A NAME="2027"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Int">int</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2028</FONT><A NAME="2028"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Integer.TYPE);<br><FONT ID="LN">2029</FONT><A NAME="2029"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getInt(primVals, off) : val;<br><FONT ID="LN">2030</FONT><A NAME="2030"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2031</FONT><A NAME="2031"></A>&nbsp;<br><FONT ID="LN">2032</FONT><A NAME="2032"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Float">float</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Float">float</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2033</FONT><A NAME="2033"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Float.TYPE);<br><FONT ID="LN">2034</FONT><A NAME="2034"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getFloat(primVals, off) : val;<br><FONT ID="LN">2035</FONT><A NAME="2035"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2036</FONT><A NAME="2036"></A>&nbsp;<br><FONT ID="LN">2037</FONT><A NAME="2037"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Long">long</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Long">long</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2038</FONT><A NAME="2038"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Long.TYPE);<br><FONT ID="LN">2039</FONT><A NAME="2039"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getLong(primVals, off) : val;<br><FONT ID="LN">2040</FONT><A NAME="2040"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2041</FONT><A NAME="2041"></A>&nbsp;<br><FONT ID="LN">2042</FONT><A NAME="2042"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <FONT ID="Double">double</FONT> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2043</FONT><A NAME="2043"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, Double.TYPE);<br><FONT ID="LN">2044</FONT><A NAME="2044"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? Bits.getDouble(primVals, off) : val;<br><FONT ID="LN">2045</FONT><A NAME="2045"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2046</FONT><A NAME="2046"></A>&nbsp;<br><FONT ID="LN">2047</FONT><A NAME="2047"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> get(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> val) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2048</FONT><A NAME="2048"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> off = getFieldOffset(name, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>.<FONT ID="Class">class</FONT>);<br><FONT ID="LN">2049</FONT><A NAME="2049"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (off &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2050</FONT><A NAME="2050"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> objHandle = objHandles[off];<br><FONT ID="LN">2051</FONT><A NAME="2051"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.markDependency(passHandle, objHandle);<br><FONT ID="LN">2052</FONT><A NAME="2052"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (handles.lookupException(objHandle) == <FONT ID="Null">null</FONT>) ?<br><FONT ID="LN">2053</FONT><A NAME="2053"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objVals[off] : <FONT ID="Null">null</FONT>;<br><FONT ID="LN">2054</FONT><A NAME="2054"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2055</FONT><A NAME="2055"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> val;<br><FONT ID="LN">2056</FONT><A NAME="2056"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2057</FONT><A NAME="2057"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2058</FONT><A NAME="2058"></A><br><FONT ID="LN">2059</FONT><A NAME="2059"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2060</FONT><A NAME="2060"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads primitive and object field values from stream.<br><FONT ID="LN">2061</FONT><A NAME="2061"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2062</FONT><A NAME="2062"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readFields() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2063</FONT><A NAME="2063"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bin.readFully(primVals, <FONT ID="IntegerLiteral">0</FONT>, primVals.length, <FONT ID="False">false</FONT>);<br><FONT ID="LN">2064</FONT><A NAME="2064"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2065</FONT><A NAME="2065"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> oldHandle = passHandle;<br><FONT ID="LN">2066</FONT><A NAME="2066"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamField.java.htm">ObjectStreamField</A>  <A HREF= "/1273.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] fields = desc.getFields(<FONT ID="False">false</FONT>);<br><FONT ID="LN">2067</FONT><A NAME="2067"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> numPrimFields = fields.length - objVals.length;<br><FONT ID="LN">2068</FONT><A NAME="2068"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; objVals.length; i++) {<br><FONT ID="LN">2069</FONT><A NAME="2069"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objVals[i] = <br><FONT ID="LN">2070</FONT><A NAME="2070"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readObject0(fields[numPrimFields + i].isUnshared());<br><FONT ID="LN">2071</FONT><A NAME="2071"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objHandles[i] = passHandle;<br><FONT ID="LN">2072</FONT><A NAME="2072"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2073</FONT><A NAME="2073"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passHandle = oldHandle;<br><FONT ID="LN">2074</FONT><A NAME="2074"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2075</FONT><A NAME="2075"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2076</FONT><A NAME="2076"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2077</FONT><A NAME="2077"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns offset of field with given name and type.  A specified type<br><FONT ID="LN">2078</FONT><A NAME="2078"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* of null matches all types, Object.class matches all non-primitive<br><FONT ID="LN">2079</FONT><A NAME="2079"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* types, and any other non-null type matches assignable types only.<br><FONT ID="LN">2080</FONT><A NAME="2080"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If no matching field is found in the (incoming) class<br><FONT ID="LN">2081</FONT><A NAME="2081"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* descriptor but a matching field is present in the associated local<br><FONT ID="LN">2082</FONT><A NAME="2082"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* class descriptor, returns -1.  Throws IllegalArgumentException if<br><FONT ID="LN">2083</FONT><A NAME="2083"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* neither incoming nor local class descriptor contains a match.<br><FONT ID="LN">2084</FONT><A NAME="2084"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2085</FONT><A NAME="2085"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> getFieldOffset(<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> name, <A HREF="../../java/lang/Class.java.htm">Class</A>  <A HREF= "/1139.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> type) {<br><FONT ID="LN">2086</FONT><A NAME="2086"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/io/ObjectStreamField.java.htm">ObjectStreamField</A>  <A HREF= "/1273.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> field = desc.getField(name, type);<br><FONT ID="LN">2087</FONT><A NAME="2087"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (field != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">2088</FONT><A NAME="2088"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> field.getOffset();<br><FONT ID="LN">2089</FONT><A NAME="2089"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (desc.getLocalDesc().getField(name, type) != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">2090</FONT><A NAME="2090"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2091</FONT><A NAME="2091"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2092</FONT><A NAME="2092"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalArgumentException.java.htm">IllegalArgumentException</A>  <A HREF= "/2785.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"no such field"</FONT>);<br><FONT ID="LN">2093</FONT><A NAME="2093"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2094</FONT><A NAME="2094"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2095</FONT><A NAME="2095"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2096</FONT><A NAME="2096"></A>&nbsp;<br><FONT ID="LN">2097</FONT><A NAME="2097"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2098</FONT><A NAME="2098"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Prioritized list of callbacks to be performed once object graph has been<br><FONT ID="LN">2099</FONT><A NAME="2099"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* completely deserialized.<br><FONT ID="LN">2100</FONT><A NAME="2100"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2101</FONT><A NAME="2101"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> ValidationList {<br><FONT ID="LN">2102</FONT><A NAME="2102"></A><br><FONT ID="LN">2103</FONT><A NAME="2103"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> Callback {<br><FONT ID="LN">2104</FONT><A NAME="2104"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Final">final</FONT> <A HREF="../../java/io/ObjectInputValidation.java.htm">ObjectInputValidation</A>  <A HREF= "/2272.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj;<br><FONT ID="LN">2105</FONT><A NAME="2105"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> priority;<br><FONT ID="LN">2106</FONT><A NAME="2106"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Callback next;<br><FONT ID="LN">2107</FONT><A NAME="2107"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2108</FONT><A NAME="2108"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Callback(<A HREF="../../java/io/ObjectInputValidation.java.htm">ObjectInputValidation</A>  <A HREF= "/2272.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <FONT ID="Int">int</FONT> priority, Callback next) {<br><FONT ID="LN">2109</FONT><A NAME="2109"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.obj = obj;<br><FONT ID="LN">2110</FONT><A NAME="2110"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.priority = priority;<br><FONT ID="LN">2111</FONT><A NAME="2111"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.next = next;<br><FONT ID="LN">2112</FONT><A NAME="2112"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2113</FONT><A NAME="2113"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2114</FONT><A NAME="2114"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2115</FONT><A NAME="2115"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** linked list of callbacks */</FONT><br><FONT ID="LN">2116</FONT><A NAME="2116"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> Callback list;<br><FONT ID="LN">2117</FONT><A NAME="2117"></A><br><FONT ID="LN">2118</FONT><A NAME="2118"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2119</FONT><A NAME="2119"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates new (empty) ValidationList.<br><FONT ID="LN">2120</FONT><A NAME="2120"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2121</FONT><A NAME="2121"></A>&nbsp;&nbsp;&nbsp;&nbsp;ValidationList() {<br><FONT ID="LN">2122</FONT><A NAME="2122"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2123</FONT><A NAME="2123"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2124</FONT><A NAME="2124"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2125</FONT><A NAME="2125"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Registers callback.  Throws InvalidObjectException if callback<br><FONT ID="LN">2126</FONT><A NAME="2126"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object is null.<br><FONT ID="LN">2127</FONT><A NAME="2127"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2128</FONT><A NAME="2128"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> register(<A HREF="../../java/io/ObjectInputValidation.java.htm">ObjectInputValidation</A>  <A HREF= "/2272.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <FONT ID="Int">int</FONT> priority)<br><FONT ID="LN">2129</FONT><A NAME="2129"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">2130</FONT><A NAME="2130"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">2131</FONT><A NAME="2131"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (obj == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">2132</FONT><A NAME="2132"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"null callback"</FONT>);<br><FONT ID="LN">2133</FONT><A NAME="2133"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2134</FONT><A NAME="2134"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2135</FONT><A NAME="2135"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Callback prev = <FONT ID="Null">null</FONT>, cur = list;<br><FONT ID="LN">2136</FONT><A NAME="2136"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (cur != <FONT ID="Null">null</FONT> &amp;&amp; priority &lt; cur.priority) {<br><FONT ID="LN">2137</FONT><A NAME="2137"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev = cur;<br><FONT ID="LN">2138</FONT><A NAME="2138"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cur = cur.next;<br><FONT ID="LN">2139</FONT><A NAME="2139"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2140</FONT><A NAME="2140"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (prev != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">2141</FONT><A NAME="2141"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev.next = <FONT ID="New">new</FONT> Callback(obj, priority, cur);<br><FONT ID="LN">2142</FONT><A NAME="2142"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2143</FONT><A NAME="2143"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list = <FONT ID="New">new</FONT> Callback(obj, priority, list);<br><FONT ID="LN">2144</FONT><A NAME="2144"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2145</FONT><A NAME="2145"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2146</FONT><A NAME="2146"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2147</FONT><A NAME="2147"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2148</FONT><A NAME="2148"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Invokes all registered callbacks and clears the callback list.<br><FONT ID="LN">2149</FONT><A NAME="2149"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Callbacks with higher priorities are called first; those with equal<br><FONT ID="LN">2150</FONT><A NAME="2150"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* priorities may be called in any order.  If any of the callbacks<br><FONT ID="LN">2151</FONT><A NAME="2151"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* throws an InvalidObjectException, the callback process is terminated<br><FONT ID="LN">2152</FONT><A NAME="2152"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and the exception propagated upwards.<br><FONT ID="LN">2153</FONT><A NAME="2153"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2154</FONT><A NAME="2154"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> doCallbacks() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2155</FONT><A NAME="2155"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">2156</FONT><A NAME="2156"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (list != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">2157</FONT><A NAME="2157"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.obj.validateObject();<br><FONT ID="LN">2158</FONT><A NAME="2158"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list = list.next;<br><FONT ID="LN">2159</FONT><A NAME="2159"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2160</FONT><A NAME="2160"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/InvalidObjectException.java.htm">InvalidObjectException</A>  <A HREF= "/2835.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">2161</FONT><A NAME="2161"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">2162</FONT><A NAME="2162"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">2163</FONT><A NAME="2163"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2164</FONT><A NAME="2164"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2165</FONT><A NAME="2165"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2166</FONT><A NAME="2166"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2167</FONT><A NAME="2167"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Resets the callback list to its initial (empty) state.<br><FONT ID="LN">2168</FONT><A NAME="2168"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2169</FONT><A NAME="2169"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> clear() {<br><FONT ID="LN">2170</FONT><A NAME="2170"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">2171</FONT><A NAME="2171"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2172</FONT><A NAME="2172"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2173</FONT><A NAME="2173"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2174</FONT><A NAME="2174"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2175</FONT><A NAME="2175"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Input stream supporting single-byte peek operations.<br><FONT ID="LN">2176</FONT><A NAME="2176"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2177</FONT><A NAME="2177"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> PeekInputStream <FONT ID="Extends">extends</FONT> <A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2178</FONT><A NAME="2178"></A><br><FONT ID="LN">2179</FONT><A NAME="2179"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** underlying stream */</FONT><br><FONT ID="LN">2180</FONT><A NAME="2180"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> in;<br><FONT ID="LN">2181</FONT><A NAME="2181"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** peeked byte */</FONT><br><FONT ID="LN">2182</FONT><A NAME="2182"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> peekb = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2183</FONT><A NAME="2183"></A><br><FONT ID="LN">2184</FONT><A NAME="2184"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2185</FONT><A NAME="2185"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates new PeekInputStream on top of given underlying stream.<br><FONT ID="LN">2186</FONT><A NAME="2186"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2187</FONT><A NAME="2187"></A>&nbsp;&nbsp;&nbsp;&nbsp;PeekInputStream(<A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> in) {<br><FONT ID="LN">2188</FONT><A NAME="2188"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.in = in;<br><FONT ID="LN">2189</FONT><A NAME="2189"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2190</FONT><A NAME="2190"></A><br><FONT ID="LN">2191</FONT><A NAME="2191"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2192</FONT><A NAME="2192"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Peeks at next byte value in stream.  Similar to read(), except<br><FONT ID="LN">2193</FONT><A NAME="2193"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* that it does not consume the read value.<br><FONT ID="LN">2194</FONT><A NAME="2194"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2195</FONT><A NAME="2195"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> peek() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2196</FONT><A NAME="2196"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (peekb &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? peekb : (peekb = in.read());<br><FONT ID="LN">2197</FONT><A NAME="2197"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2198</FONT><A NAME="2198"></A><br><FONT ID="LN">2199</FONT><A NAME="2199"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2200</FONT><A NAME="2200"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (peekb &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2201</FONT><A NAME="2201"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = peekb;<br><FONT ID="LN">2202</FONT><A NAME="2202"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peekb = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2203</FONT><A NAME="2203"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2204</FONT><A NAME="2204"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2205</FONT><A NAME="2205"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.read();<br><FONT ID="LN">2206</FONT><A NAME="2206"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2207</FONT><A NAME="2207"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2208</FONT><A NAME="2208"></A><br><FONT ID="LN">2209</FONT><A NAME="2209"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2210</FONT><A NAME="2210"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (len == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2211</FONT><A NAME="2211"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2212</FONT><A NAME="2212"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (peekb &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2213</FONT><A NAME="2213"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.read(b, off, len);<br><FONT ID="LN">2214</FONT><A NAME="2214"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2215</FONT><A NAME="2215"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b[off++] = (<FONT ID="Byte">byte</FONT>) peekb;<br><FONT ID="LN">2216</FONT><A NAME="2216"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len--;<br><FONT ID="LN">2217</FONT><A NAME="2217"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peekb = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2218</FONT><A NAME="2218"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = in.read(b, off, len);<br><FONT ID="LN">2219</FONT><A NAME="2219"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (n &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? (n + <FONT ID="IntegerLiteral">1</FONT>) : <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2220</FONT><A NAME="2220"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2221</FONT><A NAME="2221"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2222</FONT><A NAME="2222"></A><br><FONT ID="LN">2223</FONT><A NAME="2223"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2224</FONT><A NAME="2224"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2225</FONT><A NAME="2225"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (n &lt; len) {<br><FONT ID="LN">2226</FONT><A NAME="2226"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> count = read(b, off + n, len - n);<br><FONT ID="LN">2227</FONT><A NAME="2227"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (count &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2228</FONT><A NAME="2228"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2229</FONT><A NAME="2229"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2230</FONT><A NAME="2230"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n += count;<br><FONT ID="LN">2231</FONT><A NAME="2231"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2232</FONT><A NAME="2232"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2233</FONT><A NAME="2233"></A><br><FONT ID="LN">2234</FONT><A NAME="2234"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Long">long</FONT> skip(<FONT ID="Long">long</FONT> n) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2235</FONT><A NAME="2235"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n &lt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2236</FONT><A NAME="2236"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2237</FONT><A NAME="2237"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2238</FONT><A NAME="2238"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> skipped = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2239</FONT><A NAME="2239"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (peekb &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2240</FONT><A NAME="2240"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peekb = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2241</FONT><A NAME="2241"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skipped++;<br><FONT ID="LN">2242</FONT><A NAME="2242"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n--;<br><FONT ID="LN">2243</FONT><A NAME="2243"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2244</FONT><A NAME="2244"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> skipped + skip(n);<br><FONT ID="LN">2245</FONT><A NAME="2245"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2246</FONT><A NAME="2246"></A><br><FONT ID="LN">2247</FONT><A NAME="2247"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> available() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2248</FONT><A NAME="2248"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.available() + ((peekb &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? <FONT ID="IntegerLiteral">1</FONT> : <FONT ID="IntegerLiteral">0</FONT>);<br><FONT ID="LN">2249</FONT><A NAME="2249"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2250</FONT><A NAME="2250"></A><br><FONT ID="LN">2251</FONT><A NAME="2251"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> close() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2252</FONT><A NAME="2252"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br><FONT ID="LN">2253</FONT><A NAME="2253"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2254</FONT><A NAME="2254"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2255</FONT><A NAME="2255"></A><br><FONT ID="LN">2256</FONT><A NAME="2256"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2257</FONT><A NAME="2257"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Input stream with two modes: in default mode, inputs data written in the<br><FONT ID="LN">2258</FONT><A NAME="2258"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* same format as DataOutputStream; in "block data" mode, inputs data<br><FONT ID="LN">2259</FONT><A NAME="2259"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* bracketed by block data markers (see object serialization specification<br><FONT ID="LN">2260</FONT><A NAME="2260"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* for details).  Buffering depends on block data mode: when in default<br><FONT ID="LN">2261</FONT><A NAME="2261"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* mode, no data is buffered in advance; when in block data mode, all data<br><FONT ID="LN">2262</FONT><A NAME="2262"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* for the current data block is read in at once (and buffered).<br><FONT ID="LN">2263</FONT><A NAME="2263"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2264</FONT><A NAME="2264"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Class">class</FONT> BlockDataInputStream <br><FONT ID="LN">2265</FONT><A NAME="2265"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Extends">extends</FONT> <A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> <FONT ID="Implements">implements</FONT> <A HREF="../../java/io/DataInput.java.htm">DataInput</A>  <A HREF= "/1734.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">2266</FONT><A NAME="2266"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">2267</FONT><A NAME="2267"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** maximum data block length */</FONT><br><FONT ID="LN">2268</FONT><A NAME="2268"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> MAX_BLOCK_SIZE = <FONT ID="IntegerLiteral">1024</FONT>;<br><FONT ID="LN">2269</FONT><A NAME="2269"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** maximum data block header length */</FONT><br><FONT ID="LN">2270</FONT><A NAME="2270"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> MAX_HEADER_SIZE = <FONT ID="IntegerLiteral">5</FONT>;<br><FONT ID="LN">2271</FONT><A NAME="2271"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** (tunable) length of char buffer (for reading strings) */</FONT><br><FONT ID="LN">2272</FONT><A NAME="2272"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> CHAR_BUF_SIZE = <FONT ID="IntegerLiteral">256</FONT>;<br><FONT ID="LN">2273</FONT><A NAME="2273"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** readBlockHeader() return value indicating header read may block */</FONT><br><FONT ID="LN">2274</FONT><A NAME="2274"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Int">int</FONT> HEADER_BLOCKED = -<FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2275</FONT><A NAME="2275"></A><br><FONT ID="LN">2276</FONT><A NAME="2276"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** buffer for reading general/block data */</FONT><br><FONT ID="LN">2277</FONT><A NAME="2277"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT>[] buf = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[MAX_BLOCK_SIZE];<br><FONT ID="LN">2278</FONT><A NAME="2278"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** buffer for reading block data headers */</FONT><br><FONT ID="LN">2279</FONT><A NAME="2279"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT>[] hbuf = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[MAX_HEADER_SIZE];<br><FONT ID="LN">2280</FONT><A NAME="2280"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** char buffer for fast string reads */</FONT><br><FONT ID="LN">2281</FONT><A NAME="2281"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <FONT ID="Char">char</FONT>[] cbuf = <FONT ID="New">new</FONT> <FONT ID="Char">char</FONT>[CHAR_BUF_SIZE];<br><FONT ID="LN">2282</FONT><A NAME="2282"></A><br><FONT ID="LN">2283</FONT><A NAME="2283"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** block data mode */</FONT><br><FONT ID="LN">2284</FONT><A NAME="2284"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Boolean">boolean</FONT> blkmode = <FONT ID="False">false</FONT>;<br><FONT ID="LN">2285</FONT><A NAME="2285"></A><br><FONT ID="LN">2286</FONT><A NAME="2286"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// block data state fields; values meaningful only when blkmode true<br><FONT ID="LN">2287</FONT><A NAME="2287"></A></FONT>    <FONT ID="FormalComment">/** current offset into buf */</FONT><br><FONT ID="LN">2288</FONT><A NAME="2288"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2289</FONT><A NAME="2289"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** end offset of valid data in buf, or -1 if no more block data */</FONT><br><FONT ID="LN">2290</FONT><A NAME="2290"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> end = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2291</FONT><A NAME="2291"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** number of bytes in current block yet to be read from stream */</FONT><br><FONT ID="LN">2292</FONT><A NAME="2292"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> unread = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2293</FONT><A NAME="2293"></A><br><FONT ID="LN">2294</FONT><A NAME="2294"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** underlying stream (wrapped in peekable filter stream) */</FONT><br><FONT ID="LN">2295</FONT><A NAME="2295"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> PeekInputStream in;<br><FONT ID="LN">2296</FONT><A NAME="2296"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** loopback stream (for data reads that span data blocks) */</FONT><br><FONT ID="LN">2297</FONT><A NAME="2297"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/io/DataInputStream.java.htm">DataInputStream</A>  <A HREF= "/1633.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> din;<br><FONT ID="LN">2298</FONT><A NAME="2298"></A><br><FONT ID="LN">2299</FONT><A NAME="2299"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2300</FONT><A NAME="2300"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates new BlockDataInputStream on top of given underlying stream.<br><FONT ID="LN">2301</FONT><A NAME="2301"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Block data mode is turned off by default.<br><FONT ID="LN">2302</FONT><A NAME="2302"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2303</FONT><A NAME="2303"></A>&nbsp;&nbsp;&nbsp;&nbsp;BlockDataInputStream(<A HREF="../../java/io/InputStream.java.htm">InputStream</A>  <A HREF= "/603.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> in) {<br><FONT ID="LN">2304</FONT><A NAME="2304"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.in = <FONT ID="New">new</FONT> PeekInputStream(in);<br><FONT ID="LN">2305</FONT><A NAME="2305"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;din = <FONT ID="New">new</FONT> <A HREF="../../java/io/DataInputStream.java.htm">DataInputStream</A>  <A HREF= "/1633.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="This">this</FONT>);<br><FONT ID="LN">2306</FONT><A NAME="2306"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2307</FONT><A NAME="2307"></A><br><FONT ID="LN">2308</FONT><A NAME="2308"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2309</FONT><A NAME="2309"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Sets block data mode to the given mode (true == on, false == off)<br><FONT ID="LN">2310</FONT><A NAME="2310"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and returns the previous mode value.  If the new mode is the same as<br><FONT ID="LN">2311</FONT><A NAME="2311"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the old mode, no action is taken.  Throws IllegalStateException if<br><FONT ID="LN">2312</FONT><A NAME="2312"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* block data mode is being switched from on to off while unconsumed<br><FONT ID="LN">2313</FONT><A NAME="2313"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* block data is still present in the stream.<br><FONT ID="LN">2314</FONT><A NAME="2314"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2315</FONT><A NAME="2315"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> setBlockDataMode(<FONT ID="Boolean">boolean</FONT> newmode) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2316</FONT><A NAME="2316"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode == newmode) {<br><FONT ID="LN">2317</FONT><A NAME="2317"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> blkmode;<br><FONT ID="LN">2318</FONT><A NAME="2318"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2319</FONT><A NAME="2319"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (newmode) {<br><FONT ID="LN">2320</FONT><A NAME="2320"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2321</FONT><A NAME="2321"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2322</FONT><A NAME="2322"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2323</FONT><A NAME="2323"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (pos &lt; end) {<br><FONT ID="LN">2324</FONT><A NAME="2324"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalStateException.java.htm">IllegalStateException</A>  <A HREF= "/2792.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"unread block data"</FONT>);<br><FONT ID="LN">2325</FONT><A NAME="2325"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2326</FONT><A NAME="2326"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blkmode = newmode;<br><FONT ID="LN">2327</FONT><A NAME="2327"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> !blkmode;<br><FONT ID="LN">2328</FONT><A NAME="2328"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2329</FONT><A NAME="2329"></A><br><FONT ID="LN">2330</FONT><A NAME="2330"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2331</FONT><A NAME="2331"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns true if the stream is currently in block data mode, false<br><FONT ID="LN">2332</FONT><A NAME="2332"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* otherwise.<br><FONT ID="LN">2333</FONT><A NAME="2333"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2334</FONT><A NAME="2334"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> getBlockDataMode() {<br><FONT ID="LN">2335</FONT><A NAME="2335"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> blkmode;<br><FONT ID="LN">2336</FONT><A NAME="2336"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2337</FONT><A NAME="2337"></A><br><FONT ID="LN">2338</FONT><A NAME="2338"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2339</FONT><A NAME="2339"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If in block data mode, skips to the end of the current group of data<br><FONT ID="LN">2340</FONT><A NAME="2340"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* blocks (but does not unset block data mode).  If not in block data<br><FONT ID="LN">2341</FONT><A NAME="2341"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* mode, throws an IllegalStateException.<br><FONT ID="LN">2342</FONT><A NAME="2342"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2343</FONT><A NAME="2343"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> skipBlockData() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2344</FONT><A NAME="2344"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2345</FONT><A NAME="2345"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalStateException.java.htm">IllegalStateException</A>  <A HREF= "/2792.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<FONT ID="StringLiteral">"not in block data mode"</FONT>);<br><FONT ID="LN">2346</FONT><A NAME="2346"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2347</FONT><A NAME="2347"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (end &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2348</FONT><A NAME="2348"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refill();<br><FONT ID="LN">2349</FONT><A NAME="2349"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2350</FONT><A NAME="2350"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2351</FONT><A NAME="2351"></A><br><FONT ID="LN">2352</FONT><A NAME="2352"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2353</FONT><A NAME="2353"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Attempts to read in the next block data header (if any).  If<br><FONT ID="LN">2354</FONT><A NAME="2354"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* canBlock is false and a full header cannot be read without possibly<br><FONT ID="LN">2355</FONT><A NAME="2355"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* blocking, returns HEADER_BLOCKED, else if the next element in the<br><FONT ID="LN">2356</FONT><A NAME="2356"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* stream is a block data header, returns the block data length<br><FONT ID="LN">2357</FONT><A NAME="2357"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* specified by the header, else returns -1.<br><FONT ID="LN">2358</FONT><A NAME="2358"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2359</FONT><A NAME="2359"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> readBlockHeader(<FONT ID="Boolean">boolean</FONT> canBlock) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2360</FONT><A NAME="2360"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (defaultDataEnd) {<br><FONT ID="LN">2361</FONT><A NAME="2361"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">2362</FONT><A NAME="2362"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fix for 4360508: stream is currently at the end of a field<br><FONT ID="LN">2363</FONT><A NAME="2363"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* value block written via default serialization; since there<br><FONT ID="LN">2364</FONT><A NAME="2364"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is no terminating TC_ENDBLOCKDATA tag, simulate<br><FONT ID="LN">2365</FONT><A NAME="2365"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* end-of-custom-data behavior explicitly.<br><FONT ID="LN">2366</FONT><A NAME="2366"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2367</FONT><A NAME="2367"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2368</FONT><A NAME="2368"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2369</FONT><A NAME="2369"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">2370</FONT><A NAME="2370"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (;;) {<br><FONT ID="LN">2371</FONT><A NAME="2371"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> avail = canBlock ? Integer.MAX_VALUE : in.available();<br><FONT ID="LN">2372</FONT><A NAME="2372"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (avail == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2373</FONT><A NAME="2373"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> HEADER_BLOCKED;<br><FONT ID="LN">2374</FONT><A NAME="2374"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2375</FONT><A NAME="2375"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2376</FONT><A NAME="2376"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> tc = in.peek();<br><FONT ID="LN">2377</FONT><A NAME="2377"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (tc) {<br><FONT ID="LN">2378</FONT><A NAME="2378"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATA:<br><FONT ID="LN">2379</FONT><A NAME="2379"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (avail &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2380</FONT><A NAME="2380"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> HEADER_BLOCKED;<br><FONT ID="LN">2381</FONT><A NAME="2381"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2382</FONT><A NAME="2382"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(hbuf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2383</FONT><A NAME="2383"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> hbuf[<FONT ID="IntegerLiteral">1</FONT>] &amp; <FONT ID="IntegerLiteral">0xFF</FONT>;<br><FONT ID="LN">2384</FONT><A NAME="2384"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2385</FONT><A NAME="2385"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_BLOCKDATALONG:<br><FONT ID="LN">2386</FONT><A NAME="2386"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (avail &lt; <FONT ID="IntegerLiteral">5</FONT>) {<br><FONT ID="LN">2387</FONT><A NAME="2387"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> HEADER_BLOCKED;<br><FONT ID="LN">2388</FONT><A NAME="2388"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2389</FONT><A NAME="2389"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(hbuf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">5</FONT>);<br><FONT ID="LN">2390</FONT><A NAME="2390"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> len = Bits.getInt(hbuf, <FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">2391</FONT><A NAME="2391"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (len &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2392</FONT><A NAME="2392"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">2393</FONT><A NAME="2393"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"illegal block data header length"</FONT>);<br><FONT ID="LN">2394</FONT><A NAME="2394"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2395</FONT><A NAME="2395"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> len;<br><FONT ID="LN">2396</FONT><A NAME="2396"></A><br><FONT ID="LN">2397</FONT><A NAME="2397"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">2398</FONT><A NAME="2398"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* TC_RESETs may occur in between data blocks.<br><FONT ID="LN">2399</FONT><A NAME="2399"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Unfortunately, this case must be parsed at a lower<br><FONT ID="LN">2400</FONT><A NAME="2400"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* level than other typecodes, since primitive data<br><FONT ID="LN">2401</FONT><A NAME="2401"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* reads may span data blocks separated by a TC_RESET.<br><FONT ID="LN">2402</FONT><A NAME="2402"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2403</FONT><A NAME="2403"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> TC_RESET:<br><FONT ID="LN">2404</FONT><A NAME="2404"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.read();<br><FONT ID="LN">2405</FONT><A NAME="2405"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleReset();<br><FONT ID="LN">2406</FONT><A NAME="2406"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2407</FONT><A NAME="2407"></A><br><FONT ID="LN">2408</FONT><A NAME="2408"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">2409</FONT><A NAME="2409"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (tc &gt;= <FONT ID="IntegerLiteral">0</FONT> &amp;&amp; (tc &lt; TC_BASE || tc &gt; TC_MAX)) {<br><FONT ID="LN">2410</FONT><A NAME="2410"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2411</FONT><A NAME="2411"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2412</FONT><A NAME="2412"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2413</FONT><A NAME="2413"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2414</FONT><A NAME="2414"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2415</FONT><A NAME="2415"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">2416</FONT><A NAME="2416"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">2417</FONT><A NAME="2417"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"unexpected EOF while reading block data header"</FONT>);<br><FONT ID="LN">2418</FONT><A NAME="2418"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2419</FONT><A NAME="2419"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2420</FONT><A NAME="2420"></A><br><FONT ID="LN">2421</FONT><A NAME="2421"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2422</FONT><A NAME="2422"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Refills internal buffer buf with block data.  Any data in buf at the<br><FONT ID="LN">2423</FONT><A NAME="2423"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* time of the call is considered consumed.  Sets the pos, end, and<br><FONT ID="LN">2424</FONT><A NAME="2424"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* unread fields to reflect the new amount of available block data; if<br><FONT ID="LN">2425</FONT><A NAME="2425"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the next element in the stream is not a data block, sets pos and<br><FONT ID="LN">2426</FONT><A NAME="2426"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* unread to 0 and end to -1.<br><FONT ID="LN">2427</FONT><A NAME="2427"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2428</FONT><A NAME="2428"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> refill() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2429</FONT><A NAME="2429"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">2430</FONT><A NAME="2430"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Do">do</FONT> {<br><FONT ID="LN">2431</FONT><A NAME="2431"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2432</FONT><A NAME="2432"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (unread &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2433</FONT><A NAME="2433"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = <br><FONT ID="LN">2434</FONT><A NAME="2434"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.read(buf, <FONT ID="IntegerLiteral">0</FONT>, Math.min(unread, MAX_BLOCK_SIZE));<br><FONT ID="LN">2435</FONT><A NAME="2435"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2436</FONT><A NAME="2436"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = n;<br><FONT ID="LN">2437</FONT><A NAME="2437"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread -= n;<br><FONT ID="LN">2438</FONT><A NAME="2438"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2439</FONT><A NAME="2439"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/StreamCorruptedException.java.htm">StreamCorruptedException</A>  <A HREF= "/2057.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">2440</FONT><A NAME="2440"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"unexpected EOF in middle of data block"</FONT>);<br><FONT ID="LN">2441</FONT><A NAME="2441"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2442</FONT><A NAME="2442"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2443</FONT><A NAME="2443"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = readBlockHeader(<FONT ID="True">true</FONT>);<br><FONT ID="LN">2444</FONT><A NAME="2444"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n &gt;= <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2445</FONT><A NAME="2445"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2446</FONT><A NAME="2446"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = n;<br><FONT ID="LN">2447</FONT><A NAME="2447"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2448</FONT><A NAME="2448"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2449</FONT><A NAME="2449"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2450</FONT><A NAME="2450"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2451</FONT><A NAME="2451"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2452</FONT><A NAME="2452"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="While">while</FONT> (pos == end);<br><FONT ID="LN">2453</FONT><A NAME="2453"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">2454</FONT><A NAME="2454"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2455</FONT><A NAME="2455"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2456</FONT><A NAME="2456"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2457</FONT><A NAME="2457"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> ex;<br><FONT ID="LN">2458</FONT><A NAME="2458"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2459</FONT><A NAME="2459"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2460</FONT><A NAME="2460"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2461</FONT><A NAME="2461"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2462</FONT><A NAME="2462"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* If in block data mode, returns the number of unconsumed bytes<br><FONT ID="LN">2463</FONT><A NAME="2463"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* remaining in the current data block.  If not in block data mode,<br><FONT ID="LN">2464</FONT><A NAME="2464"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* throws an IllegalStateException.<br><FONT ID="LN">2465</FONT><A NAME="2465"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2466</FONT><A NAME="2466"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> currentBlockRemaining() {<br><FONT ID="LN">2467</FONT><A NAME="2467"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2468</FONT><A NAME="2468"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (end &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? (end - pos) + unread : <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2469</FONT><A NAME="2469"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2470</FONT><A NAME="2470"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/IllegalStateException.java.htm">IllegalStateException</A>  <A HREF= "/2792.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2471</FONT><A NAME="2471"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2472</FONT><A NAME="2472"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2473</FONT><A NAME="2473"></A><br><FONT ID="LN">2474</FONT><A NAME="2474"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2475</FONT><A NAME="2475"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Peeks at (but does not consume) and returns the next byte value in<br><FONT ID="LN">2476</FONT><A NAME="2476"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the stream, or -1 if the end of the stream/block data (if in block<br><FONT ID="LN">2477</FONT><A NAME="2477"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* data mode) has been reached.<br><FONT ID="LN">2478</FONT><A NAME="2478"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2479</FONT><A NAME="2479"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> peek() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2480</FONT><A NAME="2480"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2481</FONT><A NAME="2481"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (pos == end) {<br><FONT ID="LN">2482</FONT><A NAME="2482"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refill();<br><FONT ID="LN">2483</FONT><A NAME="2483"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2484</FONT><A NAME="2484"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (end &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? (buf[pos] &amp; <FONT ID="IntegerLiteral">0xFF</FONT>) : -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2485</FONT><A NAME="2485"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2486</FONT><A NAME="2486"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.peek();<br><FONT ID="LN">2487</FONT><A NAME="2487"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2488</FONT><A NAME="2488"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2489</FONT><A NAME="2489"></A><br><FONT ID="LN">2490</FONT><A NAME="2490"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2491</FONT><A NAME="2491"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Peeks at (but does not consume) and returns the next byte value in<br><FONT ID="LN">2492</FONT><A NAME="2492"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the stream, or throws EOFException if end of stream/block data has<br><FONT ID="LN">2493</FONT><A NAME="2493"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* been reached.<br><FONT ID="LN">2494</FONT><A NAME="2494"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2495</FONT><A NAME="2495"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Byte">byte</FONT> peekByte() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2496</FONT><A NAME="2496"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> val = peek();<br><FONT ID="LN">2497</FONT><A NAME="2497"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (val &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2498</FONT><A NAME="2498"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2499</FONT><A NAME="2499"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2500</FONT><A NAME="2500"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<FONT ID="Byte">byte</FONT>) val;<br><FONT ID="LN">2501</FONT><A NAME="2501"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2502</FONT><A NAME="2502"></A><br><FONT ID="LN">2503</FONT><A NAME="2503"></A><br><FONT ID="LN">2504</FONT><A NAME="2504"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* ----------------- generic input stream methods ------------------ */</FONT><br><FONT ID="LN">2505</FONT><A NAME="2505"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">2506</FONT><A NAME="2506"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The following methods are equivalent to their counterparts in<br><FONT ID="LN">2507</FONT><A NAME="2507"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* InputStream, except that they interpret data block boundaries and<br><FONT ID="LN">2508</FONT><A NAME="2508"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* read the requested data from within data blocks when in block data<br><FONT ID="LN">2509</FONT><A NAME="2509"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* mode.<br><FONT ID="LN">2510</FONT><A NAME="2510"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2511</FONT><A NAME="2511"></A><br><FONT ID="LN">2512</FONT><A NAME="2512"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2513</FONT><A NAME="2513"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2514</FONT><A NAME="2514"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (pos == end) {<br><FONT ID="LN">2515</FONT><A NAME="2515"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refill();<br><FONT ID="LN">2516</FONT><A NAME="2516"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2517</FONT><A NAME="2517"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (end &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? (buf[pos++] &amp; <FONT ID="IntegerLiteral">0xFF</FONT>) : -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2518</FONT><A NAME="2518"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2519</FONT><A NAME="2519"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.read();<br><FONT ID="LN">2520</FONT><A NAME="2520"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2521</FONT><A NAME="2521"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2522</FONT><A NAME="2522"></A><br><FONT ID="LN">2523</FONT><A NAME="2523"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> read(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2524</FONT><A NAME="2524"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> read(b, off, len, <FONT ID="False">false</FONT>);<br><FONT ID="LN">2525</FONT><A NAME="2525"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2526</FONT><A NAME="2526"></A><br><FONT ID="LN">2527</FONT><A NAME="2527"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Long">long</FONT> skip(<FONT ID="Long">long</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2528</FONT><A NAME="2528"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Long">long</FONT> remain = len;<br><FONT ID="LN">2529</FONT><A NAME="2529"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (remain &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2530</FONT><A NAME="2530"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2531</FONT><A NAME="2531"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (pos == end) {<br><FONT ID="LN">2532</FONT><A NAME="2532"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refill();<br><FONT ID="LN">2533</FONT><A NAME="2533"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2534</FONT><A NAME="2534"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (end &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2535</FONT><A NAME="2535"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2536</FONT><A NAME="2536"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2537</FONT><A NAME="2537"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> nread = (<FONT ID="Int">int</FONT>) Math.min(remain, end - pos);<br><FONT ID="LN">2538</FONT><A NAME="2538"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remain -= nread;<br><FONT ID="LN">2539</FONT><A NAME="2539"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += nread;<br><FONT ID="LN">2540</FONT><A NAME="2540"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2541</FONT><A NAME="2541"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> nread = (<FONT ID="Int">int</FONT>) Math.min(remain, MAX_BLOCK_SIZE);<br><FONT ID="LN">2542</FONT><A NAME="2542"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((nread = in.read(buf, <FONT ID="IntegerLiteral">0</FONT>, nread)) &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2543</FONT><A NAME="2543"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2544</FONT><A NAME="2544"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2545</FONT><A NAME="2545"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remain -= nread;<br><FONT ID="LN">2546</FONT><A NAME="2546"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2547</FONT><A NAME="2547"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2548</FONT><A NAME="2548"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> len - remain;<br><FONT ID="LN">2549</FONT><A NAME="2549"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2550</FONT><A NAME="2550"></A><br><FONT ID="LN">2551</FONT><A NAME="2551"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> available() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2552</FONT><A NAME="2552"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2553</FONT><A NAME="2553"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((pos == end) &amp;&amp; (unread == <FONT ID="IntegerLiteral">0</FONT>)) {<br><FONT ID="LN">2554</FONT><A NAME="2554"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n;<br><FONT ID="LN">2555</FONT><A NAME="2555"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> ((n = readBlockHeader(<FONT ID="False">false</FONT>)) == <FONT ID="IntegerLiteral">0</FONT>) ;<br><FONT ID="LN">2556</FONT><A NAME="2556"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (n) {<br><FONT ID="LN">2557</FONT><A NAME="2557"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> HEADER_BLOCKED:<br><FONT ID="LN">2558</FONT><A NAME="2558"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2559</FONT><A NAME="2559"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2560</FONT><A NAME="2560"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> -<FONT ID="IntegerLiteral">1</FONT>:<br><FONT ID="LN">2561</FONT><A NAME="2561"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2562</FONT><A NAME="2562"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2563</FONT><A NAME="2563"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2564</FONT><A NAME="2564"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2565</FONT><A NAME="2565"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">2566</FONT><A NAME="2566"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2567</FONT><A NAME="2567"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2568</FONT><A NAME="2568"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = n;<br><FONT ID="LN">2569</FONT><A NAME="2569"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">2570</FONT><A NAME="2570"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2571</FONT><A NAME="2571"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2572</FONT><A NAME="2572"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// avoid unnecessary call to in.available() if possible<br><FONT ID="LN">2573</FONT><A NAME="2573"></A></FONT>        <FONT ID="Int">int</FONT> unreadAvail = (unread &gt; <FONT ID="IntegerLiteral">0</FONT>) ?<br><FONT ID="LN">2574</FONT><A NAME="2574"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.min(in.available(), unread) : <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2575</FONT><A NAME="2575"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (end &gt;= <FONT ID="IntegerLiteral">0</FONT>) ? (end - pos) + unreadAvail : <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2576</FONT><A NAME="2576"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2577</FONT><A NAME="2577"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.available();<br><FONT ID="LN">2578</FONT><A NAME="2578"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2579</FONT><A NAME="2579"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2580</FONT><A NAME="2580"></A><br><FONT ID="LN">2581</FONT><A NAME="2581"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> close() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2582</FONT><A NAME="2582"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2583</FONT><A NAME="2583"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2584</FONT><A NAME="2584"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2585</FONT><A NAME="2585"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unread = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2586</FONT><A NAME="2586"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2587</FONT><A NAME="2587"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.close();<br><FONT ID="LN">2588</FONT><A NAME="2588"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2589</FONT><A NAME="2589"></A><br><FONT ID="LN">2590</FONT><A NAME="2590"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2591</FONT><A NAME="2591"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Attempts to read len bytes into byte array b at offset off.  Returns<br><FONT ID="LN">2592</FONT><A NAME="2592"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the number of bytes read, or -1 if the end of stream/block data has<br><FONT ID="LN">2593</FONT><A NAME="2593"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* been reached.  If copy is true, reads values into an intermediate<br><FONT ID="LN">2594</FONT><A NAME="2594"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* buffer before copying them to b (to avoid exposing a reference to<br><FONT ID="LN">2595</FONT><A NAME="2595"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* b).<br><FONT ID="LN">2596</FONT><A NAME="2596"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2597</FONT><A NAME="2597"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> read(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len, <FONT ID="Boolean">boolean</FONT> copy) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2598</FONT><A NAME="2598"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (len == <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2599</FONT><A NAME="2599"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2600</FONT><A NAME="2600"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2601</FONT><A NAME="2601"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (pos == end) {<br><FONT ID="LN">2602</FONT><A NAME="2602"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refill();<br><FONT ID="LN">2603</FONT><A NAME="2603"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2604</FONT><A NAME="2604"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (end &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2605</FONT><A NAME="2605"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">2606</FONT><A NAME="2606"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2607</FONT><A NAME="2607"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> nread = Math.min(len, end - pos);<br><FONT ID="LN">2608</FONT><A NAME="2608"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(buf, pos, b, off, nread);<br><FONT ID="LN">2609</FONT><A NAME="2609"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += nread;<br><FONT ID="LN">2610</FONT><A NAME="2610"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> nread;<br><FONT ID="LN">2611</FONT><A NAME="2611"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (copy) {<br><FONT ID="LN">2612</FONT><A NAME="2612"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> nread = in.read(buf, <FONT ID="IntegerLiteral">0</FONT>, Math.min(len, MAX_BLOCK_SIZE));<br><FONT ID="LN">2613</FONT><A NAME="2613"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (nread &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2614</FONT><A NAME="2614"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(buf, <FONT ID="IntegerLiteral">0</FONT>, b, off, nread);<br><FONT ID="LN">2615</FONT><A NAME="2615"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2616</FONT><A NAME="2616"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> nread;<br><FONT ID="LN">2617</FONT><A NAME="2617"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2618</FONT><A NAME="2618"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> in.read(b, off, len);<br><FONT ID="LN">2619</FONT><A NAME="2619"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2620</FONT><A NAME="2620"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2621</FONT><A NAME="2621"></A><br><FONT ID="LN">2622</FONT><A NAME="2622"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* ----------------- primitive data input methods ------------------ */</FONT><br><FONT ID="LN">2623</FONT><A NAME="2623"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">2624</FONT><A NAME="2624"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The following methods are equivalent to their counterparts in<br><FONT ID="LN">2625</FONT><A NAME="2625"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* DataInputStream, except that they interpret data block boundaries<br><FONT ID="LN">2626</FONT><A NAME="2626"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* and read the requested data from within data blocks when in block<br><FONT ID="LN">2627</FONT><A NAME="2627"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* data mode.<br><FONT ID="LN">2628</FONT><A NAME="2628"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2629</FONT><A NAME="2629"></A><br><FONT ID="LN">2630</FONT><A NAME="2630"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] b) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2631</FONT><A NAME="2631"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readFully(b, <FONT ID="IntegerLiteral">0</FONT>, b.length, <FONT ID="False">false</FONT>);<br><FONT ID="LN">2632</FONT><A NAME="2632"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2633</FONT><A NAME="2633"></A><br><FONT ID="LN">2634</FONT><A NAME="2634"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2635</FONT><A NAME="2635"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readFully(b, off, len, <FONT ID="False">false</FONT>);<br><FONT ID="LN">2636</FONT><A NAME="2636"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2637</FONT><A NAME="2637"></A><br><FONT ID="LN">2638</FONT><A NAME="2638"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> readFully(<FONT ID="Byte">byte</FONT>[] b, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len, <FONT ID="Boolean">boolean</FONT> copy)<br><FONT ID="LN">2639</FONT><A NAME="2639"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">2640</FONT><A NAME="2640"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">2641</FONT><A NAME="2641"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (len &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2642</FONT><A NAME="2642"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> n = read(b, off, len, copy);<br><FONT ID="LN">2643</FONT><A NAME="2643"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (n &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2644</FONT><A NAME="2644"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2645</FONT><A NAME="2645"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2646</FONT><A NAME="2646"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;off += n;<br><FONT ID="LN">2647</FONT><A NAME="2647"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len -= n;<br><FONT ID="LN">2648</FONT><A NAME="2648"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2649</FONT><A NAME="2649"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2650</FONT><A NAME="2650"></A><br><FONT ID="LN">2651</FONT><A NAME="2651"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> skipBytes(<FONT ID="Int">int</FONT> n) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2652</FONT><A NAME="2652"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.skipBytes(n);<br><FONT ID="LN">2653</FONT><A NAME="2653"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2654</FONT><A NAME="2654"></A><br><FONT ID="LN">2655</FONT><A NAME="2655"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Boolean">boolean</FONT> readBoolean() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2656</FONT><A NAME="2656"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = read();<br><FONT ID="LN">2657</FONT><A NAME="2657"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (v &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2658</FONT><A NAME="2658"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2659</FONT><A NAME="2659"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2660</FONT><A NAME="2660"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (v != <FONT ID="IntegerLiteral">0</FONT>);<br><FONT ID="LN">2661</FONT><A NAME="2661"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2662</FONT><A NAME="2662"></A><br><FONT ID="LN">2663</FONT><A NAME="2663"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Byte">byte</FONT> readByte() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2664</FONT><A NAME="2664"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = read();<br><FONT ID="LN">2665</FONT><A NAME="2665"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (v &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2666</FONT><A NAME="2666"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2667</FONT><A NAME="2667"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2668</FONT><A NAME="2668"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (<FONT ID="Byte">byte</FONT>) v;<br><FONT ID="LN">2669</FONT><A NAME="2669"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2670</FONT><A NAME="2670"></A><br><FONT ID="LN">2671</FONT><A NAME="2671"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readUnsignedByte() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2672</FONT><A NAME="2672"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = read();<br><FONT ID="LN">2673</FONT><A NAME="2673"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (v &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2674</FONT><A NAME="2674"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/EOFException.java.htm">EOFException</A>  <A HREF= "/2608.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2675</FONT><A NAME="2675"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2676</FONT><A NAME="2676"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2677</FONT><A NAME="2677"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2678</FONT><A NAME="2678"></A><br><FONT ID="LN">2679</FONT><A NAME="2679"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Char">char</FONT> readChar() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2680</FONT><A NAME="2680"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2681</FONT><A NAME="2681"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2682</FONT><A NAME="2682"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2683</FONT><A NAME="2683"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2684</FONT><A NAME="2684"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readChar();<br><FONT ID="LN">2685</FONT><A NAME="2685"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2686</FONT><A NAME="2686"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Char">char</FONT> v = Bits.getChar(buf, pos);<br><FONT ID="LN">2687</FONT><A NAME="2687"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2688</FONT><A NAME="2688"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2689</FONT><A NAME="2689"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2690</FONT><A NAME="2690"></A><br><FONT ID="LN">2691</FONT><A NAME="2691"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Short">short</FONT> readShort() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2692</FONT><A NAME="2692"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2693</FONT><A NAME="2693"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2694</FONT><A NAME="2694"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2695</FONT><A NAME="2695"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2696</FONT><A NAME="2696"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readShort();<br><FONT ID="LN">2697</FONT><A NAME="2697"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2698</FONT><A NAME="2698"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Short">short</FONT> v = Bits.getShort(buf, pos);<br><FONT ID="LN">2699</FONT><A NAME="2699"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2700</FONT><A NAME="2700"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2701</FONT><A NAME="2701"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2702</FONT><A NAME="2702"></A><br><FONT ID="LN">2703</FONT><A NAME="2703"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readUnsignedShort() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2704</FONT><A NAME="2704"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2705</FONT><A NAME="2705"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2706</FONT><A NAME="2706"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2707</FONT><A NAME="2707"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2708</FONT><A NAME="2708"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readUnsignedShort();<br><FONT ID="LN">2709</FONT><A NAME="2709"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2710</FONT><A NAME="2710"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = Bits.getShort(buf, pos) &amp; <FONT ID="IntegerLiteral">0xFFFF</FONT>;<br><FONT ID="LN">2711</FONT><A NAME="2711"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2712</FONT><A NAME="2712"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2713</FONT><A NAME="2713"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2714</FONT><A NAME="2714"></A><br><FONT ID="LN">2715</FONT><A NAME="2715"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> readInt() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2716</FONT><A NAME="2716"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2717</FONT><A NAME="2717"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2718</FONT><A NAME="2718"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">4</FONT>);<br><FONT ID="LN">2719</FONT><A NAME="2719"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">2720</FONT><A NAME="2720"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readInt();<br><FONT ID="LN">2721</FONT><A NAME="2721"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2722</FONT><A NAME="2722"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> v = Bits.getInt(buf, pos);<br><FONT ID="LN">2723</FONT><A NAME="2723"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">4</FONT>;<br><FONT ID="LN">2724</FONT><A NAME="2724"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2725</FONT><A NAME="2725"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2726</FONT><A NAME="2726"></A><br><FONT ID="LN">2727</FONT><A NAME="2727"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Float">float</FONT> readFloat() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2728</FONT><A NAME="2728"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2729</FONT><A NAME="2729"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2730</FONT><A NAME="2730"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">4</FONT>);<br><FONT ID="LN">2731</FONT><A NAME="2731"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">2732</FONT><A NAME="2732"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readFloat();<br><FONT ID="LN">2733</FONT><A NAME="2733"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2734</FONT><A NAME="2734"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Float">float</FONT> v = Bits.getFloat(buf, pos);<br><FONT ID="LN">2735</FONT><A NAME="2735"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">4</FONT>;<br><FONT ID="LN">2736</FONT><A NAME="2736"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2737</FONT><A NAME="2737"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2738</FONT><A NAME="2738"></A><br><FONT ID="LN">2739</FONT><A NAME="2739"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Long">long</FONT> readLong() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2740</FONT><A NAME="2740"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2741</FONT><A NAME="2741"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2742</FONT><A NAME="2742"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">8</FONT>);<br><FONT ID="LN">2743</FONT><A NAME="2743"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">8</FONT>) {<br><FONT ID="LN">2744</FONT><A NAME="2744"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readLong();<br><FONT ID="LN">2745</FONT><A NAME="2745"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2746</FONT><A NAME="2746"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Long">long</FONT> v = Bits.getLong(buf, pos);<br><FONT ID="LN">2747</FONT><A NAME="2747"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">8</FONT>;<br><FONT ID="LN">2748</FONT><A NAME="2748"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2749</FONT><A NAME="2749"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2750</FONT><A NAME="2750"></A><br><FONT ID="LN">2751</FONT><A NAME="2751"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Double">double</FONT> readDouble() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2752</FONT><A NAME="2752"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2753</FONT><A NAME="2753"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2754</FONT><A NAME="2754"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, <FONT ID="IntegerLiteral">8</FONT>);<br><FONT ID="LN">2755</FONT><A NAME="2755"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">8</FONT>) {<br><FONT ID="LN">2756</FONT><A NAME="2756"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readDouble();<br><FONT ID="LN">2757</FONT><A NAME="2757"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2758</FONT><A NAME="2758"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Double">double</FONT> v = Bits.getDouble(buf, pos);<br><FONT ID="LN">2759</FONT><A NAME="2759"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">8</FONT>;<br><FONT ID="LN">2760</FONT><A NAME="2760"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> v;<br><FONT ID="LN">2761</FONT><A NAME="2761"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2762</FONT><A NAME="2762"></A><br><FONT ID="LN">2763</FONT><A NAME="2763"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readUTF() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2764</FONT><A NAME="2764"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readUTFBody(readUnsignedShort());<br><FONT ID="LN">2765</FONT><A NAME="2765"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2766</FONT><A NAME="2766"></A><br><FONT ID="LN">2767</FONT><A NAME="2767"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readLine() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2768</FONT><A NAME="2768"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> din.readLine();  <FONT ID="SingleLineComment">// deprecated, not worth optimizing<br><FONT ID="LN">2769</FONT><A NAME="2769"></A></FONT>    }<br><FONT ID="LN">2770</FONT><A NAME="2770"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2771</FONT><A NAME="2771"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* -------------- primitive data array input methods --------------- */</FONT><br><FONT ID="LN">2772</FONT><A NAME="2772"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">2773</FONT><A NAME="2773"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The following methods read in spans of primitive data values.<br><FONT ID="LN">2774</FONT><A NAME="2774"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Though equivalent to calling the corresponding primitive read<br><FONT ID="LN">2775</FONT><A NAME="2775"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* methods repeatedly, these methods are optimized for reading groups<br><FONT ID="LN">2776</FONT><A NAME="2776"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* of primitive data values more efficiently.<br><FONT ID="LN">2777</FONT><A NAME="2777"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2778</FONT><A NAME="2778"></A><br><FONT ID="LN">2779</FONT><A NAME="2779"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readBooleans(<FONT ID="Boolean">boolean</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2780</FONT><A NAME="2780"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> stop, endoff = off + len;<br><FONT ID="LN">2781</FONT><A NAME="2781"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2782</FONT><A NAME="2782"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2783</FONT><A NAME="2783"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span = Math.min(endoff - off, MAX_BLOCK_SIZE);<br><FONT ID="LN">2784</FONT><A NAME="2784"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span);<br><FONT ID="LN">2785</FONT><A NAME="2785"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = off + span;<br><FONT ID="LN">2786</FONT><A NAME="2786"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2787</FONT><A NAME="2787"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">1</FONT>) {<br><FONT ID="LN">2788</FONT><A NAME="2788"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readBoolean();<br><FONT ID="LN">2789</FONT><A NAME="2789"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2790</FONT><A NAME="2790"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2791</FONT><A NAME="2791"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = Math.min(endoff, off + end - pos);<br><FONT ID="LN">2792</FONT><A NAME="2792"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2793</FONT><A NAME="2793"></A><br><FONT ID="LN">2794</FONT><A NAME="2794"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; stop) {<br><FONT ID="LN">2795</FONT><A NAME="2795"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = Bits.getBoolean(buf, pos++);<br><FONT ID="LN">2796</FONT><A NAME="2796"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2797</FONT><A NAME="2797"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2798</FONT><A NAME="2798"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2799</FONT><A NAME="2799"></A><br><FONT ID="LN">2800</FONT><A NAME="2800"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readChars(<FONT ID="Char">char</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2801</FONT><A NAME="2801"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> stop, endoff = off + len;<br><FONT ID="LN">2802</FONT><A NAME="2802"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2803</FONT><A NAME="2803"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2804</FONT><A NAME="2804"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">2805</FONT><A NAME="2805"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">2806</FONT><A NAME="2806"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = off + span;<br><FONT ID="LN">2807</FONT><A NAME="2807"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2808</FONT><A NAME="2808"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2809</FONT><A NAME="2809"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readChar();<br><FONT ID="LN">2810</FONT><A NAME="2810"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2811</FONT><A NAME="2811"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2812</FONT><A NAME="2812"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = Math.min(endoff, off + ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">1</FONT>));<br><FONT ID="LN">2813</FONT><A NAME="2813"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2814</FONT><A NAME="2814"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2815</FONT><A NAME="2815"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; stop) {<br><FONT ID="LN">2816</FONT><A NAME="2816"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = Bits.getChar(buf, pos);<br><FONT ID="LN">2817</FONT><A NAME="2817"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2818</FONT><A NAME="2818"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2819</FONT><A NAME="2819"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2820</FONT><A NAME="2820"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2821</FONT><A NAME="2821"></A><br><FONT ID="LN">2822</FONT><A NAME="2822"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readShorts(<FONT ID="Short">short</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2823</FONT><A NAME="2823"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> stop, endoff = off + len;<br><FONT ID="LN">2824</FONT><A NAME="2824"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2825</FONT><A NAME="2825"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2826</FONT><A NAME="2826"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">2827</FONT><A NAME="2827"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">1</FONT>);<br><FONT ID="LN">2828</FONT><A NAME="2828"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = off + span;<br><FONT ID="LN">2829</FONT><A NAME="2829"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2830</FONT><A NAME="2830"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">2831</FONT><A NAME="2831"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readShort();<br><FONT ID="LN">2832</FONT><A NAME="2832"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2833</FONT><A NAME="2833"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2834</FONT><A NAME="2834"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = Math.min(endoff, off + ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">1</FONT>));<br><FONT ID="LN">2835</FONT><A NAME="2835"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2836</FONT><A NAME="2836"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2837</FONT><A NAME="2837"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; stop) {<br><FONT ID="LN">2838</FONT><A NAME="2838"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = Bits.getShort(buf, pos);<br><FONT ID="LN">2839</FONT><A NAME="2839"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2840</FONT><A NAME="2840"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2841</FONT><A NAME="2841"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2842</FONT><A NAME="2842"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2843</FONT><A NAME="2843"></A><br><FONT ID="LN">2844</FONT><A NAME="2844"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readInts(<FONT ID="Int">int</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2845</FONT><A NAME="2845"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> stop, endoff = off + len;<br><FONT ID="LN">2846</FONT><A NAME="2846"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2847</FONT><A NAME="2847"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2848</FONT><A NAME="2848"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2849</FONT><A NAME="2849"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2850</FONT><A NAME="2850"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = off + span;<br><FONT ID="LN">2851</FONT><A NAME="2851"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2852</FONT><A NAME="2852"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">2853</FONT><A NAME="2853"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readInt();<br><FONT ID="LN">2854</FONT><A NAME="2854"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2855</FONT><A NAME="2855"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2856</FONT><A NAME="2856"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = Math.min(endoff, off + ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">2</FONT>));<br><FONT ID="LN">2857</FONT><A NAME="2857"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2858</FONT><A NAME="2858"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2859</FONT><A NAME="2859"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; stop) {<br><FONT ID="LN">2860</FONT><A NAME="2860"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = Bits.getInt(buf, pos);<br><FONT ID="LN">2861</FONT><A NAME="2861"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">4</FONT>;<br><FONT ID="LN">2862</FONT><A NAME="2862"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2863</FONT><A NAME="2863"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2864</FONT><A NAME="2864"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2865</FONT><A NAME="2865"></A><br><FONT ID="LN">2866</FONT><A NAME="2866"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readFloats(<FONT ID="Float">float</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2867</FONT><A NAME="2867"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span, endoff = off + len;<br><FONT ID="LN">2868</FONT><A NAME="2868"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2869</FONT><A NAME="2869"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2870</FONT><A NAME="2870"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2871</FONT><A NAME="2871"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">2</FONT>);<br><FONT ID="LN">2872</FONT><A NAME="2872"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2873</FONT><A NAME="2873"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">2874</FONT><A NAME="2874"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readFloat();<br><FONT ID="LN">2875</FONT><A NAME="2875"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2876</FONT><A NAME="2876"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2877</FONT><A NAME="2877"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = Math.min(endoff - off, ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">2</FONT>));<br><FONT ID="LN">2878</FONT><A NAME="2878"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2879</FONT><A NAME="2879"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2880</FONT><A NAME="2880"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytesToFloats(buf, pos, v, off, span);<br><FONT ID="LN">2881</FONT><A NAME="2881"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;off += span;<br><FONT ID="LN">2882</FONT><A NAME="2882"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += span &lt;&lt; <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">2883</FONT><A NAME="2883"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2884</FONT><A NAME="2884"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2885</FONT><A NAME="2885"></A><br><FONT ID="LN">2886</FONT><A NAME="2886"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readLongs(<FONT ID="Long">long</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2887</FONT><A NAME="2887"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> stop, endoff = off + len;<br><FONT ID="LN">2888</FONT><A NAME="2888"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2889</FONT><A NAME="2889"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2890</FONT><A NAME="2890"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">3</FONT>);<br><FONT ID="LN">2891</FONT><A NAME="2891"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">3</FONT>);<br><FONT ID="LN">2892</FONT><A NAME="2892"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = off + span;<br><FONT ID="LN">2893</FONT><A NAME="2893"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2894</FONT><A NAME="2894"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">8</FONT>) {<br><FONT ID="LN">2895</FONT><A NAME="2895"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readLong();<br><FONT ID="LN">2896</FONT><A NAME="2896"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2897</FONT><A NAME="2897"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2898</FONT><A NAME="2898"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop = Math.min(endoff, off + ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">3</FONT>));<br><FONT ID="LN">2899</FONT><A NAME="2899"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2900</FONT><A NAME="2900"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2901</FONT><A NAME="2901"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; stop) {<br><FONT ID="LN">2902</FONT><A NAME="2902"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = Bits.getLong(buf, pos);<br><FONT ID="LN">2903</FONT><A NAME="2903"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">8</FONT>;<br><FONT ID="LN">2904</FONT><A NAME="2904"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2905</FONT><A NAME="2905"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2906</FONT><A NAME="2906"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2907</FONT><A NAME="2907"></A><br><FONT ID="LN">2908</FONT><A NAME="2908"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> readDoubles(<FONT ID="Double">double</FONT>[] v, <FONT ID="Int">int</FONT> off, <FONT ID="Int">int</FONT> len) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2909</FONT><A NAME="2909"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> span, endoff = off + len;<br><FONT ID="LN">2910</FONT><A NAME="2910"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (off &lt; endoff) {<br><FONT ID="LN">2911</FONT><A NAME="2911"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2912</FONT><A NAME="2912"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = Math.min(endoff - off, MAX_BLOCK_SIZE &gt;&gt; <FONT ID="IntegerLiteral">3</FONT>);<br><FONT ID="LN">2913</FONT><A NAME="2913"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, <FONT ID="IntegerLiteral">0</FONT>, span &lt;&lt; <FONT ID="IntegerLiteral">3</FONT>);<br><FONT ID="LN">2914</FONT><A NAME="2914"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2915</FONT><A NAME="2915"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (end - pos &lt; <FONT ID="IntegerLiteral">8</FONT>) {<br><FONT ID="LN">2916</FONT><A NAME="2916"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v[off++] = din.readDouble();<br><FONT ID="LN">2917</FONT><A NAME="2917"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Continue">continue</FONT>;<br><FONT ID="LN">2918</FONT><A NAME="2918"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2919</FONT><A NAME="2919"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span = Math.min(endoff - off, ((end - pos) &gt;&gt; <FONT ID="IntegerLiteral">3</FONT>));<br><FONT ID="LN">2920</FONT><A NAME="2920"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2921</FONT><A NAME="2921"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">2922</FONT><A NAME="2922"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bytesToDoubles(buf, pos, v, off, span);<br><FONT ID="LN">2923</FONT><A NAME="2923"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;off += span;<br><FONT ID="LN">2924</FONT><A NAME="2924"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += span &lt;&lt; <FONT ID="IntegerLiteral">3</FONT>;<br><FONT ID="LN">2925</FONT><A NAME="2925"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2926</FONT><A NAME="2926"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2927</FONT><A NAME="2927"></A><br><FONT ID="LN">2928</FONT><A NAME="2928"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2929</FONT><A NAME="2929"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in string written in "long" UTF format.  "Long" UTF format is<br><FONT ID="LN">2930</FONT><A NAME="2930"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* identical to standard UTF, except that it uses an 8 byte header<br><FONT ID="LN">2931</FONT><A NAME="2931"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (instead of the standard 2 bytes) to convey the UTF encoding length.<br><FONT ID="LN">2932</FONT><A NAME="2932"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2933</FONT><A NAME="2933"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readLongUTF() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2934</FONT><A NAME="2934"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> readUTFBody(readLong());<br><FONT ID="LN">2935</FONT><A NAME="2935"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2936</FONT><A NAME="2936"></A><br><FONT ID="LN">2937</FONT><A NAME="2937"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2938</FONT><A NAME="2938"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in the "body" (i.e., the UTF representation minus the 2-byte<br><FONT ID="LN">2939</FONT><A NAME="2939"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* or 8-byte length header) of a UTF encoding, which occupies the next<br><FONT ID="LN">2940</FONT><A NAME="2940"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* utflen bytes.<br><FONT ID="LN">2941</FONT><A NAME="2941"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2942</FONT><A NAME="2942"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <A HREF="../../java/lang/String.java.htm">String</A>  <A HREF= "/777.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> readUTFBody(<FONT ID="Long">long</FONT> utflen) <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">2943</FONT><A NAME="2943"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/StringBuffer.java.htm">StringBuffer</A>  <A HREF= "/508.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sbuf = <FONT ID="New">new</FONT> <A HREF="../../java/lang/StringBuffer.java.htm">StringBuffer</A>  <A HREF= "/508.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">2944</FONT><A NAME="2944"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!blkmode) {<br><FONT ID="LN">2945</FONT><A NAME="2945"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2946</FONT><A NAME="2946"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2947</FONT><A NAME="2947"></A><br><FONT ID="LN">2948</FONT><A NAME="2948"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (utflen &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2949</FONT><A NAME="2949"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> avail = end - pos;<br><FONT ID="LN">2950</FONT><A NAME="2950"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (avail &gt;= <FONT ID="IntegerLiteral">3</FONT> || (<FONT ID="Long">long</FONT>) avail == utflen) {<br><FONT ID="LN">2951</FONT><A NAME="2951"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;utflen -= readUTFSpan(sbuf, utflen);<br><FONT ID="LN">2952</FONT><A NAME="2952"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2953</FONT><A NAME="2953"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (blkmode) {<br><FONT ID="LN">2954</FONT><A NAME="2954"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// near block boundary, read one byte at a time<br><FONT ID="LN">2955</FONT><A NAME="2955"></A></FONT>            utflen -= readUTFChar(sbuf, utflen);<br><FONT ID="LN">2956</FONT><A NAME="2956"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">2957</FONT><A NAME="2957"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// shift and refill buffer manually<br><FONT ID="LN">2958</FONT><A NAME="2958"></A></FONT>            <FONT ID="If">if</FONT> (avail &gt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">2959</FONT><A NAME="2959"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(buf, pos, buf, <FONT ID="IntegerLiteral">0</FONT>, avail);<br><FONT ID="LN">2960</FONT><A NAME="2960"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2961</FONT><A NAME="2961"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2962</FONT><A NAME="2962"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end = (<FONT ID="Int">int</FONT>) Math.min(MAX_BLOCK_SIZE, utflen);<br><FONT ID="LN">2963</FONT><A NAME="2963"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in.readFully(buf, avail, end - avail);<br><FONT ID="LN">2964</FONT><A NAME="2964"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2965</FONT><A NAME="2965"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2966</FONT><A NAME="2966"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2967</FONT><A NAME="2967"></A><br><FONT ID="LN">2968</FONT><A NAME="2968"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> sbuf.toString();<br><FONT ID="LN">2969</FONT><A NAME="2969"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">2970</FONT><A NAME="2970"></A><br><FONT ID="LN">2971</FONT><A NAME="2971"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">2972</FONT><A NAME="2972"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads span of UTF-encoded characters out of internal buffer<br><FONT ID="LN">2973</FONT><A NAME="2973"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (starting at offset pos and ending at or before offset end),<br><FONT ID="LN">2974</FONT><A NAME="2974"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* consuming no more than utflen bytes.  Appends read characters to<br><FONT ID="LN">2975</FONT><A NAME="2975"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* sbuf.  Returns the number of bytes consumed.<br><FONT ID="LN">2976</FONT><A NAME="2976"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">2977</FONT><A NAME="2977"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Long">long</FONT> readUTFSpan(<A HREF="../../java/lang/StringBuffer.java.htm">StringBuffer</A>  <A HREF= "/508.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sbuf, <FONT ID="Long">long</FONT> utflen) <br><FONT ID="LN">2978</FONT><A NAME="2978"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">2979</FONT><A NAME="2979"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">2980</FONT><A NAME="2980"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> cpos = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">2981</FONT><A NAME="2981"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> start = pos;<br><FONT ID="LN">2982</FONT><A NAME="2982"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> avail = Math.min(end - pos, CHAR_BUF_SIZE);<br><FONT ID="LN">2983</FONT><A NAME="2983"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// stop short of last char unless all of utf bytes in buffer<br><FONT ID="LN">2984</FONT><A NAME="2984"></A></FONT>        <FONT ID="Int">int</FONT> stop = pos + ((utflen &gt; avail) ? avail - <FONT ID="IntegerLiteral">2</FONT> : (<FONT ID="Int">int</FONT>) utflen);<br><FONT ID="LN">2985</FONT><A NAME="2985"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Boolean">boolean</FONT> outOfBounds = <FONT ID="False">false</FONT>;<br><FONT ID="LN">2986</FONT><A NAME="2986"></A><br><FONT ID="LN">2987</FONT><A NAME="2987"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Try">try</FONT> {<br><FONT ID="LN">2988</FONT><A NAME="2988"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="While">while</FONT> (pos &lt; stop) {<br><FONT ID="LN">2989</FONT><A NAME="2989"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> b1, b2, b3;<br><FONT ID="LN">2990</FONT><A NAME="2990"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b1 = buf[pos++] &amp; <FONT ID="IntegerLiteral">0xFF</FONT>;<br><FONT ID="LN">2991</FONT><A NAME="2991"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (b1 &gt;&gt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">2992</FONT><A NAME="2992"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">0</FONT>:<br><FONT ID="LN">2993</FONT><A NAME="2993"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">1</FONT>:<br><FONT ID="LN">2994</FONT><A NAME="2994"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">2</FONT>:<br><FONT ID="LN">2995</FONT><A NAME="2995"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">3</FONT>:<br><FONT ID="LN">2996</FONT><A NAME="2996"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">4</FONT>:<br><FONT ID="LN">2997</FONT><A NAME="2997"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">5</FONT>:<br><FONT ID="LN">2998</FONT><A NAME="2998"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">6</FONT>:<br><FONT ID="LN">2999</FONT><A NAME="2999"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">7</FONT>:   <FONT ID="SingleLineComment">// 1 byte format: 0xxxxxxx<br><FONT ID="LN">3000</FONT><A NAME="3000"></A></FONT>                cbuf[cpos++] = (<FONT ID="Char">char</FONT>) b1;<br><FONT ID="LN">3001</FONT><A NAME="3001"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3002</FONT><A NAME="3002"></A><br><FONT ID="LN">3003</FONT><A NAME="3003"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">12</FONT>:<br><FONT ID="LN">3004</FONT><A NAME="3004"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">13</FONT>:  <FONT ID="SingleLineComment">// 2 byte format: 110xxxxx 10xxxxxx<br><FONT ID="LN">3005</FONT><A NAME="3005"></A></FONT>                b2 = buf[pos++];<br><FONT ID="LN">3006</FONT><A NAME="3006"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((b2 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT>) {<br><FONT ID="LN">3007</FONT><A NAME="3007"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3008</FONT><A NAME="3008"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3009</FONT><A NAME="3009"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbuf[cpos++] = (<FONT ID="Char">char</FONT>) (((b1 &amp; <FONT ID="IntegerLiteral">0x1F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">6</FONT>) | <br><FONT ID="LN">3010</FONT><A NAME="3010"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b2 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">0</FONT>));<br><FONT ID="LN">3011</FONT><A NAME="3011"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3012</FONT><A NAME="3012"></A><br><FONT ID="LN">3013</FONT><A NAME="3013"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">14</FONT>:  <FONT ID="SingleLineComment">// 3 byte format: 1110xxxx 10xxxxxx 10xxxxxx<br><FONT ID="LN">3014</FONT><A NAME="3014"></A></FONT>                b3 = buf[pos + <FONT ID="IntegerLiteral">1</FONT>];<br><FONT ID="LN">3015</FONT><A NAME="3015"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b2 = buf[pos + <FONT ID="IntegerLiteral">0</FONT>];<br><FONT ID="LN">3016</FONT><A NAME="3016"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos += <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">3017</FONT><A NAME="3017"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((b2 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT> || (b3 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT>) {<br><FONT ID="LN">3018</FONT><A NAME="3018"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3019</FONT><A NAME="3019"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3020</FONT><A NAME="3020"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cbuf[cpos++] = (<FONT ID="Char">char</FONT>) (((b1 &amp; <FONT ID="IntegerLiteral">0x0F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">12</FONT>) | <br><FONT ID="LN">3021</FONT><A NAME="3021"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b2 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">6</FONT>) | <br><FONT ID="LN">3022</FONT><A NAME="3022"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b3 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">0</FONT>));<br><FONT ID="LN">3023</FONT><A NAME="3023"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3024</FONT><A NAME="3024"></A><br><FONT ID="LN">3025</FONT><A NAME="3025"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:  <FONT ID="SingleLineComment">// 10xx xxxx, 1111 xxxx<br><FONT ID="LN">3026</FONT><A NAME="3026"></A></FONT>                <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3027</FONT><A NAME="3027"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3028</FONT><A NAME="3028"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3029</FONT><A NAME="3029"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Catch">catch</FONT> (<A HREF="../../java/lang/ArrayIndexOutOfBoundsException.java.htm">ArrayIndexOutOfBoundsException</A>  <A HREF= "/546.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">3030</FONT><A NAME="3030"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outOfBounds = <FONT ID="True">true</FONT>;<br><FONT ID="LN">3031</FONT><A NAME="3031"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Finally">finally</FONT> {<br><FONT ID="LN">3032</FONT><A NAME="3032"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (outOfBounds || (pos - start) &gt; utflen) {<br><FONT ID="LN">3033</FONT><A NAME="3033"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/*<br><FONT ID="LN">3034</FONT><A NAME="3034"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Fix for 4450867: if a malformed utf char causes the<br><FONT ID="LN">3035</FONT><A NAME="3035"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* conversion loop to scan past the expected end of the utf<br><FONT ID="LN">3036</FONT><A NAME="3036"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* string, only consume the expected number of utf bytes.<br><FONT ID="LN">3037</FONT><A NAME="3037"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3038</FONT><A NAME="3038"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos = start + (<FONT ID="Int">int</FONT>) utflen;<br><FONT ID="LN">3039</FONT><A NAME="3039"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3040</FONT><A NAME="3040"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3041</FONT><A NAME="3041"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3042</FONT><A NAME="3042"></A><br><FONT ID="LN">3043</FONT><A NAME="3043"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sbuf.append(cbuf, <FONT ID="IntegerLiteral">0</FONT>, cpos);<br><FONT ID="LN">3044</FONT><A NAME="3044"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> pos - start;<br><FONT ID="LN">3045</FONT><A NAME="3045"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3046</FONT><A NAME="3046"></A><br><FONT ID="LN">3047</FONT><A NAME="3047"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3048</FONT><A NAME="3048"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Reads in single UTF-encoded character one byte at a time, appends<br><FONT ID="LN">3049</FONT><A NAME="3049"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the character to sbuf, and returns the number of bytes consumed.<br><FONT ID="LN">3050</FONT><A NAME="3050"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method is used when reading in UTF strings written in block<br><FONT ID="LN">3051</FONT><A NAME="3051"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* data mode to handle UTF-encoded characters which (potentially)<br><FONT ID="LN">3052</FONT><A NAME="3052"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* straddle block-data boundaries.<br><FONT ID="LN">3053</FONT><A NAME="3053"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3054</FONT><A NAME="3054"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> readUTFChar(<A HREF="../../java/lang/StringBuffer.java.htm">StringBuffer</A>  <A HREF= "/508.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> sbuf, <FONT ID="Long">long</FONT> utflen) <br><FONT ID="LN">3055</FONT><A NAME="3055"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throws">throws</FONT> <A HREF="../../java/io/IOException.java.htm">IOException</A>  <A HREF= "/2848.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A><br><FONT ID="LN">3056</FONT><A NAME="3056"></A>&nbsp;&nbsp;&nbsp;&nbsp;{<br><FONT ID="LN">3057</FONT><A NAME="3057"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> b1, b2, b3;<br><FONT ID="LN">3058</FONT><A NAME="3058"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b1 = readByte() &amp; <FONT ID="IntegerLiteral">0xFF</FONT>;<br><FONT ID="LN">3059</FONT><A NAME="3059"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (b1 &gt;&gt; <FONT ID="IntegerLiteral">4</FONT>) {<br><FONT ID="LN">3060</FONT><A NAME="3060"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">0</FONT>:<br><FONT ID="LN">3061</FONT><A NAME="3061"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">1</FONT>:<br><FONT ID="LN">3062</FONT><A NAME="3062"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">2</FONT>:<br><FONT ID="LN">3063</FONT><A NAME="3063"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">3</FONT>:<br><FONT ID="LN">3064</FONT><A NAME="3064"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">4</FONT>:<br><FONT ID="LN">3065</FONT><A NAME="3065"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">5</FONT>:<br><FONT ID="LN">3066</FONT><A NAME="3066"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">6</FONT>:<br><FONT ID="LN">3067</FONT><A NAME="3067"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">7</FONT>:     <FONT ID="SingleLineComment">// 1 byte format: 0xxxxxxx<br><FONT ID="LN">3068</FONT><A NAME="3068"></A></FONT>            sbuf.append((<FONT ID="Char">char</FONT>) b1);<br><FONT ID="LN">3069</FONT><A NAME="3069"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3070</FONT><A NAME="3070"></A><br><FONT ID="LN">3071</FONT><A NAME="3071"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">12</FONT>:<br><FONT ID="LN">3072</FONT><A NAME="3072"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">13</FONT>:    <FONT ID="SingleLineComment">// 2 byte format: 110xxxxx 10xxxxxx<br><FONT ID="LN">3073</FONT><A NAME="3073"></A></FONT>            <FONT ID="If">if</FONT> (utflen &lt; <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">3074</FONT><A NAME="3074"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3075</FONT><A NAME="3075"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3076</FONT><A NAME="3076"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b2 = readByte();<br><FONT ID="LN">3077</FONT><A NAME="3077"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((b2 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT>) {<br><FONT ID="LN">3078</FONT><A NAME="3078"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3079</FONT><A NAME="3079"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3080</FONT><A NAME="3080"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sbuf.append((<FONT ID="Char">char</FONT>) (((b1 &amp; <FONT ID="IntegerLiteral">0x1F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">6</FONT>) | <br><FONT ID="LN">3081</FONT><A NAME="3081"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b2 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">0</FONT>)));<br><FONT ID="LN">3082</FONT><A NAME="3082"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">3083</FONT><A NAME="3083"></A><br><FONT ID="LN">3084</FONT><A NAME="3084"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> <FONT ID="IntegerLiteral">14</FONT>:    <FONT ID="SingleLineComment">// 3 byte format: 1110xxxx 10xxxxxx 10xxxxxx<br><FONT ID="LN">3085</FONT><A NAME="3085"></A></FONT>            <FONT ID="If">if</FONT> (utflen &lt; <FONT ID="IntegerLiteral">3</FONT>) {<br><FONT ID="LN">3086</FONT><A NAME="3086"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (utflen == <FONT ID="IntegerLiteral">2</FONT>) {<br><FONT ID="LN">3087</FONT><A NAME="3087"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readByte();     <FONT ID="SingleLineComment">// consume remaining byte<br><FONT ID="LN">3088</FONT><A NAME="3088"></A></FONT>            }<br><FONT ID="LN">3089</FONT><A NAME="3089"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3090</FONT><A NAME="3090"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3091</FONT><A NAME="3091"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b2 = readByte();<br><FONT ID="LN">3092</FONT><A NAME="3092"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b3 = readByte();<br><FONT ID="LN">3093</FONT><A NAME="3093"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> ((b2 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT> || (b3 &amp; <FONT ID="IntegerLiteral">0xC0</FONT>) != <FONT ID="IntegerLiteral">0x80</FONT>) {<br><FONT ID="LN">3094</FONT><A NAME="3094"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3095</FONT><A NAME="3095"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3096</FONT><A NAME="3096"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sbuf.append((<FONT ID="Char">char</FONT>) (((b1 &amp; <FONT ID="IntegerLiteral">0x0F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">12</FONT>) | <br><FONT ID="LN">3097</FONT><A NAME="3097"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b2 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">6</FONT>) | <br><FONT ID="LN">3098</FONT><A NAME="3098"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((b3 &amp; <FONT ID="IntegerLiteral">0x3F</FONT>) &lt;&lt; <FONT ID="IntegerLiteral">0</FONT>)));<br><FONT ID="LN">3099</FONT><A NAME="3099"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> <FONT ID="IntegerLiteral">3</FONT>;<br><FONT ID="LN">3100</FONT><A NAME="3100"></A><br><FONT ID="LN">3101</FONT><A NAME="3101"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:   <FONT ID="SingleLineComment">// 10xx xxxx, 1111 xxxx<br><FONT ID="LN">3102</FONT><A NAME="3102"></A></FONT>            <FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/UTFDataFormatException.java.htm">UTFDataFormatException</A>  <A HREF= "/2268.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3103</FONT><A NAME="3103"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3104</FONT><A NAME="3104"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3105</FONT><A NAME="3105"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3106</FONT><A NAME="3106"></A><br><FONT ID="LN">3107</FONT><A NAME="3107"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3108</FONT><A NAME="3108"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Unsynchronized table which tracks wire handle to object mappings, as<br><FONT ID="LN">3109</FONT><A NAME="3109"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* well as ClassNotFoundExceptions associated with deserialized objects.<br><FONT ID="LN">3110</FONT><A NAME="3110"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This class implements an exception-propagation algorithm for<br><FONT ID="LN">3111</FONT><A NAME="3111"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* determining which objects should have ClassNotFoundExceptions associated<br><FONT ID="LN">3112</FONT><A NAME="3112"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* with them, taking into account cycles and discontinuities (e.g., skipped<br><FONT ID="LN">3113</FONT><A NAME="3113"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* fields) in the object graph.<br><FONT ID="LN">3114</FONT><A NAME="3114"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">3115</FONT><A NAME="3115"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;General use of the table is as follows: during deserialization, a<br><FONT ID="LN">3116</FONT><A NAME="3116"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* given object is first assigned a handle by calling the assign method.<br><FONT ID="LN">3117</FONT><A NAME="3117"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method leaves the assigned handle in an "open" state, wherein<br><FONT ID="LN">3118</FONT><A NAME="3118"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* dependencies on the exception status of other handles can be registered<br><FONT ID="LN">3119</FONT><A NAME="3119"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* by calling the markDependency method, or an exception can be directly<br><FONT ID="LN">3120</FONT><A NAME="3120"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with the handle by calling markException.  When a handle is<br><FONT ID="LN">3121</FONT><A NAME="3121"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* tagged with an exception, the HandleTable assumes responsibility for<br><FONT ID="LN">3122</FONT><A NAME="3122"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* propagating the exception to any other objects which depend<br><FONT ID="LN">3123</FONT><A NAME="3123"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* (transitively) on the exception-tagged object.<br><FONT ID="LN">3124</FONT><A NAME="3124"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">3125</FONT><A NAME="3125"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;Once all exception information/dependencies for the handle have been<br><FONT ID="LN">3126</FONT><A NAME="3126"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* registered, the handle should be "closed" by calling the finish method<br><FONT ID="LN">3127</FONT><A NAME="3127"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* on it.  The act of finishing a handle allows the exception propagation<br><FONT ID="LN">3128</FONT><A NAME="3128"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* algorithm to aggressively prune dependency links, lessening the<br><FONT ID="LN">3129</FONT><A NAME="3129"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* performance/memory impact of exception tracking.<br><FONT ID="LN">3130</FONT><A NAME="3130"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <br><FONT ID="LN">3131</FONT><A NAME="3131"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* &lt;p&gt;Note that the exception propagation algorithm used depends on handles<br><FONT ID="LN">3132</FONT><A NAME="3132"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* being assigned/finished in LIFO order; however, for simplicity as well<br><FONT ID="LN">3133</FONT><A NAME="3133"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* as memory conservation, it does not enforce this constraint.<br><FONT ID="LN">3134</FONT><A NAME="3134"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3135</FONT><A NAME="3135"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// REMIND: add full description of exception propagation algorithm?<br><FONT ID="LN">3136</FONT><A NAME="3136"></A></FONT>    <FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> HandleTable {<br><FONT ID="LN">3137</FONT><A NAME="3137"></A><br><FONT ID="LN">3138</FONT><A NAME="3138"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="MultiLineComment">/* status codes indicating whether object has associated exception */</FONT><br><FONT ID="LN">3139</FONT><A NAME="3139"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT> STATUS_OK = <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3140</FONT><A NAME="3140"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT> STATUS_UNKNOWN = <FONT ID="IntegerLiteral">2</FONT>;<br><FONT ID="LN">3141</FONT><A NAME="3141"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Final">final</FONT> <FONT ID="Byte">byte</FONT> STATUS_EXCEPTION = <FONT ID="IntegerLiteral">3</FONT>;<br><FONT ID="LN">3142</FONT><A NAME="3142"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3143</FONT><A NAME="3143"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** array mapping handle -&gt; object status */</FONT><br><FONT ID="LN">3144</FONT><A NAME="3144"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Byte">byte</FONT>[] status;<br><FONT ID="LN">3145</FONT><A NAME="3145"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** array mapping handle -&gt; object/exception (depending on status) */</FONT><br><FONT ID="LN">3146</FONT><A NAME="3146"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] entries;<br><FONT ID="LN">3147</FONT><A NAME="3147"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** array mapping handle -&gt; list of dependent handles (if any) */</FONT><br><FONT ID="LN">3148</FONT><A NAME="3148"></A>&nbsp;&nbsp;&nbsp;&nbsp;HandleList[] deps;<br><FONT ID="LN">3149</FONT><A NAME="3149"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** lowest unresolved dependency */</FONT><br><FONT ID="LN">3150</FONT><A NAME="3150"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> lowDep = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3151</FONT><A NAME="3151"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/** number of handles in table */</FONT><br><FONT ID="LN">3152</FONT><A NAME="3152"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> size = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">3153</FONT><A NAME="3153"></A><br><FONT ID="LN">3154</FONT><A NAME="3154"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3155</FONT><A NAME="3155"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Creates handle table with the given initial capacity.<br><FONT ID="LN">3156</FONT><A NAME="3156"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3157</FONT><A NAME="3157"></A>&nbsp;&nbsp;&nbsp;&nbsp;HandleTable(<FONT ID="Int">int</FONT> initialCapacity) {<br><FONT ID="LN">3158</FONT><A NAME="3158"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[initialCapacity];<br><FONT ID="LN">3159</FONT><A NAME="3159"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[initialCapacity];<br><FONT ID="LN">3160</FONT><A NAME="3160"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps = <FONT ID="New">new</FONT> HandleList[initialCapacity];<br><FONT ID="LN">3161</FONT><A NAME="3161"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3162</FONT><A NAME="3162"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3163</FONT><A NAME="3163"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3164</FONT><A NAME="3164"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Assigns next available handle to given object, and returns assigned<br><FONT ID="LN">3165</FONT><A NAME="3165"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* handle.  Once object has been completely deserialized (and all<br><FONT ID="LN">3166</FONT><A NAME="3166"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* dependencies on other objects identified), the handle should be<br><FONT ID="LN">3167</FONT><A NAME="3167"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "closed" by passing it to finish().<br><FONT ID="LN">3168</FONT><A NAME="3168"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3169</FONT><A NAME="3169"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> assign(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj) {<br><FONT ID="LN">3170</FONT><A NAME="3170"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (size &gt;= entries.length) {<br><FONT ID="LN">3171</FONT><A NAME="3171"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grow();<br><FONT ID="LN">3172</FONT><A NAME="3172"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3173</FONT><A NAME="3173"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status[size] = STATUS_UNKNOWN;<br><FONT ID="LN">3174</FONT><A NAME="3174"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries[size] = obj;<br><FONT ID="LN">3175</FONT><A NAME="3175"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> size++;<br><FONT ID="LN">3176</FONT><A NAME="3176"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3177</FONT><A NAME="3177"></A><br><FONT ID="LN">3178</FONT><A NAME="3178"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3179</FONT><A NAME="3179"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Registers a dependency (in exception status) of one handle on<br><FONT ID="LN">3180</FONT><A NAME="3180"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* another.  The dependent handle must be "open" (i.e., assigned, but<br><FONT ID="LN">3181</FONT><A NAME="3181"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* not finished yet).  No action is taken if either dependent or target<br><FONT ID="LN">3182</FONT><A NAME="3182"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* handle is NULL_HANDLE.<br><FONT ID="LN">3183</FONT><A NAME="3183"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3184</FONT><A NAME="3184"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> markDependency(<FONT ID="Int">int</FONT> dependent, <FONT ID="Int">int</FONT> target) {<br><FONT ID="LN">3185</FONT><A NAME="3185"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (dependent == NULL_HANDLE || target == NULL_HANDLE) {<br><FONT ID="LN">3186</FONT><A NAME="3186"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT>;<br><FONT ID="LN">3187</FONT><A NAME="3187"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3188</FONT><A NAME="3188"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (status[dependent]) {<br><FONT ID="LN">3189</FONT><A NAME="3189"></A><br><FONT ID="LN">3190</FONT><A NAME="3190"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_UNKNOWN:<br><FONT ID="LN">3191</FONT><A NAME="3191"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (status[target]) {<br><FONT ID="LN">3192</FONT><A NAME="3192"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_OK:<br><FONT ID="LN">3193</FONT><A NAME="3193"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// ignore dependencies on objs with no exception<br><FONT ID="LN">3194</FONT><A NAME="3194"></A></FONT>                <FONT ID="Break">break</FONT>;<br><FONT ID="LN">3195</FONT><A NAME="3195"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3196</FONT><A NAME="3196"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_EXCEPTION:<br><FONT ID="LN">3197</FONT><A NAME="3197"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// eagerly propagate exception<br><FONT ID="LN">3198</FONT><A NAME="3198"></A></FONT>                markException(dependent, <br><FONT ID="LN">3199</FONT><A NAME="3199"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) entries[target]);<br><FONT ID="LN">3200</FONT><A NAME="3200"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3201</FONT><A NAME="3201"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3202</FONT><A NAME="3202"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_UNKNOWN:<br><FONT ID="LN">3203</FONT><A NAME="3203"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// add to dependency list of target<br><FONT ID="LN">3204</FONT><A NAME="3204"></A></FONT>                <FONT ID="If">if</FONT> (deps[target] == <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">3205</FONT><A NAME="3205"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps[target] = <FONT ID="New">new</FONT> HandleList();<br><FONT ID="LN">3206</FONT><A NAME="3206"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3207</FONT><A NAME="3207"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps[target].add(dependent);<br><FONT ID="LN">3208</FONT><A NAME="3208"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3209</FONT><A NAME="3209"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// remember lowest unresolved target seen<br><FONT ID="LN">3210</FONT><A NAME="3210"></A></FONT>                <FONT ID="If">if</FONT> (lowDep &lt; <FONT ID="IntegerLiteral">0</FONT> || lowDep &gt; target) {<br><FONT ID="LN">3211</FONT><A NAME="3211"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowDep = target;<br><FONT ID="LN">3212</FONT><A NAME="3212"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3213</FONT><A NAME="3213"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3214</FONT><A NAME="3214"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3215</FONT><A NAME="3215"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">3216</FONT><A NAME="3216"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3217</FONT><A NAME="3217"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3218</FONT><A NAME="3218"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3219</FONT><A NAME="3219"></A><br><FONT ID="LN">3220</FONT><A NAME="3220"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_EXCEPTION:<br><FONT ID="LN">3221</FONT><A NAME="3221"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3222</FONT><A NAME="3222"></A><br><FONT ID="LN">3223</FONT><A NAME="3223"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">3224</FONT><A NAME="3224"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3225</FONT><A NAME="3225"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3226</FONT><A NAME="3226"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3227</FONT><A NAME="3227"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3228</FONT><A NAME="3228"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3229</FONT><A NAME="3229"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Associates a ClassNotFoundException (if one not already associated)<br><FONT ID="LN">3230</FONT><A NAME="3230"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* with the currently active handle and propagates it to other<br><FONT ID="LN">3231</FONT><A NAME="3231"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* referencing objects as appropriate.  The specified handle must be<br><FONT ID="LN">3232</FONT><A NAME="3232"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "open" (i.e., assigned, but not finished yet).<br><FONT ID="LN">3233</FONT><A NAME="3233"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3234</FONT><A NAME="3234"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> markException(<FONT ID="Int">int</FONT> handle, <A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> ex) {<br><FONT ID="LN">3235</FONT><A NAME="3235"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (status[handle]) {<br><FONT ID="LN">3236</FONT><A NAME="3236"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_UNKNOWN:<br><FONT ID="LN">3237</FONT><A NAME="3237"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status[handle] = STATUS_EXCEPTION;<br><FONT ID="LN">3238</FONT><A NAME="3238"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries[handle] = ex;<br><FONT ID="LN">3239</FONT><A NAME="3239"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3240</FONT><A NAME="3240"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// propagate exception to dependents<br><FONT ID="LN">3241</FONT><A NAME="3241"></A></FONT>            HandleList dlist = deps[handle];<br><FONT ID="LN">3242</FONT><A NAME="3242"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (dlist != <FONT ID="Null">null</FONT>) {<br><FONT ID="LN">3243</FONT><A NAME="3243"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> ndeps = dlist.size();<br><FONT ID="LN">3244</FONT><A NAME="3244"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = <FONT ID="IntegerLiteral">0</FONT>; i &lt; ndeps; i++) {<br><FONT ID="LN">3245</FONT><A NAME="3245"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;markException(dlist.get(i), ex);<br><FONT ID="LN">3246</FONT><A NAME="3246"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3247</FONT><A NAME="3247"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps[handle] = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">3248</FONT><A NAME="3248"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3249</FONT><A NAME="3249"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3250</FONT><A NAME="3250"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3251</FONT><A NAME="3251"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_EXCEPTION:<br><FONT ID="LN">3252</FONT><A NAME="3252"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3253</FONT><A NAME="3253"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3254</FONT><A NAME="3254"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">3255</FONT><A NAME="3255"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3256</FONT><A NAME="3256"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3257</FONT><A NAME="3257"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3258</FONT><A NAME="3258"></A><br><FONT ID="LN">3259</FONT><A NAME="3259"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3260</FONT><A NAME="3260"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Marks given handle as finished, meaning that no new dependencies<br><FONT ID="LN">3261</FONT><A NAME="3261"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* will be marked for handle.  Calls to the assign and finish methods<br><FONT ID="LN">3262</FONT><A NAME="3262"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* must occur in LIFO order.<br><FONT ID="LN">3263</FONT><A NAME="3263"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3264</FONT><A NAME="3264"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> finish(<FONT ID="Int">int</FONT> handle) {<br><FONT ID="LN">3265</FONT><A NAME="3265"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> end;<br><FONT ID="LN">3266</FONT><A NAME="3266"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (lowDep &lt; <FONT ID="IntegerLiteral">0</FONT>) {<br><FONT ID="LN">3267</FONT><A NAME="3267"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// no pending unknowns, only resolve current handle<br><FONT ID="LN">3268</FONT><A NAME="3268"></A></FONT>        end = handle + <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3269</FONT><A NAME="3269"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> <FONT ID="If">if</FONT> (lowDep &gt;= handle) {<br><FONT ID="LN">3270</FONT><A NAME="3270"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// pending unknowns now clearable, resolve all upward handles<br><FONT ID="LN">3271</FONT><A NAME="3271"></A></FONT>        end = size;<br><FONT ID="LN">3272</FONT><A NAME="3272"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowDep = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3273</FONT><A NAME="3273"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <FONT ID="Else">else</FONT> {<br><FONT ID="LN">3274</FONT><A NAME="3274"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// unresolved backrefs present, can't resolve anything yet<br><FONT ID="LN">3275</FONT><A NAME="3275"></A></FONT>        <FONT ID="Return">return</FONT>;<br><FONT ID="LN">3276</FONT><A NAME="3276"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3277</FONT><A NAME="3277"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3278</FONT><A NAME="3278"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="SingleLineComment">// change STATUS_UNKNOWN -&gt; STATUS_OK in selected span of handles<br><FONT ID="LN">3279</FONT><A NAME="3279"></A></FONT>        <FONT ID="For">for</FONT> (<FONT ID="Int">int</FONT> i = handle; i &lt; end; i++) {<br><FONT ID="LN">3280</FONT><A NAME="3280"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (status[i]) {<br><FONT ID="LN">3281</FONT><A NAME="3281"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_UNKNOWN:<br><FONT ID="LN">3282</FONT><A NAME="3282"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status[i] = STATUS_OK;<br><FONT ID="LN">3283</FONT><A NAME="3283"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps[i] = <FONT ID="Null">null</FONT>;<br><FONT ID="LN">3284</FONT><A NAME="3284"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3285</FONT><A NAME="3285"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3286</FONT><A NAME="3286"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_OK:<br><FONT ID="LN">3287</FONT><A NAME="3287"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_EXCEPTION:<br><FONT ID="LN">3288</FONT><A NAME="3288"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3289</FONT><A NAME="3289"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3290</FONT><A NAME="3290"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">3291</FONT><A NAME="3291"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3292</FONT><A NAME="3292"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3293</FONT><A NAME="3293"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3294</FONT><A NAME="3294"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3295</FONT><A NAME="3295"></A><br><FONT ID="LN">3296</FONT><A NAME="3296"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3297</FONT><A NAME="3297"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Assigns a new object to the given handle.  The object previously<br><FONT ID="LN">3298</FONT><A NAME="3298"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated with the handle is forgotten.  This method has no effect<br><FONT ID="LN">3299</FONT><A NAME="3299"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* if the given handle already has an exception associated with it.<br><FONT ID="LN">3300</FONT><A NAME="3300"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method may be called at any time after the handle is assigned.<br><FONT ID="LN">3301</FONT><A NAME="3301"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3302</FONT><A NAME="3302"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> setObject(<FONT ID="Int">int</FONT> handle, <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj) {<br><FONT ID="LN">3303</FONT><A NAME="3303"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Switch">switch</FONT> (status[handle]) {<br><FONT ID="LN">3304</FONT><A NAME="3304"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_UNKNOWN:<br><FONT ID="LN">3305</FONT><A NAME="3305"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_OK:<br><FONT ID="LN">3306</FONT><A NAME="3306"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries[handle] = obj;<br><FONT ID="LN">3307</FONT><A NAME="3307"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3308</FONT><A NAME="3308"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3309</FONT><A NAME="3309"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Case">case</FONT> STATUS_EXCEPTION:<br><FONT ID="LN">3310</FONT><A NAME="3310"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Break">break</FONT>;<br><FONT ID="LN">3311</FONT><A NAME="3311"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3312</FONT><A NAME="3312"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Default">default</FONT>:<br><FONT ID="LN">3313</FONT><A NAME="3313"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/InternalError.java.htm">InternalError</A>  <A HREF= "/2807.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3314</FONT><A NAME="3314"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3315</FONT><A NAME="3315"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3316</FONT><A NAME="3316"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3317</FONT><A NAME="3317"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3318</FONT><A NAME="3318"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Looks up and returns object associated with the given handle.<br><FONT ID="LN">3319</FONT><A NAME="3319"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns null if the given handle is NULL_HANDLE, or if it has an<br><FONT ID="LN">3320</FONT><A NAME="3320"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* associated ClassNotFoundException.<br><FONT ID="LN">3321</FONT><A NAME="3321"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3322</FONT><A NAME="3322"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> lookupObject(<FONT ID="Int">int</FONT> handle) {<br><FONT ID="LN">3323</FONT><A NAME="3323"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (handle != NULL_HANDLE &amp;&amp; <br><FONT ID="LN">3324</FONT><A NAME="3324"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status[handle] != STATUS_EXCEPTION) ? <br><FONT ID="LN">3325</FONT><A NAME="3325"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries[handle] : <FONT ID="Null">null</FONT>;<br><FONT ID="LN">3326</FONT><A NAME="3326"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3327</FONT><A NAME="3327"></A><br><FONT ID="LN">3328</FONT><A NAME="3328"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3329</FONT><A NAME="3329"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Looks up and returns ClassNotFoundException associated with the<br><FONT ID="LN">3330</FONT><A NAME="3330"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* given handle.  Returns null if the given handle is NULL_HANDLE, or<br><FONT ID="LN">3331</FONT><A NAME="3331"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* if there is no ClassNotFoundException associated with the handle.<br><FONT ID="LN">3332</FONT><A NAME="3332"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3333</FONT><A NAME="3333"></A>&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> lookupException(<FONT ID="Int">int</FONT> handle) {<br><FONT ID="LN">3334</FONT><A NAME="3334"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> (handle != NULL_HANDLE &amp;&amp;<br><FONT ID="LN">3335</FONT><A NAME="3335"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status[handle] == STATUS_EXCEPTION) ?<br><FONT ID="LN">3336</FONT><A NAME="3336"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<A HREF="../../java/lang/ClassNotFoundException.java.htm">ClassNotFoundException</A>  <A HREF= "/2446.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>) entries[handle] : <FONT ID="Null">null</FONT>;<br><FONT ID="LN">3337</FONT><A NAME="3337"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3338</FONT><A NAME="3338"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3339</FONT><A NAME="3339"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3340</FONT><A NAME="3340"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Resets table to its initial state.<br><FONT ID="LN">3341</FONT><A NAME="3341"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3342</FONT><A NAME="3342"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Void">void</FONT> clear() {<br><FONT ID="LN">3343</FONT><A NAME="3343"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arrays.fill(status, <FONT ID="IntegerLiteral">0</FONT>, size, (<FONT ID="Byte">byte</FONT>) <FONT ID="IntegerLiteral">0</FONT>);<br><FONT ID="LN">3344</FONT><A NAME="3344"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arrays.fill(entries, <FONT ID="IntegerLiteral">0</FONT>, size, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">3345</FONT><A NAME="3345"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arrays.fill(deps, <FONT ID="IntegerLiteral">0</FONT>, size, <FONT ID="Null">null</FONT>);<br><FONT ID="LN">3346</FONT><A NAME="3346"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lowDep = -<FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3347</FONT><A NAME="3347"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">3348</FONT><A NAME="3348"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3349</FONT><A NAME="3349"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3350</FONT><A NAME="3350"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3351</FONT><A NAME="3351"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Returns number of handles registered in table.<br><FONT ID="LN">3352</FONT><A NAME="3352"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3353</FONT><A NAME="3353"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> size() {<br><FONT ID="LN">3354</FONT><A NAME="3354"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> size;<br><FONT ID="LN">3355</FONT><A NAME="3355"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3356</FONT><A NAME="3356"></A>&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3357</FONT><A NAME="3357"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3358</FONT><A NAME="3358"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Expands capacity of internal arrays.<br><FONT ID="LN">3359</FONT><A NAME="3359"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3360</FONT><A NAME="3360"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> grow() {<br><FONT ID="LN">3361</FONT><A NAME="3361"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT> newCapacity = (entries.length &lt;&lt; <FONT ID="IntegerLiteral">1</FONT>) + <FONT ID="IntegerLiteral">1</FONT>;<br><FONT ID="LN">3362</FONT><A NAME="3362"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3363</FONT><A NAME="3363"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Byte">byte</FONT>[] newStatus = <FONT ID="New">new</FONT> <FONT ID="Byte">byte</FONT>[newCapacity];<br><FONT ID="LN">3364</FONT><A NAME="3364"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[] newEntries = <FONT ID="New">new</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>[newCapacity];<br><FONT ID="LN">3365</FONT><A NAME="3365"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HandleList[] newDeps = <FONT ID="New">new</FONT> HandleList[newCapacity];<br><FONT ID="LN">3366</FONT><A NAME="3366"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3367</FONT><A NAME="3367"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(status, <FONT ID="IntegerLiteral">0</FONT>, newStatus, <FONT ID="IntegerLiteral">0</FONT>, size);<br><FONT ID="LN">3368</FONT><A NAME="3368"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(entries, <FONT ID="IntegerLiteral">0</FONT>, newEntries, <FONT ID="IntegerLiteral">0</FONT>, size);<br><FONT ID="LN">3369</FONT><A NAME="3369"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(deps, <FONT ID="IntegerLiteral">0</FONT>, newDeps, <FONT ID="IntegerLiteral">0</FONT>, size);<br><FONT ID="LN">3370</FONT><A NAME="3370"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3371</FONT><A NAME="3371"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status = newStatus;<br><FONT ID="LN">3372</FONT><A NAME="3372"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entries = newEntries;<br><FONT ID="LN">3373</FONT><A NAME="3373"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deps = newDeps;<br><FONT ID="LN">3374</FONT><A NAME="3374"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3375</FONT><A NAME="3375"></A><br><FONT ID="LN">3376</FONT><A NAME="3376"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3377</FONT><A NAME="3377"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Simple growable list of (integer) handles.<br><FONT ID="LN">3378</FONT><A NAME="3378"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3379</FONT><A NAME="3379"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> HandleList {<br><FONT ID="LN">3380</FONT><A NAME="3380"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT>[] list = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[<FONT ID="IntegerLiteral">4</FONT>];<br><FONT ID="LN">3381</FONT><A NAME="3381"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Int">int</FONT> size = <FONT ID="IntegerLiteral">0</FONT>;<br><FONT ID="LN">3382</FONT><A NAME="3382"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3383</FONT><A NAME="3383"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> HandleList() {<br><FONT ID="LN">3384</FONT><A NAME="3384"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3385</FONT><A NAME="3385"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3386</FONT><A NAME="3386"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> add(<FONT ID="Int">int</FONT> handle) {<br><FONT ID="LN">3387</FONT><A NAME="3387"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (size &gt;= list.length) {<br><FONT ID="LN">3388</FONT><A NAME="3388"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Int">int</FONT>[] newList = <FONT ID="New">new</FONT> <FONT ID="Int">int</FONT>[list.length &lt;&lt; <FONT ID="IntegerLiteral">1</FONT>];<br><FONT ID="LN">3389</FONT><A NAME="3389"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.arraycopy(list, <FONT ID="IntegerLiteral">0</FONT>, newList, <FONT ID="IntegerLiteral">0</FONT>, list.length);<br><FONT ID="LN">3390</FONT><A NAME="3390"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list = newList;<br><FONT ID="LN">3391</FONT><A NAME="3391"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3392</FONT><A NAME="3392"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list[size++] = handle;<br><FONT ID="LN">3393</FONT><A NAME="3393"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3394</FONT><A NAME="3394"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><FONT ID="LN">3395</FONT><A NAME="3395"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> get(<FONT ID="Int">int</FONT> index) {<br><FONT ID="LN">3396</FONT><A NAME="3396"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (index &gt;= size) {<br><FONT ID="LN">3397</FONT><A NAME="3397"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/lang/ArrayIndexOutOfBoundsException.java.htm">ArrayIndexOutOfBoundsException</A>  <A HREF= "/546.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3398</FONT><A NAME="3398"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3399</FONT><A NAME="3399"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> list[index];<br><FONT ID="LN">3400</FONT><A NAME="3400"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3401</FONT><A NAME="3401"></A><br><FONT ID="LN">3402</FONT><A NAME="3402"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Int">int</FONT> size() {<br><FONT ID="LN">3403</FONT><A NAME="3403"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> size;<br><FONT ID="LN">3404</FONT><A NAME="3404"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3405</FONT><A NAME="3405"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3406</FONT><A NAME="3406"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3407</FONT><A NAME="3407"></A><br><FONT ID="LN">3408</FONT><A NAME="3408"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="FormalComment">/**<br><FONT ID="LN">3409</FONT><A NAME="3409"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Context during upcalls to class-defined readObject methods; holds <br><FONT ID="LN">3410</FONT><A NAME="3410"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* object currently being deserialized and descriptor for current class. <br><FONT ID="LN">3411</FONT><A NAME="3411"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This context keeps a boolean state to indicate that defaultReadObject <br><FONT ID="LN">3412</FONT><A NAME="3412"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* or readFields has already been invoked with this context or the class's<br><FONT ID="LN">3413</FONT><A NAME="3413"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* readObject method has returned; if true, the getObj method throws <br><FONT ID="LN">3414</FONT><A NAME="3414"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* NotActiveException.<br><FONT ID="LN">3415</FONT><A NAME="3415"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</FONT><br><FONT ID="LN">3416</FONT><A NAME="3416"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Static">static</FONT> <FONT ID="Class">class</FONT> CallbackContext {<br><FONT ID="LN">3417</FONT><A NAME="3417"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj;<br><FONT ID="LN">3418</FONT><A NAME="3418"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc;<br><FONT ID="LN">3419</FONT><A NAME="3419"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Final">final</FONT> <A HREF="../../java/util/concurrent/atomic/AtomicBoolean.java.htm">AtomicBoolean</A>  <A HREF= "/3612.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> used = <FONT ID="New">new</FONT> <A HREF="../../java/util/concurrent/atomic/AtomicBoolean.java.htm">AtomicBoolean</A>  <A HREF= "/3612.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>();<br><FONT ID="LN">3420</FONT><A NAME="3420"></A><br><FONT ID="LN">3421</FONT><A NAME="3421"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> CallbackContext(<A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> obj, <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> desc) {<br><FONT ID="LN">3422</FONT><A NAME="3422"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.obj = obj;<br><FONT ID="LN">3423</FONT><A NAME="3423"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="This">this</FONT>.desc = desc;<br><FONT ID="LN">3424</FONT><A NAME="3424"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3425</FONT><A NAME="3425"></A><br><FONT ID="LN">3426</FONT><A NAME="3426"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/lang/Object.java.htm">Object</A>  <A HREF= "/1241.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getObj() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">3427</FONT><A NAME="3427"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkAndSetUsed();<br><FONT ID="LN">3428</FONT><A NAME="3428"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> obj;<br><FONT ID="LN">3429</FONT><A NAME="3429"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3430</FONT><A NAME="3430"></A><br><FONT ID="LN">3431</FONT><A NAME="3431"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <A HREF="../../java/io/ObjectStreamClass.java.htm">ObjectStreamClass</A>  <A HREF= "/903.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> getDesc() {<br><FONT ID="LN">3432</FONT><A NAME="3432"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Return">return</FONT> desc;<br><FONT ID="LN">3433</FONT><A NAME="3433"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3434</FONT><A NAME="3434"></A><br><FONT ID="LN">3435</FONT><A NAME="3435"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Private">private</FONT> <FONT ID="Void">void</FONT> checkAndSetUsed() <FONT ID="Throws">throws</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A> {<br><FONT ID="LN">3436</FONT><A NAME="3436"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="If">if</FONT> (!used.compareAndSet(<FONT ID="False">false</FONT>, <FONT ID="True">true</FONT>)) {<br><FONT ID="LN">3437</FONT><A NAME="3437"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Throw">throw</FONT> <FONT ID="New">new</FONT> <A HREF="../../java/io/NotActiveException.java.htm">NotActiveException</A>  <A HREF= "/1227.htm"><img SRC="../../../cmn/javadoc.gif" alt="JavaDoc" border="0"></A>(<br><FONT ID="LN">3438</FONT><A NAME="3438"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="StringLiteral">"not in readObject invocation or fields already read"</FONT>);<br><FONT ID="LN">3439</FONT><A NAME="3439"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3440</FONT><A NAME="3440"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3441</FONT><A NAME="3441"></A><br><FONT ID="LN">3442</FONT><A NAME="3442"></A>&nbsp;&nbsp;&nbsp;&nbsp;<FONT ID="Public">public</FONT> <FONT ID="Void">void</FONT> setUsed() {<br><FONT ID="LN">3443</FONT><A NAME="3443"></A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;used.set(<FONT ID="True">true</FONT>);<br><FONT ID="LN">3444</FONT><A NAME="3444"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3445</FONT><A NAME="3445"></A>&nbsp;&nbsp;&nbsp;&nbsp;}<br><FONT ID="LN">3446</FONT><A NAME="3446"></A>}<br><FONT ID="LN">3447</FONT><A NAME="3447"></A></CODE>              <script type="text/javascript">doContentColumn2();</script>            </div>            <div id="contentHeading3" class="inside">              <!--contentHeading3-->            </div>            <div id="contentColumn3" class="inside">              <!--contentColumn3-->              <script type="text/javascript">doContentColumn3();</script>            </div>            <div id="contentHeading4" class="inside">              <!--contentHeading4-->            </div>            <div id="contentColumn4" class="inside">              <!--contentColumn4-->              <script type="text/javascript">doContentColumn4();</script>            </div>            <div id="contentHeading5" class="inside">              <!--contentHeading5-->            </div>            <div id="contentColumn5" class="inside">              <!--contentColumn5-->              <script type="text/javascript">doContentColumn5();</script>            </div>          </td>          <td id="rightColumn">            <div id="rightHeading1" class="inside">              <!--rightHeading1-->            </div>            <div id="rightColumn1" class="inside">              <!--rightColumn1-->              <a href="/browse.html" title="JavaDoc, source codes and sample codes for all the Java SE, EE, and ME methods organized alphabetically in one central place." id="menu1" target="_top">A to Z: JavaDoc & Examples</a>              <hr class="hide">              <a href="/news" title="Daily Java news and articles, updated continuously from 100+ Java news sources." id="menu2" target="_top">Daily Java News & Articles</a>              <hr class="hide">              <a href="/prj" title="Java Open Source Projects by Tags." id="menu3" target="_top">Open Source Projects</a>              <hr class="hide">              <a href="/src" title="34,081,897 lines of Java Open Source Codes." id="menu4" target="_top">Open Source Codes</a>              <hr class="hide">              <a href="/books" title="A large collection of free online computer books." id="menu5" target="_top">Free Computer Books</a>              <hr class="hide">              <a href=# title="Remove Frame." onclick="removeFrame();" id="menu6" target="_top">Remove Frame</a>              <hr class="hide">              <script type="text/javascript">doRightColumn1();</script>            </div>            <div id="rightHeading2" class="inside">              <!--rightHeading2-->            </div>            <div id="rightColumn2" class="inside">              <!--rightColumn2-->              <script type="text/javascript">doRightColumn2();</script>            </div>            <div id="rightHeading3" class="inside">              Popular Tags            </div>            <div id="rightColumn3" class="inside">              <!--rightColumn3-->              <script type="text/javascript">doRightColumn3();</script>            </div>            <div id="rightHeading4" class="inside">              <!--rightHeading4-->            </div>            <div id="rightColumn4" class="inside">              <!--rightColumn4-->              <script type="text/javascript">doRightColumn4();</script>            </div>            <div id="rightHeading5" class="inside">              <!--rightHeading5-->            </div>            <div id="rightColumn5" class="inside">              <!--rightColumn5-->              <script type="text/javascript">doRightColumn5();</script>            </div>          </td>        </tr>      </table>      <table id="Bottom1">        <tr>          <td id="Bottom10"><script type="text/javascript">doBottom10();</script></td>          <td id="Bottom11"><script type="text/javascript">doBottom11();</script></td>          <td id="Bottom12"><script type="text/javascript">doBottom12();</script></td>          <td id="Bottom13"><script type="text/javascript">doBottom13();</script></td>          <td id="Bottom14"><script type="text/javascript">doBottom14();</script></td>          <td id="Bottom15"><script type="text/javascript">doBottom15();</script></td>          <td id="Bottom16"><script type="text/javascript">doBottom16();</script></td>          <td id="Bottom17"><script type="text/javascript">doBottom17();</script></td>          <td id="Bottom18"><script type="text/javascript">doBottom18();</script></td>          <td id="Bottom10"><script type="text/javascript">doBottom19();</script></td>        </tr>      </table>      <table id="Bottom2">        <tr>          <td id="Bottom20"><script type="text/javascript">doBottom20();</script></td>          <td id="Bottom21"><script type="text/javascript">doBottom21();</script></td>          <td id="Bottom22"><script type="text/javascript">doBottom22();</script></td>          <td id="Bottom23"><script type="text/javascript">doBottom23();</script></td>          <td id="Bottom24"><script type="text/javascript">doBottom24();</script></td>          <td id="Bottom25"><script type="text/javascript">doBottom25();</script></td>          <td id="Bottom26"><script type="text/javascript">doBottom26();</script></td>          <td id="Bottom27"><script type="text/javascript">doBottom27();</script></td>          <td id="Bottom28"><script type="text/javascript">doBottom28();</script></td>          <td id="Bottom29"><script type="text/javascript">doBottom29();</script></td>        </tr>      </table>      <div id="footer" class="inside">        <hr class="hide">        <p>          Java <acronym title="Application Programming Interface">API</acronym> By Example, From Geeks To Geeks.&nbsp;|&nbsp;          <A href="http://121space.com/blog/kickjava" target="_top">Our Blog</A>&nbsp;|&nbsp;          <A href="/cmn/condition.html" target="_top">Conditions of Use</A><A href="/sitemap_index.xml"> </a>&nbsp;|&nbsp;          <A href="/cmn/about.html" target="_top">About Us</A><A href="/all.html.gz">_</a>&nbsp;|&nbsp;          <script type="text/javascript">doFooter();</script>        </p>      </div>    </div>    <script type="text/javascript">doBodyEnd();</script>    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>    <script type="text/javascript">_uacct = "UA-437240-2";urchinTracker();</script>    <DIV ID="divWindow" NAME="divWindow"></DIV>  </body></html>
