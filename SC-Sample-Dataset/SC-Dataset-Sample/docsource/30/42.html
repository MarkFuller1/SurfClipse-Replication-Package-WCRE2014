<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta name="description" content="&#xA;    Elliotte Rusty Harold's tutorial on &#xA;    XML and Java at , &#xA;  "><title>Processing XML with Java</title></head><body><h1 align="center">Processing XML with Java</h1><hr><h2>Processing XML with Java</h2><h2 xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">Elliotte Rusty Harold</h2><h2 xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center"><img src="images/flattened_header_sd.gif" width="470" height="53" alt="Software Development 2003 West"></h2><h3 xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">Tuesday, March 25, 2003</h3><h3 xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">elharo@metalab.unc.edu</h3><h3 xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">http://www.cafeconleche.org/</h3><hr color="red" style="color: red" size="2"><h2>Where we're going</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>XML Infoset</p></li>
    <li><p>Writing XML with Java</p></li>
    <li><p>Reading XML through SAX2</p></li>
    <li><p>Reading and Writing XML through the DOM</p></li>
    <li><p>JDOM</p></li>
 
    
    <li><p>TrAX</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Processing XML with Java is easy</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>You need a JDK</p></li>
    <li><p>You need some free class libraries</p></li>
    <li><p>You need a text editor</p></li>
    <li><p>You need some data to process</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Prerequisites</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Are familiar with Java including I/O, classes, objects, polymorphism, etc.</p></li>
    <li><p>Know XML including well-formedness, validity, namespaces, and so forth</p></li>
    <li><p>I will briefly review proper terminology
    
    </p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>XML API Styles</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Push: SAX, XNI </p></li>
  <li><p>Tree: DOM, JDOM, XOM, ElectricXML, dom4j, Sparta</p></li>
  <li><p>Data binding: Castor, Zeus, JAXB</p></li>
  <li><p>Pull: XMLPULL, StAX, NekoPull</p></li>
  <li><p>Transform: XSLT, TrAX, XQuery</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Parser APIs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>SAX, the Simple API for XML
    <ul>
      <li><p>SAX1</p></li>
      <li><p>SAX2</p></li>
    </ul>
  </p></li>
  <li><p>DOM, the Document Object Model    <ul>
      <li><p>DOM Level 0</p></li>
      <li><p>DOM Level 1</p></li>
      <li><p>DOM Level 2</p></li>
      <li><p>DOM Level 3</p></li>
    </ul>
  </p></li>
  <li><p>JDOM</p></li>
  <li><p>dom4j</p></li>
  <li><p>XOM</p></li>
  <li><p>TrAX</p></li>
  <li><p>XMLPULL</p></li>
  <li><p>NekoPull</p></li>

  <li><p>Proprietary APIs 
    <ul>
      <li><p>Parser specific APIs </p></li>
      <li><p>Sun's <a href="http://java.sun.com/products/xml">Java API for XML Parsing</a> = SAX1 + DOM1 + a few factory classes</p></li>
      <li><p><a href="http://java.sun.com/aboutJava/communityprocess/jsr/jsr_031_xmld.html">JSR-000031 
  XML Data Binding Specification</a> from Bluestone, Sun, webMethods et al.
  <blockquote>
  The proposed specification will define an XML data-binding facility for
                      the JavaTM Platform. Such a facility compiles an XML schema into one
                      or more Java classes. These automatically-generated classes handle the
                      translation between XML documents that follow the schema and
                      interrelated instances of the derived classes. They also ensure that the
                      constraints expressed in the schema are maintained as instances of the
                      classes are manipulated. 
  </blockquote>
  </p></li>
  </ul>
  </p></li>
  
</ul><hr color="red" style="color: red" size="2"><h2>Part I: XML Infoset</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude"><blockquote>
        The Infoset is the unfortunate standard to which those in retreat from the radical
and most useful implications of well-formedness have rallied. At its core the
Infoset insists that there is 'more' to XML than the straightforward syntax of
well-formedness. By imposing its canonical semantics the Infoset obviates the
infinite other semantic outcomes which might be elaborated in particular unique
circumstances from an instance of well-formed XML 1.0 syntax. The question we
should be asking is not whether the Infoset has chosen the correct canonical
semantics, but whether the syntactic possibilities of XML 1.0 should be curtailed
in this way at all.
        </blockquote>
        --Walter Perry on the  xml-dev mailing list
        </p><hr color="red" style="color: red" size="2"><h2>A simple example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;
&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;
&lt;SONG xmlns="http://www.cafeconleche.org/namespace/song"
      xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;TITLE&gt;Hot Cop&lt;/TITLE&gt;
  &lt;PHOTO 
    xlink:type="simple" xlink:show="onLoad" xlink:href="hotcop.jpg"
    ALT="Victor Willis in Cop Outfit" WIDTH="100" HEIGHT="200"/&gt;
  &lt;COMPOSER&gt;Jacques Morali&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Henri Belolo&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Victor Willis&lt;/COMPOSER&gt;
  &lt;PRODUCER&gt;Jacques Morali&lt;/PRODUCER&gt;
  &lt;!-- The publisher is actually Polygram but I needed 
       an example of a general entity reference. --&gt;
  &lt;PUBLISHER xlink:type="simple" xlink:href="http://www.amrecords.com/"&gt;
    A &amp;amp; M Records
  &lt;/PUBLISHER&gt;
  &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;
  &lt;YEAR&gt;1978&lt;/YEAR&gt;
  &lt;ARTIST&gt;Village People&lt;/ARTIST&gt;
&lt;/SONG&gt;
&lt;!-- You can tell what album I was 
     listening to when I wrote this example --&gt;
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/hotcop.xml">View in Browser</a><hr color="red" style="color: red" size="2"><h2>Markup and Character Data</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Markup includes:
      <ul>
        <li><p>Tags</p></li>
        <li><p>Entity References</p></li>
        <li><p>Comments</p></li>
        <li><p>Processing Instructions</p></li>
        <li><p>Document Type Declarations</p></li>
        <li><p>XML Declaration</p></li>
        <li><p>CDATA Section Delimiters</p></li>
    </ul></p></li>
    <li><p>Character data includes everything else</p></li>
  
  </ul><hr color="red" style="color: red" size="2"><h2>Markup and Character Data Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code><span style="color: red">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span>
<span style="color: red">&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;</span>
<span style="color: red">&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;</span>
<span style="color: red">&lt;SONG xmlns="http://www.cafeconleche.org/namespace/song"
      xmlns:xlink="http://www.w3.org/1999/xlink"&gt;</span>
  <span style="color: red">&lt;TITLE&gt;</span>Hot Cop<span style="color: red">&lt;/TITLE&gt;</span>
  <span style="color: red">&lt;PHOTO 
    xlink:type="simple" xlink:show="onLoad" xlink:href="hotcop.jpg"
    ALT="Victor Willis in Cop Outfit" WIDTH="100" HEIGHT="200"/&gt;</span>
  <span style="color: red">&lt;COMPOSER&gt;</span>Jacques Morali<span style="color: red">&lt;/COMPOSER&gt;</span>
  <span style="color: red">&lt;COMPOSER&gt;</span>Henri Belolo<span style="color: red">&lt;/COMPOSER&gt;</span>
  <span style="color: red">&lt;COMPOSER&gt;</span>Victor Willis<span style="color: red">&lt;/COMPOSER&gt;</span>
  <span style="color: red">&lt;PRODUCER&gt;</span>Jacques Morali<span style="color: red">&lt;/PRODUCER&gt;</span>
  <span style="color: red">&lt;!-- The publisher is actually Polygram but I needed 
       an example of a general entity reference. --&gt;</span>
  <span style="color: red">&lt;PUBLISHER xlink:type="simple" xlink:href="http://www.amrecords.com/"&gt;</span>
    A <span style="color: red">&amp;amp;</span> M Records
  <span style="color: red">&lt;/PUBLISHER&gt;</span>
  <span style="color: red">&lt;LENGTH&gt;</span>6:20<span style="color: red">&lt;/LENGTH&gt;</span>
  <span style="color: red">&lt;YEAR&gt;</span>1978<span style="color: red">&lt;/YEAR&gt;</span>
  <span style="color: red">&lt;ARTIST&gt;</span>Village People<span style="color: red">&lt;/ARTIST&gt;</span>
<span style="color: red">&lt;/SONG&gt;</span>
<span style="color: red">&lt;!-- You can tell what album I was 
     listening to when I wrote this example --&gt;</span>
</code></pre><hr color="red" style="color: red" size="2"><h2>Elements and Tags</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Elements are delimited by a start-tag like 
    <code>&lt;LENGTH&gt;</code> and a matching end-tag
    like  <code>&lt;/LENGTH&gt;</code>:
    
    <p><code>&lt;LENGTH&gt;6:20&lt;/LENGTH&gt;</code></p>
    
    </p></li>
    <li><p>Elements contain content which can be text, child 
      elements, or both:
      
      <pre><code>  &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;
  &lt;PRODUCER&gt;
    &lt;NAME&gt;&lt;GIVEN&gt;Jacques&lt;/GIVEN&gt; &lt;FAMILY&gt;Morali&lt;/FAMILY&gt;&lt;/NAME&gt;
  &lt;/PRODUCER&gt;
  &lt;PARAGRAPH&gt;
     The &lt;ARTIST&gt;Village People&lt;/ARTIST&gt;
     were a popular &lt;GENRE&gt;Disco&lt;/GENRE&gt; band in the 1970's
  &lt;/PARAGRAPH&gt;</code></pre>
      
    </p></li>
    <li><p>The element is the tags plus the content.</p></li>

       <li><p>Empty-element tags both start and end an element:
    
    <p><code>&lt;PHOTO/&gt;</code></p>

    This element has no content. It is equivalent 
    to 
    
    <p><code>&lt;PHOTO&gt;&lt;/PHOTO&gt;</code></p>
    
      </p></li>

    <li><p>Elements can have attributes:
    
    <p><code>&lt;PHOTO 
    xlink:type="simple" xlink:show="onLoad" xlink:href="hotcop.jpg"
    ALT="Victor Willis in Cop Outfit" WIDTH="100" HEIGHT="200"/&gt;</code></p>
    
    </p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Entities</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>An XML document is made up of one or more physical storage units
    called <dfn>entities</dfn>
    </p></li>
    <li><p>Entity references:
      <ul>
        <li><p>Parsed internal general entity references like <code>&amp;amp;</code></p></li>
        <li><p>Parsed external general entity references</p></li>
        <li><p>Unparsed external general entity references</p></li>
        <li><p>External parameter entity references</p></li>
        <li><p>Internal parameter entity references</p></li>
      </ul>
    </p></li>
    <li><p>Reading an XML document is not the same thing as reading an XML file</p></li>
    <ul> 
    <li><p>The file contains entity references.</p></li> 
    <li><p>The document contains the entities' replacement text.</p></li>
    <li><p>When you use a parser to read a document you'll get the text
    including characters like &lt;. You will not see the entity references. </p></li>
    </ul> 
  </ul><hr color="red" style="color: red" size="2"><h2>Parsed Character Data</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Character data left after entity references are replaced
    with their text</p></li>
    <li><p>Given the element
<p><code>&lt;PUBLISHER&gt;A &amp;amp; M Records&lt;/PUBLISHER&gt;</code></p>
    <p>The parsed character data is </p>
<p><code>A &amp; M Records</code></p>
    </p></li>
    
  </ul><hr color="red" style="color: red" size="2"><h2>CDATA sections</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Used to include large blocks of text with lots of normally
    illegal literal characters like 
    <code>&lt;</code> and <code>&amp;</code>, typically XML or HTML.
    
<pre><code>&lt;p&gt;You can use a default &lt;code&gt;xmlns&lt;/code&gt;
attribute to avoid having to add the <code>svg</code> prefix to all
your elements:&lt;/p&gt;
&lt;![CDATA[
  &lt;svg xmlns="http://www.w3.org/2000/svg" 
       width="12cm" height="10cm"&gt;
    &lt;ellipse rx="110" ry="130" /&gt;
    &lt;rect x="4cm" y="1cm" width="3cm" height="6cm" /&gt;
  &lt;/svg&gt;
]]&gt;    
</code></pre>    
    </p></li>
    <li><p>CDATA is for human authors, not for programs!
    
    </p></li>
  
  </ul><hr color="red" style="color: red" size="2"><h2>Comments</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p> <code>&lt;!-- Before posting this page, I need to double check the number
    of pelicans in Lousiana in 1970 --&gt;</code></p></li>
    <li><p>Comments are for humans, not programs.
    
    </p></li>
  
  </ul><hr color="red" style="color: red" size="2"><h2>Processing Instructions</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Divided into a target and data for the target</p></li> 
    <li><p>The target must be an XML name</p></li>
    <li><p>The data can have an effectively arbitrary format</p></li>
    <li><p>
<pre><code>&lt;?robots index="yes" follow="no"?&gt;
&lt;?xml-stylesheet href="pelicans.css" type="text/css"?&gt;
&lt;?php 
  mysql_connect("database.unc.edu", "clerk", "password"); 
  $result = mysql("CYNW", "SELECT LastName, FirstName FROM Employees 
    ORDER BY LastName, FirstName"); 
  $i = 0;
  while ($i &lt; mysql_numrows ($result)) {
     $fields = mysql_fetch_row($result);
     echo "&lt;person&gt;$fields[1] $fields[0] &lt;/person&gt;\r\n";
     $i++;
  }
  mysql_close();
?&gt;
</code></pre>
    </p></li>
    <li><p>These are for programs</p></li>
  
  </ul><hr color="red" style="color: red" size="2"><h2>The XML Declaration</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
</code></pre><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
      <li><p>Looks like a processing instruction but isn't.
      </p></li>
      <li><p><code>version</code> attribute
        <ul>
          <li><p>required</p></li>
          <li><p>always has the value 1.0</p></li>
        </ul>
      </p></li>
     <li><p>
       <code>encoding</code> attribute
       <ul>
         <li><p>UTF-8</p></li>
         <li><p>ISO-8859-1</p></li>
         <li><p>SJIS</p></li>
         <li><p>etc.</p></li>
       </ul>
    </p></li>
    <li><p><code>standalone</code> attribute
        <ul>
          <li><p>yes</p></li>
          <li><p>no</p></li>
       </ul>
     </p></li>

     </ul><hr color="red" style="color: red" size="2"><h2>Document Type Declaration</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;</code></p><hr color="red" style="color: red" size="2"><h2>Document Type Definition (DTD)</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;!ELEMENT SONG (TITLE, PHOTO?, COMPOSER+, PRODUCER*, 
 PUBLISHER*, LENGTH?, YEAR?, ARTIST+)&gt;

&lt;!ELEMENT TITLE     (#PCDATA)&gt;
&lt;!ELEMENT COMPOSER  (#PCDATA)&gt;
&lt;!ELEMENT PRODUCER  (#PCDATA)&gt;
&lt;!ELEMENT PUBLISHER (#PCDATA)&gt;
&lt;!ELEMENT LENGTH    (#PCDATA)&gt;
&lt;!-- This should be a four digit year like "1999",
     not a two-digit year like "99" --&gt;
&lt;!ELEMENT YEAR   (#PCDATA)&gt;
&lt;!ELEMENT ARTIST (#PCDATA)&gt;
&lt;!ELEMENT PHOTO EMPTY&gt;
&lt;!ATTLIST PHOTO xlink:type (simple) #FIXED "simple" 
                xlink:show (onLoad) #FIXED "onLoad" 
                xlink:href CDATA #REQUIRED
                ALT CDATA #REQUIRED
                WIDTH NMTOKEN #REQUIRED
                HEIGHT NMTOKEN #REQUIRED
&gt;
&lt;!ATTLIST PUBLISHER xlink:type (simple) #FIXED "simple" 
                    xlink:href CDATA #REQUIRED

&gt;
&lt;!ATTLIST SONG xmlns CDATA       #FIXED "http://www.cafeconleche.org/namespace/song"
               xmlns:xlink CDATA #FIXED "http://www.w3.org/1999/xlink"
&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>XML Names</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Used for element, attribute, and entity names</p></li>
<li><p>Can contain any Unicode 2.0 alphabetic, ideographic, or numeric Unicode character</p></li>
<li><p>Can contain hyphen, underscore, or period</p></li>
<li><p>Can also contain colons but these are reserved for namespaces</p></li>
<li><p>Can begin with any Unicode 2.0  alphabetic or ideographic character 
or the underscore
but not digits or other punctuation marks</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>XML Namespaces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Raison d'etre:
  
<OL>

<li><p>To distinguish between elements and attributes from different vocabularies 
with different meanings.</p></li>

<li><p> To group all related elements and attributes together so that a parser can 
easily recognize them.</p></li>

</OL>
</p></li>
<li><p>Each element is given a prefix</p></li>
<li><p>Each prefix (as well as the empty prefix) is associated with a URI</p></li>
<li><p>Elements with the same URI are in the same namespace</p></li>
<li><p>URIs are purely formal. They do not necessarily point to a page. </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Namespace Syntax</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Elements and attributes that are in namespaces have names that contain 
exactly one colon. They look like this:

<pre><code>rdf:description
xlink:type
xsl:template</code>
</pre>
</p></li>
<li><p>Everything before the colon is called the <dfn>prefix</dfn></p></li>
<li><p>Everything after the colon is called the <dfn>local part</dfn>
or <dfn>local name</dfn>.</p></li>
<li><p> The complete name including the colon is called the <dfn>qualified name</dfn>
or <dfn>raw name</dfn>. </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Namespace URIs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>
Each prefix in a qualified name is associated with a URI. </p></li>
<li><p>For example, all elements in XSLT 1.0 style sheets are associated with the 
http://www.w3.org/1999/XSL/Transform URI.</p></li> 
<li><p>The customary prefix <code>xsl</code> is a shorthand for the longer URI 
http://www.w3.org/1999/XSL/Transform. </p></li>

<li><p>You can't use the URI in the element name directly. </p></li>

</ul><hr color="red" style="color: red" size="2"><h2>Binding Prefixes to Namespace URIs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Prefixes are bound to namespace URIs by attaching an <code>xmlns:<I>prefix</I></code> 
attribute to the prefixed element or one of its ancestors.


<pre><code>&lt;svg:svg xmlns:svg="http://www.w3.org/2000/svg" 
 width="12cm" height="10cm"&gt;
  &lt;svg:ellipse rx="110" ry="130" /&gt;
  &lt;svg:rect x="4cm" y="1cm" width="3cm" height="6cm" /&gt;
&lt;/svg:svg&gt;</code>
</pre>
</p></li>
<li><p>Bindings have scope within the element where they're declared.  </p></li>

<li><p>An SVG processor can recognize all three of these elements as SVG elements 
because they all have prefixes bound to the particular URI defined by the SVG 
specification. </p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The Default Namespace</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Indicate that an unprefixed element and all its unprefixed descendant 
elements belong to a particular namespace by attaching an <code>xmlns</code> 
attribute with no prefix:

<pre><code>&lt;DATASCHEMA xmlns="http://www.w3.org/2000/P3Pv1"&gt;
  &lt;DATA name="vehicle.make" type="text" short="Make" 
        category="preference" size="31"/&gt;
  &lt;DATA name="vehicle.model" type="text" short="Model" 
        category="preference" size="31"/&gt;
  &lt;DATA name="vehicle.year" type="number" short="Year" 
        category="preference" size="4"/&gt;
  &lt;DATA name="vehicle.license.state." type="postal." short="State" 
        category="preference" size="2"/&gt;
  &lt;DATA name="vehicle.license.number" type="text" 
        short="License Plate Number" category="preference" size="12"/&gt;
&lt;/DATASCHEMA&gt;</code>
</pre>
</p></li>
<li><p>Both the <code>DATASCHEMA</code> and <code>DATA</code> elements are in the 
http://www.w3.org/2000/P3Pv1 namespace. </p></li>
<li><p> Default namespaces apply only to elements, not to attributes. 
Thus in the above example the <code>name</code>, 
<code>type</code>, <code>short</code>, <code>category</code>, and <code>size</code> 
attributes are not in any namespace. 
Unprefixed attributes are never in any namespace.
</p></li>

<li><p>You can change the default namespace within a particular 
element by adding an <code>xmlns</code> attribute to the element. 
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>How Parsers Handle Namespaces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Namespaces were added to XML 1.0 after the fact, but care was taken to 
ensure backwards compatibility. </p></li>

<li><p>An XML 1.0 parser that does not know about namespaces will most likely not 
have any troubles reading a document that uses namespaces. </p></li>

<li><p>A namespace aware parser also checks to see that all prefixes are mapped to 
URIs. Otherwise it behaves almost exactly like a non-namespace aware parser. 
</p></li>

 <li><p>Other software that sits on top of the raw XML parser, an XSLT engine for 
 example, may treat elements differently depending on what namespace they belong 
 to. However, the XML parser itself mostly doesn't care as long as all 
 well-formedness and namespace constraints are met.</p></li>

<li><p>A possible exception occurs in the unlikely event that elements with 
different prefixes belong to the same namespace or elements with the same prefix 
belong to different namespaces</p></li>

<li><p>Many parsers have the option of whether to report namespace violations so 
that you can turn namespace processing on or off as you see fit.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question4.gif" width="121" height="148">
  </div><hr color="red" style="color: red" size="2"><h2>Three Variations on a Theme</h2><hr color="red" style="color: red" size="2"><h2>A normal XML document</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="no"?&gt;
&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;
&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;
&lt;SONG xmlns="http://www.cafeconleche.org/namespace/song"
      xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;TITLE&gt;Hot Cop&lt;/TITLE&gt;
  &lt;PHOTO 
    xlink:type="simple" xlink:show="onLoad" xlink:href="hotcop.jpg"
    ALT="Victor Willis in Cop Outfit" WIDTH="100" HEIGHT="200"/&gt;
  &lt;COMPOSER&gt;Jacques Morali&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Henri Belolo&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Victor Willis&lt;/COMPOSER&gt;
  &lt;PRODUCER&gt;Jacques Morali&lt;/PRODUCER&gt;
  &lt;!-- The publisher is actually Polygram but I needed 
       an example of a general entity reference. --&gt;
  &lt;PUBLISHER xlink:type="simple" xlink:href="http://www.amrecords.com/"&gt;
    A &amp;amp; M Records
  &lt;/PUBLISHER&gt;
  &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;
  &lt;YEAR&gt;1978&lt;/YEAR&gt;
  &lt;ARTIST&gt;Village People&lt;/ARTIST&gt;
&lt;/SONG&gt;
&lt;!-- You can tell what album I was 
     listening to when I wrote this example --&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>A canonical XML document</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;
&lt;SONG xmlns="http://www.cafeconleche.org/namespace/song" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;
  &lt;TITLE&gt;Hot Cop&lt;/TITLE&gt;
  &lt;PHOTO ALT="Victor Willis in Cop Outfit" HEIGHT="200" WIDTH="100" xlink:href="hotcop.jpg" xlink:show="onLoad" xlink:type="simple"&gt;&lt;/PHOTO&gt;
  &lt;COMPOSER&gt;Jacques Morali&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Henri Belolo&lt;/COMPOSER&gt;
  &lt;COMPOSER&gt;Victor Willis&lt;/COMPOSER&gt;
  &lt;PRODUCER&gt;Jacques Morali&lt;/PRODUCER&gt;
  
  &lt;PUBLISHER xlink:href="http://www.amrecords.com/" xlink:type="simple"&gt;
    A &amp;amp; M Records
  &lt;/PUBLISHER&gt;
  &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;
  &lt;YEAR&gt;1978&lt;/YEAR&gt;
  &lt;ARTIST&gt;Village People&lt;/ARTIST&gt;
&lt;/SONG&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>An org.w3c.dom.Document object formed by reading hotcop.xml</h2><img xmlns:xinclude="http://www.w3.org/2001/XInclude" src="images/uml_hotcop.gif" width="1000" height="617"><hr xmlns:xinclude="http://www.w3.org/2001/XInclude"><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;

public class DOMHotCop {

  public static void main(String[] args) {
     
    DOMParser parser = new DOMParser();
    
    try {
      parser.parse("http://www.cafeconleche.org/examples/hotcop.xml"); 
      Document d = parser.getDocument();
    }
    catch (SAXException e) {
      System.err.println(e); 
    }
    catch (IOException e) {
      System.err.println(e); 
    }
   
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Are these three the same thing or not?</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Three forms: <ul>
  <li><p>The customary form of an XML document</p></li>

  <li><p>The canonical form of an XML document</p></li>

  <li><p>The object form of an XML document</p></li>
  </ul></p></li>
  <li><p>Do they contain the same information or not?</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>What is the XML Infoset?</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>It started out as a A W3C standard for what is and is not significant in an XML document,
  a description of what information an XML parser must provide to
      the client application:
      
      <blockquote>
      An XML processor conforms to the XML Information Set if 
      it provides all the core information items and all their
      core properties corresponding to that part of the document 
      that the processor has actually read. For instance, 
      attributes are core information items; therefore, an 
      XML processor that does not report the existence of attributes,
      as well as their names and values (which are core properties of attributes), does not conform to the XML Information Set. 
      </blockquote>
      </p></li>
  
  <li><p>It became a list of definitions for particular information items:</p></li>

  <blockquote>
  <p>Since the purpose of the Information Set is to provide a set of definitions, 
  conformance is a property of specifications that use those definitions, rather than of implementations.
</p>
<p>Specifications referring to the Infoset must:</p>
<ul>
    <li><p>Indicate the information items and properties that are needed to implement the specification. (This indirectly
    imposes conformance requirements on processors used to implement the specification.)</p></li>
    <li><p>Specify how other information items and properties are treated (for example, they might be passed through unchanged).</p></li>
    <li><p>Note any information required from an XML document that is not defined by the Infoset.</p></li>
   <li><p>Note any difference in the use of terms defined by the Infoset (this should be avoided).</p></li>
</ul>
  </blockquote>
 
</ul><hr color="red" style="color: red" size="2"><h2>The Infoset defines 11 Kinds of Information Items</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The Document Information Item</p></li>
<li><p>Element Information Items</p></li>
<li><p>Attribute Information Items</p></li>
<li><p>Processing instruction Information Items</p></li>
<li><p>Unexpanded Entity Reference Information Items</p></li>
<li><p>Character Information Items</p></li>
<li><p>Comment Information Items</p></li>
<li><p>The Document Type Declaration Information Item</p></li>
<li><p>Unparsed Entity Information Items</p></li>
<li><p>Notation Information Items</p></li>
<li><p>Namespace Declaration Information Items</p></li>
</ul><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Not everyone agrees that this is a good thing!
  or that this is the right list!
  </p><hr color="red" style="color: red" size="2"><h2>The Document Information Item</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p>Represents the entire document; not just the root element</p></li>
 <li><p>Properties:
<ul>
    <li><p>Children
    <ul>
    <li><p>One Element Information Item for the root element</p></li>
    <li><p>One Comment Information Item for each Comment</p></li>
    <li><p>One Processing Instruction Information Item for each Processing Instruction</p></li>
    </ul>
    </p></li>
    <li><p>Notation Declarations</p></li>
    <li><p>Unparsed Entities</p></li>
    <li><p>Base URI</p></li>
    <li><p>Standalone Declaration</p></li>
    <li><p>Version Declaration</p></li>
    <li><p>All declarations processed</p></li>
</ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Element Information Items</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">An Element Information Item Includes:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>namespace name</p></li>
<li><p>local name</p></li> 
<li><p>children: a list of
              element, processing instruction, 
              unexpanded entity reference, 
              character, and comment
              information items, one for each element, 
              processing instruction, unexpanded entity reference, 
              data character, 
              and comment appearing immediately within the
              current element
</p></li>
<li><p>attributes: an unordered set of attribute information items, one for each of the attributes
              (specified or defaulted from the DTD) of this element. <code>xmlns</code> attributes 
              declarations are not include. </p></li>
<li><p>declared namespaces: an unordered set of namespace declaration information items,
              one for each of the namespaces declared either in 
              the start-tag of this element or defaulted from the DTD. </p></li> 
<li><p>in-scope namespaces: An unordered set 
             of namespace declaration information items, one for each of the namespaces in
              effect for this element</p></li> 
<li><p>base URI: The absolute URI of the external entity in which this element appears, as
              defined in XML Base. If this is not known, this property is null. </p></li>
<li><p>parent</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Attributes</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>xlink:type="simple"
xlink:href="http://www.amrecords.com/"
xlink:type =  "simple"
xlink:show = "onLoad"
xlink:href="hotcop.jpg"
ALT="Victor Willis in Cop Outfit"
WIDTH=" 100 "
HEIGHT=' 200 '
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">An Attribute Information Item Includes:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>namespace name </p></li>
<li><p>local name</p></li> 
<li><p>normalized value</p></li> 
         <li><p>specified: A flag indicating whether this attribute was actually specified in the start-tag of its
              element, or was defaulted from the DTD</p></li> 
<li><p>default: An ordered list of character information items, one for each character appearing in
              the default value specified for this attribute in the DTD, if any. </p></li> 
<li><p>attribute type: <ul>
 <li><p>ID</p></li><li><p>IDREF</p></li><li><p>IDREFS</p></li><li><p>ENTITY</p></li><li><p>ENTITIES</p></li><li><p>NMTOKEN</p></li>
 <li><p>NMTOKENS</p></li><li><p>NOTATION</p></li><li><p>CDATA</p></li>
 <li><p>ENUMERATED</p></li>
 <li><p>unknown</p></li>
 <li><p>undeclared</p></li>
              </ul></p></li> 
    <li><p>owner element</p></li>
    <li><p>references: if the attribute type is IDREF, IDREFS, ENTITY, ENTITIES, or NOTATION, 
    then the value of this property is an ordered list of the element, unparsed entity, or 
    notation information items referred to in the attribute value</p></li> 
</ul><hr color="red" style="color: red" size="2"><h2>Comments</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>  &lt;!-- The publisher is actually Polygram but I needed 
       an example of a general entity reference. --&gt;
&lt;!--  &lt;PUBLISHER xlink:type="simple" xlink:href="http://www.amrecords.com/"&gt;
    A &amp;amp; M Records
  &lt;/PUBLISHER&gt;
  &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;
  &lt;YEAR&gt;1978&lt;/YEAR&gt;
  &lt;ARTIST&gt;Village People&lt;/ARTIST&gt;
&lt;/SONG&gt; --&gt;
&lt;!-- You can tell what album I was 
     listening to when I wrote this example --&gt;
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">A comment Information Item includes:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>content</p></li> 
<li><p>parent</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>A Processing Instruction Information Item Includes:</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?robots index="yes" follow="no"?&gt;
&lt;?php 
  mysql_connect("database.unc.edu", "clerk", "password"); 
  $result = mysql("CYNW", "SELECT LastName, FirstName FROM Employees 
    ORDER BY LastName, FirstName"); 
  $i = 0;
  while ($i &lt; mysql_numrows ($result)) {
     $fields = mysql_fetch_row($result);
     echo "&lt;person&gt;$fields[1] $fields[0] &lt;/person&gt;\r\n";
     $i++;
  }
  mysql_close();
?&gt;
</code></pre><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>target</p></li>
<li><p>content</p></li> 
<li><p>base URI</p></li>
<li><p>parent</p></li>
<li><p>notation (named by the target)</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Characters</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>A character is one Unicode character in the content of an element,
attribute value, comment or processing instruction data.</p></li>
<li><p>A Character Information Item includes:
<dl>
<dt>character code</dt><dd> The Unicode value in the range 0 to #x10FFFF
 of the character </dd>
<dt>element content whitespace</dt><dd> A flag indicating whether the character is whitespace
              appearing within element content </dd>
<dt>parent</dt>
</dl>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Namespace Information Items</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude"><li><p>A Namespace Information Item includes:
<ul>
<li><p>prefix</p></li>
<li><p>namespace name (the namespace URI) </p></li>
</ul>
</p></li>
<li><p>Namespace Information Items are attached to elements,
one for each namespace in scope on the element
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Document Type Declaration</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">A Document Type Declaration Information Item includes:</p><dl xmlns:xinclude="http://www.w3.org/2001/XInclude">
<dt>system identifier</dt> 
<dt>public identifier</dt> 
<dt>children</dt><dd>Only the processing instruction
              information items in the internal DTD subset and
              external DTD subsets.</dd>
<dt>parent</dt>
</dl><hr color="red" style="color: red" size="2"><h2>Unparsed Entity Information Items</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Each unparsed entity information item includes</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
        <li><p>name</p></li>
        <li><p>system identifier</p></li>
        <li><p>public identifier</p></li>
        <li><p>declaration base URI</p></li>
        <li><p>notation name</p></li>
        <li><p>notation</p></li>
      </ul><hr color="red" style="color: red" size="2"><h2>The Infoset Omits:</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The internal and external DTD subsets; especially 
  <code>ELEMENT</code>
  and <code>ATTLIST</code> declarations</p></li>
  <li><p>Whether an empty element uses two tags or one</p></li>
  <li><p>The unnormalized attribute values</p></li>
  <li><p>What kind of quotes surround attributes</p></li>
  <li><p>Insignificant white space in tags</p></li>
  <li><p>White space that occurs between attributes</p></li>
  <li><p>Attribute order</p></li>
  <li><p>CDATA sections</p></li>
  <li><p>Parsed entities</p></li>
  <li><p>Comments in the DTD</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Five Layers of XML Processing</h2><table xmlns:xinclude="http://www.w3.org/2001/XInclude" border="1" align="center">
<tr><td align="center">Semantics</td></tr>
<tr><td align="center">Structure</td></tr>
<tr><td align="center">Syntax</td></tr>
<tr><td align="center">Lexical</td></tr>
<tr><td align="center">Binary</td></tr>
</table><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>XML Infoset Specification: <a href="http://www.w3.org/TR/xml-infoset">http://www.w3.org/TR/xml-infoset</a></p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Part II: Writing XML Documents with Java</h2><blockquote xmlns:xinclude="http://www.w3.org/2001/XInclude" cite="http://www.itworld.com/nl/xml_prac/04182002/">
I have learned to be even more skeptical than before about the slew of
 APIs doing the rounds in the XML development community. An XML instance 
 is just a documents, guys; you need to understand the document structure and 
 document interchange choreography of your systems. Don't let some API 
 get in the way of your understanding of XML systems at the document level. 
 If you do, you run the risk becoming a slave to the APIs and hitting a wall when the APIs fail you. 
</blockquote><p xmlns:xinclude="http://www.w3.org/2001/XInclude">--Sean McGrath <br>
Read the rest in <a href="http://www.itworld.com/nl/xml_prac/04182002/">ITworld.com - XML IN PRACTICE - APIs Considered Harmful</a>
</p><hr color="red" style="color: red" size="2"><h2>You don't always need a new API</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>XML documents are text</p></li>
  <li><p>Any <code>Writer</code> can produce an XML document</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Unicode</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>XML documents and APIs are Unicode</p></li>
  <li><p>Unicode encodings:
    <ul>
      <li><p>UTF-8</p></li>
      <li><p>UTF-16 big endian</p></li>
      <li><p>UCS-4 big endian</p></li>
      <li><p>UTF-16 little endian</p></li>
      <li><p>UCS-4 little endian</p></li>
    </ul>
  </p></li>
  <li><p>Non-Unicode encodings:
    <ul>
      <li><p>ASCII (subset of UTF-8)</p></li>
      <li><p>MacRoman</p></li>
      <li><p>Windows ANSI</p></li>
      <li><p>Latin 1 through Latin 15</p></li>
      <li><p>SJIS Japanese</p></li>
      <li><p>Big-5 Chinese</p></li>
      <li><p>K0I8R Cyrillic</p></li>
      <li><p>Many others...</p></li>
    </ul>
  </p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Readers and Writers</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Java's <code>InputStreamReader</code> and <code>OutputStreamWriter</code> 
  classes are very helpful
<pre><code>URL u = new URL(
 "<a href="http://www.ascc.net/xml/test/wfdtd/utf-8/application_xml/zh-utf8-8.xml">http://www.ascc.net/xml/test/wfdtd/utf-8/application_xml/zh-utf8-8.xml</a>");
InputStream in = u.openStream();
<strong>InputStreamReader reader = new InputStreamReader(in, "UTF-8");</strong>
int c;
while ((c = in.read()) != -1) System.out.write(c); 
</code></pre>  
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>A Java program that writes Fibonacci numbers into a text file</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;


public class FibonacciText {

  public static void main(String[] args) {

    try {
      OutputStream fout = new FileOutputStream("fibonacci.txt");
      Writer out = new OutputStreamWriter(fout, "8859_1");

      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;

      for (int i = 1; i &lt;= 25; i++) {
        out.write(low.toString() + "\r\n");
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      out.write(high.toString() + "\r\n");

      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>fibonacci.txt</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>1
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
1597
2584
4181
6765
10946
17711
28657
46368
75025
121393
317811
</code></pre><hr color="red" style="color: red" size="2"><h2>A Java program that writes Fibonacci numbers into an XML file</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;


public class FibonacciXML {

  public static void main(String[] args) {
   
    try {
      OutputStream  fout = new FileOutputStream("fibonacci.xml");
      Writer out = new OutputStreamWriter(fout);      
      
      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;      
      
      out.write("&lt;?xml version=\"1.0\"?&gt;\r\n");  
      out.write("&lt;Fibonacci_Numbers&gt;\r\n");  
      for (int i = 1; i &lt;= 25; i++) {
        out.write("  &lt;fibonacci index=\"" + i + "\"&gt;");
        out.write(low.toString());
        out.write("&lt;/fibonacci&gt;\r\n");
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      out.write("&lt;/Fibonacci_Numbers&gt;");  
 
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>fibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;</code></pre><hr color="red" style="color: red" size="2"><h2>Single quoted attribute values are a little cleaner</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;


public class FibonacciApos {

  public static void main(String[] args) {
   
    try {
      OutputStream  fout = new FileOutputStream("fibonacci_apos.xml");
      Writer out = new OutputStreamWriter(fout);      
      
      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;      
      
      out.write("&lt;?xml version='1.0'?&gt;\r\n");  
      out.write("&lt;Fibonacci_Numbers&gt;\r\n");  
      for (int i = 1; i &lt;= 25; i++) {
        out.write("  &lt;fibonacci index='" + i + "'&gt;");
        out.write(low.toString());
        out.write("&lt;/fibonacci&gt;\r\n");
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      out.write("&lt;/Fibonacci_Numbers&gt;");  
 
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Suppose we want to use a different encoding than UTF-8</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;


public class FibonacciLatin1 {

  public static void main(String[] args) {
   
    try {
      OutputStream fout = new FileOutputStream("fibonacci_Latin_1.xml");
      Writer out = new OutputStreamWriter(fout, "8859_1");      
      
      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;      
      
      out.write("&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;\r\n");  
      out.write("&lt;Fibonacci_Numbers&gt;\r\n");  
      for (int i = 1; i &lt;= 25; i++) {
        out.write("  &lt;fibonacci index=\"" + i + "\"&gt;");
        out.write(low.toString());
        out.write("&lt;/fibonacci&gt;\r\n");
        
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      out.write("&lt;/Fibonacci_Numbers&gt;");  
 
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>fibonacci_Latin_1.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;</code></pre><hr color="red" style="color: red" size="2"><h2>Suppose you want to include a DTD</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;


public class FibonacciDTD {

  public static void main(String[] args) {
   
    try {
      OutputStream fout = new FileOutputStream("valid_fibonacci.xml");
      Writer out = new OutputStreamWriter(fout, "UTF-8");      
      
      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;      
      
      out.write("&lt;?xml version=\"1.0\"?&gt;\r\n");  
      out.write("&lt;!DOCTYPE Fibonacci_Numbers [\r\n");
      out.write("  &lt;!ELEMENT Fibonacci_Numbers (fibonacci*)&gt;\r\n");      
      out.write("  &lt;!ELEMENT fibonacci (#PCDATA)&gt;\r\n");      
      out.write("  &lt;!ATTLIST fibonacci index CDATA #IMPLIED&gt;\r\n");      
      out.write("]&gt;\r\n");  
      out.write("&lt;Fibonacci_Numbers&gt;\r\n");  
      for (int i = 1; i &lt;= 25; i++) {
        out.write("  &lt;fibonacci index=\"" + i + "\"&gt;");
        out.write(low.toString());
        out.write("&lt;/fibonacci&gt;\r\n");
        
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      out.write("&lt;/Fibonacci_Numbers&gt;");  
 
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>valid_fibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE Fibonacci_Numbers [
  &lt;!ELEMENT Fibonacci_Numbers (fibonacci*)&gt;
  &lt;!ELEMENT fibonacci (#PCDATA)&gt;
  &lt;!ATTLIST fibonacci index CDATA #IMPLIED&gt;
]&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="0"&gt;0&lt;/fibonacci&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;</code></pre><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question2.gif" width="224" height="207">
  </div><hr color="red" style="color: red" size="2"><h2>Converting data to XML</h2><hr color="red" style="color: red" size="2"><h2>Sample Tab Delimited Data: Baseball Statistics</h2><code xmlns:xinclude="http://www.w3.org/2001/XInclude">
<table>
<tr><th>Surname</th><th>FirstName</th><th>Team</th><th>Position</th><th>Games Played</th><th>Games Started</th><th>AtBats</th><th>Runs</th><th>Hits</th><th>Doubles</th><th>Triples</th><th>Home runs</th><th>RBI</th><th>Stolen Bases</th><th>Caught Stealing</th><th>Sacrifice Hits</th><th>Sacrifice Flies</th><th>Errors</th><th>PB</th><th>Walks</th><th>Strike outs</th><th>Hit by pitch</th><th></th></tr>
<tr><td>Anderson</td><td>Garret </td><td>ANA</td><td>Outfield</td><td>156</td><td>151</td><td>622</td><td>62</td><td>183</td><td>41</td><td>7</td><td>15</td><td>79</td><td>8</td><td>3</td><td>3</td><td>3</td><td>6</td><td>0</td><td>29</td><td>80</td><td>1</td><td></td></tr>
<tr><td>Baughman</td><td>Justin </td><td>ANA</td><td>Second Base</td><td>62</td><td>54</td><td>196</td><td>24</td><td>50</td><td>9</td><td>1</td><td>1</td><td>20</td><td>10</td><td>4</td><td>5</td><td>3</td><td>8</td><td>0</td><td>6</td><td>36</td><td>1</td><td></td></tr>
<tr><td>Bolick</td><td>Frank </td><td>ANA</td><td>Third Base</td><td>21</td><td>11</td><td>45</td><td>3</td><td>7</td><td>2</td><td>0</td><td>1</td><td>2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>11</td><td>8</td><td>0</td><td></td></tr>
<tr><td>Disarcina</td><td>Gary </td><td>ANA</td><td>Shortstop</td><td>157</td><td>155</td><td>551</td><td>73</td><td>158</td><td>39</td><td>3</td><td>3</td><td>56</td><td>12</td><td>7</td><td>12</td><td>3</td><td>14</td><td>0</td><td>21</td><td>51</td><td>8</td><td></td></tr>
<tr><td>Edmonds</td><td>Jim </td><td>ANA</td><td>Outfield</td><td>154</td><td>150</td><td>599</td><td>115</td><td>184</td><td>42</td><td>1</td><td>25</td><td>91</td><td>7</td><td>5</td><td>1</td><td>1</td><td>5</td><td>0</td><td>57</td><td>114</td><td>1</td><td></td></tr>
<tr><td>Erstad</td><td>Darin </td><td>ANA</td><td>Outfield</td><td>133</td><td>129</td><td>537</td><td>84</td><td>159</td><td>39</td><td>3</td><td>19</td><td>82</td><td>20</td><td>6</td><td>1</td><td>3</td><td>3</td><td>0</td><td>43</td><td>77</td><td>6</td><td></td></tr>
<tr><td>Garcia</td><td>Carlos </td><td>ANA</td><td>Second Base</td><td>19</td><td>10</td><td>35</td><td>4</td><td>5</td><td>1</td><td>0</td><td>0</td><td>0</td><td>2</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>11</td><td>1</td><td></td></tr>
<tr><td>Glaus</td><td>Troy </td><td>ANA</td><td>Third Base</td><td>48</td><td>45</td><td>165</td><td>19</td><td>36</td><td>9</td><td>0</td><td>1</td><td>23</td><td>1</td><td>0</td><td>0</td><td>2</td><td>7</td><td>0</td><td>15</td><td>51</td><td>0</td><td></td></tr>
<tr><td>Greene</td><td>Todd </td><td>ANA</td><td>Outfield</td><td>29</td><td>15</td><td>71</td><td>3</td><td>18</td><td>4</td><td>0</td><td>1</td><td>7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>2</td><td>20</td><td>0</td><td></td></tr>
<tr><td>Helfand</td><td>Eric </td><td>ANA</td><td>Catcher</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr>
<tr><td>Hollins</td><td>Dave </td><td>ANA</td><td>Third Base</td><td>101</td><td>98</td><td>363</td><td>60</td><td>88</td><td>16</td><td>2</td><td>11</td><td>39</td><td>11</td><td>3</td><td>2</td><td>2</td><td>17</td><td>0</td><td>44</td><td>69</td><td>7</td><td></td></tr>
<tr><td>Jefferies</td><td>Gregg </td><td>ANA</td><td>Outfield</td><td>19</td><td>18</td><td>72</td><td>7</td><td>25</td><td>6</td><td>0</td><td>1</td><td>10</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>5</td><td>0</td><td></td></tr>
<tr><td>Johnson</td><td>Mark </td><td>ANA</td><td>First Base</td><td>10</td><td>2</td><td>14</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>6</td><td>0</td><td></td></tr>
<tr><td>Kreuter</td><td>Chad </td><td>ANA</td><td>Catcher</td><td>96</td><td>74</td><td>252</td><td>27</td><td>63</td><td>10</td><td>1</td><td>2</td><td>33</td><td>1</td><td>0</td><td>5</td><td>1</td><td>9</td><td>5</td><td>33</td><td>49</td><td>3</td><td></td></tr>
<tr><td>Martin</td><td>Norberto </td><td>ANA</td><td>Second Base</td><td>79</td><td>50</td><td>195</td><td>20</td><td>42</td><td>2</td><td>0</td><td>1</td><td>13</td><td>3</td><td>1</td><td>3</td><td>2</td><td>4</td><td>0</td><td>6</td><td>29</td><td>0</td><td></td></tr>
<tr><td>Mashore</td><td>Damon </td><td>ANA</td><td>Outfield</td><td>43</td><td>24</td><td>98</td><td>13</td><td>23</td><td>6</td><td>0</td><td>2</td><td>11</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>9</td><td>22</td><td>3</td><td></td></tr>
<tr><td>Molina</td><td>Ben </td><td>ANA</td><td>Catcher</td><td>2</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr>
<tr><td>Nevin</td><td>Phil </td><td>ANA</td><td>Catcher</td><td>75</td><td>65</td><td>237</td><td>27</td><td>54</td><td>8</td><td>1</td><td>8</td><td>27</td><td>0</td><td>0</td><td>0</td><td>2</td><td>5</td><td>20</td><td>17</td><td>67</td><td>5</td><td></td></tr>
<tr><td>Obrien</td><td>Charlie </td><td>ANA</td><td>Catcher</td><td>62</td><td>58</td><td>175</td><td>13</td><td>45</td><td>9</td><td>0</td><td>4</td><td>18</td><td>0</td><td>0</td><td>3</td><td>3</td><td>4</td><td>1</td><td>10</td><td>33</td><td>2</td><td></td></tr>
<tr><td>Palmeiro</td><td>Orlando </td><td>ANA</td><td>Outfield</td><td>74</td><td>34</td><td>165</td><td>28</td><td>53</td><td>7</td><td>2</td><td>0</td><td>21</td><td>5</td><td>4</td><td>7</td><td>0</td><td>0</td><td>0</td><td>20</td><td>11</td><td>0</td><td></td></tr>
<tr><td>Pritchett</td><td>Chris </td><td>ANA</td><td>First Base</td><td>31</td><td>19</td><td>80</td><td>12</td><td>23</td><td>2</td><td>1</td><td>2</td><td>8</td><td>2</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>4</td><td>16</td><td>0</td><td></td></tr>
<tr><td>Salmon</td><td>Tim </td><td>ANA</td><td>Designated Hitter</td><td>136</td><td>130</td><td>463</td><td>84</td><td>139</td><td>28</td><td>1</td><td>26</td><td>88</td><td>0</td><td>1</td><td>0</td><td>10</td><td>2</td><td>0</td><td>90</td><td>100</td><td>3</td><td></td></tr>
<tr><td>Shipley</td><td>Craig </td><td>ANA</td><td>Third Base</td><td>77</td><td>32</td><td>147</td><td>18</td><td>38</td><td>7</td><td>1</td><td>2</td><td>17</td><td>0</td><td>4</td><td>4</td><td>1</td><td>3</td><td>0</td><td>5</td><td>22</td><td>5</td><td></td></tr>
<tr><td>Velarde</td><td>Randy </td><td>ANA</td><td>Second Base</td><td>51</td><td>50</td><td>188</td><td>29</td><td>49</td><td>13</td><td>1</td><td>4</td><td>26</td><td>7</td><td>2</td><td>0</td><td>1</td><td>4</td><td>0</td><td>34</td><td>42</td><td>1</td><td></td></tr>
<tr><td>Walbeck</td><td>Matt </td><td>ANA</td><td>Catcher</td><td>108</td><td>91</td><td>338</td><td>41</td><td>87</td><td>15</td><td>2</td><td>6</td><td>46</td><td>1</td><td>1</td><td>5</td><td>5</td><td>7</td><td>8</td><td>30</td><td>68</td><td>2</td><td></td></tr>
<tr><td>Williams</td><td>Reggie </td><td>ANA</td><td>Outfield</td><td>29</td><td>7</td><td>36</td><td>7</td><td>13</td><td>1</td><td>0</td><td>1</td><td>5</td><td>3</td><td>3</td><td>1</td><td>0</td><td>0</td><td>0</td><td>7</td><td>11</td><td>1</td><td></td></tr>
</table>
</code><hr color="red" style="color: red" size="2"><h2>A Program to convert tab delimited data to XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;


public class BaseballTabToXML {

  public static void main(String[] args) {
     
    try {
      FileInputStream fin = new FileInputStream(args[0]);
      BufferedReader in 
       = new BufferedReader(new InputStreamReader(fin));
      
      FileOutputStream fout 
       = new FileOutputStream("baseballstats.xml");
      Writer out = new OutputStreamWriter(fout, "UTF-8");      
      out.write("&lt;?xml version=\"1.0\"?&gt;\r\n");  
      out.write("&lt;players&gt;\r\n");
      String playerStats;  
      while ((playerStats = in.readLine()) != null) {
        String[] stats = splitLine(playerStats);         
        out.write("  &lt;player&gt;\r\n");
          out.write("    &lt;first_name&gt;" + stats[1] + "&lt;/first_name&gt;\r\n");
          out.write("    &lt;surname&gt;" + stats[0] + "&lt;/surname&gt;\r\n");
          out.write("    &lt;games_played&gt;" + stats[4] + "&lt;/games_played&gt;\r\n");
          out.write("    &lt;at_bats&gt;" + stats[6] + "&lt;/at_bats&gt;\r\n");
          out.write("    &lt;runs&gt;" + stats[7] + "&lt;/runs&gt;\r\n");
          out.write("    &lt;hits&gt;" + stats[8] + "&lt;/hits&gt;\r\n");
          out.write("    &lt;doubles&gt;" + stats[9] + "&lt;/doubles&gt;\r\n");
          out.write("    &lt;triples&gt;" + stats[10] + "&lt;/triples&gt;\r\n");
          out.write("    &lt;home_runs&gt;" + stats[11] + "&lt;/home_runs&gt;\r\n");
          out.write("    &lt;stolen_bases&gt;" + stats[12] + "&lt;/stolen_bases&gt;\r\n");
          out.write("    &lt;caught_stealing&gt;" + stats[14] + "&lt;/caught_stealing&gt;\r\n");
          out.write("    &lt;sacrifice_hits&gt;" + stats[15] + "&lt;/sacrifice_hits&gt;\r\n");
          out.write("    &lt;sacrifice_flies&gt;" + stats[16] + "&lt;/sacrifice_flies&gt;\r\n");
          out.write("    &lt;errors&gt;" + stats[17] + "&lt;/errors&gt;\r\n");
          out.write("    &lt;passed_by_ball&gt;" + stats[18] + "&lt;/passed_by_ball&gt;\r\n");
          out.write("    &lt;walks&gt;" + stats[19] + "&lt;/walks&gt;\r\n");
          out.write("    &lt;strike_outs&gt;" + stats[20] + "&lt;/strike_outs&gt;\r\n");
          out.write("    &lt;hit_by_pitch&gt;" + stats[21] + "&lt;/hit_by_pitch&gt;\r\n");
        out.write("  &lt;/player&gt;\r\n");
      }  
      out.write("&lt;/players&gt;\r\n");  
      out.close();
      in.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }
    catch (ArrayIndexOutOfBoundsException e) {
      System.out.println("Usage: java BaseballTabToXML input_file.tab");
    }

  }

  public static String[] splitLine(String playerStats) {
    
    // count the number of tabs
    int numTabs = 0;
    for (int i = 0; i &lt; playerStats.length(); i++) {
      if (playerStats.charAt(i) == '\t') numTabs++;
    }
    int numFields = numTabs + 1;
    String[] fields = new String[numFields];
    int position = 0;
    for (int i = 0; i &lt; numFields; i++) {
      StringBuffer field = new StringBuffer();
      while (position &lt; playerStats.length() 
       &amp;&amp; playerStats.charAt(position++) != '\t') {
        field.append(playerStats.charAt(position-1));
      }
      fields[i] = field.toString();
    }    
    return fields;
    
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Baseball Stats in XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;players&gt;
  &lt;player&gt;
    &lt;first_name&gt;FirstName&lt;/first_name&gt;
    &lt;surname&gt;Surname&lt;/surname&gt;
    &lt;games_played&gt;Games Played&lt;/games_played&gt;
    &lt;at_bats&gt;AtBats&lt;/at_bats&gt;
    &lt;runs&gt;Runs&lt;/runs&gt;
    &lt;hits&gt;Hits&lt;/hits&gt;
    &lt;doubles&gt;Doubles&lt;/doubles&gt;
    &lt;triples&gt;Triples&lt;/triples&gt;
    &lt;home_runs&gt;Home runs&lt;/home_runs&gt;
    &lt;stolen_bases&gt;RBI&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;Caught Stealing&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;Sacrifice Hits&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;Sacrifice Flies&lt;/sacrifice_flies&gt;
    &lt;errors&gt;Errors&lt;/errors&gt;
    &lt;passed_by_ball&gt;PB&lt;/passed_by_ball&gt;
    &lt;walks&gt;Walks&lt;/walks&gt;
    &lt;strike_outs&gt;Strike outs&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;Hit by pitch&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Garret &lt;/first_name&gt;
    &lt;surname&gt;Anderson&lt;/surname&gt;
    &lt;games_played&gt;156&lt;/games_played&gt;
    &lt;at_bats&gt;622&lt;/at_bats&gt;
    &lt;runs&gt;62&lt;/runs&gt;
    &lt;hits&gt;183&lt;/hits&gt;
    &lt;doubles&gt;41&lt;/doubles&gt;
    &lt;triples&gt;7&lt;/triples&gt;
    &lt;home_runs&gt;15&lt;/home_runs&gt;
    &lt;stolen_bases&gt;79&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;6&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;29&lt;/walks&gt;
    &lt;strike_outs&gt;80&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Justin &lt;/first_name&gt;
    &lt;surname&gt;Baughman&lt;/surname&gt;
    &lt;games_played&gt;62&lt;/games_played&gt;
    &lt;at_bats&gt;196&lt;/at_bats&gt;
    &lt;runs&gt;24&lt;/runs&gt;
    &lt;hits&gt;50&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;20&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;8&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;6&lt;/walks&gt;
    &lt;strike_outs&gt;36&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Frank &lt;/first_name&gt;
    &lt;surname&gt;Bolick&lt;/surname&gt;
    &lt;games_played&gt;21&lt;/games_played&gt;
    &lt;at_bats&gt;45&lt;/at_bats&gt;
    &lt;runs&gt;3&lt;/runs&gt;
    &lt;hits&gt;7&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;2&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;11&lt;/walks&gt;
    &lt;strike_outs&gt;8&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gary &lt;/first_name&gt;
    &lt;surname&gt;Disarcina&lt;/surname&gt;
    &lt;games_played&gt;157&lt;/games_played&gt;
    &lt;at_bats&gt;551&lt;/at_bats&gt;
    &lt;runs&gt;73&lt;/runs&gt;
    &lt;hits&gt;158&lt;/hits&gt;
    &lt;doubles&gt;39&lt;/doubles&gt;
    &lt;triples&gt;3&lt;/triples&gt;
    &lt;home_runs&gt;3&lt;/home_runs&gt;
    &lt;stolen_bases&gt;56&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;7&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;12&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;14&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;21&lt;/walks&gt;
    &lt;strike_outs&gt;51&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;8&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Jim &lt;/first_name&gt;
    &lt;surname&gt;Edmonds&lt;/surname&gt;
    &lt;games_played&gt;154&lt;/games_played&gt;
    &lt;at_bats&gt;599&lt;/at_bats&gt;
    &lt;runs&gt;115&lt;/runs&gt;
    &lt;hits&gt;184&lt;/hits&gt;
    &lt;doubles&gt;42&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;25&lt;/home_runs&gt;
    &lt;stolen_bases&gt;91&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;5&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;5&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;57&lt;/walks&gt;
    &lt;strike_outs&gt;114&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Darin &lt;/first_name&gt;
    &lt;surname&gt;Erstad&lt;/surname&gt;
    &lt;games_played&gt;133&lt;/games_played&gt;
    &lt;at_bats&gt;537&lt;/at_bats&gt;
    &lt;runs&gt;84&lt;/runs&gt;
    &lt;hits&gt;159&lt;/hits&gt;
    &lt;doubles&gt;39&lt;/doubles&gt;
    &lt;triples&gt;3&lt;/triples&gt;
    &lt;home_runs&gt;19&lt;/home_runs&gt;
    &lt;stolen_bases&gt;82&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;6&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;3&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;43&lt;/walks&gt;
    &lt;strike_outs&gt;77&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;6&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Carlos &lt;/first_name&gt;
    &lt;surname&gt;Garcia&lt;/surname&gt;
    &lt;games_played&gt;19&lt;/games_played&gt;
    &lt;at_bats&gt;35&lt;/at_bats&gt;
    &lt;runs&gt;4&lt;/runs&gt;
    &lt;hits&gt;5&lt;/hits&gt;
    &lt;doubles&gt;1&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;1&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;3&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Troy &lt;/first_name&gt;
    &lt;surname&gt;Glaus&lt;/surname&gt;
    &lt;games_played&gt;48&lt;/games_played&gt;
    &lt;at_bats&gt;165&lt;/at_bats&gt;
    &lt;runs&gt;19&lt;/runs&gt;
    &lt;hits&gt;36&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;23&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;7&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;15&lt;/walks&gt;
    &lt;strike_outs&gt;51&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Todd &lt;/first_name&gt;
    &lt;surname&gt;Greene&lt;/surname&gt;
    &lt;games_played&gt;29&lt;/games_played&gt;
    &lt;at_bats&gt;71&lt;/at_bats&gt;
    &lt;runs&gt;3&lt;/runs&gt;
    &lt;hits&gt;18&lt;/hits&gt;
    &lt;doubles&gt;4&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;7&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;2&lt;/walks&gt;
    &lt;strike_outs&gt;20&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Eric &lt;/first_name&gt;
    &lt;surname&gt;Helfand&lt;/surname&gt;
    &lt;games_played&gt;0&lt;/games_played&gt;
    &lt;at_bats&gt;0&lt;/at_bats&gt;
    &lt;runs&gt;0&lt;/runs&gt;
    &lt;hits&gt;0&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;0&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Dave &lt;/first_name&gt;
    &lt;surname&gt;Hollins&lt;/surname&gt;
    &lt;games_played&gt;101&lt;/games_played&gt;
    &lt;at_bats&gt;363&lt;/at_bats&gt;
    &lt;runs&gt;60&lt;/runs&gt;
    &lt;hits&gt;88&lt;/hits&gt;
    &lt;doubles&gt;16&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;11&lt;/home_runs&gt;
    &lt;stolen_bases&gt;39&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;2&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;17&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;44&lt;/walks&gt;
    &lt;strike_outs&gt;69&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;7&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gregg &lt;/first_name&gt;
    &lt;surname&gt;Jefferies&lt;/surname&gt;
    &lt;games_played&gt;19&lt;/games_played&gt;
    &lt;at_bats&gt;72&lt;/at_bats&gt;
    &lt;runs&gt;7&lt;/runs&gt;
    &lt;hits&gt;25&lt;/hits&gt;
    &lt;doubles&gt;6&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;10&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;5&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Mark &lt;/first_name&gt;
    &lt;surname&gt;Johnson&lt;/surname&gt;
    &lt;games_played&gt;10&lt;/games_played&gt;
    &lt;at_bats&gt;14&lt;/at_bats&gt;
    &lt;runs&gt;1&lt;/runs&gt;
    &lt;hits&gt;1&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;6&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chad &lt;/first_name&gt;
    &lt;surname&gt;Kreuter&lt;/surname&gt;
    &lt;games_played&gt;96&lt;/games_played&gt;
    &lt;at_bats&gt;252&lt;/at_bats&gt;
    &lt;runs&gt;27&lt;/runs&gt;
    &lt;hits&gt;63&lt;/hits&gt;
    &lt;doubles&gt;10&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;33&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;9&lt;/errors&gt;
    &lt;passed_by_ball&gt;5&lt;/passed_by_ball&gt;
    &lt;walks&gt;33&lt;/walks&gt;
    &lt;strike_outs&gt;49&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Norberto &lt;/first_name&gt;
    &lt;surname&gt;Martin&lt;/surname&gt;
    &lt;games_played&gt;79&lt;/games_played&gt;
    &lt;at_bats&gt;195&lt;/at_bats&gt;
    &lt;runs&gt;20&lt;/runs&gt;
    &lt;hits&gt;42&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;13&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;6&lt;/walks&gt;
    &lt;strike_outs&gt;29&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Damon &lt;/first_name&gt;
    &lt;surname&gt;Mashore&lt;/surname&gt;
    &lt;games_played&gt;43&lt;/games_played&gt;
    &lt;at_bats&gt;98&lt;/at_bats&gt;
    &lt;runs&gt;13&lt;/runs&gt;
    &lt;hits&gt;23&lt;/hits&gt;
    &lt;doubles&gt;6&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;11&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;9&lt;/walks&gt;
    &lt;strike_outs&gt;22&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Ben &lt;/first_name&gt;
    &lt;surname&gt;Molina&lt;/surname&gt;
    &lt;games_played&gt;2&lt;/games_played&gt;
    &lt;at_bats&gt;1&lt;/at_bats&gt;
    &lt;runs&gt;0&lt;/runs&gt;
    &lt;hits&gt;0&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;0&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Phil &lt;/first_name&gt;
    &lt;surname&gt;Nevin&lt;/surname&gt;
    &lt;games_played&gt;75&lt;/games_played&gt;
    &lt;at_bats&gt;237&lt;/at_bats&gt;
    &lt;runs&gt;27&lt;/runs&gt;
    &lt;hits&gt;54&lt;/hits&gt;
    &lt;doubles&gt;8&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;8&lt;/home_runs&gt;
    &lt;stolen_bases&gt;27&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;5&lt;/errors&gt;
    &lt;passed_by_ball&gt;20&lt;/passed_by_ball&gt;
    &lt;walks&gt;17&lt;/walks&gt;
    &lt;strike_outs&gt;67&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;5&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Charlie &lt;/first_name&gt;
    &lt;surname&gt;Obrien&lt;/surname&gt;
    &lt;games_played&gt;62&lt;/games_played&gt;
    &lt;at_bats&gt;175&lt;/at_bats&gt;
    &lt;runs&gt;13&lt;/runs&gt;
    &lt;hits&gt;45&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;4&lt;/home_runs&gt;
    &lt;stolen_bases&gt;18&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;1&lt;/passed_by_ball&gt;
    &lt;walks&gt;10&lt;/walks&gt;
    &lt;strike_outs&gt;33&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;2&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Orlando &lt;/first_name&gt;
    &lt;surname&gt;Palmeiro&lt;/surname&gt;
    &lt;games_played&gt;74&lt;/games_played&gt;
    &lt;at_bats&gt;165&lt;/at_bats&gt;
    &lt;runs&gt;28&lt;/runs&gt;
    &lt;hits&gt;53&lt;/hits&gt;
    &lt;doubles&gt;7&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;21&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;7&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;20&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chris &lt;/first_name&gt;
    &lt;surname&gt;Pritchett&lt;/surname&gt;
    &lt;games_played&gt;31&lt;/games_played&gt;
    &lt;at_bats&gt;80&lt;/at_bats&gt;
    &lt;runs&gt;12&lt;/runs&gt;
    &lt;hits&gt;23&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;8&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;1&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;4&lt;/walks&gt;
    &lt;strike_outs&gt;16&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Tim &lt;/first_name&gt;
    &lt;surname&gt;Salmon&lt;/surname&gt;
    &lt;games_played&gt;136&lt;/games_played&gt;
    &lt;at_bats&gt;463&lt;/at_bats&gt;
    &lt;runs&gt;84&lt;/runs&gt;
    &lt;hits&gt;139&lt;/hits&gt;
    &lt;doubles&gt;28&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;26&lt;/home_runs&gt;
    &lt;stolen_bases&gt;88&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;10&lt;/sacrifice_flies&gt;
    &lt;errors&gt;2&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;90&lt;/walks&gt;
    &lt;strike_outs&gt;100&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Craig &lt;/first_name&gt;
    &lt;surname&gt;Shipley&lt;/surname&gt;
    &lt;games_played&gt;77&lt;/games_played&gt;
    &lt;at_bats&gt;147&lt;/at_bats&gt;
    &lt;runs&gt;18&lt;/runs&gt;
    &lt;hits&gt;38&lt;/hits&gt;
    &lt;doubles&gt;7&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;17&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;4&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;3&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;5&lt;/walks&gt;
    &lt;strike_outs&gt;22&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;5&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Randy &lt;/first_name&gt;
    &lt;surname&gt;Velarde&lt;/surname&gt;
    &lt;games_played&gt;51&lt;/games_played&gt;
    &lt;at_bats&gt;188&lt;/at_bats&gt;
    &lt;runs&gt;29&lt;/runs&gt;
    &lt;hits&gt;49&lt;/hits&gt;
    &lt;doubles&gt;13&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;4&lt;/home_runs&gt;
    &lt;stolen_bases&gt;26&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;2&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;34&lt;/walks&gt;
    &lt;strike_outs&gt;42&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Matt &lt;/first_name&gt;
    &lt;surname&gt;Walbeck&lt;/surname&gt;
    &lt;games_played&gt;108&lt;/games_played&gt;
    &lt;at_bats&gt;338&lt;/at_bats&gt;
    &lt;runs&gt;41&lt;/runs&gt;
    &lt;hits&gt;87&lt;/hits&gt;
    &lt;doubles&gt;15&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;6&lt;/home_runs&gt;
    &lt;stolen_bases&gt;46&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;5&lt;/sacrifice_flies&gt;
    &lt;errors&gt;7&lt;/errors&gt;
    &lt;passed_by_ball&gt;8&lt;/passed_by_ball&gt;
    &lt;walks&gt;30&lt;/walks&gt;
    &lt;strike_outs&gt;68&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;2&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Reggie &lt;/first_name&gt;
    &lt;surname&gt;Williams&lt;/surname&gt;
    &lt;games_played&gt;29&lt;/games_played&gt;
    &lt;at_bats&gt;36&lt;/at_bats&gt;
    &lt;runs&gt;7&lt;/runs&gt;
    &lt;hits&gt;13&lt;/hits&gt;
    &lt;doubles&gt;1&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;5&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;7&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
&lt;/players&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>Converting data to XML while Processing it</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import java.text.*;
import java.util.*;

public class BattingAverage {

  public static void main(String[] args) {

    try {
      FileInputStream fin = new FileInputStream(args[0]);
      BufferedReader in
       = new BufferedReader(new InputStreamReader(fin));

      FileOutputStream fout
       = new FileOutputStream("battingaverages.xml");
      Writer out = new OutputStreamWriter(fout, "UTF-8");
      out.write("&lt;?xml version=\"1.0\"?&gt;\r\n");
      out.write("&lt;players&gt;\r\n");
      String playerStats;

      // for formatting batting averages
      DecimalFormat averages = (DecimalFormat)
        NumberFormat.getNumberInstance(Locale.US);
      averages.setMaximumFractionDigits(3);
      averages.setMinimumFractionDigits(3);
      averages.setMinimumIntegerDigits(0);

      while ((playerStats = in.readLine()) != null) {
        String[] stats = splitLine(playerStats);

        String formattedAverage;
        try {
          int atBats         = Integer.parseInt(stats[6]);
          int hits           = Integer.parseInt(stats[8]);

          if (atBats &lt;= 0) formattedAverage = "N/A";
          else {
            double average = hits / (double) atBats;
            formattedAverage = averages.format(average);
          }
        }
        catch (Exception e) {
          // skip this player
          continue;
        }

        out.write("  &lt;player&gt;\r\n");
        out.write("    &lt;first_name&gt;" + stats[1] + "&lt;/first_name&gt;\r\n");
        out.write("    &lt;surname&gt;" + stats[0] + "&lt;/surname&gt;\r\n");
        out.write("    &lt;batting_average&gt;" + formattedAverage
         + "&lt;/batting_average&gt;\r\n");
        out.write("  &lt;/player&gt;\r\n");
      }
      out.write("&lt;/players&gt;\r\n");
      out.close();
      in.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }
    catch (ArrayIndexOutOfBoundsException e) {
      System.out.println("Usage: java BattingAverage input_file.tab");
    }

  }

  public static String[] splitLine(String playerStats) {

    // count the number of tabs
    int numTabs = 0;
    for (int i = 0; i &lt; playerStats.length(); i++) {
      if (playerStats.charAt(i) == '\t') numTabs++;
    }
    int numFields = numTabs + 1;
    String[] fields = new String[numFields];
    int position = 0;
    for (int i = 0; i &lt; numFields; i++) {
      StringBuffer field = new StringBuffer();
      while (position &lt; playerStats.length()
       &amp;&amp; playerStats.charAt(position++) != '\t') {
        field.append(playerStats.charAt(position-1));
      }
      fields[i] = field.toString();
    }
    return fields;

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Batting Averages in XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;players&gt;
  &lt;player&gt;
    &lt;first_name&gt;Garret &lt;/first_name&gt;
    &lt;surname&gt;Anderson&lt;/surname&gt;
    &lt;batting_average&gt;.294&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Justin &lt;/first_name&gt;
    &lt;surname&gt;Baughman&lt;/surname&gt;
    &lt;batting_average&gt;.255&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Frank &lt;/first_name&gt;
    &lt;surname&gt;Bolick&lt;/surname&gt;
    &lt;batting_average&gt;.156&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gary &lt;/first_name&gt;
    &lt;surname&gt;Disarcina&lt;/surname&gt;
    &lt;batting_average&gt;.287&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Jim &lt;/first_name&gt;
    &lt;surname&gt;Edmonds&lt;/surname&gt;
    &lt;batting_average&gt;.307&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Darin &lt;/first_name&gt;
    &lt;surname&gt;Erstad&lt;/surname&gt;
    &lt;batting_average&gt;.296&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Carlos &lt;/first_name&gt;
    &lt;surname&gt;Garcia&lt;/surname&gt;
    &lt;batting_average&gt;.143&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Troy &lt;/first_name&gt;
    &lt;surname&gt;Glaus&lt;/surname&gt;
    &lt;batting_average&gt;.218&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Todd &lt;/first_name&gt;
    &lt;surname&gt;Greene&lt;/surname&gt;
    &lt;batting_average&gt;.254&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Eric &lt;/first_name&gt;
    &lt;surname&gt;Helfand&lt;/surname&gt;
    &lt;batting_average&gt;N/A&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Dave &lt;/first_name&gt;
    &lt;surname&gt;Hollins&lt;/surname&gt;
    &lt;batting_average&gt;.242&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gregg &lt;/first_name&gt;
    &lt;surname&gt;Jefferies&lt;/surname&gt;
    &lt;batting_average&gt;.347&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Mark &lt;/first_name&gt;
    &lt;surname&gt;Johnson&lt;/surname&gt;
    &lt;batting_average&gt;.071&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chad &lt;/first_name&gt;
    &lt;surname&gt;Kreuter&lt;/surname&gt;
    &lt;batting_average&gt;.250&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Norberto &lt;/first_name&gt;
    &lt;surname&gt;Martin&lt;/surname&gt;
    &lt;batting_average&gt;.215&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Damon &lt;/first_name&gt;
    &lt;surname&gt;Mashore&lt;/surname&gt;
    &lt;batting_average&gt;.235&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Ben &lt;/first_name&gt;
    &lt;surname&gt;Molina&lt;/surname&gt;
    &lt;batting_average&gt;.000&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Phil &lt;/first_name&gt;
    &lt;surname&gt;Nevin&lt;/surname&gt;
    &lt;batting_average&gt;.228&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Charlie &lt;/first_name&gt;
    &lt;surname&gt;Obrien&lt;/surname&gt;
    &lt;batting_average&gt;.257&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Orlando &lt;/first_name&gt;
    &lt;surname&gt;Palmeiro&lt;/surname&gt;
    &lt;batting_average&gt;.321&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chris &lt;/first_name&gt;
    &lt;surname&gt;Pritchett&lt;/surname&gt;
    &lt;batting_average&gt;.288&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Tim &lt;/first_name&gt;
    &lt;surname&gt;Salmon&lt;/surname&gt;
    &lt;batting_average&gt;.300&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Craig &lt;/first_name&gt;
    &lt;surname&gt;Shipley&lt;/surname&gt;
    &lt;batting_average&gt;.259&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Randy &lt;/first_name&gt;
    &lt;surname&gt;Velarde&lt;/surname&gt;
    &lt;batting_average&gt;.261&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Matt &lt;/first_name&gt;
    &lt;surname&gt;Walbeck&lt;/surname&gt;
    &lt;batting_average&gt;.257&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Reggie &lt;/first_name&gt;
    &lt;surname&gt;Williams&lt;/surname&gt;
    &lt;batting_average&gt;.361&lt;/batting_average&gt;
  &lt;/player&gt;
&lt;/players&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>The point is this:</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>XML files are text files. </p></li>
  <li><p>You can write XML files any way you can write a text file in Java
  or any other language for that matter.
   </p></li>
   <li><p>You have to follow well-formedness rules.</p></li>
   <li><p>You do have to use UTF-8 or specify a different encoding in the XML declaration.</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question4.gif" width="121" height="148">
  </div><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
   <li><p>
      <cite><a href="http://www.cafeconleche.org/books/xmljava/">Processing XML with Java</a></cite>
       <img src="images/xmljavasmallcover.jpg" width="168" height="211" align="right" hspace="20"> 

     <ul> 
     <li><p>Elliotte Rusty Harold</p></li>
     <li><p>Addison Wesley, 2002</p></li>
     <li><p>Chapters 3-4:<ul>
              <li><p>Chapter 3, Writing XML with Java: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch03.html">http://www.cafeconleche.org/books/xmljava/chapters/ch03.html</a></p></li>
              <li><p>Chapter 4, Converting Flat Files to XML: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch04.html">http://www.cafeconleche.org/books/xmljava/chapters/ch04.html</a></p></li>
</ul></p></li>
     </ul>
     <br clear="all">
   </p></li>  
  
  <li><p>For streams and readers and writers:
   <img src="images/javaio.s.gif" width="144" height="190" align="right" hspace="20"> 

  <ul>
  
<li><p><cite>Java I/O</cite></p></li>
  <li><p>Elliotte Rusty Harold</p></li>
  <li><p>O'Reilly &amp; Associates, 1999</p></li>
  <li><p>ISBN: 1-56592-485-1 </p></li>
</ul>

</p></li>
   <br clear="all">  

<li><p>
<img src="images/xian2medium.jpg" align="right" hspace="5" width="127" height="190">

For well-formedness rules and such:  
 <cite>XML in a Nutshell, 2nd Edition</cite>
 <ul>
    <li><p>Elliotte Rusty Harold and W. Scott Means</p></li>
    <li><p>O'Reilly &amp; Associates, 2002</p></li>
    <li><p>ISBN 0-596-00292-0</p></li>
</ul>
 <br clear="all"></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Part III: Reading XML Documents with SAX</h2><blockquote xmlns:xinclude="http://www.w3.org/2001/XInclude">
	Actually, SAX2 has ** MUCH ** better infoset support than DOM does.
Yes, I've done the detailed analysis.
	</blockquote><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
	--David Brownell on the xml-dev mailing list
	</p><hr color="red" style="color: red" size="2"><h2>Reading XML Documents</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The stereotypical "Desperate Perl 
  Hacker" (DPH) is supposed to be able to write an XML parser in a weekend.</p></li>
  <li><p>The parser does the hard work for you.</p></li>
  <li><p>Your code reads the document through the parser's API.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>SAX</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Public domain, developed on xml-dev mailing list</p></li>
  <li><p>Originally maintained by David Megginson</p></li>
  <li><p>Currently maintained by David Brownell</p></li>
  <li><p>org.xml.sax package</p></li>
  <li><p><a href="http://www.saxproject.org/">http://www.saxproject.org/</a></p></li>
  <li><p><a href="http://sax.sourceforge.net/">http://sax.sourceforge.net/</a></p></li>
  <li><p>Event based</p></li>
 </ul><hr color="red" style="color: red" size="2"><h2>SAX Parsers for Java</h2><table xmlns:xinclude="http://www.w3.org/2001/XInclude" width="100%" border="1">
<tr>
<th width="10%">Parser</th>
<th width="20%">URL</th>
<th width="10%">Validating</th>
<th width="10%">Namespaces</th>
<th width="10%">DOM1</th>
<th width="10%">DOM2</th>
<th width="10%">SAX1</th>
<th width="10%">SAX2</th>
<th width="10%">License</th>
</tr>
<tr>
<td width="10%">Yuval Oren's Piccolo</td><td width="20%"> 
<a href="http://piccolo.sourceforge.net/">http://piccolo.sourceforge.net/</a></td>
<td width="10%">  </td><td width="10%"> X </td><td width="10%">  </td><td width="10%">  </td><td width="10%"> X </td><td width="10%"> X </td><td width="10%">LGPL
</td>
</tr>
<tr>
<td width="10%">Apache XML Project's Xerces Java</td><td width="20%"> 
<a href="http://xml.apache.org/xerces-j/index.html">http://xml.apache.org/xerces2-j/index.html</a></td>
<td width="10%"> X </td><td width="10%"> X </td><td width="10%"> X </td><td width="10%"> X </td>
<td width="10%"> X </td><td width="10%"> X </td><td width="10%">Apache Software License, Version 1.1
</td>
</tr>
<tr>
<td width="10%">IBM's XML for Java</td><td width="20%">
<a href="http://www.alphaworks.ibm.com/formula/xml">http://www.alphaworks.ibm.com/formula/xml</a>
</td>
<td width="10%"> X </td><td width="10%"> X </td>
<td width="10%"> X </td><td width="10%"> X </td><td width="10%"> X </td><td width="10%"> X </td>
<td width="10%">Apache Software License, Version 1.1</td></tr>


<tr>
<td width="10%">Microstar/David Brownell's &AElig;lfred</td><td width="20%"> 
<a href="http://www.gnu.org/software/classpathx/jaxp/jaxp.html">http://www.gnu.org/software/classpathx/jaxp/jaxp.html</a></td>
<td width="10%"> X </td>
<td width="10%"> X </td>
<td width="10%"> X </td><td width="10%">&nbsp;</td>
<td width="10%"> X </td>
<td width="10%"> X </td>
<td width="10%">GPL with library exception</td>
</tr>
<tr>
<td width="10%">Silfide's SXP</td><td width="20%">
<a href="http://www.loria.fr/projets/XSilfide/EN/sxp/">http://www.loria.fr/projets/XSilfide/EN/sxp/</a></td>
<td width="10%">&nbsp;</td><td width="10%">&nbsp;</td><td width="10%"> X </td><td width="10%">&nbsp;</td><td width="10%"> X </td><td width="10%">&nbsp;</td><td width="10%">Non-GPL viral
open source license
</td></tr>
<tr>
<td width="10%">Sun's Crimson</td><td width="20%">
<a href="http://xml.apache.org/crimson/">http://xml.apache.org/crimson/</a></td>
<td width="10%">X </td><td width="10%">X </td><td width="10%"> X </td><td width="10%">&nbsp;</td><td width="10%"> X </td><td width="10%">&nbsp;</td>
<td width="10%">Apache</td></tr>
<tr>
<td width="10%">Oracle's XML
Parser for Java</td><td width="20%"> 
<a href="http://technet.oracle.com/tech/xml/parser_java2/">http://technet.oracle.com/</a></td>
<td width="10%"> X </td><td width="10%"> X </td>
<td width="10%"> X </td><td width="10%">&nbsp;</td><td width="10%"> X </td><td width="10%">&nbsp;</td><td width="10%">free beer
</td></tr>
</table><hr color="red" style="color: red" size="2"><h2>The Horrors of the CLASSPATH</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Java 1.4.x bundles Crimson and Xalan 2.2D10</p></li>
  <li><p>These are loaded before anything in the CLASSPATH or jre/lib/ext 
  directory</p></li>
  <li><p>Use jre/lib/endorsed to override (You must create this directory.)</p></li>
  <li><p>Saxon is incompatible with Ant.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>SAX1</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>SAX1 omits: 
  <ul>
    <li><p>Comments</p></li>
    <li><p>Lexical Information (CDATA sections, entity references, etc.)</p></li>
    <li><p>DTD declarations</p></li>
    <li><p>Validation</p></li>
    <li><p>Namespaces</p></li>
  </ul>
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>SAX2</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Adds: <ul>
<li><p>Namespace support</p></li>
<li><p>Optional validation</p></li>
<li><p>Optional lexical events for comments, CDATA sections, entity references</p></li>
</ul></p></li>
<li><p>A lot more configurable</p></li>
<li><p>Deprecates a lot of SAX1</p></li>
<li><p>Adapter classes convert between parsers.
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The SAX2 Process</h2><ol xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Use the factory method
<code>XMLReaderFactory.createXMLReader()</code> 
to retrieve a parser-specific implementation of the 
<code>XMLReader</code> interface</p></li>
<li><p>Your code registers a <code>ContentHandler</code> with the parser</p></li>
<li><p>An <code>InputSource</code> feeds the document into the parser</p></li>
<li><p>As the document is read, the parser calls back to the 
methods of the <code>ContentHandler</code> to tell it
what it's seeing in the document.
</p></li>
</ol><hr color="red" style="color: red" size="2"><h2>Making an XMLReader</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>XMLReaderFactory.createXMLReader()</code> method 
instantiates an <code>XMLReader</code> subclass named by
the <code>org.xml.sax.driver</code> system property:

<pre><code>try {
  XMLReader parser = XMLReaderFactory.createXMLReader();
} 
catch (SAXException e) {
  System.err.println(e);
}
</code></pre>

</p></li>
<li><p>The <code>XMLReaderFactory.createXMLReader(String className)</code> method 
instantiates an <code>XMLReader</code> subclass named by
its argument:

<pre><code>try {
  XMLReader parser 
   = XMLReaderFactory.createXMLReader(   
      "org.apache.xerces.parsers.SAXParser");
} 
catch (SAXException e) {
  System.err.println(e);
}
</code></pre>

</p></li>
<li><p>Or you can use the constructor in the package-specific class:
<pre><code>XMLReader parser = new SAXParser();
</code></pre>
</p></li>
<li><p>Or all three:
<pre><code>    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException ex) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (SAXException ex2) {
        parser = new SAXParser();
      }
    }</code>
    </pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Parsing a Document with XMLReader</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import java.io.*;


public class SAX2Checker {

  public static void main(String[] args) {

    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException ex) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (SAXException ex2) {
        System.out.println("Could not locate a parser."
         + "Please set the the org.xml.sax.driver property.");
        return;
      }
    }

    if (args.length == 0) {
      System.out.println("Usage: java SAX2Checker URL1 URL2...");
    }

    // start parsing...
    for (int i = 0; i &lt; args.length; i++) {

      // command line should offer URIs or file names
      try {
        parser.parse(args[i]);
        // If there are no well-formedness errors
        // then no exception is thrown
        System.out.println(args[i] + " is well formed.");
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber()
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not check " + args[i]
         + " because of the IOException " + e);
      }

    }

  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Sample Output from SAX2Checker</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>C:\&gt;java SAX2Checker http://www.cafeconleche.org/
http://www.cafeconleche.org/ is not well formed.
The element type "dt" must be terminated by the 
matching end-tag "&lt;/dt&gt;". 
at line 186, column 5
</code></pre><hr color="red" style="color: red" size="2"><h2>The ContentHandler interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.xml.sax;


public interface ContentHandler {

    public void setDocumentLocator(Locator locator);
    
    public void startDocument() throws SAXException;
    
    public void endDocument() throws SAXException;
    
    public void startPrefixMapping(String prefix, String uri) 
     throws SAXException;

    public void endPrefixMapping(String prefix) throws SAXException;

    public void startElement(String namespaceURI, String localName,
     String qualifiedName, Attributes atts) throws SAXException;

    public void endElement(String namespaceURI, String localName,
     String qualifiedName) throws SAXException;

    public void characters(char[] text, int start, int length) 
     throws SAXException;

    public void ignorableWhitespace(char[] text, int start, int length)
     throws SAXException;

    public void processingInstruction(String target, String data)
     throws SAXException;

    public void skippedEntity(String name) throws SAXException;
     
}</code></pre><hr color="red" style="color: red" size="2"><h2>SAX2 Event Reporter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import java.io.*;

public class EventReporter implements ContentHandler {

  public void setDocumentLocator(Locator locator) {
    System.out.println("setDocumentLocator(" + locator + ")");
  }

  public void startDocument() throws SAXException {
    System.out.println("startDocument()");
  }

  public void endDocument() throws SAXException {
    System.out.println("endDocument()");
  }

  public void startElement(String namespaceURI, String localName, 
   String qualifiedName, Attributes atts)
   throws SAXException {
    namespaceURI = '"' + namespaceURI + '"';
    localName = '"' + localName + '"';
    qualifiedName = '"' + qualifiedName + '"';
    String attributeString = "{";
    for (int i = 0; i &lt; atts.getLength(); i++) {
      attributeString += atts.getQName(i) + "=\"" 
       + atts.getValue(i) + "\"";
      if (i != atts.getLength()-1) attributeString += ", ";
    }
    attributeString += "}";
    System.out.println("startElement(" + namespaceURI + ", " 
     + localName + ", " + qualifiedName + ", " + attributeString + ")");
  }

  public void endElement(String namespaceURI, String localName, 
   String qualifiedName)
   throws SAXException {
    namespaceURI = '"' + namespaceURI + '"';
    localName = '"' + localName + '"';
    qualifiedName = '"' + qualifiedName + '"';
    System.out.println("endElement(" + namespaceURI + ", " 
     + localName + ", " + qualifiedName + ")");
  }

  public void characters(char[] text, int start, int length)
   throws SAXException {
    String textString = "[" + new String(text) + "]";
    System.out.println("characters(" + textString + ", " 
     + start + ", " +  length + ")");
  }

  public void ignorableWhitespace(char[] text, int start, int length)
   throws SAXException {
    System.out.println("ignorableWhitespace()");
  }

  public void processingInstruction(String target, String data)
   throws SAXException {
    System.out.println("processingInstruction(" + target + ", " 
     + data + ")");
  }

  public void startPrefixMapping(String prefix, String uri)
   throws SAXException {
    System.out.println("startPrefixMapping(\"" + prefix + "\", \"" 
     + uri + "\")");
  }

  public void endPrefixMapping(String prefix) throws SAXException {
    System.out.println("endPrefixMapping(\"" + prefix + "\")");
  }

  public void skippedEntity(String name) throws SAXException {
    System.out.println("skippedEntity(" + name + ")");
  }

  // Could easily have put main() method in a separate class
  public static void main(String[] args) {

    XMLReader parser;
    try {
     parser = XMLReaderFactory.createXMLReader();
    }
    catch (Exception e) {
      // fall back on Xerces parser by name
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (Exception ee) {
        System.err.println("Couldn't locate a SAX parser");
        return;
      }
    }


    if (args.length == 0) {
      System.out.println(
       "Usage: java EventReporter URL1 URL2...");
    }

    // Install the content handler
    parser.setContentHandler(new EventReporter());

    // start parsing...
    for (int i = 0; i &lt; args.length; i++) {

      // command line should offer URIs or file names
      try {
        parser.parse(args[i]);
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber()
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not report on " + args[i]
         + " because of the IOException " + e);
      }

    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Event Reporter Output</h2><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/event_reporter.txt">View in Browser</a><hr color="red" style="color: red" size="2"><h2>A Sample Application</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>UserLand's RSS based list of Web logs
 at 
<a href="http://static.userland.com/weblogMonitor/logs.xml">http://static.userland.com/weblogMonitor/logs.xml</a>:


<pre><code>&lt;?xml version="1.0"?&gt;
&lt;!-- &lt;!DOCTYPE foo SYSTEM "http://msdn.microsoft.com/xml/general/htmlentities.dtd"&gt; --&gt;
&lt;weblogs&gt;
	&lt;log&gt;
		&lt;name&gt;MozillaZine&lt;/name&gt;
		&lt;url&gt;http://www.mozillazine.org&lt;/url&gt;
		&lt;changesUrl&gt;http://www.mozillazine.org/contents.rdf&lt;/changesUrl&gt;
		&lt;ownerName&gt;Jason Kersey&lt;/ownerName&gt;
		&lt;ownerEmail&gt;kerz@en.com&lt;/ownerEmail&gt;
		&lt;description&gt;THE source for news on the Mozilla Organization.  DevChats, Reviews, Chats, Builds, Demos, Screenshots, and more.&lt;/description&gt;
		&lt;imageUrl&gt;&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/kerz@en.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SalonHerringWiredFool&lt;/name&gt;
		&lt;url&gt;http://www.salonherringwiredfool.com/&lt;/url&gt;
		&lt;ownerName&gt;Some Random Herring&lt;/ownerName&gt;
		&lt;ownerEmail&gt;salonfool@wiredherring.com&lt;/ownerEmail&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;Scripting News&lt;/name&gt;
		&lt;url&gt;http://www.scripting.com/&lt;/url&gt;
		&lt;ownerName&gt;Dave Winer&lt;/ownerName&gt;
		&lt;ownerEmail&gt;dave@userland.com&lt;/ownerEmail&gt;
		&lt;description&gt;News and commentary from the cross-platform scripting community.&lt;/description&gt;
		&lt;imageUrl&gt;http://www.scripting.com/gifs/tinyScriptingNews.gif&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/dave@userland.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SlashDot.Org&lt;/name&gt;
		&lt;url&gt;http://www.slashdot.org/&lt;/url&gt;
		&lt;ownerName&gt;Simply a friend&lt;/ownerName&gt;
		&lt;ownerEmail&gt;afriendofweblogs@weblogs.com&lt;/ownerEmail&gt;
		&lt;description&gt;News for Nerds, Stuff that Matters.&lt;/description&gt;
		&lt;/log&gt;
	&lt;/weblogs&gt;
</code></pre>

</p></li>

</ul><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="http://static.userland.com/weblogMonitor/logs.xml">Full list</a><hr color="red" style="color: red" size="2"><h2>Goal: Return a list of all the URLs in this 
list as java.net.URL objects</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Design Decisions</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Should we return an array, an <code>Enumeration</code>,
a <code>List</code>, or what?</p></li>
<li><p>Perhaps we should use multiple threads?</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>SAX Design</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>We do not know how many URLs there will be when we start parsing
so let's use a <code>Vector</code>
</p></li>

<li><p>Single threaded for simplicity
but a real program would use multiple threads
<ul>

<li><p>One to load and parse the data</p></li>
<li><p>Another thread (probably the main thread) 
to serve the data</p></li>
<li><p>Early data could be provided before the entire
document had been read</p></li>
</ul> 
</p></li>
<li><p>The character data of each <code>url</code> element needs to be stored.
Everything else can be ignored.
</p></li>
<li><p>A <code>startElement()</code> with the name 
url indicates that we need to start
storing this data.
</p></li>
<li><p>A <code>stopElement()</code> with the name url indicates that we need to stop
storing this data, convert it to a <code>URL</code> and put it in the
<code>Vector</code>

</p></li>
<li><p>Should we hide the XML parsing inside a non-public class to
avoid accidentally calling the methods from unexpected places or threads?</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>User Interface Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.XMLReaderFactory;
import java.util.*;
import java.io.*;


public class WeblogsSAX {
     
  public static List listChannels() 
   throws IOException, SAXException {
    return listChannels(
     "http://static.userland.com/weblogMonitor/logs.xml"); 
  }
  
  public static List listChannels(String uri) 
   throws IOException, SAXException {
    
    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException ex) {
      parser = XMLReaderFactory.createXMLReader(
       "org.apache.xerces.parsers.SAXParser"
      );
    }
    Vector urls = new Vector(1000);
    ContentHandler handler = new URIGrabber(urls);
    parser.setContentHandler(handler);
    parser.parse(uri);
    return urls;
    
  }
  
  public static void main(String[] args) {
   
    try {
      List urls;
      if (args.length &gt; 0) urls = listChannels(args[0]);
      else urls = listChannels();
      Iterator iterator = urls.iterator();
      while (iterator.hasNext()) {
        System.out.println(iterator.next()); 
      }
    }
    catch (IOException e) {
      System.err.println(e); 
    }
    catch (SAXParseException e) {
      System.err.println(e); 
      System.err.println("at line " + e.getLineNumber() 
       + ", column " + e.getColumnNumber()); 
    }
    catch (SAXException e) {
      System.err.println(e); 
    }
    catch (/* Unexpected */ Exception e) {
      e.printStackTrace(); 
    }
    
  }
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>ContentHandler Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import java.net.*;
import java.util.Vector;

             // conflicts with java.net.ContentHandler
class URIGrabber implements org.xml.sax.ContentHandler {

  private Vector urls;

  URIGrabber(Vector urls) {
    this.urls = urls;
  }

  // do nothing methods
  public void setDocumentLocator(Locator locator) {}
  public void startDocument() throws SAXException {}
  public void endDocument() throws SAXException {}
  public void startPrefixMapping(String prefix, String uri)
   throws SAXException {}
  public void endPrefixMapping(String prefix) throws SAXException {}
  public void skippedEntity(String name) throws SAXException {}
  public void ignorableWhitespace(char[] text, int start, int length)
   throws SAXException {}
  public void processingInstruction(String target, String data)
   throws SAXException {}


  // Remember, there's no guarantee all the text of the
  // url element will be returned in a single call to characters
  private StringBuffer urlBuffer;
  private boolean collecting = false;

  public void startElement(String namespaceURI, String localName,
   String qualifiedName, Attributes atts) throws SAXException {

    if (qualifiedName.equals("url")) {
      collecting = true;
      urlBuffer = new StringBuffer();
    }

  }

  public void characters(char[] text, int start, int length)
   throws SAXException {

    if (collecting) {
      urlBuffer.append(text, start, length);
    }

  }

  public void endElement(String namespaceURI, String localName,
   String qualifiedName) throws SAXException {

    if (qualifiedName.equals("url")) {
      collecting = false;
      String url = urlBuffer.toString();
      try {
        urls.addElement(new URL(url));
      }
      catch (MalformedURLException e) {
        // skip this url
      }
    }

  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Weblogs Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java Weblogs shortlogs.xml
http://www.mozillazine.org
http://www.salonherringwiredfool.com/
http://www.slashdot.org/
</code></pre><hr color="red" style="color: red" size="2"><h2>Features and Properties</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>SAX2 parsers--that is XMLReaders--are configured by features and properties</p></li>
 <li><p>Feature and property names are absolute URIs</p></li> 
  <li><p>A feature is boolean, on or off, true or false; a property is 
  an object</p></li>
  <li><p>
<pre><code>public boolean getFeature(String name)
 throws SAXNotRecognizedException, SAXNotSupportedException
public void setFeature(String name, boolean value)
 throws SAXNotRecognizedException, SAXNotSupportedException
public Object getProperty(String name)
 throws SAXNotRecognizedException, SAXNotSupportedException
public void setProperty(String name, Object value)
 throws SAXNotRecognizedException, SAXNotSupportedException
</code></pre>  
</p></li>
<li><p>Features can be read-only or read/write.</p></li>
<li><p>Some features may be modifiable while parsing; others only before parsing starts</p></li>
<li><p>For example,
<pre><code>try {
  if (xmlReader.getFeature("http://xml.org/sax/features/validation")) {
    System.out.println("Parser is validating.");
  } 
  else {
    System.out.println("Parser is not validating.");
  }
} 
catch (SAXException e) {
  System.out.println("Do not know if parser validates");
}
</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Feature/Property SAXExceptions</h2><dl xmlns:xinclude="http://www.w3.org/2001/XInclude">
<dt><code>SAXNotRecognizedException</code></dt><dd>The parser 
never allows you to set or get this feature or property</dd>
<dt><code>SAXNotSupportedException</code></dt><dd>The parser does
not allow this value for a requested feature/property,
 or the 
feature/property is read-only,
or the feature/property cannot be read/written at this moment in the parsing process.</dd>
</dl><hr color="red" style="color: red" size="2"><h2>Required Features</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p><code>http://xml.org/sax/features/namespaces</code>
<ul><li><p>If true, then perform namespace processing.</p></li>
<li><p>If false, then, at parser option, do not perform namespace processing </p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li>
<li><p> true by default </p></li>

</ul>
</p></li>

<li><p><code>http://xml.org/sax/features/namespace-prefixes</code>
<ul>
<li><p>If true, then report the original prefixed names and
attributes used for namespace declarations.</p></li>
<li><p>If false, then do not report attributes used for
namespace declarations, and optionally do not report original prefixed
names.</p></li>
<li><p> false by default</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li>
</ul>
</p></li>

</ul><hr color="red" style="color: red" size="2"><h2>Core Features</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">

<li><p><code>http://xml.org/sax/features/namespaces</code>
</p></li>

<li><p><code>http://xml.org/sax/features/namespace-prefixes</code>
</p></li>

<li><p><code>http://xml.org/sax/features/string-interning</code>
<ul>
<li><p>If true, then all element names, prefixes, attribute
names, namespace URIs, and local names are internalized using
<code>java.lang.String.intern()</code>.</p></li>
<li><p>If false, then names are not necessarily
internalized.</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li></ul>
</p></li>

<li><p><code>http://xml.org/sax/features/validation</code>
<ul><li><p>If true, then report all validation errors </p></li>
<li><p>If false, then do not report validation errors.</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li></ul>
</p></li>

<li><p><code>http://xml.org/sax/features/external-general-entities</code>
<ul><li><p>If true, then include all external general (text)
entities.</p></li>
<li><p><strong>false:</strong> Do not include external general
entities.</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li></ul>
</p></li>

<li><p><code>http://xml.org/sax/features/external-parameter-entities</code>
<ul><li><p>If true, then include all external parameter entities,
including the external DTD subset.</p></li>
<li><p><strong>false:</strong> Do not include any external parameter
entities, even the external DTD subset.</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li></ul></p></li>

</ul><p xmlns:xinclude="http://www.w3.org/2001/XInclude"><font size="small"><i>adapted
  from SAX2 documentation by David Megginson</i></font></p><hr color="red" style="color: red" size="2"><h2>Turning on  Validation</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Not all parsers are validating but Xerces-J is.</p></li>
  <li><p>Validity errors are not fatal; therefore they do not throw
  SAXParseExceptions</p></li>
  <li><p>Must install an <code>ErrorHandler</code> as well as a 
  <code>ContentHandler</code>
  </p></li>
  <li><p>Must set the feature http://xml.org/sax/features/validation</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Three Levels of Errors</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">In increasing order of severity:</p><ol xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>A warning; e.g. ambiguous content model, a constraint for compatibility</p></li>
<li><p>A recoverable error: typically a validity error</p></li>
<li><p>A fatal error: typically a well-formedness error</p></li>
</ol><hr color="red" style="color: red" size="2"><h2>The ErrorHandler interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.xml.sax;

public interface ErrorHandler {
 
  public void warning(SAXParseException exception)
   throws SAXException;

  public void error(SAXParseException exception)
   throws SAXException;
    
  public void fatalError(SAXParseException exception)
   throws SAXException;
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>An ErrorHandler for Reporting Validity Errors</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import java.io.*;


public class ValidityErrorReporter implements ErrorHandler {
 
  private Writer out;
 
  public ValidityErrorReporter(Writer out) {
    this.out = out;
  }
 
  public ValidityErrorReporter() {
    this(new OutputStreamWriter(System.out));
  }
 
  public void warning(SAXParseException ex)
   throws SAXException {

    try {
      out.write(ex.getMessage() + "\r\n");
      out.write(" at line " + ex.getLineNumber() + ", column " 
       + ex.getColumnNumber() + "\r\n");
      out.flush();
    }
    catch (IOException e) {
      throw new SAXException(e); 
    }
    
  }

  public void error(SAXParseException ex)
   throws SAXException {
    
    try {
      out.write(ex.getMessage() + "\r\n");
      out.write(" at line " + ex.getLineNumber() + ", column " 
       + ex.getColumnNumber() + "\r\n");
      out.flush();
    }
    catch (IOException e) {
      throw new SAXException(e); 
    }
    
  }
    
  public void fatalError(SAXParseException ex)
   throws SAXException {
    
    try {
      out.write(ex.getMessage() + "\r\n");
      out.write(" at line " + ex.getLineNumber() + ", column " 
       + ex.getColumnNumber() + "\r\n");
      out.flush();
    }
    catch (IOException e) {
      throw new SAXException(e); 
    }
    
  }
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Validating</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.apache.xerces.parsers.*; 
import java.io.*;


public class SAX2Validator {

  public static void main(String[] args) {
    
    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException ex) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser"
        );
      }
      catch (SAXException ex2) {
        System.err.println("Could not locate a SAX2 Parser");
        return;
      }
    }
     
    // turn on validation
    try {
      parser.setFeature(
       "http://xml.org/sax/features/validation", true);
      parser.setErrorHandler(new ValidityErrorReporter());
    }
    catch (SAXNotRecognizedException e) {
      System.err.println(
       "Installed XML parser cannot validate;"
       + " checking for well-formedness instead...");
    } 
    catch (SAXNotSupportedException e) {
      System.err.println(
       "Cannot turn on validation here; "
       + "checking for well-formedness instead...");
    } 
     
    if (args.length == 0) {
      System.out.println("Usage: java SAX2Validator URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        parser.parse(args[i]);
        // If there are no well-formedness errors, 
        // then no exception is thrown
        System.out.println(args[i] + " is well formed.");
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber() 
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not check " + args[i] 
         + " because of the IOException " + e);
      }
      
    }  
  
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Core Properties</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">

<li><p><code>http://xml.org/sax/properties/lexical-handler</code><ul>
<li><p><strong>data type:</strong>
<code>org.xml.sax.ext.LexicalHandler</code></p></li>
<li><p><strong>description:</strong> An optional extension handler for
items like comments that are not part of the information set and may be omitted.</p></li>
<li><p><strong>access:</strong> read/write</p></li>
</ul></p></li>

<li><p><code>http://xml.org/sax/properties/declaration-handler</code><ul>
<li><p><strong>data type:</strong>
<code>org.xml.sax.ext.DeclHandler</code></p></li>
<li><p><strong>description:</strong> An optional extension handler for
ATTLIST and ELEMENT declarations
(but not  notations and unparsed entities).</p></li>
<li><p><strong>access:</strong> read/write</p></li>
</ul></p></li>

<li><p><code>http://xml.org/sax/properties/dom-node</code><ul>
<li><p><strong>data type:</strong> <code>org.w3c.dom.Node</code></p></li>
<li><p><strong>description:</strong> When parsing, the current DOM node
being visited if this is a DOM iterator; when not parsing, the root
DOM node for iteration.</p></li>
<li><p><strong>access:</strong> (parsing) read-only; (not parsing)
read/write</p></li>
</ul></p></li>

<li><p><code>http://xml.org/sax/properties/xml-string</code><ul>
<li><p><strong>data type:</strong> <code>java.lang.String</code></p></li>
<li><p><strong>description:</strong> The literal string of characters
that was the source for the current event.</p></li>
<li><p><strong>access:</strong> read-only</p></li>
</ul></p></li>

</ul><p xmlns:xinclude="http://www.w3.org/2001/XInclude"><font size="small"><i>adapted
  from SAX2 documentation by David Megginson</i></font></p><hr color="red" style="color: red" size="2"><h2>Nonstandard Features in Xerces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p><code>http://apache.org/xml/features/validation/dynamic</code><ul>

          <li><p>True: The parser will validate the document
 if a DTD is specified in a <code>DOCTYPE</code> 
 declaration or using the appropriate
 schema attributes like <code>xsi:noNamespaceSchemaLocation</code>.</p></li>  
         <li><p>False: Validation is determined by the state of the
                         http://xml.org/sax/features/validation feature. </p></li> 
         <li><p>        Default is false </p></li> 
</ul></p></li> 


<li><p><code>http://apache.org/xml/features/validation/warn-on-duplicate-attdef</code><ul>
<li><p>True:  Warn on duplicate attribute declaration.</p></li>  
<li><p>False:  Do not warn on duplicate attribute declaration. </p></li>  
<li><p>Default: true</p></li> 
</ul></p></li> 

<li><p><code>http://apache.org/xml/features/validation/warn-on-undeclared-elemdef</code><ul>
<li><p>True:  Warn if element referenced in content model is not declared.</p></li>  
<li><p>  False:  
                         Do not warn if element referenced in content model is not declared.</p></li>  
<li><p> Default:  
                         true</p></li> 
</ul></p></li>   


<li><p><code>http://apache.org/xml/features/allow-java-encodings</code><ul>
<li><p>

                  True:  
                         Allow Java encoding names 
                         like 8859_1 in XML and text declarations.</p></li>  
<li><p>  
                 False:  
                         Do not allow Java encoding names in XML and text declarations. </p></li>  
<li><p> 
                 Default:  
                         false </p></li>  
</ul></p></li>   





<li><p><code>http://apache.org/xml/features/continue-after-fatal-error</code><ul>
<li><p>True: Continue after fatal error.</p></li>  
<li><p> False: Stops parse on first fatal error.</p></li>  
<li><p> Default:  false  </p></li> 
</ul>
</p></li> 


<li><p>
  <code>http://apache.org/xml/features/validation/schema</code>
  <ul>
    <li><p>True: validate against a schema</p></li>  
    <li><p> False: do not use any schemas</p></li>  
    <li><p> Default:  false  </p></li> 
  </ul>
</p></li> 
 
<li><p>
  <code>http://apache.org/xml/features/validation/schema-full-checking</code>
  <ul>
    <li><p>True: perform checking that may be time-consuming or memory intensive.</p></li>  
    <li><p> False: skip some checks</p></li>  
    <li><p> Default:  false  </p></li> 
  </ul>
</p></li> 
 
<li><p>
  <code>http://apache.org/xml/features/validation/schema/normalized-value</code>
  <ul>
    <li><p>True: Normalize element and attribute values according to their schema type</p></li>  
    <li><p> False: don't normalize</p></li>  
    <li><p> Default:  false  </p></li> 
  </ul>
</p></li> 
 
<li><p>
  <code>http://apache.org/xml/features/validation/schema/element-default</code>
  <ul>
    <li><p>True: Provide schema element default values</p></li>  
    <li><p> False: don't report element default values</p></li>  
    <li><p> Default:  true  </p></li> 
  </ul>
</p></li> 
 
</ul><hr color="red" style="color: red" size="2"><h2>Nonstandard Properties in Xerces </h2><dl xmlns:xinclude="http://www.w3.org/2001/XInclude">
<dt><code>http://apache.org/xml/properties/schema/external-schemaLocation</code></dt>
<dt><code>http://apache.org/xml/properties/schema/external-noNamespaceSchemaLocation</code>
</dt>
</dl><hr color="red" style="color: red" size="2"><h2>Properties for Extension Handlers</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p>Extension handlers are non-required interfaces in the 
 <code>org.xml.sax.ext</code> package.
 </p></li>
  <li><p>To set the 
  <code>LexicalHandler</code> 
  for an XML reader, set the property
<code>http://xml.org/sax/handlers/LexicalHandler</code>. 
</p></li>
<li><p>
To set the 
  <code>DeclHandler</code> 
  for an XML reader, set the property
<code>http://xml.org/sax/handlers/DeclHandler</code>. 
</p></li>
<li><p>If the reader does not support the requested property, it will throw a
<code>SAXNotRecognizedException</code> or a <code>SAXNotSupportedException</code>.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Handling Attributes in SAX2</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>startElement()</code> method in 
<code>ContentHandler</code> receives as an argument an
<code>Attributes</code> object containing all attributes
 on that tag.
 <p><code>public void startElement(String namespaceURI,
 String localName, String qualifiedName, Attributes atts) throws SAXException</code></p>
</p></li> 
<li><p>The <code>Attributes</code> interface:
<pre><code>package org.xml.sax;

public interface Attributes {

  public int    getLength();

  public String getURI(int index);
  public String getLocalName(int index);
  public String getQName(int index);
  public String getType(int index);
  public String getValue(int index);
  public int    getIndex(String uri, String localName);
  public int    getIndex(String qualifiedName);
  public String getType(String uri, String localName);
  public String getType(String qualifiedName);
  public String getValue(String uri, String localName);
  public String getValue(String qualifiedName);

}</code></pre>
 </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Attributes Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.apache.xerces.parsers.*;
import java.io.*;
import java.util.*;
import org.xml.sax.helpers.*;


public class XLinkSpider extends DefaultHandler {

  public static Enumeration listURIs(String systemId) 
   throws SAXException, IOException {
    
    // set up the parser 
    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    } 
    catch (SAXException e) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (SAXException e2) {
        System.err.println("Error: could not locate a parser.");
        return null;
      }
    }
      
    // Install the Content Handler   
    XLinkSpider spider = new XLinkSpider();   
    parser.setContentHandler(spider);
    parser.parse(systemId);
    return spider.uris.elements();
      
  }
  
  private Vector uris = new Vector();

  public void startElement(String namespaceURI, String localName, 
   String rawName, Attributes atts) throws SAXException {
    
     String uri = atts.getValue(
      "http://www.w3.org/1999/xlink", "href");
     if (uri != null) uris.addElement(uri);
    
  }
  

  public static void main(String[] args) {
    
    if (args.length == 0) {
      System.out.println("Usage: java XLinkSpider URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      try {
        Enumeration uris = listURIs(args[i]);
        while (uris.hasMoreElements()) {
          String s = (String) uris.nextElement();
          System.out.println(s);
        }
      }
      catch (Exception e) {
        System.err.println(e);
        e.printStackTrace(); 
      }
      
    } // end for
  
  } // end main

} // end XLinkSpider</code></pre><hr color="red" style="color: red" size="2"><h2>Resolving Entities</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>EntityResolver</code> allows you to substitute your own URI
lookup scheme for external entities</p></li>
<li><p>Especially useful for entities that use URL and URI schemes
not supported by Java's protocol handlers; e.g. jdbc: or isbn:</p></li>
<li><p>The <code>EntityResolver</code> interface:<pre><code>package org.xml.sax;

import java.io.IOException;

public interface EntityResolver {  

  public InputSource resolveEntity (String publicID,
   String systemID) throws SAXException, IOException;
    
}</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>EntityResolver Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;

public class RSSResolver implements EntityResolver {

  public InputSource resolveEntity(String publicID, String systemID) {

    if ( publicID.equals(
          "-//Netscape Communications//DTD RSS 0.91//EN")
     || systemID.equals(
          "http://my.netscape.com/publish/formats/rss-0.91.dtd")) {
      return new InputSource(
       "http://www.cafeconleche.org/dtds/rss.dtd");
    } 
    else {
      // use the default behaviour
      return null;
    }
    
  }
   
}
 
</code></pre><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question2.gif" width="224" height="207">
  </div><hr color="red" style="color: red" size="2"><h2>Handling DTDs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>DTDHandler</code> interface covers those aspects of DTDs
a <em>non-validating</em> parser may care about and
that are not handled by other interfaces:
<ul>
<li><p>Notation Declarations</p></li>
<li><p>Unparsed Entity Declarations</p></li>
</ul>
</p></li>
<li><p>Attribute defaults are handled transparently by <code>startElement()</code> and
the <code>Attributes</code> interface</p></li>
<li><p>Parsed entities are handled transparently by <code>ContentHandler</code> 
unless you install an <code>EntityResolver</code></p></li>
<li><p>The <code>DTDHandler</code> interface: <pre><code>package org.xml.sax;

public interface DTDHandler {
       
  public void notationDecl(String name, String publicID, 
   String systemID) throws SAXException;
 
  public void unparsedEntityDecl(String name, String publicID, 
   String systemID, String notationName) throws SAXException;
    
}</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>DTDHandler Example</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Program to map unparsed entities with notation 
    "text/plain" to CDATA sections
    </p></li>
    <li><p><code>AttributeHandler</code> will have to make actual replacements</p></li>
    <li><p>Will finish with <code>XMLFilter</code></p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>TextEntityReplacer</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import java.util.*;
import java.net.*;
import java.io.*;


public class TextEntityReplacer implements DTDHandler {

  /* This class stores the notation and entity declarations 
     for a single document. It is not designed to be reused
     for multiple parses, though that would be straightforward
     extension. The public and system IDs of the document
     being parsed are set in the constructor.    
  */ 
  
  private URL systemID;
  private String publicID;
  
  public TextEntityReplacer(String publicID, String systemID) 
   throws MalformedURLException {
    this.publicID = publicID;
    this.systemID = new URL(systemID);
  }

  // store all notations in a hashtable. We'll need them later
  private Hashtable notations = new Hashtable();

  // for the DTDHandler interface
  public void notationDecl(String name, String publicID, 
   String systemID)
   throws SAXException {
    
    Notation n = new Notation(name, publicID, systemID);
    notations.put(name, n);
    
  }
  
  private class Notation {
    
    String name;
    String publicID;
    String systemID;
    
    Notation(String name, String publicID, String systemID) {
      this.name = name;
      this.publicID = publicID;
      this.systemID = systemID;
    } 
    
  }
 
   
  // store all unparsed entities in a hashtable. We'll need them later
  private Hashtable unparsedEntities = new Hashtable();

  // for the DTDHandler interface
  public void unparsedEntityDecl(String name, String publicID, 
   String systemID, String notationName) throws SAXException {
    
    UnparsedEntity e = new UnparsedEntity(name, publicID, 
     systemID, notationName);
    unparsedEntities.put(name, e);
    
  }    

  private class UnparsedEntity {
    
    String name;
    String publicID;
    String systemID;
    String notationName;
    
    UnparsedEntity(String name, String publicID, 
     String systemID, String notationName) {
      this.name = name;
      this.notationName = notationName;
      this.publicID = publicID;
      this.systemID = systemID;
    } 
    
  }


  public boolean isText(String notationName) {
    
    Object o = notations.get(notationName);
    if (o == null) return false;
    Notation n = (Notation) o;
    if (n.systemID.startsWith("text/")) return true;
    return false;
    
  }
  
  public String getText(String entityName) throws IOException {
    
    Object o = unparsedEntities.get(entityName);
    if (o == null) return "";
    UnparsedEntity entity = (UnparsedEntity) o;
    if (!isText(entity.notationName)) {
      return " binary data "; // could throw an exception instead
    }
    
    URL source;
    try {
      source = new URL(systemID, entity.systemID);     
    }
    catch (Exception e) {
      return " unresolvable entity "; // could throw an exception instead
    }
    
    // I'm not really handling character encodings here. 
    // A more detailed look at the MIME media type would allow that.
    Reader in = new BufferedReader(
      new InputStreamReader(source.openStream())
    );
    StringBuffer result = new StringBuffer();
    int c;
    while ((c = in.read()) != -1) {
      result.append((char) c); 
    }
    
    return result.toString();
    
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Handling Declarations</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The optional 
<code>DeclHandler</code> interface covers those aspects of DTDs
only a <em>validating</em> parser cares about:
<ul>
 <li><p>Element declarations</p></li>
 <li><p>Attribute declarations</p></li>
 <li><p>Internal entity declarations</p></li>
 <li><p>External entity declarations</p></li>
</ul>
</p></li>
<li><p>An optional extension that not all parsers (particularly non-validating parsers)
support </p></li>
<li><p>To set the <code>DeclHandler</code> for a parser, 
set the 
"http://xml.org/sax/handlers/DeclHandler" property. 
A <code>SAXNotRecognizedException</code> or <code>SAXNotSupportedException</code> will be thrown if the parser
doesn't support <code>DeclHandler</code></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The DeclHandler interface:</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.xml.sax.ext;

import org.xml.sax.SAXException;


public interface DeclHandler {

  public void elementDecl(String name, String model)
   throws SAXException;

  public void attributeDecl(String elementName, String attributeName, 
   String type, String defaultValue, String mode) 
   throws SAXException;

  public void internalEntityDecl(String name, String value)
   throws SAXException;

  public void externalEntityDecl(String name, String publicID,
   String systemID) throws SAXException;

}</code></pre><hr color="red" style="color: red" size="2"><h2>DTDMerger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.ext.DeclHandler;
import org.xml.sax.helpers.XMLReaderFactory;
import java.io.IOException;


public class DTDMerger implements DeclHandler {

  public void elementDecl(String name, String model)
   throws SAXException {
    System.out.println("&lt;!ELEMENT " + name + " " + model + " &gt;");
  }
  
  public void attributeDecl(String elementName, 
   String attributeName, String type, String mode, 
   String defaultValue) throws SAXException {
     
    System.out.print("&lt;!ATTLIST ");
    System.out.print(elementName);
    System.out.print(" ");
    System.out.print(attributeName);
    System.out.print(" ");
    System.out.print(type);
    System.out.print(" ");
    if (mode != null) {
      System.out.print(mode + " ");
    }
    if (defaultValue != null) {
      System.out.print('"' + defaultValue + "\" ");
    }
    System.out.println("&gt;");   
     
  }
  
  public void internalEntityDecl(String name, 
   String value) throws SAXException {
     
    if (!name.startsWith("%")) { // ignore parameter entities
      System.out.println("&lt;!ENTITY " + name + " \"" 
       + value + "\"&gt;");        
    }
    
  }
  
  public void externalEntityDecl(String name, 
   String publicID, String systemID) throws SAXException {
     
    if (!name.startsWith("%")) { // ignore parameter entities
      if (publicID != null) { 
        System.out.println("&lt;!ENTITY " + name + " PUBLIC \"" 
         + publicID + "\" \"" + systemID + "\"&gt;");        
      
      }
      else {
        System.out.println("&lt;!ENTITY " + name + " SYSTEM \"" 
         + systemID + "\"&gt;");        
      }
    }
    
  }

  public static void main(String[] args) {

    if (args.length &lt;= 0) {
      System.out.println("Usage: java DTDMerger URL");
      return;
    }
    String document = args[0];
    
    XMLReader parser = null;
    try {
      parser = XMLReaderFactory.createXMLReader();
      DeclHandler handler = new DTDMerger();
      parser.setProperty(
       "http://xml.org/sax/properties/declaration-handler", 
       handler);
      parser.parse(document);
    }
    catch (SAXNotRecognizedException e) {
      System.err.println(parser.getClass() 
       + " does not support declaration handlers.");
    }
    catch (SAXNotSupportedException e) {
      System.err.println(parser.getClass() 
       + " does not support declaration handlers.");

    }
    catch (SAXException e) {
      System.err.println(e);
      // As long as we finished with the DTD we really don't care
    }
    catch (IOException e) { 
      System.out.println(
       "Due to an IOException, the parser could not check " 
       + document
      ); 
    }
   
  }
   
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Handling Lexical Events</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The  
<code>LexicalHandler</code> interface reports:
<ul>
  <li><p>Comments</p></li>
  <li><p>CDATA sections</p></li>
  <li><p>Document type declaration</p></li>
  <li><p>Entities</p></li>
</ul>

</p></li>
<li><p>An optional extension that not all parsers 
support </p></li>
<li><p>To set the <code>LexicalHandler</code> for a parser, 
set the 
"http://xml.org/sax/handlers/lexical-handler" property. 
A <code>SAXNotRecognizedException</code>  will be thrown if the parser
doesn't report lexical events.
A <code>SAXNotSupportedException</code>  will be thrown if
you pass the wrong object type at the wrong time.
</p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The LexicalHandler interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.xml.sax.ext;

import org.xml.sax.SAXException;


public interface LexicalHandler {

  public void startDTD(String name, String publicID, String systemID)
   throws SAXException;
  public void endDTD() throws SAXException;
  public void startEntity(String name) throws SAXException;
  public void endEntity(String name) throws SAXException;
  public void startCDATA() throws SAXException;
  public void endCDATA() throws SAXException;
  public void comment (char[] text, int start, int length) 
   throws SAXException;

}</code></pre><hr color="red" style="color: red" size="2"><h2>LexicalHandler Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.ext.*;
import org.xml.sax.helpers.*;
import java.io.IOException;


public class SAXCommentReader implements LexicalHandler {

  public void startDTD(String name, String publicId, String systemId)
   throws SAXException {}
  public void endDTD() throws SAXException {}
  public void startEntity(String name) throws SAXException {}
  public void endEntity(String name) throws SAXException {}
  public void startCDATA() throws SAXException {}
  public void endCDATA() throws SAXException {}

  public void comment (char[] text, int start, int length)
   throws SAXException {

    String comment = new String(text, start, length);
    System.out.println(comment);

  }

  public static void main(String[] args) {

    // set up the parser
    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException e) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (SAXException e2) {
        System.err.println("Error: could not locate a parser.");
        return;
      }
    }

    // turn on comment handling
    try {
      parser.setProperty(
       "http://xml.org/sax/properties/lexical-handler",
       new SAXCommentReader()
      );
    }
    catch (SAXNotRecognizedException e) {
      System.err.println(
       "Installed XML parser does not provide lexical events...");
      return;
    }
    catch (SAXNotSupportedException e) {
      System.err.println(
       "Cannot turn on comment processing here");
      return;
    }

    if (args.length == 0) {
      System.out.println("Usage: java SAXCommentReader URL1 URL2...");
    }

    // start parsing...
    for (int i = 0; i &lt; args.length; i++) {

      try {
        parser.parse(args[i]);
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber()
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not check " + args[i]
         + " because of the IOException " + e);
      }

    }

  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>SAXCommentReader Output </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>C:\EXAMPLES&gt;java SAXCommentReader hotcop.xml
 This should be a four digit year like "1999",
     not a two-digit year like "99"
 The publisher is actually Polygram but I needed
       an example of a general entity reference.
 You can tell what album I was
     listening to when I wrote this example
</tt></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Or try http://www.w3.org/TR/2000/REC-xml-20001006.xml</p><hr color="red" style="color: red" size="2"><h2>The Locator interface</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Tells the callback class where in the document 
  (line number, column number) a particular event took place
  </p></li>
  <li><p>Optional but recommended</p></li>
  <li><p>Parsers give the callback class a <code>Locator</code>
  by passing it to the <code>setDocumentLocator()</code>
  method of <code>ContentHandler</code>
  <p><code></code></p>
  
  </p></li>
  <li><p>The <code>Locator</code> interface:<pre><code>package org.xml.sax;

public interface Locator {
    
  public String getPublicId();
  public String getSystemId();
  public int    getLineNumber();
  public int    getColumnNumber();
    
}</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Locator Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import org.apache.xerces.parsers.*; 
import java.io.*;


public class LocationReporter implements ContentHandler {

  private Locator locator = null;

  public void setDocumentLocator(Locator locator) {
    this.locator = locator;  
  }
  
  private String reportPosition() {
    
    if (locator != null) {
      
      String publicID = locator.getPublicId();
      String systemID = locator.getSystemId();
      int line        = locator.getLineNumber();
      int column      = locator.getColumnNumber();
      
      String name;
      if (publicID != null) name = publicID;
      else name = systemID;
      
      return " in " + name + " at line " + line 
       + ", column " + column;
    }
    return "";
    
  }
  
  public void startDocument() throws SAXException {
    System.out.println("Document started" + reportPosition()); 
  }

  public void endDocument() throws SAXException {
    System.out.println("Document ended" + reportPosition()); 
  }
  
  public void characters(char[] text, int start, int length) 
   throws SAXException {
    System.out.println("Got some characters" + reportPosition()); 
  }
  
  public void ignorableWhitespace(char[] text, int start, int length)
   throws SAXException {
    System.out.println("Got some ignorable white space" 
     + reportPosition()); 
  }
  
  public void processingInstruction(String target, String data)
   throws SAXException {
    System.out.println("Got a processing instruction" 
     + reportPosition()); 
  }
  
  // Changed methods for SAX2
  public void startElement(String namespaceURI, String localName,
	 String qualifiedName, Attributes atts) throws SAXException {
    System.out.println("Element " + qualifiedName + " started" 
     + reportPosition()); 
  }
  
  public void endElement(String namespaceURI, String localName,
	 String qualifiedName) throws SAXException {
    System.out.println("Element " + qualifiedName + " ended" 
     + reportPosition()); 
  } 

  // new methods for SAX2
  public void startPrefixMapping(String prefix, String uri) 
   throws SAXException {
    System.out.println("Started mapping prefix " + prefix 
     + " to URI " + uri + reportPosition());     
  }

  public void endPrefixMapping(String prefix) throws SAXException {
    System.out.println("Stopped mapping prefix " 
     + prefix + reportPosition());         
  }

  public void skippedEntity(String name) throws SAXException {
    System.out.println("Skipped entity " + name + reportPosition());         
  }  

  // Could easily have put main() method in a separate class
  public static void main(String[] args) {
    
    XMLReader parser;
    try {
      parser = XMLReaderFactory.createXMLReader();
    }
    catch (SAXException ex) {
      try {
        parser = XMLReaderFactory.createXMLReader(
         "org.apache.xerces.parsers.SAXParser");
      }
      catch (SAXException e2) {
        System.err.println("Error: no parser found!");
        return; 
      }
    }
     
    if (args.length == 0) {
      System.out.println(
       "Usage: java LocationReporter URL1 URL2..."); 
    } 
      
    // Install the Content Handler      
    parser.setContentHandler(new LocationReporter());
    
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        parser.parse(args[i]);
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber() 
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not report on " + args[i] 
         + " because of the IOException " + e);
      }
      
    }  
  
  }

}
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/locationreporter.txt">View Output</a><hr color="red" style="color: red" size="2"><h2>Locator Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>Document started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 1, column 1
Got a processing instruction in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 2, column 51
Started mapping prefix  to URI http://metalab.unc.edu/xml/namespace/song in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 5, column 50
Started mapping prefix xlink to URI http://www.w3.org/1999/xlink in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 5, column 50
Element SONG started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 5, column 50
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 6, column 3
Element TITLE started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 6, column 10
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 6, column 17
Element TITLE ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 6, column 26
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 7, column 3
Element PHOTO started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 9, column 65
Element PHOTO ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 9, column 65
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 10, column 3
Element COMPOSER started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 10, column 13
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 10, column 27
Element COMPOSER ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 10, column 39
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 11, column 3
Element COMPOSER started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 11, column 13
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 11, column 25
Element COMPOSER ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 11, column 37
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 12, column 3
Element COMPOSER started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 12, column 13
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 12, column 26
Element COMPOSER ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 12, column 38
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 13, column 3
Element PRODUCER started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 13, column 13
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 13, column 27
Element PRODUCER ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 13, column 39
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 14, column 3
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 16, column 3
Element PUBLISHER started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 16, column 73
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 17, column 7
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 17, column 12
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 18, column 3
Element PUBLISHER ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 18, column 16
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 19, column 3
Element LENGTH started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 19, column 11
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 19, column 15
Element LENGTH ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 19, column 25
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 20, column 3
Element YEAR started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 20, column 9
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 20, column 13
Element YEAR ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 20, column 21
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 21, column 3
Element ARTIST started in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 21, column 11
Got some characters in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 21, column 25
Element ARTIST ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 21, column 35
Got some ignorable white space in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 22, column 1
Element SONG ended in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 22, column 9
Stopped mapping prefix xlink in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 22, column 9
Stopped mapping prefix  in file:///J:/KENTUCKY/xmlandjava/EXAMPLES/hotcop.xml at line 22, column 9
Document ended in Null Entity at line -1, column -1
</code></pre><hr color="red" style="color: red" size="2"><h2>The DefaultHandler class</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Implements the main interfaces with do-nothing methods
    <ul>
      <li><p><code>EntityResolver</code></p></li>
      <li><p><code>DTDHandler</code></p></li>
      <li><p><code>ContentHandler</code></p></li>
      <li><p><code>ErrorHandler</code></p></li>
    </ul>
  </p></li>
 

</ul><hr color="red" style="color: red" size="2"><h2>The NamespaceSupport class</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Keeps track of namespace bindings on a stack</p></li>
  <li><p>Allows you to determine what URI a prefix is mapped to at any point in the document</p></li>
  <li><p>The <code>NamespaceSupport</code> class: 
<pre><code>package org.xml.sax.helpers;

public class NamespaceSupport {

  public final static String XMLNS = "http://www.w3.org/XML/1998/namespace";

  public NamespaceSupport();

  public void        reset();
  public void        pushContext();
  public void        popContext();
  public boolean     declarePrefix(String prefix, String uri);
  public String      getURI(String prefix);
  public Enumeration getPrefixes();
  public Enumeration getDeclaredPrefixes();
  public String[]    processName(String qualifiedName, 
   String[] parts, boolean isAttribute);
   
}</code></pre>
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Filtering XML</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>XMLFilter</code> interface is like an XML reader, 
"except that it obtains its events from another XML reader
rather than a primary source like an XML document or database. 
Filters can modify a stream of
events as they pass on to the final application."</p></li>

<li><p>The <dfn>parent</dfn> is the parser the filter
 gets the data from.</p></li>
<li><p>Only two methods in the interface:
<pre><code>public void      setParent(XMLReader parent)
public XMLReader getParent()
</code></pre>
</p></li>
<li><p><code>XMLFilterImpl</code> is a default filter that simply passes along
all events it receives:

<p><code>public class XMLFilterImpl implements XMLFilter, EntityResolver, DTDHandler, 
ContentHandler, ErrorHandler</code></p>
</p></li>
<li><p>Only new methods are constructors: 
<pre><code>public XMLFilterImpl()
public XMLFilterImpl(XMLReader parent)
</code></pre>
</p></li>

</ul><hr color="red" style="color: red" size="2"><h2>XMLFilter Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import java.util.*;
import java.io.IOException;


public class UnparsedTextFilter extends XMLFilterImpl {

  private TextEntityReplacer replacer;

  public UnparsedTextFilter(XMLReader parent) {
    super(parent);
  }

  public void parse(InputSource input) 
   throws IOException, SAXException {
                 System.out.println("parsing");

    replacer = new TextEntityReplacer(input.getPublicId(), 
     input.getSystemId());
    this.setDTDHandler(replacer); 
    this.setContentHandler(this); 
  }
  // The other parse() method just calls this one 

  public void parse(String systemId) 
   throws IOException, SAXException {
    parse(new InputSource(systemId)); 
  }

  public void startElement(String uri, String localName, 
   String qualifiedName, Attributes attributes) throws SAXException {
              System.out.println("startElement");

    Vector extraText = new Vector();

    // Are there any unparsed entities in the attributes?
    for (int i = 0; i &lt; attributes.getLength(); i++) {
      if (attributes.getType(i).equals("ENTITY")) {
        try {
          System.out.println("replacing");
          String s = replacer.getText(attributes.getValue(i));
          if (s != null) extraText.addElement(s);
        }
        catch (IOException e) {
          System.err.println(e); 
        }
      } 
      
    }    

    super.startElement(uri, localName, qualifiedName, attributes);
    
    // Now spew out the values of the unparsed entities:
    Enumeration e = extraText.elements();
    while (e.hasMoreElements()) {
      Object o = e.nextElement();
      String s = (String) o;
      super.characters(s.toCharArray(), 0, s.length()); 
    }
    
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>TextMerger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import org.xml.sax.helpers.*;
import java.util.*;
import java.io.IOException;
import org.apache.xml.serialize.*;


public class TextMerger {

  public static void main(String[] args) {
  
    XMLReader base;
    try {
     base = XMLReaderFactory.createXMLReader(
      "org.apache.xerces.parsers.SAXParser");
    }
    catch (Exception e) {
      // fall back on default parser
      try {
        base = XMLReaderFactory.createXMLReader();
      }
      catch (Exception ee) {
        System.err.println("Couldn't locate a SAX parser");
        return;          
      }
    }
    
    XMLReader parser = new UnparsedTextFilter(base);
    
    //essentially a pretty printer
    XMLSerializer printer 
     = new XMLSerializer(System.out, new OutputFormat());
    
    base.setContentHandler(printer);
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        System.out.println("Parsing " + args[i]);
        parser.parse(args[i]);
      }
      catch (SAXParseException e) { // well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage()
         + " at line " + e.getLineNumber() 
         + ", column " + e.getColumnNumber());
      }
      catch (SAXException e) { // some other kind of error
        System.out.println(e.getMessage());
      }
      catch (IOException e) {
        System.out.println("Could not report on " + args[i] 
         + " because of the IOException " + e);
      }      
    } // end for
    System.out.flush();
  
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>InputSource</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Encapsulates access to data so that it looks the same whether 
  it's coming from a
    <ul>
      <li><p>URL</p></li>
      <li><p>file</p></li>
      <li><p>stream</p></li>
      <li><p>reader</p></li>
      <li><p>database</p></li>
      <li><p>something else
      
      
      </p></li>
    </ul>
  </p></li>
  <li><p>Used in SAX1 and SAX2</p></li>
  <li><p>Allows the source to be changed</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The InputSource interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.xml.sax;

import java.io.*;

public class InputSource {

  public InputSource() 
  public InputSource(String systemID) 
  public InputSource(InputStream in)
  public InputSource(Reader in)

  public void   setPublicId(String publicID)
  public String getPublicId()
  public void   setSystemId(String systemID)
  public String getSystemId()

  public void        setByteStream(InputStream byteStream)
  public InputStream getByteStream()
  public void        setEncoding(String encoding)
  public String      getEncoding()
  public void        setCharacterStream(Reader characterStream)
  public Reader      getCharacterStream()

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Example of InputSource</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax;
import java.io.*;
import java.net.*;
import java.util.zip.*;
...
try {

  URL u = new URL(
   "http://www.cafeconleche.org/examples/1998validstats.xml.gz"); 
  InputStream raw = u.openStream();
  InputStream decompressed = new GZIPInputStream(raw);
  InputSource in = new InputSource(decompressed);
  // read the document... 

}
catch (IOException e) {
  System.err.println(e);
}
catch (SAXException e) {
  System.err.println(e);
}
</code></pre><hr color="red" style="color: red" size="2"><h2>What SAX2 doesn't do</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>ELEMENT, ATTLIST, ENTITY declarations are only
  optionally reported</p></li>
  <li><p>Schema declarations aren't reported at all</p></li>
  <li><p>Lexical events are only
  optionally reported</p></li>
  <li><p>SAX2 can be configured on top of a lot of different parsers with
    different capabilities. What the parser does is more important than what SAX2 does.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Event Based API Caveats</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>You do not always have all the information you need
  at the time of a given callback
  </p></li>
  <li><p>
  You may need to store information in various data structures
  (stacks, queues,vectors, arrays, etc.) and act on it at a later point
  </p></li>
  <li><p>For example the <code>characters()</code> method is not guaranteed
  to give you the maximum number of contiguous characters. It may 
  split a single run of characters over multiple method calls. 
   </p></li>

</ul><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>
      <cite><a href="http://www.cafeconleche.org/books/xmljava/">Processing XML with Java</a></cite>
       <img src="images/xmljavasmallcover.jpg" width="168" height="211" align="right" hspace="20"> 

     <ul> 
     <li><p>Elliotte Rusty Harold</p></li>
     <li><p>Addison Wesley, 2002</p></li>
     <li><p>Chapters 6-8:<ul>
             <li><p>Chapter 6, SAX: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch06.html">http://www.cafeconleche.org/books/xmljava/chapters/ch06.html</a></p></li>
              <li><p>Chapter 7, The XMLReader Interface: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch07.html">http://www.cafeconleche.org/books/xmljava/chapters/ch07.html</a></p></li>
  <li><p>Chapter 8, SAX Filters: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch08.html">http://www.cafeconleche.org/books/xmljava/chapters/ch08.html</a></p></li>
</ul>
</p></li>
     </ul>
      <br clear="all">
   </p></li>
   
  <li><p><img src="images/xian2medium.jpg" align="right" hspace="5" width="127" height="190">
 <cite>XML in a Nutshell, 2nd Edition</cite>
 <ul>
    <li><p>Elliotte Rusty Harold and W. Scott Means</p></li>
    <li><p>O'Reilly &amp; Associates, 2002</p></li>
    <li><p>ISBN 0-596-00292-0</p></li>
</ul>
 <br clear="all"></p></li>
  <li><p>SAX website: 
  <a href="http://www.saxproject.org/">http://www.saxproject.org/</a></p></li>
  
  </ul><br xmlns:xinclude="http://www.w3.org/2001/XInclude" clear="all"><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question4.gif" width="121" height="148">
  </div><hr color="red" style="color: red" size="2"><h2>Part IV: DOM, The Document Object Model</h2><blockquote xmlns:xinclude="http://www.w3.org/2001/XInclude">
The DOM (like XML) is not a triumph of elegance; it's a triumph
of "if we do not hang together, we shall hang separately." At
least the Browser Wars were not followed by API Wars. Better a
common API that we all love to hate than a bazillion contending
APIs that carve the Web up into contending enclaves of True
Believers.
</blockquote><p xmlns:xinclude="http://www.w3.org/2001/XInclude">--Mike Champion on the xml-dev mailing list, Thursday, September 27, 2001
        </p><hr color="red" style="color: red" size="2"><h2>Where we're going</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Writing with DOM</p></li>
    <li><p>Reading with DOM</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Trees</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>An XML document can be represented as a tree.</p></li>
  <li><p>It has a root.</p></li>
  <li><p>It has nodes.</p></li>
  <li><p>It is amenable to recursive processing.</p></li>
  <li><p>Not all applications agree on what the root is.</p></li>
  <li><p>Not all applications agree on what is and isn't a node.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Document Object Model</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Defines how XML and HTML
documents are represented as objects in 
programs </p></li>
<li><p><a href="http://www.w3.org/TR/DOM-Level-2/">W3C Standard</a></p></li>
<li><p>Defined in IDL; thus language independent</p></li>
<li><p>HTML as well as XML</p></li>
<li><p>Writing as well as reading</p></li>
<li><p>Covers everything except 
internal and external DTD subsets
</p></li>
<li><p>DOM focuses more on the document; SAX focuses more on the parser.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>DOM Evolution</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>DOM Level 0:  </p></li>
<li><p><a href="http://www.w3.org/TR/REC-DOM-Level-1">DOM Level 1</a>, a W3C Standard</p></li>
<li><p><a href="http://www.w3.org/TR/DOM-Level-2/">DOM Level 2</a>, a W3C Standard</p></li>
<li><p>DOM Level 3: Several Working Drafts:
<ul>
<li><p><a href="http://www.w3.org/TR/DOM-Level-3-Core/">Document Object Model (DOM) Level 3 Core Specification</a> </p></li>
<li><p><a href="http://www.w3.org/TR/DOM-Level-3-XPath"> Document Object Model (DOM) Level 3 XPath Specification Version 1.0 </a></p></li>
<li><p><a href="http://www.w3.org/TR/DOM-Level-3-ASLS/">Document 
Object Model (DOM) Level 3 Abstract 
Schemas and Load and Save Specification </a></p></li>
<li><p><a href="http://www.w3.org/TR/DOM-Level-3-Views/">Document Object Model (DOM) Level 3 Views and Formatting
              Specification</a></p></li> 
<li><p><a href="http://www.w3.org/TR/DOM-Level-3-Events/">Document Object Model 
(DOM) Level 3 Events Specification Version 1.0</a></p></li> 
</ul>
 </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>DOM Implementations for Java</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">

<li><p>Apache XML Project's Xerces Java: 
<a href="http://xml.apache.org/xerces-j/index.html">http://xml.apache.org/xerces-j/index.html</a></p></li>

<li><p>IBM's XML for Java: 
<a href="http://www.alphaworks.ibm.com/formula/xml">http://www.alphaworks.ibm.com/formula/xml</a></p></li>

<li><p>Sun's Java API for
XML
<a href="http://java.sun.com/products/xml/">http://java.sun.com/products/xml</a></p></li>
<li><p>Oracle: 
<a href="http://technet.oracle.com/tech/xml/">http://technet.oracle.com/tech/xml</a>
</p></li>
<li><p>GNU JAXP: <a href="http://www.gnu.org/software/classpathx/jaxp/jaxp.html">http://www.gnu.org/software/classpathx/jaxp/jaxp.html</a></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Eight Modules:</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Eight Modules:
<ul>
<li><p>Core: <code>org.w3c.dom</code> *</p></li>
<li><p>HTML: <code>org.w3c.dom.html</code></p></li>
<li><p>Views: <code>org.w3c.dom.views</code></p></li>
<li><p>StyleSheets: <code>org.w3c.dom.stylesheets</code></p></li>
<li><p>CSS: <code>org.w3c.dom.css</code></p></li>
<li><p>Events: <code>org.w3c.dom.events</code> *</p></li>
<li><p>Traversal: <code>org.w3c.dom.traversal</code> *</p></li>
<li><p>Range: <code>org.w3c.dom.range</code> </p></li>
</ul>
</p></li>
<li><p>Only the core and traversal modules really apply to XML. 
The other six are for
HTML.</p></li>
<li><p>* indicates Xerces support</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>DOM Trees</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Entire document is represented as a tree.</p></li>
<li><p>A tree contains nodes.</p></li>
<li><p>Some nodes may contain other nodes
(depending on node type).</p></li>
<li><p>Each document node contains:
<ul> <li><p>zero
         or one doctype nodes</p></li>
         <li><p> one root element node</p></li>
         <li><p>zero or more comment and processing
         instruction nodes</p></li>
</ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>org.w3c.dom</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>17 interfaces:
<ul>
 <li><p><code>Attr </code></p></li>
 <li><p><code>CDATASection </code></p></li>
 <li><p><code>CharacterData </code></p></li>
 <li><p><code>Comment </code></p></li>
 <li><p><code>Document </code></p></li>
 <li><p><code>DocumentFragment </code></p></li>
 <li><p><code>DocumentType </code></p></li>
 <li><p><code>DOMImplementation </code></p></li>
 <li><p><code>Element </code></p></li>
 <li><p><code>Entity </code></p></li>
 <li><p><code>EntityReference </code></p></li>
 <li><p><code>NamedNodeMap </code></p></li>
 <li><p><code>Node </code></p></li>
 <li><p><code>NodeList </code></p></li>
 <li><p><code>Notation </code></p></li>
 <li><p><code>ProcessingInstruction</code></p></li> 
 <li><p><code>Text</code></p></li>
</ul>
</p></li>
 <li><p>plus one exception:  
 <code>DOMException</code></p></li>
 <li><p>Plus a bunch of HTML stuff in <code>org.w3c.dom.html</code>
 and other packages
 we will ignore</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The DOM Process</h2><ol xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Library specific code creates a parser</p></li>
<li><p>The parser parses the document and returns a DOM 
<code>org.w3c.dom.Document</code> object.
</p></li>
<li><p>The entire document is stored in memory. 
</p></li>
<li><p>DOM methods and interfaces are used to extract data from this object</p></li>
</ol><hr color="red" style="color: red" size="2"><h2>Parsing documents with a DOM Parser Example </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;

public class DOMParserMaker {

  public static void main(String[] args) {
     
    // This is simpler but less flexible than the SAX approach.
    // Perhaps a good creational design pattern is needed here?   
  
    DOMParser parser = new DOMParser();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document d = parser.getDocument();
        // work with the document...
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
   
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>The JAXP Process</h2><ol xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p><code>javax.xml.parsers.DocumentBuilderFactory.newInstance()</code>
 creates a <code>DocumentBuilderFactory</code></p></li>
 <li><p>Configure the factory</p></li>
<li><p>The factory's <code>newBuilder()</code> method
 creates a <code>DocumentBuilder</code></p></li>
 <li><p>Configure the builder</p></li>
<li><p>The builder parses the document and returns a DOM 
<code>org.w3c.dom.Document</code> object.
</p></li>
<li><p>The entire document is stored in memory. 
</p></li>
<li><p>DOM methods and interfaces are used to extract data from this object</p></li>
</ol><hr color="red" style="color: red" size="2"><h2>Parsing documents with a JAXP DocumentBuilder </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;

public class JAXPParserMaker {

  public static void main(String[] args) {
     
    try {       
      DocumentBuilderFactory builderFactory 
       = DocumentBuilderFactory.newInstance();
      builderFactory.setNamespaceAware(true);
      DocumentBuilder parser 
       = builderFactory.newDocumentBuilder();
    
      for (int i = 0; i &lt; args.length; i++) {
        try {
          // Read the entire document into memory
          Document d = parser.parse(args[i]); 
          // work with the document...
        }
        catch (SAXException e) {
        System.err.println(e); 
        }
        catch (IOException e) {
          System.err.println(e); 
        }
      
      } // end for
      
    }
    catch (ParserConfigurationException e) {
      System.err.println("You need to install a JAXP aware parser.");
    }
   
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>The Node Interface </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Node {

  // NodeType
  public static final short ELEMENT_NODE                = 1;
  public static final short ATTRIBUTE_NODE              = 2;
  public static final short TEXT_NODE                   = 3;
  public static final short CDATA_SECTION_NODE          = 4;
  public static final short ENTITY_REFERENCE_NODE       = 5;
  public static final short ENTITY_NODE                 = 6;
  public static final short PROCESSING_INSTRUCTION_NODE = 7;
  public static final short COMMENT_NODE                = 8;
  public static final short DOCUMENT_NODE               = 9;
  public static final short DOCUMENT_TYPE_NODE          = 10;
  public static final short DOCUMENT_FRAGMENT_NODE      = 11;
  public static final short NOTATION_NODE               = 12;

  public String       getNodeName();
  public String       getNodeValue() throws DOMException;
  public void         setNodeValue(String nodeValue) throws DOMException;
  public short        getNodeType();
  public Node         getParentNode();
  public NodeList     getChildNodes();
  public Node         getFirstChild();
  public Node         getLastChild();
  public Node         getPreviousSibling();
  public Node         getNextSibling();
  public NamedNodeMap getAttributes();
  public Document     getOwnerDocument();
  public Node         insertBefore(Node newChild, Node refChild) throws DOMException;
  public Node         replaceChild(Node newChild, Node oldChild) throws DOMException;
  public Node         removeChild(Node oldChild) throws DOMException;
  public Node         appendChild(Node newChild) throws DOMException;
  public boolean      hasChildNodes();
  public Node         cloneNode(boolean deep);
  public void         normalize();
  public boolean      supports(String feature, String version);
  public String       getNamespaceURI();
  public String       getPrefix();
  public void         setPrefix(String prefix) throws DOMException;
  public String       getLocalName();
  
}</code></pre><hr color="red" style="color: red" size="2"><h2>The NodeList Interface </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface NodeList {
  public Node item(int index);
  public int  getLength();
}
</code></pre><hr xmlns:xinclude="http://www.w3.org/2001/XInclude"><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Now we're really ready to read a document</p><hr color="red" style="color: red" size="2"><h2>Node Reporter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;


public class NodeReporter {

  public static void main(String[] args) {
     
    try {       
      DocumentBuilderFactory builderFactory 
       = DocumentBuilderFactory.newInstance();
      DocumentBuilder parser 
       = builderFactory.newDocumentBuilder();
      NodeReporter iterator = new NodeReporter();
        
      for (int i = 0; i &lt; args.length; i++) {
        try {
          // Read the entire document into memory
          Document doc = parser.parse(args[i]); 
          iterator.followNode(doc);
        }
        catch (SAXException ex) {
          System.err.println(args[i] + " is not well-formed."); 
        }
        catch (IOException ex) {
          System.err.println(ex); 
        }
      }
    }
    catch (ParserConfigurationException ex) {
      System.err.println("You need to install a JAXP aware parser.");
    }
  
  } // end main

  // note use of recursion
  public void followNode(Node node) {
    
    processNode(node);
    if (node.hasChildNodes()) {
      NodeList children = node.getChildNodes();
      for (int i = 0; i &lt; children.getLength(); i++) {
        followNode(children.item(i));
      } 
    }
    
  }

  public void processNode(Node node) {
    
    String name = node.getNodeName();
    String type = getTypeName(node.getNodeType());
    System.out.println("Type " + type + ": " + name);
    
  }
  
  public static String getTypeName(int type) {
    
    switch (type) {
      case Node.ELEMENT_NODE: 
        return "Element";
      case Node.ATTRIBUTE_NODE: 
        return "Attribute";
      case Node.TEXT_NODE: 
        return "Text";
      case Node.CDATA_SECTION_NODE: 
        return "CDATA Section";
      case Node.ENTITY_REFERENCE_NODE: 
        return "Entity Reference";
      case Node.ENTITY_NODE: 
        return "Entity";
      case Node.PROCESSING_INSTRUCTION_NODE: 
        return "Processing Instruction";
      case Node.COMMENT_NODE : 
        return "Comment";
      case Node.DOCUMENT_NODE: 
        return "Document";
      case Node.DOCUMENT_TYPE_NODE: 
        return "Document Type Declaration";
      case Node.DOCUMENT_FRAGMENT_NODE: 
        return "Document Fragment";
      case Node.NOTATION_NODE: 
        return "Notation";
      default: 
        return "Unknown Type"; 
    }
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Node Reporter Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java NodeReporter hotcop.xml
Type Document: #document
Type Processing Instruction: xml-stylesheet
Type Document Type Declaration: SONG
Type Element: SONG
Type Text: #text
Type Element: TITLE
Type Text: #text
Type Text: #text
Type Element: PHOTO
Type Text: #text
Type Element: COMPOSER
Type Text: #text
Type Text: #text
Type Element: COMPOSER
Type Text: #text
Type Text: #text
Type Element: COMPOSER
Type Text: #text
Type Text: #text
Type Element: PRODUCER
Type Text: #text
Type Text: #text
Type Comment: #comment
Type Text: #text
Type Element: PUBLISHER
Type Text: #text
Type Text: #text
Type Element: LENGTH
Type Text: #text
Type Text: #text
Type Element: YEAR
Type Text: #text
Type Text: #text
Type Element: ARTIST
Type Text: #text
Type Text: #text
Type Comment: #comment
</tt></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Attributes are missing from this output.
They are not nodes. They are properties of nodes.
</p><hr color="red" style="color: red" size="2"><h2>Node Values as returned by getNodeValue()</h2><table xmlns:xinclude="http://www.w3.org/2001/XInclude" border="1">
<tr><th>Node Type</th><th>Node Value</th></tr>
<tr><td>element node</td><td>null</td></tr>
<tr><td>attribute node</td><td>attribute value</td></tr>
<tr><td>text node</td><td>text of the node</td></tr>
<tr><td>CDATA section node</td><td>text of the section</td></tr>
<tr><td>entity reference node</td><td>null</td></tr>
<tr><td>entity node</td><td>null</td></tr>
<tr><td>processing instruction node</td><td>content of the processing
instruction, not including the target</td></tr>
<tr><td>comment node</td><td>text of the comment</td></tr>
<tr><td>document node</td><td>null</td></tr>
<tr><td>document type declaration node</td><td>null</td></tr>
<tr><td>document fragment node</td><td>null</td></tr>
<tr><td>notation node</td><td>null</td></tr>
</table><hr color="red" style="color: red" size="2"><h2>The Document Node</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The root <em>node</em> representing the entire document;
  not the same as the root <em>element</em></p></li>
  <li><p>Contains:
  <ul>
  <li><p>one element node</p></li>
  <li><p>zero or more processing instruction nodes</p></li>
  <li><p>zero or more comment nodes</p></li>
  <li><p>zero or one document type nodes</p></li>
</ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Document Interface </h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

  public interface Document extends Node {
  
    public DocumentType      getDoctype();
    public DOMImplementation getImplementation();
    public Element           getDocumentElement();

    public NodeList        getElementsByTagName(String tagname);
    public NodeList        getElementsByTagNameNS(String namespaceURI, String localName);
    public Element         getElementById(String elementId);

    // Factory methods    
    public Element           createElement(String tagName) throws DOMException;
    public Element           createElementNS(String namespaceURI, String qualifiedName) throws DOMException;
    public DocumentFragment  createDocumentFragment();
    public Text              createTextNode(String data);
    public Comment           createComment(String data);
    public CDATASection      createCDATASection(String data) throws DOMException;
    public ProcessingInstruction createProcessingInstruction(String target, String data)
     throws DOMException;
    public Attr            createAttribute(String name) throws DOMException;
    public Attr            createAttributeNS(String namespaceURI, String qualifiedName) throws DOMException;
    public EntityReference createEntityReference(String name) throws DOMException;

    public Node            importNode(Node importedNode, boolean deep) throws DOMException;
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>A Sample Application</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>UserLand's RSS based list of Web logs
 at 
<a href="http://static.userland.com/weblogMonitor/logs.xml">http://static.userland.com/weblogMonitor/logs.xml</a>:


<pre><code>&lt;?xml version="1.0"?&gt;
&lt;!-- &lt;!DOCTYPE foo SYSTEM "http://msdn.microsoft.com/xml/general/htmlentities.dtd"&gt; --&gt;
&lt;weblogs&gt;
	&lt;log&gt;
		&lt;name&gt;MozillaZine&lt;/name&gt;
		&lt;url&gt;http://www.mozillazine.org&lt;/url&gt;
		&lt;changesUrl&gt;http://www.mozillazine.org/contents.rdf&lt;/changesUrl&gt;
		&lt;ownerName&gt;Jason Kersey&lt;/ownerName&gt;
		&lt;ownerEmail&gt;kerz@en.com&lt;/ownerEmail&gt;
		&lt;description&gt;THE source for news on the Mozilla Organization.  DevChats, Reviews, Chats, Builds, Demos, Screenshots, and more.&lt;/description&gt;
		&lt;imageUrl&gt;&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/kerz@en.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SalonHerringWiredFool&lt;/name&gt;
		&lt;url&gt;http://www.salonherringwiredfool.com/&lt;/url&gt;
		&lt;ownerName&gt;Some Random Herring&lt;/ownerName&gt;
		&lt;ownerEmail&gt;salonfool@wiredherring.com&lt;/ownerEmail&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;Scripting News&lt;/name&gt;
		&lt;url&gt;http://www.scripting.com/&lt;/url&gt;
		&lt;ownerName&gt;Dave Winer&lt;/ownerName&gt;
		&lt;ownerEmail&gt;dave@userland.com&lt;/ownerEmail&gt;
		&lt;description&gt;News and commentary from the cross-platform scripting community.&lt;/description&gt;
		&lt;imageUrl&gt;http://www.scripting.com/gifs/tinyScriptingNews.gif&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/dave@userland.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SlashDot.Org&lt;/name&gt;
		&lt;url&gt;http://www.slashdot.org/&lt;/url&gt;
		&lt;ownerName&gt;Simply a friend&lt;/ownerName&gt;
		&lt;ownerEmail&gt;afriendofweblogs@weblogs.com&lt;/ownerEmail&gt;
		&lt;description&gt;News for Nerds, Stuff that Matters.&lt;/description&gt;
		&lt;/log&gt;
	&lt;/weblogs&gt;
</code></pre>

</p></li>

</ul><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="http://static.userland.com/weblogMonitor/logs.xml">Full list</a><hr color="red" style="color: red" size="2"><h2>DOM Design</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>We can easily find out how many URLs there will be when 
we finish parsing,
since they're all in memory.
</p></li>
<li><p>Single threaded by nature; no benefit to multiple threads
since no data will be available until the entire document has been read and parsed.
</p></li>
<li><p>The character data of each <code>url</code> 
element needs to be read.
Everything else can be ignored.
</p></li>
<li><p>The  <code>getElementsByTagName()</code> method in 
<code>Document</code> gives us a quick list of all the 
 <code>url</code> 
elements.
</p></li>

<li><p>The XML parsing is so straight-forward it can
be done inside one method. No extra class is required.
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Weblogs with DOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.w3c.dom.*;
import org.xml.sax.SAXException;
import java.io.IOException;
import java.util.*;
import java.net.*;


public class WeblogsDOM {

  public static String DEFAULT_URL
   = "http://static.userland.com/weblogMonitor/logs.xml";

  public static List listChannels() throws DOMException {
    return listChannels(DEFAULT_URL);
  }

  public static List listChannels(String uri) throws DOMException {

    if (uri == null) {
      throw new NullPointerException("URL must be non-null");
    }

    org.apache.xerces.parsers.DOMParser parser
     = new org.apache.xerces.parsers.DOMParser();

    Vector urls = null;

    try {
      // Read the entire document into memory
      parser.parse(uri);
      Document doc = parser.getDocument();
      NodeList logs = doc.getElementsByTagName("url");

      urls = new Vector(logs.getLength());

      for (int i = 0; i &lt; logs.getLength(); i++) {
        try {
          Node element = logs.item(i);
          Node text = element.getFirstChild();
          String content = text.getNodeValue();
          URL u = new URL(content);
          urls.addElement(u);
        }
        catch (MalformedURLException e) {
          // bad input data from one third party; just ignore it
        }
      }
    }
    catch (SAXException e) {
      System.err.println(e);
    }
    catch (IOException e) {
      System.err.println(e);
    }

    return urls;

  }

  public static void main(String[] args) {

    try {
      List urls;
      if (args.length &gt; 0) {
        try {
          URL url = new URL(args[0]);
          urls = listChannels(args[0]);
        }
        catch (MalformedURLException e) {
          System.err.println("Usage: java WeblogsDOM url");
          return;
        }
      }
      else {
        urls = listChannels();
      }
      Iterator iterator = urls.iterator();
      while (iterator.hasNext()) {
        System.out.println(iterator.next());
      }
    }
    catch (/* Unexpected */ Exception e) {
      e.printStackTrace();
    }

  } // end main

}</code></pre><hr color="red" style="color: red" size="2"><h2>Weblogs Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java WeblogsDOM
http://2020Hindsight.editthispage.com/
http://www.sff.net/people/mitchw/weblog/weblog.htp
http://nate.weblogs.com/
http://plugins.launchpoint.net
http://404.psistorm.net
http://home.att.net/~geek9000
http://daubnet.tzo.com/weblog
<i>several hundred more...</i>
</code></pre><hr color="red" style="color: red" size="2"><h2>Element Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a complete element including its start-tag, end-tag, and content</p></li>
<li><p>Contains: 
  <ul>
  <li><p>Element nodes</p></li>
  <li><p>ProcessingInstruction nodes</p></li>
  <li><p>Comment nodes</p></li>
  <li><p>Text nodes</p></li>
  <li><p>CDATASection nodes</p></li>
  <li><p>EntityReference nodes</p></li>
  </ul>
  </p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The Element Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Element extends Node {

  public String   getTagName();

  public NodeList getElementsByTagName(String name);
  public NodeList getElementsByTagNameNS(String namespaceURI, 
   String localName);

  public String   getAttribute(String name);
  public String   getAttributeNS(String namespaceURI, 
   String localName);
  public void     setAttribute(String name, String value) 
   throws DOMException;
  public void     setAttributeNS(String namespaceURI, 
   String qualifiedName, String value) throws DOMException;
  public void     removeAttribute(String name) throws DOMException;
  public void     removeAttributeNS(String namespaceURI, 
   String localName) throws DOMException;
  public Attr     getAttributeNode(String name);
  public Attr     getAttributeNodeNS(String namespaceURI, String localName);
  public Attr     setAttributeNode(Attr newAttr) throws DOMException;
  public Attr     setAttributeNodeNS(Attr newAttr) throws DOMException;
  public Attr     removeAttributeNode(Attr oldAttr) throws DOMException;

}
</code></pre><hr color="red" style="color: red" size="2"><h2>IDTagger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.DOMParser;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.IOException;
import org.apache.xml.serialize.*;


public class IDTagger {

  int id = 1;

  public void processNode(Node node) {
    
    if (node.getNodeType() == Node.ELEMENT_NODE) {
      
      Element element = (Element) node;
      String currentID = element.getAttribute("ID");
      if (currentID == null || currentID.equals("")) {
        element.setAttribute("ID", "_" + id);
        id = id + 1; 
      }
    }
    
  }

  // note use of recursion
  public void followNode(Node node) {
    
    processNode(node);
    if (node.hasChildNodes()) {
      NodeList children = node.getChildNodes();
      for (int i = 0; i &lt; children.getLength(); i++) {
        followNode(children.item(i));
      } 
    }
    
  }

  public static void main(String[] args) {
     
    DOMParser parser  = new DOMParser();
    IDTagger iterator = new IDTagger();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document document = parser.getDocument();
        iterator.followNode(document);
        
        // now we serialize the document...
        OutputFormat format = new OutputFormat(document);
        XMLSerializer serializer 
         = new XMLSerializer(System.out, format);
        serializer.serialize(document);       
        
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Output from IDTagger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;
&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;&lt;!-- This should be a four digit year like "1999",
     not a two-digit year like "99" --&gt;&lt;SONG xmlns="http://www.cafeconleche.org/namespace/song" ID="_1" xmlns:xlink="http://www.w3.org/1999/xlink"&gt;   &lt;TITLE ID="_2"&gt;Hot Cop&lt;/TITLE&gt;   &lt;PHOTO ALT="Victor Willis in Cop Outfit" HEIGHT="200" ID="_3" WIDTH="100" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="hotcop.jpg" xlink:show="onLoad" xlink:type="simple"/&gt;   &lt;COMPOSER ID="_4"&gt;Jacques Morali&lt;/COMPOSER&gt;   &lt;COMPOSER ID="_5"&gt;Henri Belolo&lt;/COMPOSER&gt;   &lt;COMPOSER ID="_6"&gt;Victor Willis&lt;/COMPOSER&gt;   &lt;PRODUCER ID="_7"&gt;Jacques Morali&lt;/PRODUCER&gt;   &lt;!-- The publisher is actually Polygram but I needed 
       an example of a general entity reference. --&gt;   &lt;PUBLISHER ID="_8" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="http://www.amrecords.com/" xlink:type="simple"&gt;     A &amp;amp; M Records   &lt;/PUBLISHER&gt;   &lt;LENGTH ID="_9"&gt;6:20&lt;/LENGTH&gt;   &lt;YEAR ID="_10"&gt;1978&lt;/YEAR&gt;   &lt;ARTIST ID="_11"&gt;Village People&lt;/ARTIST&gt; &lt;/SONG&gt;&lt;!-- You can tell what album I was 
     listening to when I wrote this example --&gt;</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/hotcop_id.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>CharacterData interface</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents things that are basically text holders</p></li>

<li><p>Super interface of <code>Text</code>, <code>Comment</code>,
and <code>CDATASection</code> </p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The CharacterData Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface CharacterData extends Node {

  public String getData() throws DOMException;
  public void   setData(String data) throws DOMException;
  public int    getLength();
  public String substringData(int offset, int count) 
   throws DOMException;
  public void   appendData(String arg) 
   throws DOMException;
  public void   insertData(int offset, String arg) 
   throws DOMException;
  public void   deleteData(int offset, int count) 
   throws DOMException;
  public void   replaceData(int offset, int count, String arg) 
   throws DOMException;
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>ROT13 XML Text</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.DOMParser;
import org.apache.xml.serialize.*;
import org.w3c.dom.*;
import org.xml.sax.SAXException;
import java.io.IOException;


public class ROT13XML {

  public void processNode(Node node) {
    
    if (node.getNodeType() == Node.TEXT_NODE
     || node.getNodeType() == Node.COMMENT_NODE
     || node.getNodeType() == Node.CDATA_SECTION_NODE) {
      CharacterData text = (CharacterData) node;
      String data = text.getData();
      text.setData(rot13(data));
    }
    
  }

  // note use of recursion
  public void followNode(Node node) {
    
    processNode(node);
    if (node.hasChildNodes()) {
      NodeList children = node.getChildNodes();
      for (int i = 0; i &lt; children.getLength(); i++) {
        followNode(children.item(i));
      } 
    }
    
  }
  
  public static String rot13(String s) {
    
    StringBuffer result = new StringBuffer(s.length());
    for (int i = 0; i &lt; s.length(); i++) {
      int c = s.charAt(i);
      if (c &gt;= 'A' &amp;&amp; c &lt;= 'M') result.append((char) (c+13));
      else if (c &gt;= 'N' &amp;&amp; c &lt;= 'Z') result.append((char) (c-13));
      else if (c &gt;= 'a' &amp;&amp; c &lt;= 'm') result.append((char) (c+13));
      else if (c &gt;= 'n' &amp;&amp; c &lt;= 'z') result.append((char) (c-13));
      else result.append((char) c);
      
    } 
    return result.toString();
    
  }

  public static void main(String[] args) {
     
    DOMParser parser   = new DOMParser();
    ROT13XML  iterator = new ROT13XML();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document document = parser.getDocument();
        iterator.followNode(document);
        
        // now we serialize the document...
        OutputFormat format = new OutputFormat(document);
        XMLSerializer serializer 
         = new XMLSerializer(System.out, format);
        serializer.serialize(document);
               
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

}
</code></pre><hr color="red" style="color: red" size="2"><h2>ROT13 XML Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE SONG SYSTEM "song.dtd"&gt;
&lt;?xml-stylesheet type="text/css" href="song.css"?&gt;
&lt;SONG xmlns="http://metalab.unc.edu/xml/namespace/song"
xmlns:xlink="http://www.w3.org/1999/xlink"&gt;   &lt;TITLE&gt;Ubg Pbc&lt;/TITLE&gt;
&lt;PHOTO ALT="Victor Willis in Cop Outfit" HEIGHT="200" WIDTH="100"
xlink:href="hotcop.jpg" xlink:show="onLoad" xlink:type="simple"/&gt;
&lt;COMPOSER&gt;Wnpdhrf Zbenyv&lt;/COMPOSER&gt;   &lt;COMPOSER&gt;Uraev Orybyb&lt;/COMPOSER&gt;
&lt;COMPOSER&gt;Ivpgbe Jvyyvf&lt;/COMPOSER&gt;   &lt;PRODUCER&gt;Wnpdhrf Zbenyv&lt;/PRODUCER&gt;
&lt;!-- Gur choyvfure vf npghnyyl Cbyltenz ohg V arrqrq         na rknzcyr
bs n trareny ragvgl ersrerapr. --&gt;   &lt;PUBLISHER
xlink:href="http://www.amrecords.com/" xlink:type="simple"&gt;     N &amp;amp;
Z Erpbeqf   &lt;/PUBLISHER&gt;   &lt;LENGTH&gt;6:20&lt;/LENGTH&gt;   &lt;YEAR&gt;1978&lt;/YEAR&gt;
&lt;ARTIST&gt;Ivyyntr Crbcyr&lt;/ARTIST&gt; &lt;/SONG&gt;
&lt;!-- Lbh pna gryy jung nyohz V jnf 
     yvfgravat gb jura V jebgr guvf rknzcyr --&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>Text Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents the text content of an element or attribute</p></li>
<li><p>Contains only pure text, no markup</p></li>
<li><p>Parsers will return a single maximal 
text node for each contiguous run of pure text
</p></li>
<li><p>Editing may change this</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Text Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Text extends CharacterData {

  public Text splitText(int offset) throws DOMException;
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>CDATA section Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a CDATA section like
this example from a hypothetical SVG tutorial:
<pre><code>&lt;p&gt;You can use a default &lt;code&gt;xmlns&lt;/code&gt; attribute to avoid 
having to add the svg prefix to all your elements:&lt;/p&gt;
     &lt;![CDATA[
       &lt;svg xmlns="http://www.w3.org/2000/svg" 
            width="12cm" height="10cm"&gt;
         &lt;ellipse rx="110" ry="130" /&gt;
         &lt;rect x="4cm" y="1cm" width="3cm" height="6cm" /&gt;
       &lt;/svg&gt;
     ]]&gt;      
</code></pre>
</p></li>
<li><p>No children</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The CDATASection Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface CDATASection extends Text {
}
</code></pre><hr color="red" style="color: red" size="2"><h2>DocumentType Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a document type declaration</p></li>
<li><p>Has no children</p></li> 
</ul><hr color="red" style="color: red" size="2"><h2>The DocumentType Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface DocumentType extends Node {

  public String       getName();
  public NamedNodeMap getEntities();
  public NamedNodeMap getNotations();
  public String       getPublicId();
  public String       getSystemId();
  public String       getInternalSubset();
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Example of the DocumentType Interface</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Verify that a document is correct XHTML</p></li>
  <li><p>From the <a href="http://www.w3.org/TR/xhtml1/#docconf">XHTML 1.0 spec:</a>
  <blockquote>
<ol>
<li><p>
<p>It must validate against one of the three DTDs found in <a href="http://www.w3.org/TR/xhtml1/#dtds">Appendix&nbsp;A</a>.</p>
</p></li>

<li><p>
<p>The root element of the document must be <code>
&lt;html&gt;</code>.</p>
</p></li>

<li><p>
<p>The root element of the document must designate the XHTML
namespace using the <code>xmlns</code> attribute <a href="#ref-xmlns">[XMLNAMES]</a>. The namespace for XHTML is
defined to be 
<code>http://www.w3.org/1999/xhtml</code>.</p>
</p></li>

<li><p>
<p>There must be a DOCTYPE declaration in the document prior to
the root element. The public identifier included in
the DOCTYPE declaration must reference one of the three DTDs
found in <a href="http://www.w3.org/TR/xhtml1/#dtds">Appendix&nbsp;A</a> using the respective
Formal Public Identifier. The system identifier may be changed to reflect
local system conventions.</p>

<pre>
&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "DTD/xhtml1-strict.dtd"&gt;

&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "DTD/xhtml1-transitional.dtd"&gt;

&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
     "DTD/xhtml1-frameset.dtd"&gt;
</pre>
</p></li>
</ol>
</blockquote>
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>XHTMLValidator</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.w3c.dom.*;
import javax.xml.parsers.*;
import java.io.*;
import org.xml.sax.*;


public class XHTMLValidator {

  public static void main(String[] args) {
    
    if (args.length == 0) {
       System.err.println("Usage: java XHTMLValidator URL");
       return;   
    }

    try {
      DocumentBuilderFactory builderFactory 
       = DocumentBuilderFactory.newInstance();
      builderFactory.setNamespaceAware(true);
      builderFactory.setValidating(true);
      DocumentBuilder parser 
       = builderFactory.newDocumentBuilder();
      parser.setErrorHandler(new ValidityErrorReporter());

      Document document;
      try {
        document = parser.parse(args[0]); 
        // ValidityErrorReporter prints any validity errors detected
      }
      catch (SAXException e) {  
        System.out.println(args[0] + " is not valid."); 
        return; 
      }
      
      // If we get this far, then the document is valid XML.
      // Check to see whether the document is actually XHTML    
      DocumentType doctype = document.getDoctype();
  
      if (doctype == null) {
        System.out.println("No DOCTYPE"); 
        return;
      }
  
      String name     = doctype.getName();
      String systemID = doctype.getSystemId();
      String publicID = doctype.getPublicId();
    
      if (!name.equals("html")) {
        System.out.println("Incorrect root element name " + name); 
      }
  
      if (publicID == null
       || (!publicID.equals("-//W3C//DTD XHTML 1.0 Strict//EN")
           &amp;&amp; !publicID.equals(
                "-//W3C//DTD XHTML 1.0 Transitional//EN")
           &amp;&amp; !publicID.equals(
                "-//W3C//DTD XHTML 1.0 Frameset//EN"))) {
        System.out.println(args[0] 
         + " does not seem to use an XHTML 1.0 DTD");
      }
  
      // Check the namespace on the root element
      Element root = document.getDocumentElement();
      String xmlnsValue = root.getAttribute("xmlns");
      if (!xmlnsValue.equals("http://www.w3.org/1999/xhtml")) {
        System.out.println(args[0] 
         + " does not properly declare the"
         + " http://www.w3.org/1999/xhtml"
         + " namespace on the root element");  
        return;      
      }
      
      System.out.println(args[0] + " is valid XHTML.");
      
    }
    catch (IOException e) {
      System.err.println("Could not read " + args[0]);
    }
    catch (Exception e) {
      System.err.println(e);
      e.printStackTrace();
    }
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>EntityReference Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents an entity reference such as <code>&amp;chapter1;</code>
or <code>&amp;signature;</code> </p></li>
<li><p>but not predefined entities such as 
<code>&amp;amp;</code> or character references such as <code>&amp;#xA0;</code></p></li>
<li><p>Optional: some parsers (including Xerces)
just expand entities</p></li>
<li><p>Contains: 
  <ul>
  <li><p>Element nodes</p></li>
  <li><p>ProcessingInstruction nodes</p></li>
  <li><p>Comment nodes</p></li>
  <li><p>Text nodes</p></li>
  <li><p>CDATASection nodes</p></li>
  <li><p>EntityReference nodes</p></li>
  </ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The EntityReference Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface EntityReference extends Node {

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Attr Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents an attribute</p></li>
<li><p>Contains: 
  <ul>
    <li><p>Text nodes</p></li>
    <li><p>Entity reference nodes</p></li>
  </ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Attr Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Attr extends Node {

  public String   getName();
  public boolean  getSpecified();
  public String   getValue();
  public void     setValue(String value) throws DOMException;
  public Element  getOwnerElement();
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>XLinkSpider with DOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import java.io.*;
import java.util.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;


public class DOMSpider {

  private static DocumentBuilder parser;
  
  // namespace support is turned off by default in JAXP
  static {
    try {
      DocumentBuilderFactory builderFactory 
       = DocumentBuilderFactory.newInstance();
      builderFactory.setNamespaceAware(true);
      parser = builderFactory.newDocumentBuilder();
    }
    catch (Exception ex) {
      throw new RuntimeException("Couldn't build a parser!");
    }
  }
  
  private static Vector visited = new Vector();
  
  private static int maxDepth = 5;
  private static int currentDepth = 0; 
  
  public static void listURIs(String systemId) {
    
    currentDepth++;
    try {
      if (currentDepth &lt; maxDepth) {
        Document document = parser.parse(systemId);
    
        Vector uris = new Vector();
        // search the document for uris, 
        // store them in vector, and print them
        searchForURIs(document.getDocumentElement(), uris); 
    
        Enumeration e = uris.elements();
        while (e.hasMoreElements()) {
          String uri = (String) e.nextElement();
          visited.addElement(uri);
          listURIs(uri); 
        }
      
      }
    
    }
    catch (SAXException e) {
      // couldn't load the document, 
      // probably not well-formed XML, skip it 
    }
    catch (IOException e) {
      // couldn't load the document, 
      // likely network failure, skip it 
    }
    finally { 
      currentDepth--;
      System.out.flush();     
    }
      
  }
  
  // use recursion 
  public static void searchForURIs(Element element, Vector uris) {
    
    // look for XLinks in this element
    String uri = element.getAttributeNS("http://www.w3.org/1999/xlink", "href");

    if (uri != null &amp;&amp; !uri.equals("") 
         &amp;&amp; !visited.contains(uri) 
         &amp;&amp; !uris.contains(uri)) {
      System.out.println(uri);
      uris.addElement(uri);
    }
    
    // process child elements recursively
    NodeList children = element.getChildNodes();
    for (int i = 0; i &lt; children.getLength(); i++) {
      Node n = children.item(i);
      if (n instanceof Element) {
        searchForURIs((Element) n, uris);
      } 
    }
    
  }
  

  public static void main(String[] args) {
    
    if (args.length == 0) {
      System.out.println("Usage: java DOMSpider URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      try {
        listURIs(args[i]);
      }
      catch (Exception e) {
        System.err.println(e);
        e.printStackTrace(); 
      }
      
    } // end for
  
  } // end main

} // end DOMSpider
</code></pre><hr color="red" style="color: red" size="2"><h2>ProcessingInstruction Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a processing instruction like

<p><code>&lt;?robots index="yes" follow="no"?&gt;</code></p>
</p></li>
<li><p>No children</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The ProcessingInstruction Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface ProcessingInstruction extends Node {

  public String getTarget();
  public String getData();
  public void   setData(String data) throws DOMException;
  
}</code></pre><hr color="red" style="color: red" size="2"><h2>XLinkSpider that Respects robots processing instruction</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.xml.sax.*;
import java.io.*;
import java.util.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;


public class PoliteDOMSpider {

  private static DocumentBuilder parser;
  
  // namespace support is turned off by default in JAXP
  static {
    try {
      DocumentBuilderFactory builderFactory 
       = DocumentBuilderFactory.newInstance();
      builderFactory.setNamespaceAware(true);
      parser = builderFactory.newDocumentBuilder();
    }
    catch (Exception ex) {
      throw new RuntimeException("Couldn't build a parser!");
    }
  }
  
  private static Vector visited = new Vector();
  
  private static int maxDepth = 5;
  private static int currentDepth = 0; 

  public static boolean robotsAllowed(Document document) {
    
    NodeList children = document.getChildNodes();
    for (int i = 0; i &lt; children.getLength(); i++) {
      Node n = children.item(i);
      if (n instanceof ProcessingInstruction) {
        ProcessingInstruction pi = (ProcessingInstruction) n;
        if (pi.getTarget().equals("robots")) {
          String data = pi.getData();
          if (data.indexOf("follow=\"no\"") &gt;= 0) {
            return false; 
          } 
        }
      }
    }
    
    return true;
    
  }
  
  public static void listURIs(String systemId) {
    
    currentDepth++;
    try {
      if (currentDepth &lt; maxDepth) {
        Document document = parser.parse(systemId);
    
        if (robotsAllowed(document)) {
          Vector uris = new Vector();
          // search the document for uris,
          // store them in vector, print them
          searchForURIs(document.getDocumentElement(), uris);
    
          Enumeration e = uris.elements();
          while (e.hasMoreElements()) {
            String uri = (String) e.nextElement();
            visited.addElement(uri);
            listURIs(uri); 
          }
          
        }
      
      }
    
    }
    catch (SAXException e) {
      // couldn't load the document, 
      // probably not well-formed XML, skip it 
    }
    catch (IOException e) {
      // couldn't load the document, 
      // likely network failure, skip it 
    }
    finally { 
      currentDepth--;
      System.out.flush();     
    }
      
  }
  
  // use recursion 
  public static void searchForURIs(Element element, Vector uris) {
    
    // look for XLinks in this element
    String uri = element.getAttributeNS("http://www.w3.org/1999/xlink", "href");

    if (uri != null &amp;&amp; !uri.equals("") 
         &amp;&amp; !visited.contains(uri) 
         &amp;&amp; !uris.contains(uri)) {
      System.out.println(uri);
      uris.addElement(uri);
    }
    
    // process child elements recursively
    NodeList children = element.getChildNodes();
    for (int i = 0; i &lt; children.getLength(); i++) {
      Node n = children.item(i);
      if (n instanceof Element) {
        searchForURIs((Element) n, uris);
      } 
    }
    
  }
  

  public static void main(String[] args) {
    
    if (args.length == 0) {
      System.out.println("Usage: java PoliteDOMSpider URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      try {
        listURIs(args[i]);
      }
      catch (Exception e) {
        System.err.println(e);
        e.printStackTrace(); 
      }
      
    } // end for
  
  } // end main

} // end PoliteDOMSpider
</code></pre><hr color="red" style="color: red" size="2"><h2>Comment Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a comment like this example from the XML 1.0 spec:

<pre><code>&lt;!--* N.B. some readers (notably JC) find the following
paragraph awkward and redundant.  I agree it's logically redundant:
it *says* it is summarizing the logical implications of
matching the grammar, and that means by definition it's
logically redundant.  I don't think it's rhetorically
redundant or unnecessary, though, so I'm keeping it.  It
could however use some recasting when the editors are feeling
stronger. -MSM *--&gt;
</code></pre>
</p></li>
<li><p>No children</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Comment Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Comment extends CharacterData {
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Comment Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;


public class DOMCommentReader {

  public static void main(String[] args) {
     
    DOMParser parser = new DOMParser();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document d = parser.getDocument();
        processNode(d);
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

  // note use of recursion
  public static void processNode(Node node) {
    
    int type = node.getNodeType();
    if (type == Node.COMMENT_NODE) {
      System.out.println(node.getNodeValue());
      System.out.println();
    }
    else {
      if (node.hasChildNodes()) {
        NodeList children = node.getChildNodes();
        for (int i = 0; i &lt; children.getLength(); i++) {
          processNode(children.item(i));
        } 
      }
    }
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>DOMCommentReader Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java DOMCommentReader hotcop.xml
 The publisher is actually Polygram but I needed
       an example of a general entity reference.

 You can tell what album I was
     listening to when I wrote this example
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Or try http://www.w3.org/TR/1998/REC-xml-19980210.xml 
for more interesting output</p><hr color="red" style="color: red" size="2"><h2>Entity Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Represents an actual entity, not an entity reference!</p></li>
<li><p>Contains: 
  <ul>
  <li><p>Element nodes</p></li>
  <li><p>ProcessingInstruction nodes</p></li>
  <li><p>Comment nodes</p></li>
  <li><p>Text nodes</p></li>
  <li><p>CDATASection nodes</p></li>
  <li><p>EntityReference nodes</p></li>
  </ul>
</p></li>
  
</ul><hr color="red" style="color: red" size="2"><h2>The Entity Interface</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface Entity extends Node {

  public String  getPublicId();
  public String  getSystemId();
  public String  getNotationName();
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>DOMException</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>A runtime exception but you should catch it</p></li>
<li><p>Error code gives more detailed information:
<dl>
<dt><code>DOMException.INDEX_SIZE_ERR</code></dt><dd> Index or size is negative, 
or greater than the allowed value</dd>

<dt><code>DOMException.DOMSTRING_SIZE_ERR</code></dt><dd>                                   
The specified range of text does not fit into a <code>String</code></dd>

                                  
<dt><code>DOMException.HIERARCHY_REQUEST_ERR</code></dt><dd> Attempt to insert
a   node
somewhere it doesn't belong</dd>

                                  
<dt><code>DOMException.WRONG_DOCUMENT_ERR</code></dt><dd> If a node is used in a 
different document than the one that created it (that doesn't support it)</dd>

                                  
<dt><code>DOMException.INVALID_CHARACTER_ERR</code></dt><dd> An invalid or illegal 
character is specified, such as in a name. </dd>

<dt><code>DOMException.NO_DATA_ALLOWED_ERR</code></dt><dd>                                   
Attempt to add data to a node which does not support data</dd>

<dt><code>DOMException.NO_MODIFICATION_ALLOWED_ERR</code></dt><dd>                                   
Attempt  to modify a read-only object</dd>

<dt><code>DOMException.NOT_FOUND_ERR</code></dt><dd>                                   
Attempt to reference a node in a context where it does not 
exist</dd>

<dt><code>DOMException.NOT_SUPPORTED_ERR</code></dt><dd>                                   
The implementation does not support the type of object requested</dd>

<dt><code>DOMException.INUSE_ATTRIBUTE_ERR</code></dt><dd>                                   
Attempt to add an attribute to an element that already
has that attribute</dd>

<dt><code>DOMException.INVALID_STATE_ERR</code></dt><dd>                                   
An attempt is made to use an object that is not, 
or no longer, usable.</dd>

<dt><code>DOMException.SYNTAX_ERR</code></dt><dd>                                   
An invalid or illegal string is specified.</dd>

<dt><code>DOMException.INVALID_MODIFICATION_ERR</code></dt><dd>                                   
An attempt to modify the type of the 
underlying object.</dd>

<dt><code>DOMException.NAMESPACE_ERR</code></dt><dd>                                   
An attempt is made to create or change an object 
in a way which is incorrect with regard to namespaces.</dd>

<dt><code>DOMException.INVALID_ACCESS_ERR</code></dt><dd>                                   
A parameter or an operation is not supported by 
the underlying object.</dd>

</dl>
</p></li>
<li><p>Current value accessible from the public <code>code</code> field</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question2.gif" width="224" height="207">
  </div><hr color="red" style="color: red" size="2"><h2>The org.w3c.dom.traversal Package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Four interfaces:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p><code>DocumentTraversal</code> </p></li>
<li><p><code>NodeFilter</code></p></li>
<li><p><code>NodeIterator</code></p></li>
<li><p><code>TreeWalker</code></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>NodeIterator</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom.traversal;

public interface NodeIterator {

  public int        getWhatToShow();
  public NodeFilter getFilter();
  public boolean    getExpandEntityReferences();
  public Node       nextNode() throws DOMException;
  public Node       previousNode() throws DOMException;
  public void       detach();
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>ValueReporter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.apache.xerces.dom.*;
import org.w3c.dom.*;
import org.w3c.dom.traversal.*;
import org.xml.sax.*;
import java.io.*;


public class ValueReporter {

  public static void main(String[] args) {
     
    DOMParser parser = new DOMParser();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document doc = parser.getDocument();
        DocumentImpl impl = (DocumentImpl) doc;
        NodeIterator iterator = impl.createNodeIterator(//filter
         doc.getDocumentElement(), NodeFilter.SHOW_ALL, null
        );
        Node node;
        while ((node = iterator.nextNode()) != null) {
          processNode(node);      
        }
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

  public static void processNode(Node node) {
    
    String name = node.getNodeName();
    String type = getTypeName(node.getNodeType());
    String value = node.getNodeValue();
    System.out.println("Type " + type + ": " + name 
     + " \"" + value + "\"");
    
  }
  
  public static String getTypeName(int type) {
    
    switch (type) {
      case Node.ELEMENT_NODE: 
        return "Element";
      case Node.ATTRIBUTE_NODE: 
        return "Attribute";
      case Node.TEXT_NODE: 
        return "Text";
      case Node.CDATA_SECTION_NODE: 
        return "CDATA Section";
      case Node.ENTITY_REFERENCE_NODE: 
        return "Entity Reference";
      case Node.ENTITY_NODE: 
        return "Entity";
      case Node.PROCESSING_INSTRUCTION_NODE: 
        return "Processing Instruction";
      case Node.COMMENT_NODE: 
        return "Comment";
      case Node.DOCUMENT_NODE: 
        return "Document";
      case Node.DOCUMENT_TYPE_NODE: 
        return "Document Type Declaration";
      case Node.DOCUMENT_FRAGMENT_NODE: 
        return "Document Fragment";
      case Node.NOTATION_NODE: 
        return "Notation";
      default: 
        return "Unknown Type"; 
    }
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>ValueReporter Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java ValueReporter hotcop.xml
Type Element: SONG "null"
Type Text: #text "
  "
Type Element: TITLE "null"
Type Text: #text "Hot Cop"
Type Text: #text "
  "
Type Element: PHOTO "null"
Type Text: #text "
  "
Type Element: COMPOSER "null"
Type Text: #text "Jacques Morali"
Type Text: #text "
  "
Type Element: COMPOSER "null"
Type Text: #text "Henri Belolo"
Type Text: #text "
  "
Type Element: COMPOSER "null"
Type Text: #text "Victor Willis"
Type Text: #text "
  "
Type Element: PRODUCER "null"
Type Text: #text "Jacques Morali"
Type Text: #text "
  "
Type Comment: #comment " The publisher is actually Polygram but I needed
       an example of a general entity reference. "
Type Text: #text "
  "
Type Element: PUBLISHER "null"
Type Text: #text "
    A &amp; M Records
  "
Type Text: #text "
  "
Type Element: LENGTH "null"
Type Text: #text "6:20"
Type Text: #text "
  "
Type Element: YEAR "null"
Type Text: #text "1978"
Type Text: #text "
  "
Type Element: ARTIST "null"
Type Text: #text "Village People"
Type Text: #text "
"
</tt></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Attributes are missing from this output.
They are not children. They are properties of nodes.
</p><hr color="red" style="color: red" size="2"><h2>NodeFilter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom.traversal;

public interface NodeFilter {

  // Constants returned by acceptNode
  public static final short FILTER_ACCEPT             = 1;
  public static final short FILTER_REJECT             = 2;
  public static final short FILTER_SKIP               = 3;

  // Constants for whatToShow
  public static final int   SHOW_ALL                  = 0x0000FFFF;
  public static final int   SHOW_ELEMENT              = 0x00000001;
  public static final int   SHOW_ATTRIBUTE            = 0x00000002;
  public static final int   SHOW_TEXT                 = 0x00000004;
  public static final int   SHOW_CDATA_SECTION        = 0x00000008;
  public static final int   SHOW_ENTITY_REFERENCE     = 0x00000010;
  public static final int   SHOW_ENTITY               = 0x00000020;
  public static final int   SHOW_PROCESSING_INSTRUCTION = 0x00000040;
  public static final int   SHOW_COMMENT              = 0x00000080;
  public static final int   SHOW_DOCUMENT             = 0x00000100;
  public static final int   SHOW_DOCUMENT_TYPE        = 0x00000200;
  public static final int   SHOW_DOCUMENT_FRAGMENT    = 0x00000400;
  public static final int   SHOW_NOTATION             = 0x00000800;

  public short        acceptNode(Node n);
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>DOM based TagStripper</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.apache.xerces.dom.*;
import org.w3c.dom.*;
import org.w3c.dom.traversal.*;
import org.xml.sax.SAXException;
import java.io.IOException;


public class DOMTagStripper {

  public static void main(String[] args) {
     
    DOMParser parser = new DOMParser();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document doc = parser.getDocument();
        DocumentImpl impl = (DocumentImpl) doc;
        NodeIterator iterator = impl.createNodeIterator(
         doc.getDocumentElement(), NodeFilter.SHOW_TEXT, null, true
        );
        Node node;
        while ((node = iterator.nextNode()) != null) {
          System.out.print(node.getNodeValue());      
        }
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

}</code></pre><hr color="red" style="color: red" size="2"><h2>Output from a DOM based TagStripper</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java DOMTagStripper hotcop.xml

  Hot Cop
  Jacques Morali
  Henri Belolo
  Victor Willis
  Jacques Morali

  A &amp; M Records
  6:20
  1978
  Village People
</tt></pre><hr color="red" style="color: red" size="2"><h2>TreeWalker</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom.traversal;

public interface TreeWalker {

  public int        getWhatToShow();
  public NodeFilter getFilter();
  public boolean    getExpandEntityReferences();
  
  public Node getCurrentNode();
  public void setCurrentNode(Node currentNode) throws DOMException;
   
  public Node parentNode();
  public Node firstChild();
  public Node lastChild();
  public Node previousSibling();
  public Node nextSibling();
  public Node previousNode();
  public Node nextNode();
  
}

</code></pre><hr color="red" style="color: red" size="2"><h2>Writing XML Documents with DOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>DOM is for both input and output</p></li>
<li><p>New documents are created with a parser-specific API or JAXP</p></li>
<li><p>A serializer + output format converts the DOM to a byte stream</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The DOMImplementation interface</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Creates new Document objects</p></li>
<li><p>Creates new DocType objects</p></li>
<li><p>Tests features supported by this implementation</p></li>
</ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.w3c.dom;

public interface DOMImplementation {

  public boolean hasFeature(String feature, String version) 
  
  public DocumentType createDocumentType(String qualifiedName, 
   String publicID, String systemID, String internalSubset)
                                          
  public Document createDocument(String namespaceURI, 
   String qualifiedName, DocumentType doctype)
   throws DOMException

} 
</code></pre><hr color="red" style="color: red" size="2"><h2>org.apache.xerces.dom.DOMImplementationImpl</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The Xerces-specific class that implements DOMImplementation</p></li>
</ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.apache.xerces.dom;

public class DOMImplementationImpl implements DOMImplementation {

  public boolean hasFeature(String feature, String version) 
  
  public static DOMImplementation getDOMImplementation()
  
  public DocumentType createDocumentType(String qualifiedName, 
   String publicID, String systemID, String internalSubset)
                                          
  public Document createDocument(String namespaceURI, 
   String qualifiedName, DocumentType doctype)
   throws DOMException

} 
</code></pre><hr color="red" style="color: red" size="2"><h2>A Xerces/DOM program that writes Fibonacci numbers into an XML document</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;
import org.w3c.dom.*;
import org.apache.xerces.dom.*;


public class FibonacciDOM {

  public static void main(String[] args) {

    try {

      DOMImplementation impl 
       = DOMImplementationImpl.getDOMImplementation();

      Document fibonacci 
       = impl.createDocument(null, "Fibonacci_Numbers", null);

      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;

      Element root = fibonacci.getDocumentElement();

      for (int i = 1; i &lt;= 25; i++) {
        Element number = fibonacci.createElement("fibonacci");
        number.setAttribute("index", Integer.toString(i));
        Text text = fibonacci.createTextNode(low.toString());
        number.appendChild(text);
        root.appendChild(number);

        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }

      // Now the document has been created and exists in memory
    }
    catch (DOMException e) {
      e.printStackTrace();
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>A JAXP/DOM program that writes Fibonacci numbers into an XML document</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;


public class FibonacciJAXP {

  public static void main(String[] args) {

    try {       
      DocumentBuilderFactory factory 
       = DocumentBuilderFactory.newInstance();
      DocumentBuilder builder = factory.newDocumentBuilder();
      DOMImplementation impl = builder.getDOMImplementation();

      Document fibonacci 
       = impl.createDocument(null, "Fibonacci_Numbers", null);

      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;

      Element root = fibonacci.getDocumentElement();

      for (int i = 1; i &lt;= 25; i++) {
        Element number = fibonacci.createElement("fibonacci");
        number.setAttribute("index", Integer.toString(i));
        Text text = fibonacci.createTextNode(low.toString());
        number.appendChild(text);
        root.appendChild(number);

        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }

      // Now the document has been created and exists in memory
    }
    catch (DOMException e) {
      e.printStackTrace();
    }
    catch (ParserConfigurationException e) {
      System.err.println("You need to install a JAXP aware DOM implementation.");
    }
    
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Serialization</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The process of taking an in-memory DOM tree and converting it
  to a stream of characters that can be written onto an output stream</p></li>
  <li><p>Not a standard part of  DOM Level 2</p></li>
  <li><p>The <code>org.apache.xml.serialize</code> package: 
  <code>
  <ul>
    <li><p>public interface DOMSerializer</p></li>
 <li><p>public interface Serializer</p></li>
<li><p> public abstract class BaseMarkupSerializer
extends Object
implements DocumentHandler, org.xml.sax.misc.LexicalHandler, DTDHandler,
org.xml.sax.misc.DeclHandler, DOMSerializer, Serializer </p></li>
<li><p> public class HTMLSerializer
extends BaseMarkupSerializer </p></li>
<li><p> public final class TextSerializer
extends BaseMarkupSerializer </p></li>
<li><p> public final class XHTMLSerializer
extends HTMLSerializer </p></li>
<li><p> public final class XMLSerializer
extends BaseMarkupSerializer</p></li>
  </ul></code>
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>A DOM program that writes Fibonacci numbers onto System.out</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;
import org.w3c.dom.*;
import org.apache.xerces.dom.*;
import org.apache.xml.serialize.*; 


public class FibonacciDOMSerializer {

  public static void main(String[] args) {
   
    try {
      
      DOMImplementation impl 
       = DOMImplementationImpl.getDOMImplementation();

      Document fibonacci 
       = impl.createDocument(null, "Fibonacci_Numbers", null);
      
      BigInteger low  = BigInteger.ONE;
      BigInteger high = BigInteger.ONE;      
      
      Element root = fibonacci.getDocumentElement(); 

      for (int i = 1; i &lt;= 25; i++) {
        Element number = fibonacci.createElement("fibonacci");
        number.setAttribute("index", Integer.toString(i));
        Text text = fibonacci.createTextNode(low.toString());
        number.appendChild(text);
        root.appendChild(number);
        
        BigInteger temp = high;
        high = high.add(low);
        low = temp;
      }
      
      try {
        // Now that the document is created we need to *serialize* it
        OutputFormat format = new OutputFormat(fibonacci);
        XMLSerializer serializer 
         = new XMLSerializer(System.out, format);
        serializer.serialize(fibonacci);
      }
      catch (IOException e) {
        System.err.println(e); 
      }
    }
    catch (DOMException e) {
      e.printStackTrace();
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>fibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Fibonacci_Numbers&gt;&lt;fibonacci index="0"&gt;0&lt;/fibonacci&gt;&lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;&lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;&lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;&lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;&lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;&lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;&lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;&lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;&lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;&lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;&lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;&lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;&lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;&lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;&lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;&lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;&lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;&lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;&lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;&lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;&lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;&lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;&lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;&lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;&lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;&lt;/Fibonacci_Numbers&gt;</code></pre><hr color="red" style="color: red" size="2"><h2>OutputFormat</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.apache.xml.serialize;

public class OutputFormat extends Object {

  public OutputFormat()
  public OutputFormat(String method, 
   String encoding, boolean indenting)
  public OutputFormat(Document doc)
  public OutputFormat(Document doc, 
   String encoding, boolean indenting)
  
  public String   getMethod()
  public void     setMethod(String method)
  public String   getVersion()
  public void     setVersion(String version)
  public int      getIndent()
  public boolean  getIndenting()
  public void     setIndent(int indent)
  public void     setIndenting(boolean on)
  public String   getEncoding()
  public void     setEncoding(String encoding)
  public String   getMediaType()
  public void     setMediaType(String mediaType)
  public void     setDoctype(String publicID, String systemID)
  public String   getDoctypePublic()
  public String   getDoctypeSystem()
  public boolean  getOmitXMLDeclaration()
  public void     setOmitXMLDeclaration(boolean omit)
  public boolean  getStandalone()
  public void     setStandalone(boolean standalone)
  public String[] getCDataElements()
  public boolean  isCDataElement(String tagName)
  public void     setCDataElements(String[] cdataElements)
  public String[] getNonEscapingElements()
  public boolean  isNonEscapingElement(String tagName)
  public void     setNonEscapingElements(String[] nonEscapingElements)
  public String   getLineSeparator()
  public void     setLineSeparator(String lineSeparator)
  public boolean  getPreserveSpace()
  public void     setPreserveSpace(boolean preserve)
  public int      getLineWidth()
  public void     setLineWidth(int lineWidth)
  public char     getLastPrintable()
  
  public static String whichMethod(Document doc)
  public static String whichDoctypePublic(Document doc)
  public static String whichDoctypeSystem(Document doc)
  public static String whichMediaType(String method)
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Better formatted output</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Latin-1 encoding</p></li>
    <li><p>Indentation</p></li>
    <li><p>Word wrapping</p></li>
    <li><p>Document type declaration</p></li>
  </ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code> try {
  // Now that the document is created we need to *serialize* it
  OutputFormat format = new OutputFormat(fibonacci, "8859_1", true);
  format.setLineSeparator("\r\n");
  format.setLineWidth(72);
  format.setDoctype(null, "fibonacci.dtd");
  XMLSerializer serializer = new XMLSerializer(System.out, format);
  serializer.serialize(root);
}
catch (IOException e) {
  System.err.println(e); 
}
</code></pre><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Question: Why won't this let us add an <code>xml-stylesheet</code> directive? </p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>formatted_fibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="8859_1"?&gt;
&lt;!DOCTYPE Fibonacci_Numbers SYSTEM "fibonacci.dtd"&gt;
&lt;Fibonacci_Numbers&gt;
    &lt;fibonacci index="0"&gt;0&lt;/fibonacci&gt;
    &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
    &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
    &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
    &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
    &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
    &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
    &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
    &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
    &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
    &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
    &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
    &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
    &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
    &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
    &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
    &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
    &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
    &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
    &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
    &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
    &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
    &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
    &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
    &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
    &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>DOM based XMLPrettyPrinter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.apache.xerces.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;
import java.io.*;
import org.apache.xerces.dom.*;
import org.apache.xml.serialize.*; 


public class DOMPrettyPrinter {

  public static void main(String[] args) { 
     
    DOMParser parser = new DOMParser();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        parser.parse(args[i]); 
       
        Document document = parser.getDocument();
        
        OutputFormat format 
         = new OutputFormat(document, "UTF-8", true);
        format.setLineSeparator("\r\n");
        format.setIndenting(true);
        format.setIndent(2);
        format.setLineWidth(72);
        format.setPreserveSpace(false);
        XMLSerializer serializer 
         = new XMLSerializer(System.out, format);
        serializer.serialize(document);     
      }
      catch (SAXException e) {
        System.err.println(e); 
      }
      catch (IOException e) {
        System.err.println(e); 
      }
      
    }
  
  } // end main

}</code></pre><hr color="red" style="color: red" size="2"><h2>Output from a DOM based XMLPrettyPrinter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- &lt;!DOCTYPE foo SYSTEM "http://msdn.microsoft.com/xml/general/htmlentities.dtd"&gt; --&gt;
&lt;weblogs&gt;
  &lt;log&gt;
    &lt;name&gt;MozillaZine&lt;/name&gt;
    &lt;url&gt;http://www.mozillazine.org&lt;/url&gt;
    &lt;changesUrl&gt;http://www.mozillazine.org/contents.rdf&lt;/changesUrl&gt;
    &lt;ownerName&gt;Jason Kersey&lt;/ownerName&gt;
    &lt;ownerEmail&gt;kerz@en.com&lt;/ownerEmail&gt;
    &lt;description&gt;THE source for news on the Mozilla Organization.
      DevChats, Reviews, Chats, Builds, Demos, Screenshots, and more.&lt;/description&gt;
    &lt;imageUrl/&gt;
    &lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/kerz@en.com.gif&lt;/adImageUrl&gt;
  &lt;/log&gt;
  &lt;log&gt;
    &lt;name&gt;SalonHerringWiredFool&lt;/name&gt;
    &lt;url&gt;http://www.salonherringwiredfool.com/&lt;/url&gt;
    &lt;ownerName&gt;Some Random Herring&lt;/ownerName&gt;
    &lt;ownerEmail&gt;salonfool@wiredherring.com&lt;/ownerEmail&gt;
    &lt;description/&gt;
  &lt;/log&gt;
  &lt;log&gt;
    &lt;name&gt;Scripting News&lt;/name&gt;
    &lt;url&gt;http://www.scripting.com/&lt;/url&gt;
    &lt;ownerName&gt;Dave Winer&lt;/ownerName&gt;
    &lt;ownerEmail&gt;dave@userland.com&lt;/ownerEmail&gt;
    &lt;description&gt;News and commentary from the cross-platform scripting community.&lt;/description&gt;
    &lt;imageUrl&gt;http://www.scripting.com/gifs/tinyScriptingNews.gif&lt;/imageUrl&gt;
    &lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/dave@userland.com.gif&lt;/adImageUrl&gt;
  &lt;/log&gt;
  &lt;log&gt;
    &lt;name&gt;SlashDot.Org&lt;/name&gt;
    &lt;url&gt;http://www.slashdot.org/&lt;/url&gt;
    &lt;ownerName&gt;Simply a friend&lt;/ownerName&gt;
    &lt;ownerEmail&gt;afriendofweblogs@weblogs.com&lt;/ownerEmail&gt;
    &lt;description&gt;News for Nerds, Stuff that Matters.&lt;/description&gt;
  &lt;/log&gt;
&lt;/weblogs&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>The point is this:</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Using the DOM to write documents automatically maintains
  well-formedness constraints </p></li>
  <li><p>Validity is not automatically maintained.
   </p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question4.gif" width="121" height="148">
  </div><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>This presentation: 
  <a href="http://www.cafeconleche.org/slides/oop2003/xmlandjava/">http://www.cafeconleche.org/slides/oop2003/xmlandjava</a></p></li>
  <li><p>
      <cite><a href="http://www.cafeconleche.org/books/xmljava/">Processing XML with Java</a></cite>
       <img src="images/xmljavasmallcover.jpg" width="168" height="211" align="right" hspace="20"> 

     <ul> 
     <li><p>Elliotte Rusty Harold</p></li>
     <li><p>Addison Wesley, 2002</p></li>
     <li><p>Chapters 9-13:
     <ul>
   <li><p>Chapter 9, The Document Object Model: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch09.html">http://www.cafeconleche.org/books/xmljava/chapters/ch09.html</a></p></li>
              <li><p>Chapter 10, Creating New XML Documents with DOM: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch10.html">http://www.cafeconleche.org/books/xmljava/chapters/ch10.html</a></p></li>
  <li><p>Chapter 11,  The Document Object Model Core: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch11.html">http://www.cafeconleche.org/books/xmljava/chapters/ch11.html</a></p></li>
   <li><p>Chapter 12,  The DOM Traversal Module: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch12.html">http://www.cafeconleche.org/books/xmljava/chapters/ch12.html</a></p></li>
              <li><p>Chapter 13, 
 Output from DOM: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch13.html">http://www.cafeconleche.org/books/xmljava/chapters/ch13.html</a></p></li></ul>
</p></li>
  </ul>
     
   <br clear="all">
   </p></li>  

  <li><p><img src="images/xian2medium.jpg" align="right" hspace="5" width="127" height="190">
 <cite>XML in a Nutshell, 2nd Edition</cite>
 <ul>
    <li><p>Elliotte Rusty Harold and W. Scott Means</p></li>
    <li><p>O'Reilly &amp; Associates, 2002</p></li>
    <li><p>ISBN 0-596-00292-0</p></li>
</ul>
 <br clear="all"></p></li>
     <li><p>DOM Level 2 Core Specification: 
  <a href="http://www.w3.org/TR/DOM-Level-2-Core/">http://www.w3.org/TR/DOM-Level-2-Core/</a></p></li>
  <li><p>DOM Level 2 Traversal and Range Specification: 
  <a href="http://www.w3.org/TR/DOM-Level-2-Traversal-Range/">http://www.w3.org/TR/DOM-Level-2-Traversal-Range/</a></p></li>

  </ul><br xmlns:xinclude="http://www.w3.org/2001/XInclude" clear="all"><hr color="red" style="color: red" size="2"><h2>Part V: JDOM</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
<blockquote>
There is no compelling reason for a Java API to manipulate XML to be complex, tricky,
                          unintuitive, or a pain in the neck. 
</blockquote>
        
--<a href="http://www.jdom.org/mission/index.html">JDOM Mission Statement</a>
</p><hr color="red" style="color: red" size="2"><h2>Where we're going</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Writing XML with JDOM</p></li>
    <li><p>Reading XML through JDOM</p></li>
    <li><p>The JDOM Classes</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>What is JDOM?</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>A Pure Java API for reading and writing XML Documents</p></li>
  <li><p>A Java-oriented API for reading and writing XML Documents</p></li>
  <li><p>A tree-oriented API for reading and writing XML Documents</p></li>
  <li><p>A parser independent API for reading and writing XML Documents</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>About JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Created by Brett McLaughlin and Jason Hunter.
  (James Duncan Davidson is an unindicted coconspirator.)</p></li>
  <li><p>Alex Chafee, Alex Rosen, Bradley S. Huffman,
      Jools Enticknap, and Philip Nelson are also
  major contributors.</p></li>
  <li><p>Open source with an Apache-like license</p></li>
  <li><p><a href="http://www.jdom.org/">http://www.jdom.org/</a></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOM versions</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>1.0 Beta 8 is current tarball from March 2002</p></li>
  <li><p>Last year has fixed some implementation details, and made a couple
  of major changes to the API</p></li>
  <li><p>This presentation is based on the current CVS version</p></li>
  <li><p><a href="http://cvs.jdom.org/">cvs.jdom.org</a></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Six packages:</h2><dl xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <dt><code>org.jdom</code></dt><dd> the classes that 
  represent an XML document and its parts

  </dd>
  <dt><code>org.jdom.input</code></dt><dd> classes for reading a document into memory</dd>
  <dt><code>org.jdom.output</code></dt><dd> classes for writing a document
  onto a stream or other target (e.g. SAX or DOM app)</dd>
  <dt><code>org.jdom.adapters</code></dt><dd> classes for hooking up to DOM implementations</dd>
  <dt><code>org.jdom.filter</code></dt><dd> classes to mask parts of tree while navigating</dd>
  <dt><code>org.jdom.transform</code></dt><dd> XSLT support via TrAX</dd>
  <dt><code>org.jdom.xpath</code></dt><dd> XPath courtesy of Jaxen</dd>
</dl><hr color="red" style="color: red" size="2"><h2>The org.jdom package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">The classes that represent an XML document and its parts</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p><code>Attribute</code></p></li>  
 <li><p><code>Comment</code></p></li>  
 <li><p><code>DocType</code></p></li>  
 <li><p><code>Document</code></p></li>  
 <li><p><code>Element</code></p></li>  
 <li><p><code>Text</code> </p></li>  
 <li><p><code>CDATA</code> (may be going away)</p></li>  
 <li><p><code>EntityRef</code></p></li> 
 <li><p><code>ProcessingInstruction</code></p></li>
 <li><p>plus <code>Verifier</code></p></li>
 <li><p>plus assorted exceptions</p></li>
    </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.input package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Classes for reading a document into memory from a file or other
  source</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude"> 
 <li><p><code>DOMBuilder</code></p></li>  
 <li><p><code>SAXBuilder</code></p></li>  
 <li><p><code>BuilderErrorHandler</code></p></li>
<li><p><code>DefaultJDOMFactory</code></p></li>
<li><p><code>SAXHandler</code></p></li>

    </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.output package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">The classes for writing a document to a file or other target</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p><code>XMLOutputter</code></p></li>  
 <li><p><code>SAXOutputter</code></p></li>  
 <li><p><code>DOMOutputter</code></p></li>  
    </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.filter package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Classes and interfaces for masking out parts of a JDOM tree
     before navigating it:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude"> 
 <li><p><code>Filter</code></p></li>  
 <li><p><code>ContentFilter</code></p></li>  
 <li><p><code>ElementFilter</code></p></li>
    </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.adapters package</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude"><li><p>Classes for hooking up JDOM to DOM implementations:
    <ul>
 <li><p><code>AbstractDOMAdapter</code></p></li>  
 <li><p><code>OracleV1DOMAdapter</code></p></li>  
 <li><p><code>OracleV2DOMAdapter</code></p></li>  
 <li><p><code>ProjectXDOMAdapter</code></p></li>  
 <li><p><code>XercesDOMAdapter</code></p></li>  
 <li><p><code>JAXPDOMAdapter</code></p></li>  
 <li><p><code>CrimsonDOMAdapter</code></p></li>  
 <li><p><code>XML4JDOMAdapter</code></p></li>
    </ul>
  </p></li>
  <li><p>You rarely need to access these directly.</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.transform package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Classes for XSLT support:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p><code>JDOMResult</code></p></li>  
 <li><p><code>JDOMSource</code></p></li>  

    </ul><hr color="red" style="color: red" size="2"><h2>The org.jdom.xpath package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Classes for XPath support:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p><code>XPath</code></p></li>  

    </ul><hr color="red" style="color: red" size="2"><h2>Writing XML Documents with JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>JDOM is for both input and output</p></li>
<li><p>New documents can be read from a stream or constructed in memory</p></li>
<li><p>An <code>org.jdom.output.XMLOutputter</code> sends 
a document from memory to an
<code>OutputStream</code> or <code>Writer</code></p></li>
<li><p> A JDOM document can also be sent to a
SAX <code>ContentHandler</code> or DOM <code>org.w3c.dom.Document</code>
for further processing with a different API
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>A JDOM program that writes this XML document</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;GREETING&gt;
  Hello JDOM!
&lt;/GREETING&gt;</code></pre><hr color="red" style="color: red" size="2"><h2>Hello JDOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.output.XMLOutputter;
import java.io.IOException;


public class HelloJDOM {

  public static void main(String[] args) {
   
    Element root = new Element("GREETING");
    	
    root.setText("Hello JDOM!");
         
    Document doc = new Document(root);      
    
    // At this point the document only exists in memory.
    // We still need to serialize it
    XMLOutputter outputter = new XMLOutputter();
    try {
      outputter.output(doc, System.out);       
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Actual Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;GREETING&gt;Hello JDOM!&lt;/GREETING&gt;
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">This is more or less what we wanted, modulo white space.</p><hr color="red" style="color: red" size="2"><h2>Hello DOM</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Here's the same program using DOM instead of JDOM.
  Which is simpler?</p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.apache.xerces.dom.*;
import org.apache.xml.serialize.*;


public class HelloDOM {

  public static void main(String[] args) {

    try {

      DocumentBuilderFactory factory
       = DocumentBuilderFactory.newInstance();
      DocumentBuilder builder = factory.newDocumentBuilder();
      DOMImplementation impl = builder.getDOMImplementation();

      Document hello = impl.createDocument(null, "GREETING", null);
      //                                   ^^^^              ^^^^
      //                               Namespace URI       DocType

      Element root = hello.getDocumentElement();

      // We can't use a raw string. Instead we must first create
      // a text node.
      Text text = hello.createTextNode("Hello DOM!");
      root.appendChild(text);

      // Now that the document is created we need to *serialize* it
      try {
        OutputFormat format = new OutputFormat(hello);
        XMLSerializer serializer 
         = new XMLSerializer(System.out, format);
        serializer.serialize(root);
      }
      catch (IOException e) {
        System.err.println(e);
      }
    }
    catch (DOMException e) {
      e.printStackTrace();
    }
    catch (ParserConfigurationException e) {
      System.out.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>White space is significant</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>White space is significant in XML and therefore in JDOM.
    <pre><code>import org.jdom.*;
import org.jdom.output.XMLOutputter;
import java.io.IOException;


public class PrettyHelloJDOM {

  public static void main(String[] args) {
   
    Element root = new Element("GREETING");
    	
    root.setText("\n  Hello JDOM!\n");
         
    Document doc = new Document(root);      
    
    // At this point the document only exists in memory.
    // We still need to serialize it
    XMLOutputter outputter = new XMLOutputter();
    try {
      outputter.output(doc, System.out);       
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre></p></li>

     <li><p>If white space is not significant in your
    application, you can instruct the outputter to clean it up for you.</p></li>
 
    </ul><hr color="red" style="color: red" size="2"><h2>Actual Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;GREETING&gt;
  Hello JDOM!
&lt;/GREETING&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>fibonacci.xml</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Suppose we want data in an XML document that looks something like this:</p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>A JDOM program that writes Fibonacci numbers into an XML file</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.output.XMLOutputter;
import java.math.BigInteger;
import java.io.*;


public class FibonacciJDOM {

  public static void main(String[] args) {

    Element root = new Element("Fibonacci_Numbers");

    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;

    for (int i = 1; i &lt;= 25; i++) {
      Element fibonacci = new Element("fibonacci");
      Attribute index = new Attribute("index", String.valueOf(i));
      fibonacci.setAttribute(index);
      fibonacci.setText(low.toString());
      root.addContent(fibonacci);

      BigInteger temp = high;
      high = high.add(low);
      low = temp;
    }

    Document doc = new Document(root);
    // serialize it into a file
    try {
      FileOutputStream out 
       = new FileOutputStream("fibonacci_jdom.xml");
      XMLOutputter serializer = new XMLOutputter();
      serializer.output(doc, out);
      out.flush();
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Output</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Again, modulo white space this is correct</p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Fibonacci_Numbers&gt;&lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;&lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;&lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;&lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;&lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;&lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;&lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;&lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;&lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;&lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;&lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;&lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;&lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;&lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;&lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;&lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;&lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;&lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;&lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;&lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;&lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;&lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;&lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;&lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;&lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;&lt;/Fibonacci_Numbers&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>Controlling white space on output</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
   Pass an indent string and whether or not to add newlines to the
   <code>XMLSerializer</code> constructor.
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.output.XMLOutputter;
import java.math.BigInteger;
import java.io.*;


public class PrettyFibonacciJDOM {

  public static void main(String[] args) {

    Element root = new Element("Fibonacci_Numbers");

    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;

    for (int i = 1; i &lt;= 25; i++) {
      Element fibonacci = new Element("fibonacci");
      Attribute index = new Attribute("index", String.valueOf(i));
      fibonacci.setAttribute(index);
      fibonacci.setText(low.toString());
      root.addContent(fibonacci);

      BigInteger temp = high;
      high = high.add(low);
      low = temp;
    }

    Document doc = new Document(root);
    // serialize it into a file
    try {
      FileOutputStream out 
       = new FileOutputStream("pretty_fibonacci_jdom.xml");
      XMLOutputter serializer = new XMLOutputter("  ", true);
      serializer.output(doc, out);
      out.flush();
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Output</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Again, modulo white space this is correct</p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;

</code></pre><hr color="red" style="color: red" size="2"><h2>Suppose you want to include a DTD</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Suppose we have this DTD at the relative URL fibonacci.dtd:

  <pre><code>&lt;!ELEMENT Fibonacci_Numbers (fibonacci*)&gt;
&lt;!ELEMENT fibonacci (#PCDATA)&gt;
&lt;!ATTLIST fibonacci index CDATA #IMPLIED&gt;</code></pre>
</p></li>
<li><p>We need this <code>DOCTYPE</code> declaration:</p></li>

<pre><code>&lt;!DOCTYPE Fibonacci_Numbers SYSTEM "fibonacci.dtd"&gt;</code></pre>

</ul><hr color="red" style="color: red" size="2"><h2>ValidFibonacci</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Use the <code>DocType</code> class to insert a document type declaration</p></li>
</ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;
import org.jdom.*;
import org.jdom.output.XMLOutputter;


public class ValidFibonacci {

  public static void main(String[] args) {
   
    Element root = new Element("Fibonacci_Numbers");	
  	      
    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;      
    
    for (int i = 1; i &lt;= 25; i++) {
      Element fibonacci = new Element("fibonacci");
      Attribute index = new Attribute("index", String.valueOf(i));
      fibonacci.setAttribute(index);
      fibonacci.setText(low.toString());
      BigInteger temp = high;
      high = high.add(low);
      low = temp;
      root.addContent(fibonacci);
    }
 
    DocType type = new DocType("Fibonacci_Numbers", "fibonacci.dtd");
 
    Document doc = new Document(root, type);
    // serialize it into a file
    try {
      FileOutputStream out = new FileOutputStream("validfibonacci.xml");
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, out);
      out.flush();	
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>validfibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE Fibonacci_Numbers SYSTEM "fibonacci.dtd"&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;

</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/validfibonacci.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Internal DTD Subsets</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Supported as strings only</p></li>
</ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.math.BigInteger;
import java.io.*;
import org.jdom.*;
import org.jdom.output.XMLOutputter;


public class InternalValidFibonacci {

  public static void main(String[] args) {
   
    Element root = new Element("Fibonacci_Numbers");	
  	      
    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;      
    
    for (int i = 1; i &lt;= 25; i++) {
      Element fibonacci = new Element("fibonacci");
      Attribute index = new Attribute("index", String.valueOf(i));
      fibonacci.setAttribute(index);
      fibonacci.setText(low.toString());
      BigInteger temp = high;
      high = high.add(low);
      low = temp;
      root.addContent(fibonacci);
    }
 
    String dtd = "&lt;!ELEMENT Fibonacci_Numbers (fibonacci*)&gt;\r\n";
    dtd += "&lt;!ELEMENT fibonacci (#PCDATA)&gt;\r\n";
    dtd += "&lt;!ATTLIST fibonacci index CDATA #IMPLIED&gt;\r\n";

    DocType type = new DocType("Fibonacci_Numbers");
    type.setInternalSubset(dtd);
 
    Document doc = new Document(root, type);
    // serialize it into a file
    try {
      FileOutputStream out = new FileOutputStream("internalvalidfibonacci.xml");
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, out);
      out.flush();	
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/internalvalidfibonacci.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>internalvalidfibonacci.xml</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE Fibonacci_Numbers [
&lt;!ELEMENT Fibonacci_Numbers (fibonacci*)&gt;
&lt;!ELEMENT fibonacci (#PCDATA)&gt;
&lt;!ATTLIST fibonacci index CDATA #IMPLIED&gt;
]&gt;
&lt;Fibonacci_Numbers&gt;
  &lt;fibonacci index="1"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="2"&gt;1&lt;/fibonacci&gt;
  &lt;fibonacci index="3"&gt;2&lt;/fibonacci&gt;
  &lt;fibonacci index="4"&gt;3&lt;/fibonacci&gt;
  &lt;fibonacci index="5"&gt;5&lt;/fibonacci&gt;
  &lt;fibonacci index="6"&gt;8&lt;/fibonacci&gt;
  &lt;fibonacci index="7"&gt;13&lt;/fibonacci&gt;
  &lt;fibonacci index="8"&gt;21&lt;/fibonacci&gt;
  &lt;fibonacci index="9"&gt;34&lt;/fibonacci&gt;
  &lt;fibonacci index="10"&gt;55&lt;/fibonacci&gt;
  &lt;fibonacci index="11"&gt;89&lt;/fibonacci&gt;
  &lt;fibonacci index="12"&gt;144&lt;/fibonacci&gt;
  &lt;fibonacci index="13"&gt;233&lt;/fibonacci&gt;
  &lt;fibonacci index="14"&gt;377&lt;/fibonacci&gt;
  &lt;fibonacci index="15"&gt;610&lt;/fibonacci&gt;
  &lt;fibonacci index="16"&gt;987&lt;/fibonacci&gt;
  &lt;fibonacci index="17"&gt;1597&lt;/fibonacci&gt;
  &lt;fibonacci index="18"&gt;2584&lt;/fibonacci&gt;
  &lt;fibonacci index="19"&gt;4181&lt;/fibonacci&gt;
  &lt;fibonacci index="20"&gt;6765&lt;/fibonacci&gt;
  &lt;fibonacci index="21"&gt;10946&lt;/fibonacci&gt;
  &lt;fibonacci index="22"&gt;17711&lt;/fibonacci&gt;
  &lt;fibonacci index="23"&gt;28657&lt;/fibonacci&gt;
  &lt;fibonacci index="24"&gt;46368&lt;/fibonacci&gt;
  &lt;fibonacci index="25"&gt;75025&lt;/fibonacci&gt;
&lt;/Fibonacci_Numbers&gt;

</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/internalvalidfibonacci.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Using Namespaces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Suppose we want some MathML like this:

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;mathml:math xmlns:mathml="http://www.w3.org/1998/Math/MathML"&gt;
  &lt;mathml:mrow&gt;
    &lt;mathml:mi&gt;f(1)&lt;/mathml:mi&gt;
    &lt;mathml:mo&gt;=&lt;/mathml:mo&gt;
    &lt;mathml:mn&gt;1&lt;/mathml:mn&gt;
  &lt;/mathml:mrow&gt;
  &lt;mathml:mrow&gt;
    &lt;mathml:mi&gt;f(2)&lt;/mathml:mi&gt;
    &lt;mathml:mo&gt;=&lt;/mathml:mo&gt;
    &lt;mathml:mn&gt;1&lt;/mathml:mn&gt;
  &lt;/mathml:mrow&gt;
  &lt;mathml:mrow&gt;
    &lt;mathml:mi&gt;f(3)&lt;/mathml:mi&gt;
    &lt;mathml:mo&gt;=&lt;/mathml:mo&gt;
    &lt;mathml:mn&gt;2&lt;/mathml:mn&gt;
  &lt;/mathml:mrow&gt;
&lt;/mathml:math&gt;</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Rules for Using Namespaces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Do not use the qualified names like <code>mathml:mn</code>.</p></li>
<li><p>Instead use the prefixes <code>mathml</code>, local names like <code>mn</code>,
and URIs like <code>http://www.w3.org/1998/Math/MathML</code>
to create the elements.</p></li>
<li><p>Do not include <code>xmlns:<i>prefix</i></code> attributes 
like <code>xmlns:mathml="http://www.w3.org/1998/Math/MathML"</code>.</p></li>
<li><p><code>XMLOutputter</code> will
decide where to put the <code>xmlns</code> attributes 
when the document is serialized. </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>With Namespace Prefixes</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.Element;
import org.jdom.Document;
import org.jdom.output.XMLOutputter;
import java.math.BigInteger;
import java.io.*;


public class PrefixedFibonacci {

  public static void main(String[] args) {

    Element root = new Element("math", "mathml",
     "http://www.w3.org/1998/Math/MathML");

    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;

    for (int i = 1; i &lt;= 25; i++) {

      Element mrow = new Element("mrow", "mathml",
       "http://www.w3.org/1998/Math/MathML");

      Element mi = new Element("mi", "mathml",
       "http://www.w3.org/1998/Math/MathML");
      mi.setText("f(" + i + ")");
      mrow.addContent(mi);

      Element mo = new Element("mo", "mathml",
       "http://www.w3.org/1998/Math/MathML");
      mo.setText("=");
      mrow.addContent(mo);

      Element mn = new Element("mn", "mathml",
       "http://www.w3.org/1998/Math/MathML");
      mn.setText(low.toString());
      mrow.addContent(mn);

      BigInteger temp = high;
      high = high.add(low);
      low = temp;
      root.addContent(mrow);

    }

    Document doc = new Document(root);
    // serialize it into a file
    try {
      FileOutputStream out 
       = new FileOutputStream("prefixed_fibonacci.xml");
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, out);
      out.flush();
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/prefixed_fibonacci.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>The Default, Unprefixed Namespace</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Suppose you want some MathML like this:</p></li>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
  &lt;mrow&gt;
    &lt;mi&gt;f(1)&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mn&gt;1&lt;/mn&gt;
  &lt;/mrow&gt;
  &lt;mrow&gt;
    &lt;mi&gt;f(2)&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mn&gt;1&lt;/mn&gt;
  &lt;/mrow&gt;
  &lt;mrow&gt;
    &lt;mi&gt;f(3)&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mn&gt;2&lt;/mn&gt;
  &lt;/mrow&gt;
&lt;/math&gt;
</code></pre>
</ul><hr color="red" style="color: red" size="2"><h2>Rules for Using Default Namespace</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Do not use the local names like <code>mn</code>.</p></li>
<li><p>Instead use the local names like <code>mn</code>,
<em>and</em> URIs like <code>http://www.w3.org/1998/Math/MathML</code>
to create the elements.</p></li>
<li><p>Do not include <code>xmlns</code> attributes 
like <code>xmlns="http://www.w3.org/1998/Math/MathML"</code>.</p></li>
<li><p><code>XMLOutputter</code> will
decide where to put the <code>xmlns</code> attribute 
when the document is serialized. </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>With Default Namespace</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.Element;
import org.jdom.Document;
import org.jdom.output.XMLOutputter;
import java.math.BigInteger;
import java.io.*;


public class UnprefixedFibonacci {

  public static void main(String[] args) {
   
    Element root = new Element("math", 
     "http://www.w3.org/1998/Math/MathML");	
  	      
    BigInteger low  = BigInteger.ONE;
    BigInteger high = BigInteger.ONE;      
    
    for (int i = 1; i &lt;= 25; i++) {
        
      Element mrow = new Element("mrow", 
       "http://www.w3.org/1998/Math/MathML");
      
      Element mi = new Element("mi", 
       "http://www.w3.org/1998/Math/MathML");
      mi.setText("f(" + i + ")"); 
      mrow.addContent(mi);
      
      Element mo = new Element("mo", 
       "http://www.w3.org/1998/Math/MathML");
      mo.setText("="); 
      mrow.addContent(mo);
      
      Element mn = new Element("mn", 
       "http://www.w3.org/1998/Math/MathML");
      mn.setText(low.toString());
      mrow.addContent(mn);

      BigInteger temp = high;
      high = high.add(low);
      low = temp;
      root.addContent(mrow);
      
    }
 
    Document doc = new Document(root);
    // serialize it into a file
    try {
      FileOutputStream out 
       = new FileOutputStream("unprefixed_fibonacci.xml");
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, out);
      out.flush();	
      out.close();
    }
    catch (IOException e) {
      System.err.println(e);
    }

  }

}
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/unprefixed_fibonacci.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Converting data to XML</h2><hr color="red" style="color: red" size="2"><h2>Sample Tab Delimited Data: Baseball Statistics</h2><code xmlns:xinclude="http://www.w3.org/2001/XInclude">
<table>
<tr><th>Surname</th><th>FirstName</th><th>Team</th><th>Position</th><th>Games Played</th><th>Games Started</th><th>AtBats</th><th>Runs</th><th>Hits</th><th>Doubles</th><th>Triples</th><th>Home runs</th><th>RBI</th><th>Stolen Bases</th><th>Caught Stealing</th><th>Sacrifice Hits</th><th>Sacrifice Flies</th><th>Errors</th><th>PB</th><th>Walks</th><th>Strike outs</th><th>Hit by pitch</th><th></th></tr>
<tr><td>Anderson</td><td>Garret </td><td>ANA</td><td>Outfield</td><td>156</td><td>151</td><td>622</td><td>62</td><td>183</td><td>41</td><td>7</td><td>15</td><td>79</td><td>8</td><td>3</td><td>3</td><td>3</td><td>6</td><td>0</td><td>29</td><td>80</td><td>1</td><td></td></tr>
<tr><td>Baughman</td><td>Justin </td><td>ANA</td><td>Second Base</td><td>62</td><td>54</td><td>196</td><td>24</td><td>50</td><td>9</td><td>1</td><td>1</td><td>20</td><td>10</td><td>4</td><td>5</td><td>3</td><td>8</td><td>0</td><td>6</td><td>36</td><td>1</td><td></td></tr>
<tr><td>Bolick</td><td>Frank </td><td>ANA</td><td>Third Base</td><td>21</td><td>11</td><td>45</td><td>3</td><td>7</td><td>2</td><td>0</td><td>1</td><td>2</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>11</td><td>8</td><td>0</td><td></td></tr>
<tr><td>Disarcina</td><td>Gary </td><td>ANA</td><td>Shortstop</td><td>157</td><td>155</td><td>551</td><td>73</td><td>158</td><td>39</td><td>3</td><td>3</td><td>56</td><td>12</td><td>7</td><td>12</td><td>3</td><td>14</td><td>0</td><td>21</td><td>51</td><td>8</td><td></td></tr>
<tr><td>Edmonds</td><td>Jim </td><td>ANA</td><td>Outfield</td><td>154</td><td>150</td><td>599</td><td>115</td><td>184</td><td>42</td><td>1</td><td>25</td><td>91</td><td>7</td><td>5</td><td>1</td><td>1</td><td>5</td><td>0</td><td>57</td><td>114</td><td>1</td><td></td></tr>
<tr><td>Erstad</td><td>Darin </td><td>ANA</td><td>Outfield</td><td>133</td><td>129</td><td>537</td><td>84</td><td>159</td><td>39</td><td>3</td><td>19</td><td>82</td><td>20</td><td>6</td><td>1</td><td>3</td><td>3</td><td>0</td><td>43</td><td>77</td><td>6</td><td></td></tr>
<tr><td>Garcia</td><td>Carlos </td><td>ANA</td><td>Second Base</td><td>19</td><td>10</td><td>35</td><td>4</td><td>5</td><td>1</td><td>0</td><td>0</td><td>0</td><td>2</td><td>0</td><td>1</td><td>0</td><td>1</td><td>0</td><td>3</td><td>11</td><td>1</td><td></td></tr>
<tr><td>Glaus</td><td>Troy </td><td>ANA</td><td>Third Base</td><td>48</td><td>45</td><td>165</td><td>19</td><td>36</td><td>9</td><td>0</td><td>1</td><td>23</td><td>1</td><td>0</td><td>0</td><td>2</td><td>7</td><td>0</td><td>15</td><td>51</td><td>0</td><td></td></tr>
<tr><td>Greene</td><td>Todd </td><td>ANA</td><td>Outfield</td><td>29</td><td>15</td><td>71</td><td>3</td><td>18</td><td>4</td><td>0</td><td>1</td><td>7</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>2</td><td>20</td><td>0</td><td></td></tr>
<tr><td>Helfand</td><td>Eric </td><td>ANA</td><td>Catcher</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr>
<tr><td>Hollins</td><td>Dave </td><td>ANA</td><td>Third Base</td><td>101</td><td>98</td><td>363</td><td>60</td><td>88</td><td>16</td><td>2</td><td>11</td><td>39</td><td>11</td><td>3</td><td>2</td><td>2</td><td>17</td><td>0</td><td>44</td><td>69</td><td>7</td><td></td></tr>
<tr><td>Jefferies</td><td>Gregg </td><td>ANA</td><td>Outfield</td><td>19</td><td>18</td><td>72</td><td>7</td><td>25</td><td>6</td><td>0</td><td>1</td><td>10</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>5</td><td>0</td><td></td></tr>
<tr><td>Johnson</td><td>Mark </td><td>ANA</td><td>First Base</td><td>10</td><td>2</td><td>14</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>6</td><td>0</td><td></td></tr>
<tr><td>Kreuter</td><td>Chad </td><td>ANA</td><td>Catcher</td><td>96</td><td>74</td><td>252</td><td>27</td><td>63</td><td>10</td><td>1</td><td>2</td><td>33</td><td>1</td><td>0</td><td>5</td><td>1</td><td>9</td><td>5</td><td>33</td><td>49</td><td>3</td><td></td></tr>
<tr><td>Martin</td><td>Norberto </td><td>ANA</td><td>Second Base</td><td>79</td><td>50</td><td>195</td><td>20</td><td>42</td><td>2</td><td>0</td><td>1</td><td>13</td><td>3</td><td>1</td><td>3</td><td>2</td><td>4</td><td>0</td><td>6</td><td>29</td><td>0</td><td></td></tr>
<tr><td>Mashore</td><td>Damon </td><td>ANA</td><td>Outfield</td><td>43</td><td>24</td><td>98</td><td>13</td><td>23</td><td>6</td><td>0</td><td>2</td><td>11</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>9</td><td>22</td><td>3</td><td></td></tr>
<tr><td>Molina</td><td>Ben </td><td>ANA</td><td>Catcher</td><td>2</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td></td></tr>
<tr><td>Nevin</td><td>Phil </td><td>ANA</td><td>Catcher</td><td>75</td><td>65</td><td>237</td><td>27</td><td>54</td><td>8</td><td>1</td><td>8</td><td>27</td><td>0</td><td>0</td><td>0</td><td>2</td><td>5</td><td>20</td><td>17</td><td>67</td><td>5</td><td></td></tr>
<tr><td>O'Brien</td><td>Charlie </td><td>ANA</td><td>Catcher</td><td>62</td><td>58</td><td>175</td><td>13</td><td>45</td><td>9</td><td>0</td><td>4</td><td>18</td><td>0</td><td>0</td><td>3</td><td>3</td><td>4</td><td>1</td><td>10</td><td>33</td><td>2</td><td></td></tr>
<tr><td>Palmeiro</td><td>Orlando </td><td>ANA</td><td>Outfield</td><td>74</td><td>34</td><td>165</td><td>28</td><td>53</td><td>7</td><td>2</td><td>0</td><td>21</td><td>5</td><td>4</td><td>7</td><td>0</td><td>0</td><td>0</td><td>20</td><td>11</td><td>0</td><td></td></tr>
<tr><td>Pritchett</td><td>Chris </td><td>ANA</td><td>First Base</td><td>31</td><td>19</td><td>80</td><td>12</td><td>23</td><td>2</td><td>1</td><td>2</td><td>8</td><td>2</td><td>0</td><td>0</td><td>0</td><td>1</td><td>0</td><td>4</td><td>16</td><td>0</td><td></td></tr>
<tr><td>Salmon</td><td>Tim </td><td>ANA</td><td>Designated Hitter</td><td>136</td><td>130</td><td>463</td><td>84</td><td>139</td><td>28</td><td>1</td><td>26</td><td>88</td><td>0</td><td>1</td><td>0</td><td>10</td><td>2</td><td>0</td><td>90</td><td>100</td><td>3</td><td></td></tr>
<tr><td>Shipley</td><td>Craig </td><td>ANA</td><td>Third Base</td><td>77</td><td>32</td><td>147</td><td>18</td><td>38</td><td>7</td><td>1</td><td>2</td><td>17</td><td>0</td><td>4</td><td>4</td><td>1</td><td>3</td><td>0</td><td>5</td><td>22</td><td>5</td><td></td></tr>
<tr><td>Velarde</td><td>Randy </td><td>ANA</td><td>Second Base</td><td>51</td><td>50</td><td>188</td><td>29</td><td>49</td><td>13</td><td>1</td><td>4</td><td>26</td><td>7</td><td>2</td><td>0</td><td>1</td><td>4</td><td>0</td><td>34</td><td>42</td><td>1</td><td></td></tr>
<tr><td>Walbeck</td><td>Matt </td><td>ANA</td><td>Catcher</td><td>108</td><td>91</td><td>338</td><td>41</td><td>87</td><td>15</td><td>2</td><td>6</td><td>46</td><td>1</td><td>1</td><td>5</td><td>5</td><td>7</td><td>8</td><td>30</td><td>68</td><td>2</td><td></td></tr>
<tr><td>Williams</td><td>Reggie </td><td>ANA</td><td>Outfield</td><td>29</td><td>7</td><td>36</td><td>7</td><td>13</td><td>1</td><td>0</td><td>1</td><td>5</td><td>3</td><td>3</td><td>1</td><td>0</td><td>0</td><td>0</td><td>7</td><td>11</td><td>1</td><td></td></tr>
</table>
</code><hr color="red" style="color: red" size="2"><h2>A Program to convert tab delimited data to XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import org.jdom.*;
import org.jdom.output.XMLOutputter;


public class JDOMBaseballTabToXML {

  public static void main(String[] args) {
     
    Element root = new Element("players");
    
    try {
      FileInputStream fin = new FileInputStream(args[0]);
      BufferedReader in 
       = new BufferedReader(new InputStreamReader(fin));    

      String playerStats;  
      while ((playerStats = in.readLine()) != null) {
        String[] stats = splitLine(playerStats);
        
        Element player = new Element("player");

        Element first_name = new Element("first_name");
        first_name.setText(stats[1]);
        player.addContent(first_name);
        
        Element surname = new Element("surname");
        surname.setText(stats[0]);
        player.addContent(surname);
       
        Element games_played = new Element("games_played");
        games_played.setText(stats[4]);
        player.addContent(games_played);
       
        Element at_bats = new Element("at_bats");
        at_bats.setText(stats[6]);
        player.addContent(at_bats);
       
        Element runs = new Element("runs");
        runs.setText(stats[7]);
        player.addContent(runs);
       
        Element hits = new Element("hits");
        hits.setText(stats[8]);
        player.addContent(hits);
       
        Element doubles = new Element("doubles");
        doubles.setText(stats[9]);
        player.addContent(doubles);
       
        Element triples = new Element("triples");
        triples.setText(stats[10]);
        player.addContent(triples); 

        Element home_runs = new Element("home_runs");
        home_runs.setText(stats[11]);
        player.addContent(home_runs); 

        Element runs_batted_in = new Element("runs_batted_in");
        runs_batted_in.setText(stats[12]);
        player.addContent(runs_batted_in); 

        Element stolen_bases = new Element("stolen_bases");
        stolen_bases.setText(stats[13]);
        player.addContent(stolen_bases); 

        Element caught_stealing = new Element("caught_stealing");
        caught_stealing.setText(stats[14]);
        player.addContent(caught_stealing); 

        Element sacrifice_hits = new Element("sacrifice_hits");
        sacrifice_hits.setText(stats[15]);
        player.addContent(sacrifice_hits); 

        Element sacrifice_flies = new Element("sacrifice_flies");
        sacrifice_flies.setText(stats[16]);
        player.addContent(sacrifice_flies); 

        Element errors = new Element("errors");
        errors.setText(stats[17]);
        player.addContent(errors); 

        Element passed_by_ball = new Element("passed_by_ball");
        passed_by_ball.setText(stats[18]);
        player.addContent(passed_by_ball); 

        Element walks = new Element("walks");
        walks.setText(stats[19]);
        player.addContent(walks); 

        Element strike_outs = new Element("strike_outs");
        strike_outs.setText(stats[20]);
        player.addContent(strike_outs); 

        Element hit_by_pitch = new Element("hit_by_pitch");
        hit_by_pitch.setText(stats[21]);
        player.addContent(hit_by_pitch); 
        
        root.addContent(player);
      }  
      
      Document doc = new Document(root);
      // serialize it into a file
      FileOutputStream fout 
       = new FileOutputStream("baseballstats.xml");
      
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, fout);
      fout.flush();	
      fout.close();
      in.close();
      
    }
    catch (IOException e) {
      System.err.println(e);
    }
    catch (ArrayIndexOutOfBoundsException e) {
      System.out.println("Usage: java BaseballTabToXML input_file.tab");
    }

  }

  public static String[] splitLine(String playerStats) {
    
    // count the number of tabs
    int numTabs = 0;
    for (int i = 0; i &lt; playerStats.length(); i++) {
      if (playerStats.charAt(i) == '\t') numTabs++;
    }
    int numFields = numTabs + 1;
    String[] fields = new String[numFields];
    int position = 0;
    for (int i = 0; i &lt; numFields; i++) {
      StringBuffer field = new StringBuffer();
      while (position &lt; playerStats.length() 
       &amp;&amp; playerStats.charAt(position++) != '\t') {
        field.append(playerStats.charAt(position-1));
      }
      fields[i] = field.toString();
    }    
    return fields;
    
  }

}</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/baseballstats.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Baseball Stats in XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;players&gt;
  &lt;player&gt;
    &lt;first_name&gt;FirstName&lt;/first_name&gt;
    &lt;surname&gt;Surname&lt;/surname&gt;
    &lt;games_played&gt;Games Played&lt;/games_played&gt;
    &lt;at_bats&gt;AtBats&lt;/at_bats&gt;
    &lt;runs&gt;Runs&lt;/runs&gt;
    &lt;hits&gt;Hits&lt;/hits&gt;
    &lt;doubles&gt;Doubles&lt;/doubles&gt;
    &lt;triples&gt;Triples&lt;/triples&gt;
    &lt;home_runs&gt;Home runs&lt;/home_runs&gt;
    &lt;stolen_bases&gt;RBI&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;Caught Stealing&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;Sacrifice Hits&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;Sacrifice Flies&lt;/sacrifice_flies&gt;
    &lt;errors&gt;Errors&lt;/errors&gt;
    &lt;passed_by_ball&gt;PB&lt;/passed_by_ball&gt;
    &lt;walks&gt;Walks&lt;/walks&gt;
    &lt;strike_outs&gt;Strike outs&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;Hit by pitch&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Garret &lt;/first_name&gt;
    &lt;surname&gt;Anderson&lt;/surname&gt;
    &lt;games_played&gt;156&lt;/games_played&gt;
    &lt;at_bats&gt;622&lt;/at_bats&gt;
    &lt;runs&gt;62&lt;/runs&gt;
    &lt;hits&gt;183&lt;/hits&gt;
    &lt;doubles&gt;41&lt;/doubles&gt;
    &lt;triples&gt;7&lt;/triples&gt;
    &lt;home_runs&gt;15&lt;/home_runs&gt;
    &lt;stolen_bases&gt;79&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;6&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;29&lt;/walks&gt;
    &lt;strike_outs&gt;80&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Justin &lt;/first_name&gt;
    &lt;surname&gt;Baughman&lt;/surname&gt;
    &lt;games_played&gt;62&lt;/games_played&gt;
    &lt;at_bats&gt;196&lt;/at_bats&gt;
    &lt;runs&gt;24&lt;/runs&gt;
    &lt;hits&gt;50&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;20&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;8&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;6&lt;/walks&gt;
    &lt;strike_outs&gt;36&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Frank &lt;/first_name&gt;
    &lt;surname&gt;Bolick&lt;/surname&gt;
    &lt;games_played&gt;21&lt;/games_played&gt;
    &lt;at_bats&gt;45&lt;/at_bats&gt;
    &lt;runs&gt;3&lt;/runs&gt;
    &lt;hits&gt;7&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;2&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;11&lt;/walks&gt;
    &lt;strike_outs&gt;8&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gary &lt;/first_name&gt;
    &lt;surname&gt;Disarcina&lt;/surname&gt;
    &lt;games_played&gt;157&lt;/games_played&gt;
    &lt;at_bats&gt;551&lt;/at_bats&gt;
    &lt;runs&gt;73&lt;/runs&gt;
    &lt;hits&gt;158&lt;/hits&gt;
    &lt;doubles&gt;39&lt;/doubles&gt;
    &lt;triples&gt;3&lt;/triples&gt;
    &lt;home_runs&gt;3&lt;/home_runs&gt;
    &lt;stolen_bases&gt;56&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;7&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;12&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;14&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;21&lt;/walks&gt;
    &lt;strike_outs&gt;51&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;8&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Jim &lt;/first_name&gt;
    &lt;surname&gt;Edmonds&lt;/surname&gt;
    &lt;games_played&gt;154&lt;/games_played&gt;
    &lt;at_bats&gt;599&lt;/at_bats&gt;
    &lt;runs&gt;115&lt;/runs&gt;
    &lt;hits&gt;184&lt;/hits&gt;
    &lt;doubles&gt;42&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;25&lt;/home_runs&gt;
    &lt;stolen_bases&gt;91&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;5&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;5&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;57&lt;/walks&gt;
    &lt;strike_outs&gt;114&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Darin &lt;/first_name&gt;
    &lt;surname&gt;Erstad&lt;/surname&gt;
    &lt;games_played&gt;133&lt;/games_played&gt;
    &lt;at_bats&gt;537&lt;/at_bats&gt;
    &lt;runs&gt;84&lt;/runs&gt;
    &lt;hits&gt;159&lt;/hits&gt;
    &lt;doubles&gt;39&lt;/doubles&gt;
    &lt;triples&gt;3&lt;/triples&gt;
    &lt;home_runs&gt;19&lt;/home_runs&gt;
    &lt;stolen_bases&gt;82&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;6&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;3&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;43&lt;/walks&gt;
    &lt;strike_outs&gt;77&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;6&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Carlos &lt;/first_name&gt;
    &lt;surname&gt;Garcia&lt;/surname&gt;
    &lt;games_played&gt;19&lt;/games_played&gt;
    &lt;at_bats&gt;35&lt;/at_bats&gt;
    &lt;runs&gt;4&lt;/runs&gt;
    &lt;hits&gt;5&lt;/hits&gt;
    &lt;doubles&gt;1&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;1&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;3&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Troy &lt;/first_name&gt;
    &lt;surname&gt;Glaus&lt;/surname&gt;
    &lt;games_played&gt;48&lt;/games_played&gt;
    &lt;at_bats&gt;165&lt;/at_bats&gt;
    &lt;runs&gt;19&lt;/runs&gt;
    &lt;hits&gt;36&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;23&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;7&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;15&lt;/walks&gt;
    &lt;strike_outs&gt;51&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Todd &lt;/first_name&gt;
    &lt;surname&gt;Greene&lt;/surname&gt;
    &lt;games_played&gt;29&lt;/games_played&gt;
    &lt;at_bats&gt;71&lt;/at_bats&gt;
    &lt;runs&gt;3&lt;/runs&gt;
    &lt;hits&gt;18&lt;/hits&gt;
    &lt;doubles&gt;4&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;7&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;2&lt;/walks&gt;
    &lt;strike_outs&gt;20&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Eric &lt;/first_name&gt;
    &lt;surname&gt;Helfand&lt;/surname&gt;
    &lt;games_played&gt;0&lt;/games_played&gt;
    &lt;at_bats&gt;0&lt;/at_bats&gt;
    &lt;runs&gt;0&lt;/runs&gt;
    &lt;hits&gt;0&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;0&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Dave &lt;/first_name&gt;
    &lt;surname&gt;Hollins&lt;/surname&gt;
    &lt;games_played&gt;101&lt;/games_played&gt;
    &lt;at_bats&gt;363&lt;/at_bats&gt;
    &lt;runs&gt;60&lt;/runs&gt;
    &lt;hits&gt;88&lt;/hits&gt;
    &lt;doubles&gt;16&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;11&lt;/home_runs&gt;
    &lt;stolen_bases&gt;39&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;2&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;17&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;44&lt;/walks&gt;
    &lt;strike_outs&gt;69&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;7&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gregg &lt;/first_name&gt;
    &lt;surname&gt;Jefferies&lt;/surname&gt;
    &lt;games_played&gt;19&lt;/games_played&gt;
    &lt;at_bats&gt;72&lt;/at_bats&gt;
    &lt;runs&gt;7&lt;/runs&gt;
    &lt;hits&gt;25&lt;/hits&gt;
    &lt;doubles&gt;6&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;10&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;5&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Mark &lt;/first_name&gt;
    &lt;surname&gt;Johnson&lt;/surname&gt;
    &lt;games_played&gt;10&lt;/games_played&gt;
    &lt;at_bats&gt;14&lt;/at_bats&gt;
    &lt;runs&gt;1&lt;/runs&gt;
    &lt;hits&gt;1&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;6&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chad &lt;/first_name&gt;
    &lt;surname&gt;Kreuter&lt;/surname&gt;
    &lt;games_played&gt;96&lt;/games_played&gt;
    &lt;at_bats&gt;252&lt;/at_bats&gt;
    &lt;runs&gt;27&lt;/runs&gt;
    &lt;hits&gt;63&lt;/hits&gt;
    &lt;doubles&gt;10&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;33&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;9&lt;/errors&gt;
    &lt;passed_by_ball&gt;5&lt;/passed_by_ball&gt;
    &lt;walks&gt;33&lt;/walks&gt;
    &lt;strike_outs&gt;49&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Norberto &lt;/first_name&gt;
    &lt;surname&gt;Martin&lt;/surname&gt;
    &lt;games_played&gt;79&lt;/games_played&gt;
    &lt;at_bats&gt;195&lt;/at_bats&gt;
    &lt;runs&gt;20&lt;/runs&gt;
    &lt;hits&gt;42&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;13&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;6&lt;/walks&gt;
    &lt;strike_outs&gt;29&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Damon &lt;/first_name&gt;
    &lt;surname&gt;Mashore&lt;/surname&gt;
    &lt;games_played&gt;43&lt;/games_played&gt;
    &lt;at_bats&gt;98&lt;/at_bats&gt;
    &lt;runs&gt;13&lt;/runs&gt;
    &lt;hits&gt;23&lt;/hits&gt;
    &lt;doubles&gt;6&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;11&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;9&lt;/walks&gt;
    &lt;strike_outs&gt;22&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Ben &lt;/first_name&gt;
    &lt;surname&gt;Molina&lt;/surname&gt;
    &lt;games_played&gt;2&lt;/games_played&gt;
    &lt;at_bats&gt;1&lt;/at_bats&gt;
    &lt;runs&gt;0&lt;/runs&gt;
    &lt;hits&gt;0&lt;/hits&gt;
    &lt;doubles&gt;0&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;0&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;0&lt;/walks&gt;
    &lt;strike_outs&gt;0&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Phil &lt;/first_name&gt;
    &lt;surname&gt;Nevin&lt;/surname&gt;
    &lt;games_played&gt;75&lt;/games_played&gt;
    &lt;at_bats&gt;237&lt;/at_bats&gt;
    &lt;runs&gt;27&lt;/runs&gt;
    &lt;hits&gt;54&lt;/hits&gt;
    &lt;doubles&gt;8&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;8&lt;/home_runs&gt;
    &lt;stolen_bases&gt;27&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;2&lt;/sacrifice_flies&gt;
    &lt;errors&gt;5&lt;/errors&gt;
    &lt;passed_by_ball&gt;20&lt;/passed_by_ball&gt;
    &lt;walks&gt;17&lt;/walks&gt;
    &lt;strike_outs&gt;67&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;5&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Charlie &lt;/first_name&gt;
    &lt;surname&gt;Obrien&lt;/surname&gt;
    &lt;games_played&gt;62&lt;/games_played&gt;
    &lt;at_bats&gt;175&lt;/at_bats&gt;
    &lt;runs&gt;13&lt;/runs&gt;
    &lt;hits&gt;45&lt;/hits&gt;
    &lt;doubles&gt;9&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;4&lt;/home_runs&gt;
    &lt;stolen_bases&gt;18&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;3&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;3&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;1&lt;/passed_by_ball&gt;
    &lt;walks&gt;10&lt;/walks&gt;
    &lt;strike_outs&gt;33&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;2&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Orlando &lt;/first_name&gt;
    &lt;surname&gt;Palmeiro&lt;/surname&gt;
    &lt;games_played&gt;74&lt;/games_played&gt;
    &lt;at_bats&gt;165&lt;/at_bats&gt;
    &lt;runs&gt;28&lt;/runs&gt;
    &lt;hits&gt;53&lt;/hits&gt;
    &lt;doubles&gt;7&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;0&lt;/home_runs&gt;
    &lt;stolen_bases&gt;21&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;7&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;20&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chris &lt;/first_name&gt;
    &lt;surname&gt;Pritchett&lt;/surname&gt;
    &lt;games_played&gt;31&lt;/games_played&gt;
    &lt;at_bats&gt;80&lt;/at_bats&gt;
    &lt;runs&gt;12&lt;/runs&gt;
    &lt;hits&gt;23&lt;/hits&gt;
    &lt;doubles&gt;2&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;8&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;0&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;1&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;4&lt;/walks&gt;
    &lt;strike_outs&gt;16&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;0&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Tim &lt;/first_name&gt;
    &lt;surname&gt;Salmon&lt;/surname&gt;
    &lt;games_played&gt;136&lt;/games_played&gt;
    &lt;at_bats&gt;463&lt;/at_bats&gt;
    &lt;runs&gt;84&lt;/runs&gt;
    &lt;hits&gt;139&lt;/hits&gt;
    &lt;doubles&gt;28&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;26&lt;/home_runs&gt;
    &lt;stolen_bases&gt;88&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;10&lt;/sacrifice_flies&gt;
    &lt;errors&gt;2&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;90&lt;/walks&gt;
    &lt;strike_outs&gt;100&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;3&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Craig &lt;/first_name&gt;
    &lt;surname&gt;Shipley&lt;/surname&gt;
    &lt;games_played&gt;77&lt;/games_played&gt;
    &lt;at_bats&gt;147&lt;/at_bats&gt;
    &lt;runs&gt;18&lt;/runs&gt;
    &lt;hits&gt;38&lt;/hits&gt;
    &lt;doubles&gt;7&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;2&lt;/home_runs&gt;
    &lt;stolen_bases&gt;17&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;4&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;4&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;3&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;5&lt;/walks&gt;
    &lt;strike_outs&gt;22&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;5&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Randy &lt;/first_name&gt;
    &lt;surname&gt;Velarde&lt;/surname&gt;
    &lt;games_played&gt;51&lt;/games_played&gt;
    &lt;at_bats&gt;188&lt;/at_bats&gt;
    &lt;runs&gt;29&lt;/runs&gt;
    &lt;hits&gt;49&lt;/hits&gt;
    &lt;doubles&gt;13&lt;/doubles&gt;
    &lt;triples&gt;1&lt;/triples&gt;
    &lt;home_runs&gt;4&lt;/home_runs&gt;
    &lt;stolen_bases&gt;26&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;2&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;0&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;1&lt;/sacrifice_flies&gt;
    &lt;errors&gt;4&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;34&lt;/walks&gt;
    &lt;strike_outs&gt;42&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Matt &lt;/first_name&gt;
    &lt;surname&gt;Walbeck&lt;/surname&gt;
    &lt;games_played&gt;108&lt;/games_played&gt;
    &lt;at_bats&gt;338&lt;/at_bats&gt;
    &lt;runs&gt;41&lt;/runs&gt;
    &lt;hits&gt;87&lt;/hits&gt;
    &lt;doubles&gt;15&lt;/doubles&gt;
    &lt;triples&gt;2&lt;/triples&gt;
    &lt;home_runs&gt;6&lt;/home_runs&gt;
    &lt;stolen_bases&gt;46&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;1&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;5&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;5&lt;/sacrifice_flies&gt;
    &lt;errors&gt;7&lt;/errors&gt;
    &lt;passed_by_ball&gt;8&lt;/passed_by_ball&gt;
    &lt;walks&gt;30&lt;/walks&gt;
    &lt;strike_outs&gt;68&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;2&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Reggie &lt;/first_name&gt;
    &lt;surname&gt;Williams&lt;/surname&gt;
    &lt;games_played&gt;29&lt;/games_played&gt;
    &lt;at_bats&gt;36&lt;/at_bats&gt;
    &lt;runs&gt;7&lt;/runs&gt;
    &lt;hits&gt;13&lt;/hits&gt;
    &lt;doubles&gt;1&lt;/doubles&gt;
    &lt;triples&gt;0&lt;/triples&gt;
    &lt;home_runs&gt;1&lt;/home_runs&gt;
    &lt;stolen_bases&gt;5&lt;/stolen_bases&gt;
    &lt;caught_stealing&gt;3&lt;/caught_stealing&gt;
    &lt;sacrifice_hits&gt;1&lt;/sacrifice_hits&gt;
    &lt;sacrifice_flies&gt;0&lt;/sacrifice_flies&gt;
    &lt;errors&gt;0&lt;/errors&gt;
    &lt;passed_by_ball&gt;0&lt;/passed_by_ball&gt;
    &lt;walks&gt;7&lt;/walks&gt;
    &lt;strike_outs&gt;11&lt;/strike_outs&gt;
    &lt;hit_by_pitch&gt;1&lt;/hit_by_pitch&gt;
  &lt;/player&gt;
&lt;/players&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>A Shortcut</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import org.jdom.*;
import org.jdom.output.XMLOutputter;


public class BaseballTabToXMLShortcut {

  public static void main(String[] args) {
     
    Element root = new Element("players");
    
    try {
      FileInputStream fin = new FileInputStream(args[0]);
      BufferedReader in 
       = new BufferedReader(new InputStreamReader(fin));    

      String playerStats;  
      while ((playerStats = in.readLine()) != null) {
        String[] stats = splitLine(playerStats);
        
        Element player = new Element("player");

        player.addContent((new Element("first_name")).setText(stats[1]));
        player.addContent((new Element("surname")).setText(stats[0]));
        player.addContent((new Element("games_played")).setText(stats[4]));
        player.addContent((new Element("at_bats")).setText(stats[6]));
        player.addContent((new Element("runs")).setText(stats[7]));
        player.addContent((new Element("hits")).setText(stats[8]));
        player.addContent((new Element("doubles")).setText(stats[9]));
        player.addContent((new Element("triples")).setText(stats[10]));
        player.addContent((new Element("home_runs")).setText(stats[11]));
        player.addContent((new Element("runs_batted_in")).setText(stats[12]));
        player.addContent((new Element("stolen_bases")).setText(stats[13]));
        player.addContent((new Element("caught_stealing")).setText(stats[14]));
        player.addContent((new Element("sacrifice_hits")).setText(stats[15]));
        player.addContent((new Element("sacrifice_flies")).setText(stats[16]));
        player.addContent((new Element("errors")).setText(stats[17]));
        player.addContent((new Element("passed_by_ball")).setText(stats[18]));
        player.addContent((new Element("walks")).setText(stats[19]));
        player.addContent((new Element("strike_outs")).setText(stats[20]));
        player.addContent((new Element("hit_by_pitch")).setText(stats[21]));
        
        root.addContent(player);
      }  
      
      Document doc = new Document(root);
      // serialize it into a file
      FileOutputStream fout 
       = new FileOutputStream("baseballstats.xml");
      
      XMLOutputter serializer = new XMLOutputter(); 
      serializer.output(doc, fout);
      fout.flush();	
      fout.close();
      in.close();
      
    }
    catch (IOException e) {
      System.err.println(e);
    }
    catch (ArrayIndexOutOfBoundsException e) {
      System.out.println(
       "Usage: java BaseballTabToXML input_file.tab");
    }

  }

  public static String[] splitLine(String playerStats) {
    
    // count the number of tabs
    int numTabs = 0;
    for (int i = 0; i &lt; playerStats.length(); i++) {
      if (playerStats.charAt(i) == '\t') numTabs++;
    }
    int numFields = numTabs + 1;
    String[] fields = new String[numFields];
    int position = 0;
    for (int i = 0; i &lt; numFields; i++) {
      StringBuffer field = new StringBuffer();
      while (position &lt; playerStats.length() 
       &amp;&amp; playerStats.charAt(position++) != '\t') {
        field.append(playerStats.charAt(position-1));
      }
      fields[i] = field.toString();
    }    
    return fields;
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Converting data to XML while Processing it</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import java.text.*;
import java.util.*;
import org.jdom.*;
import org.jdom.output.XMLOutputter;

public class JDOMBattingAverage {

  public static void main(String[] args) {
     
    Element root = new Element("players");
     
    try {
      FileInputStream fin = new FileInputStream(args[0]);
      BufferedReader in 
       = new BufferedReader(new InputStreamReader(fin));
      
      String playerStats;
      
      // for formatting batting averages
      DecimalFormat averages = (DecimalFormat) 
       NumberFormat.getNumberInstance(Locale.US);
      averages.setMaximumFractionDigits(3);
      averages.setMinimumFractionDigits(3);
      averages.setMinimumIntegerDigits(0);
      
      while ((playerStats = in.readLine()) != null) {
        String[] stats = splitLine(playerStats);
        
        String formattedAverage;
        try {
          int atBats         = Integer.parseInt(stats[6]);
          int hits           = Integer.parseInt(stats[8]);
        
          if (atBats &lt;= 0) formattedAverage = "N/A";
          else {
            double average = hits / (double) atBats;
            formattedAverage = averages.format(average);
          }       
        }
        catch (Exception e) {
          // skip this player
          continue; 
        }

        Element player = new Element("player");

        Element first_name = new Element("first_name");
        first_name.setText(stats[1]);
        player.addContent(first_name);
             
        Element surname = new Element("surname");
        surname.setText(stats[0]);
        player.addContent(surname);
       
        Element battingAverage = new Element("batting_average");
        battingAverage.setText(formattedAverage);
        player.addContent(battingAverage);
   
        root.addContent(player);
        
      }  
      
      
      Document doc = new Document(root);
      // serialize it into a file
      FileOutputStream fout 
       = new FileOutputStream("battingaverages.xml");
      
      XMLOutputter serializer = new XMLOutputter("  ", true); 
      serializer.output(doc, fout);
      fout.flush();	
      fout.close();
      in.close();

    }
    catch (IOException e) {
      System.err.println(e);
    }
    catch (ArrayIndexOutOfBoundsException e) {
      System.out.println("Usage: java JDOMBattingAverage input_file.tab");
    }

  }

  public static String[] splitLine(String playerStats) {
    
    // count the number of tabs
    int numTabs = 0;
    for (int i = 0; i &lt; playerStats.length(); i++) {
      if (playerStats.charAt(i) == '\t') numTabs++;
    }
    int numFields = numTabs + 1;
    String[] fields = new String[numFields];
    int position = 0;
    for (int i = 0; i &lt; numFields; i++) {
      StringBuffer field = new StringBuffer();
      while (position &lt; playerStats.length() 
       &amp;&amp; playerStats.charAt(position++) != '\t') {
        field.append(playerStats.charAt(position-1));
      }
      fields[i] = field.toString();
    }    
    return fields;
    
  }

}</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/battingaverages.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Batting Averages in XML</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;players&gt;
  &lt;player&gt;
    &lt;first_name&gt;Garret &lt;/first_name&gt;
    &lt;surname&gt;Anderson&lt;/surname&gt;
    &lt;batting_average&gt;.294&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Justin &lt;/first_name&gt;
    &lt;surname&gt;Baughman&lt;/surname&gt;
    &lt;batting_average&gt;.255&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Frank &lt;/first_name&gt;
    &lt;surname&gt;Bolick&lt;/surname&gt;
    &lt;batting_average&gt;.156&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gary &lt;/first_name&gt;
    &lt;surname&gt;Disarcina&lt;/surname&gt;
    &lt;batting_average&gt;.287&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Jim &lt;/first_name&gt;
    &lt;surname&gt;Edmonds&lt;/surname&gt;
    &lt;batting_average&gt;.307&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Darin &lt;/first_name&gt;
    &lt;surname&gt;Erstad&lt;/surname&gt;
    &lt;batting_average&gt;.296&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Carlos &lt;/first_name&gt;
    &lt;surname&gt;Garcia&lt;/surname&gt;
    &lt;batting_average&gt;.143&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Troy &lt;/first_name&gt;
    &lt;surname&gt;Glaus&lt;/surname&gt;
    &lt;batting_average&gt;.218&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Todd &lt;/first_name&gt;
    &lt;surname&gt;Greene&lt;/surname&gt;
    &lt;batting_average&gt;.254&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Eric &lt;/first_name&gt;
    &lt;surname&gt;Helfand&lt;/surname&gt;
    &lt;batting_average&gt;N/A&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Dave &lt;/first_name&gt;
    &lt;surname&gt;Hollins&lt;/surname&gt;
    &lt;batting_average&gt;.242&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Gregg &lt;/first_name&gt;
    &lt;surname&gt;Jefferies&lt;/surname&gt;
    &lt;batting_average&gt;.347&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Mark &lt;/first_name&gt;
    &lt;surname&gt;Johnson&lt;/surname&gt;
    &lt;batting_average&gt;.071&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chad &lt;/first_name&gt;
    &lt;surname&gt;Kreuter&lt;/surname&gt;
    &lt;batting_average&gt;.250&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Norberto &lt;/first_name&gt;
    &lt;surname&gt;Martin&lt;/surname&gt;
    &lt;batting_average&gt;.215&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Damon &lt;/first_name&gt;
    &lt;surname&gt;Mashore&lt;/surname&gt;
    &lt;batting_average&gt;.235&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Ben &lt;/first_name&gt;
    &lt;surname&gt;Molina&lt;/surname&gt;
    &lt;batting_average&gt;.000&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Phil &lt;/first_name&gt;
    &lt;surname&gt;Nevin&lt;/surname&gt;
    &lt;batting_average&gt;.228&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Charlie &lt;/first_name&gt;
    &lt;surname&gt;Obrien&lt;/surname&gt;
    &lt;batting_average&gt;.257&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Orlando &lt;/first_name&gt;
    &lt;surname&gt;Palmeiro&lt;/surname&gt;
    &lt;batting_average&gt;.321&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Chris &lt;/first_name&gt;
    &lt;surname&gt;Pritchett&lt;/surname&gt;
    &lt;batting_average&gt;.288&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Tim &lt;/first_name&gt;
    &lt;surname&gt;Salmon&lt;/surname&gt;
    &lt;batting_average&gt;.300&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Craig &lt;/first_name&gt;
    &lt;surname&gt;Shipley&lt;/surname&gt;
    &lt;batting_average&gt;.259&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Randy &lt;/first_name&gt;
    &lt;surname&gt;Velarde&lt;/surname&gt;
    &lt;batting_average&gt;.261&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Matt &lt;/first_name&gt;
    &lt;surname&gt;Walbeck&lt;/surname&gt;
    &lt;batting_average&gt;.257&lt;/batting_average&gt;
  &lt;/player&gt;
  &lt;player&gt;
    &lt;first_name&gt;Reggie &lt;/first_name&gt;
    &lt;surname&gt;Williams&lt;/surname&gt;
    &lt;batting_average&gt;.361&lt;/batting_average&gt;
  &lt;/player&gt;
&lt;/players&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>Advantages of JDOM for Writing Documents</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>You don't need to worry about well-formedness rules</p></li>
  <li><p>Very configurable output</p></li>
  <li><p>You can pick any encoding Java supports.</p></li>
  <li><p>Validity is not automatically maintained.
   </p></li>
  </ul><h2 xmlns:xinclude="http://www.w3.org/2001/XInclude">Disadvantages</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Not streaming</p></li>
  <li><p>Requires more memory than writing strings a piece at a time</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Questions?</h2><div xmlns:xinclude="http://www.w3.org/2001/XInclude" align="center">
  <img src="images/question2.gif" width="224" height="207">
  </div><hr color="red" style="color: red" size="2"><h2>Reading XML with JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The stereotypical "Desperate Perl 
  Hacker" (DPH) is supposed to be able to write an XML parser in a weekend.</p></li>
  <li><p>The parser does the hard work for you.</p></li>
  <li><p>Your code reads the document through by hooking up JDOM to the parser.</p></li>
  <li><p>JDOM can connect to any parser that supports SAX or DOM.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOM Compatible Parsers for Java</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Any SAX parser including:</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">

<li><p>Apache XML Project's Xerces Java: 
<a href="http://xml.apache.org/xerces-j/index.html">http://xml.apache.org/xerces-j/index.html</a></p></li>

<li><p>Oracle's XML Parser for Java:
 
<a href="http://technet.oracle.com/tech/xml/parser_java2/">http://technet.oracle.com/tech/xml/parser_java2</a></p></li>

<li><p>Sun's Java API for
XML
<a href="http://java.sun.com/products/xml/">http://java.sun.com/products/xml</a></p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The JDOM Process</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Construct an <code>org.jdom.input.SAXBuilder</code>; no parser specific code is needed!</p></li>
<li><p>Invoke the builder's <code>build()</code> method to 
build a <code>Document</code> object from a 
<ul>
<li><p><code>Reader</code></p></li>
<li><p><code>InputStream</code></p></li>
<li><p><code>URL</code></p></li>
<li><p><code>File</code></p></li>
<li><p><code>String</code> containing a SYSTEM ID </p></li></ul>
</p></li>
<li><p>If there's a problem building the document, a <code>JDOMException</code> is thrown</p></li>
<li><p>Work with the resulting <code>Document</code> object</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Parsing a Document with JDOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;
import java.io.IOException;


public class JDOMChecker {

  public static void main(String[] args) {
  
    if (args.length == 0) {
      System.out.println("Usage: java JDOMChecker URL1 URL2..."); 
    } 
      
    SAXBuilder builder = new SAXBuilder();
     
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        builder.build(args[i]);
        // If no exception is thrown, then there are
        // no well-formedness errors.
        System.out.println(args[i] + " is well-formed.");
      }
             // indicates a well-formedness error
      catch (JDOMException e) { 
        System.out.println(args[i] + " is not well-formed.");
        System.out.println(e.getMessage());
      }
      catch (IOException e) { 
        System.out.println("Could not check " + args[i]);
        System.out.println("because " + e.getMessage());
      }
      
    }   
  
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Parser Results</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java JDOMChecker shortlogs.xml HelloJDOM.java
shortlogs.xml is well formed.
HelloJDOM.java is not well formed.
The markup in the document preceding the root element must be well-formed.: 
Error on line 1 of XML document: The markup in the document preceding the 
root element must be well-formed.
</tt></pre><hr color="red" style="color: red" size="2"><h2>Turning on  Validation in JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Not all parsers are validating but Xerces-J is.</p></li>
  <li><p>Validity errors are not fatal; therefore they do not necessarily cause
  a <code>JDOMException</code></p></li>
  <li><p>However, you can tell the builder you want it to validate by passing
  <code>true</code> to its constructor:
<pre><code>    SAXBuilder builder = new SAXBuilder(true);
</code></pre>  
  
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOM Validator</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.input.*;
import org.jdom.JDOMException;
import org.xml.sax.*;
import java.io.*;


public class JDOMValidator {

  public static void main(String[] args) {

    SAXBuilder parser = new SAXBuilder(true);

    if (args.length == 0) {
      System.out.println("Usage: java JDOMValidator URL1 URL2...");
    }

    // start parsing...
    for (int i = 0; i &lt; args.length; i++) {

      // command line should offer URIs or file names
      try {
        parser.build(args[i]);
        // If there are no well-formedness or validity errors,
        // then no exception is thrown
        System.out.println(args[i] + " is valid.");
      }
      catch (JDOMException e) { 
        System.out.println(args[i] + " is not valid.");
        System.out.println(e.getMessage());
      }

    }

  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Validation Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java JDOMValidator invalid_fibonacci.xml
invalid_fibonacci.xml is not valid.
Element type "title" must be declared.: Error on line 8 of XML document: 
Element type "title" must be declared.

% java JDOMValidator validfibonacci.xml
validfibonacci.xml is valid.
</tt></pre><hr color="red" style="color: red" size="2"><h2>Weblogs with JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>UserLand's RSS based list of Web logs
 at 
<a href="http://static.userland.com/weblogMonitor/logs.xml">http://static.userland.com/weblogMonitor/logs.xml</a>:


<pre><code>&lt;?xml version="1.0"?&gt;
&lt;!-- &lt;!DOCTYPE foo SYSTEM "http://msdn.microsoft.com/xml/general/htmlentities.dtd"&gt; --&gt;
&lt;weblogs&gt;
	&lt;log&gt;
		&lt;name&gt;MozillaZine&lt;/name&gt;
		&lt;url&gt;http://www.mozillazine.org&lt;/url&gt;
		&lt;changesUrl&gt;http://www.mozillazine.org/contents.rdf&lt;/changesUrl&gt;
		&lt;ownerName&gt;Jason Kersey&lt;/ownerName&gt;
		&lt;ownerEmail&gt;kerz@en.com&lt;/ownerEmail&gt;
		&lt;description&gt;THE source for news on the Mozilla Organization.  DevChats, Reviews, Chats, Builds, Demos, Screenshots, and more.&lt;/description&gt;
		&lt;imageUrl&gt;&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/kerz@en.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SalonHerringWiredFool&lt;/name&gt;
		&lt;url&gt;http://www.salonherringwiredfool.com/&lt;/url&gt;
		&lt;ownerName&gt;Some Random Herring&lt;/ownerName&gt;
		&lt;ownerEmail&gt;salonfool@wiredherring.com&lt;/ownerEmail&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;Scripting News&lt;/name&gt;
		&lt;url&gt;http://www.scripting.com/&lt;/url&gt;
		&lt;ownerName&gt;Dave Winer&lt;/ownerName&gt;
		&lt;ownerEmail&gt;dave@userland.com&lt;/ownerEmail&gt;
		&lt;description&gt;News and commentary from the cross-platform scripting community.&lt;/description&gt;
		&lt;imageUrl&gt;http://www.scripting.com/gifs/tinyScriptingNews.gif&lt;/imageUrl&gt;
		&lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/dave@userland.com.gif&lt;/adImageUrl&gt;
		&lt;/log&gt;
	&lt;log&gt;
		&lt;name&gt;SlashDot.Org&lt;/name&gt;
		&lt;url&gt;http://www.slashdot.org/&lt;/url&gt;
		&lt;ownerName&gt;Simply a friend&lt;/ownerName&gt;
		&lt;ownerEmail&gt;afriendofweblogs@weblogs.com&lt;/ownerEmail&gt;
		&lt;description&gt;News for Nerds, Stuff that Matters.&lt;/description&gt;
		&lt;/log&gt;
	&lt;/weblogs&gt;
</code></pre>

</p></li>

</ul><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="http://static.userland.com/weblogMonitor/logs.xml">Full list</a><hr color="red" style="color: red" size="2"><h2>Goal: Return a list of all the URLs in this 
list as java.net.URL objects</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Design Decisions</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Should we return an array, an <code>Enumeration</code>,
a <code>List</code>, or what?</p></li>
<li><p>Perhaps we should use multiple threads?</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOM Design</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>We can easily find out how many URLs there will be when we start parsing.
</p></li>
<li><p>Single threaded by nature; no benefit to mutiple threads
since no data will be available until the entire document has been read and parsed.
</p></li>
<li><p>The character data of each <code>url</code> 
element needs to be read.
Everything else can be ignored.
</p></li>
<li><p>The format is very straight-forward so we don't
need to traverse the entire tree.
</p></li>
<li><p>The XML parsing is so straight-forward it can
be done inside one method. No extra class is required.
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Weblogs with JDOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.input.SAXBuilder;
import java.util.*;
import java.net.*;


public class WeblogsJDOM {
   
  public static String DEFAULT_SYSTEM_ID 
   = "http://static.userland.com/weblogMonitor/logs.xml"; 
     
  public static List listChannels() throws JDOMException {
    return listChannels(DEFAULT_SYSTEM_ID); 
  }
  
  public static List listChannels(String systemID) 
   throws JDOMException, NullPointerException {
    
    if (systemID == null) {
      throw new NullPointerException("URL must be non-null");   
    }
    
    SAXBuilder builder = new SAXBuilder();
    // Load the entire document into memory 
    // from the network or file system
    Document doc = builder.build(systemID);
    
    // Descend the tree and find the URLs. It helps that
    // the document has a very regular structure.
    Element weblogs = doc.getRootElement();
    List logs = weblogs.getChildren("log");
    Vector urls = new Vector(logs.size());
    Iterator iterator = logs.iterator();
    while (iterator.hasNext()) {
      Object o = iterator.next();
      Element log = (Element) o;
      try {
                         // This will probably be changed to 
                         //  getElement() or getChildElement() 
        Element url = log.getChild("url"); 
        if (url == null) continue;
        String content = url.getTextTrim();
        URL u = new URL(content);
        urls.addElement(u);
      }
      catch (MalformedURLException e) {
        // bad input data from one third party; just ignore it 
      }
    }
    return urls;
    
  }
  
  public static void main(String[] args) {
   
    try {
      List urls;
      if (args.length &gt; 0) {
        urls = listChannels(args[0]);
      }
      else {
        urls = listChannels();
      }
      Iterator iterator = urls.iterator();
      while (iterator.hasNext()) {
        System.out.println(iterator.next()); 
      }
    }
    catch (/* Unexpected */ Exception e) {
      e.printStackTrace(); 
    }
    
  }
  
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Weblogs Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java WeblogsJDOM
http://2020Hindsight.editthispage.com/
http://www.sff.net/people/mitchw/weblog/weblog.htp
http://nate.weblogs.com/
http://plugins.launchpoint.net
http://404.psistorm.net
http://home.att.net/~geek9000
http://daubnet.tzo.com/weblog
<i>several hundred more...</i>
</code></pre><hr color="red" style="color: red" size="2"><h2>The org.jdom Package</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">The classes that represent an XML document and its parts</p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p><code>Document</code></p></li>  
 <li><p><code>Element</code></p></li>  
 <li><p><code>Attribute</code></p></li>  
 <li><p><code>Comment</code></p></li>  
 <li><p><code>DocType</code></p></li>  
 <li><p><code>EntityRef</code></p></li>  
 <li><p><code>Text</code></p></li>  
 <li><p><code>CDATA</code></p></li>  
 <li><p><code>ProcessingInstruction</code></p></li>
 <li><p><code>Verifier</code></p></li>
 <li><p>plus assorted exceptions</p></li>
    </ul><hr color="red" style="color: red" size="2"><h2>The Document Node</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The root <em>node</em> containing the entire document;
  not the same as the root <em>element</em></p></li>
  <li><p>Contains:
  <ul>
  <li><p>one element</p></li>
  <li><p>zero or more processing instructions</p></li>
  <li><p>zero or more comments</p></li>
  <li><p>zero or one document type declarations</p></li>
</ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Document Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class Document implements Serializable, Cloneable {

  protected ContentList content;
  protected DocType docType;

  public Document()
  public Document(Element rootElement, DocType docType)
  public Document(Element rootElement) 
  public Document(List newContent, DocType docType) 
  public Document(List content)

  public boolean  hasRootElement()
  public Element  getRootElement()
  public Document setRootElement(Element rootElement)
  public Element  detachRootElement() 
  
  public DocType  getDocType()
  public Document setDocType(DocType docType)
  
  public Document addContent(ProcessingInstruction pi)
  public Document addContent(Comment comment) 
  public List     getContent()
  public List     getContent(Filter filter)
  public Document setContent(List newContent)
  public boolean  removeContent(ProcessingInstruction pi)
  public boolean  removeContent(Comment comment) 
  
  // Java utility methods
  public String toString()
  public final boolean equals(Object ob)
  public final int hashCode()
  public Object clone() 
  
}</code></pre><hr color="red" style="color: red" size="2"><h2>Document Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.Document;
import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;
import org.jdom.output.XMLOutputter;
import java.io.IOException;


public class XMLPrinter {

  public static void main(String[] args) {
  
    if (args.length == 0) {
      System.out.println("Usage: java XMLPrinter URL1 URL2..."); 
    } 
      
    SAXBuilder builder = new SAXBuilder();
     
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        Document doc = builder.build(args[i]);
        System.out.println("*************" + args[i] 
         + "*************");
        XMLOutputter outputter = new XMLOutputter();
        outputter.output(doc, System.out);
      }
      // indicates a well-formedness or other error
      catch (JDOMException e) { 
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage());
      }
      // shouldn't happen because System.out eats exceptions
      catch (IOException e) { 
        System.out.println(e.getMessage());
      }
      
    }   
  
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Output from XMLPrinter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java XMLPrinter shortlogs.xml
*************shortlogs.xml*************
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE foo SYSTEM "http://msdn.microsoft.com/xml/general/htmlentities.dtd"&gt;&lt;weblogs&gt;
        &lt;log&gt;
                &lt;name&gt;MozillaZine&lt;/name&gt;
                &lt;url&gt;http://www.mozillazine.org&lt;/url&gt;
                &lt;changesUrl&gt;http://www.mozillazine.org/contents.rdf&lt;/changesUrl&gt;

                &lt;ownerName&gt;Jason Kersey&lt;/ownerName&gt;
                &lt;ownerEmail&gt;kerz@en.com&lt;/ownerEmail&gt;
                &lt;description&gt;THE source for news on the Mozilla Organization.  DevChats, Reviews, Chats, Builds, Demos, Screenshots, and more.&lt;/description&gt;
                &lt;imageUrl /&gt;
                &lt;adImageUrl&gt;http://static.userland.com/weblogMonitor/ads/kerz@en.com.gif&lt;/adImageUrl&gt;
                &lt;/log&gt;
        &lt;log&gt;
                &lt;name&gt;SalonHerringWiredFool&lt;/name&gt;
                &lt;url&gt;http://www.salonherringwiredfool.com/&lt;/url&gt;
                &lt;ownerName&gt;Some Random Herring&lt;/ownerName&gt;
                &lt;ownerEmail&gt;salonfool@wiredherring.com&lt;/ownerEmail&gt;
                &lt;description /&gt;
                &lt;/log&gt;
        &lt;log&gt;
                &lt;name&gt;SlashDot.Org&lt;/name&gt;
                &lt;url&gt;http://www.slashdot.org/&lt;/url&gt;
                &lt;ownerName&gt;Simply a friend&lt;/ownerName&gt;
                &lt;ownerEmail&gt;afriendofweblogs@weblogs.com&lt;/ownerEmail&gt;
                &lt;description&gt;News for Nerds, Stuff that Matters.&lt;/description&gt;
                &lt;/log&gt;
        &lt;/weblogs&gt;
</code></pre><hr color="red" style="color: red" size="2"><h2>Element Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a complete element including its 
start-tag, end-tag, and content</p></li>
<li><p>Contains: 
  <ul>
  <li><p>Child Elements</p></li>
  <li><p>Processing Instructions</p></li>
  <li><p>Comments</p></li>
  <li><p>Text</p></li>
  <li><p>CDATA sections</p></li>
  <li><p>Entity references</p></li>
  </ul>
</p></li>
<li><p>JDOM enforces restrictions on element names and possibly 
values; e.g. name cannot contain start with a digit.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Element Class Implementation</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The content is stored as a <code>java.util.List</code>
which contains 

  <ul>
  <li><p>One <code>Text</code> object per text node</p></li>
  <li><p>One <code>Element</code> object per child element</p></li>
  <li><p>One <code>Comment</code> object per comment</p></li>
  <li><p>One <code>CDATA</code> object per CDATA section </p></li>
  <li><p>One <code>ProcessingInstruction</code> object per processing instruction</p></li>
  </ul>
</p></li>
<li><p>Use the regular methods of <code>java.util.List</code> to
add, remove, and inspect the contents of an element</p></li>
<li><p>Since the methods of <code>java.util.List</code> expect to work
with <code>Object</code> objects, casting back to JDOM types
and <code>String</code> is frequent</p></li>
<li><p>Various utility methods mean you don't always have to work with
the full list.</p></li>
<li><p>Attributes and namespaces are available as separate lists
since these are not children.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Element Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class Element implements Serializable, Cloneable {

    protected           String        name;
    protected transient Namespace     namespace;
    protected           Object        parent;
    protected           AttributeList attributes;
    protected transient List          additionalNamespaces
    protected           List          content;

    protected Element()
    public    Element(String name, Namespace namespace)
    public    Element(String name)
    public    Element(String name, String uri)
    public    Element(String name, String prefix, String uri)

    public String     getName()
    public Namespace  getNamespace()
    public Namespace  getNamespace(String prefix)
    public String     getNamespacePrefix()
    public String     getNamespaceURI()
    public String     getQualifiedName()
    public Element    getParent()
    
    protected Element setParent(Element parent)
    public    boolean isRootElement()
    protected Element setIsRootElement(boolean isRootElement)
    public    Element setChildren(List children)
    protected Element setDocument(Document document)
    public    Element setName(String name)
    public    Element setNamespace(Namespace namespace)
    public    Element setText(String text)

    public String    getText() 
    public String    getTextTrim() 
    public String    getTextNormalize() 
    
    public String    getChildText(String name) 
    public String    getChildTextTrim(String name) 
    public String    getChildTextNormalize(String name) 
    public String    getChildText(String name, Namespace ns) 
    public String    getChildTextTrim(String name, Namespace ns) 
    public String    getChildTextNormalize(String name, Namespace ns) 

    public List      getChildren() 
    public Element   setChildren(List children) 
    public List      getChildren(String name) 
    public List      getChildren(String name, Namespace ns) 
    public Element   getChild(String name, Namespace ns) 
    public Element   getChild(String name) 
    public boolean   removeChild(String name) 
    public boolean   removeChild(String name, Namespace ns) 
    public boolean   removeChildren(String name)
    public boolean   removeChildren(String name, Namespace ns) 
    public boolean   removeChildren() 
    
    public List      getContent()
    public List      getContent(Filter filter)
    public Element   setContent(List newContent)
    public Element   addContent(String text)
    public Element   addContent(Text text)
    public Element   addContent(Element element) 
    public Element   addContent(ProcessingInstruction pi) 
    public Element   addContent(EntityRef entity) 
    public Element   addContent(Comment comment) 
    public Element   addContent(CDATA cdata) 
    public boolean   removeContent(Element element) 
    public boolean   removeContent(CDATA cdata) 
    public boolean   removeContent(ProcessingInstruction pi) 
    public boolean   removeContent(EntityRef entity) 
    public boolean   removeContent(Comment comment) 
    
    public Element   detach()

    public List      getAttributes() 
    public Attribute getAttribute(String name) 
    public Attribute getAttribute(String name, Namespace ns) 
    public String    getAttributeValue(String name) 
    public String    getAttributeValue(String name, Namespace ns) 
    public Element   setAttribute(Attribute attribute) 
    public Element   setAttributes(List attributes) 
    public boolean   removeAttribute(String name) 
    public boolean   removeAttribute(String name, Namespace ns) 

    public void addNamespaceDeclaration(Namespace additionalNamespace)
    public void removeNamespaceDeclaration(Namespace additionalNamespace)
    public List getAdditionalNamespaces()
    
    ///////////////////////////////////////
    // Basic Utility Methods
    /////////////////////////////////////// 
    public final String  toString()
    public final boolean equals(Object ob)
    public final int     hashCode()
    public final Object  clone()
    
}</code></pre><hr color="red" style="color: red" size="2"><h2>Element Example: XCount</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.input.SAXBuilder;
import java.util.*;


public class XCount {

  public static void main(String[] args) {
  
    if (args.length == 0) {
      System.out.println("Usage: java XCount URL1 URL2..."); 
    } 
      
    SAXBuilder builder = new SAXBuilder();
     
    System.out.println(
     "File\tElements\tAttributes\tComments\tProcessing Instructions\tCharacters");
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        Document doc = builder.build(args[i]);
        System.out.print(args[i] + ":\t");
        String result = count(doc);
        System.out.println(result);
      }
             // indicates a well-formedness or other error
      catch (JDOMException e) { 
        System.out.println(args[i] 
         + " is not a well formed XML document.");
        System.out.println(e.getMessage());
      }
      
    }   
  
  }  

  private static int numCharacters             = 0;
  private static int numComments               = 0;
  private static int numElements               = 0;
  private static int numAttributes             = 0;
  private static int numProcessingInstructions = 0;
      
  public static String count(Document doc) {

    numCharacters = 0;
    numComments = 0;
    numElements = 0;
    numAttributes = 0;
    numProcessingInstructions = 0;  

    List children = doc.getContent();
    Iterator iterator = children.iterator();
    while (iterator.hasNext()) {
      Object o = iterator.next();
      if (o instanceof Element) {
        numElements++;
        count((Element) o);
      }
      else if (o instanceof Comment) numComments++;
      else if (o instanceof ProcessingInstruction) {
        numProcessingInstructions++;   
      }
    }
    
    String result = numElements + "\t" + numAttributes + "\t" 
     + numComments + "\t" + numProcessingInstructions + "\t" 
     + numCharacters;
    return result;
       
  }     

  public static void count(Element element) {

    List attributes = element.getAttributes();
    numAttributes += attributes.size();
    List children = element.getContent();
    Iterator iterator = children.iterator();
    while (iterator.hasNext()) {
      Object o = iterator.next();
      if (o instanceof Element) {
        numElements++;
        count((Element) o);
      }
      else if (o instanceof Comment) numComments++;
      else if (o instanceof ProcessingInstruction) {
        numProcessingInstructions++;   
      }
      else if (o instanceof CDATA) {
        CDATA c = (CDATA) o;
        String s = c.getText();
        numCharacters += s.length();
      }   
      else if (o instanceof Text) {
        Text t = (Text) o;
        String s = t.getText();
        numCharacters += s.length();
      }   
    }
        
  }  

}
</code></pre><hr color="red" style="color: red" size="2"><h2>XCount Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java XCount shortlogs.xml hotcop.xml
File    Elements        Attributes      Comments        Processing Instructions
Characters
shortlogs.xml:  30      0       0       0       736
hotcop.xml:     11      8       2       1       95
</code></pre><hr color="red" style="color: red" size="2"><h2>Handling Attributes in JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Most attribute work can be done through the
 <code>Element</code> class.
</p></li>
<li><p>Each attribute is represented as an <code>Attribute</code> object</p></li>
<li><p>Each <code>Attribute</code> has:
<ul>
<li><p>A local name, a <code>String</code></p></li>
<li><p>A value, a <code>String</code></p></li>
<li><p>A <code>Namespace</code> object (which may be 
<code>Namespace.NO_NAMESPACE</code>)</p></li>
<li><p>A parent <code>Element</code> object (which may be 
<code>null</code>)</p></li>
<li><p>A  <code>type</code> code such as  
<code>Attribute.CDATA_ATTRIBUTE</code>,
<code>Attribute.ID_ATTRIBUTE</code>, or <code>Attribute.UNDECLARED_ATTRIBUTE</code>
)</p></li>
</ul>
Everything else can be determined from these five items.
</p></li>
<li><p>JDOM enforces restrictions on attribute names and values; e.g.
name may not contain white space</p></li>
<li><p>Attributes are stored in a  <code>java.util.List</code>
in the <code>Element</code> that contains them</p></li>
<li><p>This list only contains <code>Attribute</code> objects.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Attribute Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class Attribute implements Serializable, Cloneable {

    protected String    name;
    protected Namespace namespace;
    protected String    value;
    protected Element   parent;

    protected Attribute()
    public    Attribute(String name, String value)
    public    Attribute(String name, String value, Namespace namespace)

    public String    getName()
    public Attribute setName(String name)
    public String    getQualifiedName()
    public String    getNamespacePrefix()
    public String    getNamespaceURI()
    public Namespace getNamespace()
    public String    getValue()
    public Attribute setValue(String value)
    protected Attribute setParent(Element parent)
    
    public Attribute detach()

    /////////////////////////////////////////////////////////////////
    // Basic Utility Methods
    /////////////////////////////////////////////////////////////////

    public final String  toString()
    public final boolean equals(Object ob)
    public final int     hashCode()
    public final Object  clone()

    /////////////////////////////////////////////////////////////////
    // Convenience Methods below here
    /////////////////////////////////////////////////////////////////

    public int     getIntValue() throws DataConversionException
    public long    getLongValue() throws DataConversionException
    public float   getFloatValue() throws DataConversionException
    public double  getDoubleValue() throws DataConversionException
    public boolean getBooleanValue() throws DataConversionException
    
}</code></pre><hr color="red" style="color: red" size="2"><h2>XLinkSpider with JDOM</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import java.util.*;
import org.jdom.*;
import org.jdom.input.SAXBuilder;


public class BasicXLinkSpider {

  private static SAXBuilder builder = new SAXBuilder();
  
  private static Vector visited = new Vector();
  
  private static int maxDepth = 5;
  private static int currentDepth = 0; 
  
  public static void listURIs(String systemID) {
    
    currentDepth++;
    try {
      if (currentDepth &lt; maxDepth) {

        Document document = builder.build(systemID); 
                
        Vector uris = new Vector();
        // search the document for uris, 
        // store them in vector, and print them
        searchForURIs(document.getRootElement(), uris);
    
        Enumeration e = uris.elements();
        while (e.hasMoreElements()) {
          String uri = (String) e.nextElement();
          visited.addElement(uri);
          listURIs(uri); 
        }
      
      }
    
    }
    catch (JDOMException ex) {
      // couldn't load the document, 
      // probably not well-formed XML, skip it 
    }
    catch (IOException ex) {
      // couldn't load the document, 
      // probably broken link, skip it 
    }
    finally { 
      currentDepth--;
      System.out.flush();     
    }
      
  }
  
  private static Namespace xlink 
   = Namespace.getNamespace("http://www.w3.org/1999/xlink");
  
  // use recursion 
  public static void searchForURIs(Element element, Vector uris) {
    
    // look for XLinks in this element
    String uri = element.getAttributeValue("href", xlink);
    if (uri != null &amp;&amp; !uri.equals("") 
     &amp;&amp; !visited.contains(uri) &amp;&amp; !uris.contains(uri)) {
      System.out.println(uri);
      uris.addElement(uri);
    }
    
    // process child elements recursively
    List children = element.getChildren();
    Iterator iterator = children.iterator();
    while (iterator.hasNext()) {
      searchForURIs((Element) iterator.next(), uris); 
    }
    
  }

  public static void main(String[] args) {
    
    if (args.length == 0) {
      System.out.println("Usage: java BasicXLinkSpider URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      System.err.println(args[i]); 
      listURIs(args[i]);
    } // end for
  
  } // end main

} // end BasicXLinkSpider</code></pre><hr color="red" style="color: red" size="2"><h2>IDTagger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.IOException;
import org.jdom.*;
import org.jdom.input.SAXBuilder;
import org.jdom.output.XMLOutputter;
import java.util.*;


public class JDOMIDTagger {

  private static int id = 1;

  public static void processElement(Element element) {

    if (element.getAttribute("ID") == null) {
      element.setAttribute(new Attribute("ID", "_" + id));
      id = id + 1; 
    }
    
    // recursion
    List children = element.getChildren();
    Iterator iterator = children.iterator();
    while (iterator.hasNext()) {
      processElement((Element) iterator.next());   
    }
    
  }

  public static void main(String[] args) {
     
    SAXBuilder builder = new SAXBuilder();
    
    for (int i = 0; i &lt; args.length; i++) {
        
      try {
        // Read the entire document into memory
        Document document = builder.build(args[i]); 
       
        processElement(document.getRootElement());
        
        // now we serialize the document...
        XMLOutputter serializer = new XMLOutputter(); 
        serializer.output(document, System.out);
        System.out.flush();	        
      }
      catch (JDOMException e) {
        System.err.println(e);
        continue; 
      }
      catch (IOException e) {
        System.err.println(e);
        continue; 
      }
      
    }
  
  } // end main

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Before IDTagger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0"?&gt;
&lt;backslash xmlns:backslash="http://slashdot.org/backslash.dtd"&gt; 
  &lt;story&gt;
      &lt;title&gt;The Onion to buy the New York Times&lt;/title&gt;
      &lt;url&gt;http://slashdot.org/articles/00/02/19/1128240.shtml&lt;/url&gt;    
      &lt;time&gt;2000-02-19 17:25:15&lt;/time&gt;    
      &lt;author&gt;CmdrTaco&lt;/author&gt;    
      &lt;department&gt;stuff-to-read&lt;/department&gt;    
      &lt;topic&gt;media&lt;/topic&gt;    
      &lt;comments&gt;20&lt;/comments&gt;    
      &lt;section&gt;articles&lt;/section&gt;    
      &lt;image&gt;topicmedia.gif&lt;/image&gt;  &lt;/story&gt; 
  &lt;story&gt;
    &lt;title&gt;Al Gore's Webmaster Answers Your Questions&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/interviews/00/02/19/0932207.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 17:00:52&lt;/time&gt;
    &lt;author&gt;Roblimo&lt;/author&gt;
    &lt;department&gt;political-process-online&lt;/department&gt;
    &lt;topic&gt;usa&lt;/topic&gt;
    &lt;comments&gt;49&lt;/comments&gt;
    &lt;section&gt;interviews&lt;/section&gt;
    &lt;image&gt;topicus.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;Open Source Africa&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/19/1016216.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 16:05:58&lt;/time&gt;
    &lt;author&gt;emmett&lt;/author&gt;
    &lt;department&gt;songs-by-toto&lt;/department&gt;
    &lt;topic&gt;linux&lt;/topic&gt;
    &lt;comments&gt;50&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topiclinux.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;Microsoft Funded by NSA, Helps Spy on Win Users?&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/19/0750247.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 14:07:04&lt;/time&gt;
    &lt;author&gt;Roblimo&lt;/author&gt;
    &lt;department&gt;deep-dark-conspiracy-theories&lt;/department&gt;
    &lt;topic&gt;microsoft&lt;/topic&gt;
    &lt;comments&gt;154&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topicms.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;X-Men Trailer Released&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/18/0829209.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 13:47:06&lt;/time&gt;
    &lt;author&gt;emmett&lt;/author&gt;
    &lt;department&gt;mutant&lt;/department&gt;
    &lt;topic&gt;movies&lt;/topic&gt;
    &lt;comments&gt;70&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topicmovies.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;Connell Replies to "Grok" Comments&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/18/202240.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 05:01:37&lt;/time&gt;
    &lt;author&gt;Hemos&lt;/author&gt;
    &lt;department&gt;replying-to-things&lt;/department&gt;
    &lt;topic&gt;linux&lt;/topic&gt;
    &lt;comments&gt;197&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topiclinux.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;etoy.com Returns&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/yro/00/02/18/1739216.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 02:35:06&lt;/time&gt;
    &lt;author&gt;nik&lt;/author&gt;
    &lt;department&gt;NP:-gimme-shelter&lt;/department&gt;
    &lt;topic&gt;internet&lt;/topic&gt;
    &lt;comments&gt;77&lt;/comments&gt;
    &lt;section&gt;yro&lt;/section&gt;
    &lt;image&gt;topicinternet.jpg&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;New Propaganda Series: Rebirth&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/18/205232.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-19 01:05:26&lt;/time&gt;
    &lt;author&gt;Hemos&lt;/author&gt;
    &lt;department&gt;as-pretty-as-always&lt;/department&gt;
    &lt;topic&gt;graphics&lt;/topic&gt;
    &lt;comments&gt;120&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topicgraphics3.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;Giving Back&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/features/00/02/18/1631224.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-18 22:27:26&lt;/time&gt;
    &lt;author&gt;emmett&lt;/author&gt;
    &lt;department&gt;salvation-army&lt;/department&gt;
    &lt;topic&gt;news&lt;/topic&gt;
    &lt;comments&gt;122&lt;/comments&gt;
    &lt;section&gt;features&lt;/section&gt;
    &lt;image&gt;topicnews.gif&lt;/image&gt;
  &lt;/story&gt;
 &lt;story&gt;
    &lt;title&gt;Connectix Considering Open Sourcing VGS?&lt;/title&gt;
    &lt;url&gt;http://slashdot.org/articles/00/02/18/1050225.shtml&lt;/url&gt;
    &lt;time&gt;2000-02-18 20:46:20&lt;/time&gt;
    &lt;author&gt;emmett&lt;/author&gt;
    &lt;department&gt;grain-of-salt&lt;/department&gt;
    &lt;topic&gt;news&lt;/topic&gt;
    &lt;comments&gt;93&lt;/comments&gt;
    &lt;section&gt;articles&lt;/section&gt;
    &lt;image&gt;topicnews.gif&lt;/image&gt;
  &lt;/story&gt;
&lt;/backslash&gt;</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/slashdot.xml">View Input in Browser</a><hr color="red" style="color: red" size="2"><h2>After IDTagger</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;backslash ID="_1"&gt;
  &lt;story ID="_2"&gt;
    &lt;title ID="_3"&gt;The Onion to buy the New York Times&lt;/title&gt;
    &lt;url ID="_4"&gt;http://slashdot.org/articles/00/02/19/1128240.shtml&lt;/url&gt;
    &lt;time ID="_5"&gt;2000-02-19 17:25:15&lt;/time&gt;
    &lt;author ID="_6"&gt;CmdrTaco&lt;/author&gt;
    &lt;department ID="_7"&gt;stuff-to-read&lt;/department&gt;
    &lt;topic ID="_8"&gt;media&lt;/topic&gt;
    &lt;comments ID="_9"&gt;20&lt;/comments&gt;
    &lt;section ID="_10"&gt;articles&lt;/section&gt;
    &lt;image ID="_11"&gt;topicmedia.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_12"&gt;
    &lt;title ID="_13"&gt;Al Gore's Webmaster Answers Your Questions&lt;/title&gt;
    &lt;url ID="_14"&gt;http://slashdot.org/interviews/00/02/19/0932207.shtml&lt;/url&gt;
    &lt;time ID="_15"&gt;2000-02-19 17:00:52&lt;/time&gt;
    &lt;author ID="_16"&gt;Roblimo&lt;/author&gt;
    &lt;department ID="_17"&gt;political-process-online&lt;/department&gt;
    &lt;topic ID="_18"&gt;usa&lt;/topic&gt;
    &lt;comments ID="_19"&gt;49&lt;/comments&gt;
    &lt;section ID="_20"&gt;interviews&lt;/section&gt;
    &lt;image ID="_21"&gt;topicus.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_22"&gt;
    &lt;title ID="_23"&gt;Open Source Africa&lt;/title&gt;
    &lt;url ID="_24"&gt;http://slashdot.org/articles/00/02/19/1016216.shtml&lt;/url&gt;
    &lt;time ID="_25"&gt;2000-02-19 16:05:58&lt;/time&gt;
    &lt;author ID="_26"&gt;emmett&lt;/author&gt;
    &lt;department ID="_27"&gt;songs-by-toto&lt;/department&gt;
    &lt;topic ID="_28"&gt;linux&lt;/topic&gt;
    &lt;comments ID="_29"&gt;50&lt;/comments&gt;
    &lt;section ID="_30"&gt;articles&lt;/section&gt;
    &lt;image ID="_31"&gt;topiclinux.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_32"&gt;
    &lt;title ID="_33"&gt;Microsoft Funded by NSA, Helps Spy on Win Users?&lt;/title&gt;
    &lt;url ID="_34"&gt;http://slashdot.org/articles/00/02/19/0750247.shtml&lt;/url&gt;
    &lt;time ID="_35"&gt;2000-02-19 14:07:04&lt;/time&gt;
    &lt;author ID="_36"&gt;Roblimo&lt;/author&gt;
    &lt;department ID="_37"&gt;deep-dark-conspiracy-theories&lt;/department&gt;
    &lt;topic ID="_38"&gt;microsoft&lt;/topic&gt;
    &lt;comments ID="_39"&gt;154&lt;/comments&gt;
    &lt;section ID="_40"&gt;articles&lt;/section&gt;
    &lt;image ID="_41"&gt;topicms.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_42"&gt;
    &lt;title ID="_43"&gt;X-Men Trailer Released&lt;/title&gt;
    &lt;url ID="_44"&gt;http://slashdot.org/articles/00/02/18/0829209.shtml&lt;/url&gt;
    &lt;time ID="_45"&gt;2000-02-19 13:47:06&lt;/time&gt;
    &lt;author ID="_46"&gt;emmett&lt;/author&gt;
    &lt;department ID="_47"&gt;mutant&lt;/department&gt;
    &lt;topic ID="_48"&gt;movies&lt;/topic&gt;
    &lt;comments ID="_49"&gt;70&lt;/comments&gt;
    &lt;section ID="_50"&gt;articles&lt;/section&gt;
    &lt;image ID="_51"&gt;topicmovies.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_52"&gt;
    &lt;title ID="_53"&gt;Connell Replies to "Grok" Comments&lt;/title&gt;
    &lt;url ID="_54"&gt;http://slashdot.org/articles/00/02/18/202240.shtml&lt;/url&gt;
    &lt;time ID="_55"&gt;2000-02-19 05:01:37&lt;/time&gt;
    &lt;author ID="_56"&gt;Hemos&lt;/author&gt;
    &lt;department ID="_57"&gt;replying-to-things&lt;/department&gt;
    &lt;topic ID="_58"&gt;linux&lt;/topic&gt;
    &lt;comments ID="_59"&gt;197&lt;/comments&gt;
    &lt;section ID="_60"&gt;articles&lt;/section&gt;
    &lt;image ID="_61"&gt;topiclinux.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_62"&gt;
    &lt;title ID="_63"&gt;etoy.com Returns&lt;/title&gt;
    &lt;url ID="_64"&gt;http://slashdot.org/yro/00/02/18/1739216.shtml&lt;/url&gt;
    &lt;time ID="_65"&gt;2000-02-19 02:35:06&lt;/time&gt;
    &lt;author ID="_66"&gt;nik&lt;/author&gt;
    &lt;department ID="_67"&gt;NP:-gimme-shelter&lt;/department&gt;
    &lt;topic ID="_68"&gt;internet&lt;/topic&gt;
    &lt;comments ID="_69"&gt;77&lt;/comments&gt;
    &lt;section ID="_70"&gt;yro&lt;/section&gt;
    &lt;image ID="_71"&gt;topicinternet.jpg&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_72"&gt;
    &lt;title ID="_73"&gt;New Propaganda Series: Rebirth&lt;/title&gt;
    &lt;url ID="_74"&gt;http://slashdot.org/articles/00/02/18/205232.shtml&lt;/url&gt;
    &lt;time ID="_75"&gt;2000-02-19 01:05:26&lt;/time&gt;
    &lt;author ID="_76"&gt;Hemos&lt;/author&gt;
    &lt;department ID="_77"&gt;as-pretty-as-always&lt;/department&gt;
    &lt;topic ID="_78"&gt;graphics&lt;/topic&gt;
    &lt;comments ID="_79"&gt;120&lt;/comments&gt;
    &lt;section ID="_80"&gt;articles&lt;/section&gt;
    &lt;image ID="_81"&gt;topicgraphics3.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_82"&gt;
    &lt;title ID="_83"&gt;Giving Back&lt;/title&gt;
    &lt;url ID="_84"&gt;http://slashdot.org/features/00/02/18/1631224.shtml&lt;/url&gt;
    &lt;time ID="_85"&gt;2000-02-18 22:27:26&lt;/time&gt;
    &lt;author ID="_86"&gt;emmett&lt;/author&gt;
    &lt;department ID="_87"&gt;salvation-army&lt;/department&gt;
    &lt;topic ID="_88"&gt;news&lt;/topic&gt;
    &lt;comments ID="_89"&gt;122&lt;/comments&gt;
    &lt;section ID="_90"&gt;features&lt;/section&gt;
    &lt;image ID="_91"&gt;topicnews.gif&lt;/image&gt;
  &lt;/story&gt;
  &lt;story ID="_92"&gt;
    &lt;title ID="_93"&gt;Connectix Considering Open Sourcing VGS?&lt;/title&gt;
    &lt;url ID="_94"&gt;http://slashdot.org/articles/00/02/18/1050225.shtml&lt;/url&gt;
    &lt;time ID="_95"&gt;2000-02-18 20:46:20&lt;/time&gt;
    &lt;author ID="_96"&gt;emmett&lt;/author&gt;
    &lt;department ID="_97"&gt;grain-of-salt&lt;/department&gt;
    &lt;topic ID="_98"&gt;news&lt;/topic&gt;
    &lt;comments ID="_99"&gt;93&lt;/comments&gt;
    &lt;section ID="_100"&gt;articles&lt;/section&gt;
    &lt;image ID="_101"&gt;topicnews.gif&lt;/image&gt;
  &lt;/story&gt;
&lt;/backslash&gt;
</code></pre><a xmlns:xinclude="http://www.w3.org/2001/XInclude" href="examples/idtagged.xml">View Output in Browser</a><hr color="red" style="color: red" size="2"><h2>Handling Entities in JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p>Unparsed entities really aren't handled at all.</p></li>
 <li><p>Most of the time, the parser resolves general entity references 
 and you never see them.</p></li>
 <li><p>If the parser doesn't resolve a general entity reference,
 an <code>EntityRef</code> object will be left in the tree.</p></li>
 <li><p>When writing, the outputter outputs entity references but not
 the entity's content.</p></li>
 <li><p>This one is still being thought out.</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The EntityRef Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class EntityRef implements Serializable, Cloneable {

    protected String   name;
    protected String   publicID;
    protected String   systemID;
    protected Element  parent;
    protected Document document;

    protected EntityRef()
    public EntityRef(String name)
    public EntityRef(String name, String publicID, String systemID)
    
    public EntityRef detach()
    
    public Document  getDocument()
    public String    getName()
    public Element   getParent()
    public String    getPublicID() 
    public String    getSystemID()

    protected EntityRef setParent(Element parent)
    public    EntityRef setName(String newPublicID)
    public    EntityRef setPublicID(String newPublicID)
    public    EntityRef setSystemID(String newSystemID)

    public        Object  clone()
    public final  boolean equals(Object o)
    public final  int     hashCode()
    public        String  toString()
    
}
</code></pre><hr color="red" style="color: red" size="2"><h2>Handling Comments in JDOM</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>A <code>Comment</code> object 
represents a comment like this example from the XML 1.0 spec:

<pre><code>&lt;!--* N.B. some readers (notably JC) find the following
paragraph awkward and redundant.  I agree it's logically redundant:
it *says* it is summarizing the logical implications of
matching the grammar, and that means by definition it's
logically redundant.  I don't think it's rhetorically
redundant or unnecessary, though, so I'm keeping it.  It
could however use some recasting when the editors are feeling
stronger. -MSM *--&gt;
</code></pre>
</p></li>
<li><p>No children</p></li>
<li><p>JDOM checks the content to make sure it's legal (i.e.
does not contain a double-hyphen)</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Comment Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class Comment implements Serializable, Cloneable {

    protected String text;

    protected Comment() 
    public    Comment(String text)
    
    public String     getText()
    public void       setText(String text)
    public Comment    detach()
    public Document   getDocument()
    protected Comment setDocument(Document document)
    public Element    getParent()
    protected Comment setParent(Element parent)
    
    public final String  toString()
    public final boolean equals(Object ob)
    public final int     hashCode()
    public final Object  clone()

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Comment Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.input.SAXBuilder;
import java.util.*;


public class CommentReader {

  public static void main(String[] args) {
     
    SAXBuilder builder = new SAXBuilder();
    
    for (int i = 0; i &lt; args.length; i++) {
      try {
        // Read the entire document into memory
        Document doc = builder.build(args[i]);
        List content = doc.getContent();
        Iterator iterator = content.iterator();
        while (iterator.hasNext()) {
          Object o = iterator.next();
          if (o instanceof Comment) {
            Comment c = (Comment) o;
            System.out.println(c.getText());     
            System.out.println();     
          }
          else if (o instanceof Element) {
            processElement((Element) o);   
          }
        }
      }
      catch (JDOMException e) {
        System.err.println(e); 
        e.getCause().printStackTrace(); 
      }
      
    }
  
  } // end main

  // note use of recursion
  public static void processElement(Element element) {
    
    List content = element.getContent();
    Iterator iterator = content.iterator();
    while (iterator.hasNext()) {
      Object o = iterator.next();
      if (o instanceof Comment) {
        Comment c = (Comment) o;
        System.out.println(c.getText());     
        System.out.println();     
      }
      else if (o instanceof Element) {
        processElement((Element) o);   
      }
    } // end while
    
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>CommentReader Output</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java CommentReader hotcop.xml
 The publisher is actually Polygram but I needed
       an example of a general entity reference.

 You can tell what album I was
     listening to when I wrote this example
</code></pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">Or try http://www.w3.org/TR/1998/REC-xml-19980210.xml 
for more interesting output.
</p><hr color="red" style="color: red" size="2"><h2>ProcessingInstruction Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a processing instruction like

<p><code>&lt;?robots index="yes" follow="no"?&gt;</code></p>
</p></li>
<li><p>No children</p></li>
<li><p>Some have pseudo-attributes; some don't:

<pre><code>&lt;?php 
  mysql_connect("database.unc.edu", "clerk", "password"); 
  $result = mysql("music", "SELECT LastName, FirstName  
    FROM Employees ORDER BY LastName, FirstName"); 
  $i = 0;
  while ($i &lt; mysql_numrows ($result)) {
     $fields = mysql_fetch_row($result);
     echo "&lt;person&gt;$fields[1] $fields[0] &lt;/person&gt;\r\n";
     $i++;
  }
  mysql_close();
?&gt;
</code></pre></p></li>
<li><p>A <code>ProcessingInstruction</code> is represented as either
<ul>
  <li><p>Target and Value</p></li>
  <li><p>Target and Pseudo-attributes</p></li>
</ul>
</p></li>
<li><p>JDOM checks the contents of each <code>ProcessingInstruction</code>
object for well-formedness</p></li>

</ul><hr color="red" style="color: red" size="2"><h2>The ProcessingInstruction Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class ProcessingInstruction implements Serializable, Cloneable {

    protected String   target;
    protected String   rawData;
    protected Map      mapData;
    protected Element  parent;
    
    protected ProcessingInstruction()
    public    ProcessingInstruction(String target, Map data)
    public    ProcessingInstruction(String target, String data)
    
    public String                getTarget()
    public String                getData()
    public ProcessingInstruction setData(String data)
    public ProcessingInstruction setData(Map data)
    public String                getValue(String name)
    public ProcessingInstruction setValue(String name, String value)
    public boolean               removeValue(String name)

    public    Document              getDocument()
    protected ProcessingInstruction setDocument(Document document)
    public    Element               getParent()
    protected ProcessingInstruction setParent(Element parent)
    public ProcessingInstruction detach()

    public final String  toString()
    public final boolean equals(Object ob)
    public final int     hashCode()
    public final Object  clone()
    
}</code></pre><hr color="red" style="color: red" size="2"><h2>XLinkSpider that Respects the robots Processing Instruction</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import java.util.*;
import org.jdom.*;
import org.jdom.input.SAXBuilder;


public class AdvancedSpider {

  private static SAXBuilder builder = new SAXBuilder();
  
  private static Vector visited = new Vector();
  
  private static int maxDepth = 5;
  private static int currentDepth = 0; 
  
  public static void listURIs(String systemID) {
    
    currentDepth++;
    try {
      if (currentDepth &lt; maxDepth) {

        Document document = builder.build(systemID); 
                
        // check to see if we're allowed to spider
        boolean index = true;
        boolean follow = true;
        ProcessingInstruction robots = findRobots(document);
        if (robots != null) {
          String indexValue = robots.getValue("index");
          if (indexValue.equalsIgnoreCase("no")) index = false;
          String followValue = robots.getValue("follow");
          if (followValue.equalsIgnoreCase("no")) follow = false;
        }
        Vector uris = new Vector();
        // search the document for uris, 
        // store them in vector, and print them
        if (follow) searchForURIs(document.getRootElement(), uris);
    
        Enumeration e = uris.elements();
        while (e.hasMoreElements()) {
          String uri = (String) e.nextElement();
          visited.addElement(uri);
          if (index) listURIs(uri); 
        }
      
      }
    
    }
    catch (JDOMException e) {
      // couldn't load the document, 
      // probably not well-formed XML, skip it 
    }
    catch (IOException ex) {
      // couldn't load the document, 
      // probably broken link, skip it 
    }
    finally { 
      currentDepth--;
      System.out.flush();     
    }
      
  }
  
  private static ProcessingInstruction findRobots(Document doc) {
    List content = doc.getContent();
    Iterator children = content.iterator();
    while (children.hasNext()) {
       Object o = children.next(); 
       if (o instanceof Element) return null; 
       if (o instanceof ProcessingInstruction) {
          ProcessingInstruction candidate = (ProcessingInstruction) o; 
          if (candidate.getTarget().equals("robots")) return candidate;
       }
    }
    
    return null;
  }
  
  private static Namespace xlink 
   = Namespace.getNamespace("http://www.w3.org/1999/xlink");
  
  // use recursion 
  public static void searchForURIs(Element element, Vector uris) {
    
    // look for XLinks in this element
    String uri = element.getAttributeValue("href", xlink);
    if (uri != null &amp;&amp; !uri.equals("") 
     &amp;&amp; !visited.contains(uri) &amp;&amp; !uris.contains(uri)) {
      System.out.println(uri);
      uris.addElement(uri);
    }
    
    // process child elements recursively
    List children = element.getChildren();
    Iterator iterator = children.iterator();
    while (iterator.hasNext()) {
      searchForURIs((Element) iterator.next(), uris); 
    }
    
  }

  public static void main(String[] args) {
    
    if (args.length == 0) {
      System.out.println("Usage: java AdvancedSpider URL1 URL2..."); 
    } 
      
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      System.err.println(args[i]); 
      listURIs(args[i]);
    } // end for
  
  } // end main

} // end AdvancedSpider</code></pre><hr color="red" style="color: red" size="2"><h2>Handling Namespaces</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>JDOM is fully namespace aware</p></li>
  <li><p>Namespaces are represented by instances of
  the <code>Namespace</code> class rather than by attributes or raw strings</p></li> 
  <li><p>Flyweight design pattern saves memory.</p></li>
  <li><p>Always ask for elements and attributes by local names and namespace URIs</p></li>
  <li><p>Elements and attributes that are not in any namespace can be asked for by 
  local name alone</p></li>
  <li><p>Never identify an element or attribute by qualified name</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Namespace Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public final class Namespace {

  public static final Namespace NO_NAMESPACE = new Namespace("", "");
  public static final Namespace XML_NAMESPACE = 
   new Namespace("xml", "http://www.w3.org/XML/1998/namespace");

  // factory methods
  public static Namespace getNamespace(String prefix, String uri)
  public static Namespace getNamespace(String uri)

  // getter methods
  public String  getPrefix()
  public String  getURI()

  // utility methods
  public boolean equals(Object ob)
  public String  toString()
  public int     hashCode()

}
</code></pre><hr color="red" style="color: red" size="2"><h2>DocType Nodes</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Represents a document type declaration</p></li>
<li><p>Has no children</p></li> 
</ul><hr color="red" style="color: red" size="2"><h2>The DocType class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class DocType implements Serializable, Cloneable {

  protected String   elementName;
  protected String   publicID;
  protected String   systemID;
  protected Document document;
  protected String   internalSubset;

  protected DocType()
  public DocType(String elementName, String publicID, 
   String systemID)
  public DocType(String elementName, String systemID)
  public DocType(String elementName)

  public String   getElementName()
  public DocType  setElementName(String elementName)
  public String   getPublicID()
  public DocType  setPublicID(String publicID)
  public String   getSystemID()
  public DocType  setSystemID(String systemID)
  public Document getDocument()
  public void     setInternalSubset(String newData)

  protected DocType setDocument(Document document)

  public String getInternalSubset()

  public       String  toString()
  public final boolean equals(Object o)
  public final int     hashCode()

  public Object clone()

}</code></pre><hr color="red" style="color: red" size="2"><h2>Example of the DocType Class</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Verify that a document is correct XHTML</p></li>
  <li><p>From the <a href="http://www.w3.org/TR/xhtml1/#docconf">XHTML 1.0 spec:</a>
  <blockquote>
<ol>
<li><p>
<p>It must validate against one of the three DTDs found in <a href="http://www.w3.org/TR/xhtml1/#dtds">Appendix&nbsp;A</a>.</p>
</p></li>

<li><p>
<p>The root element of the document must be <code>
&lt;html&gt;</code>.</p>
</p></li>

<li><p>
<p>The root element of the document must designate the XHTML
namespace using the <code>xmlns</code> attribute <a href="http://www.w3.org/TR/xhtml1#ref-xmlns">[XMLNAMES]</a>. 
The namespace for XHTML is
defined to be 
<code>http://www.w3.org/1999/xhtml</code>.</p>
</p></li>

<li><p>
<p>There must be a DOCTYPE declaration in the document prior to
the root element. The public identifier included in
the DOCTYPE declaration must reference one of the three DTDs
found in <a href="http://www.w3.org/TR/xhtml1/#dtds">Appendix&nbsp;A</a> using the respective
Formal Public Identifier. The system identifier may be changed to reflect
local system conventions.</p>

<pre><code>&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "DTD/xhtml1-strict.dtd"&gt;

&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "DTD/xhtml1-transitional.dtd"&gt;

&lt;!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
     "DTD/xhtml1-frameset.dtd"&gt;
</code></pre>
</p></li>
</ol>
</blockquote>
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>XHTMLValidator</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import java.io.*;
import org.jdom.*;
import org.jdom.input.SAXBuilder;


public class JDOMXHTMLValidator {

  public static void main(String[] args) {
    
    for (int i = 0; i &lt; args.length; i++) {
      validate(args[i]);
    }   
    
  }

  private static SAXBuilder builder = new SAXBuilder(true);
                                                 /*  ^^^^ */
                                              /* turn on validation  */
  
  // not thread safe
  public static void validate(String source) {
        
      Document document;
      try {
        document = builder.build(source); 
      }
      catch (JDOMException e) {  
        System.out.println("Error: " + e.getMessage()); 
        e.printStackTrace();
        return; 
      }
      
      // If we get this far, then the document is valid XML.
      // Check to see whether the document is actually XHTML        
      DocType doctype = document.getDocType();
    
      if (doctype == null) {
        System.out.println("No DOCTYPE"); 
        return;
      }

      String name     = doctype.getElementName();
      String systemID = doctype.getSystemID();
      String publicID = doctype.getPublicID();
      
      if (!name.equals("html")) {
        System.out.println("Incorrect root element name " + name); 
      }
    
      if (publicID == null
       || (!publicID.equals("-//W3C//DTD XHTML 1.0 Strict//EN")
           &amp;&amp; !publicID.equals("-//W3C//DTD XHTML 1.0 Transitional//EN")
           &amp;&amp; !publicID.equals("-//W3C//DTD XHTML 1.0 Frameset//EN"))) {
        System.out.println(source + " does not seem to use an XHTML 1.0 DTD");
      }
    
      // Check the namespace on the root element
      Element root = document.getRootElement();
      Namespace namespace = root.getNamespace();
      String prefix = namespace.getPrefix();
      String uri = namespace.getURI();
      if (!uri.equals("http://www.w3.org/1999/xhtml")) {
        System.out.println(source 
         + " does not properly declare the"
         + " http://www.w3.org/1999/xhtml namespace"
         + " on the root element");        
      }
      if (!prefix.equals("")) {
        System.out.println(source 
         + " does not use the empty prefix for XHTML");        
      }
    
  }

}</code></pre><hr color="red" style="color: red" size="2"><h2>Using the XHTMLValidator</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><tt>% java JDOMXHTMLValidator http://www.w3.org/TR/xhtml1
Error: File "http://www.w3.org/TR/DTD/xhtml1-strict.dtd" not found.: Error on 
line -1 of XML document: File "http://www.w3.org/TR/DTD/xhtml1-strict.dtd" not 
found.
org.jdom.JDOMException: File "http://www.w3.org/TR/DTD/xhtml1-strict.dtd" not 
found.: Error on line -1 of XML document: File 
"http://www.w3.org/TR/DTD/xhtml1-strict.dtd" not found.
        at org.jdom.input.SAXBuilder.build(SAXBuilder.java:227)
        at org.jdom.input.SAXBuilder.build(SAXBuilder.java:359)
        at XHTMLValidator.validate(XHTMLValidator.java:25)
        at XHTMLValidator.main(XHTMLValidator.java:11)
Root cause: org.jdom.JDOMException: Error on line -1 of XML document: File 
"http://www.w3.org/TR/DTD/xhtml1-strict.dtd" not found.
        at org.jdom.input.SAXBuilder.build(SAXBuilder.java:228)
        at org.jdom.input.SAXBuilder.build(SAXBuilder.java:359)
        at XHTMLValidator.validate(XHTMLValidator.java:25)
        at XHTMLValidator.main(XHTMLValidator.java:11)
</tt></pre><hr color="red" style="color: red" size="2"><h2>The Verifier Class</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Checks a variety of strings to see if they're legal for particular uses in XML
  as specified by XML 1.0 and Namespaces in XML.
  </p></li>
  <li><p>Mostly for internal parser use</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>The Verifier Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public final class Verifier {

    public static final String checkElementName(String name)
    public static final String checkAttributeName(String name)
    public static final String checkCharacterData(String text)
    public static final String checkNamespacePrefix(String prefix)
    public static final String checkNamespaceURI(String uri)
    public static final String checkProcessingInstructionTarget(String target)
    public static final String checkCommentData(String data)
 
    public static boolean isXMLCharacter(char c)
    public static boolean isXMLNameCharacter(char c)
    public static boolean isXMLNameStartCharacter(char c)
    public static boolean isXMLLetterOrDigit(char c)
    public static boolean isXMLLetter(char c)
    public static boolean isXMLCombiningChar(char c)
    public static boolean isXMLExtender(char c)
    public static boolean isXMLDigit(char c)

    public static final String checkNamespaceCollision(
     Namespace namespace, Namespace other)
    public static final String checkNamespaceCollision(
     Attribute attribute, Namespace other)
    public static final String checkNamespaceCollision(
     Namespace namespace, Element element)
    public static final String checkNamespaceCollision(
     Namespace namespace, Attribute attribute)
    public static final String checkNamespaceCollision(
     Namespace namespace, List list)

}</code></pre><hr color="red" style="color: red" size="2"><h2>JDOMException</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>A checked exception so you must catch it</p></li>
<li><p>Wraps other exceptions that are thrown during JDOM operations
like <code>SAXException</code></p></li>
<li><p>Root cause of exception (if any) is accessible through
the <code>getCause()</code> method: 
<p><code>public Throwable getCause()</code></p>
</p></li>

<li><p>Subclasses:
<ul>
<li><p><code>DataConversionException </code></p></li>
</ul>
</p></li>
<li><p><code>IllegalArgumentException</code> subclasses:
<ul>
<li><p><code>IllegalAddException </code></p></li>
<li><p><code>IllegalDataException </code></p></li>
<li><p><code>IllegalNameException </code></p></li>
<li><p><code>IllegalTargetException </code></p></li>
</ul>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOMException Class</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom;

public class JDOMException extends Exception {

    protected Throwable cause;

    public JDOMException()
    public JDOMException(String message) 
    public JDOMException(String message, Throwable rootCause)  
       
    public String    getMessage()
    public void      printStackTrace()
    public void      printStackTrace(PrintStream s)
    public void      printStackTrace(PrintWriter w)
    public Throwable getCause() 

}</code></pre><hr color="red" style="color: red" size="2"><h2>The org.jdom.output Package</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p><code>DOMOutputter</code></p></li>
 <li><p><code>SAXOutputter</code></p></li>
 <li><p><code>XMLOutputter</code></p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Serialization</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The process of taking an in-memory JDOM <code>Document</code> and converting it
  to a stream of characters that can be written onto an output stream</p></li>
  <li><p>The <code>org.jdom.output.XMLOutputter</code> class 
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>XMLOutputter</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>package org.jdom.output;

public class XMLOutputter implements Cloneable {

    public XMLOutputter()
    public XMLOutputter(String indent)
    public XMLOutputter(String indent, boolean newlines)
    public XMLOutputter(String indent, boolean newlines, String encoding)
    public XMLOutputter(XMLOutputter that)
    
    public void setLineSeparator(String separator)
    public void setNewlines(boolean newlines)
    public void setEncoding(String encoding)
    public void setOmitEncoding(boolean omitEncoding)
    public void setOmitDeclaration(boolean omitDeclaration)
    public void setExpandEmptyElements(boolean expandEmptyElements)
    public void setIndent(String indent)
    
    public void setTrimAllWhite(boolean trimAllWhite)
    public void setTextTrim(boolean textTrim)
    public void setTextNormalize(boolean textNormalize)

    protected String escapeAttributeEntities(String s) 
    protected String escapeElementEntities(String s)

    protected void indent(Writer out, int level) throws IOException
    protected Writer makeWriter(OutputStream out) 
     throws java.io.UnsupportedEncodingException
    protected Writer makeWriter(OutputStream out, String encoding) 
     throws java.io.UnsupportedEncodingException
    protected XMLOutputter.NamespaceStack createNamespaceStack()

    public void output(Document doc, OutputStream out) throws IOException
    public void output(Document doc, Writer writer) throws IOException
    public void output(Element element, Writer out) throws IOException
    public void output(Element element, OutputStream out)
    public void output(CDATA cdata, Writer out) throws IOException
    public void output(CDATA cdata, OutputStream out) throws IOException
    public void output(Comment comment, Writer out) throws IOException
    public void output(Comment comment, OutputStream out) throws IOException
    public void output(EntityRef entity, Writer out) throws IOException
    public void output(EntityRef entity, OutputStream out) throws IOException
    public void output(ProcessingInstruction processingInstruction, Writer out)
      throws IOException
    public void output(ProcessingInstruction processingInstruction, OutputStream out)
     throws IOException
    public void output(Text text, OutputStream out) throws IOException
    public void output(Text text, Writer out) throws IOException
     
    public void outputElementContent(Element element, OutputStream out)
    public void outputElementContent(Element element, Writer out)

    public String outputString(Document doc) throws IOException
    public String outputString(Element element) throws IOException
    public String outputString(CDATA cdata)
    public String outputString(Comment comment)
    public String outputString(DocType doctype)
    public String outputString(EntityRef entity)
    public String outputString(ProcessingInstruction pi)
    public String outputString(Text text)

    // internal printing methods
    protected void printDeclaration(Document doc, Writer out, String encoding) 
     throws IOException    
    protected void printDocType(DocType docType, Writer out) throws IOException
    protected void printComment(Comment comment, Writer out, int indentLevel) 
     throws IOException
    protected void printProcessingInstruction(ProcessingInstruction pi,
     Writer out) throws IOException
    protected void printCDATA(CDATA cdata, Writer out, int indentLevel) 
     throws IOException
    protected void printText(Text text, Writer out) throws IOException
    protected void printElement(Element element, Writer out,
     int indentLevel, NamespaceStack namespaces) throws IOException
    protected void printString(String s, Writer out) throws IOException
    protected void printEntity(Entity entity, Writer out) throws IOException
    protected void printNamespace(Namespace ns, Writer out) throws IOException
    protected void printAttributes(List attributes, Element parent, 
     Writer out, NamespaceStack namespaces)  
     throws IOException
    
    public int parseArgs(String[] args, int i) 
    
}</code></pre><hr color="red" style="color: red" size="2"><h2>Using the XMLOutputter Class Directly</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Configured with three variables passed to the constructor:
<dl>
  <dt><code>indent</code></dt><dd> a <code>String</code> added at each level
  of output; e.g. two spaces or a tab</dd>
  <dt><code>lineSeparator</code></dt><dd> the <code>String</code> to break lines with,
  no line breaking is performed if this is null or the empty string
  </dd>
  <dt><code>encoding</code></dt><dd>The name of the encoding to use for output; e.g.
  UTF-16 or ISO-8859-1</dd>
</dl>
</p></li>
<li><p>Options can be set with these 10 methods:
<pre><code>    public void setLineSeparator(String separator)
    public void setNewlines(boolean newlines)
    public void setEncoding(String encoding)
    public void setOmitEncoding(boolean omitEncoding)
    public void setOmitDeclaration(boolean omitDeclaration)
    public void setExpandEmptyElements(boolean expandEmptyElements)
    public void setIndent(String indent)
    public void setTextNormalize(boolean textNormalize)
    public void setTrimAllWhite(boolean trimAllWhite)
    public void setTextTrim(boolean textTrim)</code></pre>
</p></li>
<li><p>The <code>output()</code> method writes a <code>Document</code> onto a given 
<code>OutputStream</code>: 
<pre><code>  public void output(Document doc, OutputStream out) throws IOException
  public void output(Document doc, Writer writer) throws IOException</code></pre>
</p></li>
<li><p>There are also <code>output()</code> methods for other JDOM classes: 
<pre><code>  public void output(Element element, Writer out) throws IOException
  public void output(Element element, OutputStream out)
  public void outputElementContent(Element element, Writer out) throws IOException
  public void outputElementContent(Element element, OutputStream out) throws IOException
  public void output(CDATA cdata, Writer out) throws IOException
  public void output(CDATA cdata, OutputStream out) throws IOException
  public void output(Comment comment, Writer out) throws IOException
  public void output(Comment comment, OutputStream out) throws IOException
  public void output(Text text, Writer out) throws IOException
  public void output(Text text, OutputStream out) throws IOException
  public void output(Entity entity, Writer out) throws IOException
  public void output(Entity entity, OutputStream out) throws IOException
  public void output(ProcessingInstruction processingInstruction, Writer out)
    throws IOException
  public void output(ProcessingInstruction processingInstruction, OutputStream out)
   throws IOException </code></pre>
</p></li>
<li><p>Use the <code>outputString()</code> methods to 
store a document in a string:
<pre><code>    public String outputString(Document doc) throws IOException
    public String outputString(Element element) throws IOException
    public String outputString(CDATA cdata)
    public String outputString(Comment comment)
    public String outputString(DocType doctype)
    public String outputString(EntityRef entity)
    public String outputString(ProcessingInstruction pi)
    public String outputString(Text text)</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Using the XMLOutputter Class Indirectly</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>Configured by overriding protected methods:
<pre><code>  protected void printDeclaration(Document doc, Writer out, String encoding) 
  throws IOException    
  protected void printDocType(DocType docType, Writer out) throws IOException
  protected void printComment(Comment comment, Writer out, int indentLevel) 
   throws IOException
  protected void printProcessingInstruction(ProcessingInstruction pi,
   Writer out, int indentLevel) throws IOException
  protected void printCDATA(CDATA cdata, Writer out, int indentLevel) 
   throws IOException
  protected void printElement(Element element, Writer out,
   int indentLevel, NamespaceStack namespaces) throws IOException
  protected void printString(String s, Writer out) throws IOException
  protected void printText(Text t, Writer out) throws IOException
  protected void printEntityRef(EntityRef entity, Writer out) throws IOException
  protected void printNamespace(Namespace ns, Writer out) throws IOException
  protected void printAttributes(List attributes, Element parent, 
   Writer out, NamespaceStack namespaces)  
   throws IOException</code></pre>
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>JDOM based TagStripper</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>import org.jdom.*;
import org.jdom.output.XMLOutputter;
import org.jdom.input.SAXBuilder;
import java.io.*;
import java.util.*;


public class JDOMTagStripper extends XMLOutputter {

  public JDOMTagStripper() {
    super();
  }

  // Things we won't print at all
  protected void printDeclaration(Document doc, Writer out, String encoding) {}
  protected void printComment(Comment comment, Writer out, int indentLevel) {}
  protected void printDocType(DocType docType, Writer out) {}
  protected void printProcessingInstruction(ProcessingInstruction pi, 
   Writer out) {}
  protected void printNamespace(Namespace ns, Writer out) {}
  protected void printAttributes(List attributes, Writer out) {}
  
  protected void printElement(Element element, Writer out, 
   int indentLevel, NamespaceStack namespaces) throws IOException {
    
    List content = element.getContent();
    Iterator iterator = content.iterator();
    while (iterator.hasNext()) {
      Object o = iterator.next();
      if (o instanceof Text) {
        Text t = (Text) o;
        out.write(t.getText());
      }
      else if (o instanceof CDATA) {
        CDATA t = (CDATA) o;
        out.write(t.getText());
      }
      else if (o instanceof Element) {
        printElement((Element) o, out, indentLevel, namespaces);
      }
    }
          
  }

  // Could easily have put main() method in a separate class
  public static void main(String[] args) {
     
    if (args.length == 0) {
      System.out.println(
       "Usage: java TagStripper URL1 URL2..."); 
    } 
      
    JDOMTagStripper stripper = new JDOMTagStripper();
    SAXBuilder builder = new SAXBuilder();
    
    // start parsing... 
    for (int i = 0; i &lt; args.length; i++) {
      
      // command line should offer URIs or file names
      try {
        Document doc = builder.build(args[i]);
        stripper.output(doc, System.out);
      }
      catch (JDOMException e) { // a well-formedness error
        System.out.println(args[i] + " is not well formed.");
        System.out.println(e.getMessage());
      }
      catch (IOException e) { // a well-formedness error
        System.out.println(e.getMessage());
      }
      
    }  
  
  }

}
</code></pre><hr color="red" style="color: red" size="2"><h2>Output from a JDOM based TagStripper</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>% java TagStripper hotcop.xml

 Hot Cop

 Jacques Morali
 Henri Belolo
 Victor Willis
 Jacques Morali


   A &amp; M Records

 6:20
 1978
 Village People

</code></pre><hr color="red" style="color: red" size="2"><h2>Talking to DOM Programs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The process of taking an in-memory JDOM <code>Document</code> and converting it to 
  an <code>org.w3c.dom.Document</code> object</p></li>
  <li><p>The <code>org.jdom.output.DOMOutputter</code> class:
<pre><code>package org.jdom.output;

public class DOMOutputter {

  // Constructors
  public DOMOutputter()
  public DOMOutputter(String adapterClass)

  // Outputter methods
  public    org.w3c.dom.Document output(Document document) throws JDOMException
  protected org.w3c.dom.Element  output(Element element, org.w3c.dom.Document domDoc,
   NamespaceStack namespaces) throws JDOMException
  protected org.w3c.dom.Attr     output(Attribute attribute, org.w3c.dom.Document domDoc) 
   throws JDOMException

}</code></pre>  
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Talking to SAX Programs</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>The process of taking an in-memory JDOM <code>Document</code> and 
  walking its tree while firing off SAX events</p></li>
  <li><p>The <code>org.jdom.output.SAXOutputter</code> class:
  
<pre><code>package org.jdom.output;

public class SAXOutputter {
   
  public SAXOutputter()
  public SAXOutputter(ContentHandler contentHandler)
  public SAXOutputter(ContentHandler contentHandler,
   ErrorHandler errorHandler, DTDHandler dtdHandler,
   EntityResolver entityResolver)
  public SAXOutputter(ContentHandler contentHandler,
   ErrorHandler errorHandler, DTDHandler dtdHandler,
   EntityResolver entityResolver, LexicalHandler lexicalHandler)
   
  public void setContentHandler(ContentHandler contentHandler)
  public ContentHandler getContentHandler()
  public void setErrorHandler(ErrorHandler errorHandler)
  public ErrorHandler getErrorHandler()
  public void setDTDHandler(DTDHandler dtdHandler)
  public DTDHandler getDTDHandler()
  public void setEntityResolver(EntityResolver entityResolver)
  public EntityResolver getEntityResolver()
  public void setLexicalHandler(LexicalHandler lexicalHandler)
  public LexicalHandler getLexicalHandler()
  public void setDeclHandler(DeclHandler declHandler)
  public DeclHandler getDeclHandler()
  public void setReportNamespaceDeclarations(boolean declareNamespaces)
  public void setFeature(String name, boolean value)
   throws SAXNotRecognizedException, SAXNotSupportedException
  public boolean getFeature(String name)
   throws SAXNotRecognizedException, SAXNotSupportedException
  public void setProperty(String name, Object value)
   throws SAXNotRecognizedException, SAXNotSupportedException
  public Object getProperty(String name)
   throws SAXNotRecognizedException, SAXNotSupportedException
   
  public void output(Document document) throws JDOMException
  
  protected XMLReader createParser() throws Exception

}</code></pre>  
  
  </p></li>
</ul><hr color="red" style="color: red" size="2"><h2>What JDOM doesn't do</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>Documents larger than available memory</p></li>
  <li><p>Byte-for-byte faithful round trips</p></li>
  <li><p>DTDs</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>
      <cite><a href="http://www.cafeconleche.org/books/xmljava/">Processing XML with Java</a></cite>
       <img src="images/xmljavasmallcover.jpg" width="168" height="211" align="right" hspace="20"> 

     <ul> 
     <li><p>Elliotte Rusty Harold</p></li>
     <li><p>Addison Wesley, 2002</p></li>
     <li><p>Chapters 14-15:
     
      <ul>
              <li><p>Chapter 14, 
 JDOM: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch14.html">http://www.cafeconleche.org/books/xmljava/chapters/ch14.html</a></p></li>
              <li><p>Chapter 15, 
The JDOM Model: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch15.html">http://www.cafeconleche.org/books/xmljava/chapters/ch15.html</a></p></li>
</ul>
     
     </p></li>
     </ul>
     
   <br clear="all">
   </p></li>
 
  <li><p><a href="http://www.jdom.org/">JDOM Web Site, http://www.jdom.org/</a></p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Part VI: Pull Parsing</h2><blockquote xmlns:xinclude="http://www.w3.org/2001/XInclude">
	pull parsing is the way to go in the future.  
    The first 3 XML parsers (Lark, NXP, and expat) all were event-driven because... 
    er well that was 1996, can't exactly remember, seemed like a good idea at the time.
	</blockquote><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
	--Tim Bray on the  xml-dev mailing list,  Wednesday, September 18, 2002
	</p><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Come to my PullParsing seminar on Thursday
   </p></li>
   </ul><br xmlns:xinclude="http://www.w3.org/2001/XInclude" clear="all"><hr color="red" style="color: red" size="2"><h2>Part VII: TrAX</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>The Transformations API for XSLT</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>What is TrAX</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
 <li><p>A Java API
     for performing XSLT and (theoretically) other transforms. </p></li>
  <li><p>Sufficiently parser-independent that it can work with
     many different XSLT processors including Xalan and SAXON.</p></li>
  <li><p>Sufficiently model-independent that it can transform
     to and from
     XML streams, SAX event sequences, and DOM and JDOM trees. </p></li>
  <li><p>Standard part of JAXP,  bundled with Java 1.4
    and later.  </p></li>
    <li><p>Most current XSLT processors
    written in Java support TrAX including Xalan-J 2.x, jd.xslt,
    LotusXSL, and Saxon. The specific implementation included 
    with Java 1.4.0
    is Xalan-J 2.2D10. 
    </p></li>
 </ul><hr color="red" style="color: red" size="2"><h2>TrAX Classes</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    There are four main classes and interfaces in  TrAX, 
    all in the <code>javax.xml.transforms</code> package:
  </p><dl xmlns:xinclude="http://www.w3.org/2001/XInclude"><dt><span class="term"><code>Transformer</code></span></dt><dd><p>
        The class that represents the style sheet.
        It transforms a <code>Source</code> into a 
        <code>Result</code>.
      </p></dd><dt><span class="term"><code>TransformerFactory</code></span></dt><dd><p>
        A factory class that
        reads a stylesheet to produce a new
        <code>Transformer</code>.
      </p></dd><dt><span class="term"><code>Source</code></span></dt><dd><p>

        The interface that represents the input XML document to be
        transformed, whether presented as a DOM tree, an 
        <code>InputStream</code>, or a SAX event sequence.
      </p></dd>
      
      <dt><span class="term"><code>Result</code></span></dt><dd><p>
        The interface that represents the XML document produced by the
        transformation, whether generated as a DOM tree, an 
        <code>OutputStream</code>, or a SAX event sequence.
      </p></dd>
      
      
      </dl><hr color="red" style="color: red" size="2"><h2>The Process of a TrAX Transformation</h2><ol xmlns:xinclude="http://www.w3.org/2001/XInclude" type="1"><li><p>
    Load the  <code>TransformerFactory</code>

    with the static <code>TransformerFactory.newInstance()</code>
    factory method.
    </p></li><li><p>
    Form a <code>Source</code> object from the XSLT stylesheet.
    </p></li><li><p>
    Pass this <code>Source</code> object
    to the factory&#8217;s <code>newTransformer()</code>

    factory method to build a <code>Transformer</code>
    object.
    </p></li><li><p>
    Build a <code>Source</code> object
    from the input XML document you wish to transform.
    </p></li><li><p>
    Build a <code>Result</code> object
    for the target of the transformation.
    </p></li><li><p>

    Pass both the source and the result to
    the <code>Transformer</code>
    object&#8217;s <code>transform()</code> method.
    </p></li></ol><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    Steps four through six can be repeated for as many different
    input documents as you want. You can reuse the same 
    <code>Transformer</code> object repeatedly in
    series, though you can&#8217;t use it in multiple threads in
    parallel. 
  </p><hr color="red" style="color: red" size="2"><h2>TrAX Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">try {
  TransformerFactory xformFactory = TransformerFactory.newInstance();
  Source xsl = new StreamSource("stylesheet.xsl");
  Transformer stylesheet = xformFactory.newTransformer(xsl);

  Source request  = new StreamSource(in);
  Result response = new StreamResult(out);
  stylesheet.transform(request, response);
}
catch (TransformerException e) {
  System.err.println(e); 
}</pre><hr color="red" style="color: red" size="2"><h2>Thread Safety</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Neither  
    <code>TransformerFactory</code> nor 
    <code>Transformer</code> is guaranteed to be
    thread-safe. </p></li>
    <li><p>Simplest solution is just to give each separate thread
    its own <code>TransformerFactory</code> and
    <code>Transformer</code> objects.</p></li>
    
    <li><p>The <code>Templates</code> class represents a
    parsed stylesheet. It creates new 
    <code>Transformer</code> objects on demand very quickly.</p></li>
    
   <li><p> <code>Templates</code> is thread-safe.</p></li>
    
  </ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">  TransformerFactory xformFactory = TransformerFactory.newInstance();
  Source xsl = new StreamSource("stylesheet.xsl");
  Templates templates = xformFactory.newTemplates(xsl);
  ...
while (true) {
  InputStream  in   = getNextDocument();
  OutputStream out  = getNextTarget();
  Source request    = new StreamSource(in);
  Result response   = new StreamResult(out);
  Transformer transformer = templates.newTransformer();
  transformer.transform(request, response);
}</pre><hr color="red" style="color: red" size="2"><h2>Locating Transformers</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>
    The 
    <code>javax.xml.transform.TransformerFactory</code> Java system property    
    determines which
    XSLT engine TrAX uses.</p></li>
    
    <li><p>Its value is the fully qualified name of the
    implementation of the abstract
    <code>javax.xml.transform.TransformerFactory</code>
    class. Possible values of this property include:
<ul><li><p>

        Saxon 6.x: <code>com.icl.saxon.TransformerFactoryImpl</code>
      </p></li><li><p>
        Saxon 7.x: <code>net.sf.saxon.TransformerFactoryImpl</code>
      </p></li><li><p>
        Xalan:
        <code>org.apache.xalan.processor.TransformerFactoryImpl</code>
      </p></li><li><p>

        jd.xslt:
        <code>jd.xml.xslt.trax.TransformerFactoryImpl</code>
      </p></li><li><p>
       Oracle:
        <code>oracle.xml.jaxp.JXSAXTransformerFactory</code>
      </p></li>
      </ul>
      
      </p></li>
      
      <li><p>
    This property can be set in all the usual ways a Java system property
    can be set. TrAX picks from them in this order:
  <ol>
  <li><p>
          <code>System.setProperty( "javax.xml.transform.TransformerFactory", 
        "<i><code>classname</code></i>")</code>

      </p></li>
      
      <li><p>
        The value specified at the command line using the 
        <code>-Djavax.xml.transform.TransformerFactory=<i><code>classname</code></i></code>
        option to the <b>java</b> interpreter
      </p></li><li><p>
        The class named in the  <code>lib/jaxp.properties</code> properties file
 in the JRE directory, in a line like this one:
      <p class="programlisting"><code>javax.xml.transform.TransformerFactory=<i>classname</i></code></p>
      </p></li>
      
      <li><p>The class named in the 
    <code>META-INF/services/javax.xml.transform.TransformerFactory</code>     file 
    in the JAR archives available to the runtime
      </p></li>
      
      <li><p>
      Finally, if all of the above options fail,
        <code>TransformerFactory.newInstance()</code>
        returns a default implementation. In Sun&#8217;s JDK 1.4, this is
        Xalan 2.2d10. 
      </p></li>
      </ol>
      </p></li>
      </ul><hr color="red" style="color: red" size="2"><h2>The xml-stylesheet processing instruction</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude"><code>public abstract Source getAssociatedStylesheet(Source xmlDocument, String media, String title, String charset)
    throws TransformerConfigurationException;</code></p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>This method reads the XML document indicated by the first
    argument, and looks in its prolog for the stylesheet that
    matches the criteria given in the other three arguments.</p></li>
   <li><p> If any of these are null, it ignores that criterion.</p></li>
    <li><p>Loads the  stylesheet matching 
    the criteria into a JAXP
    <code>Source</code> object and returns it.    </p></li>
   <li><p>Use the <code>TransformerFactory.newTransformer()</code>    
    object to convert this  <code>Source</code> into a 
    <code>Transformer</code> object. </p></li>
    <li><p> Throws a <code>TransformerConfigurationException</code>  
    if there is no
    <code>xml-stylesheet</code> processing instruction
    pointing to an XSLT stylesheet 
    matching the specified criteria.</p></li>
</ul><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">// The InputStream in contains the XML document to be transformed
try {
  Source inputDocument = new StreamSource(in);
  TransformerFactory xformFactory = TransformerFactory.newInstance();
  Source xsl = xformFactory.getAssociatedStyleSheet(inputDocument, "print", null, null);
  Transformer stylesheet = xformFactory.newTransformer(xsl);

  Result outputDocument = new StreamResult(out);
  stylesheet.transform(inputDocument, outputDocument);
}
catch (TransformerConfigurationException e) {
  System.err.println("Problem with the xml-stylesheet processing instruction"); 
}
catch (TransformerException e) {
  System.err.println("Problem with the stylesheet"); 
}</pre><hr color="red" style="color: red" size="2"><h2>Features</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>Indicate what the processor supports</p></li>
    <li><p>Defined features:
    <ul type="disc"><li><p><code>StreamSource.FEATURE</code>: 
 <code>http://javax.xml.transform.stream.StreamSource/feature</code></p></li>
 <li><p><code>StreamResult.FEATURE</code>: 
 <code>http://javax.xml.transform.stream.StreamResult/feature</code></p></li>
 <li><p><code>DOMSource.FEATURE</code>: 
 <code>http://javax.xml.transform.dom.DOMSource/feature</code></p></li>
 <li><p><code>DOMResult.FEATURE</code>: 
 <code>http://javax.xml.transform.dom.DOMResult/feature</code></p></li>
 <li><p><code>SAXSource.FEATURE</code>: 
 <code>http://javax.xml.transform.dom.SAXSource/feature</code></p></li>
 <li><p><code>SAXResult.FEATURE</code>: 
 <code>http://javax.xml.transform.dom.SAXResult/feature</code></p></li>
 <li><p><code>SAXTransformerFactory.FEATURE</code>: 
 <code>http://javax.xml.transform.sax.SAXTransformerFactory/feature</code></p></li>
 <li><p><code>SAXTransformerFactory.FEATURE_XMLFILTER</code>: 
 <code>http://javax.xml.transform.sax.SAXTransformerFactory/feature/xmlfilter</code></p></li>
 </ul>
 
  
 </p></li>
 

     <li><p>
      The boolean values of these features for the current XSLT engine can be tested with
      the <code>getFeature()</code>       method in the <code>TransformerFactory</code> class:
   
   <p><code class="methodsynopsis">public abstract boolean getFeature(String name);</code></p>
   
   
   
</p></li>
</ul><hr color="red" style="color: red" size="2"><h2>Features Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;
import javax.xml.transform.sax.*;


public class TrAXFeatureTester {

  public static void main(String[] args) {
  
    TransformerFactory xformFactory = TransformerFactory.newInstance();
      
    String name = xformFactory.getClass().getName();

    if (xformFactory.getFeature(DOMResult.FEATURE)) {
      System.out.println(name + " supports DOM output."); 
    }
    else {
      System.out.println(name + " does not support DOM output."); 
    }
    if (xformFactory.getFeature(DOMSource.FEATURE)) {
      System.out.println(name + " supports DOM input."); 
    }
    else {
      System.out.println(name + " does not support DOM input."); 
    }
    
    if (xformFactory.getFeature(SAXResult.FEATURE)) {
      System.out.println(name + " supports SAX output."); 
    }
    else {
      System.out.println(name + " does not support SAX output."); 
    }
    if (xformFactory.getFeature(SAXSource.FEATURE)) {
      System.out.println(name + " supports SAX input."); 
    }
    else {
      System.out.println(name + " does not support SAX input."); 
    }
    
    if (xformFactory.getFeature(StreamResult.FEATURE)) {
      System.out.println(name + " supports stream output."); 
    }
    else {
      System.out.println(name + " does not support stream output."); 
    }
    if (xformFactory.getFeature(StreamSource.FEATURE)) {
      System.out.println(name + " supports stream input."); 
    }
    else {
      System.out.println(name + " does not support stream input."); 
    }
    
    if (xformFactory.getFeature(SAXTransformerFactory.FEATURE)) {
      System.out.println(name + " returns SAXTransformerFactory "
       + "objects from TransformerFactory.newInstance()."); 
    }
    else {
      System.out.println(name 
       + " does not use SAXTransformerFactory."); 
    }
    if (xformFactory.getFeature(SAXTransformerFactory.FEATURE_XMLFILTER)) {
      System.out.println( 
       name + " supports the newXMLFilter() methods."); 
    }
    else {
      System.out.println( 
       name + " does not support the newXMLFilter() methods."); 
    }
  
  }

}</pre><hr color="red" style="color: red" size="2"><h2>Feature Tester Output</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
      Here&#8217;s the results of running this program against Saxon
      6.5.1:
    </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="screen"><samp>C:\XMLJAVA&gt;java -Djavax.xml.transform.TransformerFactory=com.icl.saxon.TransformerFactoryImpl TrAXFeatureTester
com.icl.saxon.TransformerFactoryImpl supports DOM output.
com.icl.saxon.TransformerFactoryImpl supports DOM input.
com.icl.saxon.TransformerFactoryImpl supports SAX output.
com.icl.saxon.TransformerFactoryImpl supports SAX input.
com.icl.saxon.TransformerFactoryImpl supports stream output.
com.icl.saxon.TransformerFactoryImpl supports stream input.
com.icl.saxon.TransformerFactoryImpl returns 
 SAXTransformerFactory objects from 
 TransformerFactory.newInstance().
com.icl.saxon.TransformerFactoryImpl supports the newXMLFilter() 
 methods.</samp></pre><hr color="red" style="color: red" size="2"><h2>XSLT Processor Attributes</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
      Some XSLT processors provide non-standard, custom 
      <i>attributes</i> that control their behavior.
      Like features, these are also named via
      URIs.
      For example, Xalan-J 2.3  defines these three attributes:
    </p><div xmlns:xinclude="http://www.w3.org/2001/XInclude" class="variablelist"><dl><dt><span class="term"><code>http://apache.org/xalan/features/optimize</code></span></dt><dd><p>By default, Xalan rewrites stylesheets in an
 attempt to optimize them (similar to the behavior of an
 optimizing compiler for Java or other languages).
 This can confuse tools that need direct access to the
 stylesheet such as XSLT profilers and debuggers. If you&#8217;re using
 such a tool with Xalan, you should set this attribute to false.
 </p></dd><dt><span class="term"><code>http://apache.org/xalan/features/incremental</code></span></dt><dd><p>Setting this feature to true allows Xalan to begin producing output before 
it has finished processing the entire input document. This may cause problems if an error is detected late
in the process, but it shouldn&#8217;t be a big problem in fully
 debugged and tested 
environments.</p></dd><dt><span class="term"><code>http://apache.org/xalan/features/source_location</code></span></dt><dd><p>Setting this to true tells Xalan to provide a
 JAXP <code>SourceLocator</code>

a program can use to determine the location (line numbers, column
numbers,
system IDs, and public IDs) of individual nodes during the
transform.
However, it engenders a substantial performance hit
so it&#8217;s turned off by default. </p></dd></dl></div><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
      Other processors define their own attributes. 
      Although TrAX is designed as 
      a generic API, it does let you access such custom
      features with these two methods:
    </p><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract 
    void setAttribute(String <i>name</i> Object 
    <i>value</i>) throws
    IllegalArgumentException;</code><br xmlns:xinclude="http://www.w3.org/2001/XInclude"><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract Object 
   getAttribute(String <i>name</i>)
    throws IllegalArgumentException;</code><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    For example, this code tries to turn on incremental output:
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">TransformerFactory xformFactory 
 = TransformerFactory.newInstance();
try {
  xformFactory.setAttribute(
   "http://apache.org/xalan/features/incremental", Boolean.TRUE);
}
catch (IllegalArgumentException e) { 
  // This XSLT processor does not support the
  // http://apache.org/xalan/features/incremental attribute,
  // but we can still use the processor anyway
}</pre><hr color="red" style="color: red" size="2"><h2>URI Resolution</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform;

public interface URIResolver {

  public Source resolve(String href, String base) 
   throws TransformerException;
   
}

</pre><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
<li><p>The <code>resolve()</code> method should return 
    a <code>Source</code> object if it successfully resolves the URL.
    Otherwise it should return null to indicate that the default
    URL resolution mechanism should be used. 
    </p></li>
 </ul><p xmlns:xinclude="http://www.w3.org/2001/XInclude" class="title"><b>A URIResolver class</b></p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">import javax.xml.transform.*;
import javax.xml.transform.stream.StreamSource;
import java.util.zip.GZIPInputStream;
import java.net.URL;
import java.io.InputStream;


public class GZipURIResolver implements URIResolver {

  public Source resolve(String href, String base) {
   
    try {
      href = href + ".gz";
      URL context = new URL(base);
      URL u = new URL(context, href); 
      InputStream in = u.openStream();
      GZIPInputStream gin = new GZIPInputStream(in);
      return new StreamSource(gin, u.toString());
    }
    catch (Exception e) {
      // If anything goes wrong, just return null and let
      // the default resolver try.
    }
    return null;
  }

}
</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    The following two methods in 
    <code>TransformerFactory</code>
    set and get the <code>URIResolver</code>
    that <code>Transformer</code> objects created by
    this factory will use to resolve URIs:
  </p><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public 
  abstract void <span class="methodname"><b>setURIResolver</b></span>(<span class="methodparam"><span class="type">URIResolver&nbsp;</span><span class="parameter"><i>resolver</i></span></span>);</code><br xmlns:xinclude="http://www.w3.org/2001/XInclude"><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract <span class="type">URIResolver&nbsp;</span><span class="methodname"><b>getURIResolver</b></span>();</code><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

     For example,
   </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">URIResolver resolver = new GZipURIResolver();
factory.setURIResolver(resolver);</pre><hr color="red" style="color: red" size="2"><h2>Error Handling</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    XSLT transformations can fail for any of several reasons,
    including:
  </p><ul xmlns:xinclude="http://www.w3.org/2001/XInclude" type="disc"><li><p>The stylesheet is syntactically incorrect.</p></li>
  
  <li><p>The source document is malformed.</p></li>
  
  <li><p>
      Some external resource the processor needs to load, 
      such as a document referenced by the 
      <code>document()</code> function
      or the <code>.class</code>

      file that implements an extension function,
      is not available.
      </p></li>
      </ul><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    By default, any such problems are reported by printing them on
    <code>System.err</code>. However, you can provide
    more sophisticated error handling, reporting, and logging by
    implementing the <code>ErrorListener</code>
    interface. 
    </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform;

public interface ErrorListener {

  public void warning(TransformerException exception)
   throws TransformerException;
  public void error(TransformerException exception)
   throws TransformerException;
  public void fatalError(TransformerException exception)
   throws TransformerException;
     
}
</pre><hr color="red" style="color: red" size="2"><h2>ErrorListener Example</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">import javax.xml.transform.*;
import java.util.logging.*;


public class LoggingErrorListener implements ErrorListener {

  private Logger logger;
  
  public LoggingErrorListener(Logger logger) {
    this.logger = logger;
  }
  
  public void warning(TransformerException exception) {
   
    logger.log(Level.WARNING, exception.getMessage(), exception);
   
    // Don't throw an exception and stop the processor
    // just for a warning; but do log the problem
  }
  
  public void error(TransformerException exception)
   throws TransformerException {
    
    logger.log(Level.SEVERE, exception.getMessage(), exception);
    // XSLT is not as draconian as XML. There are numerous errors
    // which the processor may but does not have to recover from; 
    // e.g. multiple templates that match a node with the same
    // priority. I do not want to allow that so I throw this 
    // exception here.
    throw exception;
    
  }
  
  public void fatalError(TransformerException exception)
   throws TransformerException {
    
    logger.log(Level.SEVERE, exception.getMessage(), exception);

    // This is an error which the processor cannot recover from; 
    // e.g. a malformed stylesheet or input document
    // so I must throw this exception here.
    throw exception;
    
  }
     
}
</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    The following two methods appear in both 
    <code>TransformerFactory</code> and
     <code>Transformer</code>. They
    enable you to set and get the <code>ErrorListener</code>
    that the object will report problems to:
  </p><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract void <span class="methodname"><b>setErrorListener</b></span>(<span class="methodparam"><span class="type">ErrorListener&nbsp;</span><span class="parameter"><i>listener</i></span></span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;<span class="exceptionname">IllegalArgumentException</span>;</code><br xmlns:xinclude="http://www.w3.org/2001/XInclude"><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract <span class="type">ErrorListener&nbsp;</span><span class="methodname"><b>getErrorListener</b></span>();</code><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    An <code>ErrorListener</code> registered
    with a <code>Transformer</code> will report errors
    with the transformation.
    An <code>ErrorListener</code> registered
    with a <code>TransformerFactory</code> will report errors
    with the factory&#8217;s attempts to create new 
    <code>Transformer</code> objects.  For example, 
    this code fragment installs separate 
    <code>LoggingErrorListener</code>s on the 
    <code>TransformerFactory</code> and the 
    <code>Transformer</code> object it creates that
    will record messages in two different logs.
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">TransformerFactory factory = TransformerFactory.newInstance();
Logger factoryLogger 
 = Logger.getLogger("com.macfaq.trax.factory");
ErrorListener factoryListener 
 = new LoggingErrorListener(factoryLogger);
factory.setErrorListener(factoryListener);
Source source = new StreamSource("FibonacciXMLRPC.xsl");
Transformer stylesheet = factory.newTransformer(source);
Logger transformerLogger 
 = Logger.getLogger("com.macfaq.trax.transformer");
ErrorListener transformerListener 
 = new LoggingErrorListener(transformerLogger);
stylesheet.setErrorListener(transformerListener);</pre><hr color="red" style="color: red" size="2"><h2>Passing Parameters to Style Sheets</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    Top-level <code>xsl:param</code> and 
    <code>xsl:variable</code> elements
    both define variables by
    binding a name to a value. This variable can be dereferenced
    elsewhere in the stylesheet using the form
    <code>$<i><code>name</code></i></code>.
    Once set, the value of an XSLT variable is fixed and cannot
    be changed. However if the variable is defined with a 
    top-level <code>xsl:param</code> element instead of an
    <code>xsl:variable</code> element, then the default value
    can be changed before the transformation begins.
  </p><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    For example, the DocBook XSL stylesheets
    have a number of parameters that set various
    formatting options.  I use
    these settings:
    
  </p><div xmlns:xinclude="http://www.w3.org/2001/XInclude" class="informalexample"><pre class="programlisting">  &lt;xsl:param name="fop.extensions"&gt;1&lt;/xsl:param&gt;
  &lt;xsl:param name="page.width.portrait"&gt;7.375in&lt;/xsl:param&gt;
  &lt;xsl:param name="page.height.portrait"&gt;9.25in&lt;/xsl:param&gt;

  &lt;xsl:param name="page.margin.top"&gt;0.5in&lt;/xsl:param&gt;
  &lt;xsl:param name="page.margin.bottom"&gt;0.5in&lt;/xsl:param&gt;
  &lt;xsl:param name="region.before.extent"&gt;0.5in&lt;/xsl:param&gt;
  &lt;xsl:param name="body.margin.top"&gt;0.5in&lt;/xsl:param&gt;

  &lt;xsl:param name="page.margin.outer"&gt;1.0in&lt;/xsl:param&gt;
  &lt;xsl:param name="page.margin.inner"&gt;1.0in&lt;/xsl:param&gt;
  &lt;xsl:param name="body.font.family"&gt;Times&lt;/xsl:param&gt;
  &lt;xsl:param name="variablelist.as.blocks" select="1"/&gt;

  &lt;xsl:param name="generate.section.toc.level" select="1"/&gt;
  &lt;xsl:param name="generate.component.toc" select="0"/&gt;</pre></div><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    The initial (and thus final) value of any parameter can be
    changed inside your Java code using these three methods of
    the
    <code>Transformer</code> class:
  </p><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract void <span class="methodname"><b>setParameter</b></span>(<span class="methodparam">String <span class="parameter"><i>name</i></span></span>, <span class="methodparam">Object <span class="parameter"><i>value</i></span></span>);</code><br xmlns:xinclude="http://www.w3.org/2001/XInclude"><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract Object <span class="methodname"><b>getParameter</b></span>(<span class="methodparam">String <span class="parameter"><i>name</i></span></span>);</code><br xmlns:xinclude="http://www.w3.org/2001/XInclude"><code xmlns:xinclude="http://www.w3.org/2001/XInclude" class="methodsynopsis">public abstract void <span class="methodname"><b>clearParameters</b></span>();</code><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    The <code>setParameter()</code> method provides a
    value for a parameter that overrides any value used in the
    stylesheet itself.  The processor is responsible for
    converting the Java object type passed to a reasonable XSLT
    equivalent. This should work well enough for
    <code>String</code>, 
    <code>Integer</code>, 
    <code>Double</code>, and
    <code>Boolean</code> as well as DOM types like 
        <code>Node</code> and
        <code>NodeList</code>. However, I
        wouldn&#8217;t rely on it for anything more complex like a
        <code>File</code> or a  
    <code>Frame</code>.
    </p><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    The <code>getParameter()</code> method returns
    the value of a parameter previously set by Java. It will not
    return any value from the stylesheet itself, even if it has
    not been overridden by the Java code. Finally, the 
    <code>clearParameters()</code> method eliminates
    all Java mappings of parameters so that those variables are
    returned to whatever value is specified in the stylesheet.
  </p><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    For example, in Java the above list of parameters for the
    DocBook stylesheets could be set with a JAXP <code>Transformer</code>
    object like this:
  </p><div xmlns:xinclude="http://www.w3.org/2001/XInclude" class="informalexample"><pre class="programlisting">transformer.setParameter("fop.extensions", "1");
transformer.setParameter("page.width.portrait", "7.375in");
transformer.setParameter("page.height.portrait", "9.25in");
transformer.setParameter("page.margin.top", "0.5in");
transformer.setParameter("region.before.extent", "0.5in");
transformer.setParameter("body.margin.top", "0.5in");
transformer.setParameter("page.margin.bottom", "0.5in");
transformer.setParameter("page.margin.outer", "1.0in");
transformer.setParameter("page.margin.inner", "1.0in");
transformer.setParameter("body.font.family", "Times");
transformer.setParameter("variablelist.as.blocks", "1");
transformer.setParameter("generate.section.toc.level", "1");
transformer.setParameter("generate.component.toc", "0");</pre></div><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    Here I used strings for all the values. 
    However, in a few cases I could have used a
    <code>Number</code> of some kind instead.
  </p><hr color="red" style="color: red" size="2"><h2>Output Properties</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
   The 
    <code>xsl:output</code> instruction controls the details
    of serialization. For example, it can specify 
    XML, HTML, or plain text output.
    It can specify the encoding of the output, what the document type declaration
    points to, whether the elements should be indented, what the value of the standalone declaration
    is, where CDATA sections should be used, and more.
    For example, adding this <code>xsl:output</code> element
    to a stylesheet would produce plain text output instead of
    XML:
  </p><div xmlns:xinclude="http://www.w3.org/2001/XInclude" class="informalexample"><pre class="programlisting">&lt;xsl:output
  method="text"
  encoding="US-ASCII"
  media-type="text/plain"
/&gt;</pre></div><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

  This <code>xsl:output</code> element asks for
  pretty-printed 
    XML:
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">&lt;xsl:output
  method="xml"
  encoding="UTF-16"
  indent="yes"
  media-type="text/xml"
  standalone="yes"
/&gt;</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    In all, there are ten attributes of the
    <code>xsl:output</code> element that control
    serialization of the result tree:
  </p><div xmlns:xinclude="http://www.w3.org/2001/XInclude" class="variablelist"><dl><dt><span class="term"><code>method="<i><code>xml | html | text</code></i>"</code></span></dt><dd><p>
       The output method.  <code>xml</code> is the default.
       <code>html</code> uses classic
       HTML syntax such as <code>&lt;hr&gt;</code> instead of 
       <code>&lt;hr /&gt;</code>. <code>text</code> outputs plain
       text but no markup.
      </p></dd><dt><span class="term"><code>version="1.0"</code></span></dt><dd><p>

        The version number used in the XML declaration.
        Currently, this should always have the value
        <code>1.0</code>.
      </p></dd><dt><span class="term"><code>encoding="<i><code>UTF-8 | UTF-16 | ISO-8859-1 | &#8230;</code></i>"</code></span></dt><dd><p>
        The encoding used for the output and in the encoding
        declaration of the output document. 
      </p></dd><dt><span class="term"><code>omit-xml-declaration="<i><code>yes | no</code></i>"</code></span></dt><dd><p>
         <code>yes</code> if the XML declaration should be omitted, 
         <code>no</code>

        otherwise. (i.e. <code>no</code> if the XML declaration should be included, 
         <code>yes</code> if it shouldn&#8217;t be.) The default is <code>no</code>.
      </p></dd><dt><span class="term"><code>standalone="<i><code>yes | no</code></i>"</code></span></dt><dd><p>
        The value of the <code>standalone</code>         attribute for the XML declaration; either 
        <code>yes</code> or <code>no</code>

      </p></dd><dt><span class="term"><code>doctype-public="<i><code>public ID</code></i>"</code></span></dt><dd><p>
        The public identifier used in the 
        <code>DOCTYPE</code> declaration
      </p></dd><dt><span class="term"><code>doctype-system="<i><code>URI</code></i>"</code></span></dt><dd><p>
        The URL used as a system identifier in the 
        <code>DOCTYPE</code> declaration
      </p></dd><dt><span class="term"><code>cdata-section-elements="<i><code>element_name_1 element_name_2 &#8230;</code></i>"</code></span></dt><dd><p>

        A white space separated list of the qualified names of
        the elements&#8217; whose content should be output as a CDATA
        section
      </p></dd><dt><span class="term"><code>indent="<i><code>yes | no</code></i>"</code></span></dt><dd><p>
        <code>yes</code> if extra white space should be added
        to pretty-print the result, <code>no</code>
        otherwise. The default is <code>no</code>.
      </p></dd><dt><span class="term"><code>media-type="<i><code>text/xml | text/html | text/plain | application/xml&#8230; </code></i>"</code></span></dt><dd><p>

        The MIME media type of the output such as 
        text/html, application/xml, or application/xml+svg
      </p></dd></dl></div><hr color="red" style="color: red" size="2"><h2>Controlling Output Properties from Java</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
      <li><p>
    You can also control these output properties from inside your
    Java programs using these four methods in the 
    <code>Transformer</code> class.:
    
    <pre><code>public abstract void <b>setOutputProperties</b>(Properties
    <i>outputFormat</i>)
     throws IllegalArgumentException;
public abstract Properties <b>getOutputProperties</b>();
public abstract void <b>setOutputProperty</b>(String <i>name</i>, String <i>value</i>)
     throws&nbsp; IllegalArgumentException;
public abstract String <b>getOutputProperty</b>(String <i>name</i>);</code></pre>
</p></li>
    <li><p>The keys and values for these properties are simply the string names
    established by the XSLT 1.0
    specification. </p></li>
    
    <li><p>The 
    <code>javax.xml.transform.OutputKeys</code> class
    provides
    named constants for all the property names:
  
  <pre class="programlisting">package javax.xml.transform;

public class OutputKeys {

  private OutputKeys() 

  public static final String METHOD = "method";
  public static final String VERSION = "version";
  public static final String ENCODING = "encoding";
  public static final String OMIT_XML_DECLARATION 
   = "omit-xml-declaration";
  public static final String STANDALONE = "standalone";
  public static final String DOCTYPE_PUBLIC = "doctype-public";
  public static final String DOCTYPE_SYSTEM = "doctype-system";
  public static final String CDATA_SECTION_ELEMENTS 
   = "cdata-section-elements";
  public static final String INDENT = "indent";
  public static final String MEDIA_TYPE = "media-type";
  
}</pre></p></li>

<li><p>

    For example:
  
 <pre class="programlisting">transformer.setOutputProperty(OutputKeys.METHOD, "xml");
transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-16");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty(OutputKeys.MEDIA_TYPE, "text/xml");
transformer.setOutputProperty(OutputKeys.STANDALONE, "yes");</pre></p></li>


<li><p>    In the event of a conflict between what the Java code
    requests with output properties
    requests and what the stylesheet requests with an 
    <code>xsl:output</code> element, the ones specified 
    in the Java code take precedence.</p></li>
  </ul><hr color="red" style="color: red" size="2"><h2>Sources and Results</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    The <code>Source</code>
    and <code>Result</code> interfaces abstract
    out the API dependent details of exactly how an XML document
    is represented. You can construct sources from DOM 
    nodes, SAX event sequences, and raw streams.
    You can target the result of a transform at 
    a DOM <code>Node</code>,
    a SAX <code>ContentHandler</code>,
    or a stream-based target such as an
    <code>OutputStream</code>, 
    <code>Writer</code>,  
    <code>File</code>, or <code>String</code>. 
    Other models may also provide their own implementations of
    these interfaces. For instance, JDOM has an
    <code>org.jdom.transform</code> package that includes a 
    <code>JDOMSource</code> and 
    <code>JDOMResult</code> class.
  </p><p xmlns:xinclude="http://www.w3.org/2001/XInclude">

    In fact, these different models have very little in common, other than that
    they all hold an XML document.
    Consequently, the <code>Source</code>
    and <code>Result</code> interfaces don&#8217;t
    themselves provide a lot of the functionality you need, just
    methods to get the system and public ID of the document.
    Everything else is deferred to the implementations.
    </p><hr color="red" style="color: red" size="2"><h2>DOMSource and DOMResult</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.dom;

public class DOMSource implements Source {

  public static final String FEATURE =
    "http://javax.xml.transform.dom.DOMSource/feature";

  public DOMSource()
  public DOMSource(Node node);
  public DOMSource(Node node, String systemID);

  public void   setNode(Node node);
  public Node   getNode();
  public void   setSystemId(String baseID);
  public String getSystemId();

}

</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    In theory, you should be able to convert any DOM <code>Node</code>
    object into a <code>DOMSource</code> and transform
    it. In practice, only transforming 
    document nodes is truly reliable. (It&#8217;s not even clear that
    the XSLT processing model applies to anything that isn&#8217;t a
    complete document.)
    In my tests, Xalan-J could transform all the nodes I threw
    at it. However, Saxon could only transform
    <code>Document</code> objects 
    and <code>Element</code>

    objects that were part of a document tree.
   </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.dom;

public class DOMResult implements Result {

  public static final String FEATURE =
  "http://javax.xml.transform.dom.DOMResult/feature";

  public DOMResult();
  public DOMResult(Node node);
  public DOMResult(Node node, String systemID);
  
  public void   setNode(Node node);
  public Node   getNode();
  public void   setSystemId(String systemId);
  public String getSystemId();
  
}

</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    If you specify a <code>Node</code> for the
    result, either via the constructor or 
    by calling <code>setNode()</code>, then the
    output of the transform will be appended to that
    node&#8217;s children. Otherwise, the transform output will 
    be appended to  a new 
    <code>Document</code> or 
    <code>DocumentFragment</code>
    <code>Node</code>. The <code>getNode()</code>

    method returns this <code>Node</code>.
  </p><hr color="red" style="color: red" size="2"><h2>SAXSource and SAXResult</h2><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.sax;

public class SAXSource implements Source {

  public static final String FEATURE =
   "http://javax.xml.transform.sax.SAXSource/feature";

  public SAXSource();
  public SAXSource(XMLReader reader, InputSource inputSource);
  public SAXSource(InputSource inputSource);
  
  public void        setXMLReader(XMLReader reader);
  public XMLReader   getXMLReader();
  public void        setInputSource(InputSource inputSource);
  public InputSource getInputSource();
  public void        setSystemId(String systemID);
  public String      getSystemId();
  
  public static InputSource sourceToInputSource(Source source);
  
}

</pre><hr xmlns:xinclude="http://www.w3.org/2001/XInclude"><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.sax;

public class SAXResult implements Result

  public static final String FEATURE =
   "http://javax.xml.transform.sax.SAXResult/feature";

  public SAXResult();
  public SAXResult(ContentHandler handler);
  
  public void           setHandler(ContentHandler handler);
  public ContentHandler getHandler();
  public void           setLexicalHandler(LexicalHandler handler);
  public LexicalHandler getLexicalHandler();
  public void           setSystemId(String systemId);
  public String         getSystemId();
  
}</pre><hr color="red" style="color: red" size="2"><h2>StreamSource and StreamResult</h2><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    The <code>StreamSource</code> and
    <code>StreamResult</code> classes are used as
    sources and targets for transforms from sequences of bytes and characters.
    This includes 
    streams, readers, writers, strings, and files.
    What unifies these is that none of them know they contain
    an XML document.
    Indeed, on input they may not always contain an XML document.
    If so, an exception will be thrown as soon as you attempt
    to build a <code>Transformer</code> or
    a <code>Templates</code> object from
    the 
    <code>StreamSource</code>.
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.stream;

public class StreamSource implements Source {

  public static final String FEATURE =
   "http://javax.xml.transform.stream.StreamSource/feature";

  public StreamSource();
  public StreamSource(InputStream inputStream);
  public StreamSource(InputStream inputStream, String systemID);
  public StreamSource(Reader reader);
  public StreamSource(Reader reader, String systemID);
  public StreamSource(String systemID);
  public StreamSource(File f);
  
  public void        setInputStream(InputStream inputStream);
  public InputStream getInputStream();
  public void        setReader(Reader reader);
  public Reader      getReader();
  public void        setPublicId(String publicID);
  public String      getPublicId();
  public void        setSystemId(String systemID);
  public String      getSystemId();
  public void        setSystemId(File f);
  
}
</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    You should not specify both 
   an <code>InputStream</code> and a
    <code>Reader</code>. If you do, which one the processor reads from
    is implementation dependent. 
    If neither an  <code>InputStream</code> nor a
    <code>Reader</code> is available, then the
    processor will attempt to open a connection to the URI
    specified by the system ID.
    You should set the system ID even if you do specify an 
    <code>InputStream</code> or a
    <code>Reader</code> because this will be needed to
    resolve relative URLs that appear inside the stylesheet and
    input document.
  </p><pre xmlns:xinclude="http://www.w3.org/2001/XInclude" class="programlisting">package javax.xml.transform.stream;

public class StreamResult implements Result

  public static final String FEATURE =
   "http://javax.xml.transform.stream.StreamResult/feature";

  public StreamResult()
  public StreamResult(OutputStream outputStream);
  public StreamResult(Writer writer);
  public StreamResult(String systemID);
  public StreamResult(File f);
  
  public void         setOutputStream(OutputStream outputStream);
  public OutputStream getOutputStream();
  public void         setWriter(Writer writer);
  public Writer       getWriter();
  public void         setSystemId(String systemID);
  public void         setSystemId(File f);
  public String       getSystemId();
  
}
</pre><p xmlns:xinclude="http://www.w3.org/2001/XInclude">
    You should specify the system ID URL and one of the
    other identifiers (<code>File</code>,
    <code>OutputStream</code>, <code>Writer</code>,
    or <code>String</code>.)
    If you specify more than one possible target,
    which one the processor 
    chooses
    is implementation dependent.
  </p><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
    <li><p>
      <cite><a href="http://www.cafeconleche.org/books/xmljava/">Processing XML with Java</a></cite>
       <img src="images/xmljavasmallcover.jpg" width="168" height="211" align="right" hspace="20"> 

     <ul> 
     <li><p>Elliotte Rusty Harold</p></li>
     <li><p>Addison Wesley, 2002</p></li>
     <li><p>Chapter 17</p></li>
         <li><p>Online: <a href="http://www.cafeconleche.org/books/xmljava/chapters/ch17.html">http://www.cafeconleche.org/books/xmljava/chapters/ch17.html</a></p></li>

     </ul>
   </p></li>
   </ul><br xmlns:xinclude="http://www.w3.org/2001/XInclude" clear="all"><hr color="red" style="color: red" size="2"><h2>To Learn More</h2><ul xmlns:xinclude="http://www.w3.org/2001/XInclude">
  <li><p>This presentation: <a href="http://www.cafeconleche.org/slides/sd2003west/xmlandjava/">http://www.cafeconleche.org/slides/sd2003west/xmlandjava</a></p></li>
 <li><p><img src="images/xmljavasmallcover.jpg" align="right" hspace="5" width="168" height="211">
  <cite>Processing XML with Java</cite>
  <ul>
    <li><p>Elliotte Rusty Harold</p></li>
    <li><p>Addison-Wesley, 2002</p></li>
    <li><p>ISBN 0-201-77186-1</p></li>
    <li><p>Online: <a href="http://www.cafeconleche.org/books/xmljava">http://www.cafeconleche.org/books/xmljava</a></p></li>
   </ul>
   <br clear="all">
  </p></li>
  
  <li><p><img src="images/xian2medium.jpg" align="right" hspace="5" width="127" height="190">
 <cite>XML in a Nutshell, 2nd Edition</cite>
 <ul>
    <li><p>Elliotte Rusty Harold and W. Scott Means</p></li>
    <li><p>O'Reilly &amp; Associates, 2002</p></li>
    <li><p>ISBN 0-596-00292-0</p></li>
</ul>
 <br clear="all"></p></li>
 
    

  </ul><hr color="red" style="color: red" size="2"><div align="center"><A HREF="index.html">Index</A> | <A HREF="http://www.cafeocnleche.org/">Cafe con Leche</A></div><hr><font size="-1">
              Copyright 2000-2003 Elliotte Rusty Harold<br><a href="mailto:elharo@metalab.unc.edu">elharo@metalab.unc.edu</a><br>
              Last Modified March 27, 2003</font></body></html>
