<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ru"> <head>
<base href="http://www.cyberforum.ru/" /><!--[if IE]></base><![endif]--> <link rel="canonical" href="http://www.cyberforum.ru/java-j2se/thread552144.html" /> <base href="http://www.cyberforum.ru/" /> <meta http-equiv="Content-Type" content="text/html; charset=windows-1251" /> <meta name="keywords" content="XMLDecoder,Encoder,сериализовать,объекты,коллекции, XMLDecoder\Encoder сериализовать объекты коллекции, компьютерный форум программистов киберфорум сайберфорум сайбер компьютеры программирование софт" /> <meta name="description" content="Всем привет! Есть класс сериализатор: Код Java(TM) 2 Platform Standard Edition 5.0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 public class Serializer &#123; &nbsp; &nbsp; &" /> <meta name="verify-v1" content="z+WrViDt9OodkKaYoo8+s1dOXfL/ka6bQ0jBGkxrRAQ=" /> <meta name='yandex-verification' content='7313400c5792ee7b' /> <meta name="msvalidate.01" content="F8DD8BF8D2F28E27DEEDE322E0C4A048" /> <meta name='wmail-verification' content='33380466938a2eaf' />  <style type="text/css" id="vbulletin_css">
/**
* vBulletin 3.8.7 PL3 CSS
* Style: 'Обычный стиль'; Style ID: 1
*/
@import url("http://www.cyberforum.ru/clientscript/vbulletin_css/style-e7825f9b-00001.css");
</style> <link rel="stylesheet" type="text/css" href="http://www.cyberforum.ru/clientscript/vbulletin_important.css?v=387" />  <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/yui/yahoo-dom-event/yahoo-dom-event.js?v=387"></script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/yui/connection/connection-min.js?v=387"></script> <script type="text/javascript"> <!--
var SESSIONURL = "s=2d6d81143e8e162e4b64787ed8d2119d&";
var SECURITYTOKEN = "guest";
var IMGDIR_MISC = "images/misc";
var vb_disable_ajax = parseInt("0", 10);
// --> </script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/vbulletin_global.js?v=387"></script> <link rel="alternate" type="application/rss+xml" title="Форум программистов и сисадминов CyberForum.ru RSS Feed" href="http://www.cyberforum.ru/external.php?type=RSS2" /> <link rel="alternate" type="application/rss+xml" title="Java SE (J2SE) - CyberForum.ru - RSS Feed" href="http://www.cyberforum.ru/external.php?type=RSS2&amp;forumids=159" /> <link type="application/opensearchdescription+xml" rel="search" href="http://www.cyberforum.ru/opensearch.xml" title="CyberForum.ru" /> <link rel="stylesheet" href="http://www.cyberforum.ru/clientscript/vbulletin_css/geshi.css" type="text/css" media="screen" /> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/post_thanks_collapse.js"></script> <script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {lang: 'ru'}
</script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/jquery.js"></script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/vbulletin_vbpost.js"></script> <script type="text/javascript">
function initSpoilers(context)
{
    var context = context || 'body';
    $('div.spoiler-head', $(context))
        .click(function(){
            $(this).toggleClass('unfolded');
            $(this).next('div.spoiler-body').slideToggle('fast');
        })
    ;
}

$(document).ready(function(){
    initSpoilers('body');
});
</script> <link rel="stylesheet" type="text/css" href="http://www.cyberforum.ru/clientscript/vbulletin_css/spoiler.css" /> <script type="text/javascript" src="http://yui.yahooapis.com/combo?2.7.0/build/get/get-min.js"></script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/post_thanks.js"></script><script type="text/javascript" src="http://www.cyberforum.ru/clientscript/post_thanks_collapse.js"></script><style type="text/css"> <!--
.admincomment {
 font-family: Verdana, Arial, Helvetica, sans-serif;
 font-size: 10px;
 color: #FFFFFF;
}
.modcomment {
 font-family: Verdana, Arial, Helvetica, sans-serif;
 font-size: 10px;
 color: #FFFFFF;
}
.maincomm {
 border: 1px;
 border-left: 1px solid #8394B2;
 border-top: 1px solid #8394B2;
 border-right: 1px solid #8394B2;
 border-bottom: 1px solid #8394B2;
}
--> </style> <title> XMLDecoder\Encoder сериализовать объекты коллекции - Java SE (J2SE) - CyberForum.ru</title> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/vbulletin_post_loader.js?v=387"></script> <style type="text/css" id="vbulletin_showthread_css"> <!--
	
	#links div { white-space: nowrap; }
	#links img { vertical-align: middle; }
	--> </style> <style type="text/css">
		span.sortarrow {position:absolute;}
		span.sortarrow img {border:0;}
		a.sortheader {text-decoration:none; display:block; width:100%;}
	</style> <script type="text/javascript">
		var IMGDIR_BUTTON = "images/buttons";
	</script> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/sorttable.js"></script> </head> <body onload=""> <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-595018-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>  <script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript"></script> <script type="text/javascript">
try { var yaCounter29317 = new Ya.Metrika({id:29317,
          trackLinks:true,type:1});}
catch(e) { }
</script> <noscript><div><img src="//mc.yandex.ru/watch/29317?cnt-class=1" style="position:absolute; left:-9999px;" alt="" /></div></noscript>    <div align="center"> <div class="page" style="width:100%; text-align:left"> <div style="margin:0px 2px 0px 2px" align="left"> <table style="margin: 0px 0px 5px 0px;"><tr> <td width="285px" align="left" valign="middle"><a href="http://www.cyberforum.ru/"><img border="0" src="http://www.cyberforum.ru/images/cyberforum_logo.jpg" height="50px" alt="Форум программистов и сисадминов CyberForum.ru" /></a></td> <td width="100%" align="right" valign="middle"> <div style="float: right;"> <script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script> <div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="none" data-yashareQuickServices="yaru,vkontakte,facebook,twitter,odnoklassniki,moimir,lj,moikrug,gplus"></div> </div> </td> </tr></table><div class="vbmenu_popup" id="vbbloglinks_menu" style="display:none;margin-top:3px" align="left"> <table cellpadding="4" cellspacing="1" border="0"> <tr> <td class="vbmenu_option"><a href="http://www.cyberforum.ru/blogs/">Блоги программистов и сисадминов</a></td> </tr> </table> </div>  <table class="tborder" cellpadding="5" cellspacing="1" border="0" width="100%" align="center"> <tr> <td class="alt1" width="100%"> <table cellpadding="0" cellspacing="0" border="0"> <tr valign="bottom"> <td><a href="http://www.cyberforum.ru/java-j2se/thread552144.html#" onclick="history.back(1); return false;"><img src="http://www.cyberforum.ru/images/misc/navbits_start.gif" alt="Вернуться" border="0" /></a></td> <td>&nbsp;</td> <td width="100%"><span class="navbar"><a href="http://www.cyberforum.ru/" accesskey="1">Форум программистов и сисадминов CyberForum.ru</a></span> <span class="navbar">&gt; <a href="http://www.cyberforum.ru/programming/">Форум Форум программистов</a></span> <span class="navbar">&gt; <a href="http://www.cyberforum.ru/java/">Форум Java</a></span> <span class="navbar">&gt; <a href="http://www.cyberforum.ru/java-j2se/">Форум Java SE (J2SE)</a></span> </td> </tr> <tr> <td class="navbar" style="font-size:12pt; padding-top:5px" colspan="3"><a href="http://www.cyberforum.ru/java-j2se/thread552144.html"><img class="inlineimg" src="http://www.cyberforum.ru/images/misc/navbits_finallink_ltr.gif" alt="Перезагрузить страницу" border="0" /></a> <h1>
	 XMLDecoder\Encoder сериализовать объекты коллекции

</h1></td> </tr> </table> </td> <td class="alt2" nowrap="nowrap" style="padding:0px">  <form action="http://www.cyberforum.ru/login.php?do=login" method="post" onsubmit="md5hash(vb_login_password, vb_login_md5password, vb_login_md5password_utf, 0)"> <script type="text/javascript" src="http://www.cyberforum.ru/clientscript/vbulletin_md5.js?v=387"></script> <table cellpadding="0" cellspacing="3" border="0"> <tr> <td class="smallfont" style="white-space: nowrap;"><label for="navbar_username">E-mail</label></td> <td><input type="text" class="bginput" style="font-size: 11px" name="vb_login_username" id="navbar_username" size="20" accesskey="u" tabindex="101" value="E-mail" onfocus="if (this.value == 'E-mail') this.value = '';" /></td> <td class="smallfont" nowrap="nowrap"><label for="cb_cookieuser_navbar"><input type="checkbox" name="cookieuser" value="1" tabindex="103" id="cb_cookieuser_navbar" accesskey="c" checked="checked" />Запомнить?</label></td> </tr> <tr> <td class="smallfont"><label for="navbar_password">Пароль</label></td> <td><input type="password" class="bginput" style="font-size: 11px" name="vb_login_password" id="navbar_password" size="20" tabindex="102" /></td> <td><input type="submit" class="button" value="Вход" tabindex="104" title="Введите адрес вашей электронной почты и пароль, чтобы войти, или нажмите кнопку 'Регистрация', чтобы зарегистрироваться." accesskey="s" /></td> </tr> <td class="smallfont" colspan="2"><a href="http://www.cyberforum.ru/login.php?do=lostpw">Восстановить пароль</a></td> <td class="smallfont"><a href="http://www.cyberforum.ru/register.php">Регистрация</a></td> </tr> <tr> <td class="smallfont" colspan="3"></td> </tr> </table> <input type="hidden" name="s" value="2d6d81143e8e162e4b64787ed8d2119d" /> <input type="hidden" name="securitytoken" value="guest" /> <input type="hidden" name="do" value="login" /> <input type="hidden" name="vb_login_md5password" /> <input type="hidden" name="vb_login_md5password_utf" /> </form>  </td> </tr> </table>   <div class="tborder" style="padding:1px; border-top-width:0px"> <table cellpadding="0" cellspacing="0" border="0" width="100%" align="center"> <tr align="center"> <td class="vbmenu_control"><a href="http://www.cyberforum.ru/announcement.php?a=3">Правила</a></td> <td class="vbmenu_control"><a id="vbbloglinks" href="http://www.cyberforum.ru/blogs/">Блоги</a><script type="text/javascript">vbmenu_register("vbbloglinks");</script></td> <td class="vbmenu_control"><a href="http://www.cyberforum.ru/groups/">Социальные группы</a></td> <td class="vbmenu_control"><a href="http://www.cyberforum.ru/search.php" accesskey="4">Поиск</a></td> <td class="vbmenu_control"><a href="http://www.cyberforum.ru/search.php?do=getdaily" accesskey="2">Сообщения за день</a></td> <td class="vbmenu_control"><a href="http://www.cyberforum.ru/forumdisplay.php?do=markread&amp;markreadhash=guest" rel="nofollow">Все разделы прочитаны</a></td> </tr> </table> </div>  <table cellspacing="1" cellpadding="5" border="0" align="center" width="100%" class="tborder" style="margin: 10px 0px 0px 0px;"><tr> <td width="100%" class="alt1" align="center" valign="middle"> <script type="text/javascript"><!--
google_ad_client = "ca-pub-6796001588681838";
/* cyberforum.ru.header, 980x120 */
google_ad_slot = "4392515799";
google_ad_width = 980;
google_ad_height = 120;
//--> </script> <script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> </script> </td> </tr></table> <br /> <a name="poststop" id="poststop"></a>  <table cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-bottom:3px"> <tr valign="bottom"> <td class="smallfont" align="left" width="240px"> <a target="_blank" href="http://www.cyberforum.ru/newreply.php?do=newreply&amp;noquote=1&amp;p=2927616" rel="nofollow"><img src="http://www.cyberforum.ru/images/buttons/reply.gif" alt="Ответ" border="0" /></a> <a target="_blank" href="http://www.cyberforum.ru/newthread.php?do=newthread&amp;f=159" rel="nofollow"><img src="http://www.cyberforum.ru/images/buttons/newthread.gif" alt="Создать новую тему" border="0" /></a></td> <td class="smallfont" style="padding-left: 5px;"></td> <td class="smallfont" align="left"></td> </tr> </table>   <table class="tborder" cellpadding="5" cellspacing="1" border="0" width="100%" align="center" style="border-bottom-width:0px"> <tr> <td class="tcat" width="100%"> <div class="smallfont">
		
		&nbsp;
		</div> </td> </tr> </table>   </div> </div> </div>   <div id="posts">  <div align="center"> <div class="page" style="width:100%; text-align:left"> <div style="margin:0px 2px 0px 2px" align="left"> <div id="edit2927616" style="padding:0px 0px 5px 0px">  <table id="post2927616" class="tborder" cellpadding="5" cellspacing="0" border="0" width="100%" align="center"> <tr> <td class="thead" style="font-weight:normal; border: 1px solid #AAAAAA; border-right: 0px" >  <a name="post2927616"><img class="inlineimg" src="http://www.cyberforum.ru/images/statusicon/post_old.gif" alt="Старый" border="0" /></a>
			18.04.2012, 21:07
			
			 </td> <td colspan="2" class="thead" style="font-weight:normal; border: 1px solid #AAAAAA; border-left: 0px" align="right">
			&nbsp;





			#<a href="http://www.cyberforum.ru/post2927616.html" target="_blank"  id="postcount2927616" name="1"><strong>1</strong></a> </td> </tr> <tr valign="top"> <td class="alt2" width="175px" style="border: 1px solid #AAAAAA; border-top: 0px; border-bottom: 0px"> <div> <span class="bigusername"><span id="tagg_158198" style="display:none;">@</span>mr.nothing</span> </div> <div class="smallfont">Форумчанин</div> <div class="smallfont">
				&nbsp;<br /> <div>Регистрация: 28.02.2011</div> <div>
					Сообщений: <b>95</b> </div> <div>Репутация: <span id="repdisplay_2927616_158198" title="Репутация пользователя"><b>1</b></span> (<span id="repdisplay_2927616_158198" title="Благодарностей за сообщения">1</span>)</div>   <div> </div> </div> </td> <td colspan="2" class="alt1" id="td_post_2927616" style="border-right: 1px solid #AAAAAA" >  <div class="smallfont"> <img class="inlineimg" src="http://www.cyberforum.ru/images/icons/icon1.gif" alt="По умолчанию" border="0" /> <strong>XMLDecoder\Encoder сериализовать объекты коллекции</strong> </div> <hr size="1" style="color:#AAAAAA; background-color:#AAAAAA" />   <div id="post_message_2927616">

			
			Всем привет! <br /> <br />
Есть класс сериализатор:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="114538283" style="overflow: auto; width: 805px; height: 462px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="de1"><pre class="de1"><span class="kw2">public</span> <span class="kw2">class</span> Serializer <span class="br0">&#123;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw2">public</span> Serializer<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw2">public</span> <span class="kw3">void</span> serializeCollectionToXML<span class="br0">&#40;</span><span class="kw21">String</span> xmlFileLocation, <span class="kw46">Collection</span> collection<span class="br0">&#41;</span> <span class="kw2">throws</span> <span class="kw20">FileNotFoundException</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw20">FileOutputStream</span> os = <span class="kw2">new</span> <span class="kw20">FileOutputStream</span><span class="br0">&#40;</span>xmlFileLocation<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw18">XMLEncoder</span> encoder = <span class="kw2">new</span> <span class="kw18">XMLEncoder</span><span class="br0">&#40;</span>os<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw166">Object</span> object : collection<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; encoder.<span class="me1">writeObject</span><span class="br0">&#40;</span>object<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; encoder.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw2">public</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw166">Object</span><span class="sy0">&gt;</span> deserializeCollectionFromXML<span class="br0">&#40;</span><span class="kw21">String</span> xmlFileLocation<span class="br0">&#41;</span> <span class="kw2">throws</span> <span class="kw20">IOException</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw166">Object</span><span class="sy0">&gt;</span> collection = <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw166">Object</span><span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw20">FileInputStream</span> os = <span class="kw2">new</span> <span class="kw20">FileInputStream</span><span class="br0">&#40;</span>xmlFileLocation<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw18">XMLDecoder</span> decoder = <span class="kw2">new</span> <span class="kw18">XMLDecoder</span><span class="br0">&#40;</span>os<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">while</span><span class="br0">&#40;</span>os.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">!</span>= -<span class="nu0">1</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collection.<span class="me1">add</span><span class="br0">&#40;</span>decoder.<span class="me1">readObject</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; decoder.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">return</span> collection<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></table></div></td></tr></tbody></table></div>Сериализую так:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="636714861" style="overflow: auto; width: 805px; height: 46px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1">serializer.<span class="me1">serializeCollectionToXML</span><span class="br0">&#40;</span>ResourcePath + <span class="st0">&quot;courses.xml&quot;</span>, alc<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//alc - заполненный ArrayList</span></pre></td></tr></table></div></td></tr></tbody></table></div>Десериализую так:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="116581890" style="overflow: auto; width: 805px; height: 46px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw166">Object</span><span class="sy0">&gt;</span> me = serializer.<span class="me1">deserializeCollectionFromXML</span><span class="br0">&#40;</span>ResourcePath + <span class="st0">&quot;courses.xml&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></td></tr></table></div></td></tr></tbody></table></div>Десериализатор обваливается с эксепшеном:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="646615876" style="overflow: auto; width: 805px; height: 142px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
2
3
4
5
6
7
</pre></td><td class="de1"><pre class="de1">org.<span class="me1">xml</span>.<span class="me1">sax</span>.<span class="kw163">SAXParseException</span><span class="sy0">;</span> lineNumber: <span class="nu0">1</span><span class="sy0">;</span> columnNumber: <span class="nu0">1</span><span class="sy0">;</span> Content is not allowed in prolog.
<span class="me1">Continuing</span> ...
<span class="kw21">Exception</span> in thread <span class="st0">&quot;main&quot;</span> java.<span class="me1">lang</span>.<span class="kw21">ArrayIndexOutOfBoundsException</span>: <span class="nu0">0</span>
&nbsp; &nbsp; at java.<span class="me1">beans</span>.<span class="kw18">XMLDecoder</span>.<span class="me1">readObject</span><span class="br0">&#40;</span><span class="kw18">XMLDecoder</span>.<span class="me1">java</span>:<span class="nu0">238</span><span class="br0">&#41;</span>
&nbsp; &nbsp; at <span class="kw116">Utilities</span>.<span class="me1">Serializer</span>.<span class="me1">deserializeCollectionFromXML</span><span class="br0">&#40;</span>Serializer.<span class="me1">java</span>:<span class="nu0">50</span><span class="br0">&#41;</span>
&nbsp; &nbsp; at ScheduleManager.<span class="kw166">Parser</span>.<span class="me1">parseData</span><span class="br0">&#40;</span><span class="kw166">Parser</span>.<span class="me1">java</span>:<span class="nu0">103</span><span class="br0">&#41;</span>
&nbsp; &nbsp; at ScheduleManager.<span class="me1">Main</span>.<span class="me1">main</span><span class="br0">&#40;</span>Main.<span class="me1">java</span>:<span class="nu0">15</span><span class="br0">&#41;</span></pre></td></tr></table></div></td></tr></tbody></table></div>на строчке:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="747172195" style="overflow: auto; width: 805px; height: 46px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1">collection.<span class="me1">add</span><span class="br0">&#40;</span>decoder.<span class="me1">readObject</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></td></tr></table></div></td></tr></tbody></table></div>внутри функции readObject(). <br />
Подскажите, что делаю не так? Всю голову сломал себе. <br />
Заранее огромное спасибо за ответ! <br /> <br />
p.s. Если использовать следующую функцию для десериализации:<br /> <div style="margin: 15px 10px 20px 50px"><table class="java5"><thead><tr><td colspan="2"  class="head">Код Java(TM) 2 Platform Standard Edition 5.0</td></tr></thead><tbody><tr class="li1"><td><div id="404771355" style="overflow: auto; width: 805px; height: 142px"><table><tr class="li1"><td class="ln" style="padding: 0px 10px 0px 5px;"><pre class="de1">1
2
3
4
5
6
7
</pre></td><td class="de1"><pre class="de1"><span class="kw2">public</span> <span class="kw166">Object</span> deserializeFromXML<span class="br0">&#40;</span><span class="kw21">String</span> xmlFileLocation<span class="br0">&#41;</span> <span class="kw2">throws</span> <span class="kw20">FileNotFoundException</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw20">FileInputStream</span> os = <span class="kw2">new</span> <span class="kw20">FileInputStream</span><span class="br0">&#40;</span>xmlFileLocation<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw18">XMLDecoder</span> decoder = <span class="kw2">new</span> <span class="kw18">XMLDecoder</span><span class="br0">&#40;</span>os<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw166">Object</span> deSerializedObject = decoder.<span class="me1">readObject</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; decoder.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">return</span> deSerializedObject<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></table></div></td></tr></tbody></table></div>То первый элемент достается отлично, но остальное, естественно, с ее помощью достать не получится.

		</div>  <div style="margin-top: 5px;"> <script type="text/javascript"><!--
google_ad_client = "ca-pub-6796001588681838";
/* cyberforum.ru.firstpost, 336x280 */
google_ad_slot = "7752057143";
google_ad_width = 336;
google_ad_height = 280;
//--> </script> <script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> </script> </div> </td> </tr> <tr> <td class="alt2" style="border: 1px solid #AAAAAA; border-top: 0px"> </td> <td colspan="2" class="alt1" align="left" valign="top" style="border: 1px solid #AAAAAA; border-left: 0px; border-right: 0px; border-top: 0px"> </td> </tr> <tr> <td class="alt2" style="border: 1px solid #AAAAAA; border-top: 0px"> <img class="inlineimg" src="http://www.cyberforum.ru/images/statusicon/user_offline.gif" alt="mr.nothing вне форума" border="0" /> </td> <td class="alt1" align="left" valign="top" style="border: 1px solid #AAAAAA; border-left: 0px; border-right: 0px; border-top: 0px"> </td> <td class="alt1" align="right" style="border: 1px solid #AAAAAA; border-left: 0px; border-top: 0px"> <script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script> <div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="button" data-yashareQuickServices="yaru,vkontakte,facebook,twitter,odnoklassniki,moimir,lj,moikrug,gplus"></div> </td> </tr> </table> <div id="post_thanks_box_2927616"></div>   <div style="margin: 5px 0px 0px 0px">  <table class="tborder" cellpadding="5" cellspacing="1" border="0" width="100%" align="center"> <thead> <tr> <td class="tcat">
					Другие темы раздела
				</td> <td class="tcat" align="right"> <span class="smallfont">Форум программистов Java. Платформа Java стандартной версии. Создание апплетов и приложений на Java.</a> </td> </tr> </thead> <tbody><tr> <td class="alt1" width="50%" align="left" valign="top"> <strong><a target="_blank" href="http://www.cyberforum.ru/java-j2se/thread552155.html">mp3 плеер на Java Java SE (J2SE) </a></strong><br /><span class="smallfont">Подскажите плз как написать mp3 плеер на Java! Или же подскажите какую либо литературу или сайт где можно с этим ознакомится. mp3 плеер на Java</span> </td> <td class="alt1" width="50%" align="left" valign="top"> <strong><a target="_blank" href="http://www.cyberforum.ru/java-j2se/thread552234.html"> Java SE (J2SE) NetBeans и hsqldb</a></strong><br /><span class="smallfont">Здраствуйте всем 
 
Есть проект на java, который работает с hsqldb. Добавляю базу в библиотеку проекта. Проблема в том, что когда я переношу проект на другой компьюетр, бд пропадает из library, хотя и остается в javaProject\dist\lib, как с этим бороться?. NetBeans и hsqldb</span> </td></tr></tbody> </table>  </div> </div> </div> </div> </div>    <div align="center"> <div class="page" style="width:100%; text-align:left"> <div style="margin:0px 2px 0px 2px" align="left"> <div id="edit3992751" style="padding:0px 0px 5px 0px"> <table id="post3992751" class="tborder" cellpadding="5" cellspacing="0" border="0" width="100%" align="center"> <tr> <td class="thead" style="font-weight:normal; border: 1px solid #AAAAAA; border-right: 0px" >  <a name="post3992751"><img class="inlineimg" src="http://www.cyberforum.ru/images/statusicon/post_old.gif" alt="Старый" border="0" /></a>
			13.01.2013, 00:57
			
			 </td> <td colspan="2" class="thead" style="font-weight:normal; border: 1px solid #AAAAAA; border-left: 0px" align="right">
			&nbsp;





			#<a href="http://www.cyberforum.ru/post3992751.html" target="_blank"  id="postcount3992751" name="2"><strong>2</strong></a> </td> </tr> <tr valign="top"> <td class="alt2" width="175px" style="border: 1px solid #AAAAAA; border-top: 0px; border-bottom: 0px"> <div> <span class="bigusername"><span id="tagg_334652" style="display:none;">@</span>Shpota</span> </div> <div class="smallfont">Новичок</div> <div class="smallfont">
				&nbsp;<br /> <div>Регистрация: 17.12.2012</div> <div>Адрес: Sumy</div> <div>
					Сообщений: <b>21</b> </div> <div>Репутация: <span id="repdisplay_3992751_334652" title="Репутация пользователя"><b>1</b></span> (<span id="repdisplay_3992751_334652" title="Благодарностей за сообщения">1</span>)</div>   <div> </div> </div> </td> <td colspan="2" class="alt1" id="td_post_3992751" style="border-right: 1px solid #AAAAAA" >  <div class="smallfont"> <img class="inlineimg" src="http://www.cyberforum.ru/images/icons/icon1.gif" alt="По умолчанию" border="0" /> <strong>Re: XMLDecoder\Encoder сериализовать объекты коллекции</strong> </div> <hr size="1" style="color:#AAAAAA; background-color:#AAAAAA" />   <div id="post_message_3992751">

			
			По-моему все дело в os.read() != 0, после его вызова съедается первый байт следующего объекта.<br />
Попробуйте сначала писать длину коллекции, чтобы не пользоваться вышеупомянутым кодом.<br />
Если проблема давно решена, напишите как решили, сам пока разбираюсь

		</div>  </td> </tr> <tr> <td class="alt2" style="border: 1px solid #AAAAAA; border-top: 0px"> </td> <td colspan="2" class="alt1" align="left" valign="top" style="border: 1px solid #AAAAAA; border-left: 0px; border-right: 0px; border-top: 0px"> </td> </tr> <tr> <td class="alt2" style="border: 1px solid #AAAAAA; border-top: 0px"> <img class="inlineimg" src="http://www.cyberforum.ru/images/statusicon/user_offline.gif" alt="Shpota вне форума" border="0" /> </td> <td class="alt1" align="left" valign="top" style="border: 1px solid #AAAAAA; border-left: 0px; border-right: 0px; border-top: 0px"> </td> <td class="alt1" align="right" style="border: 1px solid #AAAAAA; border-left: 0px; border-top: 0px"> </td> </tr> </table> <div id="post_thanks_box_3992751"></div>   <div style="background-color: #FFFACD; border: 1px solid #CDBFA2; margin: 10px 0px 5px 0px; padding: 7px; text-align:center; font-size: 15px"> <b>После <a href="http://www.cyberforum.ru/register.php">регистрации</a> реклама в сообщениях будет скрыта.</b> </div> </div> </div> </div> </div>  <div id="lastpost"></div></div>   <div align="center"> <div class="page" style="width:100%; text-align:left"> <div style="margin:0px 2px 0px 2px" align="left">   <table cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-top:-2px"> <tr valign="top"> <td class="smallfont" width="240px"> <a target="_blank" href="http://www.cyberforum.ru/newreply.php?do=newreply&amp;noquote=1&amp;p=3992751" rel="nofollow"><img src="http://www.cyberforum.ru/images/buttons/reply.gif" alt="Ответ" border="0" /></a> <a target="_blank" href="http://www.cyberforum.ru/newthread.php?do=newthread&amp;f=159" rel="nofollow"><img src="http://www.cyberforum.ru/images/buttons/newthread.gif" alt="Создать новую тему" border="0" /></a></td> </tr> </table>  <table> <tr> <td width="100%"></td> <td> </td> </tr> </table> <br /> <table class="tborder" cellpadding="5" cellspacing="1" border="0" width="100%" align="center"> <thead> <tr> <td class="tcat" width="100%" colspan="2">
			Похожие темы<a name="similarthreads"></a> </td> </tr> </thead> <tbody> <tr class="thead" align="center"> <td class="thead">Тема</td> <td class="thead" width="10%" nowrap="nowrap">Автор</td>  </tr> <tr> <td class="alt1" align="left"> <b>VBA</b> <a target="_blank" href="http://www.cyberforum.ru/vba/thread494020.html"> <b>Как можно передать из функции или процедуры массив, который будет содержать ссылки на объекты из другого массива/коллекции ?</b></a><br/><span class="smallfont">Доброго времени суток, 
 
буду благодарен, если поможете с решением следующей проблемы. Как можно передать из функции или процедуры массив, который будет содержать ссылки на объекты из другого массива/коллекции ? 
 
Заранее спасибо.</span> </td> <td class="alt2" nowrap="nowrap"><span class="smallfont">Crafty1</span></td>  </tr> <tr> <td class="alt1" align="left"> <b>C#: WPF и Silverlight</b> <a target="_blank" href="http://www.cyberforum.ru/wpf-silverlight/thread252934.html"> <b>Microsoft Expession Encoder</b></a><br/><span class="smallfont">хочу у себя на сайте конвертировать видео-форматы, решил что это можно сделать с помощью Microsoft Expession Encoder, скачал  Microsoft Expession Encoder 2 SDK но там xaml файлы, как их добавить в проект? 
 
потом скачал Microsoft Expession Encoder 4 SDK там были уже dll но при их добавлении...</span> </td> <td class="alt2" nowrap="nowrap"><span class="smallfont">Letos07</span></td>  </tr> <tr> <td class="alt1" align="left"> <b>Visual Basic</b> <a target="_blank" href="http://www.cyberforum.ru/visual-basic/thread475505.html"> <b>Объекты, коллекции и привязка данных...(мнения и подходы)</b></a><br/><span class="smallfont">Доброе время суток! 
Как обычно бывает пишешь, пишешь программы...Нарабатываются свою подходы к реализации чего - либо... 
Но вдруг в голову заскакивает мысль, что какие-то приемы у тебя неверны, неоптимальные и так дальше. 
И начинается: MSDN, интернет, умные книжки, форумы... Итак суть вороса:...</span> </td> <td class="alt2" nowrap="nowrap"><span class="smallfont">SandFox</span></td>  </tr> <tr> <td class="alt1" align="left"> <b>Java</b> <a target="_blank" href="http://www.cyberforum.ru/java/thread505469.html"> <b>JAXWS+JAXB или + java.beans.XMLDecoder/XMLEncoder</b></a><br/><span class="smallfont">С помощью чего можно преобразовывать Об-&gt;XML-&gt;Об 
JAXB?  
Тогда примеры... 
Есть проектик - веб-сервис на основе JAX-WS, нужно в ответе возвращать большой объем инфрмации в том смысле, что необходимо вовращать разнородную инфрмацию, объект, однако как я понял JAX-WS позволяет возвращать только...</span> </td> <td class="alt2" nowrap="nowrap"><span class="smallfont">VSergeyV</span></td>  </tr> </tbody> </table>  <table class="tborder" cellpadding="5" cellspacing="1" border="0" width="100%" align="center" style="border-top-width:0px"> <tr> <td class="thead" colspan="2">Опции темы<a name="goto_threadtools"></a></td> </tr> <tr valign="top"> <td class="alt1" colspan="2">  <div class="smallfont"> </div>  </td> </tr> <tr> <td class="thead" colspan="2">Опции просмотра<a name="goto_displaymodes"></a></td> </tr> <tr valign="top"> <td class="alt2" colspan="2">  <div class="smallfont"> <div><img class="inlineimg" src="http://www.cyberforum.ru/images/buttons/mode_linear.gif" alt="Линейный вид" vspace="1" /> <strong>Линейный вид</strong></div> <div><img class="inlineimg" src="http://www.cyberforum.ru/images/buttons/mode_hybrid.gif" alt="Комбинированный вид" vspace="1" /> <a href="http://www.cyberforum.ru/java-j2se/thread552144.html?mode=hybrid">Комбинированный вид</a></div> <div><img class="inlineimg" src="http://www.cyberforum.ru/images/buttons/mode_threaded.gif" alt="Древовидный вид" vspace="1" /> <a href="http://www.cyberforum.ru/java-j2se/thread552144.html?mode=threaded#post2927616">Древовидный вид</a></div> </div>  </td> </tr> </table> <br />   <table cellpadding="0" cellspacing="0" border="0" width="100%" align="center"> <tr valign="bottom"> <td width="100%" valign="top"> </td> <td class="smallfont" align="right"> <table cellpadding="0" cellspacing="0" border="0"> </table> </td> </tr> </table>  <table width="100%"><tr> <td align="left"> <script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script> <div class="yashare-auto-init" data-yashareL10n="ru" data-yashareType="button" data-yashareQuickServices="yaru,vkontakte,facebook,twitter,odnoklassniki,moimir,lj,moikrug,gplus"></div> </td> <td align="right"> <span class="smallfont">Текущее время: <span class="time">03:58</span>. Часовой пояс GMT +4.</span> </td> <table cellspacing="1" cellpadding="5" border="0" align="center" width="100%" class="tborder" style="margin: 10px 0px 0px 0px;"><tr> <td class="alt1" width="100%" align="center">  <div id="yandex_ad"></div> <script type="text/javascript">
(function(w, d, n, s, t) {
w[n] = w[n] || [];
w[n].push(function() {
Ya.Direct.insertInto(29317, "yandex_ad", {
stat_id: 2,
ad_format: "direct",
font_size: 1,
type: "grid",
limit: 4,
title_font_size: 1,
site_bg_color: "F4F4F4",
title_color: "000080",
url_color: "666666",
text_color: "000000",
hover_color: "0066FF",
favicon: true,
no_sitelinks: false
});
});
t = d.documentElement.firstChild;
s = d.createElement("script");
s.type = "text/javascript";
s.src = "http://an.yandex.ru/system/context.js";
s.setAttribute("async", "true");
t.insertBefore(s, t.firstChild);
})(window, document, "yandex_context_callbacks");
</script> </td> </tr></table> <br /> </div> </div> </div>   <form action="http://www.cyberforum.ru/" method="get" style="clear:left"> <table cellpadding="5" cellspacing="0" border="0" width="100%" class="tborder" align="center"> <tr> <td class="tfoot"> <select name="langid" onchange="switch_id(this, 'lang')"> <optgroup label="Выбор языка"> <option value="3" class="" >-- English (EN)</option> <option value="2" class="" selected="selected">-- Russian (RU)</option> </optgroup> </select> </td> <td class="tfoot" width="50%"> <span class="smallfont">КиберФорум - форум программистов, компьютерный форум, программирование</span> </td> <td class="tfoot" align="right" width="100%" colspan="2"> <div class="smallfont"> <strong> <a href="http://www.cyberforum.ru/advert.php" rel="nofollow">Реклама</a> -
				<a href="http://www.cyberforum.ru/sendmessage.php" rel="nofollow" accesskey="9">Обратная связь</a> -
				
				
				
				
				
				
				<a href="http://www.cyberforum.ru/announcement.php?a=3">Условия использования</a> -
				<a href="http://www.cyberforum.ru/java-j2se/thread552144.html#top" onclick="self.scrollTo(0, 0); return false;">Вверх</a> </strong> </div> </td> </tr> </table> <table cellpadding="5" cellspacing="0" border="0" width="100%" class="tborder" align="center"> <tr class="alt1" align="right"> <td align="left" class="smallfont" width="500px"> 
		Powered by vBulletin&reg; Version 3.8.7 PL3<br />Copyright &copy;2000 - 2013, vBulletin Solutions, Inc.
		 <td align="right" width="300px"> <script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t12.2;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+";"+Math.random()+
"' alt='' title='LiveInternet: показано число просмотров за 24"+
" часа, посетителей за 24 часа и за сегодня' "+
"border='0' width='88' height='31'><\/a>")
//--></script>  <script type="text/javascript">//<![CDATA[
var a='',js=10;try{a+=';r='+escape(document.referrer);}catch(e){}try{a+=';j='+navigator.javaEnabled();js=11;}catch(e){}
try{s=screen;a+=';s='+s.width+'*'+s.height;a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth);js=12;}catch(e){}
try{if(typeof((new Array).push('t'))==="number")js=13;}catch(e){}
try{document.write('<a href="http://top.mail.ru/jump?from=1495058">'+
'<img src="http://d0.cd.b6.a1.top.mail.ru/counter?id=1495058;t=49;js='+js+a+';rand='+Math.random()+
'" alt="Рейтинг@Mail.ru" style="border:0;" height="31" width="88" \/><\/a>');}catch(e){}//]]></script> <noscript><p><a href="http://top.mail.ru/jump?from=1495058"> <img src="http://d0.cd.b6.a1.top.mail.ru/counter?js=na;id=1495058;t=49" 
style="border:0;" height="31" width="88" alt="Рейтинг@Mail.ru" /></a></p></noscript>   <span id="openstat1131905"></span> <script type="text/javascript">
var openstat = { counter: 1131905, image: 5081, color: "c3c3c3", next: openstat, track_links: "ext" };
(function(d, t, p) {
var j = d.createElement(t); j.async = true; j.type = "text/javascript";
j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js";
var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s);
})(document, "script", document.location.protocol);
</script>  </td> </tr> </table> <div class="smallfont" align="center"> </div> </div> </form> <script type="text/javascript"> <!--
	// Main vBulletin Javascript Initialization
	vBulletin_init();
//--> </script>  <div style="display:none">   </div> 
<script type="text/javascript">
//<![CDATA[

window.orig_onload = window.onload;
window.onload = function() {
var cpost=document.location.hash.substring(1);var cpost2='';if(cpost){ var ispost=cpost.substring(0,4)=='post';if(ispost)cpost2='post_'+cpost.substring(4);if((cobj = fetch_object(cpost))||(cobj = fetch_object(cpost2))){cobj.scrollIntoView(true);}else if(ispost){cpostno = cpost.substring(4,cpost.length);if(parseInt(cpostno)>0){location.replace('http://www.cyberforum.ru/showthread.php?p='+cpostno);};} }

if(typeof window.orig_onload == "function") window.orig_onload();
}

//]]>
</script>
</body> </html>
