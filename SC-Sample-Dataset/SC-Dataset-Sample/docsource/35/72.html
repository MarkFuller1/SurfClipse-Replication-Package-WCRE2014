<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta http-equiv="content-type " content="text/html;charset=UTF-8" />
        <link id="globalheader-stylesheet" rel="stylesheet" href="https://ssl.apple.com/global/nav/styles/navigation.css" type="text/css" />
	<link rel="stylesheet" type="text/css" href="/css/global.css" media="all">
	<link href="/css/main.css" rel="StyleSheet" type="text/css">
</head>
<body>


<!-- BEGIN APPLE NAVBAR -->
<script type="text/javascript">
	var searchSection = 'global';
	var searchCountry = 'us';
</script>
<script src="https://ssl.apple.com/global/nav/scripts/globalnav.js" type="text/javascript" charset="utf-8"></script>
<nav id="globalheader">
	<!--googleoff: all-->
	<ul id="globalnav" role="navigation">
		<li id="gn-apple"><a href="http://www.apple.com/"><span>Apple</span></a></li>
		<li id="gn-store"><a href="http://store.apple.com/"><span>Store</span></a></li>
		<li id="gn-mac"><a href="http://www.apple.com/mac/"><span>Mac</span></a></li>
		<li id="gn-ipod"><a href="http://www.apple.com/ipod/"><span>iPod</span></a></li>
		<li id="gn-iphone"><a href="http://www.apple.com/iphone/"><span>iPhone</span></a></li>
		<li id="gn-ipad"><a href="http://www.apple.com/ipad/"><span>iPad</span></a></li>
		<li id="gn-itunes"><a href="http://www.apple.com/itunes/"><span>iTunes</span></a></li>
		<li id="gn-support" class="gn-last"><a href="http://www.apple.com/support/"><span>Support</span></a></li>
	</ul>
	<!--googleon: all-->
	<div id="globalsearch">
		<form action="/search/" method="post" class="search" id="g-search"><div class="sp-label">
			<label for="sp-searchtext">Search</label>
			<input type="text" name="q" id="sp-searchtext" accesskey="s" />
		</div></form>
		<div id="sp-magnify"><div class="magnify-searchmode"></div><div class="magnify"></div></div>
		<div id="sp-results"></div>
	</div>
</nav>
<script type="text/javascript">
	AC.GlobalNav.Instance = new AC.GlobalNav();
</script>

<!-- END APPLE NAVBAR -->


<!-- LIST TITLE -->
<center>
<table width="823" border="0" cellpadding="0" cellspacing="0">
        <tr><td>

    <TABLE WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
	<TR>
	<TD WIDTH="350" VALIGN="TOP" ALIGN="CENTER"><A HREF="http://lists.apple.com"><IMG SRC="/images/mailing2.gif" ALT="Mailing Lists: Apple Mailing Lists" WIDTH="350" HEIGHT="85" BORDER="0"></A><BR>
	</TD>	
	<TD WIDTH="20">
	</TD>		

	<TD WIDTH="200" VALIGN="TOP">
	<IMG SRC="/images/stamp.gif" ALT="Image of Mac OS face in stamp" WIDTH="150" HEIGHT="65" BORDER="0"></A>
	</TD>
	</TR>
    </TABLE>
</table>
</center>
<!-- LIST TITLE -->



<!-- MHonArc v2.6.18 -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Java7 Socket Closed Exception</title>
<link rev="made" href="mailto:email@hidden">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<table border="0" CELLSPACING="2" WIDTH="100%">
<tr><td align="right" valign="top" width="25%" BGCOLOR="#CCCCCC">
<FONT SIZE="-1">
[<a href="msg00001.html">Date Prev</a>][<a href="msg00003.html">Date Next</a>][<a href="msg00000.html">Thread Prev</a>][<a href="msg00003.html">Thread Next</a>][<A
HREF="index.html#00002">Date Index</A>][<A
HREF="threads.html#00002">Thread Index</A>]
</FONT>
</TD></TR>
</TABLE>

<h1>Re: Java7 Socket Closed Exception</h1>
<hr>
<ul>
<li><b>Subject</b>: <b>Re: Java7 Socket Closed Exception</b></li>
<li>From: Moises Lejter &lt;<a href="mailto:email@hidden">email@hidden</a>&gt;</li>
<li>Date: Sat, 01 Jun 2013 19:18:46 -0500</li>
<li>Authentication-results: symauth.service.identifier</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com;	s=20120113;	h=content-type:mime-version:subject:from:in-reply-to:date:cc	:content-transfer-encoding:message-id:references:to:x-mailer;	bh=ov2J6K07w/87uDOGZUeB2ewt0ikep64pPeR6LcTJd40=;	b=oN9A4m64k2TzP29TBitVdX1PHb+r+dGNKVObWlEp6qJh5UM747cQLqtRgwiYNXzGlC	9nrkUa8qhDVmpkE0NSbJ5vEz7F29quv4gxQDJR7vNqAQl8HrORGJH4Kb29sWxZfXOiqq	dKAimMXk3nnzIF3v6R3gbzScSLGzUroitZDsn40BtBHOAGjLPI4U4Zm9gOzG1lRVy9Vq	8i4vHPiQl8Semnl4JpF1Ow78UaWTq2RyTM9I9EId+21kJCyLlBFYpgo57CXhjvCmB5+I	VHMJHElTe9ns/wuTkyvTAgz31xbBUNeL1gGii4gLl8nwcPuQrJmW1H1GiiKKF4zeD5OG	Ha4A==</li>
</ul>
<hr>
<pre>To get the obvious questions out of the way first...
Are you closing your sockets when you're done with them?  Waiting/Hoping for garbage collection to reclaim your sockets for you is a bad idea...  (Symptoms would look just like what you're experiencing...).

Moises

On Jun 1, 2013, at 3:19 AM, Ben Spink &lt;email@hidden&gt; wrote:

&gt; Just noticed this start happening with a particular client.  Things are great for a while, then suddenly all the sockets from the JVM fail to connect to the server for no apparent reason.
&gt;
&gt; The server is still online, the server isn't recognizing any incoming connections to it (log doesn't show a connection received), and the client machine from Terminal can telnet to the server port and get a connection (and the server logs the connection).
&gt;
&gt; ----------------------------------------------------------------------------
&gt; Thu May 30 18:28:46 PDT 2013:java.net.SocketException: Socket closed
&gt; Thu May 30 18:28:46 PDT 2013:java.net.PlainSocketImpl.socketConnect:-2
&gt; Thu May 30 18:28:46 PDT 2013:java.net.AbstractPlainSocketImpl.doConnect:339
&gt; Thu May 30 18:28:46 PDT 2013:java.net.AbstractPlainSocketImpl.connectToAddress:200
&gt; Thu May 30 18:28:46 PDT 2013:java.net.AbstractPlainSocketImpl.connect:182
&gt; Thu May 30 18:28:46 PDT 2013:java.net.SocksSocketImpl.connect:391
&gt; Thu May 30 18:28:46 PDT 2013:java.net.Socket.connect:579
&gt; Thu May 30 18:28:46 PDT 2013:java.net.Socket.connect:528
&gt; Thu May 30 18:28:46 PDT 2013:java.net.Socket.&lt;init&gt;:425
&gt; Thu May 30 18:28:46 PDT 2013:java.net.Socket.&lt;init&gt;:208
&gt; Thu May 30 18:28:46 PDT 2013:com.crushftp.client.Common.getSocket:1122
&gt; ----------------------------------------------------------------------------
&gt;
&gt; Line 1122 that has the exception occur is this:
&gt;
&gt; return new Socket(u.getHost(), u.getPort());
&gt;
&gt; So this socket is brand new, hasn't been touched or closed by another thread, etc.  I don't see any possibility in how this scenario can occur...yet it seems to reliably start failing after a few hours of running.  JVM isn't throwing OOM errors, or any other errors that I can see.
&gt;
&gt;
&gt; This java client app is being run as a signed app from web start.  It makes connections regularly.
&gt;
&gt; This isn't the only stack trace with this issue either.  Another thread that also makes a HttpUrlConnection to the server has the same exception occur.
&gt;
&gt; ----------------------------------------------------------------------------
&gt; Fri May 31 15:13:12 PDT 2013:serverSettingsRetriever:java.net.SocketException: Socket closed
&gt; Fri May 31 15:13:12 PDT 2013:java.net.PlainSocketImpl.socketConnect:-2
&gt; Fri May 31 15:13:12 PDT 2013:java.net.AbstractPlainSocketImpl.doConnect:339
&gt; Fri May 31 15:13:12 PDT 2013:java.net.AbstractPlainSocketImpl.connectToAddress:200
&gt; Fri May 31 15:13:12 PDT 2013:java.net.AbstractPlainSocketImpl.connect:182
&gt; Fri May 31 15:13:12 PDT 2013:java.net.SocksSocketImpl.connect:391
&gt; Fri May 31 15:13:12 PDT 2013:java.net.Socket.connect:579
&gt; Fri May 31 15:13:12 PDT 2013:sun.security.ssl.SSLSocketImpl.connect:618
&gt; Fri May 31 15:13:12 PDT 2013:sun.security.ssl.BaseSSLSocketImpl.connect:160
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.NetworkClient.doConnect:180
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.http.HttpClient.openServer:378
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.http.HttpClient.openServer:473
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.https.HttpsClient.&lt;init&gt;:270
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.https.HttpsClient.New:327
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient:191
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.http.HttpURLConnection.plainConnect:931
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect:177
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.http.HttpURLConnection.getOutputStream:1090
&gt; Fri May 31 15:13:12 PDT 2013:sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream:250
&gt; Fri May 31 15:13:12 PDT 2013:com.crushftp.Daemon.getCrushSyncPrefs:361
&gt; ----------------------------------------------------------------------------
&gt;
&gt;
&gt; Where line 361 is:
&gt;
&gt; OutputStream out = uric.getOutputStream();
&gt;
&gt; I have only had this reported from a client using OS X.  Multiple machines report the same error.  Its as if the JVM stops allowing outbound connections as the server doesn't see the attempts to reach it, and the exception indicates the socket its creating is already closed...
&gt;
&gt; It took 2 hours, 45 minutes roughly for this to occur on the last test.
&gt;
&gt; Any help on what I can do?
&gt;
&gt; Thanks,
&gt; Ben
&gt; _______________________________________________
&gt; Do not post admin requests to the list. They will be ignored.
&gt; Java-dev mailing list      (email@hidden)
&gt; Help/Unsubscribe/Update your Subscription:
&gt;
&gt; This email sent to email@hidden


 _______________________________________________
Do not post admin requests to the list. They will be ignored.
Java-dev mailing list      (email@hidden)
Help/Unsubscribe/Update your Subscription:

This email sent to email@hidden
</pre>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: Java7 Socket Closed Exception</a></strong>
<ul><li><em>From:</em> Ben Spink &lt;email@hidden&gt;</li></ul></li>
</ul></li></ul>
<TABLE WIDTH="100%" BORDER="0">
<TR><TD><B>References:</B></TD><TD>&nbsp;</TD></TR>
<TR><TD>&nbsp;</TD><TD>><B><a name="00000" href="msg00000.html">Java7 Socket Closed Exception</a></B> (From: Ben Spink &lt;email@hidden&gt;)</TD></TR>
</TABLE>
<BR>
<ul>
<li>Prev by Date:
<strong><a href="msg00001.html">Re: Java-dev Digest, Vol 10, Issue 74</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00003.html">Re: Java7 Socket Closed Exception</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00000.html">Java7 Socket Closed Exception</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00003.html">Re: Java7 Socket Closed Exception</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="index.html#00002"><strong>Date</strong></a></li>
<li><a href="threads.html#00002"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

</body>
</html>


<!-- BEGIN MAILING LISTS FOOTER -->
<center>
<br>
<table width="680" border="0" cellpadding="0" cellspacing="0" id="nav">
  <tr align="center" valign="middle">
   <td nowrap id="one"><a href="http://lists.apple.com">Home</a></td>
   <td nowrap id="two"><a href="http://lists.apple.com/archives/">Archives</a></td>
   <td nowrap id="four"><a href="http://lists.apple.com/tc.html">Terms/Conditions</a></td>
   <td nowrap id="five"><a href="http://lists.apple.com/contact.html">Contact</a></td>
   <td nowrap id="six"><a href="http://rss.lists.apple.com">RSS</a></td>
   <td nowrap id="seven"><a href="http://lists.apple.com/mailman/listinfo">Lists</a></td>
   <td nowrap id="eight"><a href="http://lists.apple.com/about.html">About</a></td>
 </tr>
</table>

<!-- COPYRIGHT INFORMATION -->
<br>
<font size="1" COLOR="black">
<p>Visit the Apple Store <a href="http://www.apple.com/store/">online</a> or at <a href="http://www.apple.com/retail/">retail</a> locations.<br>
1-800-MY-APPLE</p>
<p><a href="http://www.apple.com/contact/">Contact Apple</a>&nbsp;|&nbsp;<a href="http://www.apple.com/legal/">Terms of Use</a>&nbsp;|&nbsp;<a href="http
://www.apple.com/legal/privacy/">Privacy Policy</a></p>
<p class="sosumi">Copyright &copy; 2011 Apple Inc. All rights reserved.</p>
</div>
</font>
</center>
<!-- END COPYRIGHT INFORMATION -->

