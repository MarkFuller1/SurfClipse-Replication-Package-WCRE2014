<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<!-- LOCALIZATION RELATED INFORMATION -->
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="20" />
<meta name="LOC_US_CHANGE" content="802109" />
<meta name="LOC_US_SRCFILE" content="//depot/docs/diablo/fm/xml/stax.fm" />
<!-- LOCALIZATION RELATED INFORMATION -->
	
	<title>Using the Streaming API for XML (StAX)

</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="Content-Language" content="en-us" />
	<meta name="description" content="BEA WebLogic Server Documentation" />
	<meta name="keywords" content="WebLogic Server" />
	<style type="text/css" media="all">@import "../styles.css";</style>
	<style type="text/css" media="all">@import "../edocs.css";</style>

<script language="Javascript" src="floatwin.js" type="text/javascript"></script>
<!-- This script opens a new small floating window and puts TOC<i>&lt;name&gt;</i>.html and IX<i>&lt;name&gt;</i>.html files in it and sets a generic popup window code to enable the display of some viewlets in the WebLogic Platform Tour. -->

<script language="JavaScript1.1" src="../search.js" type="text/javascript"></script>
<!-- This script is not for online documents. It is only used by the QuestAgent Java Applet for CD search indexes. -->

<script language="Javascript" src="/global_resources/js/banner.js" type="text/javascript"></script>
<!-- This script outputs the google search form. -->

<script language="Javascript1.1" src="../copyright.js" type="text/javascript"></script>
<!-- This script outputs the correct copyright date and link to copyright page.-->

</head>
<body>
<a name="1098406"></a>
<div class="hide"><a href="#wrap" title="Skip navigation" accesskey="2">Skip navigation</a>.</div>
<script language="Javascript1.1" type="text/javascript">
Banner();
</script>
<noscript>This script outputs the google search URL required for search on edocs documentation.</noscript>




<!-- page contents -->


<!-- breadcrumbs -->
<p class="breadcrumb">

<a href="http://www.oracle.com/technology/documentation/index.html">eDocs Home</a> &gt;



<a href="../index.html">BEA WebLogic Server 9.0 Documentation</a> &gt;

  <a href="index.html">Programming WebLogic XML</a>




&gt; Using the Streaming API for XML (StAX)




</p>

<!-- breadcrumbs END -->

<a name="wrap"></a>
<div id="wrap">
<!-- page title -->
<p class="booktitle">Programming WebLogic XML</p>
<!-- page title end -->

<!-- Doc Nav -->
<table border="0" cellspacing="0" cellpadding="6">
<tr>
<td>&nbsp;</td>
<td>
<a href="programming.html"><img src="../images/doc_nav_prev.gif" width="35" height="44" alt="Previous" title="Previous" border="0" /></a>
</td>

<td>
<td><a href="api.html"><img src="../images/doc_nav_next.gif" width="44" height="44" alt="Next" title="Next" border="0" /></a></td>

<td><img src="../images/doc_nav_dots.gif" width="5" height="44" border="0" alt="vertical dots separating previous/next from contents/index/pdf" /></td>
<td><a href="javascript:OpenWindowToc();" onmouseover="window.status='Table of Contents'; return true" onfocus="window.status='Table of Contents'; return true" onmouseout="window.status=''; return true" onblur="window.status=''; return true" title="Open TOC in new window"><img src="../images/doc_nav_contents.gif" width="52" height="44" alt="Contents" title="Contents" border="0" /></a>
</td>
<td></td>
<td><a href="../pdf/xml.pdf" target="pdf"><img src="../images/doc_nav_pdf.gif" width="59" height="44" alt="View as PDF" title="View as PDF" border="0" /></a></td>

<td>&nbsp;</td>

<td><a href="http://www.adobe.com/products/acrobat/alternate.html" target="_blank"><img src="../images/get_reader.gif" width="52" height="44" alt="Get Adobe Reader" title="Get Adobe Reader" border="0" /></a></td>
</tr>
</table>

<!-- Doc Nav End -->



<!-- CONTENT -->
<h1 class="chaphead"><a name="1098406"></a>Using the Streaming API for XML (StAX)</h1>



<p><a name="1095825"></a>The following sections describe how to use the <em>Streaming API for XML</em> to parse and generate XML documents:</p>

<ul type="square"><li type="square"><a name="1097761"></a><a href="stax.html#1088369">Overview of the Streaming API for XML</a></li>
<li type="square"><a name="1106870"></a><a href="stax.html#1099797">Parsing XML With the XMLStreamReader Interface: Typical Steps</a></li>
<li type="square"><a name="1106874"></a><a href="stax.html#1104639">Generating XML Using the XMLStreamWriter Interface: Typical Steps</a></li>
<li type="square"><a name="1098762"></a><a href="stax.html#1097624">Properties Defined for the XMLInputFactory Interface</a></li>
<li type="square"><a name="1104663"></a><a href="stax.html#1099912">Properties Defined for the XMLOutputFactory Interface</a></li>
</ul><p>&nbsp;</p>
<hr noshade="noshade" />
<h1 class="head1"><a name="1088369"></a>Overview of the Streaming API for XML</h1>

<p><a name="1088379"></a>The Streaming API for XML (StAX), specified by <a href=http://www.jcp.org/en/jsr/detail?id=173>JSR-173</a> of Java Community Process, provides an easy and intuitive means of parsing and generating XML documents. It is similar to the SAX API, but enables a procedural, stream-based handling of XML documents rather than requiring you to write SAX event handlers, which can get complicated when you work with complex XML documents. In other words, StAX gives you more control over parsing than the SAX.</p>


<p><a name="1088371"></a>When a program parses an XML document using SAX, the program must create event listeners that listen to parsing events as they occur; the program must react to events rather than ask for a specific event. By contrast, when you use StAX, you can methodically step through an XML document, ask for certain types of events (such as the start of an element), iterate over the attributes of an element, skip ahead in the document, stop processing at any time, get sub-elements of a particular element, and filter out elements as desired. Because you are asking for events rather than reacting to them, using the StAX is often referred to as <em>pull parsing</em>. </p>


<p><a name="1096440"></a>StAX includes two APIs, the <em>cursor API</em> and the <em>event-iterator API</em>, either of which can be used for reading and writing XML. The following sections describe each API and their particular strengths.</p>

<h2 class="head2"><a name="1095979"></a>Description of the Cursor API</h2>
<p><a name="1098480"></a>The basic function of the cursor API is to allow programmers to parse and generate XML as easily and efficiently as possible. Of the two APIs in StAX, this is the one that most programmers would use.</p>


<p><a name="1106477"></a>The cursor API iterates over a set of events, such as start elements, comments, and attributes, although the events may be unrealized. The cursor API has two main interfaces: <code style="font-family: courier">XMLStreamReader</code> for parsing XML and <code style="font-family: courier">XMLStreamWriter</code> for generating XML.</p>

<h3 class="head3"><a name="1106301"></a>The XMLStreamReader Interface</h3>
<p><a name="1106359"></a>The cursor API uses the <code style="font-family: courier">XMLStreamReader</code> interface to move a virtual cursor over an XML document and allow access to the data and underlying state through method calls such as <code style="font-family: courier">hasNext()</code>, <code style="font-family: courier">next()</code>, <code style="font-family: courier">getEventType()</code>, and <code style="font-family: courier">getText()</code>. The <code style="font-family: courier">XMLStreamReader</code> interface allows only forward, read-only access to the XML. </p>


<p><a name="1106302"></a>Use the <code style="font-family: courier">XMLInputFactory</code> class to create a new instance of the <code style="font-family: courier">XMLStreamReader</code>. You can set a variety of properties when you get a new reader; for details, see <a href="stax.html#1097624">Properties Defined for the XMLInputFactory Interface</a>. </p>


<p><a name="1106306"></a>When you use the <code style="font-family: courier">next()</code> method of the <code style="font-family: courier">XMLStreamReader</code> interface to parse XML, the reader gets the next parsing event and returns an integer that identifies the type of event just read. Parsing events correspond to sections of an XML document, such as the XML declaration, start and end element tags, character data, white space, comments, and processing instructions. The <code style="font-family: courier">XMLStreamConstant</code> interface specifies the event to which the integer returned by the <code style="font-family: courier">next()</code> method corresponds. You can also use the <code style="font-family: courier">getEventType()</code> method of <code style="font-family: courier">XMLStreamReader</code> to determine the event type.</p>


<p><a name="1106307"></a>The <code style="font-family: courier">XMLStreamReader</code> interface has numerous methods for getting at the specific data in the XML document. Some of these methods include:</p>

<ul type="square"><li type="square"><a name="1106308"></a><code style="font-family: courier">getLocalName()</code>&#8212;Returns the local name of the current event.</li>
<li type="square"><a name="1106309"></a><code style="font-family: courier">getPrefix()</code>&#8212;Returns the prefix of the current event.</li>
<li type="square"><a name="1106310"></a><code style="font-family: courier">getAttributeXXX()</code>&#8212;Set of methods that return information about the current attribute event.</li>
<li type="square"><a name="1106311"></a><code style="font-family: courier">getNamespaceXXX()</code>&#8212;Set of methods that return information about the current namespace event.</li>
<li type="square"><a name="1106312"></a><code style="font-family: courier">getTextXXX()</code>&#8212;Set of methods that return information about the current text event.</li>
<li type="square"><a name="1106313"></a><code style="font-family: courier">getPIData()</code>&#8212;Returns the data section of the current processing instruction event.</li>
</ul>
<p><a name="1106314"></a>Only certain methods are valid for each event type; the StAX processor throws a <code style="font-family: courier">java.lang.IllegalStateException</code> if you try to call a method on an invalid event type. For example, it is an error to try to call the <code style="font-family: courier">getAttributeXXX()</code> methods on a namespace event. See the <a href=http://www.jcp.org/en/jsr/detail?id=173>StAX specification</a> for the complete list of events and their valid <code style="font-family: courier">XMLStreamReader</code> methods.</p>

<h3 class="head3"><a name="1106473"></a>The XMLStreamWriter Interface</h3>
<p><a name="1106424"></a> The cursor API uses the <code style="font-family: courier">XMLStreamWriter</code> interface to specify how to generate XML. </p>


<p><a name="1106425"></a>Use the <code style="font-family: courier">XMLOutputFactory</code> class to create a new instance of the <code style="font-family: courier">XMLStreamWriter</code>. You can set a property for repairing namespaces and prefixes when you get a new writer; for details, see <a href="stax.html#1099912">Properties Defined for the XMLOutputFactory Interface</a>. </p>


<p><a name="1106429"></a> The <code style="font-family: courier">XMLStreamWriter</code> interface defines a set of <code style="font-family: courier">writeXXX()</code> methods for writing standard parts of an XML document, such as:</p>

<ul type="square"><li type="square"><a name="1106430"></a><code style="font-family: courier">writeStartElement()</code></li>
<li type="square"><a name="1106431"></a><code style="font-family: courier">writeEndDocument()</code></li>
<li type="square"><a name="1106432"></a><code style="font-family: courier">writeAttribute()</code></li>
<li type="square"><a name="1106433"></a>writeNamespace()</li>
<li type="square"><a name="1106434"></a><code style="font-family: courier">writeCData()</code></li>
</ul>
<p><a name="1106435"></a>Each part of an XML document, including the attributes and the namespaces, must be explicitly written using these methods.</p>


<p><a name="1106436"></a>Use the <code style="font-family: courier">flush()</code> method to write any cached data to the output and the <code style="font-family: courier">close()</code> method to close the writer and free up any resources.</p>


<p><a name="1106437"></a>The <code style="font-family: courier">XMLStreamWriter</code>, when generating XML, does not check that the generated document is well-formed; it is the programmer's responsibility to create a well-formed XML document. To print the special characters <code style="font-family: courier">&amp;</code>, <code style="font-family: courier">&lt;</code>, and <code style="font-family: courier">&gt;</code>, use the <code style="font-family: courier">writeCharacters()</code> method. </p>

<h2 class="head2"><a name="1096053"></a>Description of the Event Iterator API</h2>
<p><a name="1104670"></a>The event iterator API is a layer on top of the cursor API. It is easy to extend and facilitates pipelining. Pipelining refers to multiple XML-to-XML transformations. By using the event iterator API, programmers do not have to deserialize and serialize the XML at each stage of the pipeline; rather, only at each end of the pipeline and use the API methods such as <code style="font-family: courier">nextEvent()</code> to communicate at the middle stages. The event iterator API has two main interfaces: <code style="font-family: courier">XMLEventReader</code> for parsing XML and <code style="font-family: courier">XMLEventWriter</code> for generating XML.</p>


<p><a name="1106961"></a>Because the cursor API is the most commonly used API in StAX, this section does not describe in detail how to use the event iterator API, other than showing an example. For details about using this API, see the <a href=http://www.jcp.org/en/jsr/detail?id=173>StAX specification</a>.</p>


<p><a name="1107225"></a>The following example shows a simple program that uses the <code style="font-family: courier">XMLEventReader</code> interface of StAX to parse an XML document. The program takes a single parameter, an XML file, and uses it to create an <code style="font-family: courier">XMLEventReader</code> object. The program then uses the reader to iterate over and print the stream of events.</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106995"></a>package examples.event;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106997"></a>import java.io.FileReader;<br>import javax.xml.stream.*;<br>import javax.xml.stream.events.*;<br>import javax.xml.stream.util.*;<br>import javax.xml.namespace.QName;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1107003"></a>/**<br> * A simple example to iterate over events<br> *<br> * @author Copyright (c) 2002 by BEA Systems. All Rights Reserved.<br> */</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1107009"></a>public class Parse {<br>  private static String filename = null;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1107012"></a>  private static void printUsage() {<br>    System.out.println("usage: java examples.event.Parse &lt;xmlfile&gt;");<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1107016"></a>  public static void main(String[] args) throws Exception {<br>    try {<br>      filename = args[0];<br>    } catch (ArrayIndexOutOfBoundsException aioobe){<br>      printUsage();<br>      System.exit(0);<br>    }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1107024"></a>    XMLInputFactory factory = XMLInputFactory.newInstance();<br>    XMLEventReader r =<br>      factory.createXMLEventReader(new FileReader(filename));<br>    while(r.hasNext()) {<br>      XMLEvent e = r.nextEvent();<br>      System.out.println("ID:"+e.hashCode()+"["+e+"]");<br>    }<br>  }<br>}</CODE></pre></blockquote><h2 class="head2"><a name="1097611"></a>Main Interfaces and Classes of StAX</h2>
<p><a name="1095950"></a>The following table describes the main interfaces and classes of the Streaming API for XML.<div class="tblmargin">
<table border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000" cellpadding="3" cellspacing="0">

<p class="tabletitle"><a name="1079013"></a>Table 4-1   Main Interfaces and Classes of the Streaming API for XML</p>


	<tr bgcolor="#CCCCCC">
		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1079015"></a>Interface or Class</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1096546"></a>Used in Cursor or Event Iterator API?</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1079163"></a>Description</p>


		</th>
	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079017"></a><code style="font-family: courier">XMLInputFactory class</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096548"></a>Both</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079165"></a>Factory class used to create an <code style="font-family: courier">XMLStreamReader</code> or <code style="font-family: courier">XMLEventReader</code> instance.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079019"></a><code style="font-family: courier">XMLOutputFactory class</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096550"></a>Both</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079167"></a>Factory class used to create an <code style="font-family: courier">XMLStreamWriter</code> or <code style="font-family: courier">XMLEventWriter</code> instance.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1087134"></a><code style="font-family: courier">XMLEventFactory class</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096552"></a>Event Iterator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1087136"></a>Factory class used to create an <code style="font-family: courier">XMLEvent</code> instance.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079021"></a><code style="font-family: courier">XMLStreamReader interface</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096554"></a>Cursor</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079169"></a>Interface used to parse an XML document. Enables you to peek at the next event, get the next event, and check for more events.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079023"></a><code style="font-family: courier">XMLStreamWriter interface</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096556"></a>Cursor</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079171"></a>Interface used to generate an XML document. It provides a set of <code style="font-family: courier">write</code><code style="font-family: courier; font-style: italic">XXX</code><code style="font-family: courier">()</code> methods for generating specific parts of an XML document, such as start elements, attributes, and so on.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079025"></a><code style="font-family: courier">XMLEventReader interface</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096558"></a>Event Iterator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098625"></a>Interface used to parse XML events. It enables you to peek at the next event, get the next event, and check for more events.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079027"></a><code style="font-family: courier">XMLEventWriter interface</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096560"></a>Event Iterator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079175"></a>Interface used to generate XML. It uses the <code style="font-family: courier">add()</code> method to add XMLEvents to the output stream.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098561"></a>XMLEvent</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098563"></a>Event Iterator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098565"></a>Base interface for handling events. All specific XML events extend from <code style="font-family: courier">XMLEvent</code>, such as <code style="font-family: courier">StartElement</code>, <code style="font-family: courier">Attribute</code>, and so on.</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079029"></a><code style="font-family: courier">XMLStreamException exception</code></p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1096562"></a>Both</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1079177"></a>Base exception for unexpected processing errors, such as lack of well-formed XML document structure.</p>


		</td>

	</tr>

</table>
</div>
</p>

<p>&nbsp;</p>
<hr noshade="noshade" />
<h1 class="head1"><a name="1099797"></a>Parsing XML With the XMLStreamReader Interface: Typical Steps</h1>

<p><a name="1106583"></a>The following procedure describes the typical steps for using the <code style="font-family: courier">XMLStreamReader</code> interface of the StAX cursor API to parse an XML document. The procedure uses the example from <a href="stax.html#1099660">Example of Parsing XML Using StAX</a> in its description.</p>

<ol>
<div class="lists">
<li value="1"><a name="1106587"></a>Import the <code style="font-family: courier">javax.xml.stream.*</code> classes.</li>
</div><div class="lists">
<li value="2"><a name="1106589"></a>Use the <code style="font-family: courier">XMLInputFactory.newInstance()</code> method to instantiate an <code style="font-family: courier">XMLInputFactory</code>, as shown in the following code excerpt:</li>
</div><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106590"></a>XMLInputFactory xmlif = XMLInputFactory.newInstance();</CODE></pre></blockquote><dl><dt><p class="listpara"><a name="1106594"></a>See <a href="stax.html#1097624">Properties Defined for the XMLInputFactory Interface</a> for the list of properties you can set.</p>
</dl><div class="lists">
<li value="3"><a name="1106595"></a>Use the <code style="font-family: courier">XMLInputFactory.createXMLStreamReader()</code> method to instantiate an <code style="font-family: courier">XMLStreamReader</code> object based on an XML document. </li>
</div><dl><dt><p class="listpara"><a name="1106599"></a>See <a href="stax.html#1073967">Getting the XMLStreamReader Object</a> for more details.</p>
</dl><div class="lists">
<li value="4"><a name="1106600"></a>Parse the XML document, using the <code style="font-family: courier">hasNext()</code> and <code style="font-family: courier">next()</code> methods to step through the XML events, as shown in the following code excerpt:</li>
</div><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106601"></a>while(xmlr.hasNext()){<br>      printEvent(xmlr);<br>      xmlr.next();</CODE></pre></blockquote><dl><dt><p class="listpara"><a name="1106602"></a>In the example, <code style="font-family: courier">xmlr</code> is the <code style="font-family: courier">XMLStreamReader</code> instance and the local <code style="font-family: courier">printEvent()</code> method (not part of the StAX API) determines the specific event type, as described in the next step.</p>
</dl><div class="lists">
<li value="5"><a name="1106603"></a>While parsing the XML document, determine the current specific event type and take appropriate action. Event types include the start and end of an XML document, the start and end of an XML element, comments, entity references, and so on. </li>
</div><dl><dt><p class="listpara"><a name="1106607"></a>See <a href="stax.html#1076314">Determining the Specific XML Event Type</a>.</p>
</dl><div class="lists">
<li value="6"><a name="1106608"></a>If the current event type is a start element or end element, optionally get its attributes. </li>
</div><dl><dt><p class="listpara"><a name="1106612"></a>See <a href="stax.html#1103432">Getting the Attributes of an Element</a>.</p>
</dl><div class="lists">
<li value="7"><a name="1106613"></a>If the current event type is a start or end element, optionally get its namespaces.</li>
</div><dl><dt><p class="listpara"><a name="1106617"></a>See <a href="stax.html#1101131">Getting the Namespaces of an Element</a>.</p>
</dl><div class="lists">
<li value="8"><a name="1106618"></a>If the current event type includes text data, such as a CDATA or comment, optionally get the actual data.</li>
</div><dl><dt><p class="listpara"><a name="1106622"></a>See <a href="stax.html#1104140">Getting Text Data</a>.</p>
</dl><div class="lists">
<li value="9"><a name="1106623"></a>Optionally, get location information, such as the line number or column number, of the current event.</li>
</div><dl><dt><p class="listpara"><a name="1106627"></a>See <a href="stax.html#1104501">Getting Location Information</a>.</p>
</dl><div class="lists">
<li value="10"><a name="1106628"></a>Close the stream. </li>
</div><dl><dt><p class="listpara"><a name="1106632"></a>See <a href="stax.html#1087407">Closing the Input Stream</a>.</p>
</dl></ol>
<h2 class="head2"><a name="1099660"></a>Example of Parsing XML Using StAX</h2>
<p><a name="1099829"></a>The following example shows a simple program that uses the <code style="font-family: courier">XMLStreamReader</code> interface of StAX to parse an XML document.</p>


<p><a name="1100895"></a>The program takes a single parameter, an XML file, and uses it to create an XMLStreamReader object. The program then uses the reader to iterate over the stream of events, determining the type of each event, such as the start of an XML element, the list of attributes of an element, a processing instruction, and so on. The program prints out information about these events, using internal methods to print out the list of attributes and namespaces when appropriate.</p>


<p><a name="1101063"></a>The code in bold is described in later sections.</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100342"></a>package examples.basic;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100344"></a>import java.io.FileReader;<br>import java.util.Iterator;<br><code style="font-family: courier; font-weight: bold">import javax.xml.stream.*;<br></code>import javax.xml.namespace.QName;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104687"></a>/**<br> * This is a simple parsing example that illustrates<br> * the XMLStreamReader class.<br> *<br> * @author Copyright (c) 2003 by BEA Systems. All Rights Reserved.<br> */</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100358"></a>public class Parse {<br>  private static String filename = null;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100361"></a>  private static void printUsage() {<br>    System.out.println("usage: java examples.basic.Parse &lt;xmlfile&gt;");<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100365"></a>  public static void main(String[] args) throws Exception {<br>    try {<br>      filename = args[0];<br>    } catch (ArrayIndexOutOfBoundsException aioobe){<br>      printUsage();<br>      System.exit(0);<br>    }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100373"></a>    //<br>    // Get an input factory<br>    //<br><code style="font-family: courier; font-weight: bold">    XMLInputFactory xmlif = XMLInputFactory.newInstance();<br></code><code style="font-family: courier">    System.out.println("FACTORY: " + xmlif);</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100379"></a>    //<br>    // Instantiate a reader<br>    //<br><code style="font-family: courier; font-weight: bold">    XMLStreamReader xmlr = xmlif.createXMLStreamReader(new FileReader(filename));<br></code>    System.out.println("READER:  " + xmlr + "\n");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100386"></a>    //<br>    // Parse the XML<br>    //<br><code style="font-family: courier; font-weight: bold">    while(xmlr.hasNext()){<br>      printEvent(xmlr);<br>      xmlr.next();<br>    }</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100421"></a>    //<br>    // Close the reader<br>    //<br><code style="font-family: courier; font-weight: bold">    xmlr.close();</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100426"></a>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100428"></a>  private static void printEvent(XMLStreamReader xmlr) {</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104691"></a><code style="font-family: courier; font-weight: bold">    System.out.print("EVENT:["+xmlr.getLocation().getLineNumber()+"]["+<br>                     xmlr.getLocation().getColumnNumber()+"] ");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104690"></a>    System.out.print(" [");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100926"></a><code style="font-family: courier; font-weight: bold">    switch (xmlr.getEventType()) {</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100738"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.START_ELEMENT:<br>      System.out.print("&lt;");<br>      printName(xmlr);<br>      printNamespaces(xmlr);<br>      printAttributes(xmlr);<br>      System.out.print("&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100441"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.END_ELEMENT:<br>      System.out.print("&lt;/");<br>      printName(xmlr);<br>      System.out.print("&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100447"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.SPACE:</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100739"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.CHARACTERS:<br>      int start = xmlr.getTextStart();<br>      int length = xmlr.getTextLength();<br>      System.out.print(new String(xmlr.getTextCharacters(),<br>                                  start,<br>                                  length));<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100455"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.PROCESSING_INSTRUCTION:<br>      System.out.print("&lt;?");<br>      if (xmlr.hasText())<br>        System.out.print(xmlr.getText());<br>      System.out.print("?&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100461"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.CDATA:<br>      System.out.print("&lt;![CDATA[");<br>      start = xmlr.getTextStart();<br>      length = xmlr.getTextLength();<br>      System.out.print(new String(xmlr.getTextCharacters(),<br>                                  start,<br>                                  length));<br>      System.out.print("]]&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100501"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.COMMENT:<br>      System.out.print("&lt;!--");<br>      if (xmlr.hasText())<br>        System.out.print(xmlr.getText());<br>      System.out.print("--&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100507"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.ENTITY_REFERENCE:<br>      System.out.print(xmlr.getLocalName()+"=");<br>      if (xmlr.hasText())<br>        System.out.print("["+xmlr.getText()+"]");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100512"></a><code style="font-family: courier; font-weight: bold">    case XMLStreamConstants.START_DOCUMENT:<br>      System.out.print("&lt;?xml");<br>      System.out.print(" version='"+xmlr.getVersion()+"'");<br>      System.out.print(" encoding='"+xmlr.getCharacterEncodingScheme()+"'");<br>      if (xmlr.isStandalone())<br>        System.out.print(" standalone='yes'");<br>      else<br>        System.out.print(" standalone='no'");<br>      System.out.print("?&gt;");<br>      break;</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100523"></a>    }<br>    System.out.println("]");<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100532"></a>  private static void printName(XMLStreamReader xmlr){<br><code style="font-family: courier; font-weight: bold">    if(xmlr.hasName()){<br>      String prefix = xmlr.getPrefix();<br>      String uri = xmlr.getNamespaceURI();<br>      String localName = xmlr.getLocalName();<br></code>      printName(prefix,uri,localName);<br>    }<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100541"></a>  private static void printName(String prefix,<br>                                String uri,<br>                                String localName) {<br>    if (uri != null &amp;&amp; !("".equals(uri)) ) System.out.print("['"+uri+"']:");<br>    if (prefix != null) System.out.print(prefix+":");<br>    if (localName != null) System.out.print(localName);<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100818"></a>  private static void printAttributes(XMLStreamReader xmlr){<br><code style="font-family: courier; font-weight: bold">    for (int i=0; i &lt; xmlr.getAttributeCount(); i++) {<br>      printAttribute(xmlr,i);<br></code>    }<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100820"></a>  private static void printAttribute(XMLStreamReader xmlr, int index) {<br><code style="font-family: courier; font-weight: bold">    String prefix = xmlr.getAttributePrefix(index);<br>    String namespace = xmlr.getAttributeNamespace(index);<br>    String localName = xmlr.getAttributeLocalName(index);<br>    String value = xmlr.getAttributeValue(index);<br></code>    System.out.print(" ");<br>    printName(prefix,namespace,localName);<br>    System.out.print("='"+value+"'");<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100601"></a>  private static void printNamespaces(XMLStreamReader xmlr){<br><code style="font-family: courier; font-weight: bold">    for (int i=0; i &lt; xmlr.getNamespaceCount(); i++) {<br>      printNamespace(xmlr,i);<br></code>    }<br>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1100607"></a>  private static void printNamespace(XMLStreamReader xmlr, int index) {<br><code style="font-family: courier; font-weight: bold">    String prefix = xmlr.getNamespacePrefix(index);<br>    String uri = xmlr.getNamespaceURI(index);<br></code>    System.out.print(" ");<br>    if (prefix == null)<br>      System.out.print("xmlns='"+uri+"'");<br>    else<br>      System.out.print("xmlns:"+prefix+"='"+uri+"'");<br>  }<br>}</CODE></pre></blockquote><h2 class="head2"><a name="1073967"></a>Getting the XMLStreamReader Object</h2>
<p><a name="1099355"></a>Use the <code style="font-family: courier">XMLInputFactory.createXMLStreamReader()</code> method to instantiate an <code style="font-family: courier">XMLStreamReader</code> object based on an XML document, as shown in the following code excerpt:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1099433"></a>XMLStreamReader xmlr = xmlif.createXMLStreamReader(new FileReader(filename));</CODE></pre></blockquote>
<p><a name="1099356"></a>In the example, <code style="font-family: courier">xmlif</code> is the <code style="font-family: courier">XMLInputFactory</code> instance.</p>


<p><a name="1099447"></a>The various signatures of the <code style="font-family: courier">createXMLStreamReader()</code> method allow for the following XML document formats as parameters:</p>

<ul type="square"><li type="square"><a name="1099357"></a><code style="font-family: courier">java.io.InputStream</code></li>
<li type="square"><a name="1099358"></a><code style="font-family: courier">java.io.Reader</code> (shown in the example)</li>
<li type="square"><a name="1099359"></a><code style="font-family: courier">javax.xml.transform.Source</code> (specified in the <a href=http://java.sun.com/xml/>JAXP API</a>)</li>
</ul><h2 class="head2"><a name="1076314"></a>Determining the Specific XML Event Type</h2>
<p><a name="1102586"></a>To determine the specific event type while parsing an XML document, use either the <code style="font-family: courier">XMLStreamReader.next()</code> or <code style="font-family: courier">XMLStreamReader.getEventType()</code> methods. The <code style="font-family: courier">next()</code> method reads the next event and returns an integer which identifies the read event type; the <code style="font-family: courier">getEventType()</code> method simply returns the integer identifying the current event type. The <code style="font-family: courier">XMLStreamConstants</code> superinterface of <code style="font-family: courier">XMLStreamReader</code> defines the event type constants, shown in the following list:</p>

<ul type="square"><li type="square"><a name="1102714"></a><code style="font-family: courier">XMLStreamConstants.ATTRIBUTE</code></li>
<li type="square"><a name="1102718"></a><code style="font-family: courier">XMLStreamConstants.CDATA</code></li>
<li type="square"><a name="1102722"></a><code style="font-family: courier">XMLStreamConstants.CHARACTERS</code></li>
<li type="square"><a name="1102726"></a><code style="font-family: courier">XMLStreamConstants.COMMENT</code></li>
<li type="square"><a name="1102730"></a><code style="font-family: courier">XMLStreamConstants.DTD</code></li>
<li type="square"><a name="1102734"></a><code style="font-family: courier">XMLStreamConstants.END_DOCUMENT</code></li>
<li type="square"><a name="1102738"></a><code style="font-family: courier">XMLStreamConstants.END_ELEMENT</code></li>
<li type="square"><a name="1102742"></a><code style="font-family: courier">XMLStreamConstants.ENTITY_DECLARATION</code></li>
<li type="square"><a name="1102746"></a><code style="font-family: courier">XMLStreamConstants.ENTITY_REFERENCE</code></li>
<li type="square"><a name="1102750"></a><code style="font-family: courier">XMLStreamConstants.NAMESPACE</code></li>
<li type="square"><a name="1102754"></a><code style="font-family: courier">XMLStreamConstants.NOTATION_DECLARATION</code></li>
<li type="square"><a name="1102758"></a><code style="font-family: courier">XMLStreamConstants.PROCESSING_INSTRUCTION</code></li>
<li type="square"><a name="1102886"></a><code style="font-family: courier">XMLStreamConstants.SPACE</code></li>
<li type="square"><a name="1102882"></a><code style="font-family: courier">XMLStreamConstants.START_DOCUMENT</code></li>
<li type="square"><a name="1102878"></a><code style="font-family: courier">XMLStreamConstants.START_ELEMENT</code></li>
</ul>
<p><a name="1102509"></a>The following example shows how to use the Java <code style="font-family: courier">case</code> statement to determine the particular type of event that was returned by the <code style="font-family: courier">XMLStreamReader.next()</code> method.   The example uses the <code style="font-family: courier">XMLStreamReader.getEventType()</code> method to determine the integer event type of the current event returned by the <code style="font-family: courier">next()</code> method. For simplicity, the example simply prints that an event has been found; later sections show further processing of the event.</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103284"></a>switch (xmlr.getEventType()) {</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103285"></a>case XMLStreamConstants.START_ELEMENT:<br>  System.out.print("Start Element\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103154"></a>case XMLStreamConstants.END_ELEMENT:<br>  System.out.print("End Element\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103158"></a>case XMLStreamConstants.SPACE:<br>  System.out.print("Space\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103162"></a>case XMLStreamConstants.CHARACTERS:<br>  System.out.print("Characters\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103166"></a>case XMLStreamConstants.PROCESSING_INSTRUCTION:<br>  System.out.print("Processing Instrcutions\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103170"></a>case XMLStreamConstants.CDATA:<br>  System.out.print("CDATA\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103174"></a>case XMLStreamConstants.COMMENT:<br>  System.out.print("Comment\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103178"></a>case XMLStreamConstants.DTD:<br>  System.out.print("DTD\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103182"></a>case XMLStreamConstants.ENTITY_REFERENCE:<br>  System.out.print("Entity Reference\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103186"></a>case XMLStreamConstants.ENTITY_DECLARATION:<br>  System.out.print("Entity Declaration\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103190"></a>case XMLStreamConstants.START_DOCUMENT:<br>  System.out.print("Start Document\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103194"></a>case XMLStreamConstants.END_DOCUMENT:<br>  System.out.print("End Document\n");<br>  break;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104692"></a>}</CODE></pre></blockquote><h2 class="head2"><a name="1073269"></a>Getting the Full Name of an Element</h2>
<p><a name="1103433"></a>The full name of an element includes its prefix, namespace URI, and local name; use the <code style="font-family: courier">getPrefix()</code>, <code style="font-family: courier">getNamespaceURI()</code>, and <code style="font-family: courier">getLocalName()</code> methods of the <code style="font-family: courier">XMLStreamReader</code> interface, respectively, to get this information once you determine that the current event is a start or end element. </p>


<p><a name="1104148"></a>For example, assume the <code style="font-family: courier">case</code> statement for a start element event in the sample program looks like the following:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103452"></a>case XMLStreamConstants.START_ELEMENT:</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103453"></a>  System.out.print("&lt;");<br>  printName(xmlr);<br>  printNamespaces(xmlr);<br>  printAttributes(xmlr);<br>  System.out.print("&gt;");<br>  break;</CODE></pre></blockquote><p><strong><a name="1103485"></a>Note:	</strong> The <code style="font-family: courier">printNamespaces()</code> and <code style="font-family: courier">printAttributes()</code> methods are discussed in other sections. </p>

<p><a name="1103615"></a>The two local <code style="font-family: courier">printName()</code> methods can use the <code style="font-family: courier">getXXX()</code> methods as follows:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103502"></a>private static void printName(XMLStreamReader xmlr){<br>  if(xmlr.hasName()){<br>    String prefix = xmlr.getPrefix();<br>    String uri = xmlr.getNamespaceURI();<br>    String localName = xmlr.getLocalName();<br>    printName(prefix,uri,localName);<br>  }<br>}</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103511"></a>private static void printName(String prefix,<br>                              String uri,<br>                              String localName) {<br>  if (uri != null &amp;&amp; !("".equals(uri)) ) System.out.print("['"+uri+"']:");<br>  if (prefix != null) System.out.print(prefix+":");<br>  if (localName != null) System.out.print(localName);<br>}</CODE></pre></blockquote><h2 class="head2"><a name="1103432"></a>Getting the Attributes of an Element</h2>
<p><a name="1103420"></a>Once you determine that the current event is a start element, end element, or attribute, use the <code style="font-family: courier">getAttributeXXX()</code> methods of the <code style="font-family: courier">XMLStreamReader</code> interface to get the list of attributes and their values. </p>

<p><strong><a name="1103729"></a>Caution:	</strong> You can use the <code style="font-family: courier">getAttributeXXX()</code> methods <em>only</em> on start element, end element, and attribute events; a <code style="font-family: courier">java.lang.IllegalStateException</code> is thrown if you try to execute the methods on any other type of event.</p>

<p><a name="1103730"></a>Use the <code style="font-family: courier">getAttributeCount()</code> method to return the number of attributes of the current element and use the count in a loop that iterates over the list of attributes. The method does not include namespaces in the count. Additional <code style="font-family: courier">getAttributeXXX()</code> methods return the prefix, namespace URI, local name, and value for a particular attribute. </p>


<p><a name="1103791"></a>For example, assume the <code style="font-family: courier">case</code> statement for a start element event in our sample program looks like the following:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103792"></a>case XMLStreamConstants.START_ELEMENT:</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103793"></a>  System.out.print("&lt;");<br>  printName(xmlr);<br>  printNamespaces(xmlr);<br>  printAttributes(xmlr);<br>  System.out.print("&gt;");<br>  break;</CODE></pre></blockquote><p><strong><a name="1104166"></a>Note:	</strong> The <code style="font-family: courier">printName()</code> and <code style="font-family: courier">printNamespaces()</code> methods are discussed in other sections. </p>

<p><a name="1103783"></a>The following local <code style="font-family: courier">printAttributes()</code> method shows one way of iterating through the list of attributes; because attribute indices are zero-based, the <code style="font-family: courier">for</code> loop starts at 0:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103812"></a>private static void printAttributes(XMLStreamReader xmlr){</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103814"></a>  for (int i=0; i &lt; xmlr.getAttributeCount(); i++) {<br>    printAttribute(xmlr,i);<br>  }<br>}</CODE></pre></blockquote>
<p><a name="1103824"></a>The following local <code style="font-family: courier">printAttribute()</code> method shows how to print out all the information for a particular attribute:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103915"></a>private static void printAttribute(XMLStreamReader xmlr, int index) {<br>  String prefix = xmlr.getAttributePrefix(index);<br>  String namespace = xmlr.getAttributeNamespace(index);<br>  String localName = xmlr.getAttributeLocalName(index);<br>  String value = xmlr.getAttributeValue(index);<br>  System.out.print(" ");<br>  printName(prefix,namespace,localName);<br>  System.out.print("='"+value+"'");<br>}</CODE></pre></blockquote>
<p><a name="1103862"></a>The <code style="font-family: courier">printName()</code> method is described in <a href="stax.html#1073269">Getting the Full Name of an Element</a>.</p>

<h2 class="head2"><a name="1101131"></a>Getting the Namespaces of an Element</h2>
<p><a name="1104048"></a>Once you determine that the current event is a start element, end element, or namespace, use the <code style="font-family: courier">getNamespaceXXX()</code> methods of the <code style="font-family: courier">XMLStreamReader</code> interface to get the list of namespaces declared for the event. </p>

<p><strong><a name="1104049"></a>Caution:	</strong> You can use the <code style="font-family: courier">getNamespaceXXX()</code> methods <em>only</em> on start element, end element, and namespace events; a <code style="font-family: courier">java.lang.IllegalStateException</code> is thrown if you try to execute the methods on any other type of event.</p>

<p><a name="1104050"></a>Use the <code style="font-family: courier">getNamespaceCount()</code> method to return the number of namespaces declared for the current event, and use the count in a loop that iterates over the list. If the current event is an end element, the count refers to the number of namespaces that are about to go out of scope. Additional <code style="font-family: courier">getNamespaceXXX()</code> methods return the prefix and namespace URI for a particular namespace. </p>


<p><a name="1104156"></a>For example, assume the <code style="font-family: courier">case</code> statement for a start element event in our sample program looks like the following:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103930"></a>case XMLStreamConstants.START_ELEMENT:</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103931"></a>  System.out.print("&lt;");<br>  printName(xmlr);<br>  printNamespaces(xmlr);<br>  printAttributes(xmlr);<br>  System.out.print("&gt;");<br>  break;</CODE></pre></blockquote><p><strong><a name="1104185"></a>Note:	</strong> The <code style="font-family: courier">printName()</code> and <code style="font-family: courier">printAttributes()</code> methods are discussed in other sections. </p>

<p><a name="1103932"></a>The following local <code style="font-family: courier">printNamespaces()</code> method shows one way of iterating through the list of namespaces for the start element; because namespace indices are zero-based, the <code style="font-family: courier">for</code> loop starts at 0:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103980"></a>private static void printNamespaces(XMLStreamReader xmlr){<br>  for (int i=0; i &lt; xmlr.getNamespaceCount(); i++) {<br>    printNamespace(xmlr,i);<br>  }<br>}</CODE></pre></blockquote>
<p><a name="1103975"></a>The following local <code style="font-family: courier">printNamespace()</code> method shows how to print out all the information for a particular namespace:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1103998"></a>private static void printNamespace(XMLStreamReader xmlr, int index) {<br>  String prefix = xmlr.getNamespacePrefix(index);<br>  String uri = xmlr.getNamespaceURI(index);<br>  System.out.print(" ");<br>  if (prefix == null)<br>    System.out.print("xmlns='"+uri+"'");<br>  else<br>    System.out.print("xmlns:"+prefix+"='"+uri+"'");<br>}</CODE></pre></blockquote>
<p><a name="1103373"></a>The <code style="font-family: courier">getNamespacePrefix()</code> method returns null for the default namespace declaration.</p>

<h2 class="head2"><a name="1104140"></a>Getting Text Data</h2>
<p><a name="1104214"></a>The <code style="font-family: courier">XMLStreamReader</code> interface includes various <code style="font-family: courier">getTextXXX()</code> methods for getting text data from events such as comments and CDATA. </p>


<p><a name="1104364"></a>Use the <code style="font-family: courier">getTextStart()</code> method to get the offset into the text character array where the first character of the current text event is stored. Use the <code style="font-family: courier">getTextLength()</code> method to get the length of the sequence of characters within the text character array. Finally, use the <code style="font-family: courier">getTextCharacters()</code> method to return this character array for the current event. The character array contains text information about only the current event; as soon as you call the <code style="font-family: courier">next()</code> method to read the next event on the input stream, the character array is filled with new information.</p>


<p><a name="1104385"></a>The following example shows how to print out text data for the CDATA event:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104426"></a>case XMLStreamConstants.CDATA:<br>  System.out.print("&lt;![CDATA[");<br>  start = xmlr.getTextStart();<br>  length = xmlr.getTextLength();<br>  System.out.print(new String(xmlr.getTextCharacters(),<br>                              start,<br>                              length));<br>  System.out.print("]]&gt;");<br>  break;</CODE></pre></blockquote>
<p><a name="1104439"></a>If you want to first check that the character event actually has text, use the <code style="font-family: courier">hasText()</code> method, as shown in the following example:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104478"></a>case XMLStreamConstants.COMMENT:<br>  System.out.print("&lt;!--");<br>  if (xmlr.hasText())<br>    System.out.print(xmlr.getText());<br>  System.out.print("--&gt;");<br>  break;</CODE></pre></blockquote><h2 class="head2"><a name="1104501"></a>Getting Location Information</h2>
<p><a name="1104533"></a>The <code style="font-family: courier">Location</code> interface of the StAX API provides methods for getting location information about an event, such as the line number or column number, as well as the public ID and system ID of the XML being parsed. Use the <code style="font-family: courier">getLocation()</code> method of the <code style="font-family: courier">XMLStreamReader</code> interface to return a <code style="font-family: courier">Location</code> object for the current event, as shown in the following example:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104557"></a>System.out.print("EVENT:["+xmlr.getLocation().getLineNumber()+"]["+<br>                     xmlr.getLocation().getColumnNumber()+"] ");</CODE></pre></blockquote><h2 class="head2"><a name="1087407"></a>Closing the Input Stream</h2>
<p><a name="1104636"></a>It is good programming practice to close the <code style="font-family: courier">XMLStreamReader</code> explicitly when you are finished with it, to free up resources.   To close the reader, use the <code style="font-family: courier">XMLStreamReader.close()</code> method, as shown in the following example:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1104649"></a>//<br>// Close the reader<br>//<br>xmlr.close();</CODE></pre></blockquote><p>&nbsp;</p>
<hr noshade="noshade" />
<h1 class="head1"><a name="1104639"></a>Generating XML Using the XMLStreamWriter Interface: Typical Steps</h1>

<p><a name="1087063"></a>The following procedure describes the typical steps for using the <code style="font-family: courier">XMLStreamWriter</code> interface of the StAX cursor API to generate a new XML document. </p>

<ol>
<div class="lists">
<li value="1"><a name="1101623"></a>Import the <code style="font-family: courier">javax.xml.stream.*</code> classes.</li>
</div><div class="lists">
<li value="2"><a name="1101631"></a>Use the <code style="font-family: courier">XMLOutputFactory.newInstance()</code> method to instantiate an <code style="font-family: courier">XMLOutputFactory</code>, as shown in the following code excerpt:</li>
</div><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1101633"></a>XMLOutputFactory xmlof = XMLOutputFactory.newInstance();</CODE></pre></blockquote><dl><dt><p class="listpara"><a name="1101730"></a>See <a href="stax.html#1099912">Properties Defined for the XMLOutputFactory Interface</a> for the list of properties you can set.</p>
</dl><div class="lists">
<li value="3"><a name="1101677"></a>Use the <code style="font-family: courier">XMLOutputFactory.createXMLStreamWriter()</code> method to instantiate an <code style="font-family: courier">XMLStreamWriter</code> object, passing it the name of the file or object that will contain the XML. </li>
</div><dl><dt><p class="listpara"><a name="1101637"></a>See <a href="stax.html#1101694">Getting the XMLStreamWriter Object</a> for more details.</p>
</dl><div class="lists">
<li value="4"><a name="1077527"></a>Add the XML declaration to the output. <a href="stax.html#1105345">Adding the XML Declaration to the Output Stream</a>.</li>
</div><div class="lists">
<li value="5"><a name="1105756"></a>Add standard XML objects, such as start elements, comments, and characters, to the output. See <a href="stax.html#1074020">Adding Standard XML Events to the Output Stream</a>.</li>
</div><div class="lists">
<li value="6"><a name="1105762"></a>Add attributes and namespace declarations to a start element. See <a href="stax.html#1105299">Adding Attributes and Namespace Declarations to a Start Element</a>.</li>
</div><div class="lists">
<li value="7"><a name="1105767"></a>Close the output stream. See <a href="stax.html#1074024">Closing the Output Stream</a>.</li>
</div></ol>
<h2 class="head2"><a name="1106752"></a>Example of Generating XML Using StAX</h2>
<p><a name="1106753"></a>The following example shows a simple program that uses the <code style="font-family: courier">XMLStreamWriter</code> interface of StAX to generate an XML document.</p>


<p><a name="1106754"></a>The program first creates an instance of an <code style="font-family: courier">XMLStreamWriter</code>, specifying that the output be written to the file <code style="font-family: courier">outFile.xml</code> in the current directory. Then, using various <code style="font-family: courier">writeXXX()</code> methods, it builds an XML file that looks like the following:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106755"></a>&lt;?xml version='1.0' encoding='utf-8'?&gt;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106756"></a>&lt;!--this is a comment--&gt;<br>&lt;person xmlns:one="http://namespaceOne" gender="f"&gt;<br>    &lt;one:name hair="pigtails" freckles="yes"&gt;Pippi Longstocking&lt;/one:name&gt;<br>&lt;/person&gt;</CODE></pre></blockquote>
<p><a name="1106757"></a>The <code style="font-family: courier">XMLStreamWriter</code> interface does not check for that an XML document is well-formed; it is the programmer's responsibility to ensure that, for example, each start element has a corresponding end element, and so on. The example also shows how to use the <code style="font-family: courier">writeCharacters("\n")</code> method to add new lines to the output to make the XML more readable when writing to a text file.</p>


<p><a name="1106758"></a>The code in bold is described in later sections.</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106759"></a>package examples.basic;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106760"></a>import java.io.FileOutputStream;<br>import java.util.Iterator;<br><code style="font-family: courier; font-weight: bold">import javax.xml.stream.*;<br></code>import javax.xml.namespace.QName;</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106761"></a>/**<br> * This is a simple example that illustrates how to use the<br> * the XMLStreamWriter class to generate XML.<br> *<br> * The generated XML file looks like this:<br> *<br> *   &lt;?xml version='1.0' encoding='utf-8'?&gt;<br> *<br> *   &lt;!--this is a comment--&gt;<br> *   &lt;person xmlns:one="http://namespaceOne" gender="f"&gt;<br> *       &lt;one:name hair="pigtails" freckles="yes"&gt;Pippi Longstocking&lt;/one:name&gt;<br> *   &lt;/person&gt;<br> *<br> *<br> * @author Copyright (c) 2003 by BEA Systems. All Rights Reserved.<br> */</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106762"></a>public class Generate {</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106763"></a>  public static void main(String args[]) throws Exception {</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106764"></a>    //<br>    // Get an output factory<br>    //<br><code style="font-family: courier; font-weight: bold">    XMLOutputFactory xmlof = XMLOutputFactory.newInstance();<br></code>    System.out.println("FACTORY: " + xmlof);</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106765"></a>    //<br>    // Instantiate a writer<br>    //<br><code style="font-family: courier; font-weight: bold">    XMLStreamWriter xmlw = xmlof.createXMLStreamWriter(new FileOutputStream ("outFile.xml"));<br></code>    System.out.println("READER:  " + xmlw + "\n");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106766"></a>    //<br>    // Generate the XML<br>    //</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106767"></a>    // Write the default XML declaration<br><code style="font-family: courier; font-weight: bold">    xmlw.writeStartDocument();<br>    xmlw.writeCharacters("\n");<br>    xmlw.writeCharacters("\n");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106768"></a>    // Write a comment<br><code style="font-family: courier; font-weight: bold">    xmlw.writeComment("this is a comment");<br>    xmlw.writeCharacters("\n");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106769"></a>    // Write the root element "person" with a single attribute "gender"<br><code style="font-family: courier; font-weight: bold">    xmlw.writeStartElement("person");<br>    xmlw.writeNamespace("one", "http://namespaceOne");<br>    xmlw.writeAttribute("gender","f");<br>    xmlw.writeCharacters("\n");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106770"></a>    // Write the "name" element with some content and two attributes<br><code style="font-family: courier; font-weight: bold">    xmlw.writeCharacters("    ");<br>    xmlw.writeStartElement("one", "name", "http://namespaceOne");<br>    xmlw.writeAttribute("hair","pigtails");<br>    xmlw.writeAttribute("freckles","yes");<br>    xmlw.writeCharacters("Pippi Longstocking");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106771"></a>    // End the "name" element<br><code style="font-family: courier; font-weight: bold">    xmlw.writeEndElement();<br>    xmlw.writeCharacters("\n");</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106772"></a>    // End the "person" element<br><code style="font-family: courier; font-weight: bold">    xmlw.writeEndElement();</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106773"></a>    // End the XML document<br><code style="font-family: courier; font-weight: bold">    xmlw.writeEndDocument();</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106774"></a>    // Close the XMLStreamWriter to free up resources<br><code style="font-family: courier; font-weight: bold">    xmlw.close();</code></CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106775"></a>  }</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106776"></a>}</CODE></pre></blockquote><h2 class="head2"><a name="1101694"></a>Getting the XMLStreamWriter Object</h2>
<p><a name="1101771"></a>Use the <code style="font-family: courier">XMLOutputFactory.createXMLStreamWriter()</code> method to instantiate an <code style="font-family: courier">XMLStreamWriter</code> object based on an XML document, as shown in the following code excerpt:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1101772"></a>XMLStreamWriter xmlw = xmlof.createXMLStreamWriter(new FileOutputStream ("outFile.xml"));</CODE></pre></blockquote>
<p><a name="1101773"></a>In the example, <code style="font-family: courier">xmlof</code> is the <code style="font-family: courier">XMLOutputFactory</code> instance.</p>


<p><a name="1101698"></a>The various signatures of the <code style="font-family: courier">createXMLStreamWriter()</code> method allow for the following XML document formats as parameters:</p>

<ul type="square"><li type="square"><a name="1101699"></a><code style="font-family: courier">java.io.OutputStream </code>(shown in the example)</li>
<li type="square"><a name="1101700"></a><code style="font-family: courier">java.io.Writer</code> </li>
<li type="square"><a name="1101702"></a><code style="font-family: courier">javax.xml.transform.Result</code> (specified in the <a href=http://java.sun.com/xml/>JAXP API</a>)</li>
</ul><h2 class="head2"><a name="1105345"></a>Adding the XML Declaration to the Output Stream</h2>
<p><a name="1105349"></a>Use the <code style="font-family: courier">XMLStreamWriter.writeStartDocument()</code> method to add the XML declaration as the first line of the XML document, as shown in the following code excerpt:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105356"></a>xmlw.writeStartDocument();</CODE></pre></blockquote>
<p><a name="1105371"></a>With no arguments, the method writes the default XML declaration:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105375"></a>&lt;?xml version='1.0' encoding='utf-8'?&gt;</CODE></pre></blockquote>
<p><a name="1105383"></a>If you want to specify a different encoding or XML version, use the following flavors of the <code style="font-family: courier">writeStartDocument()</code> method:</p>

<ul type="square"><li type="square"><a name="1105398"></a><code style="font-family: courier">writeStartDocument(java.lang.String version)</code></li>
<li type="square"><a name="1105422"></a><code style="font-family: courier">writeStartDocument(java.lang.String encoding, java.lang.String version)</code></li>
</ul>
<p><a name="1105448"></a>Setting the encoding with the <code style="font-family: courier">writeStartDocument()</code> method does not set the actual encoding of the underlying output; it simply specifies what value is written for the <code style="font-family: courier">encoding</code> attribute of the XML declaration. To actually set the encoding of the output, you must specify the <code style="font-family: courier">encoding</code> parameter when creating the instance of the <code style="font-family: courier">XMLStreamWriter</code> with the appropriate <code style="font-family: courier">XMLOutputFactory.createXMLStreamWriter()</code> method.</p>

<h2 class="head2"><a name="1074020"></a>Adding Standard XML Events to the Output Stream</h2>
<p><a name="1105539"></a>Use the <code style="font-family: courier">XMLStreamWriter.write</code><code style="font-family: courier; font-style: italic">XXX</code><code style="font-family: courier">()</code> methods to add standard XML events, such as start elements, end elements, comments, CDATA, entity references, and so on to the output stream.The <code style="font-family: courier; font-style: italic">XXX</code> refers to the particular event, such as <code style="font-family: courier">writeStartElement()</code>, <code style="font-family: courier">writeEndElement()</code>, <code style="font-family: courier">writeComment()</code>, <code style="font-family: courier">writeCData()</code>, and so on. You can create most elements by passing the name or text data as a <code style="font-family: courier">String</code>.</p>


<p><a name="1105620"></a>The <code style="font-family: courier">XMLStreamWriter</code> interface does not validate your data, nor does it check that the document is well-formed; it is the programmer's responsibility to ensure that, for example, each start element has a corresponding end element, and so on. It is also up to the programmer to ensure that the start and end element events are correctly nested. To make the output XML more human-readable when writing to a text file, use the <code style="font-family: courier">writeCharacters("\n")</code> method to add new lines in appropriate places.</p>


<p><a name="1105694"></a>For example, assume you want to create the following snippet of XML:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105544"></a>&lt;!-- This is a comment --&gt;<br>&lt;name&gt;Jane Doe&lt;/name&gt;</CODE></pre></blockquote>
<p><a name="1105545"></a>The Java code to add this element to an output stream is as follows:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105713"></a>xmlw.writeComment("This is a comment");<br>xmlw.writeCharacters("\n");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105716"></a>xmlw.writeStartElement("name");<br>xmlw.writeCharacters("Jane Doe");<br>xmlw.writeEndElement();<br>xmlw.writeCharacters("\n");</CODE></pre></blockquote><h2 class="head2"><a name="1105299"></a>Adding Attributes and Namespace Declarations to a Start Element</h2>
<p><a name="1105770"></a>Use the <code style="font-family: courier">writeAttribute()</code> method right after a start element event to add attributes to the element.   You can specify a prefix for the attribute, as well as the URI it is bound to, or specify no prefix at all.</p>


<p><a name="1105775"></a>For example, assume you want to create the following snippet of XML:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105791"></a>&lt;person gender="f"&gt;</CODE></pre></blockquote>
<p><a name="1105803"></a>The Java code to produce this XML is as follows:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105812"></a>xmlw.writeStartElement("person");<br>xmlw.writeAttribute("gender","f");<br>xmlw.writeCharacters("\n");</CODE></pre></blockquote>
<p><a name="1105844"></a>Use the <code style="font-family: courier">writeNamespace()</code> method to write a namespace to the output stream. It is up to the programmer to ensure that the current event allows namespace writing, such as start element; if the current event does not allow namespace writing, a <code style="font-family: courier">javax.xml.stream.XMLStreamException</code> is thrown. Use appropriate flavors of other <code style="font-family: courier">writeXXX()</code> methods to specify a prefix for an event and the URI to which it is bound. </p>


<p><a name="1105969"></a>For example, the following XML output shows a namespace declaration for the <code style="font-family: courier">&lt;person&gt;</code> element, and the <code style="font-family: courier">one</code> prefix specified for the <code style="font-family: courier">&lt;one&gt;</code> child element:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1105888"></a>&lt;person xmlns:one="http://namespaceOne" gender="f"&gt;<br>    &lt;one:name hair="pigtails" freckles="yes"&gt;Pippi Longstocking&lt;/one:name&gt;<br>&lt;/person&gt;</CODE></pre></blockquote>
<p><a name="1106015"></a>The Java code to produce this XML is as follows:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106030"></a>    // Write the root element "person" with a single attribute "gender"<br>    xmlw.writeStartElement("person");<br>    xmlw.writeNamespace("one", "http://namespaceOne");<br>    xmlw.writeAttribute("gender","f");<br>    xmlw.writeCharacters("\n");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106036"></a>    // Write the "name" element with some content and two attributes<br>    xmlw.writeCharacters("    ");<br>    xmlw.writeStartElement("one", "name", "http://namespaceOne");<br>    xmlw.writeAttribute("hair","pigtails");<br>    xmlw.writeAttribute("freckles","yes");<br>    xmlw.writeCharacters("Pippi Longstocking");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106043"></a>    // End the "name" element<br>    xmlw.writeEndElement();<br>    xmlw.writeCharacters("\n");</CODE></pre></blockquote><blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106047"></a>    // End the "person" element<br>    xmlw.writeEndElement();</CODE></pre></blockquote><h2 class="head2"><a name="1074024"></a>Closing the Output Stream</h2>
<p><a name="1107544"></a>It is good programming practice to explicitly close the <code style="font-family: courier">XMLStreamWriter</code> when you are finished with it to free up resources.   To close the writer, use the <code style="font-family: courier">XMLStreamWriter.close()</code> method, as shown in the following example:</p>

<blockquote><pre><CODE style="font-family: courier; font-size: 10pt"><a name="1106187"></a>    // Close the XMLStreamWriter to free up resources<br>    xmlw.close();</CODE></pre></blockquote><p>&nbsp;</p>
<hr noshade="noshade" />
<h1 class="head1"><a name="1097624"></a>Properties Defined for the XMLInputFactory Interface</h1>

<p><a name="1098769"></a>The following table lists the standard properties you can set when using the <code style="font-family: courier">XMLInputFactory</code> to generate an <code style="font-family: courier">XMLStreamReader</code> or <code style="font-family: courier">XMLEventReader</code> object. </p>

<p><strong><a name="1099144"></a>Note:	</strong> All properties in the following table are preceded with <code style="font-family: courier">javax.xml.stream</code>, such as <code style="font-family: courier">javax.xml.stream.isValidating</code>.<div class="tblmargin">
<table border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000" cellpadding="3" cellspacing="0">

<p class="tabletitle"><a name="1098785"></a>Table 4-2   Standard XMLInputFactory Properties</p>


	<tr bgcolor="#CCCCCC">
		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1098793"></a>Property</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1098795"></a>Description</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1098797"></a>Return Type</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1098799"></a>Default Value</p>


		</th>
	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098801"></a>isValidating</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098803"></a>Specifies whether implementation-specific DTD validation is enabled or disabled.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098805"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098807"></a>False</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098809"></a>isNamespaceAware</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098811"></a>Specifies whether namespace processing is enabled or disabled. Used for XML 1.0 support.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098813"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098815"></a>True</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098817"></a>isCoalescing</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098819"></a>Specifies whether to coalesce adjacent adjacent character data.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098821"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098823"></a>False</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098825"></a>isReplacingEntityReferences</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098827"></a>Specifies whether internal entity references should be replaced with their replacement text and reported as characters.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098829"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098831"></a>True</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098833"></a>isSupportingExternalEntities</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098835"></a>Specifies whether to resolve external parsed entities.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098837"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098839"></a>False</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098841"></a>supportDTD</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098843"></a>Specifies whether the processor used is one that supports or does not support DTDs.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098845"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098847"></a>True</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098849"></a>reporter</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1099241"></a>Specifies the implementation of javax.xml.stream.XMLReporter that should be used.Specifies the implementation of javax.xml.stream.XMLReporter that should be used.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098853"></a>XMLReporter</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098855"></a>Null</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098857"></a>resolver</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1099225"></a>Specifies the implementation of javax.xml.stream.XMLResolver that should be used.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098861"></a>XMLResolver</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098863"></a>Null</p>


		</td>

	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098865"></a>allocator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1099235"></a>Specifies the implementation of javax.xml.stream.util.XMLEventAllocator that should be used.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098869"></a>util.XMLEventAllocator</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1098871"></a>Null</p>


		</td>

	</tr>

</table>
</div>
</p>
<p>&nbsp;</p>
<hr noshade="noshade" />
<h1 class="head1"><a name="1099912"></a>Properties Defined for the XMLOutputFactory Interface</h1>

<p><a name="1099913"></a>The following table lists the standard properties you can set when using the <code style="font-family: courier">XMLOutputFactory</code> to generate an <code style="font-family: courier">XMLStreamWriter</code> or <code style="font-family: courier">XMLEventWriter</code> object. </p>

<p><strong><a name="1100045"></a>Note:	</strong> All properties in the following table are preceded with <code style="font-family: courier">javax.xml.stream</code>, such as <code style="font-family: courier">javax.xml.stream.isValidating</code>.<div class="tblmargin">
<table border="1" bordercolorlight="#FFFFFF" bordercolordark="#000000" cellpadding="3" cellspacing="0">

<p class="tabletitle"><a name="1100059"></a>Table 4-3   Standard XMLOutputFactory Properties</p>


	<tr bgcolor="#CCCCCC">
		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1100067"></a>Property</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1100069"></a>Description</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1100071"></a>Return Type</p>


		</th>		<th align="left" valign="top" scope="col">
			
<p class="cellheading"><a name="1100073"></a>Default Value</p>


		</th>
	</tr>
	<tr>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1100075"></a>isRepairingNamespaces</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1100077"></a>Specifies that the writer use default namespace prefix declarations.</p>


<p class="table"><a name="1100202"></a>There are strict rules about how the StAX processor repairs namespaces and prefixes when generating XML. For details, see the <a href=http://www.jcp.org/en/jsr/detail?id=173>StAX specification</a>.</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1100079"></a>Boolean</p>


		</td>
		<td align="left" valign="top" scope="row">
			
<p class="table"><a name="1100081"></a>False</p>


		</td>

	</tr>

</table>
</div>
</p>

<p><a name="1100146"></a></p>
</div>
<!-- BACK TO TOP -->
<p>&nbsp;</p>
<table cellspacing="5" cellpadding="5" border="0">
	<tr>
		<td align="left" valign="middle" width="125"><a href="#wrap"><img border="0" src="../images/_.gif" width="1" height="1" alt="Skip navigation bar" /></a>
			&nbsp;<a href="stax.html"><img src="../images/backtop.gif" width="90" height="25" alt="Back to Top" title="Back to Top" border="0" /></a>
		</td>
		<td align="left" valign="middle" width="85">
			<a href="programming.html"><img src="../images/prevtop.gif" width="82" height="25" alt="Previous" title="Previous" border="0" /></a>
		</td>
		<td align="left" valign="middle" width="85">
			<a href="api.html"><img src="../images/nexttop.gif" width="66" height="25" alt="Next" title="Next" border="0" /></a>
		</td>
	</tr>
</table>


<br />

<!-- BACK TO TOP end -->


<!-- FOOTER begin -->

<div id="footer">
<a href="http://www.bea.com/contact/index.shtml">Contact BEA</a>&nbsp;|&nbsp; 
<a href="mailto:docsupport@bea.com">Feedback</a>&nbsp;|&nbsp;
<a href="http://www.bea.com/framework.jsp?CNT=privacy.htm&amp;FP=/content/legal/">Privacy</a>
&nbsp;|&nbsp;
<script language="Javascript1.1" type="text/javascript">
Copyright();
</script>
<noscript><a href="http://www.oracle.com/html/copyright.html">&copy; BEA Systems</a></noscript>

</div>

<!-- FOOTER end -->


</body>
</html>
