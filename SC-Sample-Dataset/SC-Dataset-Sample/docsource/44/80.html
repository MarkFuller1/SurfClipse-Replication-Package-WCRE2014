<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head><script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
	<title>Learning Java</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="http://dwn0odqttrkhc.cloudfront.net/assets/book-e6243cc4cc3595e325ee635b31c10604.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="http://dwn0odqttrkhc.cloudfront.net/assets/default-9bd75a59838b84de4e4348e3a0a35694.css" media="screen" rel="stylesheet" type="text/css" />
	<script src="http://dwn0odqttrkhc.cloudfront.net/assets/application-984298d79dbc8412cdf579684d9338f6.js" type="text/javascript"></script>
	<script src="http://dwn0odqttrkhc.cloudfront.net/assets/book-756862b9ed04d945ca53de5b8f106a83.js" type="text/javascript"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<link href="http://dwn0odqttrkhc.cloudfront.net/assets/janrain-53eb5abed55992e21943b9d3373923e8.css" media="all" rel="stylesheet" type="text/css" />
	<meta content="authenticity_token" name="csrf-param" />
<meta content="QtKpdvPKWbk7YW7YaJBIUaKojDWuyukwCEgjw+t+38Q=" name="csrf-token" />
	<script type="text/javascript" charset="utf-8">
  	
		app.data = new classes.Data({"controller":{"controller":"books","action":"html"},"capturable":{"capture_server":"https://oreilly.janraincapture.com","client_id":"6n5q2k9vesqgn93k3mhevka6c3c3rsre","app_url":"https://login.oreilly.com","app_id":"xsnca5wmqe9vxv97ygh5vfejkd","load_js":"d16s8pqtk4uodx.cloudfront.net/login.oreilly.com/load.js"},"user":{"id":null,"account":"LoggedOutAccount","email":"","name":null,"gravatar_url":"http://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?s=40&d=identicon"},"book":{"isbn":"1234000001805","chapter":"ch18.html","toc_url":"/books/1234000001805/toc_html","metadata_url":"http://d4bb7yl96lyl1.cloudfront.net/1234000001805/metadata/metadata_9db2a74acefa69c1a828180428c77a831e176dc8.json"},"abilities":{"can_destroy_all_comments":false,"can_create_comments":false},"advertisement":{"body":"<style>      \r\n.ad-profile-image {\r\n  padding: 0;\r\n  margin: 0;\r\n  max-height: 30px;\r\n }\r\n\r\n.top-banner {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 34px;\r\n  z-index: 99999;\r\n}\r\n\r\np.banner-text {\r\n  margin: 0;\r\n  text-align: center;\r\n  padding-right: 10px;\r\n  width: 400px;\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n   p.banner-text {\r\n     width: 100%;\r\n     text-align: center;\r\n  }\r\n}\r\n\r\nspan.ebook-advantage {\r\n  font-size: smaller;\r\n  display: block;\r\n}\r\n\r\ndiv.banner-container {\r\n  margin: 0 auto;\r\n}\r\n\r\ndiv.banner-container ul {\r\n  margin: 0 auto;\r\n}\r\n\r\ndiv.topad { padding-bottom: 5px; }\r\n\r\ndiv.banner-container ul li {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n}\r\n\r\ndiv.banner-container li p {\r\n  padding-top: 0;\r\n  margin-top: 0;\r\n}\r\n\r\ndiv.banner-container li.sponsor {\r\n  border-right: 1px solid rgb(125, 154, 180);\r\n  margin-right: 5px;\r\n  padding-right: 10px;\r\n}\r\n\r\ndiv.banner-container .webbutton {\r\n  background-color: #3994b6;\r\n  display: inline-block;\r\n  padding: 10px;\r\n  -webkit-border-radius: 5px;\r\n  -moz-border-radius: 5px;\r\n  border-radius: 5px;\r\n  color: #FFF;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n</style>\r\n   \r\n<div style=\"color: rgb(125, 154, 180);\">\r\n\r\n<div class=\"banner-container\">\r\n\r\n<ul>\r\n\r\n<li class=\"sponsor\">\r\n<!--CONFERENCE SPONSOR IMAGE-->\r\n<a href=\"http://www.oscon.com/oscon2013\">\r\n<!--<img src=\"http://orm-other.s3.amazonaws.com/fluent_logo.png\" class=\"ad-profile-image\"/>-->\r\n<img src=\"http://orm-other.s3.amazonaws.com/oscon_logo.png\" class=\"ad-profile-image\"/>\r\n<!--<img src=\"http://orm-other.s3.amazonaws.com/strata_logo.png\" class=\"ad-profile-image\"/>\r\n<img src=\"http://orm-other.s3.amazonaws.com/StrataRx_logo.png\" class=\"ad-profile-image\"/>\r\n<img src=\"http://orm-other.s3.amazonaws.com/velocity_logo.png\" class=\"ad-profile-image\"/>-->\r\n</a>\r\n</li>\r\n\r\n<li>\r\n<!--AD TEXT, 2 LINES, REPLACE LINK URL AS WELL-->\r\n<p class=\"banner-text\">Enjoy this online version of <em>Learning Java</em>. Purchase and download the DRM-free ebook on <a href=\"http://shop.oreilly.com/product/0636920023463.do\">oreilly.com</a>.<span class=\"ebook-advantage\">Learn more about the Oâ€™Reilly <a href=\"http://shop.oreilly.com/category/ebooks.do\">Ebook Advantage</a>.</span></p>\r\n</li>\r\n\r\n<li>\r\n<!--BUY BUTTON-->\r\n<a class=\"webbutton\" href=\"http://shop.oreilly.com/product/0636920023463.do\">Buy the Ebook</a>\r\n</li> \r\n\r\n</ul>\r\n\r\n</div>\r\n\r\n<!--CORNER BANNER (IF NEEDED)-->\r\n<!--<a href=\"http://shop.oreilly.com/product/0636920025245.do\" class=\"top-banner\"><img src=\"http://orm-other.s3.amazonaws.com/banner.png\" /></a>-->\r\n\r\n</div>"}});

		/* Janrain setup */
  	var janrainModal = new JanrainView();
  	$("head").append(janrainModal.render().el);

  	/* segment.io setup */
  	var analytics=analytics||[];analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var r=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["identify","track","trackLink","trackForm","trackClick","trackSubmit","pageview","ab","alias","ready"];for(var s=0;s<i.length;s++)analytics[i[s]]=r(i[s])};
  	
  	analytics.load("hg9h6b9pae");

  	$(function() {
			app.bookapp = new BookApp();
		});
	
	</script>
</head>
<body>
	<div id="menu">
	
		<ul id="menu-left">
			<li id="home-link"><a href="/"><i class="icon-house"></i></a></li>
			<li><a href="/books/1234000001805">Learning Java</a></li>
			<div class="clear"></div>
		</ul>
	
		<ul id="menu-right">
			<li id="comments-link"><a>&nbsp;</a></li>
			<li>
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Chapters</a>
				<div id="toc-popup" class="dropdown-menu"></div>
			</li>
				<li><a href="#" class="capture_modal_open" id="capture_signin_link">Log In / Sign Up</a></li>
			<li id="search-li">
				<form accept-charset="UTF-8" action="/searches" id="search-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
	<input name='search[q]' type="text" placeholder="Search book..." id="book-search" />

	<input id="search_bookId" name="search[bookId]" type="hidden" value="1234000001805" />
	
	<div style='display:none'>
		sorted by: 
		<select name='search[sort]' >
			<option value='relevance'>Relevance</option>
			<option value='authors'>Author(s)</option>
			<option value='title'>Title</option>
		</select>
		returning
		<select name='search[limit]' >
			<option value='5'>5</option>
			<option value='10'>10</option>
			<option value='20'>20</option>
			<option selected="selected" value='50'>50</option>
			<option value='100'>100</option>
		</select>
		values at a time.
	</div>
</form>
			</li>
			<div class="clear"></div>
		</ul>
		<div class="clear"></div>
	
</div>
	<header><div class="navheader">
<table style="width: 100%; ">
<tr><td style="text-align: center; " colspan="3">ChapterÂ 18.Â More Swing Components</td></tr>
<tr>
<td style="width: 20%; text-align: left; ">
<a accesskey="p" href="ch17.html">Prev</a>Â </td>
<td style="width: 60%; text-align: center; ">Â </td>
<td style="width: 20%; text-align: right; ">Â <a accesskey="n" href="ch19.html">Next</a>
</td>
</tr>
</table>
<hr>
</div></header><section class="chapter" data-original-filename="ch18.xml" id="learnjava3-CHP-18"><div class="titlepage"><div><div><h1 class="title">ChapterÂ 18.Â More Swing Components</h1></div></div></div>
<p id="in_the_previous_id6">In the previous chapter, we described most of the components that
  Swing offers for building user interfaces. In this chapter, youâ€™ll find out
  about the rest. These include Swingâ€™s text components, trees, and tables.
  These types of components have considerable depth but are quite easy to use
  if you accept their default options. Weâ€™ll show you the easy way to use
  these components and start to describe the more advanced features of each.
  Later in this chapter, weâ€™ll also give an example of how to implement your
  own, custom components in Swing.</p>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-1">
<div class="titlepage"><div><div><h2 class="title">Text Components</h2></div></div></div>
<p id="swingcomponents_id1"><a id="idx11027" class="indexterm"></a>Swing offers sophisticated text components, from plain-text
    entry boxes to HTML renderers. For full coverage of Swingâ€™s text
    capabilities, see Oâ€™Reillyâ€™s <span class="emphasis"><em>Java Swing</em></span>. In that
    encyclopedic book, several meaty chapters are devoted to text. Itâ€™s a huge
    subject; weâ€™ll just scratch the surface here.</p>
<p id="lets_begin_by_">Letâ€™s begin by examining the simpler text components. <a id="id880622" class="indexterm"></a><code class="literal">JTextField</code> is a
    single-line text editor and <a id="id880632" class="indexterm"></a><code class="literal">JTextArea</code> is a simple,
    multiline text editor. Both <code class="literal">JTextField</code>
    and <code class="literal">JTextArea</code> derive from the
    <a id="id880653" class="indexterm"></a><code class="literal">JTextComponent</code> class,
    which provides the functionality they have in common. This includes
    methods for setting and retrieving the displayed text, specifying whether
    the text is â€œeditableâ€? or read-only, manipulating the cursor position
    within the text, and manipulating text selections.</p>
<p id="observing_chang">Observing changes in text components requires an understanding of
    how the components implement the Model-View-Controller (MVC) architecture.
    You may recall from the last chapter that Swing components implement a
    true MVC architecture. Itâ€™s in the text components that you first get an
    inkling of a clear separation between the M and VC parts of the MVC
    architecture. The model for text components is an object called a <code class="literal">Document</code>. When you add or remove text from a
    <code class="literal">JTextField</code> or a <code class="literal">JTextArea</code>, the corresponding <code class="literal">Document</code> is changed. Itâ€™s the document itself,
    not the visual components, that generates text-related events when
    something changes. To receive notification of <code class="literal">JTextArea</code> changes, therefore, you register with
    the underlying <code class="literal">Document</code>, not with the
    <code class="literal">JTextArea</code> component itself:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1053">    <code class="n">JTextArea</code> <code class="n">textArea</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
    <code class="n">Document</code> <code class="n">doc</code> <code class="o">=</code> <code class="n">textArea</code><code class="o">.</code><code class="na">getDocument</code><code class="o">();</code>
    <code class="n">doc</code><code class="o">.</code><code class="na">addDocumentListener</code><code class="o">(</code><code class="n">someListener</code><code class="o">);</code></pre>
<p id="as_youll_see_i_id2">As youâ€™ll see in an upcoming example, you can easily have more than
    one visual text component use the same underlying <code class="literal">Document</code> data model.</p>
<p id="in_addition_jt">In addition, <code class="literal">JTextField</code>
    components generate <code class="literal">ActionEvent</code>s
    whenever the user presses the Return key within the field. To get these
    events, just implement the <code class="literal">ActionListener</code> interface and register your
    listener using the <code class="literal">addActionListener()</code>
    method.</p>
<p id="the_next_sectio">The next sections contain a couple of simple applications that show
    you how to work with text areas and fields.</p>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.1">
<div class="titlepage"><div><div><h3 class="title">The TextEntryBox Application</h3></div></div></div>
<p id="text_components_id1"><a id="idx11038" class="indexterm"></a> <a id="idx11040" class="indexterm"></a>Our first example, <code class="literal">TextEntryBox</code>, creates a <a id="id880895" class="indexterm"></a><code class="literal">JTextArea</code> and ties it
      to a <a id="id880906" class="indexterm"></a><code class="literal">JTextField</code>, as you can
      see in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-1" title="FigureÂ 18-1.Â The TextEntryBox application">FigureÂ 18-1</a>.</p>
<div class="figure" id="learnjava3-CHP-18-FIG-1">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1054"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1801.png" alt="The TextEntryBox application"></div></div>
<div class="figure-title">FigureÂ 18-1.Â The TextEntryBox application</div>
</div>
<p id="when_the_user_h">When the user hits Return in the <code class="literal">JTextField</code>, we receive an <code class="literal">ActionEvent</code> and add the line to the <code class="literal">JTextArea</code>â€™s display. Try it out. You may have
      to click your mouse in the <code class="literal">JTextField</code>
      to give it focus before typing in it. If you fill up the display with
      lines, you can test-drive the scroll bar:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1055">    <code class="c1">//file: TextEntryBox.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">TextEntryBox</code> <code class="o">{</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"Text Entry Box"</code><code class="o">);</code>

        <code class="kd">final</code> <code class="n">JTextArea</code> <code class="n">area</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
        <code class="n">area</code><code class="o">.</code><code class="na">setFont</code><code class="o">(</code><code class="k">new</code> <code class="n">Font</code><code class="o">(</code><code class="s">"Serif"</code><code class="o">,</code> <code class="n">Font</code><code class="o">.</code><code class="na">BOLD</code><code class="o">,</code> <code class="mi">18</code><code class="o">));</code>
        <code class="n">area</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="s">"Howdy!\n"</code><code class="o">);</code>
        <code class="kd">final</code> <code class="n">JTextField</code> <code class="n">field</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">();</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">area</code><code class="o">),</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">CENTER</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">field</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">SOUTH</code><code class="o">);</code>
        <code class="n">field</code><code class="o">.</code><code class="na">requestFocus</code><code class="o">();</code>

        <code class="n">field</code><code class="o">.</code><code class="na">addActionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">ae</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">area</code><code class="o">.</code><code class="na">append</code><code class="o">(</code><code class="n">field</code><code class="o">.</code><code class="na">getText</code><code class="o">()</code> <code class="o">+</code> <code class="sc">'\n'</code><code class="o">);</code>
            <code class="n">field</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="s">""</code><code class="o">);</code>
          <code class="o">}</code>
        <code class="o">});</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">200</code><code class="o">,</code> <code class="mi">300</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="textentrybox_is"><code class="literal">TextEntryBox</code> is exceedingly
      simple; weâ€™ve done a few things to make it more interesting. We give the
      text area a bigger font using <code class="literal">Component</code>â€™s <a id="id881692" class="indexterm"></a><code class="literal">setFont()</code> method; fonts
      are discussed in <a class="xref" href="ch20.html" title="ChapterÂ 20.Â Drawing with the 2D API">ChapterÂ 20</a>. Finally, we want
      to be notified whenever the user presses Return in the text field, so we
      register an anonymous inner class as a listener for action
      events.</p>
<p id="pressing_return">Pressing Return in the <code class="literal">JTextField</code> generates an action event, and
      thatâ€™s where the fun begins. We handle the event in the <code class="literal">actionPerformed()</code> method of our inner <code class="literal">ActionListener</code> implementation. Then, we use
      the <a id="id881730" class="indexterm"></a><code class="literal">getText()</code> and
      <a id="id881740" class="indexterm"></a><code class="literal">setText()</code> methods to
      manipulate the text that the user has typed. These methods can be used
      for <code class="literal">JTextField</code> and <code class="literal">JTextArea</code>, as these components are both
      derived from the <code class="literal">JTextComponent</code> class
      and, therefore, have some common functionality.</p>
<p id="the_event_handl">The event handler, <code class="literal">actionPerformed()</code>, calls <code class="literal">field.getText()</code> to read the text that the user
      typed into our <code class="literal">JTextField</code>. It then
      adds this text to the <code class="literal">JTextArea</code> by
      calling <code class="literal">area.append()</code>. Finally, we
      clear the text field by calling the method <code class="literal">field.setText("")</code>, preparing it for more
      input.</p>
<p id="remember_the_t">Remember, the text components really are distinct from the text
      data model, the <code class="literal">Document</code>. When you
      call <code class="literal">setText()</code>, <code class="literal">getText()</code>, or <a id="id881824" class="indexterm"></a><code class="literal">append()</code>, these methods
      are shorthand for operations on an underlying <code class="literal">Document</code>.</p>
<p id="by_default_jte">By default, <code class="literal">JTextField</code> and
      <code class="literal">JTextArea</code> are editable; you can type
      and edit in both text components. They can be changed to output-only
      areas by calling <a id="id881856" class="indexterm"></a><code class="literal">setEditable(false)</code>.
      Both text components also support <a id="id881867" class="indexterm"></a><span class="emphasis"><em>selections</em></span>. A selection is a range of
      text that is highlighted for copying, cutting, or pasting in your
      windowing system. You select text by dragging the mouse over it; you can
      then cut, copy, and paste it into other text windows using the default
      keyboard gestures. On most systems, these are Ctrl-C for copy, Ctrl-V
      for paste, and Ctrl-X for cut (on the Mac itâ€™s Command-C, Command-V, and
      Command-X). You can also programmatically manage these operations using
      the <code class="literal">JTextComponent</code>â€™s <code class="literal">cut()</code> , <code class="literal">copy()</code>, <code class="literal">and
      paste()</code> methods. You could, for example, create a pop-up menu
      with the standard cut, copy, and paste options using these methods. The
      current text selection is returned by <a id="id881906" class="indexterm"></a><code class="literal">getSelectedText()</code>, and
      you can set the selection using <a id="id881916" class="indexterm"></a><code class="literal">selectText()</code>, which
      takes an index range or <a id="id881927" class="indexterm"></a><code class="literal">selectAll()</code>.</p>
<p id="notice_how_jtex">Notice how <code class="literal">JTextArea</code> fits
      neatly inside a <code class="literal">JScrollPane</code>. The
      scroll pane gives us the expected scrollbars and scrolling behavior if
      the text in the <code class="literal">JTextArea</code> becomes too
      large for the available space.<a id="id881958" class="indexterm"></a><a id="id881965" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.2">
<div class="titlepage"><div><div><h3 class="title">Formatted Text</h3></div></div></div>
<p id="formatted_text_"><a id="idx11015" class="indexterm"></a> <a id="idx11033" class="indexterm"></a>The <a id="id882003" class="indexterm"></a><code class="literal">JFormattedTextField</code>
      component provides explicit support for editing complex formatted values
      such as numbers and dates. <code class="literal">JFormattedTextField</code> acts somewhat like a
      <code class="literal">JTextField</code>, except that it accepts a
      format-specifying object in its constructor and manages a complex object
      type (such as <code class="literal">Date</code> or <code class="literal">Integer</code>) through its <a id="id882037" class="indexterm"></a><code class="literal">setValue()</code> and
      <a id="id882048" class="indexterm"></a><code class="literal">getValue()</code> methods. The
      following example shows the construction of a simple form with different
      types of formatted fields:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1056">    <code class="kn">import</code> <code class="nn">java.text.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.text.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.util.Date</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code>
               
    <code class="nc">FormattedFields</code>
    <code class="o">{</code>
        <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code> <code class="n">String</code><code class="o">[]</code> <code class="n">args</code> <code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
            <code class="n">Box</code> <code class="n">form</code> <code class="o">=</code> <code class="n">Box</code><code class="o">.</code><code class="na">createVerticalBox</code><code class="o">();</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Name:"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="s">"Joe User"</code><code class="o">)</code> <code class="o">);</code>

            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Birthday:"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">JFormattedTextField</code> <code class="n">birthdayField</code> <code class="o">=</code>
                <code class="k">new</code> <code class="nf">JFormattedTextField</code><code class="o">(</code><code class="k">new</code> <code class="n">SimpleDateFormat</code><code class="o">(</code><code class="s">"MM/dd/yy"</code><code class="o">));</code>
            <code class="n">birthdayField</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code> <code class="k">new</code> <code class="n">Date</code><code class="o">()</code> <code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">birthdayField</code> <code class="o">);</code>

            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Age:"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JFormattedTextField</code><code class="o">(</code><code class="k">new</code> <code class="n">Integer</code><code class="o">(</code><code class="mi">32</code><code class="o">)));</code>

            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Hairs on Body:"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">JFormattedTextField</code> <code class="n">hairsField</code>
                <code class="o">=</code> <code class="k">new</code> <code class="n">JFormattedTextField</code><code class="o">(</code> <code class="k">new</code> <code class="n">DecimalFormat</code><code class="o">(</code><code class="s">"###,###"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">hairsField</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="k">new</code> <code class="n">Integer</code><code class="o">(</code><code class="mi">100000</code><code class="o">));</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">hairsField</code> <code class="o">);</code>

            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Phone Number:"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">JFormattedTextField</code> <code class="n">phoneField</code> <code class="o">=</code>
                <code class="k">new</code> <code class="nf">JFormattedTextField</code><code class="o">(</code> <code class="k">new</code> <code class="n">MaskFormatter</code><code class="o">(</code><code class="s">"(###)###-####"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">phoneField</code><code class="o">.</code><code class="na">setValue</code><code class="o">(</code><code class="s">"(314)555-1212"</code><code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">phoneField</code> <code class="o">);</code>

            <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"User Information"</code><code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">getContentPane</code><code class="o">().</code><code class="na">add</code><code class="o">(</code><code class="n">form</code><code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">pack</code><code class="o">();</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="jformattedtextf_id1"><code class="literal">JFormattedTextField</code> can be
      constructed in a variety of ways. You can use a plain instance of
      <code class="literal">java.lang.Number</code> (e.g., <code class="literal">Integer</code> and <code class="literal">Float</code>) as a prototype or set the layout
      explicitly using a formatting object from the <a id="id883140" class="indexterm"></a><code class="literal">java.text</code> package:
      <code class="literal">java.text.NumberFormat</code>, <code class="literal">java.text.DateFormat</code>, or the more arbitrary
      <code class="literal">java.text.MaskFormatter</code>. The
      <a id="id883169" class="indexterm"></a><code class="literal">NumberFormat</code> and
      <a id="id883181" class="indexterm"></a><code class="literal">DateFormat</code> classes of
      the <code class="literal">java.text</code> package are discussed
      in Chapters <a class="xref" href="ch10.html" title="ChapterÂ 10.Â Working with Text">10</a> and <a class="xref" href="ch11.html" title="ChapterÂ 11.Â Core Utilities">11</a>. <a id="id883214" class="indexterm"></a><code class="literal">MaskFormatter</code> allows
      you to construct arbitrary physical layout conventions. In a moment,
      weâ€™ll discuss input filtering and component validation, which also allow
      you to restrict the kinds of characters that could fill the fields or
      perform arbitrary checks on the data. Finally, we should mention that in
      this example, weâ€™ve used a <a id="id883232" class="indexterm"></a><code class="literal">Box</code> container. A
      <code class="literal">Box</code> is just a Swing container that
      uses a <code class="literal">BoxLayout</code>, which weâ€™ll discuss
      more in <a class="xref" href="ch19.html" title="ChapterÂ 19.Â Layout Managers">ChapterÂ 19</a>.</p>
<p id="after_construct">After construction, you can set a valid value using <code class="literal">setValue()</code> and retrieve the last valid value
      with <code class="literal">getValue()</code>. To do this, youâ€™ll
      have to cast the value back to the correct type based on the format you
      are using. For example, this statement retrieves the date from our
      birthday field:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1057">    <code class="n">Date</code> <code class="n">bday</code> <code class="o">=</code> <code class="o">(</code><code class="n">Date</code><code class="o">)</code><code class="n">birthdayField</code><code class="o">.</code><code class="na">getValue</code><code class="o">();</code></pre>
<p id="jformattedtextf_id2"><code class="literal">JFormattedTextField</code> validates
      its text when the user attempts to shift focus to a new field (either by
      clicking with the mouse outside of the field or using keyboard
      navigation). By default, <code class="literal">JFormattedTextField</code> handles invalid input by
      simply reverting to the last valid value. If you wish to allow invalid
      input to remain in the field for further editing, you can set the
      <code class="literal">setFocusLostBehavior()</code> method with
      the value <code class="literal">JFormattedTextField.COMMIT</code>
      (the default is <code class="literal">COMMIT_OR_REVERT</code>). In
      any case, invalid input does not change the value property retrieved by
      <code class="literal">getValue()</code>.<a id="id883384" class="indexterm"></a><a id="id883394" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.3">
<div class="titlepage"><div><div><h3 class="title">Filtering Input</h3></div></div></div>
<p id="filteringtable_"><a id="idx11009" class="indexterm"></a> <a id="idx11032" class="indexterm"></a> <code class="literal">JFormattedTextField</code>
      does not know about all format types itself; instead, it uses <a id="id883452" class="indexterm"></a><span class="keep-together"><code class="literal">AbstractFormatter</code> objects</span> that know
      about particular format types. The <code class="literal">AbstractFormatter</code>s, in turn, provide
      implementations of two interfaces: <code class="literal">DocumentFilter</code> and <a id="id883481" class="indexterm"></a><code class="literal">NavigationFilter</code>. A
      <code class="literal">DocumentFilter</code> attaches to
      implementations of <code class="literal">Document</code> and
      <span class="keep-together">allows</span> you to intercept editing
      commands, modifying them as you wish. A <code class="literal">NavigationFilter</code> can be attached to <code class="literal">JTextComponent</code>s to control the movement of the
      cursor (as in a mask-formatted field). You can implement your own
      <code class="literal">AbstractFormatter</code>s for use with
      <code class="literal">JFormattedTextField</code>, and, more
      generally, you can use the <code class="literal">DocumentFilter</code> interface to control how
      documents are edited in any type of text component. For example, you
      could create a <code class="literal">DocumentFilter</code> that
      maps characters to uppercase or strange symbols. <code class="literal">DocumentFilter</code> provides a low-level,
      edit-by-edit means of controlling or mapping user input. We will show an
      example of this now. In the following section, we discuss how to
      implement higher-level field <span class="emphasis"><em>validation</em></span> that
      ensures the correctness of data after it is entered, in the same way
      that the formatted text field did for us earlier.</p>
<div class="sect3" id="learnjava3-CHP-18-SECT-1.3.1">
<div class="titlepage"><div><div><h4 class="title">DocumentFilter</h4></div></div></div>
<p id="documentfilter_"><a id="idx11008" class="indexterm"></a>The following example, <code class="literal">DocFilter</code>, applies a document filter to a
        <code class="literal">JTextField</code>. Our <code class="literal">DocumentFilter</code> simply maps any input to
        uppercase. Here is the code:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1058">    <code class="kn">import</code> <code class="nn">java.text.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.text.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">DocFilter</code>
    <code class="o">{</code>
       <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code> <code class="n">String</code><code class="o">[]</code> <code class="n">args</code> <code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code>
       <code class="o">{</code>
          <code class="n">JTextField</code> <code class="n">field</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="mi">30</code><code class="o">);</code>

          <code class="o">((</code><code class="n">AbstractDocument</code><code class="o">)(</code><code class="n">field</code><code class="o">.</code><code class="na">getDocument</code><code class="o">())).</code><code class="na">setDocumentFilter</code><code class="o">(</code>
             <code class="k">new</code> <code class="nf">DocumentFilter</code><code class="o">()</code>
          <code class="o">{</code>
             <code class="kd">public</code> <code class="kt">void</code> <code class="nf">insertString</code><code class="o">(</code>
                <code class="n">FilterBypass</code> <code class="n">fb</code><code class="o">,</code> <code class="kt">int</code> <code class="n">offset</code><code class="o">,</code> <code class="n">String</code> <code class="n">string</code><code class="o">,</code> <code class="n">AttributeSet</code> <code class="n">attr</code><code class="o">)</code>
                   <code class="kd">throws</code> <code class="n">BadLocationException</code>
                <code class="o">{</code>
                   <code class="n">fb</code><code class="o">.</code><code class="na">insertString</code><code class="o">(</code> <code class="n">offset</code><code class="o">,</code> <code class="n">string</code><code class="o">.</code><code class="na">toUpperCase</code><code class="o">(),</code> <code class="n">attr</code> <code class="o">);</code>
                <code class="o">}</code>

             <code class="kd">public</code> <code class="kt">void</code> <code class="nf">replace</code><code class="o">(</code>
                <code class="n">FilterBypass</code> <code class="n">fb</code><code class="o">,</code> <code class="kt">int</code> <code class="n">offset</code><code class="o">,</code> <code class="kt">int</code> <code class="n">length</code><code class="o">,</code> <code class="n">String</code> <code class="n">string</code><code class="o">,</code>
                <code class="n">AttributeSet</code> <code class="n">attr</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">BadLocationException</code>
                <code class="o">{</code>
                   <code class="n">fb</code><code class="o">.</code><code class="na">replace</code><code class="o">(</code> <code class="n">offset</code><code class="o">,</code> <code class="n">length</code><code class="o">,</code> <code class="n">string</code><code class="o">.</code><code class="na">toUpperCase</code><code class="o">(),</code> <code class="n">attr</code> <code class="o">);</code>
                <code class="o">}</code>
          <code class="o">}</code> <code class="o">);</code>

          <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"User Information"</code><code class="o">);</code>
          <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">field</code> <code class="o">);</code>
          <code class="n">frame</code><code class="o">.</code><code class="na">pack</code><code class="o">();</code>
          <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
          <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
       <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="the_methods_ins">The methods <a id="id884362" class="indexterm"></a><code class="literal">insertString()</code> and
        <a id="id884374" class="indexterm"></a><code class="literal">replace()</code> of the
        <code class="literal">DocumentFilter</code> are called when text
        is added to the document or modified. Within them, we have an
        opportunity to filter the text before passing it on. When we are ready
        to apply the text, we use the <a id="id884395" class="indexterm"></a><code class="literal">FilterBypass</code>
        reference to pass it along. <code class="literal">FilterBypass</code> has the same set of methods,
        which apply the changes directly to the document. The <code class="literal">DocumentFilter remove()</code> method can also be
        used to intercept edits to the document that remove characters. One
        thing to note in our example is that not all <code class="literal">Document</code>s have a <a id="id884427" class="indexterm"></a><code class="literal">setDocumentFilter()</code>
        method. Instead, we have to cast our document to an <code class="literal">AbstractDocument</code>. Only document
        implementations that extend <code class="literal">AbstractDocument</code> accept filters (unless you
        implement your own). This sad state of affairs is because the Document
        Filter API was added in Java 1.4, and it was decided that changes
        could not be made to the original <code class="literal">Document</code> interface.<a id="id884459" class="indexterm"></a><a id="id884469" class="indexterm"></a><a id="id884479" class="indexterm"></a></p>
</div>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.4">
<div class="titlepage"><div><div><h3 class="title">Validating Data</h3></div></div></div>
<p id="text_components_id2"><a id="idx11039" class="indexterm"></a> <a id="idx11042" class="indexterm"></a>Low-level input filtering prevents you from doing such
      things as entering a number where a character should be. In this
      section, weâ€™re going to talk about high-level validation, which accounts
      for things like February having only 28 days or a credit card number
      being for a Visa or MasterCard. Whereas character filtering prevents you
      from entering incorrect data, field validation happens after data has
      been entered. Normally, validation occurs when the user tries to change
      focus and leave the field, either by clicking the mouse or through
      keyboard navigation. Java 1.4 added the <code class="literal">InputVerifier</code> API, which allows you to
      validate the contents of a component before focus is transferred.
      Although we are going to talk about this in the context of text fields,
      an <a id="id884546" class="indexterm"></a><code class="literal">InputVerifier</code> can
      actually be attached to any <code class="literal">JComponent</code> to validate its state in this
      way.</p>
<p id="the_following_e_id15">The following example creates a pair of text fields. The first
      allows any value to be entered, while the second accepts only numbers
      between 0 and 100. When both fields are happy, you can freely move
      between them. However, when you enter an invalid value in the second
      field and try to leave, the program just beeps and selects the text. The
      focus remains trapped until you correct the problem.</p>
<pre class="programlisting" data-language="java" id="I_18_tt1059">    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">Validator</code>
    <code class="o">{</code>
        <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code> <code class="n">String</code><code class="o">[]</code> <code class="n">args</code> <code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>
            <code class="n">Box</code> <code class="n">form</code> <code class="o">=</code> <code class="n">Box</code><code class="o">.</code><code class="na">createVerticalBox</code><code class="o">();</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Any Value"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="s">"5000"</code><code class="o">)</code> <code class="o">);</code>

            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Only 0-100"</code><code class="o">)</code> <code class="o">);</code>
            <code class="n">JTextField</code> <code class="n">rangeField</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="s">"50"</code><code class="o">);</code>
            <code class="n">rangeField</code><code class="o">.</code><code class="na">setInputVerifier</code><code class="o">(</code> <code class="k">new</code> <code class="n">InputVerifier</code><code class="o">()</code> <code class="o">{</code>
                <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">verify</code><code class="o">(</code> <code class="n">JComponent</code> <code class="n">comp</code> <code class="o">)</code> <code class="o">{</code>
                    <code class="n">JTextField</code> <code class="n">field</code> <code class="o">=</code> <code class="o">(</code><code class="n">JTextField</code><code class="o">)</code><code class="n">comp</code><code class="o">;</code>
                    <code class="kt">boolean</code> <code class="n">passed</code> <code class="o">=</code> <code class="kc">false</code><code class="o">;</code>
                    <code class="k">try</code> <code class="o">{</code>
                        <code class="kt">int</code> <code class="n">n</code> <code class="o">=</code> <code class="n">Integer</code><code class="o">.</code><code class="na">parseInt</code><code class="o">(</code><code class="n">field</code><code class="o">.</code><code class="na">getText</code><code class="o">());</code>
                        <code class="n">passed</code> <code class="o">=</code> <code class="o">(</code> <code class="mi">0</code> <code class="o">&lt;=</code> <code class="n">n</code> <code class="o">&amp;&amp;</code> <code class="n">n</code> <code class="o">&lt;=</code> <code class="mi">100</code> <code class="o">);</code>
                    <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">NumberFormatException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code> <code class="o">}</code>
                    <code class="k">if</code> <code class="o">(</code> <code class="o">!</code><code class="n">passed</code> <code class="o">)</code> <code class="o">{</code>
                        <code class="n">comp</code><code class="o">.</code><code class="na">getToolkit</code><code class="o">().</code><code class="na">beep</code><code class="o">();</code>
                        <code class="n">field</code><code class="o">.</code><code class="na">selectAll</code><code class="o">();</code>
                    <code class="o">}</code>
                    <code class="k">return</code> <code class="n">passed</code><code class="o">;</code>
                <code class="o">}</code>
            <code class="o">}</code> <code class="o">);</code>
            <code class="n">form</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">rangeField</code> <code class="o">);</code>

            <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"User Information"</code><code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">form</code><code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">pack</code><code class="o">();</code>
            <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="weve_created_a">Weâ€™ve created an anonymous inner class extending <code class="literal">InputVerifier</code> with this code. The API is very
      simple; at validation time, our <a id="id885512" class="indexterm"></a><code class="literal">verify()</code> method is
      called, and we are passed a reference to the component needing checking.
      Here we cast to the correct type (we know what we are verifying, of
      course) and parse the number. If it is out of range, we beep and select
      the text. We then return <code class="literal">true</code> or
      <code class="literal">false</code> indicating whether the value
      passes validation.</p>
<p id="you_can_use_an__id2">You can use an <code class="literal">InputVerifier</code> in
      combination with a <code class="literal">JFormattedTextField</code> to both guide user input
      into the correct format and validate the semantics of what the user
      entered.<a id="id885557" class="indexterm"></a><a id="id885567" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.5">
<div class="titlepage"><div><div><h3 class="title">Say the Magic Word</h3></div></div></div>
<p id="passwords_text_"><a id="idx11017" class="indexterm"></a> <a id="idx11036" class="indexterm"></a>Before we move on from our discussion of formatted text,
      we should mention that Swing includes a class just for typing passwords,
      called <a id="id885619" class="indexterm"></a><code class="literal">JPasswordField</code>. A
      <code class="literal">JPasswordField</code> behaves just like a
      <code class="literal">JTextField</code> (itâ€™s a subclass), except
      every character typed is echoed as the same, obfuscating character,
      typically an asterisk. <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-2" title="FigureÂ 18-2.Â Using a JPasswordField in a dialog">FigureÂ 18-2</a> shows
      the option dialog example that was presented in <a class="xref" href="ch17.html" title="ChapterÂ 17.Â Using Swing Components">ChapterÂ 17</a>. The example includes a <code class="literal">JTextField</code> and a <code class="literal">JPasswordField</code>.</p>
<p id="the_creation_an">The creation and use of <code class="literal">JPasswordField</code> is basically the same as for
      <code class="literal">JTextField</code>. If you find asterisks
      distasteful, you can tell the <code class="literal">JPasswordField</code> to use a different character
      using the <a id="id885695" class="indexterm"></a><code class="literal">setEchoChar()</code>
      method.</p>
<p id="normally_you_w">Normally, you would use <code class="literal">getText()</code> to retrieve the text typed into the
      <code class="literal">JPasswordField</code>. This method, however,
      is deprecated; you should use <a id="id885725" class="indexterm"></a><code class="literal">getPassword()</code> instead.
      The <code class="literal">getPassword()</code> method returns a
      character array rather than a <code class="literal">String</code>
      object. This is done because character arrays are a little less
      vulnerable than <code class="literal">String</code>s to discover
      by memory-snooping password sniffer programs and they can be erased
      directly and easily. If youâ€™re not that concerned, you can simply create
      a new <code class="literal">String</code> from the character
      array. Note that methods in the Java cryptographic classes accept
      passwords as character arrays, not strings, so you can pass the results
      of a <code class="literal">getPassword()</code> call directly to
      methods in the cryptographic classes without ever creating a <code class="literal">String</code>.<a id="id885778" class="indexterm"></a><a id="id885788" class="indexterm"></a></p>
<div class="figure" id="learnjava3-CHP-18-FIG-2">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1060"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1802.png" alt="Using a JPasswordField in a dialog"></div></div>
<div class="figure-title">FigureÂ 18-2.Â Using a JPasswordField in a dialog</div>
</div>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.6">
<div class="titlepage"><div><div><h3 class="title">Sharing a Data Model</h3></div></div></div>
<p id="data_models_sha"><a id="idx11005" class="indexterm"></a> <a id="idx11019" class="indexterm"></a> <a id="idx11037" class="indexterm"></a>Our next example shows how easy it is to make two or more
      text components share the same <code class="literal">Document</code>; <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-3" title="FigureÂ 18-3.Â Three views of the same data model">FigureÂ 18-3</a> shows what the application looks
      like.</p>
<div class="figure" id="learnjava3-CHP-18-FIG-3">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1061"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1803.png" alt="Three views of the same data model"></div></div>
<div class="figure-title">FigureÂ 18-3.Â Three views of the same data model</div>
</div>
<p id="anything_the_us">Anything the user types into any text area is reflected in all of
      them. All we had to do is make all the text areas use the same data
      model, like this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1062">    <code class="n">JTextArea</code> <code class="n">areaFiftyOne</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
    <code class="n">JTextArea</code> <code class="n">areaFiftyTwo</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
    <code class="n">areaFiftyTwo</code><code class="o">.</code><code class="na">setDocument</code><code class="o">(</code><code class="n">areaFiftyOne</code><code class="o">.</code><code class="na">getDocument</code><code class="o">());</code>
    <code class="n">JTextArea</code> <code class="n">areaFiftyThree</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
    <code class="n">areaFiftyThree</code><code class="o">.</code><code class="na">setDocument</code><code class="o">(</code><code class="n">areaFiftyOne</code><code class="o">.</code><code class="na">getDocument</code><code class="o">());</code></pre>
<p id="we_could_just_a_id2">We could just as easily make seven text areas sharing the same
      documentâ€”or seventy. While this example may not look very useful, keep
      in mind that you can scroll different text areas to different places in
      the same document. Thatâ€™s one of the beauties of putting multiple views
      on the same data; you get to examine different parts of it. Another
      useful technique is viewing the same data in different ways. You could,
      for example, view some tabular numerical data as both a spreadsheet and
      a pie chart. The MVC architecture that Swing uses means that itâ€™s
      possible to do this in an intelligent way so that if numbers in a
      spreadsheet are updated, a pie chart that uses the same data is
      automatically updated, too.</p>
<p id="this_example_wo_id3">This example works because, behind the scenes, there are a lot of
      events flying around. When you type in one of the text areas, the text
      area receives the keyboard events. It calls methods in the document to
      update its data. In turn, the document sends events to the other text
      areas telling them about the updates so that they can correctly display
      the documentâ€™s new data. But donâ€™t worry about any of this; you just
      tell the text areas to use the same data, and Swing takes care of the
      rest:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1063">    <code class="c1">//file: SharedModel.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">SharedModel</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"Shared Model"</code><code class="o">);</code>

        <code class="n">JTextArea</code> <code class="n">areaFiftyOne</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
        <code class="n">JTextArea</code> <code class="n">areaFiftyTwo</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
        <code class="n">areaFiftyTwo</code><code class="o">.</code><code class="na">setDocument</code><code class="o">(</code><code class="n">areaFiftyOne</code><code class="o">.</code><code class="na">getDocument</code><code class="o">());</code>
        <code class="n">JTextArea</code> <code class="n">areaFiftyThree</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextArea</code><code class="o">();</code>
        <code class="n">areaFiftyThree</code><code class="o">.</code><code class="na">setDocument</code><code class="o">(</code><code class="n">areaFiftyOne</code><code class="o">.</code><code class="na">getDocument</code><code class="o">());</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setLayout</code><code class="o">(</code><code class="k">new</code> <code class="n">GridLayout</code><code class="o">(</code><code class="mi">3</code><code class="o">,</code> <code class="mi">1</code><code class="o">));</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">areaFiftyOne</code><code class="o">));</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">areaFiftyTwo</code><code class="o">));</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">areaFiftyThree</code><code class="o">));</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">300</code><code class="o">,</code> <code class="mi">300</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="setting_up_the_">Setting up the display is simple. We use a <code class="literal">GridLayout</code> (discussed in the next chapter) and
      add three text areas to the layout. Then, all we have to do is tell the
      text areas to use the same <code class="literal">Document</code>.<a id="id886758" class="indexterm"></a><a id="id886767" class="indexterm"></a><a id="id886777" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.7">
<div class="titlepage"><div><div><h3 class="title">HTML and RTF for Free</h3></div></div></div>
<p id="html_hypertext_id2"><a id="idx11016" class="indexterm"></a> <a id="idx11018" class="indexterm"></a> <a id="idx11034" class="indexterm"></a>Most user interfaces will use only two subclasses of
      <code class="literal">JTextComponent</code>. These are the simple
      <code class="literal">JTextField</code> and <code class="literal">JTextArea</code> classes that we just covered. Thatâ€™s
      just the tip of the iceberg, however. Swing offers sophisticated text
      capabilities through two other subclasses of <code class="literal">JTextComponent</code>: <a id="id886870" class="indexterm"></a><code class="literal">JEditorPane</code> and
      <code class="literal">JTextPane</code>.</p>
<p id="the_first_of_th">The first of these, <code class="literal">JEditorPane</code>, can display HTML and Rich Text
      Format (RTF) documents out of the box and provides a plug-in framework
      for support of other content types. It fires one more type of event, a
      <a id="id886901" class="indexterm"></a><code class="literal">HyperlinkEvent</code>.
      Subtypes of this event are fired off when the mouse enters, exits, or
      clicks on a hyperlink. Combined with <code class="literal">JEditorPane</code>â€™s HTML display capabilities, itâ€™s
      easy to build a simple browser. The following browser, as shown in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-4" title="FigureÂ 18-4.Â The CanisMinor application, a simple web browser">FigureÂ 18-4</a>, has only about 70 lines of
      code.</p>
<pre class="programlisting" data-language="java" id="I_18_tt1064">    <code class="c1">//file: CanisMinor.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.net.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.event.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">CanisMinor</code> <code class="kd">extends</code> <code class="n">JFrame</code> <code class="o">{</code>
      <code class="kd">protected</code> <code class="n">JEditorPane</code> <code class="n">mEditorPane</code><code class="o">;</code>
      <code class="kd">protected</code> <code class="n">JTextField</code> <code class="n">mURLField</code><code class="o">;</code>

      <code class="kd">public</code> <code class="nf">CanisMinor</code><code class="o">(</code><code class="n">String</code> <code class="n">urlString</code><code class="o">)</code> <code class="o">{</code>
        <code class="kd">super</code><code class="o">(</code><code class="s">"CanisMinor v1.0"</code><code class="o">);</code>
        <code class="n">createGUI</code><code class="o">(</code><code class="n">urlString</code><code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">createGUI</code><code class="o">(</code> <code class="n">String</code> <code class="n">urlString</code> <code class="o">)</code> <code class="o">{</code>
        <code class="n">setLayout</code><code class="o">(</code><code class="k">new</code> <code class="n">BorderLayout</code><code class="o">());</code>

        <code class="n">JToolBar</code> <code class="n">urlToolBar</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JToolBar</code><code class="o">();</code>
        <code class="n">mURLField</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="n">urlString</code><code class="o">,</code> <code class="mi">40</code><code class="o">);</code>
        <code class="n">urlToolBar</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Location "</code><code class="o">));</code>
        <code class="n">urlToolBar</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">mURLField</code><code class="o">);</code>
        <code class="n">add</code><code class="o">(</code><code class="n">urlToolBar</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">NORTH</code><code class="o">);</code>

        <code class="n">mEditorPane</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JEditorPane</code><code class="o">();</code>
        <code class="n">mEditorPane</code><code class="o">.</code><code class="na">setEditable</code><code class="o">(</code><code class="kc">false</code><code class="o">);</code>
        <code class="n">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">mEditorPane</code><code class="o">),</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">CENTER</code><code class="o">);</code>

        <code class="n">openURL</code><code class="o">(</code><code class="n">urlString</code><code class="o">);</code>

        <code class="n">mURLField</code><code class="o">.</code><code class="na">addActionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">ae</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">openURL</code><code class="o">(</code><code class="n">ae</code><code class="o">.</code><code class="na">getActionCommand</code><code class="o">());</code>
          <code class="o">}</code>
        <code class="o">});</code>

        <code class="n">mEditorPane</code><code class="o">.</code><code class="na">addHyperlinkListener</code><code class="o">(</code><code class="k">new</code> <code class="n">LinkActivator</code><code class="o">());</code>

        <code class="n">setSize</code><code class="o">(</code><code class="mi">500</code><code class="o">,</code> <code class="mi">600</code><code class="o">);</code>
        <code class="n">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">openURL</code><code class="o">(</code><code class="n">String</code> <code class="n">urlString</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">try</code> <code class="o">{</code>
          <code class="n">URL</code> <code class="n">url</code> <code class="o">=</code> <code class="k">new</code> <code class="n">URL</code><code class="o">(</code><code class="n">urlString</code><code class="o">);</code>
          <code class="n">mEditorPane</code><code class="o">.</code><code class="na">setPage</code><code class="o">(</code><code class="n">url</code><code class="o">);</code>
          <code class="n">mURLField</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="n">url</code><code class="o">.</code><code class="na">toExternalForm</code><code class="o">());</code>
        <code class="o">}</code>
        <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
          <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Couldn't open "</code> <code class="o">+</code> <code class="n">urlString</code> <code class="o">+</code> <code class="s">":"</code> <code class="o">+</code> <code class="n">e</code><code class="o">);</code>
        <code class="o">}</code>
      <code class="o">}</code>

      <code class="kd">class</code> <code class="nc">LinkActivator</code> <code class="kd">implements</code> <code class="n">HyperlinkListener</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">void</code> <code class="nf">hyperlinkUpdate</code><code class="o">(</code><code class="n">HyperlinkEvent</code> <code class="n">he</code><code class="o">)</code> <code class="o">{</code>
          <code class="n">HyperlinkEvent</code><code class="o">.</code><code class="na">EventType</code> <code class="n">type</code> <code class="o">=</code> <code class="n">he</code><code class="o">.</code><code class="na">getEventType</code><code class="o">();</code>
          <code class="k">if</code> <code class="o">(</code><code class="n">type</code> <code class="o">==</code> <code class="n">HyperlinkEvent</code><code class="o">.</code><code class="na">EventType</code><code class="o">.</code><code class="na">ACTIVATED</code><code class="o">)</code>
            <code class="n">openURL</code><code class="o">(</code><code class="n">he</code><code class="o">.</code><code class="na">getURL</code><code class="o">().</code><code class="na">toExternalForm</code><code class="o">());</code>
        <code class="o">}</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">String</code> <code class="n">urlString</code> <code class="o">=</code> <code class="s">"http://en.wikinews.org/wiki/Special:Random"</code><code class="o">;</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">args</code><code class="o">.</code><code class="na">length</code> <code class="o">&gt;</code> <code class="mi">0</code><code class="o">)</code>
           <code class="n">urlString</code> <code class="o">=</code> <code class="n">args</code><code class="o">[</code><code class="mi">0</code><code class="o">];</code>
        <code class="k">new</code> <code class="nf">CanisMinor</code><code class="o">(</code> <code class="n">urlString</code> <code class="o">).</code><code class="na">setVisible</code><code class="o">(</code> <code class="kc">true</code> <code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<div class="figure" id="learnjava3-CHP-18-FIG-4">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1065"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1804.png" alt="The CanisMinor application, a simple web browser"></div></div>
<div class="figure-title">FigureÂ 18-4.Â The CanisMinor application, a simple web browser</div>
</div>
<p id="jeditorpane_is_"><code class="literal">JEditorPane</code> is the center of
      this little application. Passing a URL to <a id="id888434" class="indexterm"></a><code class="literal">setPage()</code> causes the
      <code class="literal">JEditorPane</code> to load a new page,
      either from a local file or from somewhere across the Internet. To go to
      a new page, enter it in the text field at the top of the window and
      press Return. This fires an <code class="literal">ActionEvent</code> that sets the new page location of
      the <code class="literal">JEditorPane</code>. It can display RTF
      files, too (RTF is the text or nonbinary storage format for Microsoft
      Word documents).</p>
<p id="responding_to_h">Responding to hyperlinks correctly is simply a matter of
      responding to the <code class="literal">HyperlinkEvent</code>s
      thrown by the <code class="literal">JEditorPane</code>. This
      behavior is encapsulated in the <code class="literal">LinkActivator</code> inner class. In this case, the
      only activity we are interested in is when the user â€œactivatesâ€? the
      hyperlink by clicking on it. We respond by setting the location of the
      <code class="literal">JEditorPane</code> to the location given
      under the hyperlink. Surf away!</p>
<p id="behind_the_scen">Behind the scenes, something called an <a id="id888507" class="indexterm"></a><code class="literal">EditorKit</code> handles
      displaying documents for the <code class="literal">JEditorPane</code>. Different kinds of <code class="literal">EditorKit</code>s can display different kinds of
      documents. For HTML, the <code class="literal">HTMLEditorKit</code> class (in the <code class="literal">javax.swing.text.html</code> package) handles the
      display. Currently, this class supports HTML 3.2. Sun says that future
      enhancements will move the <a id="id888544" class="indexterm"></a><code class="literal">HTMLEditorKit</code> toward
      the HTML 4.0 standard, but even with Java 7 this area hasnâ€™t seen much
      progress. The <code class="literal">HTMLEditorKit</code> handles
      other features of HTML, including HTML forms, in the expected
      wayâ€”automatically submitting results when a submit button is pushed. A
      <a id="id888566" class="indexterm"></a><code class="literal">FormSubmitEvent</code> enables
      programmatic involvement in form submission.</p>
<p id="if_you_browse_a">If you browse around with this example browser, you will quickly
      find that most modern web pages canâ€™t be rendered well by the current
      <code class="literal">HTMLEditorKit</code>. In their current
      state, <code class="literal">JEditorPane</code> and <code class="literal">HTMLEditorKit</code> are best suited for simple uses
      such as an HTML help system. There is an excellent commercial Java
      browser component from JadeLiquid called <a class="ulink" href="http://www.webrenderer.com" target="_top">WebRenderer</a>.</p>
<p id="theres_another">Thereâ€™s another component here that we havenâ€™t covered beforeâ€”the
      <a id="id888620" class="indexterm"></a><code class="literal">JToolBar</code>. This nifty
      container houses our URL text field. Initially, the <code class="literal">JToolBar</code> starts out at the top of the window.
      But you can pick it up by clicking on the little dotted box near its
      left edge, then drag it around to different parts of the window. You can
      place this toolbar at the top, left, right, or bottom of the window, or
      you can drag it outside the window entirely, where it will inhabit a
      window of its own. This behavior comes for free from the <code class="literal">JToolBar</code> class. We only had to create a
      <code class="literal">JToolBar</code> and add some components to
      it. The <code class="literal">JToolBar</code> is just a container,
      so we add it to the content pane of our window to give it an initial
      location.<a id="id888660" class="indexterm"></a><a id="id888670" class="indexterm"></a><a id="id888680" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-1.8">
<div class="titlepage"><div><div><h3 class="title">Managing Text Yourself</h3></div></div></div>
<p id="text_components_id3"><a id="idx11035" class="indexterm"></a>Swing offers one last subclass of <code class="literal">JTextComponent</code> that can do just about anything
      you want: <a id="id888723" class="indexterm"></a><code class="literal">JTextPane</code>. The basic
      text components, <code class="literal">JTextField</code> and
      <code class="literal">JTextArea</code>, are limited to a single
      font in a single style. But <code class="literal">JTextPane</code>, a subclass of <code class="literal">JEditorPane</code>, can display multiple fonts and
      multiple styles in the same component. It also includes support for
      highlighting, image embedding, and other advanced features.</p>
<p id="well_take_a_pe">Weâ€™ll take a peek at <code class="literal">JTextPane</code>
      by creating a text pane with some styled text. Remember, the text itself
      is stored in an underlying data model, the <code class="literal">Document</code>. To create styled text, we simply
      associate a set of text attributes with different parts of the
      documentâ€™s text. Swing includes classes and methods for manipulating
      sets of attributes, like specifying a bold font or a different color for
      the text. Attributes themselves are contained in a class called
      <a id="id888785" class="indexterm"></a><code class="literal">SimpleAttributeSet</code>;
      these attribute sets are manipulated with static methods in the
      <a id="id888797" class="indexterm"></a><code class="literal">StyleConstants</code> class.
      For example, to create a set of attributes that specifies the color red,
      you could do this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1066">    <code class="n">SimpleAttributeSet</code> <code class="n">redstyle</code> <code class="o">=</code> <code class="k">new</code> <code class="n">SimpleAttributeSet</code><code class="o">();</code>
    <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setForeground</code><code class="o">(</code><code class="n">redstyle</code><code class="o">,</code> <code class="n">Color</code><code class="o">.</code><code class="na">red</code><code class="o">);</code></pre>
<p id="to_add_some_red">To add some red text to a document, you would just pass the text
      and the attributes to the documentâ€™s <a id="id888903" class="indexterm"></a><code class="literal">insertString()</code> method,
      like this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1067">    <code class="n">document</code><code class="o">.</code><code class="na">insertString</code><code class="o">(</code><code class="mi">6</code><code class="o">,</code> <code class="s">"Some red text"</code><code class="o">,</code> <code class="n">redstyle</code><code class="o">);</code></pre>
<p id="the_first_argum_id3">The first argument to <code class="literal">insertString()</code> is an offset into the text. An
      exception is thrown if you pass in an offset thatâ€™s greater than the
      current length of the document. If you pass <code class="literal">null</code> for the attribute set, the text is added
      in the <code class="literal">JTextPane</code>â€™s default font and
      style.</p>
<p id="our_simple_exam">Our simple example creates several attribute sets and uses them to
      add plain and styled text to a <code class="literal">JTextPane</code>, as shown in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-5" title="FigureÂ 18-5.Â Using styled text in a JTextPane">FigureÂ 18-5</a>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1068">    <code class="c1">//file: Styling.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.text.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">Styling</code> <code class="kd">extends</code> <code class="n">JFrame</code> <code class="o">{</code>
      <code class="kd">private</code> <code class="n">JTextPane</code> <code class="n">textPane</code><code class="o">;</code>

      <code class="kd">public</code> <code class="nf">Styling</code><code class="o">()</code> <code class="o">{</code>
        <code class="kd">super</code><code class="o">(</code><code class="s">"Stylin' v1.0"</code><code class="o">);</code>
        <code class="n">setSize</code><code class="o">(</code><code class="mi">300</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>

        <code class="n">textPane</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextPane</code><code class="o">();</code>
        <code class="n">textPane</code><code class="o">.</code><code class="na">setFont</code><code class="o">(</code><code class="k">new</code> <code class="n">Font</code><code class="o">(</code><code class="s">"Serif"</code><code class="o">,</code> <code class="n">Font</code><code class="o">.</code><code class="na">PLAIN</code><code class="o">,</code> <code class="mi">24</code><code class="o">));</code>

        <code class="c1">// create some handy attribute sets</code>
        <code class="n">SimpleAttributeSet</code> <code class="n">red</code> <code class="o">=</code> <code class="k">new</code> <code class="n">SimpleAttributeSet</code><code class="o">();</code>
        <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setForeground</code><code class="o">(</code><code class="n">red</code><code class="o">,</code> <code class="n">Color</code><code class="o">.</code><code class="na">red</code><code class="o">);</code>
        <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setBold</code><code class="o">(</code><code class="n">red</code><code class="o">,</code> <code class="kc">true</code><code class="o">);</code>
        <code class="n">SimpleAttributeSet</code> <code class="n">blue</code> <code class="o">=</code> <code class="k">new</code> <code class="n">SimpleAttributeSet</code><code class="o">();</code>
        <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setForeground</code><code class="o">(</code><code class="n">blue</code><code class="o">,</code> <code class="n">Color</code><code class="o">.</code><code class="na">blue</code><code class="o">);</code>
        <code class="n">SimpleAttributeSet</code> <code class="n">italic</code> <code class="o">=</code> <code class="k">new</code> <code class="n">SimpleAttributeSet</code><code class="o">();</code>
        <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setItalic</code><code class="o">(</code><code class="n">italic</code><code class="o">,</code> <code class="kc">true</code><code class="o">);</code>
        <code class="n">StyleConstants</code><code class="o">.</code><code class="na">setForeground</code><code class="o">(</code><code class="n">italic</code><code class="o">,</code> <code class="n">Color</code><code class="o">.</code><code class="na">orange</code><code class="o">);</code>

        <code class="c1">// add the text</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"In a "</code><code class="o">,</code> <code class="kc">null</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"sky"</code><code class="o">,</code> <code class="n">blue</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">" full of people\nOnly some want to "</code><code class="o">,</code> <code class="kc">null</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"fly"</code><code class="o">,</code> <code class="n">italic</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"\nIsn't that "</code><code class="o">,</code> <code class="kc">null</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"crazy"</code><code class="o">,</code> <code class="n">red</code><code class="o">);</code>
        <code class="n">append</code><code class="o">(</code><code class="s">"?"</code><code class="o">,</code> <code class="kc">null</code><code class="o">);</code>

        <code class="n">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">textPane</code><code class="o">),</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">CENTER</code><code class="o">);</code>
        <code class="n">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">append</code><code class="o">(</code><code class="n">String</code> <code class="n">s</code><code class="o">,</code> <code class="n">AttributeSet</code> <code class="n">attributes</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">Document</code> <code class="n">d</code> <code class="o">=</code> <code class="n">textPane</code><code class="o">.</code><code class="na">getDocument</code><code class="o">();</code>
        <code class="k">try</code> <code class="o">{</code> <code class="n">d</code><code class="o">.</code><code class="na">insertString</code><code class="o">(</code><code class="n">d</code><code class="o">.</code><code class="na">getLength</code><code class="o">(),</code> <code class="n">s</code><code class="o">,</code> <code class="n">attributes</code><code class="o">);</code> <code class="o">}</code>
        <code class="k">catch</code> <code class="o">(</code><code class="n">BadLocationException</code> <code class="n">ble</code><code class="o">)</code> <code class="o">{}</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">new</code> <code class="nf">Styling</code><code class="o">().</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<div class="figure" id="learnjava3-CHP-18-FIG-5">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1069"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1805.png" alt="Using styled text in a JTextPane"></div></div>
<div class="figure-title">FigureÂ 18-5.Â Using styled text in a JTextPane</div>
</div>
<p id="this_example_cr_id2">This example creates a <a id="id890203" class="indexterm"></a><code class="literal">JTextPane</code>, which is
      saved in a member variable. Three different attribute sets are created
      using combinations of text styles and foreground colors. Then, using a
      helper method called <code class="literal">append()</code>, text
      is added to the <code class="literal">JTextPane</code>.</p>
<p id="the_append_me">The <a id="id890234" class="indexterm"></a><code class="literal">append()</code> method tacks a
      text <code class="literal">String</code> on the end of the
      <code class="literal">JTextPane</code>â€™s document, using the
      supplied attributes. Remember that if the attributes are <code class="literal">null</code>, the text is displayed with the <code class="literal">JTextPane</code>â€™s default font and style.</p>
<p id="you_can_go_ahea">You can go ahead and add your own text if you wish. If you place
      the caret inside one of the differently styled words and type, the new
      text comes out in the appropriate style. Pretty cool, eh? Youâ€™ll also
      notice that <code class="literal">JTextPane</code> gives us
      word-wrapping behavior for free. And because weâ€™ve wrapped the <code class="literal">JTextPane</code> in a <code class="literal">JScrollPane</code>, we get scrolling for free, too.
      Swing allows you to do some really cool stuff without breaking a sweat.
      Just waitâ€”thereâ€™s plenty more to come.</p>
<p id="this_simple_exa">This simple example should give you some idea of what <code class="literal">JTextPane</code> can do. Itâ€™s reasonably easy to
      build a simple word processor with <code class="literal">JTextPane</code>, and complex commercial-grade word
      processors are definitely possible.</p>
<p id="if_jtextpane_st">If <code class="literal">JTextPane</code> still isnâ€™t good
      enough for you, or you need some finer control over character, word, and
      paragraph layout, you can actually draw text, carets, and highlight
      shapes yourself. A class in the 2D API called <code class="literal">TextLayout</code> simplifies much of this work, but
      itâ€™s outside the scope of this book. For coverage of <code class="literal">TextLayout</code> and other advanced text drawing
      topics, see <span class="emphasis"><em><a class="ulink" href="http://shop.oreilly.com/product/9781565924840.do" target="_top">Java 2D
      Graphics</a></em></span> by Jonathan Knudsen (Oâ€™Reilly).<a id="id890362" class="indexterm"></a><a id="id890372" class="indexterm"></a></p>
</div>
</div>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-2">
<div class="titlepage"><div><div><h2 class="title">Focus Navigation</h2></div></div></div>
<p id="swingcomponents_id2"><a id="idx11024" class="indexterm"></a>Weâ€™ve brought up the topic of focus many times in our
    discussion so far, and weâ€™ve told you that the handling and user
    navigation of focus is mostly done automatically. The focus system is very
    powerful and can be heavily customized through the use of â€œfocus traversal
    policyâ€? objects that control keyboard navigation. For typical application
    behavior, you wonâ€™t have to deal with this directly, but weâ€™ll explain a
    few features you should know about.</p>
<p id="swing_handles_k">Swing handles keyboard focus navigation through the <a id="id890427" class="indexterm"></a><code class="literal">KeyboardFocusManager</code>
    class. This class uses <a id="id890438" class="indexterm"></a><code class="literal">FocusTraversalPolicy</code>
    â€œstrategyâ€? objects that implement the actual schemes for locating the next
    component to receive focus. There are two primary <code class="literal">FocusTraversalPolicy</code> types supplied with Java.
    The first, <a id="id890459" class="indexterm"></a><code class="literal">DefaultFocusTraversalPolicy</code>, is part of the AWT
    package. It emulates the legacy AWT-style focus management that navigated
    components in the order in which they were added to their container. The
    next, <a id="id890472" class="indexterm"></a><code class="literal">LayoutFocusTraversalPolicy</code>, is the default for
    all Swing applications. It examines the layout and attempts to provide the
    more typical navigation from left to right and top to bottom, based on
    component position and size.</p>
<p id="the_focus_trave">The focus traversal policy is inherited from containers and oriented
    around groups of components known as â€œroot cycles.â€? By default, each
    individual window and <a id="id890495" class="indexterm"></a><code class="literal">JInternalFrame</code> is its own
    root cycle. In other words, focus traverses all of its child components
    repeatedly (jumping from the last component back to the first), and wonâ€™t,
    by default, leave the container through keyboard navigation.</p>
<p id="the_default_swi">The default Swing policy uses the following keys for keyboard
    navigation:</p>
<div class="variablelist" id="forwardtab_or_c"><dl class="variablelist">
<dt><span class="term"><span class="emphasis"><em>Forward</em></span></span></dt>
<dd><p id="tab_or_ctrltab">Tab or Ctrl-Tab (Ctrl-Tab also works inside text areas)</p></dd>
<dt><span class="term"><span class="emphasis"><em>Back</em></span></span></dt>
<dd><p id="shifttab_or_ct">Shift-Tab or Ctrl-Shift-Tab (Ctrl-Shift-Tab also works inside
          text areas)</p></dd>
</dl></div>
<p id="you_can_define_">You can define your own focus traversal keys for forward and back
    navigation, as well as for navigation across root cycles using the
    <a id="id890553" class="indexterm"></a><code class="literal">setFocusTraversalKeys()</code>
    method of a container. Here is an example that adds the keystroke Ctrl-N
    to the list of forward key navigation for components in a Frame:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1070">    <code class="n">frame</code><code class="o">.</code><code class="na">getFocusTraversalKeys</code><code class="o">(</code>
        <code class="n">KeyboardFocusManager</code><code class="o">.</code><code class="na">FORWARD_TRAVERSAL_KEYS</code> <code class="o">);</code>
    <code class="n">AWTKeyStroke</code> <code class="n">ks</code> <code class="o">=</code> <code class="n">AWTKeyStroke</code><code class="o">.</code><code class="na">getAWTKeyStroke</code><code class="o">(</code>
        <code class="n">KeyEvent</code><code class="o">.</code><code class="na">VK_N</code><code class="o">,</code> <code class="n">InputEvent</code><code class="o">.</code><code class="na">CTRL_DOWN_MASK</code> <code class="o">);</code>
    <code class="n">Set</code> <code class="k">new</code> <code class="o">=</code> <code class="k">new</code> <code class="n">HashSet</code><code class="o">(</code> <code class="n">old</code> <code class="o">);</code>
    <code class="n">set</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">ks</code> <code class="o">);</code>
    <code class="n">frame</code><code class="o">.</code><code class="na">setFocusTraversalKeys</code><code class="o">(</code>
        <code class="n">KeyboardFocusManager</code><code class="o">.</code><code class="na">FORWARD_TRAVERSAL_KEYS</code><code class="o">,</code><code class="n">set</code><code class="o">);</code></pre>
<p id="keys_are_define">Keys are defined by the <a id="id890804" class="indexterm"></a><code class="literal">AWTKeyStroke</code> class, which
    encapsulates the key and input modifiersâ€”in this case, the Control key.
    Constants in the <code class="literal">KeyboardFocusManager</code>
    specify forward, back, and up or down root cycle transfer across
    windows.</p>
<p id="finally_you_ca_id3">Finally, you can also move focus programmatically using the
    following methods of <code class="literal">KeyboardFocusManager</code>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1071">    <code class="n">focusNextComponent</code><code class="o">()</code>
    <code class="n">focusPreviousComponent</code><code class="o">()</code>
    <code class="n">upFocusCycle</code><code class="o">()</code>
    <code class="n">downFocusCycle</code><code class="o">()</code></pre>
<div class="sect2" id="learnjava3-CHP-18-SECT-2.1">
<div class="titlepage"><div><div><h3 class="title">Trees</h3></div></div></div>
<p id="focus_navigatio_id1"><a id="idx11014" class="indexterm"></a> <a id="id890911" class="indexterm"></a>One of Swingâ€™s advanced components is <a id="id890918" class="indexterm"></a><code class="literal">JTree</code>. Trees are good
      for representing hierarchical information, like the contents of a disk
      drive or a companyâ€™s organizational chart. As with all Swing components,
      the data model is distinct from the visual representation. This means
      you can do things such as update the data model and trust that the
      visual component will be updated properly.</p>
<p id="jtree_is_powerf"><code class="literal">JTree</code> is powerful and complex.
      Itâ€™s big enough, in fact, that like the text tools, the classes that
      support <code class="literal">JTree</code> have their own package,
      <a id="id890955" class="indexterm"></a><code class="literal">javax.swing.tree</code>.
      However, if you accept the default options for almost everything,
      <code class="literal">JTree</code> is very easy to use. <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-6" title="FigureÂ 18-6.Â The JTree class in action">FigureÂ 18-6</a> shows a <code class="literal">JTree</code> running in a Swing application that
      weâ€™ll describe later.<a id="id890987" class="indexterm"></a></p>
<div class="figure" id="learnjava3-CHP-18-FIG-6">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1072"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1806.png" alt="The JTree class in action"></div></div>
<div class="figure-title">FigureÂ 18-6.Â The JTree class in action</div>
</div>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-2.2">
<div class="titlepage"><div><div><h3 class="title">Nodes and Models</h3></div></div></div>
<p id="focus_navigatio_id2"><a id="idx11012" class="indexterm"></a>A treeâ€™s data model is made up of interconnected nodes. A
      node has a nameâ€”typically, a parentâ€”and some number of children
      (possibly 0). In Swing, a node is represented by the <a id="id891051" class="indexterm"></a><code class="literal">TreeNode</code> interface.
      Nodes that can be modified are represented by <a id="id891063" class="indexterm"></a><code class="literal">MutableTreeNode</code>. A
      concrete implementation of this interface is <a id="id891075" class="indexterm"></a><code class="literal">DefaultMutableTreeNode</code>.
      One node, called the <span class="emphasis"><em>root</em></span> node, usually resides at
      the top of the hierarchy.</p>
<p id="a_trees_data_m">A treeâ€™s data model is represented by the <code class="literal">TreeModel</code> interface. Swing provides an
      implementation of this interface called <code class="literal">DefaultTreeModel</code>. You can create a <code class="literal">DefaultTreeModel</code> by passing a root <code class="literal">TreeNode</code> to its constructor.</p>
<p id="you_could_creat">You could create a <code class="literal">TreeModel</code>
      with just one node like this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1073">    <code class="n">TreeNode</code> <code class="n">root</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Root node"</code><code class="o">);</code>
    <code class="n">TreeModel</code> <code class="n">model</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultTreeModel</code><code class="o">(</code><code class="n">root</code><code class="o">);</code></pre>
<p id="heres_another__id2">Hereâ€™s another example with a real hierarchy. The root node
      contains two nodes, Node 1 and Group. The Group node contains Node 2 and
      Node 3 as subnodes.</p>
<pre class="programlisting" data-language="java" id="I_18_tt1074">    <code class="n">MutableTreeNode</code> <code class="n">root</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Root node"</code><code class="o">);</code>
    <code class="n">MutableTreeNode</code> <code class="n">group</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Group"</code><code class="o">);</code>
    <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="n">group</code><code class="o">,</code> <code class="mi">0</code><code class="o">);</code>
    <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Node 1"</code><code class="o">),</code> <code class="mi">1</code><code class="o">);</code>
    <code class="n">group</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Node 2"</code><code class="o">),</code> <code class="mi">0</code><code class="o">);</code>
    <code class="n">group</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Node 3"</code><code class="o">),</code> <code class="mi">1</code><code class="o">);</code></pre>
<p id="the_second_para">The second parameter to the <code class="literal">insert()</code> method is the index of the node in
      the parent. After you organize your nodes, you can create a <code class="literal">TreeModel</code> in the same way as before:<a id="id891523" class="indexterm"></a></p>
<pre class="programlisting" data-language="java" id="I_18_tt1075">    <code class="n">TreeModel</code> <code class="n">model</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultTreeModel</code><code class="o">(</code><code class="n">root</code><code class="o">);</code></pre>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-2.3">
<div class="titlepage"><div><div><h3 class="title">Save a Tree</h3></div></div></div>
<p id="once_you_have_a_id2">Once you have a tree model, creating a <a id="id891594" class="indexterm"></a><code class="literal">JTree</code> is simple:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1076">    <code class="n">JTree</code> <code class="n">tree</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTree</code><code class="o">(</code><code class="n">model</code><code class="o">);</code></pre>
<p id="the_jtree_behav">The <code class="literal">JTree</code> behaves like a
      souped-up <code class="literal">JList</code>. As <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-6" title="FigureÂ 18-6.Â The JTree class in action">FigureÂ 18-6</a> shows, the <code class="literal">JTree</code> automatically shows nodes with no
      children as a sheet of paper, while nodes that contain other nodes are
      shown as folders. You can expand and collapse nodes by clicking on the
      little knobs to the left of the folder icons. You can also expand and
      collapse nodes by double-clicking on them. You can select nodes;
      multiple selections are possible using the Shift and Control keys. And,
      as with a <code class="literal">JList</code>, you should put a
      <code class="literal">JTree</code> in a <code class="literal">JScrollPane</code> if you want it to scroll.</p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-2.4">
<div class="titlepage"><div><div><h3 class="title">Tree Events</h3></div></div></div>
<p id="focus_navigatio_id3"><a id="idx11013" class="indexterm"></a> <a id="idx11041" class="indexterm"></a>A tree fires off several flavors of events. You can find
      out when nodes have been expanded and collapsed, when nodes are about to
      be expanded or collapsed (because the user has clicked on them), and
      when selections occur. Three distinct event listener interfaces handle
      this information.</p>
<pre class="programlisting" data-language="java" id="I_18_tt1077">    <code class="n">TreeExpansionListener</code>
    <code class="n">TreeWillExpandListener</code>
    <code class="n">TreeSelectionListener</code></pre>
<p id="tree_selections">Tree selections are a tricky business. You can select any
      combination of nodes by using the Control key and clicking on nodes.
      Tree selections are described by a <a id="id891781" class="indexterm"></a><code class="literal">TreePath</code>, which
      describes how to get from the root node to the selected nodes.</p>
<p id="the_following_e_id16">The following example registers an event listener that prints out
      the last selected node:<a id="id891799" class="indexterm"></a><a id="id891809" class="indexterm"></a></p>
<pre class="programlisting" data-language="java" id="I_18_tt1078">    <code class="n">tree</code><code class="o">.</code><code class="na">addTreeSelectionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">TreeSelectionListener</code><code class="o">()</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">valueChanged</code><code class="o">(</code><code class="n">TreeSelectionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">TreePath</code> <code class="n">tp</code> <code class="o">=</code> <code class="n">e</code><code class="o">.</code><code class="na">getNewLeadSelectionPath</code><code class="o">();</code>
        <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">tp</code><code class="o">.</code><code class="na">getLastPathComponent</code><code class="o">());</code>
      <code class="o">}</code>
    <code class="o">});</code></pre>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-2.5">
<div class="titlepage"><div><div><h3 class="title">A Complete Example</h3></div></div></div>
<p id="focus_navigatio_id4"><a id="idx11011" class="indexterm"></a>This section contains an example that showcases the
      following tree techniques:</p>
<div class="itemizedlist" id="construction_of_id1"><ul class="itemizedlist">
<li class="listitem"><p id="construction_of_id2">Construction of a tree model, using <code class="literal">DefaultMutableTreeNode</code></p></li>
<li class="listitem"><p id="creation_and_di">Creation and display of a <code class="literal">JTree</code></p></li>
<li class="listitem"><p id="listening_for_t">Listening for tree selection events</p></li>
<li class="listitem"><p id="modifying_the_t">Modifying the treeâ€™s data model while the <code class="literal">JTree</code> is showing</p></li>
</ul></div>
<p id="heres_the_sour_id1">Hereâ€™s the source code for the example:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1079">    <code class="c1">//file: PartsTree.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.tree.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">PartsTree</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="c1">// create a hierarchy of nodes</code>
        <code class="n">MutableTreeNode</code> <code class="n">root</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Parts"</code><code class="o">);</code>
        <code class="n">MutableTreeNode</code> <code class="n">beams</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Beams"</code><code class="o">);</code>
        <code class="n">MutableTreeNode</code> <code class="n">gears</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Gears"</code><code class="o">);</code>
        <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="n">beams</code><code class="o">,</code> <code class="mi">0</code><code class="o">);</code>
        <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="n">gears</code><code class="o">,</code> <code class="mi">1</code><code class="o">);</code>
        <code class="n">beams</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"1x4 black"</code><code class="o">),</code> <code class="mi">0</code><code class="o">);</code>
        <code class="n">beams</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"1x6 black"</code><code class="o">),</code> <code class="mi">1</code><code class="o">);</code>
        <code class="n">beams</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"1x8 black"</code><code class="o">),</code> <code class="mi">2</code><code class="o">);</code>
        <code class="n">beams</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"1x12 black"</code><code class="o">),</code> <code class="mi">3</code><code class="o">);</code>
        <code class="n">gears</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"8t"</code><code class="o">),</code> <code class="mi">0</code><code class="o">);</code>
        <code class="n">gears</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"24t"</code><code class="o">),</code> <code class="mi">1</code><code class="o">);</code>
        <code class="n">gears</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"40t"</code><code class="o">),</code> <code class="mi">2</code><code class="o">);</code>
        <code class="n">gears</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"worm"</code><code class="o">),</code> <code class="mi">3</code><code class="o">);</code>
        <code class="n">gears</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"crown"</code><code class="o">),</code> <code class="mi">4</code><code class="o">);</code>

        <code class="c1">// create the JTree</code>
        <code class="kd">final</code> <code class="n">DefaultTreeModel</code> <code class="n">model</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultTreeModel</code><code class="o">(</code><code class="n">root</code><code class="o">);</code>
        <code class="kd">final</code> <code class="n">JTree</code> <code class="n">tree</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTree</code><code class="o">(</code><code class="n">model</code><code class="o">);</code>

        <code class="c1">// create a text field and button to modify the data model</code>
        <code class="kd">final</code> <code class="n">JTextField</code> <code class="n">nameField</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="s">"16t"</code><code class="o">);</code>
        <code class="kd">final</code> <code class="n">JButton</code> <code class="n">button</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JButton</code><code class="o">(</code><code class="s">"Add a part"</code><code class="o">);</code>
        <code class="n">button</code><code class="o">.</code><code class="na">setEnabled</code><code class="o">(</code><code class="kc">false</code><code class="o">);</code>
        <code class="n">button</code><code class="o">.</code><code class="na">addActionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">TreePath</code> <code class="n">tp</code> <code class="o">=</code> <code class="n">tree</code><code class="o">.</code><code class="na">getSelectionPath</code><code class="o">();</code>
            <code class="n">MutableTreeNode</code> <code class="n">insertNode</code> <code class="o">=</code>
                <code class="o">(</code><code class="n">MutableTreeNode</code><code class="o">)</code><code class="n">tp</code><code class="o">.</code><code class="na">getLastPathComponent</code><code class="o">();</code>
            <code class="kt">int</code> <code class="n">insertIndex</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
            <code class="k">if</code> <code class="o">(</code><code class="n">insertNode</code><code class="o">.</code><code class="na">getParent</code><code class="o">()</code> <code class="o">!=</code> <code class="kc">null</code><code class="o">)</code> <code class="o">{</code>
              <code class="n">MutableTreeNode</code> <code class="n">parent</code> <code class="o">=</code>
                  <code class="o">(</code><code class="n">MutableTreeNode</code><code class="o">)</code><code class="n">insertNode</code><code class="o">.</code><code class="na">getParent</code><code class="o">();</code>
              <code class="n">insertIndex</code> <code class="o">=</code> <code class="n">parent</code><code class="o">.</code><code class="na">getIndex</code><code class="o">(</code><code class="n">insertNode</code><code class="o">)</code> <code class="o">+</code> <code class="mi">1</code><code class="o">;</code>
              <code class="n">insertNode</code> <code class="o">=</code> <code class="n">parent</code><code class="o">;</code>
            <code class="o">}</code>
            <code class="n">MutableTreeNode</code> <code class="n">node</code> <code class="o">=</code>
                <code class="k">new</code> <code class="nf">DefaultMutableTreeNode</code><code class="o">(</code><code class="n">nameField</code><code class="o">.</code><code class="na">getText</code><code class="o">());</code>
            <code class="n">model</code><code class="o">.</code><code class="na">insertNodeInto</code><code class="o">(</code><code class="n">node</code><code class="o">,</code> <code class="n">insertNode</code><code class="o">,</code> <code class="n">insertIndex</code><code class="o">);</code>
          <code class="o">}</code>
        <code class="o">});</code>
        <code class="n">JPanel</code> <code class="n">addPanel</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JPanel</code><code class="o">(</code><code class="k">new</code> <code class="n">GridLayout</code><code class="o">(</code><code class="mi">2</code><code class="o">,</code> <code class="mi">1</code><code class="o">));</code>
        <code class="n">addPanel</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">nameField</code><code class="o">);</code>
        <code class="n">addPanel</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">button</code><code class="o">);</code>

        <code class="c1">// listen for selections</code>
        <code class="n">tree</code><code class="o">.</code><code class="na">addTreeSelectionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">TreeSelectionListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">valueChanged</code><code class="o">(</code><code class="n">TreeSelectionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">TreePath</code> <code class="n">tp</code> <code class="o">=</code> <code class="n">e</code><code class="o">.</code><code class="na">getNewLeadSelectionPath</code><code class="o">();</code>
            <code class="n">button</code><code class="o">.</code><code class="na">setEnabled</code><code class="o">(</code><code class="n">tp</code> <code class="o">!=</code> <code class="kc">null</code><code class="o">);</code>
          <code class="o">}</code>
        <code class="o">});</code>

        <code class="c1">// create a JFrame to hold the tree</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"PartsTree v1.0"</code><code class="o">);</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">200</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">tree</code><code class="o">));</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">addPanel</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">SOUTH</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="the_example_beg">The example begins by creating a node hierarchy. The root node is
      called <code class="literal">Parts</code>. It contains two
      subnodes named <code class="literal">Beams</code> and <code class="literal">Gears</code>, as shown:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1080">    <code class="n">MutableTreeNode</code> <code class="n">root</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Parts"</code><code class="o">);</code>
    <code class="n">MutableTreeNode</code> <code class="n">beams</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Beams"</code><code class="o">);</code>
    <code class="n">MutableTreeNode</code> <code class="n">gears</code> <code class="o">=</code> <code class="k">new</code> <code class="n">DefaultMutableTreeNode</code><code class="o">(</code><code class="s">"Gears"</code><code class="o">);</code>
    <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="n">beams</code><code class="o">,</code> <code class="mi">0</code><code class="o">);</code>
    <code class="n">root</code><code class="o">.</code><code class="na">insert</code><code class="o">(</code><code class="n">gears</code><code class="o">,</code> <code class="mi">1</code><code class="o">);</code></pre>
<p id="the_beams_and_g">The <code class="literal">Beams</code> and <code class="literal">Gears</code> nodes contain a handful of items
      each.</p>
<p id="the_add_a_part">The â€œAdd a partâ€? button inserts a new item into the tree at the
      level of the current node, and just after it. You can specify the name
      of the new node by typing it in the text field above the button. To
      determine where the node should be added, the current selection is first
      obtained in the anonymous inner class <code class="literal">ActionListener</code>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1081">    <code class="n">TreePath</code> <code class="n">tp</code> <code class="o">=</code> <code class="n">tree</code><code class="o">.</code><code class="na">getSelectionPath</code><code class="o">();</code>
    <code class="n">MutableTreeNode</code> <code class="n">insertNode</code> <code class="o">=</code>
      <code class="o">(</code><code class="n">MutableTreeNode</code><code class="o">)</code><code class="n">tp</code><code class="o">.</code><code class="na">getLastPathComponent</code><code class="o">();</code></pre>
<p id="the_new_node_sh">The new node should be added to the parent node of the current
      node, so it ends up being a sibling of the current node. The only hitch
      here is that if the current node is the root node, it wonâ€™t have a
      parent. If a parent does exist, we determine the index of the currently
      selected node, and then add the new node at the next index:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1082">    <code class="kt">int</code> <code class="n">insertIndex</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code>
    <code class="k">if</code> <code class="o">(</code><code class="n">insertNode</code><code class="o">.</code><code class="na">getParent</code><code class="o">()</code> <code class="o">!=</code> <code class="kc">null</code><code class="o">)</code> <code class="o">{</code>
      <code class="n">MutableTreeNode</code> <code class="n">parent</code> <code class="o">=</code>
          <code class="o">(</code><code class="n">MutableTreeNode</code><code class="o">)</code><code class="n">insertNode</code><code class="o">.</code><code class="na">getParent</code><code class="o">();</code>
      <code class="n">insertIndex</code> <code class="o">=</code> <code class="n">parent</code><code class="o">.</code><code class="na">getIndex</code><code class="o">(</code><code class="n">insertNode</code><code class="o">)</code> <code class="o">+</code> <code class="mi">1</code><code class="o">;</code>
      <code class="n">insertNode</code> <code class="o">=</code> <code class="n">parent</code><code class="o">;</code>
    <code class="o">}</code>
    <code class="n">MutableTreeNode</code> <code class="n">node</code> <code class="o">=</code>
        <code class="k">new</code> <code class="nf">DefaultMutableTreeNode</code><code class="o">(</code><code class="n">nameField</code><code class="o">.</code><code class="na">getText</code><code class="o">());</code>
    <code class="n">model</code><code class="o">.</code><code class="na">insertNodeInto</code><code class="o">(</code><code class="n">node</code><code class="o">,</code> <code class="n">insertNode</code><code class="o">,</code> <code class="n">insertIndex</code><code class="o">);</code></pre>
<p id="you_must_add_th">You must add the new node to the treeâ€™s data model using <code class="literal">insertNodeInto()</code>â€”not to the <code class="literal">MutableTableNode</code> itself. The model notifies
      the <code class="literal">JTree</code> that it needs to update
      itself.</p>
<p id="we_have_another">We have another event handler in this example, one that listens
      for tree selection events. Basically, we want to enable our â€œAdd a partâ€?
      button only if a current selection exists:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1083">    <code class="n">tree</code><code class="o">.</code><code class="na">addTreeSelectionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">TreeSelectionListener</code><code class="o">()</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">valueChanged</code><code class="o">(</code><code class="n">TreeSelectionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">TreePath</code> <code class="n">tp</code> <code class="o">=</code> <code class="n">e</code><code class="o">.</code><code class="na">getNewLeadSelectionPath</code><code class="o">();</code>
        <code class="n">button</code><code class="o">.</code><code class="na">setEnabled</code><code class="o">(</code><code class="n">tp</code> <code class="o">!=</code> <code class="kc">null</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">});</code></pre>
<p id="when_you_first_">When you first start this application, the button is disabled. As
      soon as you select something, it is enabled, and you can add nodes to
      the tree with abandon. If you want to see the button disabled again, you
      can unselect everything by holding the Control key and clicking on the
      current selection.<a id="id894948" class="indexterm"></a><a id="id894957" class="indexterm"></a></p>
</div>
</div>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-3">
<div class="titlepage"><div><div><h2 class="title">Tables</h2></div></div></div>
<p id="swingcomponents_id3"><a id="idx11026" class="indexterm"></a> Tables present information in orderly rows and columns.
    This is useful for presenting financial figures or representing data from
    a relational database. Like trees, tables in Swing are incredibly powerful
    and customizable. If you go with the default options, theyâ€™re also pretty
    easy to use.</p>
<p id="the_jtable_clas">The <a id="id895010" class="indexterm"></a><code class="literal">JTable</code> class represents a
    visual table component. A <code class="literal">JTable</code> is
    based on a <code class="literal">TableModel</code>, one of a dozen
    or so supporting interfaces and classes in the <a id="id895035" class="indexterm"></a><code class="literal">javax.swing.table</code>
    package.</p>
<div class="sect2" id="learnjava3-CHP-18-SECT-3.1">
<div class="titlepage"><div><div><h3 class="title">A First Stab: Freeloading</h3></div></div></div>
<p id="tablesdefault_t"><a id="idx11029" class="indexterm"></a> <code class="literal">JTable</code> has one
      constructor that creates a default table model for you from arrays of
      data. You just need to supply it with the names of your column headers
      and a 2D array of <code class="literal">Object</code>s
      representing the tableâ€™s data. The first index selects the tableâ€™s row;
      the second index selects the column. The following example shows how
      easy it is to get going with tables using this constructor:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1084">    <code class="c1">//file: DullShipTable.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.table.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">DullShipTable</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="c1">// create some tabular data</code>
        <code class="n">String</code><code class="o">[]</code> <code class="n">headings</code> <code class="o">=</code>
          <code class="k">new</code> <code class="n">String</code><code class="o">[]</code> <code class="o">{</code><code class="s">"Number"</code><code class="o">,</code> <code class="s">"Hot?"</code><code class="o">,</code> <code class="s">"Origin"</code><code class="o">,</code>
                        <code class="s">"Destination"</code><code class="o">,</code> <code class="s">"Ship Date"</code><code class="o">,</code> <code class="s">"Weight"</code> <code class="o">};</code>
        <code class="n">Object</code><code class="o">[][]</code> <code class="n">data</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Object</code><code class="o">[][]</code> <code class="o">{</code>
          <code class="o">{</code> <code class="s">"100420"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Des Moines IA"</code><code class="o">,</code> <code class="s">"Spokane WA"</code><code class="o">,</code>
              <code class="s">"02/06/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">450</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"202174"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"Basking Ridge NJ"</code><code class="o">,</code> <code class="s">"Princeton NJ"</code><code class="o">,</code>
              <code class="s">"05/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1250</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"450877"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"St. Paul MN"</code><code class="o">,</code> <code class="s">"Austin TX"</code><code class="o">,</code>
              <code class="s">"03/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1745</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"101891"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Boston MA"</code><code class="o">,</code> <code class="s">"Albany NY"</code><code class="o">,</code>
              <code class="s">"04/04/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">88</code><code class="o">)</code> <code class="o">}</code>
        <code class="o">};</code>

        <code class="c1">// create the data model and the JTable</code>
        <code class="n">JTable</code> <code class="n">table</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTable</code><code class="o">(</code><code class="n">data</code><code class="o">,</code> <code class="n">headings</code><code class="o">);</code>

        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"DullShipTable v1.0"</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">table</code><code class="o">));</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">500</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="this_small_appl">This small application produces the display shown in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-7" title="FigureÂ 18-7.Â A rudimentary JTable">FigureÂ 18-7</a>.</p>
<div class="figure" id="learnjava3-CHP-18-FIG-7">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1085"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1807.png" alt="A rudimentary JTable"></div></div>
<div class="figure-title">FigureÂ 18-7.Â A rudimentary JTable</div>
</div>
<p id="for_very_little">For very little typing, weâ€™ve gotten some pretty impressive stuff.
      Here are a few things that come for free:</p>
<div class="variablelist" id="column_headings"><dl class="variablelist">
<dt><span class="term"><span class="emphasis"><em>Column headings</em></span></span></dt>
<dd><p id="the_jtable_has_">The <code class="literal">JTable</code> has
            automatically formatted the column headings differently than the
            table cells. Itâ€™s clear that they are not part of the tableâ€™s data
            area.</p></dd>
<dt><span class="term"><span class="emphasis"><em>Cell overflow</em></span></span></dt>
<dd><p id="if_a_cells_dat">If a cellâ€™s data is too long to fit in the cell, it is
            automatically truncated and shown with an ellipsis (...). This is
            shown in the Origin cell in the second row in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-7" title="FigureÂ 18-7.Â A rudimentary JTable">FigureÂ 18-7</a>.</p></dd>
<dt><span class="term"><span class="emphasis"><em>Row selection</em></span></span></dt>
<dd><p id="you_can_click_o">You can click on any cell in the table to select its entire
            row. This behavior is controllable; you can select single cells,
            entire rows, entire columns, or some combination of these. To
            configure the <code class="literal">JTable</code>â€™s
            selection behavior, use the <a id="id896098" class="indexterm"></a><code class="literal">setCellSelectionEnabled()</code>, <a id="id896110" class="indexterm"></a><code class="literal">setColumnSelectionAllowed()</code>, and
            <a id="id896122" class="indexterm"></a><code class="literal">setRowSelectionAllowed()</code> methods.</p></dd>
<dt><span class="term"><span class="emphasis"><em>Cell editing</em></span></span></dt>
<dd><p id="doubleclicking">Double-clicking on a cell opens it for editing; youâ€™ll get a
            little cursor in the cell. You can type directly into the cell to
            change the cellâ€™s data.</p></dd>
<dt><span class="term"><span class="emphasis"><em>Column sizing</em></span></span></dt>
<dd><p id="if_you_position">If you position the mouse cursor between two column
            headings, youâ€™ll get a little left-right arrow cursor. Click and
            drag to change the size of the column to the left. Depending on
            how the <code class="literal">JTable</code> is configured,
            the other columns may also change size. The resizing behavior is
            controlled with the <a id="id896171" class="indexterm"></a><code class="literal">setAutoResizeMode()</code> method.</p></dd>
<dt><span class="term"><span class="emphasis"><em>Column reordering</em></span></span></dt>
<dd><p id="if_you_click_an">If you click and drag on a column heading, you can move the
            entire column to another part of the table.</p></dd>
</dl></div>
<p id="play_with_this_">Play with this for a while. Itâ€™s fun!<a id="id896202" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-3.2">
<div class="titlepage"><div><div><h3 class="title">Round Two: Creating a Table Model</h3></div></div></div>
<p id="tablescreating_"><a id="idx11028" class="indexterm"></a> <code class="literal">JTable</code> is a very
      powerful component. You get a lot of very nice behavior for free.
      However, the default settings are not quite what we wanted for this
      simple example. In particular, we intended the table entries to be
      read-only; they should not be editable. Also, weâ€™d like entries in the
      Hot? column to be checkboxes instead of words. Finally, it would be nice
      if the Weight column were formatted appropriately for numbers rather
      than for text.</p>
<p id="to_achieve_more">To achieve more flexibility with <a id="id896260" class="indexterm"></a><code class="literal">JTable</code>, weâ€™ll write our
      own data model by implementing the <a id="id896272" class="indexterm"></a><code class="literal">TableModel</code> interface.
      Fortunately, Swing makes this easy by supplying a class that does most
      of the work, <a id="id896285" class="indexterm"></a><code class="literal">AbstractTableModel</code>. To
      create a table model, weâ€™ll just subclass <code class="literal">AbstractTableModel</code> and override whatever
      behavior we want to change.</p>
<p id="at_a_minimum_a">At a minimum, all <code class="literal">AbstractTableModel</code> subclasses have to define
      the following three methods:</p>
<div class="variablelist" id="public_int_getr"><dl class="variablelist">
<dt><span class="term"><code class="literal">public int getRowCount()</code>,
          <code class="literal">public int
          getColumnCount()</code></span></dt>
<dd><p id="returns_the_num">Returns the number of rows and columns in this data
            model</p></dd>
<dt><span class="term"><code class="literal">public Object
          getValueAt(int</code> <em class="replaceable"><code>row</code></em> <code class="literal">, int</code> <em class="replaceable"><code>column</code></em>
          <code class="literal">)</code></span></dt>
<dd><p id="returns_the_val">Returns the value for the given cell</p></dd>
</dl></div>
<p id="when_the_jtable">When the <code class="literal">JTable</code> needs data
      values, it calls the <a id="id896385" class="indexterm"></a><code class="literal">getValueAt()</code> method in
      the table model. To get an idea of the total size of the table, <code class="literal">JTable</code> calls the <a id="id896404" class="indexterm"></a><code class="literal">getRowCount()</code> and
      <a id="id896415" class="indexterm"></a><code class="literal">getColumnCount()</code>
      methods in the table model.</p>
<p id="a_very_simple_t">A very simple table model looks like this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1086">    <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">ShipTableModel</code> <code class="kd">extends</code> <code class="n">AbstractTableModel</code> <code class="o">{</code>
      <code class="kd">private</code> <code class="n">Object</code><code class="o">[][]</code> <code class="n">data</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Object</code><code class="o">[][]</code> <code class="o">{</code>
        <code class="o">{</code> <code class="s">"100420"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Des Moines IA"</code><code class="o">,</code> <code class="s">"Spokane WA"</code><code class="o">,</code>
            <code class="s">"02/06/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">450</code><code class="o">)</code> <code class="o">},</code>
        <code class="o">{</code> <code class="s">"202174"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"Basking Ridge NJ"</code><code class="o">,</code> <code class="s">"Princeton NJ"</code><code class="o">,</code>
            <code class="s">"05/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1250</code><code class="o">)</code> <code class="o">},</code>
        <code class="o">{</code> <code class="s">"450877"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"St. Paul MN"</code><code class="o">,</code> <code class="s">"Austin TX"</code><code class="o">,</code>
            <code class="s">"03/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1745</code><code class="o">)</code> <code class="o">},</code>
        <code class="o">{</code> <code class="s">"101891"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Boston MA"</code><code class="o">,</code> <code class="s">"Albany NY"</code><code class="o">,</code>
            <code class="s">"04/04/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">88</code><code class="o">)</code> <code class="o">}</code>
      <code class="o">};</code>

      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getRowCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getColumnCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="mi">0</code><code class="o">].</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>

      <code class="kd">public</code> <code class="n">Object</code> <code class="nf">getValueAt</code><code class="o">(</code><code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">column</code><code class="o">];</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="wed_like_to_us">Weâ€™d like to use the same column headings that we used in the
      previous example. The table model supplies these through a method called
      <a id="id897114" class="indexterm"></a><code class="literal">getColumnName()</code>. We
      could add column headings to our simple table model like this:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1087">    <code class="kd">private</code> <code class="n">String</code><code class="o">[]</code> <code class="n">headings</code> <code class="o">=</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]</code> <code class="o">{</code>
      <code class="s">"Number"</code><code class="o">,</code> <code class="s">"Hot?"</code><code class="o">,</code> <code class="s">"Origin"</code><code class="o">,</code> <code class="s">"Destination"</code><code class="o">,</code> <code class="s">"Ship Date"</code><code class="o">,</code> <code class="s">"Weight"</code>
    <code class="o">};</code>

    <code class="kd">public</code> <code class="n">String</code> <code class="nf">getColumnName</code><code class="o">(</code><code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="n">headings</code><code class="o">[</code><code class="n">column</code><code class="o">];</code>
    <code class="o">}</code></pre>
<p id="by_default_abs">By default, <code class="literal">AbstractTableModel</code>
      makes all its cells noneditable, which is what we wanted. No changes
      need to be made for this.</p>
<p id="the_final_modif">The final modification is to have the Hot? column and the Weight
      column formatted specially. To do this, we give our table model some
      knowledge about the column types. <code class="literal">JTable</code> automatically generates checkbox cells
      for <code class="literal">Boolean</code> column types and
      specially formatted number cells for <code class="literal">Number</code> types. To give the table model some
      intelligence about its column types, we override the <a id="id897348" class="indexterm"></a><code class="literal">getColumnClass()</code>
      method. The <code class="literal">JTable</code> calls this method
      to determine the data type of each column. It may then represent the
      data in a special way. This table model returns the class of the item in
      the first row of its data:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1088">    <code class="kd">public</code> <code class="n">Class</code> <code class="nf">getColumnClass</code><code class="o">(</code><code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
      <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="mi">0</code><code class="o">][</code><code class="n">column</code><code class="o">].</code><code class="na">getClass</code><code class="o">();</code>
    <code class="o">}</code></pre>
<p id="thats_really_a">Thatâ€™s really all there is to do. The following complete example
      illustrates how you can use your own table model to create a <code class="literal">JTable</code> using the techniques just
      described:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1089">    <code class="c1">//file: ShipTable.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.table.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">ShipTable</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kd">static</code> <code class="kd">class</code> <code class="nc">ShipTableModel</code> <code class="kd">extends</code> <code class="n">AbstractTableModel</code> <code class="o">{</code>
        <code class="kd">private</code> <code class="n">String</code><code class="o">[]</code> <code class="n">headings</code> <code class="o">=</code> <code class="k">new</code> <code class="n">String</code><code class="o">[]</code> <code class="o">{</code>
          <code class="s">"Number"</code><code class="o">,</code> <code class="s">"Hot?"</code><code class="o">,</code> <code class="s">"Origin"</code><code class="o">,</code> <code class="s">"Destination"</code><code class="o">,</code> <code class="s">"Ship Date"</code><code class="o">,</code> <code class="s">"Weight"</code>
        <code class="o">};</code>
        <code class="kd">private</code> <code class="n">Object</code><code class="o">[][]</code> <code class="n">data</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Object</code><code class="o">[][]</code> <code class="o">{</code>
          <code class="o">{</code> <code class="s">"100420"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Des Moines IA"</code><code class="o">,</code> <code class="s">"Spokane WA"</code><code class="o">,</code>
              <code class="s">"02/06/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">450</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"202174"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"Basking Ridge NJ"</code><code class="o">,</code> <code class="s">"Princeton NJ"</code><code class="o">,</code>
              <code class="s">"05/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1250</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"450877"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">TRUE</code><code class="o">,</code> <code class="s">"St. Paul MN"</code><code class="o">,</code> <code class="s">"Austin TX"</code><code class="o">,</code>
              <code class="s">"03/20/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">1745</code><code class="o">)</code> <code class="o">},</code>
          <code class="o">{</code> <code class="s">"101891"</code><code class="o">,</code> <code class="n">Boolean</code><code class="o">.</code><code class="na">FALSE</code><code class="o">,</code> <code class="s">"Boston MA"</code><code class="o">,</code> <code class="s">"Albany NY"</code><code class="o">,</code>
              <code class="s">"04/04/2000"</code><code class="o">,</code> <code class="k">new</code> <code class="n">Float</code><code class="o">(</code><code class="mi">88</code><code class="o">)</code> <code class="o">}</code>
        <code class="o">};</code>

        <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getRowCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
        <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getColumnCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="mi">0</code><code class="o">].</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>

        <code class="kd">public</code> <code class="n">Object</code> <code class="nf">getValueAt</code><code class="o">(</code><code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
          <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">column</code><code class="o">];</code>
        <code class="o">}</code>

        <code class="kd">public</code> <code class="n">String</code> <code class="nf">getColumnName</code><code class="o">(</code><code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
          <code class="k">return</code> <code class="n">headings</code><code class="o">[</code><code class="n">column</code><code class="o">];</code>
        <code class="o">}</code>

        <code class="kd">public</code> <code class="n">Class</code> <code class="nf">getColumnClass</code><code class="o">(</code><code class="kt">int</code> <code class="n">column</code><code class="o">)</code> <code class="o">{</code>
          <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="mi">0</code><code class="o">][</code><code class="n">column</code><code class="o">].</code><code class="na">getClass</code><code class="o">();</code>
        <code class="o">}</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code>
      <code class="o">{</code>
        <code class="c1">// create the data model and the JTable</code>
        <code class="n">TableModel</code> <code class="n">model</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ShipTableModel</code><code class="o">();</code>
        <code class="n">JTable</code> <code class="n">table</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTable</code><code class="o">(</code><code class="n">model</code><code class="o">);</code>

        <code class="n">table</code><code class="o">.</code><code class="na">setAutoResizeMode</code><code class="o">(</code><code class="n">JTable</code><code class="o">.</code><code class="na">AUTO_RESIZE_OFF</code><code class="o">);</code>

        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"ShipTable v1.0"</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">getContentPane</code><code class="o">().</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">table</code><code class="o">));</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">500</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="the_running_app">The running application is shown in <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-8" title="FigureÂ 18-8.Â Customizing a table">FigureÂ 18-8</a>.<a id="id898866" class="indexterm"></a></p>
<div class="figure" id="learnjava3-CHP-18-FIG-8">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1090"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1808.png" alt="Customizing a table"></div></div>
<div class="figure-title">FigureÂ 18-8.Â Customizing a table</div>
</div>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-3.3">
<div class="titlepage"><div><div><h3 class="title">Round Three: A Simple Spreadsheet</h3></div></div></div>
<p id="spreadsheets_ta"><a id="idx11021" class="indexterm"></a> <a id="idx11030" class="indexterm"></a>To illustrate just how powerful and flexible the
      separation of the data model from the GUI can be, weâ€™ll show a more
      complex model. In the following example, weâ€™ll implement a very slim but
      functional spreadsheet (see <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-9" title="FigureÂ 18-9.Â A simple spreadsheet">FigureÂ 18-9</a>)
      using almost no customization of the <code class="literal">JTable</code>. All of the data processing is in a
      <code class="literal">TableModel</code> called <code class="literal">SpreadSheetModel</code>.</p>
<div class="figure" id="learnjava3-CHP-18-FIG-9">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1091"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1809.png" alt="A simple spreadsheet"></div></div>
<div class="figure-title">FigureÂ 18-9.Â A simple spreadsheet</div>
</div>
<p id="our_spreadsheet">Our spreadsheet does the expected stuffâ€”allowing you to enter
      numbers or mathematical expressions such as <code class="literal">(A1*B2)+C3</code> into each cell.<a href="#ftn.learnjava3-CHP-18-FN-1" class="footnote"><sup class="footnote" id="learnjava3-CHP-18-FN-1">[41]</sup></a> All cell editing and updating is driven by the standard
      <a id="id899011" class="indexterm"></a><code class="literal">JTable</code>. We implement
      the methods necessary to set and retrieve cell data. Of course, we donâ€™t
      do any real validation here, so itâ€™s easy to break our table. (For
      example, there is no check for circular dependencies, which may be
      undesirable.)</p>
<p id="as_you_will_see">As you will see, the bulk of the code in this example is in the
      inner class used to parse the value of the equations in the cells. If
      you donâ€™t find this part interesting, you might want to skip ahead. But
      if you have never seen an example of this kind of parsing before, we
      think you will find it to be very cool. Through the magic of recursion
      and Javaâ€™s powerful <code class="literal">String</code>
      manipulation, it takes us only about 50 lines of code to implement a
      parser capable of handling basic arithmetic with arbitrarily nested
      parentheses.</p>
<p id="heres_the_code_id6">Hereâ€™s the code:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1092">    <code class="c1">//file: SpreadsheetModel.java</code>
    <code class="kn">import</code> <code class="nn">java.util.StringTokenizer</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.table.AbstractTableModel</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">SpreadsheetModel</code> <code class="kd">extends</code> <code class="n">AbstractTableModel</code> <code class="o">{</code>
      <code class="n">Expression</code> <code class="o">[][]</code> <code class="n">data</code><code class="o">;</code>

      <code class="kd">public</code> <code class="nf">SpreadsheetModel</code><code class="o">(</code> <code class="kt">int</code> <code class="n">rows</code><code class="o">,</code> <code class="kt">int</code> <code class="n">cols</code> <code class="o">)</code> <code class="o">{</code>
        <code class="n">data</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Expression</code> <code class="o">[</code><code class="n">rows</code><code class="o">][</code><code class="n">cols</code><code class="o">];</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setValueAt</code><code class="o">(</code><code class="n">Object</code> <code class="n">value</code><code class="o">,</code> <code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">col</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">col</code><code class="o">]</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Expression</code><code class="o">(</code> <code class="o">(</code><code class="n">String</code><code class="o">)</code><code class="n">value</code> <code class="o">);</code>
        <code class="n">fireTableDataChanged</code><code class="o">();</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="n">Object</code> <code class="nf">getValueAt</code><code class="o">(</code> <code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">col</code> <code class="o">)</code> <code class="o">{</code>
        <code class="k">if</code> <code class="o">(</code> <code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">col</code><code class="o">]</code> <code class="o">!=</code> <code class="kc">null</code> <code class="o">)</code>
          <code class="k">try</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">col</code><code class="o">].</code><code class="na">eval</code><code class="o">()</code> <code class="o">+</code> <code class="s">""</code><code class="o">;</code> <code class="o">}</code>
          <code class="k">catch</code> <code class="o">(</code> <code class="n">BadExpression</code> <code class="n">e</code> <code class="o">)</code> <code class="o">{</code> <code class="k">return</code> <code class="s">"Error"</code><code class="o">;</code> <code class="o">}</code>
        <code class="k">return</code> <code class="s">""</code><code class="o">;</code>
      <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getRowCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getColumnCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">data</code><code class="o">[</code><code class="mi">0</code><code class="o">].</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">isCellEditable</code><code class="o">(</code><code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">col</code><code class="o">)</code> <code class="o">{</code> <code class="k">return</code> <code class="kc">true</code><code class="o">;</code> <code class="o">}</code>

      <code class="kd">class</code> <code class="nc">Expression</code> <code class="o">{</code>
        <code class="n">String</code> <code class="n">text</code><code class="o">;</code>
        <code class="n">StringTokenizer</code> <code class="n">tokens</code><code class="o">;</code>
        <code class="n">String</code> <code class="n">token</code><code class="o">;</code>

        <code class="n">Expression</code><code class="o">(</code> <code class="n">String</code> <code class="n">text</code> <code class="o">)</code> <code class="o">{</code> <code class="k">this</code><code class="o">.</code><code class="na">text</code> <code class="o">=</code> <code class="n">text</code><code class="o">.</code><code class="na">trim</code><code class="o">();</code> <code class="o">}</code>

        <code class="kt">float</code> <code class="nf">eval</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">BadExpression</code> <code class="o">{</code>
          <code class="n">tokens</code> <code class="o">=</code> <code class="k">new</code> <code class="n">StringTokenizer</code><code class="o">(</code> <code class="n">text</code><code class="o">,</code> <code class="s">" */+-()"</code><code class="o">,</code> <code class="kc">true</code> <code class="o">);</code>
          <code class="k">try</code> <code class="o">{</code> <code class="k">return</code> <code class="n">sum</code><code class="o">();</code> <code class="o">}</code>
          <code class="k">catch</code> <code class="o">(</code> <code class="n">Exception</code> <code class="n">e</code> <code class="o">)</code> <code class="o">{</code> <code class="k">throw</code> <code class="k">new</code> <code class="n">BadExpression</code><code class="o">();</code> <code class="o">}</code>
        <code class="o">}</code>

        <code class="kd">private</code> <code class="kt">float</code> <code class="nf">sum</code><code class="o">()</code> <code class="o">{</code>
          <code class="kt">float</code> <code class="n">value</code> <code class="o">=</code> <code class="n">term</code><code class="o">();</code>
          <code class="k">while</code><code class="o">(</code> <code class="n">more</code><code class="o">()</code> <code class="o">&amp;&amp;</code> <code class="n">match</code><code class="o">(</code><code class="s">"+-"</code><code class="o">)</code> <code class="o">)</code>
            <code class="k">if</code> <code class="o">(</code> <code class="n">match</code><code class="o">(</code><code class="s">"+"</code><code class="o">)</code> <code class="o">)</code> <code class="o">{</code> <code class="n">consume</code><code class="o">();</code> <code class="n">value</code> <code class="o">=</code> <code class="n">value</code> <code class="o">+</code> <code class="n">term</code><code class="o">();</code> <code class="o">}</code>
            <code class="k">else</code> <code class="o">{</code> <code class="n">consume</code><code class="o">();</code> <code class="n">value</code> <code class="o">=</code> <code class="n">value</code> <code class="o">-</code> <code class="n">term</code><code class="o">();</code> <code class="o">}</code>
          <code class="k">return</code> <code class="n">value</code><code class="o">;</code>
        <code class="o">}</code>
        <code class="kd">private</code> <code class="kt">float</code> <code class="nf">term</code><code class="o">()</code> <code class="o">{</code>
          <code class="kt">float</code> <code class="n">value</code> <code class="o">=</code> <code class="n">element</code><code class="o">();</code>
          <code class="k">while</code><code class="o">(</code> <code class="n">more</code><code class="o">()</code> <code class="o">&amp;&amp;</code> <code class="n">match</code><code class="o">(</code> <code class="s">"*/"</code><code class="o">)</code> <code class="o">)</code>
            <code class="k">if</code> <code class="o">(</code> <code class="n">match</code><code class="o">(</code><code class="s">"*"</code><code class="o">)</code> <code class="o">)</code> <code class="o">{</code> <code class="n">consume</code><code class="o">();</code> <code class="n">value</code> <code class="o">=</code> <code class="n">value</code> <code class="o">*</code> <code class="n">element</code><code class="o">();</code> <code class="o">}</code>
            <code class="k">else</code> <code class="o">{</code> <code class="n">consume</code><code class="o">();</code> <code class="n">value</code> <code class="o">=</code> <code class="n">value</code> <code class="o">/</code> <code class="n">element</code><code class="o">();</code> <code class="o">}</code>
          <code class="k">return</code> <code class="n">value</code><code class="o">;</code>
        <code class="o">}</code>
        <code class="kd">private</code> <code class="kt">float</code> <code class="nf">element</code><code class="o">()</code> <code class="o">{</code>
          <code class="kt">float</code> <code class="n">value</code><code class="o">;</code>
          <code class="k">if</code> <code class="o">(</code> <code class="n">match</code><code class="o">(</code> <code class="s">"("</code><code class="o">)</code> <code class="o">)</code> <code class="o">{</code> <code class="n">consume</code><code class="o">();</code> <code class="n">value</code> <code class="o">=</code> <code class="n">sum</code><code class="o">();</code> <code class="o">}</code>
          <code class="k">else</code> <code class="o">{</code>
            <code class="n">String</code> <code class="n">svalue</code><code class="o">;</code>
            <code class="k">if</code> <code class="o">(</code> <code class="n">Character</code><code class="o">.</code><code class="na">isLetter</code><code class="o">(</code> <code class="n">token</code><code class="o">().</code><code class="na">charAt</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code> <code class="o">)</code> <code class="o">)</code> <code class="o">{</code>
            <code class="kt">int</code> <code class="n">col</code> <code class="o">=</code> <code class="n">findColumn</code><code class="o">(</code> <code class="n">token</code><code class="o">().</code><code class="na">charAt</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code> <code class="o">+</code> <code class="s">""</code> <code class="o">);</code>
            <code class="kt">int</code> <code class="n">row</code> <code class="o">=</code> <code class="n">Character</code><code class="o">.</code><code class="na">digit</code><code class="o">(</code> <code class="n">token</code><code class="o">().</code><code class="na">charAt</code><code class="o">(</code><code class="mi">1</code><code class="o">),</code> <code class="mi">10</code> <code class="o">);</code>
            <code class="n">svalue</code> <code class="o">=</code> <code class="o">(</code><code class="n">String</code><code class="o">)</code><code class="n">getValueAt</code><code class="o">(</code> <code class="n">row</code><code class="o">,</code> <code class="n">col</code> <code class="o">);</code>
          <code class="o">}</code> <code class="k">else</code>
            <code class="n">svalue</code> <code class="o">=</code> <code class="n">token</code><code class="o">();</code>
            <code class="n">value</code> <code class="o">=</code> <code class="n">Float</code><code class="o">.</code><code class="na">parseFloat</code><code class="o">(</code> <code class="n">svalue</code> <code class="o">);</code>
          <code class="o">}</code>
          <code class="n">consume</code><code class="o">();</code> <code class="c1">// ")" or value token</code>
          <code class="k">return</code> <code class="n">value</code><code class="o">;</code>
        <code class="o">}</code>
        <code class="kd">private</code> <code class="n">String</code> <code class="nf">token</code><code class="o">()</code> <code class="o">{</code>
          <code class="k">if</code> <code class="o">(</code> <code class="n">token</code> <code class="o">==</code> <code class="kc">null</code> <code class="o">)</code>
            <code class="k">while</code> <code class="o">(</code> <code class="o">(</code><code class="n">token</code><code class="o">=</code><code class="n">tokens</code><code class="o">.</code><code class="na">nextToken</code><code class="o">()).</code><code class="na">equals</code><code class="o">(</code><code class="s">" "</code><code class="o">)</code> <code class="o">);</code>
          <code class="k">return</code> <code class="n">token</code><code class="o">;</code>
        <code class="o">}</code>
        <code class="kd">private</code> <code class="kt">void</code> <code class="nf">consume</code><code class="o">()</code> <code class="o">{</code> <code class="n">token</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code> <code class="o">}</code>
        <code class="kd">private</code> <code class="kt">boolean</code> <code class="nf">match</code><code class="o">(</code> <code class="n">String</code> <code class="n">s</code> <code class="o">)</code> <code class="o">{</code> <code class="k">return</code> <code class="n">s</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code> <code class="n">token</code><code class="o">()</code> <code class="o">)!=-</code><code class="mi">1</code><code class="o">;</code> <code class="o">}</code>
        <code class="kd">private</code> <code class="kt">boolean</code> <code class="nf">more</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">tokens</code><code class="o">.</code><code class="na">hasMoreTokens</code><code class="o">();</code> <code class="o">}</code>
      <code class="o">}</code>

      <code class="kd">class</code> <code class="nc">BadExpression</code> <code class="kd">extends</code> <code class="n">Exception</code> <code class="o">{</code> <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code> <code class="n">String</code> <code class="o">[]</code> <code class="n">args</code> <code class="o">)</code> <code class="o">{</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"Excelsior!"</code><code class="o">);</code>
        <code class="n">JTable</code> <code class="n">table</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTable</code><code class="o">(</code> <code class="k">new</code> <code class="n">SpreadsheetModel</code><code class="o">(</code><code class="mi">15</code><code class="o">,</code> <code class="mi">5</code><code class="o">)</code> <code class="o">);</code>
        <code class="n">table</code><code class="o">.</code><code class="na">setPreferredScrollableViewportSize</code><code class="o">(</code> <code class="n">table</code><code class="o">.</code><code class="na">getPreferredSize</code><code class="o">()</code> <code class="o">);</code>
        <code class="n">table</code><code class="o">.</code><code class="na">setCellSelectionEnabled</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">getContentPane</code><code class="o">().</code><code class="na">add</code><code class="o">(</code> <code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code> <code class="n">table</code> <code class="o">)</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">pack</code><code class="o">();</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">show</code><code class="o">();</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="our_model_exten">Our model extends <a id="id901979" class="indexterm"></a><code class="literal">AbstractTableModel</code> and
      overrides just a few methods. As you can see, our data is stored in a 2D
      array of <code class="literal">Expression</code> objects. The
      <a id="id901998" class="indexterm"></a><code class="literal">setValueAt()</code> method of
      our model creates <code class="literal">Expression</code> objects
      from the strings typed by the user and stores them in the array. The
      <a id="id902016" class="indexterm"></a><code class="literal">getValueAt()</code> method
      returns a value for a cell by calling the expressionâ€™s <a id="id902029" class="indexterm"></a><code class="literal">eval()</code> method. If the
      user enters some invalid text in a cell, a <code class="literal">BadExpression</code> exception is thrown, and the
      word <span class="emphasis"><em>error</em></span> is placed in the cell as a value. The
      only other methods of <code class="literal">TableModel</code> we
      must override are <a id="id902058" class="indexterm"></a><code class="literal">getRowCount()</code>,
      <a id="id902069" class="indexterm"></a><code class="literal">getColumnCount()</code>, and
      <a id="id902081" class="indexterm"></a><code class="literal">isCellEditable()</code> in
      order to determine the dimensions of the spreadsheet and to allow the
      user to edit the fields. Thatâ€™s it! The helper method <code class="literal">findColumn()</code> is inherited from the <code class="literal">AbstractTableModel</code>.</p>
<p id="now_on_to_the_g">Now on to the good stuff. Weâ€™ll employ our old friend <code class="literal">StringTokenizer</code> to read the expression string
      as separate values and the mathematical symbols (<code class="literal">+-*/()</code>) one by one. These tokens are then
      processed by the three parser methods: <code class="literal">sum()</code>, <code class="literal">term()</code>, and <code class="literal">element()</code>. The methods call one another
      generally from the top down, but it might be easier to read them in
      reverse to see whatâ€™s happening.</p>
<p id="at_the_bottom_l">At the bottom level, <code class="literal">element()</code>
      reads individual numeric values or cell names (e.g., <code class="literal">5.0</code> or <code class="literal">B2</code>).
      Above that, the <code class="literal">term()</code> method
      operates on the values supplied by <code class="literal">element()</code> and applies any multiplication or
      division operations. And at the top, <code class="literal">sum()</code> operates on the values that are returned
      by <code class="literal">term()</code> and applies addition or
      subtraction to them. If the <code class="literal">element()</code>
      method encounters parentheses, it makes a call to <code class="literal">sum()</code> to handle the nested expression.
      Eventually, the nested sum returns (possibly after further recursion),
      and the parenthesized expression is reduced to a single value, which is
      returned by <code class="literal">element()</code>. The magic of
      recursion has untangled the nesting for us. The other small piece of
      magic here is in the ordering of the three parser methods. Having
      <code class="literal">sum()</code> call <code class="literal">term()</code> and <code class="literal">term()</code> call <code class="literal">element()</code> imposes the precedence of operators;
      that is, â€œatomicâ€? values are parsed first (at the bottom), then
      multiplication, and finally, addition or <span class="keep-together">subtraction</span>.</p>
<p id="the_grammar_par">The grammar parsing relies on four simple helper methods that make
      the code more manageable: <code class="literal">token()</code>,
      <code class="literal">consume()</code>, <code class="literal">match()</code>, and <code class="literal">more()</code>. <code class="literal">token()</code> calls the string tokenizer to get the
      next value, and <code class="literal">match()</code> compares it
      with a specified value. <code class="literal">consume()</code> is
      used to move to the next token, and <code class="literal">more()</code> indicates when the final token has been
      processed.<a id="id902306" class="indexterm"></a><a id="id902316" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-3.4">
<div class="titlepage"><div><div><h3 class="title">Sorting and Filtering</h3></div></div></div>
<p id="filteringtables"><a id="idx11010" class="indexterm"></a> <a id="idx11020" class="indexterm"></a> <a id="idx11031" class="indexterm"></a>Java 6 introduced easy-to-use sorting and filtering for
      <a id="id902383" class="indexterm"></a><code class="literal">JTable</code>s. The following
      example demonstrates use of the default <code class="literal">TableRowSorter</code> and a simple regular expression
      filter.</p>
<pre class="programlisting" data-language="java" id="new-listing1">    <code class="c1">//file: SortFilterTable.java</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.table.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.event.*</code><code class="o">;</code>
    
    <code class="kn">import</code> <code class="nn">java.awt.BorderLayout</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.util.regex.PatternSyntaxException</code><code class="o">;</code>
    
    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">SortFilterTable</code> <code class="kd">extends</code> <code class="n">JFrame</code> <code class="o">{</code>
    
        <code class="kd">private</code> <code class="n">JTable</code> <code class="n">table</code><code class="o">;</code>
        <code class="kd">private</code> <code class="n">JTextField</code> <code class="n">filterField</code><code class="o">;</code>
    
        <code class="kd">public</code> <code class="nf">SortFilterTable</code><code class="o">()</code> <code class="o">{</code>
            
            <code class="kd">super</code><code class="o">(</code><code class="s">"Table Sorting &amp; Filtering"</code><code class="o">);</code>
            <code class="n">setSize</code><code class="o">(</code><code class="mi">500</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>
            <code class="n">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
    
            <code class="c1">// Create a simple table model</code>
            <code class="n">TableModel</code> <code class="n">model</code> <code class="o">=</code> <code class="k">new</code> <code class="n">AbstractTableModel</code><code class="o">()</code> <code class="o">{</code>
                <code class="kd">private</code> <code class="n">String</code><code class="o">[]</code> <code class="n">columns</code> <code class="o">=</code> <code class="o">{</code><code class="s">"Name"</code><code class="o">,</code> <code class="s">"Pet"</code><code class="o">,</code> <code class="s">"Children"</code><code class="o">};</code>
                
                <code class="kd">private</code> <code class="n">Object</code><code class="o">[][]</code> <code class="n">people</code> <code class="o">=</code> <code class="o">{</code>
                        <code class="o">{</code><code class="s">"Dan Leuck"</code><code class="o">,</code> <code class="s">"chameleon"</code><code class="o">,</code> <code class="mi">1</code><code class="o">},</code>
                        <code class="o">{</code><code class="s">"Pat Niemeyer"</code><code class="o">,</code> <code class="s">"sugar glider"</code><code class="o">,</code> <code class="mi">2</code><code class="o">},</code>
                        <code class="o">{</code><code class="s">"John Doe"</code><code class="o">,</code> <code class="s">"dog"</code><code class="o">,</code> <code class="mi">3</code><code class="o">},</code>
                        <code class="o">{</code><code class="s">"Jane Doe"</code><code class="o">,</code> <code class="s">"panda"</code><code class="o">,</code> <code class="mi">2</code><code class="o">}</code>
                        <code class="o">};</code>            
                
                <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getColumnCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">columns</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
    
                <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getRowCount</code><code class="o">()</code> <code class="o">{</code> <code class="k">return</code> <code class="n">people</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="o">}</code>
    
                <code class="kd">public</code> <code class="n">Object</code> <code class="nf">getValueAt</code><code class="o">(</code><code class="kt">int</code> <code class="n">row</code><code class="o">,</code> <code class="kt">int</code> <code class="n">col</code><code class="o">)</code> <code class="o">{</code> 
                    <code class="k">return</code> <code class="n">people</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">col</code><code class="o">];</code> 
                <code class="o">}</code>

                <code class="kd">public</code> <code class="n">Class</code> <code class="nf">getColumnClass</code><code class="o">(</code><code class="kt">int</code> <code class="n">col</code><code class="o">)</code> <code class="o">{</code>
                    <code class="k">return</code> <code class="nf">getValueAt</code><code class="o">(</code><code class="mi">0</code><code class="o">,</code> <code class="n">col</code><code class="o">).</code><code class="na">getClass</code><code class="o">();</code>
                <code class="o">}</code>

            <code class="o">};</code>
            
            <code class="n">table</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTable</code><code class="o">(</code><code class="n">model</code><code class="o">);</code>
            <code class="n">table</code><code class="o">.</code><code class="na">setAutoCreateRowSorter</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
            <code class="n">table</code><code class="o">.</code><code class="na">setFillsViewportHeight</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
            
            <code class="c1">// Create the filter area</code>
            <code class="n">JPanel</code> <code class="n">filterPanel</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JPanel</code><code class="o">(</code><code class="k">new</code> <code class="n">BorderLayout</code><code class="o">());</code>
            <code class="n">JLabel</code> <code class="n">filterLabel</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Filter "</code><code class="o">,</code> 
                <code class="n">SwingConstants</code><code class="o">.</code><code class="na">TRAILING</code><code class="o">);</code>
            <code class="n">filterPanel</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">filterLabel</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">WEST</code><code class="o">);</code>
            <code class="n">filterField</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JTextField</code><code class="o">();</code>
            <code class="n">filterLabel</code><code class="o">.</code><code class="na">setLabelFor</code><code class="o">(</code><code class="n">filterField</code><code class="o">);</code>
            <code class="n">filterPanel</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">filterField</code><code class="o">);</code>
            
            <code class="c1">// Apply the filter when the filter text field changes</code>
            <code class="n">filterField</code><code class="o">.</code><code class="na">getDocument</code><code class="o">().</code><code class="na">addDocumentListener</code><code class="o">(</code>
                <code class="k">new</code> <code class="nf">DocumentListener</code><code class="o">()</code> <code class="o">{</code>
                    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">changedUpdate</code><code class="o">(</code><code class="n">DocumentEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
                        <code class="n">filter</code><code class="o">();</code>
                    <code class="o">}</code>
                    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">insertUpdate</code><code class="o">(</code><code class="n">DocumentEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
                        <code class="n">filter</code><code class="o">();</code>
                    <code class="o">}</code>
                    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">removeUpdate</code><code class="o">(</code><code class="n">DocumentEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
                        <code class="n">filter</code><code class="o">();</code>
                    <code class="o">}</code>
                <code class="o">});</code>
            
            <code class="n">filterPanel</code><code class="o">.</code><code class="na">setBorder</code><code class="o">(</code><code class="n">BorderFactory</code><code class="o">.</code><code class="na">createEmptyBorder</code><code class="o">(</code><code class="mi">2</code><code class="o">,</code> 
                <code class="mi">2</code><code class="o">,</code> <code class="mi">2</code><code class="o">,</code> <code class="mi">2</code><code class="o">));</code>
    
            <code class="n">add</code><code class="o">(</code><code class="n">filterPanel</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">NORTH</code><code class="o">);</code>
    
            <code class="n">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="n">table</code><code class="o">));</code>
        <code class="o">}</code>
    
        <code class="c1">// Filter on the first column</code>
        <code class="kd">private</code> <code class="kt">void</code> <code class="nf">filter</code><code class="o">()</code> <code class="o">{</code>
            <code class="n">RowFilter</code><code class="o">&lt;</code><code class="n">TableModel</code><code class="o">,</code> <code class="n">Object</code><code class="o">&gt;</code> <code class="n">filter</code> <code class="o">=</code> <code class="kc">null</code><code class="o">;</code>
            
            <code class="c1">// Update if the filter expression is valid</code>
            <code class="k">try</code> <code class="o">{</code>
                <code class="c1">// Apply the regular expression to columns 0 and 1</code>
                <code class="n">filter</code> <code class="o">=</code> <code class="n">RowFilter</code><code class="o">.</code><code class="na">regexFilter</code><code class="o">(</code><code class="n">filterField</code><code class="o">.</code><code class="na">getText</code><code class="o">(),</code>
                    <code class="mi">0</code><code class="o">,</code> <code class="mi">1</code><code class="o">);</code>
            <code class="o">}</code> <code class="k">catch</code> <code class="o">(</code><code class="n">PatternSyntaxException</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
                <code class="k">return</code><code class="o">;</code>
            <code class="o">}</code>
            <code class="o">((</code><code class="n">TableRowSorter</code><code class="o">)</code><code class="n">table</code><code class="o">.</code><code class="na">getRowSorter</code><code class="o">()).</code><code class="na">setRowFilter</code><code class="o">(</code>
                <code class="n">filter</code><code class="o">);</code>
        <code class="o">}</code>
    
        <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
            <code class="k">new</code> <code class="nf">SortFilterTable</code><code class="o">().</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>       
        <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="try_clicking_on">Try clicking on the column headers to sort. We are using the
      default sorting behavior, which utilizes the natural sort order of cell
      values (i.e., alphabetical for strings, value for numbers, etc.). You
      can easily override the sorting behavior by implementing your own
      comparator and setting it on the <code class="literal">TableRowSorter</code>:</p>
<pre class="programlisting" data-language="java" id="tablerowsorter">    <code class="n">TableRowSorter</code><code class="o">&lt;</code><code class="n">TableModel</code><code class="o">&gt;</code> <code class="n">reverseSorter</code> 
        <code class="o">=</code> <code class="k">new</code> <code class="n">TableRowSorter</code><code class="o">&lt;</code><code class="n">TableModel</code><code class="o">&gt;(</code><code class="n">table</code><code class="o">.</code><code class="na">getModel</code><code class="o">());</code> 
    <code class="n">reverseSorter</code><code class="o">.</code><code class="na">setComparator</code><code class="o">(</code><code class="mi">0</code><code class="o">,</code> <code class="k">new</code> <code class="n">Comparator</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;()</code> <code class="o">{</code>
        <code class="kd">public</code> <code class="kt">int</code> <code class="nf">compare</code><code class="o">(</code><code class="n">String</code> <code class="n">a</code><code class="o">,</code> <code class="n">String</code> <code class="n">b</code><code class="o">)</code> <code class="o">{</code>
            <code class="k">return</code> <code class="o">-</code><code class="n">a</code><code class="o">.</code><code class="na">compareTo</code><code class="o">(</code><code class="n">b</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">});</code>
    <code class="n">table</code><code class="o">.</code><code class="na">setRowSorter</code><code class="o">(</code><code class="n">reverseSorter</code><code class="o">);</code></pre>
<p id="if_you_require_">If you require more advanced sorting, you can subclass <a id="id904546" class="indexterm"></a><code class="literal">TableRowSorter</code> or its
      superclass, <code class="literal">DefaultRowSorter</code>.</p>
<p id="entering_text_i">Entering text in the field above the table will apply a filter
      using the text as a regular expression over the values in the first two
      columns (indices 0 and 1). For example, try entering â€œDoeâ€?. The table
      will now display only John Doe and Jane Doe.<a id="id904574" class="indexterm"></a><a id="id904584" class="indexterm"></a><a id="id904593" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-3.5">
<div class="titlepage"><div><div><h3 class="title">Printing JTables</h3></div></div></div>
<p id="jtable_class_ta"><a id="id904615" class="indexterm"></a> <a id="id904622" class="indexterm"></a>Swing makes the printing of JTables a snap. Think weâ€™re
      kidding? If you accept the basic default behavior, all that is required
      to pop up a print dialog box is the following:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1093">    <code class="n">myJTable</code><code class="o">.</code><code class="na">print</code><code class="o">();</code></pre>
<p id="thats_it_the_">Thatâ€™s it. The default behavior scales the printed table to the
      width of the page. This is called â€œfit widthâ€? mode. You can control that
      setting using the <code class="literal">PrintMode</code>
      enumeration of <code class="literal">JTable</code>, which has
      values of <code class="literal">NORMAL</code> and <code class="literal">FIT_WIDTH</code>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1094">    <code class="n">table</code><code class="o">.</code><code class="na">print</code><code class="o">(</code> <code class="n">JTable</code><code class="o">.</code><code class="na">PrintMode</code><code class="o">.</code><code class="na">NORMAL</code> <code class="o">);</code></pre>
<p id="the_normal_i">The â€œnormalâ€? (ironically, nondefault) mode will allow the table to
      split across multiple pages horizontally to print without sizing down.
      In both cases, the table rows may span multiple pages vertically.</p>
<p id="other_forms_of_">Other forms of the <code class="literal">JTable
      print()</code> method allow you to add header and footer text to the
      page and to take greater control of the printing process and attributes.
      Weâ€™ll talk a little more about printing when we cover 2D drawing in
      <a class="xref" href="ch20.html" title="ChapterÂ 20.Â Drawing with the 2D API">ChapterÂ 20</a>.<a id="id904779" class="indexterm"></a></p>
</div>
</div>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-4">
<div class="titlepage"><div><div><h2 class="title">Desktops</h2></div></div></div>
<p id="desktops_swingc"><a id="idx11006" class="indexterm"></a> <a id="idx11023" class="indexterm"></a>At this point, you might be thinking that thereâ€™s nothing
    more that Swing could possibly do, but it just keeps getting better. If
    youâ€™ve ever wished that you could have windows within windows in Java,
    Swing makes it possible with <a id="id904839" class="indexterm"></a><code class="literal">JDesktopPane</code> and <code class="literal">JInternalFrame</code>. <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-10" title="FigureÂ 18-10.Â Using internal frames on a JDesktopPane">FigureÂ 18-10</a> shows how this appears.</p>
<p id="you_get_a_lot_o">You get a lot of behavior for free from <a id="id904870" class="indexterm"></a><code class="literal">JInternalFrame</code>. Internal
    frames can be moved by clicking and dragging the titlebar. They can be
    resized by clicking and dragging on the windowâ€™s borders. Internal frames
    can be iconified, which means reducing them to a small icon representation
    on the desktop. Internal frames may also be made to fit the entire size of
    the desktop (maximized). To you, the programmer, the internal frame is
    just a kind of special container. You can put your applicationâ€™s data
    inside an internal frame just as with any other type of container.</p>
<div class="figure-float"><div class="figure" id="learnjava3-CHP-18-FIG-10">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1095"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1810.png" alt="Using internal frames on a JDesktopPane"></div></div>
<div class="figure-title">FigureÂ 18-10.Â Using internal frames on a JDesktopPane</div>
</div></div>
<p id="the_following_b">The following brief example shows how to create the windows shown in
    <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-10" title="FigureÂ 18-10.Â Using internal frames on a JDesktopPane">FigureÂ 18-10</a>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1096">    <code class="c1">//file: Desktop.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.border.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">Desktop</code> <code class="o">{</code>
      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"Desktop"</code><code class="o">);</code>

        <code class="n">JDesktopPane</code> <code class="n">desktop</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JDesktopPane</code><code class="o">();</code>
        <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="mi">5</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
          <code class="n">JInternalFrame</code> <code class="n">internal</code> <code class="o">=</code>
              <code class="k">new</code> <code class="nf">JInternalFrame</code><code class="o">(</code><code class="s">"Frame "</code> <code class="o">+</code> <code class="n">i</code><code class="o">,</code> <code class="kc">true</code><code class="o">,</code> <code class="kc">true</code><code class="o">,</code> <code class="kc">true</code><code class="o">,</code> <code class="kc">true</code><code class="o">);</code>
          <code class="n">internal</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">180</code><code class="o">,</code> <code class="mi">180</code><code class="o">);</code>
          <code class="n">internal</code><code class="o">.</code><code class="na">setLocation</code><code class="o">(</code><code class="n">i</code> <code class="o">*</code> <code class="mi">20</code><code class="o">,</code> <code class="n">i</code> <code class="o">*</code> <code class="mi">20</code><code class="o">);</code>
          <code class="n">internal</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
          <code class="n">desktop</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">internal</code><code class="o">);</code>
        <code class="o">}</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code><code class="mi">300</code><code class="o">,</code> <code class="mi">300</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setContentPane</code><code class="o">(</code><code class="n">desktop</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="all_weve_done_">All weâ€™ve done here is to create a <code class="literal">JDesktopPane</code> and add internal frames to it. When
    each <code class="literal">JInternalFrame</code> is constructed, we
    specify a window title. The four <code class="literal">true</code>
    values passed in the constructor specify that the new window should be
    resizable, closable, maximizable, and iconifiable.</p>
<p id="jinternalframes"><code class="literal">JInternalFrame</code>s fire off their
    own set of events. However, <code class="literal">InternalFrameEvent</code> and <code class="literal">InternalFrameListener</code> are just like <code class="literal">WindowEvent</code> and <code class="literal">WindowListener</code> with the names changed. If you
    want to hear about a <code class="literal">JInternalFrame</code>
    closing, just register an <a id="id905652" class="indexterm"></a><code class="literal">InternalFrameListener</code> and
    define the <a id="id905664" class="indexterm"></a><code class="literal">internalFrameClosing()</code>
    method. This is just like defining the <code class="literal">windowClosing()</code> method for a <code class="literal">JFrame</code>.<a id="id905688" class="indexterm"></a><a id="id905698" class="indexterm"></a></p>
</div>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-5">
<div class="titlepage"><div><div><h2 class="title">Pluggable Look-and-Feel</h2></div></div></div>
<p id="swingcomponents_id4"><a id="idx11025" class="indexterm"></a>We mentioned before that Swing components can easily change
    their appearance, like master spies or thespians. Generally, different
    kinds of components within an application have coordinated appearances
    that are similar in some way. For example, they probably use the same font
    and the same basic color scheme. The collection of appearances and common
    behavior of GUI components is called a <span class="emphasis"><em>look-and-feel</em></span>
    (L&amp;F).</p>
<p id="part_of_the_job">Part of the job of designing a GUI for an operating system is
    designing the L&amp;F. Mac OS, therefore, has its own distinctive L&amp;F,
    as does Windows. Java offers several different L&amp;F schemes for Swing
    components. If youâ€™re adept at graphic design, you can write your own
    L&amp;F schemes and easily convince Swing to use them. This chameleon-like
    ability to change appearance is called <span class="emphasis"><em>pluggable
    look-and-feel</em></span>, sometimes abbreviated PLAF (donâ€™t pronounce that
    out loud if others are eating).</p>
<p id="seeing_is_belie">Seeing is believing. Hereâ€™s an example that creates a handful of
    Swing components. Menu items allow you to change the L&amp;F dynamically
    while the application is running:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1097">    <code class="c1">//file: QuickChange.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">QuickChange</code> <code class="kd">extends</code> <code class="n">JFrame</code> <code class="o">{</code>

      <code class="kd">public</code> <code class="nf">QuickChange</code><code class="o">()</code> <code class="o">{</code>
        <code class="kd">super</code><code class="o">(</code><code class="s">"QuickChange v1.0"</code><code class="o">);</code>
        <code class="n">createGUI</code><code class="o">();</code>
      <code class="o">}</code>

      <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">createGUI</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">setSize</code><code class="o">(</code><code class="mi">300</code><code class="o">,</code> <code class="mi">200</code><code class="o">);</code>

        <code class="c1">// create a simple File menu</code>
        <code class="n">JMenu</code> <code class="n">file</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JMenu</code><code class="o">(</code><code class="s">"File"</code><code class="o">,</code> <code class="kc">true</code><code class="o">);</code>
        <code class="n">JMenuItem</code> <code class="n">quit</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JMenuItem</code><code class="o">(</code><code class="s">"Quit"</code><code class="o">);</code>
        <code class="n">file</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">quit</code><code class="o">);</code>
        <code class="n">quit</code><code class="o">.</code><code class="na">addActionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code> <code class="n">System</code><code class="o">.</code><code class="na">exit</code><code class="o">(</code><code class="mi">0</code><code class="o">);</code> <code class="o">}</code>
        <code class="o">});</code>

        <code class="c1">// create the Look &amp; Feel menu</code>
        <code class="n">JMenu</code> <code class="n">lnf</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JMenu</code><code class="o">(</code><code class="s">"Look &amp; Feel"</code><code class="o">,</code> <code class="kc">true</code><code class="o">);</code>
        <code class="n">ButtonGroup</code> <code class="n">buttonGroup</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ButtonGroup</code><code class="o">();</code>
        <code class="kd">final</code> <code class="n">UIManager</code><code class="o">.</code><code class="na">LookAndFeelInfo</code><code class="o">[]</code> <code class="n">info</code> <code class="o">=</code>
            <code class="n">UIManager</code><code class="o">.</code><code class="na">getInstalledLookAndFeels</code><code class="o">();</code>
        <code class="k">for</code> <code class="o">(</code><code class="kt">int</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="n">info</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
          <code class="n">JRadioButtonMenuItem</code> <code class="n">item</code> <code class="o">=</code> <code class="k">new</code>
              <code class="n">JRadioButtonMenuItem</code><code class="o">(</code><code class="n">info</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getName</code><code class="o">(),</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">0</code><code class="o">);</code>
          <code class="kd">final</code> <code class="n">String</code> <code class="n">className</code> <code class="o">=</code> <code class="n">info</code><code class="o">[</code><code class="n">i</code><code class="o">].</code><code class="na">getClassName</code><code class="o">();</code>
          <code class="n">item</code><code class="o">.</code><code class="na">addActionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">ActionListener</code><code class="o">()</code> <code class="o">{</code>
            <code class="kd">public</code> <code class="kt">void</code> <code class="nf">actionPerformed</code><code class="o">(</code><code class="n">ActionEvent</code> <code class="n">ae</code><code class="o">)</code> <code class="o">{</code>
              <code class="k">try</code> <code class="o">{</code> <code class="n">UIManager</code><code class="o">.</code><code class="na">setLookAndFeel</code><code class="o">(</code><code class="n">className</code><code class="o">);</code> <code class="o">}</code>
              <code class="k">catch</code> <code class="o">(</code><code class="n">Exception</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">e</code><code class="o">);</code> <code class="o">}</code>
              <code class="n">SwingUtilities</code><code class="o">.</code><code class="na">updateComponentTreeUI</code><code class="o">(</code><code class="n">QuickChange</code><code class="o">.</code><code class="na">this</code><code class="o">);</code>
            <code class="o">}</code>
          <code class="o">});</code>
          <code class="n">buttonGroup</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">item</code><code class="o">);</code>
          <code class="n">lnf</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">item</code><code class="o">);</code>
        <code class="o">}</code>

        <code class="c1">// add the menu bar</code>
        <code class="n">JMenuBar</code> <code class="n">mb</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JMenuBar</code><code class="o">();</code>
        <code class="n">mb</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">file</code><code class="o">);</code>
        <code class="n">mb</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">lnf</code><code class="o">);</code>
        <code class="n">setJMenuBar</code><code class="o">(</code><code class="n">mb</code><code class="o">);</code>

        <code class="c1">// add some components</code>
        <code class="n">JPanel</code> <code class="n">jp</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JPanel</code><code class="o">();</code>
        <code class="n">jp</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JCheckBox</code><code class="o">(</code><code class="s">"JCheckBox"</code><code class="o">));</code>
        <code class="n">String</code><code class="o">[]</code> <code class="n">names</code> <code class="o">=</code>
          <code class="k">new</code> <code class="n">String</code><code class="o">[]</code> <code class="o">{</code> <code class="s">"Tosca"</code><code class="o">,</code> <code class="s">"Cavaradossi"</code><code class="o">,</code> <code class="s">"Scarpia"</code><code class="o">,</code>
                         <code class="s">"Angelotti"</code><code class="o">,</code> <code class="s">"Spoletta"</code><code class="o">,</code> <code class="s">"Sciarrone"</code><code class="o">,</code>
                         <code class="s">"Carceriere"</code><code class="o">,</code> <code class="s">"Il sagrestano"</code><code class="o">,</code> <code class="s">"Un pastore"</code> <code class="o">};</code>
        <code class="n">jp</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JComboBox</code><code class="o">(</code><code class="n">names</code><code class="o">));</code>
        <code class="n">jp</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JButton</code><code class="o">(</code><code class="s">"JButton"</code><code class="o">));</code>
        <code class="n">jp</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"JLabel"</code><code class="o">));</code>
        <code class="n">jp</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JTextField</code><code class="o">(</code><code class="s">"JTextField"</code><code class="o">));</code>
        <code class="n">JPanel</code> <code class="n">main</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JPanel</code><code class="o">(</code><code class="k">new</code> <code class="n">GridLayout</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="mi">2</code><code class="o">));</code>
        <code class="n">main</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">jp</code><code class="o">);</code>
        <code class="n">main</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="k">new</code> <code class="n">JScrollPane</code><code class="o">(</code><code class="k">new</code> <code class="n">JList</code><code class="o">(</code><code class="n">names</code><code class="o">)));</code>
        <code class="n">setContentPane</code><code class="o">(</code><code class="n">main</code><code class="o">);</code>
        <code class="n">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">new</code> <code class="nf">QuickChange</code><code class="o">().</code><code class="na">setVisible</code><code class="o">(</code><code class="kc">true</code><code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="the_interesting_id2">The interesting part of this application is creating a menu of the
    available L&amp;Fs. First, we ask a class called <a id="id907598" class="indexterm"></a><code class="literal">UIManager</code> to tell us all
    about the available L&amp;Fs on our computer:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1098">    <code class="kd">final</code> <code class="n">UIManager</code><code class="o">.</code><code class="na">LookAndFeelInfo</code><code class="o">[]</code> <code class="n">info</code> <code class="o">=</code>
            <code class="n">UIManager</code><code class="o">.</code><code class="na">getInstalledLookAndFeels</code><code class="o">();</code></pre>
<p id="information_abo">Information about L&amp;Fs is returned as instances of <code class="literal">UIManager.LookAndFeelInfo</code>. Despite the long
    name, thereâ€™s not much to this class; it just associates a name, such as
    <span class="keep-together">Metal, and the name of the class that
    implements the L&amp;F, such as <code class="literal">javax</code></span><a id="id907698" class="indexterm"></a><span class="keep-together"><code class="literal">.swing.plaf.metal.MetalLookAndFeel</code>. In the
    </span><code class="literal">QuickChange</code> example, we create
    a menu item from each L&amp;F name. If the menu item is selected, we tell
    the <code class="literal">UIManager</code> to use the selected
    L&amp;F class. To make sure all the components are redrawn with the new
    L&amp;F, we call <a id="id907729" class="indexterm"></a><code class="literal">updateComponentTreeUI()</code>,
    a static method in the <a id="id907741" class="indexterm"></a><code class="literal">SwingUtilities</code>
    class.</p>
<p id="the_jdk_include">The JDK includes several L&amp;Fs: Windows, OS X, Motif, the
    original Metal L&amp;F, the highly customizable Synth, and the newest
    edition, Nimbus. Windows, OS X, and Motif are recreations of their
    corresponding native desktop environments. If youâ€™re running Swing on Mac
    OS X, the default L&amp;F is an implementation of Aqua, the UI design for
    all new Mac applications. Unfortunately, you cannot use this L&amp;F on
    any other platforms because of licensing issues (the Windows L&amp;F has
    similar restrictions).</p>
<p id="the_metal_lf_a">The Metal L&amp;F and its Ocean theme are the default on some
    platforms, but at this point they appear dated compared to modern
    windowing systems. The newest edition, Nimbus, is a far superior
    alternative. Its aethetics are on par with modern windowing systems and
    its use of scaleable vector graphics allows it to shine on high-density
    displays at various sizes. Nimbus is actually a highly evolved subclass of
    the Synth L&amp;F.</p>
<p id="synth_accommoda">Synth accommodates the new trend in skinnable user interfaces. Many
    applications now allow users to customize the L&amp;F very easily, using
    only images and simple preferences files to create new appearances.
    Skinnability is not the same as a full-blown pluggable L&amp;F, but it
    lets you do a lot without any programming required. Synth acts like an
    ordinary L&amp;F, but can be customized through the use of images and XML
    description files to create new looks. For example, the borders of
    components (such as the shiny metal look of the Metal L&amp;F) can be
    described by providing an example image and then specifying the offsets of
    the interior â€œcornersâ€? as well as the method to use (stretch or tile) to
    cover larger areas. Synth then uses the image to paint the borders of
    whatever components you specify. Synth can do quite a lot and even allows
    you to specify Java objects to be involved in painting, so you can resort
    to programming again if your L&amp;F gets too complex.<a id="id907804" class="indexterm"></a></p>
</div>
<div class="sect1" data-original-filename="ch18.xml" id="learnjava3-CHP-18-SECT-6">
<div class="titlepage"><div><div><h2 class="title">Creating Custom Components</h2></div></div></div>
<p id="swingcomponents_id5"><a id="idx11022" class="indexterm"></a>In this chapter and the previous one, weâ€™ve worked with
    different user interface objects. Weâ€™ve used Swingâ€™s impressive repertoire
    of components as building blocks and extended their functionality, but we
    havenâ€™t actually created any new components. In this section, we create an
    entirely new component from scratch, a <span class="emphasis"><em>dial</em></span>.</p>
<p id="until_now_our_">Until now, our examples have been fairly self-contained; they
    generally know everything about what to do and donâ€™t rely on additional
    parts to do processing. Our menu example created a <code class="literal">DinnerFrame</code> class that had a menu of dinner
    options, but it included all the processing needed to handle the userâ€™s
    selections. If we wanted to process the selections differently, weâ€™d have
    to modify the class. A true component separates the detection of user
    input from the handling of those choices. It lets the user take some
    action and then informs other interested parties by emitting
    events.</p>
<div class="sect2" id="learnjava3-CHP-18-SECT-6.1">
<div class="titlepage"><div><div><h3 class="title">Generating Events</h3></div></div></div>
<p id="events_swingge"><a id="id495824" class="indexterm"></a>Because we want our new classes to be components, they
      should communicate the way components communicate: by generating event
      objects and sending those events to listeners. So far, weâ€™ve written a
      lot of code that listened for events but havenâ€™t seen an example that
      generated its own custom events.</p>
<p id="generating_even">Generating events sounds like it might be difficult, but it isnâ€™t.
      You can either create new kinds of events by subclassing <code class="literal">java.util.EventObject</code>, or use one of the
      standard event types. In either case, you just need to allow
      registration of listeners for your events and provide a means to deliver
      events to those listeners. Swingâ€™s <code class="literal">JComponent</code> class provides a protected member
      variable called <code class="literal">listenerList</code>, which
      you can use to keep track of event listeners. Itâ€™s an instance of
      <code class="literal">EventListenerList</code>; basically it acts
      like the maÃ®tre dâ€™ at a restaurant, keeping track of all event
      listeners, sorted by type.</p>
<p id="often_you_won">Often, you wonâ€™t need to worry about creating a custom event type.
      <code class="literal">JComponent</code> has methods that support
      firing of generic <code class="literal">PropertyChangeEvent</code>s whenever one of a
      componentâ€™s properties changes. The example weâ€™ll look at next uses this
      infrastructure to fire <code class="literal">PropertyChangeEvent</code>s whenever a value
      changes.</p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-6.2">
<div class="titlepage"><div><div><h3 class="title">A Dial Component</h3></div></div></div>
<p id="dial_componentt"><a id="idx11007" class="indexterm"></a>The standard Swing classes donâ€™t have a component thatâ€™s
      similar to an old-fashioned dialâ€”for example, the volume control on your
      radio. (The <code class="literal">JSlider</code> fills this role,
      of course.) In this section, we implement a <code class="literal">Dial</code> class. The dial has a value that can be
      adjusted by clicking and dragging to â€œtwistâ€? the dial (see <a class="xref" href="ch18.html#learnjava3-CHP-18-FIG-11" title="FigureÂ 18-11.Â The Dial component">FigureÂ 18-11</a>). As the value of the dial
      changes, <code class="literal">DialEvent</code>s are fired off by
      the component. The dial can be used just like any other Java component.
      We even have a custom <code class="literal">DialListener</code>
      interface that matches the <code class="literal">DialEvent</code>
      class.</p>
<div class="figure" id="learnjava3-CHP-18-FIG-11">
<div class="figure-contents"><div class="mediaobject" id="I_18_tt1099"><img src="http://orm-chimera-prod.s3.amazonaws.com/1234000001805/figs/lj4e_1811.png" alt="The Dial component"></div></div>
<div class="figure-title">FigureÂ 18-11.Â The Dial component</div>
</div>
<p id="heres_the_dial">Hereâ€™s the <code class="literal">Dial</code> code:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1100">    <code class="c1">//file: Dial.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.awt.event.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">java.util.*</code><code class="o">;</code>
    <code class="kn">import</code> <code class="nn">javax.swing.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">Dial</code> <code class="kd">extends</code> <code class="n">JComponent</code> <code class="o">{</code>
      <code class="kt">int</code> <code class="n">minValue</code><code class="o">,</code> <code class="n">nvalue</code><code class="o">,</code> <code class="n">maxValue</code><code class="o">,</code> <code class="n">radius</code><code class="o">;</code>

      <code class="kd">public</code> <code class="nf">Dial</code><code class="o">()</code> <code class="o">{</code> <code class="k">this</code><code class="o">(</code><code class="mi">0</code><code class="o">,</code> <code class="mi">100</code><code class="o">,</code> <code class="mi">0</code><code class="o">);</code> <code class="o">}</code>

      <code class="kd">public</code> <code class="nf">Dial</code><code class="o">(</code><code class="kt">int</code> <code class="n">minValue</code><code class="o">,</code> <code class="kt">int</code> <code class="n">maxValue</code><code class="o">,</code> <code class="kt">int</code> <code class="n">value</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">setMinimum</code><code class="o">(</code> <code class="n">minValue</code> <code class="o">);</code>
        <code class="n">setMaximum</code><code class="o">(</code> <code class="n">maxValue</code> <code class="o">);</code>
        <code class="n">setValue</code><code class="o">(</code> <code class="n">value</code> <code class="o">);</code>
        <code class="n">setForeground</code><code class="o">(</code> <code class="n">Color</code><code class="o">.</code><code class="na">lightGray</code> <code class="o">);</code>

        <code class="n">addMouseListener</code><code class="o">(</code><code class="k">new</code> <code class="n">MouseAdapter</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">mousePressed</code><code class="o">(</code><code class="n">MouseEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code> <code class="n">spin</code><code class="o">(</code><code class="n">e</code><code class="o">);</code> <code class="o">}</code>
        <code class="o">});</code>
        <code class="n">addMouseMotionListener</code><code class="o">(</code><code class="k">new</code> <code class="n">MouseMotionAdapter</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">mouseDragged</code><code class="o">(</code><code class="n">MouseEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code> <code class="n">spin</code><code class="o">(</code><code class="n">e</code><code class="o">);</code> <code class="o">}</code>
        <code class="o">});</code>
      <code class="o">}</code>

      <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">spin</code><code class="o">(</code> <code class="n">MouseEvent</code> <code class="n">e</code> <code class="o">)</code> <code class="o">{</code>
        <code class="kt">int</code> <code class="n">y</code> <code class="o">=</code> <code class="n">e</code><code class="o">.</code><code class="na">getY</code><code class="o">();</code>
        <code class="kt">int</code> <code class="n">x</code> <code class="o">=</code> <code class="n">e</code><code class="o">.</code><code class="na">getX</code><code class="o">();</code>
        <code class="kt">double</code> <code class="n">th</code> <code class="o">=</code> <code class="n">Math</code><code class="o">.</code><code class="na">atan</code><code class="o">((</code><code class="mf">1.0</code> <code class="o">*</code> <code class="n">y</code> <code class="o">-</code> <code class="n">radius</code><code class="o">)</code> <code class="o">/</code> <code class="o">(</code><code class="n">x</code> <code class="o">-</code> <code class="n">radius</code><code class="o">));</code>
        <code class="kt">int</code> <code class="n">value</code><code class="o">=(</code><code class="kt">int</code><code class="o">)(</code><code class="n">th</code> <code class="o">/</code> <code class="o">(</code><code class="mi">2</code> <code class="o">*</code> <code class="n">Math</code><code class="o">.</code><code class="na">PI</code><code class="o">)</code> <code class="o">*</code> <code class="o">(</code><code class="n">maxValue</code> <code class="o">-</code> <code class="n">minValue</code><code class="o">));</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">x</code> <code class="o">&lt;</code> <code class="n">radius</code><code class="o">)</code>
          <code class="n">setValue</code><code class="o">(</code> <code class="n">value</code> <code class="o">+</code> <code class="o">(</code><code class="n">maxValue</code><code class="o">-</code><code class="n">minValue</code><code class="o">)</code> <code class="o">/</code> <code class="mi">2</code> <code class="o">+</code> <code class="n">minValue</code><code class="o">);</code>
        <code class="k">else</code> <code class="nf">if</code> <code class="o">(</code><code class="n">y</code> <code class="o">&lt;</code> <code class="n">radius</code><code class="o">)</code>
          <code class="n">setValue</code><code class="o">(</code> <code class="n">value</code> <code class="o">+</code> <code class="n">maxValue</code> <code class="o">);</code>
        <code class="k">else</code>
          <code class="nf">setValue</code><code class="o">(</code> <code class="n">value</code> <code class="o">+</code> <code class="n">minValue</code><code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">paintComponent</code><code class="o">(</code><code class="n">Graphics</code> <code class="n">g</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">Graphics2D</code> <code class="n">g2</code> <code class="o">=</code> <code class="o">(</code><code class="n">Graphics2D</code><code class="o">)</code><code class="n">g</code><code class="o">;</code>
        <code class="kt">int</code> <code class="n">tick</code> <code class="o">=</code> <code class="mi">10</code><code class="o">;</code>
        <code class="n">radius</code> <code class="o">=</code> <code class="n">Math</code><code class="o">.</code><code class="na">min</code><code class="o">(</code> <code class="n">getSize</code><code class="o">().</code><code class="na">width</code><code class="o">,</code><code class="n">getSize</code><code class="o">().</code><code class="na">height</code> <code class="o">)/</code><code class="mi">2</code> <code class="o">-</code> <code class="n">tick</code><code class="o">;</code>
        <code class="n">g2</code><code class="o">.</code><code class="na">setPaint</code><code class="o">(</code> <code class="n">getForeground</code><code class="o">().</code><code class="na">darker</code><code class="o">()</code> <code class="o">);</code>
        <code class="n">g2</code><code class="o">.</code><code class="na">drawLine</code><code class="o">(</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code> <code class="o">+</code> <code class="n">tick</code> <code class="o">/</code> <code class="mi">2</code><code class="o">,</code> <code class="n">radius</code><code class="o">,</code>
           <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code> <code class="o">+</code> <code class="n">tick</code><code class="o">,</code> <code class="n">radius</code><code class="o">);</code>
        <code class="n">g2</code><code class="o">.</code><code class="na">setStroke</code><code class="o">(</code> <code class="k">new</code> <code class="n">BasicStroke</code><code class="o">(</code><code class="mi">2</code><code class="o">)</code> <code class="o">);</code>
        <code class="n">draw3DCircle</code><code class="o">(</code> <code class="n">g2</code><code class="o">,</code> <code class="mi">0</code><code class="o">,</code> <code class="mi">0</code><code class="o">,</code> <code class="n">radius</code><code class="o">,</code> <code class="kc">true</code> <code class="o">);</code>
        <code class="kt">int</code> <code class="n">knobRadius</code> <code class="o">=</code> <code class="n">radius</code> <code class="o">/</code> <code class="mi">7</code><code class="o">;</code>
        <code class="kt">double</code> <code class="n">th</code> <code class="o">=</code> <code class="n">nvalue</code> <code class="o">*</code> <code class="o">(</code><code class="mi">2</code> <code class="o">*</code> <code class="n">Math</code><code class="o">.</code><code class="na">PI</code><code class="o">)</code> <code class="o">/</code> <code class="o">(</code><code class="n">maxValue</code> <code class="o">-</code> <code class="n">minValue</code><code class="o">);</code>
        <code class="kt">int</code> <code class="n">x</code> <code class="o">=</code> <code class="o">(</code><code class="kt">int</code><code class="o">)(</code><code class="n">Math</code><code class="o">.</code><code class="na">cos</code><code class="o">(</code><code class="n">th</code><code class="o">)</code> <code class="o">*</code> <code class="o">(</code><code class="n">radius</code> <code class="o">-</code> <code class="n">knobRadius</code> <code class="o">*</code> <code class="mi">3</code><code class="o">)),</code>
        <code class="n">y</code> <code class="o">=</code> <code class="o">(</code><code class="kt">int</code><code class="o">)(</code><code class="n">Math</code><code class="o">.</code><code class="na">sin</code><code class="o">(</code><code class="n">th</code><code class="o">)</code> <code class="o">*</code> <code class="o">(</code><code class="n">radius</code> <code class="o">-</code> <code class="n">knobRadius</code> <code class="o">*</code> <code class="mi">3</code><code class="o">));</code>
        <code class="n">g2</code><code class="o">.</code><code class="na">setStroke</code><code class="o">(</code><code class="k">new</code> <code class="n">BasicStroke</code><code class="o">(</code><code class="mi">1</code><code class="o">));</code>
        <code class="n">draw3DCircle</code><code class="o">(</code><code class="n">g2</code><code class="o">,</code> <code class="n">x</code> <code class="o">+</code> <code class="n">radius</code> <code class="o">-</code> <code class="n">knobRadius</code><code class="o">,</code>
           <code class="n">y</code> <code class="o">+</code> <code class="n">radius</code> <code class="o">-</code> <code class="n">knobRadius</code><code class="o">,</code> <code class="n">knobRadius</code><code class="o">,</code> <code class="kc">false</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">private</code> <code class="kt">void</code> <code class="nf">draw3DCircle</code><code class="o">(</code>
          <code class="n">Graphics</code> <code class="n">g</code><code class="o">,</code> <code class="kt">int</code> <code class="n">x</code><code class="o">,</code> <code class="kt">int</code> <code class="n">y</code><code class="o">,</code> <code class="kt">int</code> <code class="n">radius</code><code class="o">,</code> <code class="kt">boolean</code> <code class="n">raised</code><code class="o">)</code>
      <code class="o">{</code>
        <code class="n">Color</code> <code class="n">foreground</code> <code class="o">=</code> <code class="n">getForeground</code><code class="o">();</code>
        <code class="n">Color</code> <code class="n">light</code> <code class="o">=</code> <code class="n">foreground</code><code class="o">.</code><code class="na">brighter</code><code class="o">();</code>
        <code class="n">Color</code> <code class="n">dark</code> <code class="o">=</code> <code class="n">foreground</code><code class="o">.</code><code class="na">darker</code><code class="o">();</code>
        <code class="n">g</code><code class="o">.</code><code class="na">setColor</code><code class="o">(</code><code class="n">foreground</code><code class="o">);</code>
        <code class="n">g</code><code class="o">.</code><code class="na">fillOval</code><code class="o">(</code><code class="n">x</code><code class="o">,</code> <code class="n">y</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">);</code>
        <code class="n">g</code><code class="o">.</code><code class="na">setColor</code><code class="o">(</code><code class="n">raised</code> <code class="o">?</code> <code class="n">light</code> <code class="o">:</code> <code class="n">dark</code><code class="o">);</code>
        <code class="n">g</code><code class="o">.</code><code class="na">drawArc</code><code class="o">(</code><code class="n">x</code><code class="o">,</code> <code class="n">y</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">,</code> <code class="mi">45</code><code class="o">,</code> <code class="mi">180</code><code class="o">);</code>
        <code class="n">g</code><code class="o">.</code><code class="na">setColor</code><code class="o">(</code><code class="n">raised</code> <code class="o">?</code> <code class="n">dark</code> <code class="o">:</code> <code class="n">light</code><code class="o">);</code>
        <code class="n">g</code><code class="o">.</code><code class="na">drawArc</code><code class="o">(</code><code class="n">x</code><code class="o">,</code> <code class="n">y</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">,</code> <code class="n">radius</code> <code class="o">*</code> <code class="mi">2</code><code class="o">,</code> <code class="mi">225</code><code class="o">,</code> <code class="mi">180</code><code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="n">Dimension</code> <code class="nf">getPreferredSize</code><code class="o">()</code> <code class="o">{</code>
        <code class="k">return</code> <code class="k">new</code> <code class="nf">Dimension</code><code class="o">(</code><code class="mi">100</code><code class="o">,</code> <code class="mi">100</code><code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setValue</code><code class="o">(</code> <code class="kt">int</code> <code class="n">value</code> <code class="o">)</code> <code class="o">{</code>
        <code class="k">this</code><code class="o">.</code><code class="na">nvalue</code> <code class="o">=</code> <code class="n">value</code> <code class="o">-</code> <code class="n">minValue</code><code class="o">;</code>
        <code class="n">repaint</code><code class="o">();</code>
        <code class="n">fireEvent</code><code class="o">();</code>
      <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getValue</code><code class="o">()</code>  <code class="o">{</code> <code class="k">return</code> <code class="n">nvalue</code><code class="o">+</code><code class="n">minValue</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setMinimum</code><code class="o">(</code><code class="kt">int</code> <code class="n">minValue</code><code class="o">)</code>  <code class="o">{</code> <code class="k">this</code><code class="o">.</code><code class="na">minValue</code> <code class="o">=</code> <code class="n">minValue</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getMinimum</code><code class="o">()</code>  <code class="o">{</code> <code class="k">return</code> <code class="n">minValue</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setMaximum</code><code class="o">(</code><code class="kt">int</code> <code class="n">maxValue</code><code class="o">)</code>  <code class="o">{</code> <code class="k">this</code><code class="o">.</code><code class="na">maxValue</code> <code class="o">=</code> <code class="n">maxValue</code><code class="o">;</code> <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getMaximum</code><code class="o">()</code>  <code class="o">{</code> <code class="k">return</code> <code class="n">maxValue</code><code class="o">;</code> <code class="o">}</code>

      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">addDialListener</code><code class="o">(</code><code class="n">DialListener</code> <code class="n">listener</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">listenerList</code><code class="o">.</code><code class="na">add</code><code class="o">(</code> <code class="n">DialListener</code><code class="o">.</code><code class="na">class</code><code class="o">,</code> <code class="n">listener</code> <code class="o">);</code>
      <code class="o">}</code>
      <code class="kd">public</code> <code class="kt">void</code> <code class="nf">removeDialListener</code><code class="o">(</code><code class="n">DialListener</code> <code class="n">listener</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">listenerList</code><code class="o">.</code><code class="na">remove</code><code class="o">(</code> <code class="n">DialListener</code><code class="o">.</code><code class="na">class</code><code class="o">,</code> <code class="n">listener</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kt">void</code> <code class="nf">fireEvent</code><code class="o">()</code> <code class="o">{</code>
        <code class="n">Object</code><code class="o">[]</code> <code class="n">listeners</code> <code class="o">=</code> <code class="n">listenerList</code><code class="o">.</code><code class="na">getListenerList</code><code class="o">();</code>
        <code class="k">for</code> <code class="o">(</code> <code class="kt">int</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">0</code><code class="o">;</code> <code class="n">i</code> <code class="o">&lt;</code> <code class="n">listeners</code><code class="o">.</code><code class="na">length</code><code class="o">;</code> <code class="n">i</code> <code class="o">+=</code> <code class="mi">2</code> <code class="o">)</code>
          <code class="k">if</code> <code class="o">(</code> <code class="n">listeners</code><code class="o">[</code><code class="n">i</code><code class="o">]</code> <code class="o">==</code> <code class="n">DialListener</code><code class="o">.</code><code class="na">class</code> <code class="o">)</code>
            <code class="o">((</code><code class="n">DialListener</code><code class="o">)</code><code class="n">listeners</code><code class="o">[</code><code class="n">i</code> <code class="o">+</code> <code class="mi">1</code><code class="o">]).</code><code class="na">dialAdjusted</code><code class="o">(</code>
              <code class="k">new</code> <code class="nf">DialEvent</code><code class="o">(</code><code class="k">this</code><code class="o">,</code> <code class="n">getValue</code><code class="o">())</code> <code class="o">);</code>
      <code class="o">}</code>

      <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">args</code><code class="o">)</code> <code class="o">{</code>
        <code class="n">JFrame</code> <code class="n">frame</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JFrame</code><code class="o">(</code><code class="s">"Dial v1.0"</code><code class="o">);</code>
        <code class="kd">final</code> <code class="n">JLabel</code> <code class="n">statusLabel</code> <code class="o">=</code> <code class="k">new</code> <code class="n">JLabel</code><code class="o">(</code><code class="s">"Welcome to Dial v1.0"</code><code class="o">);</code>
        <code class="kd">final</code> <code class="n">Dial</code> <code class="n">dial</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Dial</code><code class="o">();</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">dial</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">CENTER</code><code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">statusLabel</code><code class="o">,</code> <code class="n">BorderLayout</code><code class="o">.</code><code class="na">SOUTH</code><code class="o">);</code>

        <code class="n">dial</code><code class="o">.</code><code class="na">addDialListener</code><code class="o">(</code><code class="k">new</code> <code class="n">DialListener</code><code class="o">()</code> <code class="o">{</code>
          <code class="kd">public</code> <code class="kt">void</code> <code class="nf">dialAdjusted</code><code class="o">(</code><code class="n">DialEvent</code> <code class="n">e</code><code class="o">)</code> <code class="o">{</code>
            <code class="n">statusLabel</code><code class="o">.</code><code class="na">setText</code><code class="o">(</code><code class="s">"Value is "</code> <code class="o">+</code> <code class="n">e</code><code class="o">.</code><code class="na">getValue</code><code class="o">());</code>
          <code class="o">}</code>
        <code class="o">});</code>

        <code class="n">frame</code><code class="o">.</code><code class="na">setDefaultCloseOperation</code><code class="o">(</code> <code class="n">JFrame</code><code class="o">.</code><code class="na">EXIT_ON_CLOSE</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setSize</code><code class="o">(</code> <code class="mi">150</code><code class="o">,</code> <code class="mi">150</code> <code class="o">);</code>
        <code class="n">frame</code><code class="o">.</code><code class="na">setVisible</code><code class="o">(</code> <code class="kc">true</code> <code class="o">);</code>
      <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="heres_dialeven">Hereâ€™s <code class="literal">DialEvent</code>, a simple
      subclass of <code class="literal">java.util.EventObject</code>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1101">    <code class="c1">//file: DialEvent.java</code>
    <code class="kn">import</code> <code class="nn">java.awt.*</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kd">class</code> <code class="nc">DialEvent</code> <code class="kd">extends</code> <code class="n">java</code><code class="o">.</code><code class="na">util</code><code class="o">.</code><code class="na">EventObject</code> <code class="o">{</code>
        <code class="kt">int</code> <code class="n">value</code><code class="o">;</code>

        <code class="n">DialEvent</code><code class="o">(</code> <code class="n">Dial</code> <code class="n">source</code><code class="o">,</code> <code class="kt">int</code> <code class="n">value</code> <code class="o">)</code> <code class="o">{</code>
            <code class="kd">super</code><code class="o">(</code> <code class="n">source</code> <code class="o">);</code>
            <code class="k">this</code><code class="o">.</code><code class="na">value</code> <code class="o">=</code> <code class="n">value</code><code class="o">;</code>
        <code class="o">}</code>

        <code class="kd">public</code> <code class="kt">int</code> <code class="nf">getValue</code><code class="o">()</code> <code class="o">{</code>
            <code class="k">return</code> <code class="n">value</code><code class="o">;</code>
        <code class="o">}</code>
    <code class="o">}</code></pre>
<p id="finally_heres">Finally, hereâ€™s the code for <code class="literal">DialListener</code>:</p>
<pre class="programlisting" data-language="java" id="I_18_tt1102">    <code class="c1">//file: DialListener.java</code>
    <code class="kd">public</code> <code class="kd">interface</code> <code class="nc">DialListener</code> <code class="kd">extends</code> <code class="n">java</code><code class="o">.</code><code class="na">util</code><code class="o">.</code><code class="na">EventListener</code> <code class="o">{</code>
        <code class="kt">void</code> <code class="nf">dialAdjusted</code><code class="o">(</code> <code class="n">DialEvent</code> <code class="n">e</code> <code class="o">);</code>
    <code class="o">}</code></pre>
<p id="lets_start_fro">Letâ€™s start from the top of the <code class="literal">Dial</code> class. Weâ€™ll focus on the structure and
      leave you to figure out the trigonometry on your own.</p>
<p id="dials_main_m"><code class="literal">Dial</code>â€™s <code class="literal">main()</code> method demonstrates how to use the dial
      to build a user interface. It creates a <code class="literal">Dial</code> and adds it to a <code class="literal">JFrame</code>. Then <code class="literal">main()</code> registers a dial listener on the dial.
      Whenever a <code class="literal">DialEvent</code> is received, the
      value of the dial is examined and displayed in a <code class="literal">JLabel</code> at the bottom of the frame
      window.</p>
<p id="the_constructor_id2">The constructor for the <code class="literal">Dial</code>
      class stores the dialâ€™s minimum, maximum, and current values; a default
      constructor provides a minimum of <code class="literal">0</code>,
      a maximum of <code class="literal">100</code>, and a current value
      of <code class="literal">0</code>. The constructor sets the
      foreground color of the dial and registers listeners for mouse events.
      If the mouse is pressed or dragged, <code class="literal">Dial</code>â€™s <code class="literal">spin()</code> method is called to update the dialâ€™s
      value. <code class="literal">spin()</code> performs some basic
      trigonometry to figure out what the new value of the dial should
      be.</p>
<p id="paintcomponent"><code class="literal">paintComponent()</code> and <code class="literal">draw3DCircle()</code> do a lot of trigonometry to
      figure out how to display the dial. <code class="literal">draw3DCircle()</code> is a private helper method that
      draws a circle that appears either raised or depressed; we use this to
      make the dial look three-dimensional.</p>
<p id="the_next_group_">The next group of methods provides ways to retrieve or change the
      dialâ€™s current setting and the minimum and maximum values. The important
      thing to notice here is the pattern of get and set methods for all of
      the important values used by the <code class="literal">Dial</code>. We will talk more about this in <a class="xref" href="ch22.html" title="ChapterÂ 22.Â JavaBeans">ChapterÂ 22</a>. Also, notice that the <code class="literal">setValue()</code> method does <span class="keep-together">two important</span> things: it repaints the
      component to reflect the new value and fires the <span class="keep-together"><code class="literal">DialEvent</code>
      </span>signifying the change.</p>
<p id="the_final_group">The final group of methods in the <code class="literal">Dial</code> class provides the plumbing necessary for
      our event firing. <code class="literal">addDialListener()</code>
      and <code class="literal">removeDialListener()</code> take care of
      maintaining the listener list. Using the <code class="literal">listenerList</code> member variable we inherited from
      <code class="literal">JComponent</code> makes this an easy task.
      The <code class="literal">fireEvent()</code> method retrieves the
      registered listeners for this component. It sends a <code class="literal">DialEvent</code> to any registered <code class="literal">DialListener</code>s.<a id="id913268" class="indexterm"></a></p>
</div>
<div class="sect2" id="learnjava3-CHP-18-SECT-6.3">
<div class="titlepage"><div><div><h3 class="title">Model and View Separation</h3></div></div></div>
<p id="the_dial_exampl">The <code class="literal">Dial</code> example is overly
      simplified. All Swing components, as weâ€™ve discussed, keep their data
      model and view separate. In the <code class="literal">Dial</code>
      component, weâ€™ve combined these elements in a single class, which limits
      its reusability. To have <code class="literal">Dial</code>
      implement the MVC paradigm, we would have developed a dial data model
      and something called a UI-delegate that handled displaying the component
      and responding to user events. For a full treatment of this subject, see
      the <code class="literal">JogShuttle</code> example in Oâ€™Reillyâ€™s
      <span class="emphasis"><em>J</em></span><a class="ulink" href="http://shop.oreilly.com/product/9780596004088.do" target="_top"><span class="emphasis"><em>ava
      Swing</em></span></a>.</p>
<p id="in__well_take">In <a class="xref" href="ch19.html" title="ChapterÂ 19.Â Layout Managers">ChapterÂ 19</a>, weâ€™ll take what we know
      about components and containers and put them together using layout
      managers to create complex GUIs.<a id="id913333" class="indexterm"></a></p>
</div>
</div>
<div class="footnotes">
<br><hr style="width: 100; align: left;">
<div id="ftn.learnjava3-CHP-18-FN-1" class="footnote"><p><a href="#learnjava3-CHP-18-FN-1" class="para"><sup class="para">[41] </sup></a>You may need to double-click on a cell to edit it.</p></div>
</div></section><footer><div class="navfooter">
<hr>
<table style="width: 100%; ">
<tr>
<td style="width: 40%; text-align: left; ">
<a accesskey="p" href="ch17.html">Prev</a>Â </td>
<td style="width: 20%; text-align: center; ">Â </td>
<td style="width: 40%; text-align: right; ">Â <a accesskey="n" href="ch19.html">Next</a>
</td>
</tr>
<tr>
<td style="width: 40%; text-align: left; vertical-align: top; ">ChapterÂ 17.Â Using Swing ComponentsÂ </td>
<td style="width: 20%; text-align: center; "><a accesskey="h" href="index.html">Home</a></td>
<td style="width: 40%; text-align: right; vertical-align: top; ">Â ChapterÂ 19.Â Layout Managers</td>
</tr>
</table>
</div></footer>


	<div class="extra-footer">
		<p>Â© 2013, Oâ€™Reilly Media, Inc.</p>
		<ul>
			<li><a href="http://oreilly.com/terms/">Terms of Service</a></li>
			<li><a href="http://oreilly.com/oreilly/privacy.csp">Privacy Policy</a></li>
			<li>Interested in <a href="mailto:scordesse@oreilly.com">sponsoring content?</a></li>
		</ul>
	</div>
<script type="text/javascript">if (!NREUMQ.f) { NREUMQ.f=function() {
NREUMQ.push(["load",new Date().getTime()]);
var e=document.createElement("script");
e.type="text/javascript";
e.src=(("http:"===document.location.protocol)?"http:":"https:") + "//" +
  "js-agent.newrelic.com/nr-100.js";
document.body.appendChild(e);
if(NREUMQ.a)NREUMQ.a();
};
NREUMQ.a=window.onload;window.onload=NREUMQ.f;
};
NREUMQ.push(["nrfj","beacon-3.newrelic.com","3e361aebcf","2194180","IApbRUBZXg1WEEoHDAwORh5aQl8N",67,136,new Date().getTime(),"","","","",""]);</script></body>
</html>
