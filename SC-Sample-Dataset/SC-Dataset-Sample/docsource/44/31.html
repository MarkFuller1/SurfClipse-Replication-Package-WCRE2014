<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//gnu.org///DTD XHTML 1.1 plus Target 1.0//EN" "../../resources/xhtml11-target10.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><title>Source for javax.swing.JEditorPane (GNU Classpath 0.99.1-pre Documentation)</title><script src="../../resources/gjdoc.js" type="text/javascript"><!-- this comment required for konqueror 3.2.2 --></script><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/><meta name="generator" content="GNU Gjdoc Standard Doclet"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-layout.css" title="GNU Clean"/><link rel="stylesheet" type="text/css" href="../../resources/gjdochtml-clean-color1.css" title="GNU Clean"/></head><body class="content source" onload="if(parent.contentPageLoaded)parent.contentPageLoaded(document.title)"><table class="navbar div top"><tr><td class="navbar div top"><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="JEditorPane.html">Class</a></span> <span class="navbar item enabled"><a href="JEditorPane-uses.html">Use</a></span> <span class="navbar item active">Source</span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex-1.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td class="header" rowspan="2"><span class='logo'><a href='http://www.gnu.org/software/classpath' target='_top'>GNU Classpath</a> (0.99.1-pre)</td></tr><tr><td class="navi"></td><td class="navi"><a href="../../index.html" title="Show in a frameset" target="_top">Frames</a> | <a href="JEditorPane-source.html" title="Show without frames" target="_top">No Frames</a> </td></tr></table><h1 class="source title">Source for javax.swing.JEditorPane</h1><div class="source body">  <div class="source">
<pre>
   <a name="line.1"><span class="line-number even">1:</span> </a><span class="c comment">/* JEditorPane.java --
   <a name="line.2"><span class="line-number even">2:</span> </a>   Copyright (C) 2002, 2004, 2005, 2006,  Free Software Foundation, Inc.
   <a name="line.3"><span class="line-number even">3:</span> </a>
   <a name="line.4"><span class="line-number even">4:</span> </a>This file is part of GNU Classpath.
   <a name="line.5"><span class="line-number odd">5: </span></a>
   <a name="line.6"><span class="line-number even">6:</span> </a>GNU Classpath is free software; you can redistribute it and/or modify
   <a name="line.7"><span class="line-number even">7:</span> </a>it under the terms of the GNU General Public License as published by
   <a name="line.8"><span class="line-number even">8:</span> </a>the Free Software Foundation; either version 2, or (at your option)
   <a name="line.9"><span class="line-number even">9:</span> </a>any later version.
  <a name="line.10"><span class="line-number odd">10: </span></a>
  <a name="line.11"><span class="line-number even">11:</span> </a>GNU Classpath is distributed in the hope that it will be useful, but
  <a name="line.12"><span class="line-number even">12:</span> </a>WITHOUT ANY WARRANTY; without even the implied warranty of
  <a name="line.13"><span class="line-number even">13:</span> </a>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  <a name="line.14"><span class="line-number even">14:</span> </a>General Public License for more details.
  <a name="line.15"><span class="line-number odd">15: </span></a>
  <a name="line.16"><span class="line-number even">16:</span> </a>You should have received a copy of the GNU General Public License
  <a name="line.17"><span class="line-number even">17:</span> </a>along with GNU Classpath; see the file COPYING.  If not, write to the
  <a name="line.18"><span class="line-number even">18:</span> </a>Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
  <a name="line.19"><span class="line-number even">19:</span> </a>02110-1301 USA.
  <a name="line.20"><span class="line-number odd">20: </span></a>
  <a name="line.21"><span class="line-number even">21:</span> </a>Linking this library statically or dynamically with other modules is
  <a name="line.22"><span class="line-number even">22:</span> </a>making a combined work based on this library.  Thus, the terms and
  <a name="line.23"><span class="line-number even">23:</span> </a>conditions of the GNU General Public License cover the whole
  <a name="line.24"><span class="line-number even">24:</span> </a>combination.
  <a name="line.25"><span class="line-number odd">25: </span></a>
  <a name="line.26"><span class="line-number even">26:</span> </a>As a special exception, the copyright holders of this library give you
  <a name="line.27"><span class="line-number even">27:</span> </a>permission to link this library with independent modules to produce an
  <a name="line.28"><span class="line-number even">28:</span> </a>executable, regardless of the license terms of these independent
  <a name="line.29"><span class="line-number even">29:</span> </a>modules, and to copy and distribute the resulting executable under
  <a name="line.30"><span class="line-number odd">30: </span></a>terms of your choice, provided that you also meet, for each linked
  <a name="line.31"><span class="line-number even">31:</span> </a>independent module, the terms and conditions of the license of that
  <a name="line.32"><span class="line-number even">32:</span> </a>module.  An independent module is a module which is not derived from
  <a name="line.33"><span class="line-number even">33:</span> </a>or based on this library.  If you modify this library, you may extend
  <a name="line.34"><span class="line-number even">34:</span> </a>this exception to your version of the library, but you are not
  <a name="line.35"><span class="line-number odd">35: </span></a>obligated to do so.  If you do not wish to do so, delete this
  <a name="line.36"><span class="line-number even">36:</span> </a>exception statement from your version. */</span>
  <a name="line.37"><span class="line-number even">37:</span> </a>
  <a name="line.38"><span class="line-number even">38:</span> </a>
  <a name="line.39"><span class="line-number even">39:</span> </a><span class="keyword">package</span> <span class="package header type">javax.swing</span>;
  <a name="line.40"><span class="line-number odd">40: </span></a>
  <a name="line.41"><span class="line-number even">41:</span> </a><span class="keyword">import</span> <span class="import header type">java.awt.Container</span>;
  <a name="line.42"><span class="line-number even">42:</span> </a><span class="keyword">import</span> <span class="import header type">java.awt.Dimension</span>;
  <a name="line.43"><span class="line-number even">43:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.BufferedInputStream</span>;
  <a name="line.44"><span class="line-number even">44:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.FilterInputStream</span>;
  <a name="line.45"><span class="line-number odd">45: </span></a><span class="keyword">import</span> <span class="import header type">java.io.IOException</span>;
  <a name="line.46"><span class="line-number even">46:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.InputStream</span>;
  <a name="line.47"><span class="line-number even">47:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.InputStreamReader</span>;
  <a name="line.48"><span class="line-number even">48:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.Reader</span>;
  <a name="line.49"><span class="line-number even">49:</span> </a><span class="keyword">import</span> <span class="import header type">java.io.StringReader</span>;
  <a name="line.50"><span class="line-number odd">50: </span></a><span class="keyword">import</span> <span class="import header type">java.net.MalformedURLException</span>;
  <a name="line.51"><span class="line-number even">51:</span> </a><span class="keyword">import</span> <span class="import header type">java.net.URL</span>;
  <a name="line.52"><span class="line-number even">52:</span> </a><span class="keyword">import</span> <span class="import header type">java.net.URLConnection</span>;
  <a name="line.53"><span class="line-number even">53:</span> </a><span class="keyword">import</span> <span class="import header type">java.util.HashMap</span>;
  <a name="line.54"><span class="line-number even">54:</span> </a>
  <a name="line.55"><span class="line-number odd">55: </span></a><span class="keyword">import</span> <span class="import header type">javax.accessibility.AccessibleContext</span>;
  <a name="line.56"><span class="line-number even">56:</span> </a><span class="keyword">import</span> <span class="import header type">javax.accessibility.AccessibleHyperlink</span>;
  <a name="line.57"><span class="line-number even">57:</span> </a><span class="keyword">import</span> <span class="import header type">javax.accessibility.AccessibleHypertext</span>;
  <a name="line.58"><span class="line-number even">58:</span> </a><span class="keyword">import</span> <span class="import header type">javax.accessibility.AccessibleStateSet</span>;
  <a name="line.59"><span class="line-number even">59:</span> </a><span class="keyword">import</span> <span class="import header type">javax.accessibility.AccessibleText</span>;
  <a name="line.60"><span class="line-number odd">60: </span></a><span class="keyword">import</span> <span class="import header type">javax.swing.event.HyperlinkEvent</span>;
  <a name="line.61"><span class="line-number even">61:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.event.HyperlinkListener</span>;
  <a name="line.62"><span class="line-number even">62:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.plaf.TextUI</span>;
  <a name="line.63"><span class="line-number even">63:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.AbstractDocument</span>;
  <a name="line.64"><span class="line-number even">64:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.BadLocationException</span>;
  <a name="line.65"><span class="line-number odd">65: </span></a><span class="keyword">import</span> <span class="import header type">javax.swing.text.DefaultEditorKit</span>;
  <a name="line.66"><span class="line-number even">66:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.Document</span>;
  <a name="line.67"><span class="line-number even">67:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.EditorKit</span>;
  <a name="line.68"><span class="line-number even">68:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.Element</span>;
  <a name="line.69"><span class="line-number even">69:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.JTextComponent</span>;
  <a name="line.70"><span class="line-number odd">70: </span></a><span class="keyword">import</span> <span class="import header type">javax.swing.text.View</span>;
  <a name="line.71"><span class="line-number even">71:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.ViewFactory</span>;
  <a name="line.72"><span class="line-number even">72:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.WrappedPlainView</span>;
  <a name="line.73"><span class="line-number even">73:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.html.HTML</span>;
  <a name="line.74"><span class="line-number even">74:</span> </a><span class="keyword">import</span> <span class="import header type">javax.swing.text.html.HTMLDocument</span>;
  <a name="line.75"><span class="line-number odd">75: </span></a><span class="keyword">import</span> <span class="import header type">javax.swing.text.html.HTMLEditorKit</span>;
  <a name="line.76"><span class="line-number even">76:</span> </a>
  <a name="line.77"><span class="line-number even">77:</span> </a><span class="javadoc comment">/**
  <a name="line.78"><span class="line-number even">78:</span> </a> * A powerful text editor component that can handle different types of
  <a name="line.79"><span class="line-number even">79:</span> </a> * content.
  <a name="line.80"><span class="line-number odd">80: </span></a> *
  <a name="line.81"><span class="line-number even">81:</span> </a> * The JEditorPane text component is driven by an instance of
  <a name="line.82"><span class="line-number even">82:</span> </a> * {@<span class="javadoc tag">link</span> EditorKit}. The editor kit is responsible for providing
  <a name="line.83"><span class="line-number even">83:</span> </a> * a default {@<span class="javadoc tag">link</span> Document} implementation, a mechanism for loading
  <a name="line.84"><span class="line-number even">84:</span> </a> * and saving documents of its supported content type and providing
  <a name="line.85"><span class="line-number odd">85: </span></a> * a set of {@<span class="javadoc tag">link</span> Action}s for manipulating the content.
  <a name="line.86"><span class="line-number even">86:</span> </a> *
  <a name="line.87"><span class="line-number even">87:</span> </a> * By default the following content types are supported:
  <a name="line.88"><span class="line-number even">88:</span> </a> * &lt;ul&gt;
  <a name="line.89"><span class="line-number even">89:</span> </a> * &lt;li&gt;&lt;code&gt;text/plain&lt;/code&gt;: Plain text, handled by
  <a name="line.90"><span class="line-number odd">90: </span></a> *   {@<span class="javadoc tag">link</span> javax.swing.text.DefaultEditorKit}.&lt;/li&gt;
  <a name="line.91"><span class="line-number even">91:</span> </a> * &lt;li&gt;&lt;code&gt;text/html&lt;/code&gt;: HTML 4.0 styled text, handled by
  <a name="line.92"><span class="line-number even">92:</span> </a> *   {@<span class="javadoc tag">link</span> javax.swing.text.html.HTMLEditorKit}.&lt;/li&gt;
  <a name="line.93"><span class="line-number even">93:</span> </a> * &lt;li&gt;&lt;code&gt;text/rtf&lt;/code&gt;: RTF text, handled by
  <a name="line.94"><span class="line-number even">94:</span> </a> *   {@<span class="javadoc tag">link</span> javax.swing.text.rtf.RTFEditorKit}.&lt;/li&gt;
  <a name="line.95"><span class="line-number odd">95: </span></a> * &lt;/ul&gt;
  <a name="line.96"><span class="line-number even">96:</span> </a> *
  <a name="line.97"><span class="line-number even">97:</span> </a> * @<span class="javadoc tag">author</span> original author unknown
  <a name="line.98"><span class="line-number even">98:</span> </a> * @<span class="javadoc tag">author</span> Roman Kennke (roman@kennke.org)
  <a name="line.99"><span class="line-number even">99:</span> </a> * @<span class="javadoc tag">author</span> Anthony Balkissoon abalkiss at redhat dot com
 <a name="line.100"><span class="line-number odd">100: </span></a> */</span>
 <a name="line.101"><span class="line-number even">101:</span> </a><span class="keyword">public</span> <span class="keyword">class</span> <span class="non-primitive type">JEditorPane</span> <span class="keyword">extends</span> <span class="non-primitive type">JTextComponent</span>
 <a name="line.102"><span class="line-number even">102:</span> </a>{
 <a name="line.103"><span class="line-number even">103:</span> </a>  <span class="javadoc comment">/**
 <a name="line.104"><span class="line-number even">104:</span> </a>   * Provides accessibility support for &lt;code&gt;JEditorPane&lt;/code&gt;.
 <a name="line.105"><span class="line-number odd">105: </span></a>   *
 <a name="line.106"><span class="line-number even">106:</span> </a>   * @<span class="javadoc tag">author</span> Roman Kennke (kennke@aicas.com)
 <a name="line.107"><span class="line-number even">107:</span> </a>   */</span>
 <a name="line.108"><span class="line-number even">108:</span> </a>  <span class="keyword">protected</span> <span class="keyword">class</span> <span class="non-primitive type">AccessibleJEditorPane</span> <span class="keyword">extends</span> <span class="non-primitive type">AccessibleJTextComponent</span>
 <a name="line.109"><span class="line-number even">109:</span> </a>  {
 <a name="line.110"><span class="line-number odd">110: </span></a>
 <a name="line.111"><span class="line-number even">111:</span> </a>    <span class="javadoc comment">/**
 <a name="line.112"><span class="line-number even">112:</span> </a>     * Creates a new &lt;code&gt;AccessibleJEditorPane&lt;/code&gt; object.
 <a name="line.113"><span class="line-number even">113:</span> </a>     */</span>
 <a name="line.114"><span class="line-number even">114:</span> </a>    <span class="keyword">protected</span> <span class="constructor member">AccessibleJEditorPane</span>()
 <a name="line.115"><span class="line-number odd">115: </span></a>    {
 <a name="line.116"><span class="line-number even">116:</span> </a>      <span class="keyword">super</span>();
 <a name="line.117"><span class="line-number even">117:</span> </a>    }
 <a name="line.118"><span class="line-number even">118:</span> </a>
 <a name="line.119"><span class="line-number even">119:</span> </a>    <span class="javadoc comment">/**
 <a name="line.120"><span class="line-number odd">120: </span></a>     * Returns a description of this &lt;code&gt;AccessibleJEditorPane&lt;/code&gt;. If
 <a name="line.121"><span class="line-number even">121:</span> </a>     * this property is not set, then this returns the content-type of the
 <a name="line.122"><span class="line-number even">122:</span> </a>     * editor pane.
 <a name="line.123"><span class="line-number even">123:</span> </a>     *
 <a name="line.124"><span class="line-number even">124:</span> </a>     * @<span class="javadoc tag">return</span> a description of this AccessibleJEditorPane
 <a name="line.125"><span class="line-number odd">125: </span></a>     */</span>
 <a name="line.126"><span class="line-number even">126:</span> </a>    <span class="keyword">public</span> <span class="non-primitive type">String</span> <span class="method member">getAccessibleDescription</span>()
 <a name="line.127"><span class="line-number even">127:</span> </a>    {
 <a name="line.128"><span class="line-number even">128:</span> </a>      <span class="non-primitive type">String</span> <span class="variable member">descr</span> = <span class="method member">super.getAccessibleDescription</span>();
 <a name="line.129"><span class="line-number even">129:</span> </a>      <span class="keyword">if</span> (<span class="variable member">descr</span> == <span class="primitive literal">null</span>)
 <a name="line.130"><span class="line-number odd">130: </span></a>        <span class="keyword">return</span> <span class="method member">getContentType</span>();
 <a name="line.131"><span class="line-number even">131:</span> </a>      <span class="keyword">else</span>
 <a name="line.132"><span class="line-number even">132:</span> </a>        <span class="keyword">return</span> <span class="variable member">descr</span>;
 <a name="line.133"><span class="line-number even">133:</span> </a>    }
 <a name="line.134"><span class="line-number even">134:</span> </a>
 <a name="line.135"><span class="line-number odd">135: </span></a>    <span class="javadoc comment">/**
 <a name="line.136"><span class="line-number even">136:</span> </a>     * Returns the accessible state of this &lt;code&gt;AccessibleJEditorPane&lt;/code&gt;.
 <a name="line.137"><span class="line-number even">137:</span> </a>     *
 <a name="line.138"><span class="line-number even">138:</span> </a>     * @<span class="javadoc tag">return</span>  the accessible state of this &lt;code&gt;AccessibleJEditorPane&lt;/code&gt;
 <a name="line.139"><span class="line-number even">139:</span> </a>     */</span>
 <a name="line.140"><span class="line-number odd">140: </span></a>    <span class="keyword">public</span> <span class="non-primitive type">AccessibleStateSet</span> <span class="method member">getAccessibleStateSet</span>()
 <a name="line.141"><span class="line-number even">141:</span> </a>    {
 <a name="line.142"><span class="line-number even">142:</span> </a>      <span class="non-primitive type">AccessibleStateSet</span> <span class="variable member">state</span> = <span class="method member">super.getAccessibleStateSet</span>();
 <a name="line.143"><span class="line-number even">143:</span> </a>      <span class="line comment">// TODO: Figure out what state must be added here to the super's state.</span>
 <a name="line.144"><span class="line-number even">144:</span> </a>      <span class="keyword">return</span> <span class="variable member">state</span>;
 <a name="line.145"><span class="line-number odd">145: </span></a>    }
 <a name="line.146"><span class="line-number even">146:</span> </a>  }
 <a name="line.147"><span class="line-number even">147:</span> </a>
 <a name="line.148"><span class="line-number even">148:</span> </a>  <span class="javadoc comment">/**
 <a name="line.149"><span class="line-number even">149:</span> </a>   * Provides accessibility support for &lt;code&gt;JEditorPane&lt;/code&gt;s, when the
 <a name="line.150"><span class="line-number odd">150: </span></a>   * editor kit is an instance of {@<span class="javadoc tag">link</span> HTMLEditorKit}.
 <a name="line.151"><span class="line-number even">151:</span> </a>   *
 <a name="line.152"><span class="line-number even">152:</span> </a>   * @<span class="javadoc tag">author</span> Roman Kennke (kennke@aicas.com)
 <a name="line.153"><span class="line-number even">153:</span> </a>   */</span>
 <a name="line.154"><span class="line-number even">154:</span> </a>  <span class="keyword">protected</span> <span class="keyword">class</span> <span class="non-primitive type">AccessibleJEditorPaneHTML</span> <span class="keyword">extends</span> <span class="non-primitive type">AccessibleJEditorPane</span>
 <a name="line.155"><span class="line-number odd">155: </span></a>  {
 <a name="line.156"><span class="line-number even">156:</span> </a>    <span class="javadoc comment">/**
 <a name="line.157"><span class="line-number even">157:</span> </a>     * Returns the accessible text of the &lt;code&gt;JEditorPane&lt;/code&gt;. This will
 <a name="line.158"><span class="line-number even">158:</span> </a>     * be an instance of
 <a name="line.159"><span class="line-number even">159:</span> </a>     * {@<span class="javadoc tag">link</span> JEditorPaneAccessibleHypertextSupport}.
 <a name="line.160"><span class="line-number odd">160: </span></a>     *
 <a name="line.161"><span class="line-number even">161:</span> </a>     * @<span class="javadoc tag">return</span> the accessible text of the &lt;code&gt;JEditorPane&lt;/code&gt;
 <a name="line.162"><span class="line-number even">162:</span> </a>     */</span>
 <a name="line.163"><span class="line-number even">163:</span> </a>    <span class="keyword">public</span> <span class="non-primitive type">AccessibleText</span> <span class="method member">getAccessibleText</span>()
 <a name="line.164"><span class="line-number even">164:</span> </a>    {
 <a name="line.165"><span class="line-number odd">165: </span></a>      <span class="keyword">return</span> <span class="keyword">new</span> <span class="constructor member">JEditorPaneAccessibleHypertextSupport</span>();
 <a name="line.166"><span class="line-number even">166:</span> </a>    }
 <a name="line.167"><span class="line-number even">167:</span> </a>  }
 <a name="line.168"><span class="line-number even">168:</span> </a>
 <a name="line.169"><span class="line-number even">169:</span> </a>  <span class="javadoc comment">/**
 <a name="line.170"><span class="line-number odd">170: </span></a>   * This is the accessible text that is returned by
 <a name="line.171"><span class="line-number even">171:</span> </a>   * {@<span class="javadoc tag">link</span> AccessibleJEditorPaneHTML#getAccessibleText()}.
 <a name="line.172"><span class="line-number even">172:</span> </a>   *
 <a name="line.173"><span class="line-number even">173:</span> </a>   * @<span class="javadoc tag">author</span> Roman Kennke (kennke@aicas.com)
 <a name="line.174"><span class="line-number even">174:</span> </a>   */</span>
 <a name="line.175"><span class="line-number odd">175: </span></a>  <span class="keyword">protected</span> <span class="keyword">class</span> <span class="non-primitive type">JEditorPaneAccessibleHypertextSupport</span>
 <a name="line.176"><span class="line-number even">176:</span> </a>    <span class="keyword">extends</span> <span class="non-primitive type">AccessibleJEditorPane</span> <span class="keyword">implements</span> <span class="non-primitive type">AccessibleHypertext</span>
 <a name="line.177"><span class="line-number even">177:</span> </a>  {
 <a name="line.178"><span class="line-number even">178:</span> </a>
 <a name="line.179"><span class="line-number even">179:</span> </a>    <span class="javadoc comment">/**
 <a name="line.180"><span class="line-number odd">180: </span></a>     * Creates a new JEditorPaneAccessibleHypertextSupport object.
 <a name="line.181"><span class="line-number even">181:</span> </a>     */</span>
 <a name="line.182"><span class="line-number even">182:</span> </a>    <span class="keyword">public</span> <span class="constructor member">JEditorPaneAccessibleHypertextSupport</span>()
 <a name="line.183"><span class="line-number even">183:</span> </a>    {
 <a name="line.184"><span class="line-number even">184:</span> </a>      <span class="keyword">super</span>();
 <a name="line.185"><span class="line-number odd">185: </span></a>    }
 <a name="line.186"><span class="line-number even">186:</span> </a>
 <a name="line.187"><span class="line-number even">187:</span> </a>    <span class="javadoc comment">/**
 <a name="line.188"><span class="line-number even">188:</span> </a>     * The accessible representation of a HTML link.
 <a name="line.189"><span class="line-number even">189:</span> </a>     *
 <a name="line.190"><span class="line-number odd">190: </span></a>     * @<span class="javadoc tag">author</span> Roman Kennke (kennke@aicas.com)
 <a name="line.191"><span class="line-number even">191:</span> </a>     */</span>
 <a name="line.192"><span class="line-number even">192:</span> </a>    <span class="keyword">public</span> <span class="keyword">class</span> <span class="non-primitive type">HTMLLink</span> <span class="keyword">extends</span> <span class="non-primitive type">AccessibleHyperlink</span>
 <a name="line.193"><span class="line-number even">193:</span> </a>    {
 <a name="line.194"><span class="line-number even">194:</span> </a>
 <a name="line.195"><span class="line-number odd">195: </span></a>      <span class="javadoc comment">/**
 <a name="line.196"><span class="line-number even">196:</span> </a>       * The element in the document that represents the link.
 <a name="line.197"><span class="line-number even">197:</span> </a>       */</span>
 <a name="line.198"><span class="line-number even">198:</span> </a>      <span class="non-primitive type">Element</span> <span class="variable member">element</span>;
 <a name="line.199"><span class="line-number even">199:</span> </a>
 <a name="line.200"><span class="line-number odd">200: </span></a>      <span class="javadoc comment">/**
 <a name="line.201"><span class="line-number even">201:</span> </a>       * Creates a new &lt;code&gt;HTMLLink&lt;/code&gt;.
 <a name="line.202"><span class="line-number even">202:</span> </a>       *
 <a name="line.203"><span class="line-number even">203:</span> </a>       * @<span class="javadoc tag">param</span> <span class="variable member">el</span> the link element
 <a name="line.204"><span class="line-number even">204:</span> </a>       */</span>
 <a name="line.205"><span class="line-number odd">205: </span></a>      <span class="keyword">public</span> <span class="constructor member">HTMLLink</span>(<span class="non-primitive type">Element</span> <span class="variable member">el</span>)
 <a name="line.206"><span class="line-number even">206:</span> </a>      {
 <a name="line.207"><span class="line-number even">207:</span> </a>        <span class="variable member">this.element</span> = <span class="variable member">el</span>;
 <a name="line.208"><span class="line-number even">208:</span> </a>      }
 <a name="line.209"><span class="line-number even">209:</span> </a>
 <a name="line.210"><span class="line-number odd">210: </span></a>      <span class="javadoc comment">/**
 <a name="line.211"><span class="line-number even">211:</span> </a>       * Returns &lt;code&gt;true&lt;/code&gt; if this &lt;code&gt;HTMLLink&lt;/code&gt; is still
 <a name="line.212"><span class="line-number even">212:</span> </a>       * valid. A &lt;code&gt;HTMLLink&lt;/code&gt; can become invalid when the document
 <a name="line.213"><span class="line-number even">213:</span> </a>       * changes.
 <a name="line.214"><span class="line-number even">214:</span> </a>       *
 <a name="line.215"><span class="line-number odd">215: </span></a>       * @<span class="javadoc tag">return</span> &lt;code&gt;true&lt;/code&gt; if this &lt;code&gt;HTMLLink&lt;/code&gt; is still
 <a name="line.216"><span class="line-number even">216:</span> </a>       *         valid
 <a name="line.217"><span class="line-number even">217:</span> </a>       */</span>
 <a name="line.218"><span class="line-number even">218:</span> </a>      <span class="keyword">public</span> <span class="primitive type">boolean</span> <span class="method member">isValid</span>()
 <a name="line.219"><span class="line-number even">219:</span> </a>      {
 <a name="line.220"><span class="line-number odd">220: </span></a>        <span class="line comment">// I test here if the element at our element's start offset is the</span>
 <a name="line.221"><span class="line-number even">221:</span> </a>        <span class="line comment">// same as the element in the document at this offset. If this is true,</span>
 <a name="line.222"><span class="line-number even">222:</span> </a>        <span class="line comment">// I consider the link valid, if not, then this link no longer</span>
 <a name="line.223"><span class="line-number even">223:</span> </a>        <span class="line comment">// represented by this HTMLLink and therefor invalid.</span>
 <a name="line.224"><span class="line-number even">224:</span> </a>        <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.225"><span class="line-number odd">225: </span></a>        <span class="keyword">return</span> <span class="method member">doc.getCharacterElement</span>(<span class="method member">element.getStartOffset</span>()) == <span class="variable member">element</span>;
 <a name="line.226"><span class="line-number even">226:</span> </a>      }
 <a name="line.227"><span class="line-number even">227:</span> </a>
 <a name="line.228"><span class="line-number even">228:</span> </a>      <span class="javadoc comment">/**
 <a name="line.229"><span class="line-number even">229:</span> </a>       * Returns the number of AccessibleActions in this link object. In
 <a name="line.230"><span class="line-number odd">230: </span></a>       * general, link have 1 AccessibleAction associated with them. There are
 <a name="line.231"><span class="line-number even">231:</span> </a>       * special cases where links can have multiple actions associated, like
 <a name="line.232"><span class="line-number even">232:</span> </a>       * in image maps.
 <a name="line.233"><span class="line-number even">233:</span> </a>       *
 <a name="line.234"><span class="line-number even">234:</span> </a>       * @<span class="javadoc tag">return</span> the number of AccessibleActions in this link object
 <a name="line.235"><span class="line-number odd">235: </span></a>       */</span>
 <a name="line.236"><span class="line-number even">236:</span> </a>      <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">getAccessibleActionCount</span>()
 <a name="line.237"><span class="line-number even">237:</span> </a>      {
 <a name="line.238"><span class="line-number even">238:</span> </a>        <span class="line comment">// TODO: Implement the special cases.</span>
 <a name="line.239"><span class="line-number even">239:</span> </a>        <span class="keyword">return</span> <span class="numeric literal">1</span>;
 <a name="line.240"><span class="line-number odd">240: </span></a>      }
 <a name="line.241"><span class="line-number even">241:</span> </a>
 <a name="line.242"><span class="line-number even">242:</span> </a>      <span class="javadoc comment">/**
 <a name="line.243"><span class="line-number even">243:</span> </a>       * Performs the specified action on the link object. This ususally means
 <a name="line.244"><span class="line-number even">244:</span> </a>       * activating the link.
 <a name="line.245"><span class="line-number odd">245: </span></a>       *
 <a name="line.246"><span class="line-number even">246:</span> </a>       * @<span class="javadoc tag">return</span> &lt;code&gt;true&lt;/code&gt; if the action has been performed
 <a name="line.247"><span class="line-number even">247:</span> </a>       *         successfully, &lt;code&gt;false&lt;/code&gt; otherwise
 <a name="line.248"><span class="line-number even">248:</span> </a>       */</span>
 <a name="line.249"><span class="line-number even">249:</span> </a>      <span class="keyword">public</span> <span class="primitive type">boolean</span> <span class="method member">doAccessibleAction</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.250"><span class="line-number odd">250: </span></a>      {
 <a name="line.251"><span class="line-number even">251:</span> </a>        <span class="non-primitive type">String</span> <span class="variable member">href</span> = (<span class="non-primitive type">String</span>) <span class="method member">element.getAttributes</span>().<span class="method member">getAttribute</span>(<span class="double quote">&quot;href&quot;</span>);
 <a name="line.252"><span class="line-number even">252:</span> </a>        <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.253"><span class="line-number even">253:</span> </a>        <span class="keyword">try</span>
 <a name="line.254"><span class="line-number even">254:</span> </a>          {
 <a name="line.255"><span class="line-number odd">255: </span></a>            <span class="constant member">URL</span> <span class="variable member">url</span> = <span class="keyword">new</span> <span class="constant member">URL</span>(<span class="method member">doc.getBase</span>(), <span class="variable member">href</span>);
 <a name="line.256"><span class="line-number even">256:</span> </a>            <span class="method member">setPage</span>(<span class="variable member">url</span>);
 <a name="line.257"><span class="line-number even">257:</span> </a>            <span class="non-primitive type">String</span> <span class="variable member">desc</span> = <span class="method member">doc.getText</span>(<span class="method member">element.getStartOffset</span>(),
 <a name="line.258"><span class="line-number even">258:</span> </a>                            <span class="method member">element.getEndOffset</span>() - <span class="method member">element.getStartOffset</span>());
 <a name="line.259"><span class="line-number even">259:</span> </a>            <span class="non-primitive type">HyperlinkEvent</span> <span class="variable member">ev</span> =
 <a name="line.260"><span class="line-number odd">260: </span></a>              <span class="keyword">new</span> <span class="constructor member">HyperlinkEvent</span>(<span class="keyword">JEditorPane.this</span>,
 <a name="line.261"><span class="line-number even">261:</span> </a>                                 <span class="constant member">HyperlinkEvent.EventType.ACTIVATED</span>, <span class="variable member">url</span>, <span class="variable member">desc</span>,
 <a name="line.262"><span class="line-number even">262:</span> </a>                                 <span class="variable member">element</span>);
 <a name="line.263"><span class="line-number even">263:</span> </a>            <span class="method member">fireHyperlinkUpdate</span>(<span class="variable member">ev</span>);
 <a name="line.264"><span class="line-number even">264:</span> </a>            <span class="keyword">return</span> <span class="primitive literal">true</span>;
 <a name="line.265"><span class="line-number odd">265: </span></a>          }
 <a name="line.266"><span class="line-number even">266:</span> </a>        <span class="keyword">catch</span> (<span class="non-primitive type">Exception</span> <span class="variable member">ex</span>)
 <a name="line.267"><span class="line-number even">267:</span> </a>          {
 <a name="line.268"><span class="line-number even">268:</span> </a>            <span class="keyword">return</span> <span class="primitive literal">false</span>;
 <a name="line.269"><span class="line-number even">269:</span> </a>          }
 <a name="line.270"><span class="line-number odd">270: </span></a>      }
 <a name="line.271"><span class="line-number even">271:</span> </a>
 <a name="line.272"><span class="line-number even">272:</span> </a>      <span class="javadoc comment">/**
 <a name="line.273"><span class="line-number even">273:</span> </a>       * Returns the description of the action at action index &lt;code&gt;i&lt;/code&gt;.
 <a name="line.274"><span class="line-number even">274:</span> </a>       * This method returns the text within the element associated with this
 <a name="line.275"><span class="line-number odd">275: </span></a>       * link.
 <a name="line.276"><span class="line-number even">276:</span> </a>       *
 <a name="line.277"><span class="line-number even">277:</span> </a>       * @<span class="javadoc tag">param</span> <span class="variable member">i</span> the action index
 <a name="line.278"><span class="line-number even">278:</span> </a>       *
 <a name="line.279"><span class="line-number even">279:</span> </a>       * @<span class="javadoc tag">return</span> the description of the action at action index &lt;code&gt;i&lt;/code&gt;
 <a name="line.280"><span class="line-number odd">280: </span></a>       */</span>
 <a name="line.281"><span class="line-number even">281:</span> </a>      <span class="keyword">public</span> <span class="non-primitive type">String</span> <span class="method member">getAccessibleActionDescription</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.282"><span class="line-number even">282:</span> </a>      {
 <a name="line.283"><span class="line-number even">283:</span> </a>        <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.284"><span class="line-number even">284:</span> </a>        <span class="keyword">try</span>
 <a name="line.285"><span class="line-number odd">285: </span></a>          {
 <a name="line.286"><span class="line-number even">286:</span> </a>            <span class="keyword">return</span> <span class="method member">doc.getText</span>(<span class="method member">element.getStartOffset</span>(),
 <a name="line.287"><span class="line-number even">287:</span> </a>                            <span class="method member">element.getEndOffset</span>() - <span class="method member">element.getStartOffset</span>());
 <a name="line.288"><span class="line-number even">288:</span> </a>          }
 <a name="line.289"><span class="line-number even">289:</span> </a>        <span class="keyword">catch</span> (<span class="non-primitive type">BadLocationException</span> <span class="variable member">ex</span>)
 <a name="line.290"><span class="line-number odd">290: </span></a>          {
 <a name="line.291"><span class="line-number even">291:</span> </a>            <span class="keyword">throw</span> (<span class="non-primitive type">AssertionError</span>)
 <a name="line.292"><span class="line-number even">292:</span> </a>            <span class="keyword">new</span> <span class="constructor member">AssertionError</span>(<span class="double quote">&quot;BadLocationException must not be thrown &quot;</span>
 <a name="line.293"><span class="line-number even">293:</span> </a>                               + <span class="double quote">&quot;here.&quot;</span>)
 <a name="line.294"><span class="line-number even">294:</span> </a>              .<span class="method member">initCause</span>(<span class="variable member">ex</span>);
 <a name="line.295"><span class="line-number odd">295: </span></a>          }
 <a name="line.296"><span class="line-number even">296:</span> </a>      }
 <a name="line.297"><span class="line-number even">297:</span> </a>
 <a name="line.298"><span class="line-number even">298:</span> </a>      <span class="javadoc comment">/**
 <a name="line.299"><span class="line-number even">299:</span> </a>       * Returns an {@<span class="javadoc tag">link</span> URL} object, that represents the action at action
 <a name="line.300"><span class="line-number odd">300: </span></a>       * index &lt;code&gt;i&lt;/code&gt;.
 <a name="line.301"><span class="line-number even">301:</span> </a>       *
 <a name="line.302"><span class="line-number even">302:</span> </a>       * @<span class="javadoc tag">param</span> <span class="variable member">i</span> the action index
 <a name="line.303"><span class="line-number even">303:</span> </a>       *
 <a name="line.304"><span class="line-number even">304:</span> </a>       * @<span class="javadoc tag">return</span> an {@<span class="javadoc tag">link</span> URL} object, that represents the action at action
 <a name="line.305"><span class="line-number odd">305: </span></a>       *         index &lt;code&gt;i&lt;/code&gt;
 <a name="line.306"><span class="line-number even">306:</span> </a>       */</span>
 <a name="line.307"><span class="line-number even">307:</span> </a>      <span class="keyword">public</span> <span class="non-primitive type">Object</span> <span class="method member">getAccessibleActionObject</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.308"><span class="line-number even">308:</span> </a>      {
 <a name="line.309"><span class="line-number even">309:</span> </a>        <span class="non-primitive type">String</span> <span class="variable member">href</span> = (<span class="non-primitive type">String</span>) <span class="method member">element.getAttributes</span>().<span class="method member">getAttribute</span>(<span class="double quote">&quot;href&quot;</span>);
 <a name="line.310"><span class="line-number odd">310: </span></a>        <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.311"><span class="line-number even">311:</span> </a>        <span class="keyword">try</span>
 <a name="line.312"><span class="line-number even">312:</span> </a>          {
 <a name="line.313"><span class="line-number even">313:</span> </a>            <span class="constant member">URL</span> <span class="variable member">url</span> = <span class="keyword">new</span> <span class="constant member">URL</span>(<span class="method member">doc.getBase</span>(), <span class="variable member">href</span>);
 <a name="line.314"><span class="line-number even">314:</span> </a>            <span class="keyword">return</span> <span class="variable member">url</span>;
 <a name="line.315"><span class="line-number odd">315: </span></a>          }
 <a name="line.316"><span class="line-number even">316:</span> </a>        <span class="keyword">catch</span> (<span class="non-primitive type">MalformedURLException</span> <span class="variable member">ex</span>)
 <a name="line.317"><span class="line-number even">317:</span> </a>          {
 <a name="line.318"><span class="line-number even">318:</span> </a>            <span class="keyword">return</span> <span class="primitive literal">null</span>;
 <a name="line.319"><span class="line-number even">319:</span> </a>          }
 <a name="line.320"><span class="line-number odd">320: </span></a>      }
 <a name="line.321"><span class="line-number even">321:</span> </a>
 <a name="line.322"><span class="line-number even">322:</span> </a>      <span class="javadoc comment">/**
 <a name="line.323"><span class="line-number even">323:</span> </a>       * Returns an object that represents the link anchor. For examples, if
 <a name="line.324"><span class="line-number even">324:</span> </a>       * the link encloses a string, then a &lt;code&gt;String&lt;/code&gt; object is
 <a name="line.325"><span class="line-number odd">325: </span></a>       * returned, if the link encloses an &amp;lt;img&amp;gt; tag, then an
 <a name="line.326"><span class="line-number even">326:</span> </a>       * &lt;code&gt;ImageIcon&lt;/code&gt; object is returned.
 <a name="line.327"><span class="line-number even">327:</span> </a>       *
 <a name="line.328"><span class="line-number even">328:</span> </a>       * @<span class="javadoc tag">return</span> an object that represents the link anchor
 <a name="line.329"><span class="line-number even">329:</span> </a>       */</span>
 <a name="line.330"><span class="line-number odd">330: </span></a>      <span class="keyword">public</span> <span class="non-primitive type">Object</span> <span class="method member">getAccessibleActionAnchor</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.331"><span class="line-number even">331:</span> </a>      {
 <a name="line.332"><span class="line-number even">332:</span> </a>        <span class="line comment">// TODO: This is only the String case. Implement all cases.</span>
 <a name="line.333"><span class="line-number even">333:</span> </a>        <span class="keyword">return</span> <span class="method member">getAccessibleActionDescription</span>(<span class="variable member">i</span>);
 <a name="line.334"><span class="line-number even">334:</span> </a>      }
 <a name="line.335"><span class="line-number odd">335: </span></a>
 <a name="line.336"><span class="line-number even">336:</span> </a>      <span class="javadoc comment">/**
 <a name="line.337"><span class="line-number even">337:</span> </a>       * Returns the start index of the hyperlink element.
 <a name="line.338"><span class="line-number even">338:</span> </a>       *
 <a name="line.339"><span class="line-number even">339:</span> </a>       * @<span class="javadoc tag">return</span> the start index of the hyperlink element
 <a name="line.340"><span class="line-number odd">340: </span></a>       */</span>
 <a name="line.341"><span class="line-number even">341:</span> </a>      <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">getStartIndex</span>()
 <a name="line.342"><span class="line-number even">342:</span> </a>      {
 <a name="line.343"><span class="line-number even">343:</span> </a>        <span class="keyword">return</span> <span class="method member">element.getStartOffset</span>();
 <a name="line.344"><span class="line-number even">344:</span> </a>      }
 <a name="line.345"><span class="line-number odd">345: </span></a>
 <a name="line.346"><span class="line-number even">346:</span> </a>      <span class="javadoc comment">/**
 <a name="line.347"><span class="line-number even">347:</span> </a>       * Returns the end index of the hyperlink element.
 <a name="line.348"><span class="line-number even">348:</span> </a>       *
 <a name="line.349"><span class="line-number even">349:</span> </a>       * @<span class="javadoc tag">return</span> the end index of the hyperlink element
 <a name="line.350"><span class="line-number odd">350: </span></a>       */</span>
 <a name="line.351"><span class="line-number even">351:</span> </a>      <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">getEndIndex</span>()
 <a name="line.352"><span class="line-number even">352:</span> </a>      {
 <a name="line.353"><span class="line-number even">353:</span> </a>        <span class="keyword">return</span> <span class="method member">element.getEndOffset</span>();
 <a name="line.354"><span class="line-number even">354:</span> </a>      }
 <a name="line.355"><span class="line-number odd">355: </span></a>
 <a name="line.356"><span class="line-number even">356:</span> </a>    }
 <a name="line.357"><span class="line-number even">357:</span> </a>
 <a name="line.358"><span class="line-number even">358:</span> </a>    <span class="javadoc comment">/**
 <a name="line.359"><span class="line-number even">359:</span> </a>     * Returns the number of hyperlinks in the document.
 <a name="line.360"><span class="line-number odd">360: </span></a>     *
 <a name="line.361"><span class="line-number even">361:</span> </a>     * @<span class="javadoc tag">return</span> the number of hyperlinks in the document
 <a name="line.362"><span class="line-number even">362:</span> </a>     */</span>
 <a name="line.363"><span class="line-number even">363:</span> </a>    <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">getLinkCount</span>()
 <a name="line.364"><span class="line-number even">364:</span> </a>    {
 <a name="line.365"><span class="line-number odd">365: </span></a>      <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.366"><span class="line-number even">366:</span> </a>      <span class="non-primitive type">HTMLDocument.Iterator</span> <span class="variable member">linkIter</span> = <span class="method member">doc.getIterator</span>(<span class="constant member">HTML.Tag.A</span>);
 <a name="line.367"><span class="line-number even">367:</span> </a>      <span class="primitive type">int</span> <span class="variable member">count</span> = <span class="numeric literal">0</span>;
 <a name="line.368"><span class="line-number even">368:</span> </a>      <span class="keyword">while</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.369"><span class="line-number even">369:</span> </a>        {
 <a name="line.370"><span class="line-number odd">370: </span></a>          <span class="variable member">count</span>++;
 <a name="line.371"><span class="line-number even">371:</span> </a>          <span class="method member">linkIter.next</span>();
 <a name="line.372"><span class="line-number even">372:</span> </a>        }
 <a name="line.373"><span class="line-number even">373:</span> </a>      <span class="keyword">return</span> <span class="variable member">count</span>;
 <a name="line.374"><span class="line-number even">374:</span> </a>    }
 <a name="line.375"><span class="line-number odd">375: </span></a>
 <a name="line.376"><span class="line-number even">376:</span> </a>    <span class="javadoc comment">/**
 <a name="line.377"><span class="line-number even">377:</span> </a>     * Returns the &lt;code&gt;i&lt;/code&gt;-th hyperlink in the document or
 <a name="line.378"><span class="line-number even">378:</span> </a>     * &lt;code&gt;null&lt;/code&gt; if there is no hyperlink with the specified index.
 <a name="line.379"><span class="line-number even">379:</span> </a>     *
 <a name="line.380"><span class="line-number odd">380: </span></a>     * @<span class="javadoc tag">param</span> <span class="variable member">i</span> the index of the hyperlink to return
 <a name="line.381"><span class="line-number even">381:</span> </a>     *
 <a name="line.382"><span class="line-number even">382:</span> </a>     * @<span class="javadoc tag">return</span> the &lt;code&gt;i&lt;/code&gt;-th hyperlink in the document or
 <a name="line.383"><span class="line-number even">383:</span> </a>     *         &lt;code&gt;null&lt;/code&gt; if there is no hyperlink with the specified
 <a name="line.384"><span class="line-number even">384:</span> </a>     *         index
 <a name="line.385"><span class="line-number odd">385: </span></a>     */</span>
 <a name="line.386"><span class="line-number even">386:</span> </a>    <span class="keyword">public</span> <span class="non-primitive type">AccessibleHyperlink</span> <span class="method member">getLink</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.387"><span class="line-number even">387:</span> </a>    {
 <a name="line.388"><span class="line-number even">388:</span> </a>      <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.389"><span class="line-number even">389:</span> </a>      <span class="non-primitive type">HTMLDocument.Iterator</span> <span class="variable member">linkIter</span> = <span class="method member">doc.getIterator</span>(<span class="constant member">HTML.Tag.A</span>);
 <a name="line.390"><span class="line-number odd">390: </span></a>      <span class="primitive type">int</span> <span class="variable member">count</span> = <span class="numeric literal">0</span>;
 <a name="line.391"><span class="line-number even">391:</span> </a>      <span class="keyword">while</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.392"><span class="line-number even">392:</span> </a>        {
 <a name="line.393"><span class="line-number even">393:</span> </a>          <span class="variable member">count</span>++;
 <a name="line.394"><span class="line-number even">394:</span> </a>          <span class="keyword">if</span> (<span class="variable member">count</span> == <span class="variable member">i</span>)
 <a name="line.395"><span class="line-number odd">395: </span></a>            <span class="keyword">break</span>;
 <a name="line.396"><span class="line-number even">396:</span> </a>          <span class="method member">linkIter.next</span>();
 <a name="line.397"><span class="line-number even">397:</span> </a>        }
 <a name="line.398"><span class="line-number even">398:</span> </a>      <span class="keyword">if</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.399"><span class="line-number even">399:</span> </a>        {
 <a name="line.400"><span class="line-number odd">400: </span></a>          <span class="primitive type">int</span> <span class="variable member">offset</span> = <span class="method member">linkIter.getStartOffset</span>();
 <a name="line.401"><span class="line-number even">401:</span> </a>          <span class="line comment">// TODO: I fetch the element for the link via getCharacterElement().</span>
 <a name="line.402"><span class="line-number even">402:</span> </a>          <span class="line comment">// I am not sure that this is correct, maybe we must use</span>
 <a name="line.403"><span class="line-number even">403:</span> </a>          <span class="line comment">// getParagraphElement()?</span>
 <a name="line.404"><span class="line-number even">404:</span> </a>          <span class="non-primitive type">Element</span> <span class="variable member">el</span> = <span class="method member">doc.getCharacterElement</span>(<span class="variable member">offset</span>);
 <a name="line.405"><span class="line-number odd">405: </span></a>          <span class="non-primitive type">HTMLLink</span> <span class="variable member">link</span> = <span class="keyword">new</span> <span class="constructor member">HTMLLink</span>(<span class="variable member">el</span>);
 <a name="line.406"><span class="line-number even">406:</span> </a>          <span class="keyword">return</span> <span class="variable member">link</span>;
 <a name="line.407"><span class="line-number even">407:</span> </a>        }
 <a name="line.408"><span class="line-number even">408:</span> </a>      <span class="keyword">else</span>
 <a name="line.409"><span class="line-number even">409:</span> </a>        <span class="keyword">return</span> <span class="primitive literal">null</span>;
 <a name="line.410"><span class="line-number odd">410: </span></a>    }
 <a name="line.411"><span class="line-number even">411:</span> </a>
 <a name="line.412"><span class="line-number even">412:</span> </a>    <span class="javadoc comment">/**
 <a name="line.413"><span class="line-number even">413:</span> </a>     * Returns the index of the link element at the character position
 <a name="line.414"><span class="line-number even">414:</span> </a>     * &lt;code&gt;c&lt;/code&gt; within the document, or &lt;code&gt;-1&lt;/code&gt; if there is no
 <a name="line.415"><span class="line-number odd">415: </span></a>     * link at the specified position.
 <a name="line.416"><span class="line-number even">416:</span> </a>     *
 <a name="line.417"><span class="line-number even">417:</span> </a>     * @<span class="javadoc tag">param</span> <span class="variable member">c</span> the character index from which to fetch the link index
 <a name="line.418"><span class="line-number even">418:</span> </a>     *
 <a name="line.419"><span class="line-number even">419:</span> </a>     * @<span class="javadoc tag">return</span> the index of the link element at the character position
 <a name="line.420"><span class="line-number odd">420: </span></a>     *         &lt;code&gt;c&lt;/code&gt; within the document, or &lt;code&gt;-1&lt;/code&gt; if there
 <a name="line.421"><span class="line-number even">421:</span> </a>     *         is no link at the specified position
 <a name="line.422"><span class="line-number even">422:</span> </a>     */</span>
 <a name="line.423"><span class="line-number even">423:</span> </a>    <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">getLinkIndex</span>(<span class="primitive type">int</span> <span class="variable member">c</span>)
 <a name="line.424"><span class="line-number even">424:</span> </a>    {
 <a name="line.425"><span class="line-number odd">425: </span></a>      <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.426"><span class="line-number even">426:</span> </a>      <span class="non-primitive type">HTMLDocument.Iterator</span> <span class="variable member">linkIter</span> = <span class="method member">doc.getIterator</span>(<span class="constant member">HTML.Tag.A</span>);
 <a name="line.427"><span class="line-number even">427:</span> </a>      <span class="primitive type">int</span> <span class="variable member">count</span> = <span class="numeric literal">0</span>;
 <a name="line.428"><span class="line-number even">428:</span> </a>      <span class="keyword">while</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.429"><span class="line-number even">429:</span> </a>        {
 <a name="line.430"><span class="line-number odd">430: </span></a>          <span class="keyword">if</span> (<span class="method member">linkIter.getStartOffset</span>() &lt;= <span class="variable member">c</span> &amp;&amp; <span class="method member">linkIter.getEndOffset</span>() &gt; <span class="variable member">c</span>)
 <a name="line.431"><span class="line-number even">431:</span> </a>            <span class="keyword">break</span>;
 <a name="line.432"><span class="line-number even">432:</span> </a>          <span class="variable member">count</span>++;
 <a name="line.433"><span class="line-number even">433:</span> </a>          <span class="method member">linkIter.next</span>();
 <a name="line.434"><span class="line-number even">434:</span> </a>        }
 <a name="line.435"><span class="line-number odd">435: </span></a>      <span class="keyword">if</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.436"><span class="line-number even">436:</span> </a>        <span class="keyword">return</span> <span class="variable member">count</span>;
 <a name="line.437"><span class="line-number even">437:</span> </a>      <span class="keyword">else</span>
 <a name="line.438"><span class="line-number even">438:</span> </a>        <span class="keyword">return</span> -<span class="numeric literal">1</span>;
 <a name="line.439"><span class="line-number even">439:</span> </a>    }
 <a name="line.440"><span class="line-number odd">440: </span></a>
 <a name="line.441"><span class="line-number even">441:</span> </a>    <span class="javadoc comment">/**
 <a name="line.442"><span class="line-number even">442:</span> </a>     * Returns the link text of the link at index &lt;code&gt;i&lt;/code&gt;, or
 <a name="line.443"><span class="line-number even">443:</span> </a>     * &lt;code&gt;null&lt;/code&gt;, if there is no link at the specified position.
 <a name="line.444"><span class="line-number even">444:</span> </a>     *
 <a name="line.445"><span class="line-number odd">445: </span></a>     * @<span class="javadoc tag">param</span> <span class="variable member">i</span> the index of the link
 <a name="line.446"><span class="line-number even">446:</span> </a>     *
 <a name="line.447"><span class="line-number even">447:</span> </a>     * @<span class="javadoc tag">return</span>  the link text of the link at index &lt;code&gt;i&lt;/code&gt;, or
 <a name="line.448"><span class="line-number even">448:</span> </a>     *          &lt;code&gt;null&lt;/code&gt;, if there is no link at the specified
 <a name="line.449"><span class="line-number even">449:</span> </a>     *          position
 <a name="line.450"><span class="line-number odd">450: </span></a>     */</span>
 <a name="line.451"><span class="line-number even">451:</span> </a>    <span class="keyword">public</span> <span class="non-primitive type">String</span> <span class="method member">getLinkText</span>(<span class="primitive type">int</span> <span class="variable member">i</span>)
 <a name="line.452"><span class="line-number even">452:</span> </a>    {
 <a name="line.453"><span class="line-number even">453:</span> </a>      <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="method member">getDocument</span>();
 <a name="line.454"><span class="line-number even">454:</span> </a>      <span class="non-primitive type">HTMLDocument.Iterator</span> <span class="variable member">linkIter</span> = <span class="method member">doc.getIterator</span>(<span class="constant member">HTML.Tag.A</span>);
 <a name="line.455"><span class="line-number odd">455: </span></a>      <span class="primitive type">int</span> <span class="variable member">count</span> = <span class="numeric literal">0</span>;
 <a name="line.456"><span class="line-number even">456:</span> </a>      <span class="keyword">while</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.457"><span class="line-number even">457:</span> </a>        {
 <a name="line.458"><span class="line-number even">458:</span> </a>          <span class="variable member">count</span>++;
 <a name="line.459"><span class="line-number even">459:</span> </a>          <span class="keyword">if</span> (<span class="variable member">count</span> == <span class="variable member">i</span>)
 <a name="line.460"><span class="line-number odd">460: </span></a>            <span class="keyword">break</span>;
 <a name="line.461"><span class="line-number even">461:</span> </a>          <span class="method member">linkIter.next</span>();
 <a name="line.462"><span class="line-number even">462:</span> </a>        }
 <a name="line.463"><span class="line-number even">463:</span> </a>      <span class="keyword">if</span> (<span class="method member">linkIter.isValid</span>())
 <a name="line.464"><span class="line-number even">464:</span> </a>        {
 <a name="line.465"><span class="line-number odd">465: </span></a>          <span class="primitive type">int</span> <span class="variable member">offset</span> = <span class="method member">linkIter.getStartOffset</span>();
 <a name="line.466"><span class="line-number even">466:</span> </a>          <span class="line comment">// TODO: I fetch the element for the link via getCharacterElement().</span>
 <a name="line.467"><span class="line-number even">467:</span> </a>          <span class="line comment">// I am not sure that this is correct, maybe we must use</span>
 <a name="line.468"><span class="line-number even">468:</span> </a>          <span class="line comment">// getParagraphElement()?</span>
 <a name="line.469"><span class="line-number even">469:</span> </a>          <span class="non-primitive type">Element</span> <span class="variable member">el</span> = <span class="method member">doc.getCharacterElement</span>(<span class="variable member">offset</span>);
 <a name="line.470"><span class="line-number odd">470: </span></a>          <span class="keyword">try</span>
 <a name="line.471"><span class="line-number even">471:</span> </a>            {
 <a name="line.472"><span class="line-number even">472:</span> </a>              <span class="non-primitive type">String</span> <span class="variable member">text</span> = <span class="method member">doc.getText</span>(<span class="method member">el.getStartOffset</span>(),
 <a name="line.473"><span class="line-number even">473:</span> </a>                                      <span class="method member">el.getEndOffset</span>() - <span class="method member">el.getStartOffset</span>());
 <a name="line.474"><span class="line-number even">474:</span> </a>              <span class="keyword">return</span> <span class="variable member">text</span>;
 <a name="line.475"><span class="line-number odd">475: </span></a>            }
 <a name="line.476"><span class="line-number even">476:</span> </a>          <span class="keyword">catch</span> (<span class="non-primitive type">BadLocationException</span> <span class="variable member">ex</span>)
 <a name="line.477"><span class="line-number even">477:</span> </a>            {
 <a name="line.478"><span class="line-number even">478:</span> </a>              <span class="keyword">throw</span> (<span class="non-primitive type">AssertionError</span>)
 <a name="line.479"><span class="line-number even">479:</span> </a>                <span class="keyword">new</span> <span class="constructor member">AssertionError</span>(<span class="double quote">&quot;BadLocationException must not be thrown &quot;</span>
 <a name="line.480"><span class="line-number odd">480: </span></a>                                   + <span class="double quote">&quot;here.&quot;</span>)
 <a name="line.481"><span class="line-number even">481:</span> </a>                  .<span class="method member">initCause</span>(<span class="variable member">ex</span>);
 <a name="line.482"><span class="line-number even">482:</span> </a>            }
 <a name="line.483"><span class="line-number even">483:</span> </a>        }
 <a name="line.484"><span class="line-number even">484:</span> </a>      <span class="keyword">else</span>
 <a name="line.485"><span class="line-number odd">485: </span></a>        <span class="keyword">return</span> <span class="primitive literal">null</span>;
 <a name="line.486"><span class="line-number even">486:</span> </a>    }
 <a name="line.487"><span class="line-number even">487:</span> </a>  }
 <a name="line.488"><span class="line-number even">488:</span> </a>
 <a name="line.489"><span class="line-number even">489:</span> </a>  <span class="javadoc comment">/**
 <a name="line.490"><span class="line-number odd">490: </span></a>   * Used to store a mapping for content-type to editor kit class.
 <a name="line.491"><span class="line-number even">491:</span> </a>   */</span>
 <a name="line.492"><span class="line-number even">492:</span> </a>  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="non-primitive type">EditorKitMapping</span>
 <a name="line.493"><span class="line-number even">493:</span> </a>  {
 <a name="line.494"><span class="line-number even">494:</span> </a>    <span class="javadoc comment">/**
 <a name="line.495"><span class="line-number odd">495: </span></a>     * The classname of the editor kit.
 <a name="line.496"><span class="line-number even">496:</span> </a>     */</span>
 <a name="line.497"><span class="line-number even">497:</span> </a>    <span class="non-primitive type">String</span> <span class="variable member">className</span>;
 <a name="line.498"><span class="line-number even">498:</span> </a>
 <a name="line.499"><span class="line-number even">499:</span> </a>    <span class="javadoc comment">/**
 <a name="line.500"><span class="line-number odd">500: </span></a>     * The classloader with which the kit is to be loaded.
 <a name="line.501"><span class="line-number even">501:</span> </a>     */</span>
 <a name="line.502"><span class="line-number even">502:</span> </a>    <span class="non-primitive type">ClassLoader</span> <span class="variable member">classLoader</span>;
 <a name="line.503"><span class="line-number even">503:</span> </a>
 <a name="line.504"><span class="line-number even">504:</span> </a>    <span class="javadoc comment">/**
 <a name="line.505"><span class="line-number odd">505: </span></a>     * Creates a new EditorKitMapping object.
 <a name="line.506"><span class="line-number even">506:</span> </a>     *
 <a name="line.507"><span class="line-number even">507:</span> </a>     * @<span class="javadoc tag">param</span> <span class="variable member">cn</span> the classname
 <a name="line.508"><span class="line-number even">508:</span> </a>     * @<span class="javadoc tag">param</span> <span class="variable member">cl</span> the classloader
 <a name="line.509"><span class="line-number even">509:</span> </a>     */</span>
 <a name="line.510"><span class="line-number odd">510: </span></a>    <span class="constructor member">EditorKitMapping</span>(<span class="non-primitive type">String</span> <span class="variable member">cn</span>, <span class="non-primitive type">ClassLoader</span> <span class="variable member">cl</span>)
 <a name="line.511"><span class="line-number even">511:</span> </a>    {
 <a name="line.512"><span class="line-number even">512:</span> </a>      <span class="variable member">className</span> = <span class="variable member">cn</span>;
 <a name="line.513"><span class="line-number even">513:</span> </a>      <span class="variable member">classLoader</span> = <span class="variable member">cl</span>;
 <a name="line.514"><span class="line-number even">514:</span> </a>    }
 <a name="line.515"><span class="line-number odd">515: </span></a>  }
 <a name="line.516"><span class="line-number even">516:</span> </a>
 <a name="line.517"><span class="line-number even">517:</span> </a>  <span class="javadoc comment">/**
 <a name="line.518"><span class="line-number even">518:</span> </a>   * An EditorKit used for plain text. This is the default editor kit for
 <a name="line.519"><span class="line-number even">519:</span> </a>   * JEditorPanes.
 <a name="line.520"><span class="line-number odd">520: </span></a>   *
 <a name="line.521"><span class="line-number even">521:</span> </a>   * @<span class="javadoc tag">author</span> Roman Kennke (kennke@aicas.com)
 <a name="line.522"><span class="line-number even">522:</span> </a>   */</span>
 <a name="line.523"><span class="line-number even">523:</span> </a>  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="non-primitive type">PlainEditorKit</span> <span class="keyword">extends</span> <span class="non-primitive type">DefaultEditorKit</span>
 <a name="line.524"><span class="line-number even">524:</span> </a>  {
 <a name="line.525"><span class="line-number odd">525: </span></a>
 <a name="line.526"><span class="line-number even">526:</span> </a>    <span class="javadoc comment">/**
 <a name="line.527"><span class="line-number even">527:</span> </a>     * Returns a ViewFactory that supplies WrappedPlainViews.
 <a name="line.528"><span class="line-number even">528:</span> </a>     */</span>
 <a name="line.529"><span class="line-number even">529:</span> </a>    <span class="keyword">public</span> <span class="non-primitive type">ViewFactory</span> <span class="method member">getViewFactory</span>()
 <a name="line.530"><span class="line-number odd">530: </span></a>    {
 <a name="line.531"><span class="line-number even">531:</span> </a>      <span class="keyword">return</span> <span class="keyword">new</span> <span class="constructor member">ViewFactory</span>()
 <a name="line.532"><span class="line-number even">532:</span> </a>      {
 <a name="line.533"><span class="line-number even">533:</span> </a>        <span class="keyword">public</span> <span class="non-primitive type">View</span> <span class="method member">create</span>(<span class="non-primitive type">Element</span> <span class="variable member">el</span>)
 <a name="line.534"><span class="line-number even">534:</span> </a>        {
 <a name="line.535"><span class="line-number odd">535: </span></a>          <span class="keyword">return</span> <span class="keyword">new</span> <span class="constructor member">WrappedPlainView</span>(<span class="variable member">el</span>);
 <a name="line.536"><span class="line-number even">536:</span> </a>        }
 <a name="line.537"><span class="line-number even">537:</span> </a>      };
 <a name="line.538"><span class="line-number even">538:</span> </a>    }
 <a name="line.539"><span class="line-number even">539:</span> </a>  }
 <a name="line.540"><span class="line-number odd">540: </span></a>
 <a name="line.541"><span class="line-number even">541:</span> </a>  <span class="javadoc comment">/**
 <a name="line.542"><span class="line-number even">542:</span> </a>   * A special stream that can be cancelled.
 <a name="line.543"><span class="line-number even">543:</span> </a>   */</span>
 <a name="line.544"><span class="line-number even">544:</span> </a>  <span class="keyword">private</span> <span class="keyword">class</span> <span class="non-primitive type">PageStream</span>
 <a name="line.545"><span class="line-number odd">545: </span></a>    <span class="keyword">extends</span> <span class="non-primitive type">FilterInputStream</span>
 <a name="line.546"><span class="line-number even">546:</span> </a>  {
 <a name="line.547"><span class="line-number even">547:</span> </a>    <span class="javadoc comment">/**
 <a name="line.548"><span class="line-number even">548:</span> </a>     * True when the stream has been cancelled, false otherwise.
 <a name="line.549"><span class="line-number even">549:</span> </a>     */</span>
 <a name="line.550"><span class="line-number odd">550: </span></a>    <span class="keyword">private</span> <span class="primitive type">boolean</span> <span class="variable member">cancelled</span>;
 <a name="line.551"><span class="line-number even">551:</span> </a>
 <a name="line.552"><span class="line-number even">552:</span> </a>    <span class="keyword">protected</span> <span class="constructor member">PageStream</span>(<span class="non-primitive type">InputStream</span> <span class="variable member">in</span>)
 <a name="line.553"><span class="line-number even">553:</span> </a>    {
 <a name="line.554"><span class="line-number even">554:</span> </a>      <span class="keyword">super</span>(<span class="variable member">in</span>);
 <a name="line.555"><span class="line-number odd">555: </span></a>      <span class="variable member">cancelled</span> = <span class="primitive literal">false</span>;
 <a name="line.556"><span class="line-number even">556:</span> </a>    }
 <a name="line.557"><span class="line-number even">557:</span> </a>
 <a name="line.558"><span class="line-number even">558:</span> </a>    <span class="keyword">private</span> <span class="primitive type">void</span> <span class="method member">checkCancelled</span>()
 <a name="line.559"><span class="line-number even">559:</span> </a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.560"><span class="line-number odd">560: </span></a>    {
 <a name="line.561"><span class="line-number even">561:</span> </a>      <span class="keyword">if</span> (<span class="variable member">cancelled</span>)
 <a name="line.562"><span class="line-number even">562:</span> </a>        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="constructor member">IOException</span>(<span class="double quote">&quot;Stream has been cancelled&quot;</span>);
 <a name="line.563"><span class="line-number even">563:</span> </a>    }
 <a name="line.564"><span class="line-number even">564:</span> </a>
 <a name="line.565"><span class="line-number odd">565: </span></a>    <span class="primitive type">void</span> <span class="method member">cancel</span>()
 <a name="line.566"><span class="line-number even">566:</span> </a>    {
 <a name="line.567"><span class="line-number even">567:</span> </a>      <span class="variable member">cancelled</span> = <span class="primitive literal">true</span>;
 <a name="line.568"><span class="line-number even">568:</span> </a>    }
 <a name="line.569"><span class="line-number even">569:</span> </a>
 <a name="line.570"><span class="line-number odd">570: </span></a>    <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">read</span>()
 <a name="line.571"><span class="line-number even">571:</span> </a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.572"><span class="line-number even">572:</span> </a>    {
 <a name="line.573"><span class="line-number even">573:</span> </a>      <span class="method member">checkCancelled</span>();
 <a name="line.574"><span class="line-number even">574:</span> </a>      <span class="keyword">return</span> <span class="method member">super.read</span>();
 <a name="line.575"><span class="line-number odd">575: </span></a>    }
 <a name="line.576"><span class="line-number even">576:</span> </a>
 <a name="line.577"><span class="line-number even">577:</span> </a>    <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">read</span>(<span class="primitive type">byte</span>[] <span class="variable member">b</span>, <span class="primitive type">int</span> <span class="variable member">off</span>, <span class="primitive type">int</span> <span class="variable member">len</span>)
 <a name="line.578"><span class="line-number even">578:</span> </a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.579"><span class="line-number even">579:</span> </a>    {
 <a name="line.580"><span class="line-number odd">580: </span></a>      <span class="method member">checkCancelled</span>();
 <a name="line.581"><span class="line-number even">581:</span> </a>      <span class="keyword">return</span> <span class="method member">super.read</span>(<span class="variable member">b</span>, <span class="variable member">off</span>, <span class="variable member">len</span>);
 <a name="line.582"><span class="line-number even">582:</span> </a>    }
 <a name="line.583"><span class="line-number even">583:</span> </a>
 <a name="line.584"><span class="line-number even">584:</span> </a>    <span class="keyword">public</span> <span class="primitive type">long</span> <span class="method member">skip</span>(<span class="primitive type">long</span> <span class="variable member">n</span>)
 <a name="line.585"><span class="line-number odd">585: </span></a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.586"><span class="line-number even">586:</span> </a>    {
 <a name="line.587"><span class="line-number even">587:</span> </a>      <span class="method member">checkCancelled</span>();
 <a name="line.588"><span class="line-number even">588:</span> </a>      <span class="keyword">return</span> <span class="method member">super.skip</span>(<span class="variable member">n</span>);
 <a name="line.589"><span class="line-number even">589:</span> </a>    }
 <a name="line.590"><span class="line-number odd">590: </span></a>
 <a name="line.591"><span class="line-number even">591:</span> </a>    <span class="keyword">public</span> <span class="primitive type">int</span> <span class="method member">available</span>()
 <a name="line.592"><span class="line-number even">592:</span> </a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.593"><span class="line-number even">593:</span> </a>    {
 <a name="line.594"><span class="line-number even">594:</span> </a>      <span class="method member">checkCancelled</span>();
 <a name="line.595"><span class="line-number odd">595: </span></a>      <span class="keyword">return</span> <span class="method member">super.available</span>();
 <a name="line.596"><span class="line-number even">596:</span> </a>    }
 <a name="line.597"><span class="line-number even">597:</span> </a>
 <a name="line.598"><span class="line-number even">598:</span> </a>    <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">reset</span>()
 <a name="line.599"><span class="line-number even">599:</span> </a>      <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.600"><span class="line-number odd">600: </span></a>    {
 <a name="line.601"><span class="line-number even">601:</span> </a>      <span class="method member">checkCancelled</span>();
 <a name="line.602"><span class="line-number even">602:</span> </a>      <span class="method member">super.reset</span>();
 <a name="line.603"><span class="line-number even">603:</span> </a>    }
 <a name="line.604"><span class="line-number even">604:</span> </a>  }
 <a name="line.605"><span class="line-number odd">605: </span></a>
 <a name="line.606"><span class="line-number even">606:</span> </a>  <span class="javadoc comment">/**
 <a name="line.607"><span class="line-number even">607:</span> </a>   * The thread that loads documents asynchronously.
 <a name="line.608"><span class="line-number even">608:</span> </a>   */</span>
 <a name="line.609"><span class="line-number even">609:</span> </a>  <span class="keyword">private</span> <span class="keyword">class</span> <span class="non-primitive type">PageLoader</span>
 <a name="line.610"><span class="line-number odd">610: </span></a>    <span class="keyword">implements</span> <span class="non-primitive type">Runnable</span>
 <a name="line.611"><span class="line-number even">611:</span> </a>  {
 <a name="line.612"><span class="line-number even">612:</span> </a>    <span class="keyword">private</span> <span class="non-primitive type">Document</span> <span class="variable member">doc</span>;
 <a name="line.613"><span class="line-number even">613:</span> </a>    <span class="keyword">private</span> <span class="non-primitive type">PageStream</span> <span class="variable member">in</span>;
 <a name="line.614"><span class="line-number even">614:</span> </a>    <span class="keyword">private</span> <span class="constant member">URL</span> <span class="variable member">old</span>;
 <a name="line.615"><span class="line-number odd">615: </span></a>    <span class="constant member">URL</span> <span class="variable member">page</span>;
 <a name="line.616"><span class="line-number even">616:</span> </a>    <span class="constructor member">PageLoader</span>(<span class="non-primitive type">Document</span> <span class="variable member">doc</span>, <span class="non-primitive type">InputStream</span> <span class="variable member">in</span>, <span class="constant member">URL</span> <span class="variable member">old</span>, <span class="constant member">URL</span> <span class="variable member">page</span>)
 <a name="line.617"><span class="line-number even">617:</span> </a>    {
 <a name="line.618"><span class="line-number even">618:</span> </a>      <span class="variable member">this.doc</span> = <span class="variable member">doc</span>;
 <a name="line.619"><span class="line-number even">619:</span> </a>      <span class="variable member">this.in</span> = <span class="keyword">new</span> <span class="constructor member">PageStream</span>(<span class="variable member">in</span>);
 <a name="line.620"><span class="line-number odd">620: </span></a>      <span class="variable member">this.old</span> = <span class="variable member">old</span>;
 <a name="line.621"><span class="line-number even">621:</span> </a>      <span class="variable member">this.page</span> = <span class="variable member">page</span>;
 <a name="line.622"><span class="line-number even">622:</span> </a>    }
 <a name="line.623"><span class="line-number even">623:</span> </a>
 <a name="line.624"><span class="line-number even">624:</span> </a>    <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">run</span>()
 <a name="line.625"><span class="line-number odd">625: </span></a>    {
 <a name="line.626"><span class="line-number even">626:</span> </a>      <span class="keyword">try</span>
 <a name="line.627"><span class="line-number even">627:</span> </a>        {
 <a name="line.628"><span class="line-number even">628:</span> </a>          <span class="method member">read</span>(<span class="variable member">in</span>, <span class="variable member">doc</span>);
 <a name="line.629"><span class="line-number even">629:</span> </a>        }
 <a name="line.630"><span class="line-number odd">630: </span></a>      <span class="keyword">catch</span> (<span class="non-primitive type">IOException</span> <span class="variable member">ex</span>)
 <a name="line.631"><span class="line-number even">631:</span> </a>        {
 <a name="line.632"><span class="line-number even">632:</span> </a>          <span class="method member">UIManager.getLookAndFeel</span>().<span class="method member">provideErrorFeedback</span>(<span class="keyword">JEditorPane.this</span>);
 <a name="line.633"><span class="line-number even">633:</span> </a>        }
 <a name="line.634"><span class="line-number even">634:</span> </a>      <span class="keyword">finally</span>
 <a name="line.635"><span class="line-number odd">635: </span></a>        {
 <a name="line.636"><span class="line-number even">636:</span> </a>          <span class="keyword">if</span> (<span class="method member">SwingUtilities.isEventDispatchThread</span>())
 <a name="line.637"><span class="line-number even">637:</span> </a>            <span class="method member">firePropertyChange</span>(<span class="double quote">&quot;page&quot;</span>, <span class="variable member">old</span>, <span class="variable member">page</span>);
 <a name="line.638"><span class="line-number even">638:</span> </a>          <span class="keyword">else</span>
 <a name="line.639"><span class="line-number even">639:</span> </a>            {
 <a name="line.640"><span class="line-number odd">640: </span></a>              <span class="method member">SwingUtilities.invokeLater</span>(<span class="keyword">new</span> <span class="constructor member">Runnable</span>()
 <a name="line.641"><span class="line-number even">641:</span> </a>              {
 <a name="line.642"><span class="line-number even">642:</span> </a>                <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">run</span>()
 <a name="line.643"><span class="line-number even">643:</span> </a>                {
 <a name="line.644"><span class="line-number even">644:</span> </a>                  <span class="method member">firePropertyChange</span>(<span class="double quote">&quot;page&quot;</span>, <span class="variable member">old</span>, <span class="variable member">page</span>);
 <a name="line.645"><span class="line-number odd">645: </span></a>                }
 <a name="line.646"><span class="line-number even">646:</span> </a>              });
 <a name="line.647"><span class="line-number even">647:</span> </a>            }
 <a name="line.648"><span class="line-number even">648:</span> </a>         }
 <a name="line.649"><span class="line-number even">649:</span> </a>     }
 <a name="line.650"><span class="line-number odd">650: </span></a>
 <a name="line.651"><span class="line-number even">651:</span> </a>     <span class="primitive type">void</span> <span class="method member">cancel</span>()
 <a name="line.652"><span class="line-number even">652:</span> </a>     {
 <a name="line.653"><span class="line-number even">653:</span> </a>       <span class="method member">in.cancel</span>();
 <a name="line.654"><span class="line-number even">654:</span> </a>     }
 <a name="line.655"><span class="line-number odd">655: </span></a>  }
 <a name="line.656"><span class="line-number even">656:</span> </a>
 <a name="line.657"><span class="line-number even">657:</span> </a>  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="primitive type">long</span> <span class="variable member">serialVersionUID</span> = <span class="numeric literal">3140472492599046285L</span>;
 <a name="line.658"><span class="line-number even">658:</span> </a>
 <a name="line.659"><span class="line-number even">659:</span> </a>  <span class="keyword">private</span> <span class="non-primitive type">EditorKit</span> <span class="variable member">editorKit</span>;
 <a name="line.660"><span class="line-number odd">660: </span></a>
 <a name="line.661"><span class="line-number even">661:</span> </a>  <span class="primitive type">boolean</span> <span class="variable member">focus_root</span>;
 <a name="line.662"><span class="line-number even">662:</span> </a>
 <a name="line.663"><span class="line-number even">663:</span> </a>  <span class="javadoc comment">/**
 <a name="line.664"><span class="line-number even">664:</span> </a>   * Maps content-types to editor kit instances.
 <a name="line.665"><span class="line-number odd">665: </span></a>   */</span>
 <a name="line.666"><span class="line-number even">666:</span> </a>  <span class="keyword">static</span> <span class="non-primitive type">HashMap</span> <span class="variable member">editorKits</span>;
 <a name="line.667"><span class="line-number even">667:</span> </a>
 <a name="line.668"><span class="line-number even">668:</span> </a>  <span class="line comment">// A mapping between content types and registered EditorKit types</span>
 <a name="line.669"><span class="line-number even">669:</span> </a>  <span class="keyword">static</span> <span class="non-primitive type">HashMap</span> <span class="variable member">registerMap</span>;
 <a name="line.670"><span class="line-number odd">670: </span></a>
 <a name="line.671"><span class="line-number even">671:</span> </a>  <span class="keyword">static</span>
 <a name="line.672"><span class="line-number even">672:</span> </a>  {
 <a name="line.673"><span class="line-number even">673:</span> </a>    <span class="variable member">registerMap</span> = <span class="keyword">new</span> <span class="constructor member">HashMap</span>();
 <a name="line.674"><span class="line-number even">674:</span> </a>    <span class="variable member">editorKits</span> = <span class="keyword">new</span> <span class="constructor member">HashMap</span>();
 <a name="line.675"><span class="line-number odd">675: </span></a>    <span class="method member">registerEditorKitForContentType</span>(<span class="double quote">&quot;application/rtf&quot;</span>,
 <a name="line.676"><span class="line-number even">676:</span> </a>                                    <span class="double quote">&quot;javax.swing.text.rtf.RTFEditorKit&quot;</span>);
 <a name="line.677"><span class="line-number even">677:</span> </a>    <span class="method member">registerEditorKitForContentType</span>(<span class="double quote">&quot;text/plain&quot;</span>,
 <a name="line.678"><span class="line-number even">678:</span> </a>                                    <span class="double quote">&quot;javax.swing.JEditorPane$PlainEditorKit&quot;</span>);
 <a name="line.679"><span class="line-number even">679:</span> </a>    <span class="method member">registerEditorKitForContentType</span>(<span class="double quote">&quot;text/html&quot;</span>,
 <a name="line.680"><span class="line-number odd">680: </span></a>                                    <span class="double quote">&quot;javax.swing.text.html.HTMLEditorKit&quot;</span>);
 <a name="line.681"><span class="line-number even">681:</span> </a>    <span class="method member">registerEditorKitForContentType</span>(<span class="double quote">&quot;text/rtf&quot;</span>,
 <a name="line.682"><span class="line-number even">682:</span> </a>                                    <span class="double quote">&quot;javax.swing.text.rtf.RTFEditorKit&quot;</span>);
 <a name="line.683"><span class="line-number even">683:</span> </a>
 <a name="line.684"><span class="line-number even">684:</span> </a>  }
 <a name="line.685"><span class="line-number odd">685: </span></a>
 <a name="line.686"><span class="line-number even">686:</span> </a>  <span class="line comment">// A mapping between content types and used EditorKits</span>
 <a name="line.687"><span class="line-number even">687:</span> </a>  <span class="non-primitive type">HashMap</span> <span class="variable member">editorMap</span>;
 <a name="line.688"><span class="line-number even">688:</span> </a>
 <a name="line.689"><span class="line-number even">689:</span> </a>  <span class="javadoc comment">/**
 <a name="line.690"><span class="line-number odd">690: </span></a>   * The currently loading stream, if any.
 <a name="line.691"><span class="line-number even">691:</span> </a>   */</span>
 <a name="line.692"><span class="line-number even">692:</span> </a>  <span class="keyword">private</span> <span class="non-primitive type">PageLoader</span> <span class="variable member">loader</span>;
 <a name="line.693"><span class="line-number even">693:</span> </a>
 <a name="line.694"><span class="line-number even">694:</span> </a>  <span class="keyword">public</span> <span class="constructor member">JEditorPane</span>()
 <a name="line.695"><span class="line-number odd">695: </span></a>  {
 <a name="line.696"><span class="line-number even">696:</span> </a>    <span class="method member">init</span>();
 <a name="line.697"><span class="line-number even">697:</span> </a>    <span class="method member">setEditorKit</span>(<span class="method member">createDefaultEditorKit</span>());
 <a name="line.698"><span class="line-number even">698:</span> </a>  }
 <a name="line.699"><span class="line-number even">699:</span> </a>
 <a name="line.700"><span class="line-number odd">700: </span></a>  <span class="keyword">public</span> <span class="constructor member">JEditorPane</span>(<span class="non-primitive type">String</span> <span class="variable member">url</span>) <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.701"><span class="line-number even">701:</span> </a>  {
 <a name="line.702"><span class="line-number even">702:</span> </a>    <span class="keyword">this</span>(<span class="keyword">new</span> <span class="constant member">URL</span>(<span class="variable member">url</span>));
 <a name="line.703"><span class="line-number even">703:</span> </a>  }
 <a name="line.704"><span class="line-number even">704:</span> </a>
 <a name="line.705"><span class="line-number odd">705: </span></a>  <span class="keyword">public</span> <span class="constructor member">JEditorPane</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>, <span class="non-primitive type">String</span> <span class="variable member">text</span>)
 <a name="line.706"><span class="line-number even">706:</span> </a>  {
 <a name="line.707"><span class="line-number even">707:</span> </a>    <span class="method member">init</span>();
 <a name="line.708"><span class="line-number even">708:</span> </a>    <span class="method member">setEditorKit</span>(<span class="method member">createEditorKitForContentType</span>(<span class="variable member">type</span>));
 <a name="line.709"><span class="line-number even">709:</span> </a>    <span class="method member">setText</span>(<span class="variable member">text</span>);
 <a name="line.710"><span class="line-number odd">710: </span></a>  }
 <a name="line.711"><span class="line-number even">711:</span> </a>
 <a name="line.712"><span class="line-number even">712:</span> </a>  <span class="keyword">public</span> <span class="constructor member">JEditorPane</span>(<span class="constant member">URL</span> <span class="variable member">url</span>) <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.713"><span class="line-number even">713:</span> </a>  {
 <a name="line.714"><span class="line-number even">714:</span> </a>    <span class="method member">init</span>();
 <a name="line.715"><span class="line-number odd">715: </span></a>    <span class="method member">setEditorKit</span>(<span class="method member">createEditorKitForContentType</span>(<span class="double quote">&quot;text/html&quot;</span>));
 <a name="line.716"><span class="line-number even">716:</span> </a>    <span class="method member">setPage</span>(<span class="variable member">url</span>);
 <a name="line.717"><span class="line-number even">717:</span> </a>  }
 <a name="line.718"><span class="line-number even">718:</span> </a>
 <a name="line.719"><span class="line-number even">719:</span> </a>  <span class="javadoc comment">/**
 <a name="line.720"><span class="line-number odd">720: </span></a>   * Called by the constructors to set up the default bindings for content
 <a name="line.721"><span class="line-number even">721:</span> </a>   * types and EditorKits.
 <a name="line.722"><span class="line-number even">722:</span> </a>   */</span>
 <a name="line.723"><span class="line-number even">723:</span> </a>  <span class="primitive type">void</span> <span class="method member">init</span>()
 <a name="line.724"><span class="line-number even">724:</span> </a>  {
 <a name="line.725"><span class="line-number odd">725: </span></a>    <span class="variable member">editorMap</span> = <span class="keyword">new</span> <span class="constructor member">HashMap</span>();
 <a name="line.726"><span class="line-number even">726:</span> </a>  }
 <a name="line.727"><span class="line-number even">727:</span> </a>
 <a name="line.728"><span class="line-number even">728:</span> </a>  <span class="keyword">protected</span> <span class="non-primitive type">EditorKit</span> <span class="method member">createDefaultEditorKit</span>()
 <a name="line.729"><span class="line-number even">729:</span> </a>  {
 <a name="line.730"><span class="line-number odd">730: </span></a>    <span class="keyword">return</span> <span class="keyword">new</span> <span class="constructor member">PlainEditorKit</span>();
 <a name="line.731"><span class="line-number even">731:</span> </a>  }
 <a name="line.732"><span class="line-number even">732:</span> </a>
 <a name="line.733"><span class="line-number even">733:</span> </a>  <span class="javadoc comment">/**
 <a name="line.734"><span class="line-number even">734:</span> </a>   * Creates and returns an EditorKit that is appropriate for the given
 <a name="line.735"><span class="line-number odd">735: </span></a>   * content type.  This is created using the default recognized types
 <a name="line.736"><span class="line-number even">736:</span> </a>   * plus any EditorKit types that have been registered.
 <a name="line.737"><span class="line-number even">737:</span> </a>   *
 <a name="line.738"><span class="line-number even">738:</span> </a>   * @<span class="javadoc tag">see</span> #registerEditorKitForContentType(String, String)
 <a name="line.739"><span class="line-number even">739:</span> </a>   * @<span class="javadoc tag">see</span> #registerEditorKitForContentType(String, String, ClassLoader)
 <a name="line.740"><span class="line-number odd">740: </span></a>   * @<span class="javadoc tag">param</span> <span class="variable member">type</span> the content type
 <a name="line.741"><span class="line-number even">741:</span> </a>   * @<span class="javadoc tag">return</span> an EditorKit for use with the given content type
 <a name="line.742"><span class="line-number even">742:</span> </a>   */</span>
 <a name="line.743"><span class="line-number even">743:</span> </a>  <span class="keyword">public</span> <span class="keyword">static</span> <span class="non-primitive type">EditorKit</span> <span class="method member">createEditorKitForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>)
 <a name="line.744"><span class="line-number even">744:</span> </a>  {
 <a name="line.745"><span class="line-number odd">745: </span></a>    <span class="line comment">// Try cached instance.</span>
 <a name="line.746"><span class="line-number even">746:</span> </a>    <span class="non-primitive type">EditorKit</span> <span class="variable member">e</span> = (<span class="non-primitive type">EditorKit</span>) <span class="method member">editorKits.get</span>(<span class="variable member">type</span>);
 <a name="line.747"><span class="line-number even">747:</span> </a>    <span class="keyword">if</span> (<span class="variable member">e</span> == <span class="primitive literal">null</span>)
 <a name="line.748"><span class="line-number even">748:</span> </a>      {
 <a name="line.749"><span class="line-number even">749:</span> </a>        <span class="non-primitive type">EditorKitMapping</span> <span class="variable member">m</span> = (<span class="non-primitive type">EditorKitMapping</span>) <span class="method member">registerMap.get</span>(<span class="variable member">type</span>);
 <a name="line.750"><span class="line-number odd">750: </span></a>        <span class="keyword">if</span> (<span class="variable member">m</span> != <span class="primitive literal">null</span>)
 <a name="line.751"><span class="line-number even">751:</span> </a>          {
 <a name="line.752"><span class="line-number even">752:</span> </a>            <span class="non-primitive type">String</span> <span class="variable member">className</span> = <span class="variable member">m.className</span>;
 <a name="line.753"><span class="line-number even">753:</span> </a>            <span class="non-primitive type">ClassLoader</span> <span class="variable member">loader</span> = <span class="variable member">m.classLoader</span>;
 <a name="line.754"><span class="line-number even">754:</span> </a>            <span class="keyword">try</span>
 <a name="line.755"><span class="line-number odd">755: </span></a>              {
 <a name="line.756"><span class="line-number even">756:</span> </a>                <span class="variable member">e</span> = (<span class="non-primitive type">EditorKit</span>) <span class="method member">loader.loadClass</span>(<span class="variable member">className</span>).<span class="method member">newInstance</span>();
 <a name="line.757"><span class="line-number even">757:</span> </a>              }
 <a name="line.758"><span class="line-number even">758:</span> </a>            <span class="keyword">catch</span> (<span class="non-primitive type">Exception</span> <span class="variable member">e2</span>)
 <a name="line.759"><span class="line-number even">759:</span> </a>              {
 <a name="line.760"><span class="line-number odd">760: </span></a>                <span class="line comment">// The reference implementation returns null when class is not</span>
 <a name="line.761"><span class="line-number even">761:</span> </a>                <span class="line comment">// loadable or instantiatable.</span>
 <a name="line.762"><span class="line-number even">762:</span> </a>              }
 <a name="line.763"><span class="line-number even">763:</span> </a>          }
 <a name="line.764"><span class="line-number even">764:</span> </a>        <span class="line comment">// Cache this for later retrieval.</span>
 <a name="line.765"><span class="line-number odd">765: </span></a>        <span class="keyword">if</span> (<span class="variable member">e</span> != <span class="primitive literal">null</span>)
 <a name="line.766"><span class="line-number even">766:</span> </a>          <span class="method member">editorKits.put</span>(<span class="variable member">type</span>, <span class="variable member">e</span>);
 <a name="line.767"><span class="line-number even">767:</span> </a>      }
 <a name="line.768"><span class="line-number even">768:</span> </a>    <span class="keyword">return</span> <span class="variable member">e</span>;
 <a name="line.769"><span class="line-number even">769:</span> </a>  }
 <a name="line.770"><span class="line-number odd">770: </span></a>
 <a name="line.771"><span class="line-number even">771:</span> </a>  <span class="javadoc comment">/**
 <a name="line.772"><span class="line-number even">772:</span> </a>   * Sends a given &lt;code&gt;HyperlinkEvent&lt;/code&gt; to all registered listeners.
 <a name="line.773"><span class="line-number even">773:</span> </a>   *
 <a name="line.774"><span class="line-number even">774:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">event</span> the event to send
 <a name="line.775"><span class="line-number odd">775: </span></a>   */</span>
 <a name="line.776"><span class="line-number even">776:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">fireHyperlinkUpdate</span>(<span class="non-primitive type">HyperlinkEvent</span> <span class="variable member">event</span>)
 <a name="line.777"><span class="line-number even">777:</span> </a>  {
 <a name="line.778"><span class="line-number even">778:</span> </a>    <span class="non-primitive type">HyperlinkListener</span>[] <span class="variable member">listeners</span> = <span class="method member">getHyperlinkListeners</span>();
 <a name="line.779"><span class="line-number even">779:</span> </a>
 <a name="line.780"><span class="line-number odd">780: </span></a>    <span class="keyword">for</span> (<span class="primitive type">int</span> <span class="variable member">index</span> = <span class="numeric literal">0</span>; <span class="variable member">index</span> &lt; <span class="variable member">listeners.length</span>; ++<span class="variable member">index</span>)
 <a name="line.781"><span class="line-number even">781:</span> </a>       <span class="variable member">listeners</span>[<span class="variable member">index</span>].<span class="method member">hyperlinkUpdate</span>(<span class="variable member">event</span>);
 <a name="line.782"><span class="line-number even">782:</span> </a>  }
 <a name="line.783"><span class="line-number even">783:</span> </a>
 <a name="line.784"><span class="line-number even">784:</span> </a>  <span class="javadoc comment">/**
 <a name="line.785"><span class="line-number odd">785: </span></a>   * Returns the accessible context associated with this editor pane.
 <a name="line.786"><span class="line-number even">786:</span> </a>   *
 <a name="line.787"><span class="line-number even">787:</span> </a>   * @<span class="javadoc tag">return</span> the accessible context associated with this editor pane
 <a name="line.788"><span class="line-number even">788:</span> </a>   */</span>
 <a name="line.789"><span class="line-number even">789:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">AccessibleContext</span> <span class="method member">getAccessibleContext</span>()
 <a name="line.790"><span class="line-number odd">790: </span></a>  {
 <a name="line.791"><span class="line-number even">791:</span> </a>    <span class="keyword">if</span> (<span class="variable member">accessibleContext</span> == <span class="primitive literal">null</span>)
 <a name="line.792"><span class="line-number even">792:</span> </a>      {
 <a name="line.793"><span class="line-number even">793:</span> </a>        <span class="keyword">if</span> (<span class="method member">getEditorKit</span>() <span class="keyword">instanceof</span> <span class="non-primitive type">HTMLEditorKit</span>)
 <a name="line.794"><span class="line-number even">794:</span> </a>          <span class="variable member">accessibleContext</span> = <span class="keyword">new</span> <span class="constructor member">AccessibleJEditorPaneHTML</span>();
 <a name="line.795"><span class="line-number odd">795: </span></a>        <span class="keyword">else</span>
 <a name="line.796"><span class="line-number even">796:</span> </a>          <span class="variable member">accessibleContext</span> = <span class="keyword">new</span> <span class="constructor member">AccessibleJEditorPane</span>();
 <a name="line.797"><span class="line-number even">797:</span> </a>      }
 <a name="line.798"><span class="line-number even">798:</span> </a>    <span class="keyword">return</span> <span class="variable member">accessibleContext</span>;
 <a name="line.799"><span class="line-number even">799:</span> </a>  }
 <a name="line.800"><span class="line-number odd">800: </span></a>
 <a name="line.801"><span class="line-number even">801:</span> </a>  <span class="keyword">public</span> <span class="keyword">final</span> <span class="non-primitive type">String</span> <span class="method member">getContentType</span>()
 <a name="line.802"><span class="line-number even">802:</span> </a>  {
 <a name="line.803"><span class="line-number even">803:</span> </a>    <span class="keyword">return</span> <span class="method member">getEditorKit</span>().<span class="method member">getContentType</span>();
 <a name="line.804"><span class="line-number even">804:</span> </a>  }
 <a name="line.805"><span class="line-number odd">805: </span></a>
 <a name="line.806"><span class="line-number even">806:</span> </a>  <span class="javadoc comment">/**
 <a name="line.807"><span class="line-number even">807:</span> </a>   * Returns the EditorKit. If there is no EditorKit set this method
 <a name="line.808"><span class="line-number even">808:</span> </a>   * calls createDefaultEditorKit() and setEditorKit() first.
 <a name="line.809"><span class="line-number even">809:</span> </a>   */</span>
 <a name="line.810"><span class="line-number odd">810: </span></a>  <span class="keyword">public</span> <span class="non-primitive type">EditorKit</span> <span class="method member">getEditorKit</span>()
 <a name="line.811"><span class="line-number even">811:</span> </a>  {
 <a name="line.812"><span class="line-number even">812:</span> </a>    <span class="keyword">if</span> (<span class="variable member">editorKit</span> == <span class="primitive literal">null</span>)
 <a name="line.813"><span class="line-number even">813:</span> </a>      <span class="method member">setEditorKit</span>(<span class="method member">createDefaultEditorKit</span>());
 <a name="line.814"><span class="line-number even">814:</span> </a>    <span class="keyword">return</span> <span class="variable member">editorKit</span>;
 <a name="line.815"><span class="line-number odd">815: </span></a>  }
 <a name="line.816"><span class="line-number even">816:</span> </a>
 <a name="line.817"><span class="line-number even">817:</span> </a>  <span class="javadoc comment">/**
 <a name="line.818"><span class="line-number even">818:</span> </a>   * Returns the class name of the EditorKit associated with the given
 <a name="line.819"><span class="line-number even">819:</span> </a>   * content type.
 <a name="line.820"><span class="line-number odd">820: </span></a>   *
 <a name="line.821"><span class="line-number even">821:</span> </a>   * @<span class="javadoc tag">since</span> 1.3
 <a name="line.822"><span class="line-number even">822:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">type</span> the content type
 <a name="line.823"><span class="line-number even">823:</span> </a>   * @<span class="javadoc tag">return</span> the class name of the EditorKit associated with this content type
 <a name="line.824"><span class="line-number even">824:</span> </a>   */</span>
 <a name="line.825"><span class="line-number odd">825: </span></a>  <span class="keyword">public</span> <span class="keyword">static</span> <span class="non-primitive type">String</span> <span class="method member">getEditorKitClassNameForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>)
 <a name="line.826"><span class="line-number even">826:</span> </a>  {
 <a name="line.827"><span class="line-number even">827:</span> </a>    <span class="non-primitive type">EditorKitMapping</span> <span class="variable member">m</span> = (<span class="non-primitive type">EditorKitMapping</span>) <span class="method member">registerMap.get</span>(<span class="variable member">type</span>);
 <a name="line.828"><span class="line-number even">828:</span> </a>    <span class="non-primitive type">String</span> <span class="variable member">kitName</span> = <span class="variable member">m</span> != <span class="primitive literal">null</span> ? <span class="variable member">m.className</span> : <span class="primitive literal">null</span>;
 <a name="line.829"><span class="line-number even">829:</span> </a>    <span class="keyword">return</span> <span class="variable member">kitName</span>;
 <a name="line.830"><span class="line-number odd">830: </span></a>  }
 <a name="line.831"><span class="line-number even">831:</span> </a>
 <a name="line.832"><span class="line-number even">832:</span> </a>  <span class="javadoc comment">/**
 <a name="line.833"><span class="line-number even">833:</span> </a>   * Returns the EditorKit to use for the given content type.  If an
 <a name="line.834"><span class="line-number even">834:</span> </a>   * EditorKit has been explicitly set via
 <a name="line.835"><span class="line-number odd">835: </span></a>   * &lt;code&gt;setEditorKitForContentType&lt;/code&gt;
 <a name="line.836"><span class="line-number even">836:</span> </a>   * then it will be returned.  Otherwise an attempt will be made to create
 <a name="line.837"><span class="line-number even">837:</span> </a>   * an EditorKit from the default recognzied content types or any
 <a name="line.838"><span class="line-number even">838:</span> </a>   * EditorKits that have been registered.  If none can be created, a
 <a name="line.839"><span class="line-number even">839:</span> </a>   * PlainEditorKit is created.
 <a name="line.840"><span class="line-number odd">840: </span></a>   *
 <a name="line.841"><span class="line-number even">841:</span> </a>   * @<span class="javadoc tag">see</span> #registerEditorKitForContentType(String, String)
 <a name="line.842"><span class="line-number even">842:</span> </a>   * @<span class="javadoc tag">see</span> #registerEditorKitForContentType(String, String, ClassLoader)
 <a name="line.843"><span class="line-number even">843:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">type</span> the content type
 <a name="line.844"><span class="line-number even">844:</span> </a>   * @<span class="javadoc tag">return</span> an appropriate EditorKit for the given content type
 <a name="line.845"><span class="line-number odd">845: </span></a>   */</span>
 <a name="line.846"><span class="line-number even">846:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">EditorKit</span> <span class="method member">getEditorKitForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>)
 <a name="line.847"><span class="line-number even">847:</span> </a>  {
 <a name="line.848"><span class="line-number even">848:</span> </a>    <span class="line comment">// First check if an EditorKit has been explicitly set.</span>
 <a name="line.849"><span class="line-number even">849:</span> </a>    <span class="non-primitive type">EditorKit</span> <span class="variable member">e</span> = (<span class="non-primitive type">EditorKit</span>) <span class="method member">editorMap.get</span>(<span class="variable member">type</span>);
 <a name="line.850"><span class="line-number odd">850: </span></a>    <span class="line comment">// Then check to see if we can create one.</span>
 <a name="line.851"><span class="line-number even">851:</span> </a>    <span class="keyword">if</span> (<span class="variable member">e</span> == <span class="primitive literal">null</span>)
 <a name="line.852"><span class="line-number even">852:</span> </a>      {
 <a name="line.853"><span class="line-number even">853:</span> </a>        <span class="variable member">e</span> = <span class="method member">createEditorKitForContentType</span>(<span class="variable member">type</span>);
 <a name="line.854"><span class="line-number even">854:</span> </a>        <span class="keyword">if</span> (<span class="variable member">e</span> != <span class="primitive literal">null</span>)
 <a name="line.855"><span class="line-number odd">855: </span></a>          <span class="method member">setEditorKitForContentType</span>(<span class="variable member">type</span>, <span class="variable member">e</span>);
 <a name="line.856"><span class="line-number even">856:</span> </a>      }
 <a name="line.857"><span class="line-number even">857:</span> </a>    <span class="line comment">// Otherwise default to PlainEditorKit.</span>
 <a name="line.858"><span class="line-number even">858:</span> </a>    <span class="keyword">if</span> (<span class="variable member">e</span> == <span class="primitive literal">null</span>)
 <a name="line.859"><span class="line-number even">859:</span> </a>      <span class="variable member">e</span> = <span class="method member">createDefaultEditorKit</span>();
 <a name="line.860"><span class="line-number odd">860: </span></a>    <span class="keyword">return</span> <span class="variable member">e</span>;
 <a name="line.861"><span class="line-number even">861:</span> </a>  }
 <a name="line.862"><span class="line-number even">862:</span> </a>
 <a name="line.863"><span class="line-number even">863:</span> </a>  <span class="javadoc comment">/**
 <a name="line.864"><span class="line-number even">864:</span> </a>   * Returns the preferred size for the JEditorPane. This is implemented to
 <a name="line.865"><span class="line-number odd">865: </span></a>   * return the super's preferred size, unless one of
 <a name="line.866"><span class="line-number even">866:</span> </a>   * {@<span class="javadoc tag">link</span> #getScrollableTracksViewportHeight()} or
 <a name="line.867"><span class="line-number even">867:</span> </a>   * {@<span class="javadoc tag">link</span> #getScrollableTracksViewportWidth()} returns &lt;code&gt;true&lt;/code&gt;,
 <a name="line.868"><span class="line-number even">868:</span> </a>   * in which case the preferred width and/or height is replaced by the UI's
 <a name="line.869"><span class="line-number even">869:</span> </a>   * minimum size.
 <a name="line.870"><span class="line-number odd">870: </span></a>   *
 <a name="line.871"><span class="line-number even">871:</span> </a>   * @<span class="javadoc tag">return</span> the preferred size for the JEditorPane
 <a name="line.872"><span class="line-number even">872:</span> </a>   */</span>
 <a name="line.873"><span class="line-number even">873:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">Dimension</span> <span class="method member">getPreferredSize</span>()
 <a name="line.874"><span class="line-number even">874:</span> </a>  {
 <a name="line.875"><span class="line-number odd">875: </span></a>    <span class="non-primitive type">Dimension</span> <span class="variable member">pref</span> = <span class="method member">super.getPreferredSize</span>();
 <a name="line.876"><span class="line-number even">876:</span> </a>    <span class="non-primitive type">Container</span> <span class="variable member">parent</span> = <span class="method member">getParent</span>();
 <a name="line.877"><span class="line-number even">877:</span> </a>    <span class="keyword">if</span> (<span class="variable member">parent</span> <span class="keyword">instanceof</span> <span class="non-primitive type">JViewport</span>)
 <a name="line.878"><span class="line-number even">878:</span> </a>      {
 <a name="line.879"><span class="line-number even">879:</span> </a>        <span class="non-primitive type">JViewport</span> <span class="variable member">vp</span> = (<span class="non-primitive type">JViewport</span>) <span class="method member">getParent</span>();
 <a name="line.880"><span class="line-number odd">880: </span></a>        <span class="non-primitive type">TextUI</span> <span class="variable member">ui</span> = <span class="method member">getUI</span>();
 <a name="line.881"><span class="line-number even">881:</span> </a>        <span class="non-primitive type">Dimension</span> <span class="variable member">min</span> = <span class="primitive literal">null</span>;
 <a name="line.882"><span class="line-number even">882:</span> </a>        <span class="keyword">if</span> (! <span class="method member">getScrollableTracksViewportWidth</span>())
 <a name="line.883"><span class="line-number even">883:</span> </a>          {
 <a name="line.884"><span class="line-number even">884:</span> </a>            <span class="variable member">min</span> = <span class="method member">ui.getMinimumSize</span>(<span class="keyword">this</span>);
 <a name="line.885"><span class="line-number odd">885: </span></a>            <span class="primitive type">int</span> <span class="variable member">vpWidth</span> = <span class="method member">vp.getWidth</span>();
 <a name="line.886"><span class="line-number even">886:</span> </a>            <span class="keyword">if</span> (<span class="variable member">vpWidth</span> != <span class="numeric literal">0</span> &amp;&amp; <span class="variable member">vpWidth</span> &lt; <span class="variable member">min.width</span>)
 <a name="line.887"><span class="line-number even">887:</span> </a>              <span class="variable member">pref.width</span> = <span class="variable member">min.width</span>;
 <a name="line.888"><span class="line-number even">888:</span> </a>          }
 <a name="line.889"><span class="line-number even">889:</span> </a>        <span class="keyword">if</span> (! <span class="method member">getScrollableTracksViewportHeight</span>())
 <a name="line.890"><span class="line-number odd">890: </span></a>          {
 <a name="line.891"><span class="line-number even">891:</span> </a>            <span class="keyword">if</span> (<span class="variable member">min</span> == <span class="primitive literal">null</span>)
 <a name="line.892"><span class="line-number even">892:</span> </a>              <span class="variable member">min</span> = <span class="method member">ui.getMinimumSize</span>(<span class="keyword">this</span>);
 <a name="line.893"><span class="line-number even">893:</span> </a>            <span class="primitive type">int</span> <span class="variable member">vpHeight</span> = <span class="method member">vp.getHeight</span>();
 <a name="line.894"><span class="line-number even">894:</span> </a>            <span class="keyword">if</span> (<span class="variable member">vpHeight</span> != <span class="numeric literal">0</span> &amp;&amp; <span class="variable member">vpHeight</span> &lt; <span class="variable member">min.height</span>)
 <a name="line.895"><span class="line-number odd">895: </span></a>              <span class="variable member">pref.height</span> = <span class="variable member">min.height</span>;
 <a name="line.896"><span class="line-number even">896:</span> </a>          }
 <a name="line.897"><span class="line-number even">897:</span> </a>      }
 <a name="line.898"><span class="line-number even">898:</span> </a>    <span class="keyword">return</span> <span class="variable member">pref</span>;
 <a name="line.899"><span class="line-number even">899:</span> </a>  }
 <a name="line.900"><span class="line-number odd">900: </span></a>
 <a name="line.901"><span class="line-number even">901:</span> </a>  <span class="javadoc comment">/**
 <a name="line.902"><span class="line-number even">902:</span> </a>   * Returns &lt;code&gt;true&lt;/code&gt; when a Viewport should force the height of
 <a name="line.903"><span class="line-number even">903:</span> </a>   * this component to match the viewport height. This is implemented to return
 <a name="line.904"><span class="line-number even">904:</span> </a>   * &lt;code&gt;true&lt;/code&gt; when  the parent is an instance of JViewport and
 <a name="line.905"><span class="line-number odd">905: </span></a>   * the viewport height &gt; the UI's minimum height.
 <a name="line.906"><span class="line-number even">906:</span> </a>   *
 <a name="line.907"><span class="line-number even">907:</span> </a>   * @<span class="javadoc tag">return</span> &lt;code&gt;true&lt;/code&gt; when a Viewport should force the height of
 <a name="line.908"><span class="line-number even">908:</span> </a>   *         this component to match the viewport height
 <a name="line.909"><span class="line-number even">909:</span> </a>   */</span>
 <a name="line.910"><span class="line-number odd">910: </span></a>  <span class="keyword">public</span> <span class="primitive type">boolean</span> <span class="method member">getScrollableTracksViewportHeight</span>()
 <a name="line.911"><span class="line-number even">911:</span> </a>  {
 <a name="line.912"><span class="line-number even">912:</span> </a>    <span class="line comment">// Tests show that this returns true when the parent is a JViewport</span>
 <a name="line.913"><span class="line-number even">913:</span> </a>    <span class="line comment">// and has a height &gt; minimum UI height.</span>
 <a name="line.914"><span class="line-number even">914:</span> </a>    <span class="non-primitive type">Container</span> <span class="variable member">parent</span> = <span class="method member">getParent</span>();
 <a name="line.915"><span class="line-number odd">915: </span></a>    <span class="primitive type">int</span> <span class="variable member">height</span> = <span class="method member">parent.getHeight</span>();
 <a name="line.916"><span class="line-number even">916:</span> </a>    <span class="non-primitive type">TextUI</span> <span class="variable member">ui</span> = <span class="method member">getUI</span>();
 <a name="line.917"><span class="line-number even">917:</span> </a>    <span class="keyword">return</span> <span class="variable member">parent</span> <span class="keyword">instanceof</span> <span class="non-primitive type">JViewport</span>
 <a name="line.918"><span class="line-number even">918:</span> </a>           &amp;&amp; <span class="variable member">height</span> &gt;= <span class="method member">ui.getMinimumSize</span>(<span class="keyword">this</span>)<span class="variable member">.height</span>
 <a name="line.919"><span class="line-number even">919:</span> </a>           &amp;&amp; <span class="variable member">height</span> &lt;= <span class="method member">ui.getMaximumSize</span>(<span class="keyword">this</span>)<span class="variable member">.height</span>;
 <a name="line.920"><span class="line-number odd">920: </span></a>  }
 <a name="line.921"><span class="line-number even">921:</span> </a>
 <a name="line.922"><span class="line-number even">922:</span> </a>  <span class="javadoc comment">/**
 <a name="line.923"><span class="line-number even">923:</span> </a>   * Returns &lt;code&gt;true&lt;/code&gt; when a Viewport should force the width of
 <a name="line.924"><span class="line-number even">924:</span> </a>   * this component to match the viewport width. This is implemented to return
 <a name="line.925"><span class="line-number odd">925: </span></a>   * &lt;code&gt;true&lt;/code&gt; when  the parent is an instance of JViewport and
 <a name="line.926"><span class="line-number even">926:</span> </a>   * the viewport width &gt; the UI's minimum width.
 <a name="line.927"><span class="line-number even">927:</span> </a>   *
 <a name="line.928"><span class="line-number even">928:</span> </a>   * @<span class="javadoc tag">return</span> &lt;code&gt;true&lt;/code&gt; when a Viewport should force the width of
 <a name="line.929"><span class="line-number even">929:</span> </a>   *         this component to match the viewport width
 <a name="line.930"><span class="line-number odd">930: </span></a>   */</span>
 <a name="line.931"><span class="line-number even">931:</span> </a>  <span class="keyword">public</span> <span class="primitive type">boolean</span> <span class="method member">getScrollableTracksViewportWidth</span>()
 <a name="line.932"><span class="line-number even">932:</span> </a>  {
 <a name="line.933"><span class="line-number even">933:</span> </a>    <span class="line comment">// Tests show that this returns true when the parent is a JViewport</span>
 <a name="line.934"><span class="line-number even">934:</span> </a>    <span class="line comment">// and has a width &gt; minimum UI width.</span>
 <a name="line.935"><span class="line-number odd">935: </span></a>    <span class="non-primitive type">Container</span> <span class="variable member">parent</span> = <span class="method member">getParent</span>();
 <a name="line.936"><span class="line-number even">936:</span> </a>    <span class="keyword">return</span> <span class="variable member">parent</span> != <span class="primitive literal">null</span> &amp;&amp; <span class="variable member">parent</span> <span class="keyword">instanceof</span> <span class="non-primitive type">JViewport</span>
 <a name="line.937"><span class="line-number even">937:</span> </a>           &amp;&amp; <span class="method member">parent.getWidth</span>() &gt; <span class="method member">getUI</span>().<span class="method member">getMinimumSize</span>(<span class="keyword">this</span>)<span class="variable member">.width</span>;
 <a name="line.938"><span class="line-number even">938:</span> </a>  }
 <a name="line.939"><span class="line-number even">939:</span> </a>
 <a name="line.940"><span class="line-number odd">940: </span></a>  <span class="keyword">public</span> <span class="constant member">URL</span> <span class="method member">getPage</span>()
 <a name="line.941"><span class="line-number even">941:</span> </a>  {
 <a name="line.942"><span class="line-number even">942:</span> </a>    <span class="keyword">return</span> <span class="variable member">loader</span> != <span class="primitive literal">null</span> ? <span class="variable member">loader.page</span> : <span class="primitive literal">null</span>;
 <a name="line.943"><span class="line-number even">943:</span> </a>  }
 <a name="line.944"><span class="line-number even">944:</span> </a>
 <a name="line.945"><span class="line-number odd">945: </span></a>  <span class="keyword">protected</span> <span class="non-primitive type">InputStream</span> <span class="method member">getStream</span>(<span class="constant member">URL</span> <span class="variable member">page</span>)
 <a name="line.946"><span class="line-number even">946:</span> </a>    <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.947"><span class="line-number even">947:</span> </a>  {
 <a name="line.948"><span class="line-number even">948:</span> </a>    <span class="non-primitive type">URLConnection</span> <span class="variable member">conn</span> = <span class="method member">page.openConnection</span>();
 <a name="line.949"><span class="line-number even">949:</span> </a>    <span class="line comment">// Try to detect the content type of the stream data.</span>
 <a name="line.950"><span class="line-number odd">950: </span></a>    <span class="non-primitive type">String</span> <span class="variable member">type</span> = <span class="method member">conn.getContentType</span>();
 <a name="line.951"><span class="line-number even">951:</span> </a>    <span class="keyword">if</span> (<span class="variable member">type</span> != <span class="primitive literal">null</span>)
 <a name="line.952"><span class="line-number even">952:</span> </a>      <span class="method member">setContentType</span>(<span class="variable member">type</span>);
 <a name="line.953"><span class="line-number even">953:</span> </a>    <span class="non-primitive type">InputStream</span> <span class="variable member">stream</span> = <span class="method member">conn.getInputStream</span>();
 <a name="line.954"><span class="line-number even">954:</span> </a>    <span class="keyword">return</span> <span class="keyword">new</span> <span class="constructor member">BufferedInputStream</span>(<span class="variable member">stream</span>);
 <a name="line.955"><span class="line-number odd">955: </span></a>  }
 <a name="line.956"><span class="line-number even">956:</span> </a>
 <a name="line.957"><span class="line-number even">957:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">String</span> <span class="method member">getText</span>()
 <a name="line.958"><span class="line-number even">958:</span> </a>  {
 <a name="line.959"><span class="line-number even">959:</span> </a>    <span class="keyword">return</span> <span class="method member">super.getText</span>();
 <a name="line.960"><span class="line-number odd">960: </span></a>  }
 <a name="line.961"><span class="line-number even">961:</span> </a>
 <a name="line.962"><span class="line-number even">962:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">String</span> <span class="method member">getUIClassID</span>()
 <a name="line.963"><span class="line-number even">963:</span> </a>  {
 <a name="line.964"><span class="line-number even">964:</span> </a>    <span class="keyword">return</span> <span class="double quote">&quot;EditorPaneUI&quot;</span>;
 <a name="line.965"><span class="line-number odd">965: </span></a>  }
 <a name="line.966"><span class="line-number even">966:</span> </a>
 <a name="line.967"><span class="line-number even">967:</span> </a>  <span class="keyword">public</span> <span class="primitive type">boolean</span> <span class="method member">isFocusCycleRoot</span>()
 <a name="line.968"><span class="line-number even">968:</span> </a>  {
 <a name="line.969"><span class="line-number even">969:</span> </a>    <span class="keyword">return</span> <span class="variable member">focus_root</span>;
 <a name="line.970"><span class="line-number odd">970: </span></a>  }
 <a name="line.971"><span class="line-number even">971:</span> </a>
 <a name="line.972"><span class="line-number even">972:</span> </a>  <span class="keyword">protected</span> <span class="non-primitive type">String</span> <span class="method member">paramString</span>()
 <a name="line.973"><span class="line-number even">973:</span> </a>  {
 <a name="line.974"><span class="line-number even">974:</span> </a>    <span class="keyword">return</span> <span class="double quote">&quot;JEditorPane&quot;</span>;
 <a name="line.975"><span class="line-number odd">975: </span></a>  }
 <a name="line.976"><span class="line-number even">976:</span> </a>
 <a name="line.977"><span class="line-number even">977:</span> </a>  <span class="javadoc comment">/**
 <a name="line.978"><span class="line-number even">978:</span> </a>   * This method initializes from a stream.
 <a name="line.979"><span class="line-number even">979:</span> </a>   */</span>
 <a name="line.980"><span class="line-number odd">980: </span></a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">read</span>(<span class="non-primitive type">InputStream</span> <span class="variable member">in</span>, <span class="non-primitive type">Object</span> <span class="variable member">desc</span>) <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
 <a name="line.981"><span class="line-number even">981:</span> </a>  {
 <a name="line.982"><span class="line-number even">982:</span> </a>    <span class="non-primitive type">EditorKit</span> <span class="variable member">kit</span> = <span class="method member">getEditorKit</span>();
 <a name="line.983"><span class="line-number even">983:</span> </a>    <span class="keyword">if</span> (<span class="variable member">kit</span> <span class="keyword">instanceof</span> <span class="non-primitive type">HTMLEditorKit</span> &amp;&amp; <span class="variable member">desc</span> <span class="keyword">instanceof</span> <span class="non-primitive type">HTMLDocument</span>)
 <a name="line.984"><span class="line-number even">984:</span> </a>      {
 <a name="line.985"><span class="line-number odd">985: </span></a>        <span class="non-primitive type">HTMLDocument</span> <span class="variable member">doc</span> = (<span class="non-primitive type">HTMLDocument</span>) <span class="variable member">desc</span>;
 <a name="line.986"><span class="line-number even">986:</span> </a>        <span class="method member">setDocument</span>(<span class="variable member">doc</span>);
 <a name="line.987"><span class="line-number even">987:</span> </a>        <span class="keyword">try</span>
 <a name="line.988"><span class="line-number even">988:</span> </a>          {
 <a name="line.989"><span class="line-number even">989:</span> </a>            <span class="non-primitive type">InputStreamReader</span> <span class="variable member">reader</span> = <span class="keyword">new</span> <span class="constructor member">InputStreamReader</span>(<span class="variable member">in</span>);
 <a name="line.990"><span class="line-number odd">990: </span></a>            <span class="method member">kit.read</span>(<span class="variable member">reader</span>, <span class="variable member">doc</span>, <span class="numeric literal">0</span>);
 <a name="line.991"><span class="line-number even">991:</span> </a>          }
 <a name="line.992"><span class="line-number even">992:</span> </a>        <span class="keyword">catch</span> (<span class="non-primitive type">BadLocationException</span> <span class="variable member">ex</span>)
 <a name="line.993"><span class="line-number even">993:</span> </a>          {
 <a name="line.994"><span class="line-number even">994:</span> </a>            <span class="keyword">assert</span> <span class="primitive literal">false</span> : <span class="double quote">&quot;BadLocationException must not be thrown here.&quot;</span>;
 <a name="line.995"><span class="line-number odd">995: </span></a>          }
 <a name="line.996"><span class="line-number even">996:</span> </a>      }
 <a name="line.997"><span class="line-number even">997:</span> </a>    <span class="keyword">else</span>
 <a name="line.998"><span class="line-number even">998:</span> </a>      {
 <a name="line.999"><span class="line-number even">999:</span> </a>        <span class="non-primitive type">Reader</span> <span class="variable member">inRead</span> = <span class="keyword">new</span> <span class="constructor member">InputStreamReader</span>(<span class="variable member">in</span>);
<a name="line.1000"><span class="line-number odd">1000: </span></a>        <span class="method member">super.read</span>(<span class="variable member">inRead</span>, <span class="variable member">desc</span>);
<a name="line.1001"><span class="line-number even">1001:</span> </a>      }
<a name="line.1002"><span class="line-number even">1002:</span> </a>  }
<a name="line.1003"><span class="line-number even">1003:</span> </a>
<a name="line.1004"><span class="line-number even">1004:</span> </a>  <span class="javadoc comment">/**
<a name="line.1005"><span class="line-number odd">1005: </span></a>   * Establishes a binding between type and classname.  This enables
<a name="line.1006"><span class="line-number even">1006:</span> </a>   * us to create an EditorKit later for the given content type.
<a name="line.1007"><span class="line-number even">1007:</span> </a>   *
<a name="line.1008"><span class="line-number even">1008:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">type</span> the content type
<a name="line.1009"><span class="line-number even">1009:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">classname</span> the name of the class that is associated with this
<a name="line.1010"><span class="line-number odd">1010: </span></a>   * content type
<a name="line.1011"><span class="line-number even">1011:</span> </a>   */</span>
<a name="line.1012"><span class="line-number even">1012:</span> </a>  <span class="keyword">public</span> <span class="keyword">static</span> <span class="primitive type">void</span> <span class="method member">registerEditorKitForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>,
<a name="line.1013"><span class="line-number even">1013:</span> </a>                                                     <span class="non-primitive type">String</span> <span class="variable member">classname</span>)
<a name="line.1014"><span class="line-number even">1014:</span> </a>  {
<a name="line.1015"><span class="line-number odd">1015: </span></a>    <span class="method member">registerEditorKitForContentType</span>(<span class="variable member">type</span>, <span class="variable member">classname</span>,
<a name="line.1016"><span class="line-number even">1016:</span> </a>                               <span class="method member">Thread.currentThread</span>().<span class="method member">getContextClassLoader</span>());
<a name="line.1017"><span class="line-number even">1017:</span> </a>  }
<a name="line.1018"><span class="line-number even">1018:</span> </a>
<a name="line.1019"><span class="line-number even">1019:</span> </a>  <span class="javadoc comment">/**
<a name="line.1020"><span class="line-number odd">1020: </span></a>   * Establishes the default bindings of type to classname.
<a name="line.1021"><span class="line-number even">1021:</span> </a>   */</span>
<a name="line.1022"><span class="line-number even">1022:</span> </a>  <span class="keyword">public</span> <span class="keyword">static</span> <span class="primitive type">void</span> <span class="method member">registerEditorKitForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>,
<a name="line.1023"><span class="line-number even">1023:</span> </a>                                                     <span class="non-primitive type">String</span> <span class="variable member">classname</span>,
<a name="line.1024"><span class="line-number even">1024:</span> </a>                                                     <span class="non-primitive type">ClassLoader</span> <span class="variable member">loader</span>)
<a name="line.1025"><span class="line-number odd">1025: </span></a>  {
<a name="line.1026"><span class="line-number even">1026:</span> </a>    <span class="method member">registerMap.put</span>(<span class="variable member">type</span>, <span class="keyword">new</span> <span class="constructor member">EditorKitMapping</span>(<span class="variable member">classname</span>, <span class="variable member">loader</span>));
<a name="line.1027"><span class="line-number even">1027:</span> </a>  }
<a name="line.1028"><span class="line-number even">1028:</span> </a>
<a name="line.1029"><span class="line-number even">1029:</span> </a>  <span class="javadoc comment">/**
<a name="line.1030"><span class="line-number odd">1030: </span></a>   * Replaces the currently selected content with new content represented
<a name="line.1031"><span class="line-number even">1031:</span> </a>   * by the given string.
<a name="line.1032"><span class="line-number even">1032:</span> </a>   */</span>
<a name="line.1033"><span class="line-number even">1033:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">replaceSelection</span>(<span class="non-primitive type">String</span> <span class="variable member">content</span>)
<a name="line.1034"><span class="line-number even">1034:</span> </a>  {
<a name="line.1035"><span class="line-number odd">1035: </span></a>    <span class="line comment">// TODO: Implement this properly.</span>
<a name="line.1036"><span class="line-number even">1036:</span> </a>    <span class="method member">super.replaceSelection</span>(<span class="variable member">content</span>);
<a name="line.1037"><span class="line-number even">1037:</span> </a>  }
<a name="line.1038"><span class="line-number even">1038:</span> </a>
<a name="line.1039"><span class="line-number even">1039:</span> </a>  <span class="javadoc comment">/**
<a name="line.1040"><span class="line-number odd">1040: </span></a>   * Scrolls the view to the given reference location (that is, the value
<a name="line.1041"><span class="line-number even">1041:</span> </a>   * returned by the UL.getRef method for the URL being displayed).
<a name="line.1042"><span class="line-number even">1042:</span> </a>   */</span>
<a name="line.1043"><span class="line-number even">1043:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">scrollToReference</span>(<span class="non-primitive type">String</span> <span class="variable member">reference</span>)
<a name="line.1044"><span class="line-number even">1044:</span> </a>  {
<a name="line.1045"><span class="line-number odd">1045: </span></a>    <span class="line comment">// TODO: Implement this properly.</span>
<a name="line.1046"><span class="line-number even">1046:</span> </a>  }
<a name="line.1047"><span class="line-number even">1047:</span> </a>
<a name="line.1048"><span class="line-number even">1048:</span> </a>  <span class="keyword">public</span> <span class="keyword">final</span> <span class="primitive type">void</span> <span class="method member">setContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>)
<a name="line.1049"><span class="line-number even">1049:</span> </a>  {
<a name="line.1050"><span class="line-number odd">1050: </span></a>    <span class="line comment">// Strip off content type parameters.</span>
<a name="line.1051"><span class="line-number even">1051:</span> </a>    <span class="primitive type">int</span> <span class="variable member">paramIndex</span> = <span class="method member">type.indexOf</span>(<span class="single quote">';'</span>);
<a name="line.1052"><span class="line-number even">1052:</span> </a>    <span class="keyword">if</span> (<span class="variable member">paramIndex</span> &gt; -<span class="numeric literal">1</span>)
<a name="line.1053"><span class="line-number even">1053:</span> </a>      {
<a name="line.1054"><span class="line-number even">1054:</span> </a>        <span class="line comment">// TODO: Handle character encoding.</span>
<a name="line.1055"><span class="line-number odd">1055: </span></a>        <span class="variable member">type</span> = <span class="method member">type.substring</span>(<span class="numeric literal">0</span>, <span class="variable member">paramIndex</span>).<span class="method member">trim</span>();
<a name="line.1056"><span class="line-number even">1056:</span> </a>      }
<a name="line.1057"><span class="line-number even">1057:</span> </a>    <span class="keyword">if</span> (<span class="variable member">editorKit</span> != <span class="primitive literal">null</span>
<a name="line.1058"><span class="line-number even">1058:</span> </a>        &amp;&amp; <span class="method member">editorKit.getContentType</span>().<span class="method member">equals</span>(<span class="variable member">type</span>))
<a name="line.1059"><span class="line-number even">1059:</span> </a>      <span class="keyword">return</span>;
<a name="line.1060"><span class="line-number odd">1060: </span></a>
<a name="line.1061"><span class="line-number even">1061:</span> </a>    <span class="non-primitive type">EditorKit</span> <span class="variable member">kit</span> = <span class="method member">getEditorKitForContentType</span>(<span class="variable member">type</span>);
<a name="line.1062"><span class="line-number even">1062:</span> </a>
<a name="line.1063"><span class="line-number even">1063:</span> </a>    <span class="keyword">if</span> (<span class="variable member">kit</span> != <span class="primitive literal">null</span>)
<a name="line.1064"><span class="line-number even">1064:</span> </a>      <span class="method member">setEditorKit</span>(<span class="variable member">kit</span>);
<a name="line.1065"><span class="line-number odd">1065: </span></a>  }
<a name="line.1066"><span class="line-number even">1066:</span> </a>
<a name="line.1067"><span class="line-number even">1067:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">setEditorKit</span>(<span class="non-primitive type">EditorKit</span> <span class="variable member">newValue</span>)
<a name="line.1068"><span class="line-number even">1068:</span> </a>  {
<a name="line.1069"><span class="line-number even">1069:</span> </a>    <span class="keyword">if</span> (<span class="variable member">editorKit</span> == <span class="variable member">newValue</span>)
<a name="line.1070"><span class="line-number odd">1070: </span></a>      <span class="keyword">return</span>;
<a name="line.1071"><span class="line-number even">1071:</span> </a>
<a name="line.1072"><span class="line-number even">1072:</span> </a>    <span class="keyword">if</span> (<span class="variable member">editorKit</span> != <span class="primitive literal">null</span>)
<a name="line.1073"><span class="line-number even">1073:</span> </a>      <span class="method member">editorKit.deinstall</span>(<span class="keyword">this</span>);
<a name="line.1074"><span class="line-number even">1074:</span> </a>
<a name="line.1075"><span class="line-number odd">1075: </span></a>    <span class="non-primitive type">EditorKit</span> <span class="variable member">oldValue</span> = <span class="variable member">editorKit</span>;
<a name="line.1076"><span class="line-number even">1076:</span> </a>    <span class="variable member">editorKit</span> = <span class="variable member">newValue</span>;
<a name="line.1077"><span class="line-number even">1077:</span> </a>
<a name="line.1078"><span class="line-number even">1078:</span> </a>    <span class="keyword">if</span> (<span class="variable member">editorKit</span> != <span class="primitive literal">null</span>)
<a name="line.1079"><span class="line-number even">1079:</span> </a>      {
<a name="line.1080"><span class="line-number odd">1080: </span></a>        <span class="method member">editorKit.install</span>(<span class="keyword">this</span>);
<a name="line.1081"><span class="line-number even">1081:</span> </a>        <span class="method member">setDocument</span>(<span class="method member">editorKit.createDefaultDocument</span>());
<a name="line.1082"><span class="line-number even">1082:</span> </a>      }
<a name="line.1083"><span class="line-number even">1083:</span> </a>
<a name="line.1084"><span class="line-number even">1084:</span> </a>    <span class="method member">firePropertyChange</span>(<span class="double quote">&quot;editorKit&quot;</span>, <span class="variable member">oldValue</span>, <span class="variable member">newValue</span>);
<a name="line.1085"><span class="line-number odd">1085: </span></a>    <span class="method member">invalidate</span>();
<a name="line.1086"><span class="line-number even">1086:</span> </a>    <span class="method member">repaint</span>();
<a name="line.1087"><span class="line-number even">1087:</span> </a>    <span class="line comment">// Reset the accessibleContext since this depends on the editorKit.</span>
<a name="line.1088"><span class="line-number even">1088:</span> </a>    <span class="variable member">accessibleContext</span> = <span class="primitive literal">null</span>;
<a name="line.1089"><span class="line-number even">1089:</span> </a>  }
<a name="line.1090"><span class="line-number odd">1090: </span></a>
<a name="line.1091"><span class="line-number even">1091:</span> </a>  <span class="javadoc comment">/**
<a name="line.1092"><span class="line-number even">1092:</span> </a>   * Explicitly sets an EditorKit to be used for the given content type.
<a name="line.1093"><span class="line-number even">1093:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">type</span> the content type
<a name="line.1094"><span class="line-number even">1094:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">k</span> the EditorKit to use for the given content type
<a name="line.1095"><span class="line-number odd">1095: </span></a>   */</span>
<a name="line.1096"><span class="line-number even">1096:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">setEditorKitForContentType</span>(<span class="non-primitive type">String</span> <span class="variable member">type</span>, <span class="non-primitive type">EditorKit</span> <span class="variable member">k</span>)
<a name="line.1097"><span class="line-number even">1097:</span> </a>  {
<a name="line.1098"><span class="line-number even">1098:</span> </a>    <span class="method member">editorMap.put</span>(<span class="variable member">type</span>, <span class="variable member">k</span>);
<a name="line.1099"><span class="line-number even">1099:</span> </a>  }
<a name="line.1100"><span class="line-number odd">1100: </span></a>
<a name="line.1101"><span class="line-number even">1101:</span> </a>  <span class="javadoc comment">/**
<a name="line.1102"><span class="line-number even">1102:</span> </a>   * Sets the current URL being displayed.
<a name="line.1103"><span class="line-number even">1103:</span> </a>   */</span>
<a name="line.1104"><span class="line-number even">1104:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">setPage</span>(<span class="non-primitive type">String</span> <span class="variable member">url</span>) <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
<a name="line.1105"><span class="line-number odd">1105: </span></a>  {
<a name="line.1106"><span class="line-number even">1106:</span> </a>    <span class="method member">setPage</span>(<span class="keyword">new</span> <span class="constant member">URL</span>(<span class="variable member">url</span>));
<a name="line.1107"><span class="line-number even">1107:</span> </a>  }
<a name="line.1108"><span class="line-number even">1108:</span> </a>
<a name="line.1109"><span class="line-number even">1109:</span> </a>  <span class="javadoc comment">/**
<a name="line.1110"><span class="line-number odd">1110: </span></a>   * Sets the current URL being displayed.
<a name="line.1111"><span class="line-number even">1111:</span> </a>   */</span>
<a name="line.1112"><span class="line-number even">1112:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">setPage</span>(<span class="constant member">URL</span> <span class="variable member">page</span>) <span class="keyword">throws</span> <span class="non-primitive type">IOException</span>
<a name="line.1113"><span class="line-number even">1113:</span> </a>  {
<a name="line.1114"><span class="line-number even">1114:</span> </a>    <span class="keyword">if</span> (<span class="variable member">page</span> == <span class="primitive literal">null</span>)
<a name="line.1115"><span class="line-number odd">1115: </span></a>      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="constructor member">IOException</span>(<span class="double quote">&quot;invalid url&quot;</span>);
<a name="line.1116"><span class="line-number even">1116:</span> </a>
<a name="line.1117"><span class="line-number even">1117:</span> </a>    <span class="constant member">URL</span> <span class="variable member">old</span> = <span class="method member">getPage</span>();
<a name="line.1118"><span class="line-number even">1118:</span> </a>    <span class="line comment">// Only reload if the URL doesn't point to the same file.</span>
<a name="line.1119"><span class="line-number even">1119:</span> </a>    <span class="line comment">// This is not the same as equals because there might be different</span>
<a name="line.1120"><span class="line-number odd">1120: </span></a>    <span class="line comment">// URLs on the same file with different anchors.</span>
<a name="line.1121"><span class="line-number even">1121:</span> </a>    <span class="keyword">if</span> (<span class="variable member">old</span> == <span class="primitive literal">null</span> || ! <span class="method member">old.sameFile</span>(<span class="variable member">page</span>))
<a name="line.1122"><span class="line-number even">1122:</span> </a>      {
<a name="line.1123"><span class="line-number even">1123:</span> </a>        <span class="non-primitive type">InputStream</span> <span class="variable member">in</span> = <span class="method member">getStream</span>(<span class="variable member">page</span>);
<a name="line.1124"><span class="line-number even">1124:</span> </a>        <span class="keyword">if</span> (<span class="variable member">editorKit</span> != <span class="primitive literal">null</span>)
<a name="line.1125"><span class="line-number odd">1125: </span></a>          {
<a name="line.1126"><span class="line-number even">1126:</span> </a>            <span class="non-primitive type">Document</span> <span class="variable member">doc</span> = <span class="method member">editorKit.createDefaultDocument</span>();
<a name="line.1127"><span class="line-number even">1127:</span> </a>            <span class="method member">doc.putProperty</span>(<span class="non-primitive type">Document.StreamDescriptionProperty</span>, <span class="variable member">page</span>);
<a name="line.1128"><span class="line-number even">1128:</span> </a>
<a name="line.1129"><span class="line-number even">1129:</span> </a>            <span class="keyword">if</span> (<span class="variable member">loader</span> != <span class="primitive literal">null</span>)
<a name="line.1130"><span class="line-number odd">1130: </span></a>              <span class="method member">loader.cancel</span>();
<a name="line.1131"><span class="line-number even">1131:</span> </a>            <span class="variable member">loader</span> = <span class="keyword">new</span> <span class="constructor member">PageLoader</span>(<span class="variable member">doc</span>, <span class="variable member">in</span>, <span class="variable member">old</span>, <span class="variable member">page</span>);
<a name="line.1132"><span class="line-number even">1132:</span> </a>
<a name="line.1133"><span class="line-number even">1133:</span> </a>            <span class="primitive type">int</span> <span class="variable member">prio</span> = -<span class="numeric literal">1</span>;
<a name="line.1134"><span class="line-number even">1134:</span> </a>            <span class="keyword">if</span> (<span class="variable member">doc</span> <span class="keyword">instanceof</span> <span class="non-primitive type">AbstractDocument</span>)
<a name="line.1135"><span class="line-number odd">1135: </span></a>              {
<a name="line.1136"><span class="line-number even">1136:</span> </a>                <span class="non-primitive type">AbstractDocument</span> <span class="variable member">aDoc</span> = (<span class="non-primitive type">AbstractDocument</span>) <span class="variable member">doc</span>;
<a name="line.1137"><span class="line-number even">1137:</span> </a>                <span class="variable member">prio</span> = <span class="method member">aDoc.getAsynchronousLoadPriority</span>();
<a name="line.1138"><span class="line-number even">1138:</span> </a>              }
<a name="line.1139"><span class="line-number even">1139:</span> </a>            <span class="keyword">if</span> (<span class="variable member">prio</span> &gt;= <span class="numeric literal">0</span>)
<a name="line.1140"><span class="line-number odd">1140: </span></a>              {
<a name="line.1141"><span class="line-number even">1141:</span> </a>                <span class="line comment">// Load asynchronously.</span>
<a name="line.1142"><span class="line-number even">1142:</span> </a>                <span class="method member">setDocument</span>(<span class="variable member">doc</span>);
<a name="line.1143"><span class="line-number even">1143:</span> </a>                <span class="non-primitive type">Thread</span> <span class="variable member">loadThread</span> = <span class="keyword">new</span> <span class="constructor member">Thread</span>(<span class="variable member">loader</span>,
<a name="line.1144"><span class="line-number even">1144:</span> </a>                                               <span class="double quote">&quot;JEditorPane.PageLoader&quot;</span>);
<a name="line.1145"><span class="line-number odd">1145: </span></a>                <span class="method member">loadThread.setDaemon</span>(<span class="primitive literal">true</span>);
<a name="line.1146"><span class="line-number even">1146:</span> </a>                <span class="method member">loadThread.setPriority</span>(<span class="variable member">prio</span>);
<a name="line.1147"><span class="line-number even">1147:</span> </a>                <span class="method member">loadThread.start</span>();
<a name="line.1148"><span class="line-number even">1148:</span> </a>              }
<a name="line.1149"><span class="line-number even">1149:</span> </a>            <span class="keyword">else</span>
<a name="line.1150"><span class="line-number odd">1150: </span></a>              {
<a name="line.1151"><span class="line-number even">1151:</span> </a>                <span class="line comment">// Load synchronously.</span>
<a name="line.1152"><span class="line-number even">1152:</span> </a>                <span class="method member">loader.run</span>();
<a name="line.1153"><span class="line-number even">1153:</span> </a>                <span class="method member">setDocument</span>(<span class="variable member">doc</span>);
<a name="line.1154"><span class="line-number even">1154:</span> </a>              }
<a name="line.1155"><span class="line-number odd">1155: </span></a>          }
<a name="line.1156"><span class="line-number even">1156:</span> </a>      }
<a name="line.1157"><span class="line-number even">1157:</span> </a>  }
<a name="line.1158"><span class="line-number even">1158:</span> </a>
<a name="line.1159"><span class="line-number even">1159:</span> </a>  <span class="javadoc comment">/**
<a name="line.1160"><span class="line-number odd">1160: </span></a>   * Sets the text of the JEditorPane.  The argument &lt;code&gt;t&lt;/code&gt;
<a name="line.1161"><span class="line-number even">1161:</span> </a>   * is expected to be in the format of the current EditorKit.  This removes
<a name="line.1162"><span class="line-number even">1162:</span> </a>   * the content of the current document and uses the EditorKit to read in the
<a name="line.1163"><span class="line-number even">1163:</span> </a>   * new text.  This allows the EditorKit to handle the String rather than just
<a name="line.1164"><span class="line-number even">1164:</span> </a>   * inserting in plain text.
<a name="line.1165"><span class="line-number odd">1165: </span></a>   *
<a name="line.1166"><span class="line-number even">1166:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">t</span> the text to display in this JEditorPane
<a name="line.1167"><span class="line-number even">1167:</span> </a>   */</span>
<a name="line.1168"><span class="line-number even">1168:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">setText</span>(<span class="non-primitive type">String</span> <span class="variable member">t</span>)
<a name="line.1169"><span class="line-number even">1169:</span> </a>  {
<a name="line.1170"><span class="line-number odd">1170: </span></a>    <span class="keyword">try</span>
<a name="line.1171"><span class="line-number even">1171:</span> </a>    {
<a name="line.1172"><span class="line-number even">1172:</span> </a>      <span class="line comment">// Remove the current content.</span>
<a name="line.1173"><span class="line-number even">1173:</span> </a>      <span class="non-primitive type">Document</span> <span class="variable member">doc</span> = <span class="method member">getDocument</span>();
<a name="line.1174"><span class="line-number even">1174:</span> </a>      <span class="method member">doc.remove</span>(<span class="numeric literal">0</span>, <span class="method member">doc.getLength</span>());
<a name="line.1175"><span class="line-number odd">1175: </span></a>      <span class="keyword">if</span> (<span class="variable member">t</span> == <span class="primitive literal">null</span> || <span class="method member">t.equals</span>(<span class="double quote">&quot;&quot;</span>))
<a name="line.1176"><span class="line-number even">1176:</span> </a>        <span class="keyword">return</span>;
<a name="line.1177"><span class="line-number even">1177:</span> </a>
<a name="line.1178"><span class="line-number even">1178:</span> </a>      <span class="line comment">// Let the EditorKit read the text into the Document.</span>
<a name="line.1179"><span class="line-number even">1179:</span> </a>      <span class="method member">getEditorKit</span>().<span class="method member">read</span>(<span class="keyword">new</span> <span class="constructor member">StringReader</span>(<span class="variable member">t</span>), <span class="variable member">doc</span>, <span class="numeric literal">0</span>);
<a name="line.1180"><span class="line-number odd">1180: </span></a>    }
<a name="line.1181"><span class="line-number even">1181:</span> </a>    <span class="keyword">catch</span> (<span class="non-primitive type">BadLocationException</span> <span class="variable member">ble</span>)
<a name="line.1182"><span class="line-number even">1182:</span> </a>    {
<a name="line.1183"><span class="line-number even">1183:</span> </a>      <span class="line comment">// TODO: Don't know what to do here.</span>
<a name="line.1184"><span class="line-number even">1184:</span> </a>    }
<a name="line.1185"><span class="line-number odd">1185: </span></a>    <span class="keyword">catch</span> (<span class="non-primitive type">IOException</span> <span class="variable member">ioe</span>)
<a name="line.1186"><span class="line-number even">1186:</span> </a>    {
<a name="line.1187"><span class="line-number even">1187:</span> </a>      <span class="line comment">// TODO: Don't know what to do here.</span>
<a name="line.1188"><span class="line-number even">1188:</span> </a>    }
<a name="line.1189"><span class="line-number even">1189:</span> </a>  }
<a name="line.1190"><span class="line-number odd">1190: </span></a>
<a name="line.1191"><span class="line-number even">1191:</span> </a>  <span class="javadoc comment">/**
<a name="line.1192"><span class="line-number even">1192:</span> </a>   * Add a &lt;code&gt;HyperlinkListener&lt;/code&gt; object to this editor pane.
<a name="line.1193"><span class="line-number even">1193:</span> </a>   *
<a name="line.1194"><span class="line-number even">1194:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">listener</span> the listener to add
<a name="line.1195"><span class="line-number odd">1195: </span></a>   */</span>
<a name="line.1196"><span class="line-number even">1196:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">addHyperlinkListener</span>(<span class="non-primitive type">HyperlinkListener</span> <span class="variable member">listener</span>)
<a name="line.1197"><span class="line-number even">1197:</span> </a>  {
<a name="line.1198"><span class="line-number even">1198:</span> </a>    <span class="method member">listenerList.add</span>(<span class="keyword">HyperlinkListener.class</span>, <span class="variable member">listener</span>);
<a name="line.1199"><span class="line-number even">1199:</span> </a>  }
<a name="line.1200"><span class="line-number odd">1200: </span></a>
<a name="line.1201"><span class="line-number even">1201:</span> </a>  <span class="javadoc comment">/**
<a name="line.1202"><span class="line-number even">1202:</span> </a>   * Removes a &lt;code&gt;HyperlinkListener&lt;/code&gt; object to this editor pane.
<a name="line.1203"><span class="line-number even">1203:</span> </a>   *
<a name="line.1204"><span class="line-number even">1204:</span> </a>   * @<span class="javadoc tag">param</span> <span class="variable member">listener</span> the listener to remove
<a name="line.1205"><span class="line-number odd">1205: </span></a>   */</span>
<a name="line.1206"><span class="line-number even">1206:</span> </a>  <span class="keyword">public</span> <span class="primitive type">void</span> <span class="method member">removeHyperlinkListener</span>(<span class="non-primitive type">HyperlinkListener</span> <span class="variable member">listener</span>)
<a name="line.1207"><span class="line-number even">1207:</span> </a>  {
<a name="line.1208"><span class="line-number even">1208:</span> </a>    <span class="method member">listenerList.remove</span>(<span class="keyword">HyperlinkListener.class</span>, <span class="variable member">listener</span>);
<a name="line.1209"><span class="line-number even">1209:</span> </a>  }
<a name="line.1210"><span class="line-number odd">1210: </span></a>
<a name="line.1211"><span class="line-number even">1211:</span> </a>  <span class="javadoc comment">/**
<a name="line.1212"><span class="line-number even">1212:</span> </a>   * Returns all added &lt;code&gt;HyperlinkListener&lt;/code&gt; objects.
<a name="line.1213"><span class="line-number even">1213:</span> </a>   *
<a name="line.1214"><span class="line-number even">1214:</span> </a>   * @<span class="javadoc tag">return</span> array of listeners
<a name="line.1215"><span class="line-number odd">1215: </span></a>   *
<a name="line.1216"><span class="line-number even">1216:</span> </a>   * @<span class="javadoc tag">since</span> 1.4
<a name="line.1217"><span class="line-number even">1217:</span> </a>   */</span>
<a name="line.1218"><span class="line-number even">1218:</span> </a>  <span class="keyword">public</span> <span class="non-primitive type">HyperlinkListener</span>[] <span class="method member">getHyperlinkListeners</span>()
<a name="line.1219"><span class="line-number even">1219:</span> </a>  {
<a name="line.1220"><span class="line-number odd">1220: </span></a>    <span class="keyword">return</span> (<span class="non-primitive type">HyperlinkListener</span>[]) <span class="method member">getListeners</span>(<span class="keyword">HyperlinkListener.class</span>);
<a name="line.1221"><span class="line-number even">1221:</span> </a>  }
<a name="line.1222"><span class="line-number even">1222:</span> </a>}</pre>
  </div>
</div><p class="navbar bottom spacer"> </p><table class="navbar div bottom"><tr><td><div class="navbar div top"><span class="navbar item enabled"><a href="../../overview-summary.html">Overview</a></span> <span class="navbar item enabled"><a href="package-summary.html">Package</a></span> <span class="navbar item enabled"><a href="JEditorPane.html">Class</a></span> <span class="navbar item enabled"><a href="JEditorPane-uses.html">Use</a></span> <span class="navbar item active">Source</span> <span class="navbar item enabled"><a href="tree.html">Tree</a></span> <span class="navbar item enabled"><a href="../../alphaindex-1.html">Index</a></span> <span class="navbar item enabled"><a href="../../deprecated.html">Deprecated</a></span> <span class="navbar item enabled"><a href="../../about.html">About</a></span></div></td><td><span class='logo'><a href='http://www.gnu.org/software/classpath' target='_top'>GNU Classpath</a> (0.99.1-pre)</td></tr></table></body></html>
