<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <title>Line Numbers in Java Swing</title>
<meta name="description" content="Algosome Software Design." />
<meta name="keywords" content="Greg, Cope, Algosome, software, design" />
<meta name="copyright" content="Algosome Software Design Copyright 2009 Greg Cope All Rights Reserved" />
<meta name="author" content="Greg Cope" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="Classification" content="Software, Software Design, Software, Website Design, Programming." />
<meta name="audience" content="All" />
<meta name="rating" content="general" />
<meta name="distribution" content="Global" />
<meta http-equiv="Content-Language" content="EN" />
 <link rel="stylesheet" type="text/css" href="/styles/style.css" />
 <link rel="stylesheet" type="text/css" href="/styles/color.css" />
<link rel="stylesheet" type="text/css" href="/styles/menu.css" />
<link rel="stylesheet" type="text/css" href="/blog/articles.css" />
<meta name="verify-v1" content="/ozd4ZBePx/Bb2nFZklnL6JRkzSHZpDiilwJjkunWb0=" />


</head>

<body>
<div id="main">

<div id="logo">
   <form action="/search.html" id="cse-search-box">
  <div style="float:right;margin:0px;padding:0px;display:inline-block;vertical-align:text-top;margin-top:10px;">
    <input type="hidden" name="cx" value="partner-pub-1855470872648963:6445834732" />
    <input type="hidden" name="cof" value="FORID:10" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="35" />
    <input type="submit" name="sa" value="Search" style="width:60px;" />
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>   <h1>Line Numbers in Java Swing</h1>
</div>
    <div id="content">
      <div id="menu">
      	
        <ul id="nav">
          <li class="top"><a href="http://www.algosome.com" class="top_link"><span>Home</span></a></li>
          <li class="top"><a href="/software.html" class="top_link"><span class="down">Software</span></a>
		 
          </li>
          <li class="top"><a href="/resources/resources.html" class="top_link">Resources</a>
		
          </li>
         <li class="top"><a href="/articles/index.php" class="top_link">Articles</a></li> 
          <li class="top"><a href="/contact.html" class="top_link">Contact</a></li>
          <li class="top"><a href="/about.html" class="top_link">About</a></li>
        </ul>
      </div>
      
<div id="column1">




  <div class="sidebaritem"><div class="sbihead"><h1>Related Articles</h1></div><ul><li><a href="java-swing-iphone-drag-component.html">Java and Swing: an iPhone-like JScrollpane Component</a></li><li><a href="java-tree-set-sort-misuse.html">Java: The Misuse of a TreeSet</a></li><li><a href="java-construct-new-string-object.html">When to Construct a new String Object in Java</a></li></ul></div>

<div class="sidebaritem">
          <div class="sbihead">
            <h1>latest Articles</h1>
          </div>
          <div class="sbicontent"><ul class="latestlinks">
          	<li><a href="/articles/render-lorenz-attractor.html">Rendering the Lorenz Attractor</a></li><li><a href="/articles/continuous-bezier-curve-line.html">Drawing a Continuous Bezier Curve</a></li><li><a href="/articles/lorenz-attractor-programming-code.html">Programming the Lorenz Attractor</a></li><li><a href="/articles/rubiks-cube-computer-visualize.html">Modeling the Rubik's Cube with OpenGL</a></li><li><a href="/articles/rubiks-cube-computer-simulation.html">Rubiks Cube: Computer Simulation</a></li>          </ul>
          </div>
        </div>
        
        
<div class="sidebaritem">
<div class="sbihead">
<h1>Categories</h1>
</div>
<div class="sbilinks">
<ul>
<li><a href="/articles/index.php#Bioinformatics">Bioinformatics (15)</a></li>
<li><a href="/articles/index.php#Books">Books (4)</a></li>
<li><a href="/articles/index.php#Games and Graphics">Games and Graphics (12)</a></li>
<li><a href="/articles/index.php#Math">Math (7)</a></li>
<li><a href="/articles/index.php#Programming">Programming (41)</a></li>
<li><a href="/articles/index.php#Statistics">Statistics (5)</a></li>
<li><a href="/articles/index.php#Technology">Technology (9)</a></li>
<li><a href="/articles/index.php#Website Design">Website Design (7)</a></li>
</ul>

</div>
</div>    
        
      
    	
	<div>
    </div>
    
    <div style="clear:both"></div>
        
        <div class="sidebaritem">
          <div class="sbihead">
            <h1>By Date</h1>
          </div>
           <div class="sbilinks">
           <ul>
           <li><a href="/articles/search.php?month=December&amp;year=2013">December 2013</a></li><li><a href="/articles/search.php?month=November&amp;year=2013">November 2013</a></li><li><a href="/articles/search.php?month=October&amp;year=2013">October 2013</a></li><li><a href="/articles/search.php?month=September&amp;year=2013">September 2013</a></li><li><a href="/articles/search.php?month=August&amp;year=2013">August 2013</a></li><li><a href="/articles/search.php?month=July&amp;year=2013">July 2013</a></li><li><a href="/articles/search.php?month=June&amp;year=2013">June 2013</a></li><li><a href="/articles/search.php?month=May&amp;year=2012">May 2012</a></li><li><a href="/articles/search.php?month=April&amp;year=2012">April 2012</a></li><li><a href="/articles/search.php?month=March&amp;year=2012">March 2012</a></li> 
           </ul>
          </div>
         
         
         
        </div>
	      </div>      <div id="column2">

<div style="text-align:center; margin-left:auto; margin-right:auto;margin-top:5px; margin-bottom:5px;">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Algosome_AB_header_468_60 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:468px;height:60px"
     data-ad-client="ca-pub-1855470872648963"
     data-ad-slot="7437775136"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
      
 
      
      
      
      <h1>Line Numbers in Java Swing</h1>      <p><a href="index.php">Articles</a>&nbsp;&mdash;&gt;&nbsp;Line Numbers in Java Swing</p>
           <!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-annotation="inline" data-width="300"></div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
      <p>Drawing line numbers within a JComponent can often be a useful feature, be it for line number in a text component such as a JTextArea, or drawing the row numbers of a JTable. An easy method one may come up with is to modify the model - for instance change the text of a JTextArea or add a column in a JTable to show line numbers - there are ample demonstrations of accomplishing line numbers by affecting the model (see <a href="http://www.javaprogrammingforums.com/java-swing-tutorials/915-how-add-line-numbers-your-jtextarea.html">How To: Add Line Numbers</a> and <a href="http://stackoverflow.com/questions/6711877/jtable-use-row-numbers">Stack Overflow: JTable Line Numbers</a>). However affecting the model may not be the most ideal technique: affecting the model does not provide a general solution that can be reused, and further the model could be required by other features in the application (thus introducing the possible need to reverse the line numbering). Another approach could be to affect the view. This has been done with a JTextArea by <a href="http://tips4java.wordpress.com/2009/05/23/text-component-line-number/">Rob Camick</a>, however this is limited to a single component - a JTextArea. Below I pose an alternate method that is independent of the underlying component and relies on the utilization of a row header within a parent JScrollPane. </p>



<p>The JScrollPane allows for both header and row view components - that is components which are displayed above or to the left of the main scrollable Component. This feature can be quite useful when the necessity to draw metrics of the view is required, such as drawing line numbers. To draw the metrics (in this case line numbers), the row header requires access to the metrics of the underlying view, and to do so independent of the type of component it represents I created an interface that defines the line number model: </p>



<div class="code"><pre class="colorcode">

<span class="commons">import</span> java.awt.Rectangle;

<span class="comment">/**

 * A generic model interface which defines an underlying component with line numbers.

 * @author Greg Cope

 *

 */</span>

<span class="commons">public</span> <span class="primitive">int</span>erface LineNumberModel {



	<span class="comment">/**

	 * 

	 * @return

	 */</span>

	<span class="commons"><span class="commons">public</span></span> <span class="primitive">int</span> getNumberLines();

	

	<span class="comment">/**

	 * Returns a Rectangle defining the location in the view of the parameter line. Only the y and height fields are required by callers.

	 * @param line

	 * @return A Rectangle defining the view coordinates of the line.

	 */</span>

	<span class="commons"><span class="commons">public</span></span> Rectangle getLineRect(<span class="primitive">int</span> line);



}

</pre></div>

<p></p>



<div style="float:left; margin:8px">

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Algosome-content-336-280 -->

<ins class="adsbygoogle"

     style="display:inline-block;width:336px;height:280px"

     data-ad-client="ca-pub-1855470872648963"

     data-ad-slot="7548647937"></ins>

<script>

(adsbygoogle = window.adsbygoogle || []).push({});

</script>

</div>

<p>The above interface defines two methods:</p>

<ol>

<li><b>getNumberLines</b> - this method returns how many total lines the underlying model contains, allowing the caller to iterate over each line.</li>

<li><b>getLineRect</b>: this method returns a rectangle defining the location in the view the parameter line is located. The caller (below) is only interested in the y and height fields of the Rectangle.</li>

</ol>



<p>Based upon just these two methods, a caller (below) can draw the line numbers as needed:</p>



<div class="code"><pre class="colorcode"><span class="commons">import</span> java.awt.Component;

<span class="commons">import</span> java.awt.Dimension;

<span class="commons">import</span> java.awt.Graphics;

<span class="commons">import</span> java.awt.Graphics2D;

<span class="commons">import</span> java.awt.Rectangle;

<span class="commons">import</span> java.awt.RenderingH<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>s;



<span class="commons">import</span> javax.swing.JComponent;

<span class="commons">import</span> javax.swing.JScrollPane;

<span class="commons">import</span> javax.swing.JViewport;



<span class="comment">/**

 * JComponent used to draw line numbers. This JComponent should be added as a row header view in a JScrollPane. Based upon the 

 * LineNumberModel provided, this component will draw the line numbers as needed.

 * @author Greg Cope

 *

 */</span>

<span class="commons">public</span> class LineNumberComponent <span class="commons">extends</span> JComponent{

	

	<span class="commons">static</span> <span class="commons">final</span> <span class="primitive">long</span> serialVersionUID = 432143214L;



	<span class="commons">public</span> <span class="commons">static</span> <span class="commons">final</span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> LEFT_ALIGNMENT = 0;

	<span class="commons">public</span> <span class="commons">static</span> <span class="commons">final</span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> RIGHT_ALIGNMENT = 1;

	<span class="commons">public</span> <span class="commons">static</span> <span class="commons">final</span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> CENTER_ALIGNMENT = 2;

	

	<span class="comment">//pixel padding on left and right</span>

	<span class="commons">private</span> <span class="commons">static</span> <span class="commons"><span class="commons">final</span></span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> HORIZONTAL_PADDING = 1;

	<span class="comment">//pixel padding on left and right</span>

	<span class="commons"><span class="commons">private</span></span> <span class="commons">static</span> <span class="commons">final</span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> VERTICAL_PADDING = 3;

	

	<span class="commons"><span class="commons">private</span></span> <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> alignment = LEFT_ALIGNMENT;

	

	<span class="commons"><span class="commons">private</span></span> LineNumberModel lineNumberModel;

	

	<span class="comment">/**

	 * Constructs a new Component with no model

	 */</span>

	<span class="commons">public</span> LineNumberComponent(){

		super();

	}

	

	<span class="comment">/**

	 * Constructs a new Component based upon the parameter model

	 * @param model

	 */</span>

	<span class="commons">public</span> LineNumberComponent(LineNumberModel model){

		<span class="commons">this</span>();

		setLineNumberModel(model);

	}

	

	<span class="comment">/**

	 * Sets the LineNumberModel

	 * @param model

	 */</span>

	<span class="commons">public</span> void setLineNumberModel(LineNumberModel model){

		lineNumberModel = model;

		<span class="commons">if</span> ( model != <span class="nulls">null</span> ){

		    adjustWidth();

		}

		repa<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>();

	}

	

	<span class="comment">/**

	 * Checks and adjusts the width of this component based upon the line numbers

	 */</span>

	<span class="commons">public</span> void adjustWidth(){

		<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> max = lineNumberModel.getNumberLines();

		<span class="commons"><span class="commons">if</span></span> ( getGraphics() == <span class="nulls">null</span> ){

			return;

		}

		<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> width = getGraphics().getFontMetrics().stringWidth(String.valueOf(max)) + 2 * HORIZONTAL_PADDING;

		JComponent c = (JComponent)getParent();

		<span class="commons"><span class="commons">if</span></span> (c == null){<span class="comment">//not within a container</span>

			return;

		}

		Dimension dimension = c.getPreferredSize();

		<span class="commons">if</span> ( c instanceof JViewport ){<span class="comment">//do some climbing up the component tree to get the main JScrollPane view</span>

			JViewport view = (JViewport)c;

			Component parent = view.getParent();

			<span class="commons"><span class="commons">if</span></span> ( parent != <span class="nulls">null</span> && parent instanceof JScrollPane){

				JScrollPane scroller = (JScrollPane)view.getParent();

				dimension = scroller.getViewport().getView().getPreferredSize();

			}			

		}

		<span class="commons"><span class="commons">if</span></span> ( width > getPreferredSize().width || width < getPreferredSize().width){

			setPreferredSize(<span class="commons">new</span> Dimension(width + 2*HORIZONTAL_PADDING, dimension.height));

			revalidate();

			repa<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>();

		}

	}

	

	<span class="comment">/**

	 * Sets how the numbers will be aligned. 

	 * @param alignment One of RIGHT_ALIGNMENT, LEFT_ALIGNMENT, or CENTER_ALIGNMENT

	 * @throws IllegalArgumentException

	 */</span>

	<span class="commons">public</span> void setAlignment(<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> alignment) <span class="commons">throw</span>s IllegalArgumentException{

		<span class="commons">if</span> ( alignment < 0 || alignment > 2 ){

			<span class="commons">throw</span> <span class="commons"><span class="commons">new</span></span> IllegalArgumentException(<span class="stringcontents">"Invalid alignment option"</span>);

		}

		this.alignment = alignment;

	}

	

	@Override

	<span class="commons">public</span> void pa<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>Component(Graphics g){

		super.pa<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>Component(g);

		<span class="commons">if</span> ( lineNumberModel == <span class="nulls">null</span> ){

			return;

		}

		Graphics2D g2d = (Graphics2D)g;

		g2d.setRenderingH<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>(RenderingH<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>s.KEY_ANTIALIASING, RenderingH<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span>s.VALUE_ANTIALIAS_ON);

		g.setColor(getBackground());

		g2d.fillRect(0, 0, getWidth(), getHeight());

		g.setColor(getForeground());

		<span class="comment">//iterate over all lines to draw the line numbers.</span>

		<span class="commons">for</span> ( <span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> i = 0; i < lineNumberModel.getNumberLines(); i++ ){

			Rectangle rect = lineNumberModel.getLineRect(i);

			String text = String.valueOf(i + 1);

			<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> yPosition = rect.y + rect.height - VERTICAL_PADDING;

			<span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive"><span class="primitive">int</span></span></span></span></span></span></span></span></span></span></span> xPosition = HORIZONTAL_PADDING;<span class="comment">//default to left alignment</span>

			switch (alignment){

			case RIGHT_ALIGNMENT:

				xPosition = getPreferredSize().width - g.getFontMetrics().stringWidth(text) - HORIZONTAL_PADDING;

				break;

			case CENTER_ALIGNMENT:

				xPosition = getPreferredSize().width/2 - g.getFontMetrics().stringWidth(text)/2;

				break;	

			default:<span class="comment">//left alignment, do nothing</span>

				break;

			}

			g2d.drawString(String.valueOf(i+1), xPosition, yPosition);

		}

		

	}

	

}

</pre></div>

<p></p>

<div class="object_center">

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- AlgosomeLink_468_15 -->

<ins class="adsbygoogle"

     style="display:inline-block;width:468px;height:15px"

     data-ad-client="ca-pub-1855470872648963"

     data-ad-slot="5468518736"></ins>

<script>

(adsbygoogle = window.adsbygoogle || []).push({});

</script>

</div>



<p>The above class utilizes the LineNumberModel interface to draw line numbers as needed. It utilizes the paintComponet method to draw the line numbers based upon the model, and has the flexibility to align the numbers to the left, the right, or in the center. Given it extends JComponent, its font and colors can also be set in the situation where customization is needed. </p>



<p>To see the LineNumberModel and LineNumberComponent in action, below is an <a href="http://www.sscce.org">SSCCE</a> showing how this framework can be utilized to create line numbers in a JTextArea. </p>

<div class="code"><pre class="colorcode">

<span class="commons">import</span> java.awt.Rectangle;

<span class="commons">import</span> javax.swing.JFrame;

<span class="commons">import</span> javax.swing.JScrollPane;

<span class="commons">import</span> javax.swing.JTextArea;

<span class="commons">import</span> javax.swing.SwingUtilities;

<span class="commons">import</span> javax.swing.event.DocumentEvent;

<span class="commons">import</span> javax.swing.event.DocumentListener;

<span class="commons">import</span> javax.swing.text.BadLocationException;

<span class="comment">/**

 * Demonstration of the line numbering framework in a JTextArea

 * @author Greg Cope

 *

 */</span>

<span class="commons">public</span> class LineNumberTest {

		

	<span class="commons">private</span> JTextArea textArea = <span class="commons">new</span> JTextArea();

	

	<span class="commons">private</span> LineNumberModelImpl lineNumberModel = <span class="commons">new</span> LineNumberModelImpl();

	

	<span class="commons">private</span> LineNumberComponent lineNumberComponent = <span class="commons">new</span> LineNumberComponent(lineNumberModel);

	

	<span class="commons">public</span> LineNumberTest(){

		JFrame frame = <span class="commons">new</span> JFrame();

		JScrollPane scroller = <span class="commons">new</span> JScrollPane(textArea);

		scroller.setRowHeaderView(lineNumberComponent);

		frame.getContentPane().add(scroller);

		lineNumberComponent.setAlignment(LineNumberComponent.CENTER_ALIGNMENT);

		frame.pack();

		frame.setSize(200,200);

		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

		textArea.getDocument().addDocumentListener(<span class="commons">new</span> DocumentListener(){



			@Override

			<span class="commons">public</span> void changedUpdate(DocumentEvent arg0) {

				

				lineNumberComponent.adjustWidth();

			}



			@Override

			<span class="commons">public</span> void insertUpdate(DocumentEvent arg0) {

				lineNumberComponent.adjustWidth();

			}



			@Override

			<span class="commons">public</span> void removeUpdate(DocumentEvent arg0) {

				lineNumberComponent.adjustWidth();

			}

			

		});

		textArea.setText(<span class="stringcontents">"This is a demonstration of...\n...line numbering using a JText area within...\n...a JScrollPane"</span>);

		frame.setVisible(true);

	}



	

	

	<span class="commons">private</span> class LineNumberModelImpl <span class="commons">implements</span> LineNumberModel{



		@Override

		<span class="commons">public</span> <span class="primitive">int</span> getNumberLines() {

			<span class="commons">return</span> textArea.getLineCount();

		}



		@Override

		<span class="commons">public</span> Rectangle getLineRect(<span class="primitive">int</span> line) {

			try{

				<span class="commons"><span class="commons">return</span></span> textArea.modelToView(textArea.getLineStartOffset(line));

			}catch(BadLocationException e){

				e.pr<span class="primitive">int</span>StackTrace();

				<span class="commons"><span class="commons">return</span></span> <span class="commons"><span class="commons">new</span></span> Rectangle();

			}

		}

	}

	

	<span class="commons">public</span> <span class="commons">static</span> void main(String[] args) <span class="commons">throws</span> Exception{

		SwingUtilities.invokeAndWait(<span class="commons"><span class="commons">new</span></span> Runnable(){



			@Override

			<span class="commons">public</span> void run() {

				<span class="commons"><span class="commons">new</span></span> LineNumberTest();

			}

			

		});

	}

}

</pre></div>

<p></p>

<div class="object_center">

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- AlgosomeLink_468_15 -->

<ins class="adsbygoogle"

     style="display:inline-block;width:468px;height:15px"

     data-ad-client="ca-pub-1855470872648963"

     data-ad-slot="5468518736"></ins>

<script>

(adsbygoogle = window.adsbygoogle || []).push({});

</script>

</div>

<p>The above class creates a simple JFrame containing a JTextArea within a JScrollPane - an instance of a LineNumberComponent is used in the row header of the JScrollPane, and a DocumentListener used to update the view of the line numbers based upon changes within the document. The result is a JTextArea with line numbers - a similar example could be made for a JTable, JList, JTree, or any other component provided it is contained with a JScrollPane. The results: </p>



<div class="object_center">

<img src="images/line-numbers-jtextarea.png" alt="Line Numbering in a JTextArea" />

<p style="font-size:9px">Line numbers in a JTextArea</p>

</div>



<p>One could extend the framework above to draw different metrics for each line, for instance the number of characters up to that location, a multiple of said line, or a variety of other options that could be necessary. </p>



<ul>

<li><a href="http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html">JScrollPane API</a></li>

</ul>            

<br /><hr /><br />

      <div><form action="add-comment.php" method="post"><div><input type="hidden" name="article" value="line-numbers-java-jtextarea-jtable" /></div><div><input type="submit" value="Add Comment" /></div></form></div>      
      <h4>Comments</h4><ul><li>cpc cpc&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;November, 29, 2013</p><p>It's work for JtextArea but not for JtextPane.
</p><p>:(</p></li><li>Greg Cope&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;November, 29, 2013</p><p>What doesn't work about it? A JTextPane does not have the utility methods that JTextArea has (getLineCount(), getLineStartOffset()), so the above won't compile with a simple switch to JTextPane. As a result, one must find alternatives for these methods so the LineNumberModel interface can be implemented properly (a JTextPane allows attributes which, if used, can make this non-trivial). That being said, when the LineNumberModel interface is implemented properly the line numbers will show. If not, then post an <a href="http://www.sscce.org/?">SSCCE</a>. </p></li></ul>      
      <p><a href="index.php">Back to Articles</a></p>
      </div>
    </div>
      <div id="footer"><a href="/privacy-policy.html">Privacy policy</a> | <a href="/copyright.html">Copyright</a> | <a href="/links.html">Links</a> | <a href="/site-map.html">Sitemap</a></div>
</div>

<div style="font-size: 0.8em; text-align: center;">
<br />
&copy; 2008-2013 Greg Cope<br />
<br />
</div>
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42510997-1', 'algosome.com');
  ga('send', 'pageview');

</script>
</body>
</html>





