








<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
    <title>Manning Forums: Chapter 8 Servicemix transaction ...</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="style.jsp">

    
    <script language="JavaScript" type="text/javascript" src="/scripts/global.js"></script>

    
    <link rel="alternate" type="application/rss+xml" title="RSS"
         href="http://www.manning-sandbox.com/rss/rssmessages.jspa?threadID=27764">
</head>
<body>


    <table border="0" width="100%"><tr>
<td align="left">
<div align="center"><a href="http://www.manning.com"><img src="/images/manning/logo.gif" border="0"/></a></div>
<td>
	<td align="right" width="320">
<div style="position: relative; border: 2px solid #DDDDDD; font-family: Arial,Helvetica,sans-serif; text-align: center; display:block; background: #DDDDDD; margin: 0px 5px 0px 5px; color: #ffffff; padding: 2px; font-weight: bold;"> 
	<div style="color: #B51A13;text-align: center;background-color: #DDDDDD; padding: 4px; font-size: 11px;">Deal of the Day</div>
 	<div style="color: #000000;text-align: center;padding: 2px 1px 0px 1px; font-size: 11px;background-color: #ffffff;">
		<script language="JavaScript" src="http://incsrc.manningpublications.com/dotd.js" type="text/javascript"></script>
		<br><br><span style="font-size: 10px;"><a href="http://www.manning.com/free/dotd.html">Get the Deal of the Day email alert</a></span>
	</div>
</div>
	<td>
</tr>
</table>



<br>


<div id="jive-flatpage">

<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr valign="top">
    <td width="99%">

        










<p class="jive-breadcrumbs">


    

        
        <a href="http://www.manning.com"
         >Home</a>
        &raquo;

    



    <a href="index.jspa">Main</a> &raquo;







<a href="forumindex.jspa?categoryID=1">Manning Forums</a>



    
        &raquo;
        <a href="category.jspa?categoryID=41">2007</a>
    

    
        &raquo;
        <a href="forum.jspa?forumID=353&start=0">Open Source ESBs in Action</a>




</p>



        <p class="jive-page-title">
        Thread: Chapter 8 Servicemix transaction definately not working
        </p>

        
        

        
        

    </td>
    <td width="1%">

        







    

    <div class="jive-accountbox">
    <table cellpadding="0" cellspacing="0" border="0" width="100%" summary="Jive Forums Accountbox">

    

        <thead>
            <tr>
                <th colspan="2">
                    <table cellpadding="0" cellspacing="0" border="0" width="100%">
                    <tr>
                        <th width="99%" style="border-width:0px;">
                            
                            Welcome, Guest
                        </th>
                        <th width="1%" style="border-width:0px;">
                            <a href="help.jspa"><img src="images/help-16x16.gif" width="16" height="16" border="0" alt="Help"></a>
                        </th>
                    </tr>
                    </table>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="1%" class="jive-icon"><a href="login!withRedirect.jspa"><img src="images/key-16x16.gif" width="16" height="16" border="0" alt="Login"></a></td>
                <td width="99%" class="jive-icon-label">
                    
                    <a href="login!withRedirect.jspa">Login / Register</a>
                </td>
            </tr>
            <tr>
                <td width="1%" class="jive-icon"><a href="guestsettings!default.jspa"><img src="images/preferences-16x16.gif" width="16" height="16" border="0" alt="Guest Settings"></a></td>
                <td width="99%" class="jive-icon-label">
                    
                    <a href="guestsettings!default.jspa">Guest Settings</a>
                </td>
            </tr>
        </tbody>

    

    </table>
    </div>



    </td>
</tr>
</table>







    







 










    

    <div class="jive-buttons">
    <table summary="Buttons" cellpadding="0" cellspacing="0" border="0">
    <tr>
        
                <td class="jive-icon">
                    <a href="post!reply.jspa?threadID=27764"
                     ><img src="images/reply-16x16.gif" width="16" height="16" border="0" alt="Reply to this Thread"></a></td>
                <td class="jive-icon-label">
                    
                    <a id="jive-reply-thread" href="post!reply.jspa?threadID=27764"
                     >Reply to this Thread</a>
                </td>
        
                <td class="jive-icon">
                    <a href="search!default.jspa?objID=f353"
                     ><img src="images/search-16x16.gif" width="16" height="16" border="0" alt="Search Forum"></a></td>
                <td class="jive-icon-label">
                    
                    <a href="search!default.jspa?objID=f353"
                     >Search Forum</a>
                </td>
        

        

        

        

        

        <td class="jive-icon">
            <a href="forum.jspa?forumID=353"
             ><img src="images/arrow-left-16x16.gif" width="16" height="16" border="0" alt="Back to Thread List"></a>
        </td>
        <td class="jive-icon-label">
            
            <a href="forum.jspa?forumID=353"
             >Back to Thread List</a>
        </td>

    </tr>
    </table>
    </div>



<br>

<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tbody>
    <tr valign="top">
        <td width="99%">

        
        



<div class="jive-message-list">
<div class="jive-table">
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<thead>
    <tr>
        <th class="jive-first-last">
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
            <thead>
                <tr>
                    <th width="1%">
                        <a href="thread.jspa?threadID=27764"
                         title="Permlink"
                         ><img src="images/permlink-16x16.gif" width="16" height="16" border="0" alt="Permlink"></a>
                    </th>
                    <th width="97%">

                        
                        <nobr>
                        Replies:
                        1
                        </nobr>

                        
                            -
                            

                                
                                <nobr>
                                Pages:
                                1

                                
                                </nobr>

                            

                        

                        
                        
                                -
                                <nobr>
                                <a href="thread.jspa?threadID=27764&tstart=0&messageID=78989#78989"
                                 title="by: tijs.rademakers"
                                 >Last Post</a>:
                                Dec 19, 2008 12:38 PM
                                by: tijs.rademakers
                                </nobr>

                        

                    </th>
                    <th width="1%" nowrap>
                        
                            
                        
                    </th>
                </tr>
            </thead>
            </table>
        </th>
    </tr>
</thead>
</table>
</div>
</div>

        <div id="jive-message-holder">
        

            <div class="jive-message-list">
            <div class="jive-table">

            








    

    <div class="jive-messagebox">
    <table summary="Message" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr valign="top" class="jive-even">
        <td width="1%" class="jive-first">
            <table cellpadding="0" cellspacing="0" border="0" width="150">
            <tr>
                <td>
                    

                        <table cellpadding="0" cellspacing="0" border="0" width="100%">
                        <tbody>
                            <tr valign="top">
                                <td width="1%" style="padding:0px;">
                                    <nobr>
                                    <a href="profile.jspa?userID=20139"
                                     title="Don Stadler"
                                     >Don Stadler</a>
                                    </nobr>
                                </td>
                                <td width="99%" style="padding:0px;">
                                    
                                        <img class="jive-status-level-image" src="images/status/01-bronze.gif" border="0" title="Bronze" alt="" /><br>

                                    
                                </td>
                            </tr>
                        </tbody>
                        </table>

                        

                            

                            

                        

                        <br>

                        <span class="jive-description">

                        
                        Posts:
                        74
                        <br>
                        
                            
                            From:
                            London<br>
                        

                        
                        
                            Registered:
                            11/27/08
                        

                        </span>

                    
                </td>
            </tr>
            </table>
        </td>
        <td width="99%" class="jive-last">
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr valign="top">
                <td width="1%">
                    
                </td>
                <td width="98%">

                    <span class="jive-subject">
                    <a name="78858"></a>
                    Chapter 8 Servicemix transaction definately not working
                    </span>

                    <br>

                    
                    <span class="jive-description">
                    Posted:
                    Dec 15, 2008 9:15 PM

                    
                    </span>
                </td>
                <td width="1%">

                    <div class="jive-buttons">
                    <table cellpadding="0" cellspacing="0" border="0">
                    <tr>
                        

                        

                        
                        

                            <td>&nbsp;</td>
                            <td class="jive-icon">
                                <a href="post!reply.jspa?messageID=78858" title="Click to reply to this thread"
                                 ><img src="images/reply-16x16.gif" width="16" height="16" border="0" alt="Click to reply to this thread"></a>
                            </td>
                            <td class="jive-icon-label">
                                <a href="post!reply.jspa?messageID=78858"
                                 title="Click to reply to this thread"
                                 >Reply</a>
                            </td>

                        
                    </tr>
                    </table>
                    </div>

                </td>
            </tr>
            
            <tr>
                <td colspan="3" style="border-top: 1px #ccc solid;">
                    <br>
                    Tjis,<br><br>I deployed using the deploy-transaction target, and it seemed to create a directory, did some mucking about in the created directory, then deleted the directory without doing anything further, like putting files into the servicemix lib directory as promised. <br><br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8&gt;an<br>t -f ch8-examples.xml deploy-transaction<br>Buildfile: ch8-examples.xml<br><br>init:<br><br>gn:init:<br>     [echo] ServiceMix home is set to C:\osesbinaction\esb\apache-servicemix-3.2<br>.1.<br>     [echo] Workspace home is set to C:\osesbinaction\workspace\workspace-servic<br>emix\servicemix.<br><br>deploy-transaction:<br>     [echo] Creating transaction jar<br>    [mkdir] Created dir: C:\osesbinaction\esb\apache-servicemix-3.2.1\unzipped-c<br>omponents<br>    [unzip] Expanding: C:\osesbinaction\esb\apache-servicemix-3.2.1\hotdeploy\se<br>rvicemix-bean-3.2.1-installer.zip into C:\osesbinaction\esb\apache-servicemix-3.<br>2.1\unzipped-components<br>    [unzip] Expanding: C:\osesbinaction\esb\apache-servicemix-3.2.1\hotdeploy\se<br>rvicemix-jms-3.2.1-installer.zip into C:\osesbinaction\esb\apache-servicemix-3.2<br>.1\unzipped-components<br>    [unzip] Expanding: C:\osesbinaction\esb\apache-servicemix-3.2.1\hotdeploy\se<br>rvicemix-shared-3.2.1-installer.zip into C:\osesbinaction\esb\apache-servicemix-<br>3.2.1\unzipped-components<br>   [delete] Deleting directory C:\osesbinaction\esb\apache-servicemix-3.2.1\unzi<br>pped-components<br><br>BUILD SUCCESSFUL<br><br>So I ran the servicemix.bat servicemix\servicemix.xml command and it failed massively:<br><br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;%SERVICEMIX_HOME%\bin\servicemix.bat servicemix\servicemix.xml<br>servicemix.bat: Ignoring predefined value for SERVICEMIX_HOME<br>Starting Apache ServiceMix ESB: 3.2.1<br><br>Loading Apache ServiceMix from file: servicemix\servicemix.xml<br>Exception in thread "JMX connector" org.springframework.beans.factory.NoSuchBean<br>DefinitionException: No bean named 'broker' is defined<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>getBeanDefinition(DefaultListableBeanFactory.java:356)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getMerg<br>edBeanDefinition(AbstractBeanFactory.java:916)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:243)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.apache.xbean.spring.jndi.SpringInitialContextFactory.getInitialCo<br>ntext(SpringInitialContextFactory.java:83)<br>        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:6<br>67)<br>        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288<br>)<br>        at javax.naming.InitialContext.init(InitialContext.java:223)<br>        at javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:197)<br>        at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServe<br>r.java:619)<br>        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServ<br>er.java:412)<br>        at org.apache.activemq.broker.jmx.ManagementContext$1.run(ManagementCont<br>ext.java:90)<br>ERROR - BrokerService                  - Failed to start ActiveMQ JMS Message Br<br>oker. Reason: java.io.IOException: Transport Connector could not be registered i<br>n JMX: Failed to bind to server socket: tcp://localhost:61616 due to: java.net.B<br>indException: Address already in use: JVM_Bind<br>java.io.IOException: Transport Connector could not be registered in JMX: Failed<br>to bind to server socket: tcp://localhost:61616 due to: java.net.BindException:<br>Address already in use: JVM_Bind<br>        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport<br>.java:25)<br>        at org.apache.activemq.broker.BrokerService.registerConnectorMBean(Broke<br>rService.java:1079)<br>        at org.apache.activemq.broker.BrokerService.startTransportConnector(Brok<br>erService.java:1517)<br>        at org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerSer<br>vice.java:1471)<br>        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:402<br>)<br>        at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBean<br>BrokerService.java:47)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1201)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1171)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:425)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>preInstantiateSingletons(DefaultListableBeanFactory.java:287)<br>        at org.springframework.context.support.AbstractApplicationContext.refres<br>h(AbstractApplicationContext.java:352)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:149)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:100)<br>        at org.apache.servicemix.Main.main(Main.java:67)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.<br>java:39)<br>        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces<br>sorImpl.java:25)<br>        at java.lang.reflect.Method.invoke(Method.java:597)<br>        at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:410)<br>        at org.codehaus.classworlds.Launcher.launch(Launcher.java:344)<br>        at org.codehaus.classworlds.Launcher.main(Launcher.java:461)<br>Caused by: java.io.IOException: Failed to bind to server socket: tcp://localhost<br>:61616 due to: java.net.BindException: Address already in use: JVM_Bind<br>        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport<br>.java:31)<br>        at org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTranspor<br>tServer.java:88)<br>        at org.apache.activemq.transport.tcp.TcpTransportFactory.doBind(TcpTrans<br>portFactory.java:56)<br>        at org.apache.activemq.transport.TransportFactory.bind(TransportFactory.<br>java:109)<br>        at org.apache.activemq.broker.TransportConnector.createTransportServer(T<br>ransportConnector.java:270)<br>        at org.apache.activemq.broker.TransportConnector.getServer(TransportConn<br>ector.java:122)<br>        at org.apache.activemq.broker.TransportConnector.asManagedConnector(Tran<br>sportConnector.java:100)<br>        at org.apache.activemq.broker.BrokerService.registerConnectorMBean(Broke<br>rService.java:1072)<br>        ... 28 more<br>Caused by: java.net.BindException: Address already in use: JVM_Bind<br>        at java.net.PlainSocketImpl.socketBind(Native Method)<br>        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)<br>        at java.net.ServerSocket.bind(ServerSocket.java:319)<br>        at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:185)<br>        at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:141)<br>        at javax.net.DefaultServerSocketFactory.createServerSocket(ServerSocketF<br>actory.java:163)<br>        at org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTranspor<br>tServer.java:80)<br>        ... 34 more<br>Caught: org.springframework.beans.factory.BeanCreationException: Error creating<br>bean with name 'broker' defined in file [C:\osesbinaction\workspace\workspace-se<br>rvicemix\servicemix\resources\chapter8\transaction-single\servicemix\servicemix.<br>xml]: Invocation of init method failed; nested exception is java.io.IOException:<br> Transport Connector could not be registered in JMX: Failed to bind to server so<br>cket: tcp://localhost:61616 due to: java.net.BindException: Address already in u<br>se: JVM_Bind<br>org.springframework.beans.factory.BeanCreationException: Error creating bean wit<br>h name 'broker' defined in file [C:\osesbinaction\workspace\workspace-servicemix<br>\servicemix\resources\chapter8\transaction-single\servicemix\servicemix.xml]: In<br>vocation of init method failed; nested exception is java.io.IOException: Transpo<br>rt Connector could not be registered in JMX: Failed to bind to server socket: tc<br>p://localhost:61616 due to: java.net.BindException: Address already in use: JVM_<br>Bind<br>Caused by: java.io.IOException: Transport Connector could not be registered in J<br>MX: Failed to bind to server socket: tcp://localhost:61616 due to: java.net.Bind<br>Exception: Address already in use: JVM_Bind<br>        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport<br>.java:25)<br>        at org.apache.activemq.broker.BrokerService.registerConnectorMBean(Broke<br>rService.java:1079)<br>        at org.apache.activemq.broker.BrokerService.startTransportConnector(Brok<br>erService.java:1517)<br>        at org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerSer<br>vice.java:1471)<br>        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:402<br>)<br>        at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBean<br>BrokerService.java:47)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1201)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1171)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:425)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>preInstantiateSingletons(DefaultListableBeanFactory.java:287)<br>        at org.springframework.context.support.AbstractApplicationContext.refres<br>h(AbstractApplicationContext.java:352)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:149)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:100)<br>        at org.apache.servicemix.Main.main(Main.java:67)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.<br>java:39)<br>        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces<br>sorImpl.java:25)<br>        at java.lang.reflect.Method.invoke(Method.java:597)<br>        at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:410)<br>        at org.codehaus.classworlds.Launcher.launch(Launcher.java:344)<br>        at org.codehaus.classworlds.Launcher.main(Launcher.java:461)<br>Caused by: java.io.IOException: Failed to bind to server socket: tcp://localhost<br>:61616 due to: java.net.BindException: Address already in use: JVM_Bind<br>        at org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport<br>.java:31)<br>        at org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTranspor<br>tServer.java:88)<br>        at org.apache.activemq.transport.tcp.TcpTransportFactory.doBind(TcpTrans<br>portFactory.java:56)<br>        at org.apache.activemq.transport.TransportFactory.bind(TransportFactory.<br>java:109)<br>        at org.apache.activemq.broker.TransportConnector.createTransportServer(T<br>ransportConnector.java:270)<br>        at org.apache.activemq.broker.TransportConnector.getServer(TransportConn<br>ector.java:122)<br>        at org.apache.activemq.broker.TransportConnector.asManagedConnector(Tran<br>sportConnector.java:100)<br>        at org.apache.activemq.broker.BrokerService.registerConnectorMBean(Broke<br>rService.java:1072)<br>        ... 28 more<br>Caused by: java.net.BindException: Address already in use: JVM_Bind<br>        at java.net.PlainSocketImpl.socketBind(Native Method)<br>        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:359)<br>        at java.net.ServerSocket.bind(ServerSocket.java:319)<br>        at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:185)<br>        at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:141)<br>        at javax.net.DefaultServerSocketFactory.createServerSocket(ServerSocketF<br>actory.java:163)<br>        at org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTranspor<br>tServer.java:80)<br>        ... 34 more<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;%SERVICEMIX_HOME%\bin\servicemix.bat servicemix\servicemix.xml<br>servicemix.bat: Ignoring predefined value for SERVICEMIX_HOME<br>Starting Apache ServiceMix ESB: 3.2.1<br><br>Loading Apache ServiceMix from file: servicemix\servicemix.xml<br>Exception in thread "JMX connector" org.springframework.beans.factory.NoSuchBean<br>DefinitionException: No bean named 'broker' is defined<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>getBeanDefinition(DefaultListableBeanFactory.java:356)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getMerg<br>edBeanDefinition(AbstractBeanFactory.java:916)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:243)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.apache.xbean.spring.jndi.SpringInitialContextFactory.getInitialCo<br>ntext(SpringInitialContextFactory.java:83)<br>        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:6<br>67)<br>        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288<br>)<br>        at javax.naming.InitialContext.init(InitialContext.java:223)<br>        at javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:197)<br>        at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServe<br>r.java:619)<br>        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServ<br>er.java:412)<br>        at org.apache.activemq.broker.jmx.ManagementContext$1.run(ManagementCont<br>ext.java:90)<br>ERROR - BrokerService                  - Failed to start ActiveMQ JMS Message Br<br>oker. Reason: java.io.IOException: closed<br>java.io.IOException: closed<br>        at org.apache.activemq.store.journal.JournalPersistenceAdapter.writeComm<br>and(JournalPersistenceAdapter.java:597)<br>        at org.apache.activemq.store.journal.JournalPersistenceAdapter.writeTrac<br>eMessage(JournalPersistenceAdapter.java:603)<br>        at org.apache.activemq.store.journal.JournalPersistenceAdapter.recover(J<br>ournalPersistenceAdapter.java:565)<br>        at org.apache.activemq.store.journal.JournalPersistenceAdapter.start(Jou<br>rnalPersistenceAdapter.java:225)<br>        at org.apache.activemq.broker.BrokerService.createRegionBroker(BrokerSer<br>vice.java:1251)<br>        at org.apache.activemq.broker.BrokerService.createBroker(BrokerService.j<br>ava:1209)<br>        at org.apache.activemq.broker.BrokerService.getBroker(BrokerService.java<br>:508)<br>        at org.apache.activemq.broker.BrokerService.start(BrokerService.java:394<br>)<br>        at org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBean<br>BrokerService.java:47)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1201)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1171)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:425)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>preInstantiateSingletons(DefaultListableBeanFactory.java:287)<br>        at org.springframework.context.support.AbstractApplicationContext.refres<br>h(AbstractApplicationContext.java:352)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:149)<br>        at org.apache.xbean.spring.context.FileSystemXmlApplicationContext.&lt;init<br>&gt;(FileSystemXmlApplicationContext.java:100)<br>        at org.apache.servicemix.Main.main(Main.java:67)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.<br>java:39)<br>        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces<br>sorImpl.java:25)<br>        at java.lang.reflect.Method.invoke(Method.java:597)<br>        at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:410)<br>        at org.codehaus.classworlds.Launcher.launch(Launcher.java:344)<br>        at org.codehaus.classworlds.Launcher.main(Launcher.java:461)<br>Terminate batch job (Y/N)?<br>^CC:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\<br>transaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;<br>C:\osesbinaction\workspace\workspace-servicemix\servicemix\resources\chapter8\tr<br>ansaction-single&gt;%SERVICEMIX_HOME%\bin\servicemix.bat servicemix\servicemix.xml<br>servicemix.bat: Ignoring predefined value for SERVICEMIX_HOME<br>Starting Apache ServiceMix ESB: 3.2.1<br><br>Loading Apache ServiceMix from file: servicemix\servicemix.xml<br>Exception in thread "JMX connector" org.springframework.beans.factory.NoSuchBean<br>DefinitionException: No bean named 'broker' is defined<br>        at org.springframework.beans.factory.support.DefaultListableBeanFactory.<br>getBeanDefinition(DefaultListableBeanFactory.java:356)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getMerg<br>edBeanDefinition(AbstractBeanFactory.java:916)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:243)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.springframework.beans.factory.support.AbstractAutowireCapableBean<br>Factory.createBean(AbstractAutowireCapableBeanFactory.java:337)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb<br>ject(AbstractBeanFactory.java:251)<br>        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr<br>y.getSingleton(DefaultSingletonBeanRegistry.java:156)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:248)<br>        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean<br>(AbstractBeanFactory.java:160)<br>        at org.apache.xbean.spring.jndi.SpringInitialContextFactory.getInitialCo<br>ntext(SpringInitialContextFactory.java:83)<br>        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:6<br>67)<br>        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288<br>)<br>        at javax.naming.InitialContext.init(InitialContext.java:223)<br>        at javax.naming.InitialContext.&lt;init&gt;(InitialContext.java:197)<br>        at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServe<br>r.java:619)<br>        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServ<br>er.java:412)<br>        at org.apache.activemq.broker.jmx.ManagementContext$1.run(ManagementCont<br>ext.java:90)<br>INFO  - JBIContainer                   - ServiceMix 3.2.1 JBI Container (Service<br>Mix) is starting<br>INFO  - JBIContainer                   - For help or more informations please se<br>e: <a href="http://incubator.apache.org/servicemix/">http://incubator.apache.org/servicemix/</a><br>WARN  - ManagementContext              - Failed to start rmi registry: internal<br>error: ObjID already in use<br>INFO  - ConnectorServerFactoryBean     - JMX connector available at: service:jmx<br>:rmi:///jndi/rmi://localhost:1099/jmxrmi<br>INFO  - ComponentMBeanImpl             - Initializing component: #SubscriptionMa<br>nager#<br>INFO  - DeploymentService              - Restoring service assemblies<br>INFO  - ComponentMBeanImpl             - Initializing component: servicemix-jms<br>INFO  - ComponentMBeanImpl             - Initializing component: servicemix-bean<br><br>INFO  - JBIContainer                   - ServiceMix JBI Container (ServiceMix) s<br>tarted
                    <br><br>
                </td>
            </tr>
            </table>
        </td>
    </tr>
    </table>
    </div>



            </div>
            </div>

        

            <div class="jive-message-list">
            <div class="jive-table">

            








    

    <div class="jive-messagebox">
    <table summary="Message" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr valign="top" class="jive-odd">
        <td width="1%" class="jive-first">
            <table cellpadding="0" cellspacing="0" border="0" width="150">
            <tr>
                <td>
                    

                        <table cellpadding="0" cellspacing="0" border="0" width="100%">
                        <tbody>
                            <tr valign="top">
                                <td width="1%" style="padding:0px;">
                                    <nobr>
                                    <a href="profile.jspa?userID=7102"
                                     title="tijs.rademakers"
                                     >tijs.rademakers</a>
                                    </nobr>
                                </td>
                                <td width="99%" style="padding:0px;">
                                    
                                        <img class="jive-status-level-image" src="images/status/author-16x16.gif" border="0" title="Manning Author" alt="" /><br>

                                    
                                </td>
                            </tr>
                        </tbody>
                        </table>

                        

                            

                            

                        

                        <br>

                        <span class="jive-description">

                        
                        Posts:
                        491
                        <br>
                        
                            
                            From:
                            Netherlands<br>
                        

                        
                        
                            Registered:
                            6/6/06
                        

                        </span>

                    
                </td>
            </tr>
            </table>
        </td>
        <td width="99%" class="jive-last">
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr valign="top">
                <td width="1%">
                    
                </td>
                <td width="98%">

                    <span class="jive-subject">
                    <a name="78989"></a>
                    Re: Chapter 8 Servicemix transaction definately not working
                    </span>

                    <br>

                    
                    <span class="jive-description">
                    Posted:
                    Dec 19, 2008 12:38 PM

                    
                        &nbsp;
                        <nobr>
                        <a href="message.jspa?messageID=78858#78858"
                         title="Go to message"
                         ><img src="images/up-10x10.gif" width="10" height="10" border="0" alt="in response to: Don Stadler"></a>
                        
                        in response to: 
                                <a href="message.jspa?messageID=78858#78858"
                                 title="Go to message"
                                 >Don Stadler</a>
                            
                        <nobr>
                    
                    </span>
                </td>
                <td width="1%">

                    <div class="jive-buttons">
                    <table cellpadding="0" cellspacing="0" border="0">
                    <tr>
                        

                        

                        
                        

                            <td>&nbsp;</td>
                            <td class="jive-icon">
                                <a href="post!reply.jspa?messageID=78989" title="Click to reply to this thread"
                                 ><img src="images/reply-16x16.gif" width="16" height="16" border="0" alt="Click to reply to this thread"></a>
                            </td>
                            <td class="jive-icon-label">
                                <a href="post!reply.jspa?messageID=78989"
                                 title="Click to reply to this thread"
                                 >Reply</a>
                            </td>

                        
                    </tr>
                    </table>
                    </div>

                </td>
            </tr>
            
            <tr>
                <td colspan="3" style="border-top: 1px #ccc solid;">
                    <br>
                    Don,<br><br>Just tried the example succesfully myself and I had a detailed look at the exception stack trace mentioned in your post. The stacktrace seems to say, you are already running ActiveMQ on tcp://localhost:61616 so I can not start it twice on the same port. Could it be the case that ActiveMQ was already running? Note that ServiceMix does start with an exception about the broker, but this doesn't prevent the example to run succesfully. When started, drop a message in the servicemix.transaction.in queue like &lt;transaction&gt;started&lt;/transaction&gt; and you should see a logging message "transaction successfull". If you put another message on the queue the transaction is rollbacked and copied to the DLQ.servicemix.transaction.in queue.<br><br>Best regards,<br><br>Tijs
                    <br><br>
                </td>
            </tr>
            </table>
        </td>
    </tr>
    </table>
    </div>



            </div>
            </div>

        

        

        <div class="jive-message-list-footer">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
        <tbody>
            <tr>
                <td width="1%" nowrap>

                    <span class="jive-paginator-bottom">
                    

                                
                                <nobr>
                                Pages:
                                1

                                
                                </nobr>

                            
                    </span>

                </td>
                <td width="98%" align="center">
                    <table cellpadding="0" cellspacing="0" border="0">
                    <tr>
                        <td>
                            <a href="forum.jspa?forumID=353"
                             ><img src="images/arrow-left-16x16.gif" width="16" height="16" border="0" hspace="6" alt="Back to Thread List"></a>
                        </td>
                        <td>
                            
                            <a href="forum.jspa?forumID=353"
                             >Back to Thread List</a>

                        </td>
                    </tr>
                    </table>
                </td>
                <td width="1%" nowrap>

                    
                            
                        

                </td>
            </tr>
        </tbody>
        </table>
        </div>

        </td>
        <td width="1%">

            








    <div class="jive-portlet-box">
    <table cellpadding="0" cellspacing="0" border="0" width="200">
    <thead>
        <tr>
            <th colspan="2">
                <a href="help.jspa#questions"
                 ><img src="images/help-16x16.gif" width="16" height="16" border="0" align="right" alt="" /></a>
                Legend
            </th>
        </tr>
    </thead>

    

        <tbody class="jive-status-legend-points">

            
                <tr>
                    <td width="1%">
                        <img src="images/status/05-gold.gif" border="0" title="Gold" alt="" />
                    </td>
                    <td width="99%">

                        Gold: 300

                        

                            +

                        

                        pts
                    </td>
                </tr>

            
                <tr>
                    <td width="1%">
                        <img src="images/status/03-silver.gif" border="0" title="Silver" alt="" />
                    </td>
                    <td width="99%">

                        Silver: 100

                        

                            - 299

                        

                        pts
                    </td>
                </tr>

            
                <tr>
                    <td width="1%">
                        <img src="images/status/01-bronze.gif" border="0" title="Bronze" alt="" />
                    </td>
                    <td width="99%">

                        Bronze: 25

                        

                            - 99

                        

                        pts
                    </td>
                </tr>

            

        </tbody>

    

    

        <tbody class="jive-status-legend-groups">

            
                <tr>
                    <td width="1%" class="jive-first-row">
                        <img src="images/status/author-16x16.gif" border="0" title="Manning Author" alt="" />
                    </td>
                    <td width="99%" class="jive-first-row">
                        Manning Author
                    </td>
                </tr>

            
                <tr>
                    <td width="1%" class="">
                        <img src="images/status/staff-16x16.gif" border="0" title="Manning Staff" alt="" />
                    </td>
                    <td width="99%" class="">
                        Manning Staff
                    </td>
                </tr>

            
                <tr>
                    <td width="1%" class="">
                        <img src="images/status/staff-16x16.gif" border="0" title="Manning Developmental Editor" alt="" />
                    </td>
                    <td width="99%" class="">
                        Manning Developmental Editor
                    </td>
                </tr>

            

        </tbody>

    

    </tbody>
    </table>
    </div>




        </td>
    </tr>
</tbody>
</table>


    <br>
    <a href="rss.jspa?feed=rss/rssmessages.jspa?threadID=27764"
    title="Point your RSS reader here for a feed of the latest messages in this thread"><img src="images/rss-24x16.gif" width="24" height="14" border="0" alt=""></a> <br><br>







</div>

<br><br>


        <table id="jive-footer" cellpadding="6" cellspacing="0" border="0" width="100%">
    <tr>
        <td>
            <a href="/category.jspa?categoryID=3">Author Online</a>
            |
            <!-- Login/logout -->
                <a href="login!default.jspa">Login</a>
            |
            <a href="help.jspa">Help</a>
            |
            <a href="search!default.jspa">Search</a>
            <br>
            <a href="http://www.jivesoftware.com/poweredby/" target="_blank">Powered by Jive Software</a>
        </td>
    </tr>
    </table>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-5861300-3");
pageTracker._trackPageview();
} catch(err) {}</script>





</body>
</html>
