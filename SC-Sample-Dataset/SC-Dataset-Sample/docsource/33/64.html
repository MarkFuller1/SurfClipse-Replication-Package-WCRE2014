<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>[jira] [Commented] (GERONIMO-5531) Run server as windows service update</title>
  <link rel="stylesheet" type="text/css" href="/archives/style.css" />
 </head>

 <body id="archives">
  <h1>geronimo-dev mailing list archives</h1>

  <h5>
<a href="http://mail-archives.apache.org/mod_mbox/" title="Back to the archives depot">Site index</a> &middot; <a href="/mod_mbox/geronimo-dev" title="Back to the list index">List index</a></h5>  <table class="static" id="msgview">
   <thead>
    <tr>
    <th class="title">Message view</th>
    <th class="nav"><a href="/mod_mbox/geronimo-dev/201103.mbox/%3c173914049.21035.1301478845905.JavaMail.tomcat@hel.zones.apache.org%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c20110330170638.12468.qmail@minotaur.apache.org%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c173914049.21035.1301478845905.JavaMail.tomcat@hel.zones.apache.org%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c20110330170638.12468.qmail@minotaur.apache.org%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </thead>

   <tfoot>
    <tr>
    <th class="title"><a href="#archives">Top</a></th>
    <th class="nav"><a href="/mod_mbox/geronimo-dev/201103.mbox/%3c173914049.21035.1301478845905.JavaMail.tomcat@hel.zones.apache.org%3e" title="Previous by date">&laquo;</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/date" title="View messages sorted by date">Date</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c20110330170638.12468.qmail@minotaur.apache.org%3e" title="Next by date">&raquo;</a> &middot; <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c173914049.21035.1301478845905.JavaMail.tomcat@hel.zones.apache.org%3e" title="Previous by thread">&laquo;</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/thread" title="View messages sorted by thread">Thread</a> <a href="/mod_mbox/geronimo-dev/201103.mbox/%3c20110330170638.12468.qmail@minotaur.apache.org%3e" title="Next by thread">&raquo;</a></th>
   </tr>
   </tfoot>

   <tbody>
   <tr class="from">
    <td class="left">From</td>
    <td class="right">&quot;Tina Li (JIRA)&quot; &lt;j...@apache.org&gt;</td>
   </tr>
   <tr class="subject">
    <td class="left">Subject</td>
    <td class="right">[jira] [Commented] (GERONIMO-5531) Run server as windows service update</td>
   </tr>
   <tr class="date">
    <td class="left">Date</td>
    <td class="right">Wed, 30 Mar 2011 10:16:05 GMT</td>
   </tr>
   <tr class="contents"><td colspan="2"><pre>

    [ https://issues.apache.org/jira/browse/GERONIMO-5531?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;focusedCommentId=13012906#comment-13012906
] 

Tina Li commented on GERONIMO-5531:
-----------------------------------

The above comment I added is in this scenario:
I have start the server using the command &lt;geronimo_home&gt;/bin startup.bat and then use
the service to start the server, although the geronimosrvw.exe tool shows the status of the
server is started, the server in fact is not succesully started and the geronimo.log displayed
the error:
2011-03-30 18:09:56,156 ERROR [BlueprintContainerImpl] Unable to start blueprint container
for bundle org.apache.karaf.shell.ssh
org.osgi.service.blueprint.container.ComponentDefinitionException: Unable to intialize bean
sshServerFactory
	at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:635)
	at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:744)
	at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:64)
	at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:219)
	at org.apache.aries.blueprint.container.BlueprintRepository.createAll(BlueprintRepository.java:147)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.instantiateEagerComponents(BlueprintContainerImpl.java:624)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:315)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:213)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:452)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
	at java.util.concurrent.FutureTask.run(FutureTask.java:149)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:109)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:218)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
	at java.lang.Thread.run(Thread.java:736)
Caused by: java.net.BindException: Address already in use: bind
	at sun.nio.ch.Net.bind(Native Method)
	at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:149)
	at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:71)
	at org.apache.mina.transport.socket.nio.NioSocketAcceptor.open(NioSocketAcceptor.java:251)
	at org.apache.mina.transport.socket.nio.NioSocketAcceptor.open(NioSocketAcceptor.java:48)
	at org.apache.mina.core.polling.AbstractPollingIoAcceptor.registerHandles(AbstractPollingIoAcceptor.java:523)
	at org.apache.mina.core.polling.AbstractPollingIoAcceptor.access$200(AbstractPollingIoAcceptor.java:65)
	at org.apache.mina.core.polling.AbstractPollingIoAcceptor$Acceptor.run(AbstractPollingIoAcceptor.java:407)
	at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64)
	... 3 more
2011-03-30 18:09:59,968 INFO  [jmx] Starting JMX OSGi agent
2011-03-30 18:10:00,000 INFO  [jmx] Registering MBean with ObjectName [osgi.core:service=permissionadmin,version=1.2]
for service with service.id [3]
2011-03-30 18:10:00,000 INFO  [jmx] Registering MBean with ObjectName [osgi.compendium:service=cm,version=1.3]
for service with service.id [32]
2011-03-30 18:10:00,156 WARN  [RMIRegistryService] RMI Registry failed
2011-03-30 18:10:00,156 ERROR [GBeanInstanceState] Error while starting; GBean is now in the
FAILED state: abstractName="org.apache.geronimo.framework/rmi-naming/3.0-SNAPSHOT/car?ServiceModule=org.apache.geronimo.framework/rmi-naming/3.0-SNAPSHOT/car,j2eeType=GBean,name=RMIRegistry"
java.rmi.server.ExportException: Port already in use: 1099; nested exception is: 
	java.net.BindException: Address already in use: JVM_Bind
	at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:322)
	at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:230)
	at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:405)
	at sun.rmi.transport.LiveRef.exportObject(LiveRef.java:141)
	at sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:202)
	at sun.rmi.registry.RegistryImpl.setup(RegistryImpl.java:104)
	at sun.rmi.registry.RegistryImpl.&lt;init&gt;(RegistryImpl.java:80)
	at java.rmi.registry.LocateRegistry.createRegistry(LocateRegistry.java:233)
	at org.apache.geronimo.kernel.rmi.RMIRegistryService.doStart(RMIRegistryService.java:84)
	at org.apache.geronimo.gbean.runtime.GBeanInstance.createInstance(GBeanInstance.java:975)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.attemptFullStart(GBeanInstanceState.java:271)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.start(GBeanInstanceState.java:105)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.startRecursive(GBeanInstanceState.java:127)
	at org.apache.geronimo.gbean.runtime.GBeanInstance.startRecursive(GBeanInstance.java:560)
	at org.apache.geronimo.kernel.basic.BasicKernel.startRecursiveGBean(BasicKernel.java:386)
	at org.apache.geronimo.kernel.config.ConfigurationUtil.startConfigurationGBeans(ConfigurationUtil.java:460)
	at org.apache.geronimo.kernel.config.KernelConfigurationManager.start(KernelConfigurationManager.java:226)
	at org.apache.geronimo.kernel.config.SimpleConfigurationManager.startConfiguration(SimpleConfigurationManager.java:702)
	at org.apache.geronimo.system.main.EmbeddedDaemon.doStartup(EmbeddedDaemon.java:211)
	at org.apache.geronimo.system.main.EmbeddedDaemon.execute(EmbeddedDaemon.java:91)
	at org.apache.geronimo.system.osgi.BootActivator$1.execute(BootActivator.java:107)
	at org.apache.geronimo.main.Bootstrapper.execute(Bootstrapper.java:65)
	at org.apache.geronimo.cli.AbstractCLI.executeMain(AbstractCLI.java:65)
	at org.apache.geronimo.cli.daemon.DaemonCLI.main(DaemonCLI.java:32)
Caused by: java.net.BindException: Address already in use: JVM_Bind
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:395)
	at java.net.ServerSocket.bind(ServerSocket.java:330)
	at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:196)
	at org.apache.geronimo.kernel.rmi.GeronimoRMIServerSocketFactory.createServerSocket(GeronimoRMIServerSocketFactory.java:35)
	at sun.rmi.transport.tcp.TCPEndpoint.newServerSocket(TCPEndpoint.java:661)
	at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:311)
	... 23 more
2011-03-30 18:14:34,875 INFO  [jmx] Starting JMX OSGi agent
2011-03-30 18:14:34,906 INFO  [jmx] Registering MBean with ObjectName [osgi.core:service=permissionadmin,version=1.2]
for service with service.id [3]
2011-03-30 18:14:34,906 INFO  [jmx] Registering MBean with ObjectName [osgi.compendium:service=cm,version=1.3]
for service with service.id [32]
2011-03-30 18:14:35,093 WARN  [RMIRegistryService] RMI Registry failed
2011-03-30 18:14:35,093 ERROR [GBeanInstanceState] Error while starting; GBean is now in the
FAILED state: abstractName="org.apache.geronimo.framework/rmi-naming/3.0-SNAPSHOT/car?ServiceModule=org.apache.geronimo.framework/rmi-naming/3.0-SNAPSHOT/car,j2eeType=GBean,name=RMIRegistry"
java.rmi.server.ExportException: Port already in use: 1099; nested exception is: 
	java.net.BindException: Address already in use: JVM_Bind
	at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:322)
	at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:230)
	at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:405)
	at sun.rmi.transport.LiveRef.exportObject(LiveRef.java:141)
	at sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:202)
	at sun.rmi.registry.RegistryImpl.setup(RegistryImpl.java:104)
	at sun.rmi.registry.RegistryImpl.&lt;init&gt;(RegistryImpl.java:80)
	at java.rmi.registry.LocateRegistry.createRegistry(LocateRegistry.java:233)
	at org.apache.geronimo.kernel.rmi.RMIRegistryService.doStart(RMIRegistryService.java:84)
	at org.apache.geronimo.gbean.runtime.GBeanInstance.createInstance(GBeanInstance.java:975)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.attemptFullStart(GBeanInstanceState.java:271)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.start(GBeanInstanceState.java:105)
	at org.apache.geronimo.gbean.runtime.GBeanInstanceState.startRecursive(GBeanInstanceState.java:127)
	at org.apache.geronimo.gbean.runtime.GBeanInstance.startRecursive(GBeanInstance.java:560)
	at org.apache.geronimo.kernel.basic.BasicKernel.startRecursiveGBean(BasicKernel.java:386)
	at org.apache.geronimo.kernel.config.ConfigurationUtil.startConfigurationGBeans(ConfigurationUtil.java:460)
	at org.apache.geronimo.kernel.config.KernelConfigurationManager.start(KernelConfigurationManager.java:226)
	at org.apache.geronimo.kernel.config.SimpleConfigurationManager.startConfiguration(SimpleConfigurationManager.java:702)
	at org.apache.geronimo.system.main.EmbeddedDaemon.doStartup(EmbeddedDaemon.java:211)
	at org.apache.geronimo.system.main.EmbeddedDaemon.execute(EmbeddedDaemon.java:91)
	at org.apache.geronimo.system.osgi.BootActivator$1.execute(BootActivator.java:107)
	at org.apache.geronimo.main.Bootstrapper.execute(Bootstrapper.java:65)
	at org.apache.geronimo.cli.AbstractCLI.executeMain(AbstractCLI.java:65)
	at org.apache.geronimo.cli.daemon.DaemonCLI.main(DaemonCLI.java:32)
Caused by: java.net.BindException: Address already in use: JVM_Bind
	at java.net.PlainSocketImpl.socketBind(Native Method)
	at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:395)
	at java.net.ServerSocket.bind(ServerSocket.java:330)
	at java.net.ServerSocket.&lt;init&gt;(ServerSocket.java:196)
	at org.apache.geronimo.kernel.rmi.GeronimoRMIServerSocketFactory.createServerSocket(GeronimoRMIServerSocketFactory.java:35)
	at sun.rmi.transport.tcp.TCPEndpoint.newServerSocket(TCPEndpoint.java:661)
	at sun.rmi.transport.tcp.TCPTransport.listen(TCPTransport.java:311)
	... 23 more
But just use the server to startup the geronimo server has no problem.

&gt; Run server as windows service update
&gt; ------------------------------------
&gt;
&gt;                 Key: GERONIMO-5531
&gt;                 URL: https://issues.apache.org/jira/browse/GERONIMO-5531
&gt;             Project: Geronimo
&gt;          Issue Type: Bug
&gt;      Security Level: public(Regular issues) 
&gt;          Components: commands
&gt;    Affects Versions: 3.0
&gt;            Reporter: viola.lu
&gt;            Assignee: viola.lu
&gt;            Priority: Minor
&gt;         Attachments: G5531.patch, G5531.patch
&gt;
&gt;
&gt; Try to run procun plugin on 3.0, which is used for running geronimo as window service,
but failed. Need update.

--
This message is automatically generated by JIRA.
For more information on JIRA, see: http://www.atlassian.com/software/jira

</pre></td></tr>
   <tr class="mime">
    <td class="left">Mime</td>
    <td class="right">
<ul>
<li><a rel="nofollow" href="/mod_mbox/geronimo-dev/201103.mbox/raw/%3c789475001.21055.1301480165823.JavaMail.tomcat@hel.zones.apache.org%3e/">Unnamed text/plain</a> (inline, 7-Bit, 10832 bytes)</li>
</ul>
</td>
</tr>
   <tr class="raw">
    <td class="left"></td>
    <td class="right"><a href="/mod_mbox/geronimo-dev/201103.mbox/raw/%3c789475001.21055.1301480165823.JavaMail.tomcat@hel.zones.apache.org%3e" rel="nofollow">View raw message</a></td>
   </tr>
   </tbody>
  </table>
 </body>
</html>
