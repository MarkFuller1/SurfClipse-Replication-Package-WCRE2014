<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"><![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"><![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"><![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
    <head>
        
        <meta charset="utf-8">
        <!--SourceForge.net: Find and Build Open Source Software-->
        <!--Copyright (c) 1999-2013 SourceForge, Inc. All rights reserved.-->
        <!-- Create Server: sfs-web-3 -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="Open Source &quot;turn-key&quot; institutional repository application | Open Source Digital Asset Management system that enables services for access, provision, stewardship and re-use of digital assets with a focus on educational and research materials" />
        <meta name="keywords" content="DSpace, Digital preservation, Research, Archiving, Open Source, Development, Community, Source Code, Downloads, Software" />
                <title>SourceForge.net: DSpace: dspace-changelog</title>        <link href='//fonts.googleapis.com/css?family=Ubuntu:regular,bold' rel='stylesheet' type='text/css'>
                <style type="text/css">
            @font-face {
                font-family: "Pictos";
                src: url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.eot');
                src: local("â˜º"), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.woff') format('woff'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://static.sourceforge.net/include/fonts/sftheme/pictos-web.svg') format('svg');
            }
            #site-header .logo span {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/logo.png");
            }
            #site-footer .wrapper {
              background-image: url("http://static.sourceforge.net/images/neotheme/sftheme/sf-footer-logo.png") !important;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/style.php?secure=0&amp;1385769407" media="all" />
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/global.php?secure=0&amp;1385769407" media="all" />
        
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/neotheme/sfx.css?1385769407" media="all" />
                       <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/phoneix/table.php?secure=0&amp;1385769407" media="all" />
                        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/css/develop/droppy.php?secure=0&amp;1385769407" media="all" />
                                        <!--   -->
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/modernizr.custom.90514.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery-1.3.2.min.js"></script>
        <script type="text/javascript">
            
                jQuery.noConflict();
            
        </script>

        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.cookie.js"></script>
                        <script type='text/javascript'>
          jQuery(function() {
            jQuery('#fad19 p, .project_summary .downloadbar, .vertical_widget, .horizontal_widget').wrap('<div class="sc"><div class="l1"><div class="l2"><div class="l3"><div class="l4"></div></div></div></div></div>');
          });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.droppy.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/sylvester.js"></script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/js/pb.transformie.js"></script>
        <script type='text/javascript'>
            jQuery(function(){
                jQuery('.b-hornav > li:last-child').addClass('last');
                jQuery('.b-hornav > li').each(function() {
                    jQuery('li[class!=disabled]', this).eq(0).addClass('first');
                });
                jQuery('.b-hornav').droppy({speed:0, delay:0});
            });
        </script>
                <script type="text/javascript" src="http://static.sourceforge.net/include/c_jquerytabs.js"></script>

        <script type="text/javascript">
        
            jQuery(function(){
                jQuery('.vertical_widget_content ul.tab, #container2 ul.tab, #container3 ul.tab, #container4 ul.tab').tabs({ selected: 0 });
            });
        
        </script>
        <link rel="stylesheet" type="text/css" href="http://static.sourceforge.net/include/jquery/jquery.tabs.css?secure=0&amp;1385769407" media="all" />
            
                            <script type="text/javascript" src="http://static.sourceforge.net/include/js/preferences.js"></script>
            <script type="text/javascript">
                        var _visitor = "";
            var jsonly = document.createElement('link');
            jsonly.setAttribute('rel', 'stylesheet');
            jsonly.setAttribute('type', 'text/css');
            jsonly.setAttribute('href', 'http://static.sourceforge.net/css/phoneix/jsonly.css?secure=0&amp;1385769407');
            document.getElementsByTagName('head')[0].appendChild(jsonly);
                    </script>
                                                                    <!-- DoubleClick Random Number -->
    <script type="text/javascript">var dfp_ord=Math.random()*10000000000000000; var dfp_tile = 1; var dfp_ptile = 1;</script>
    <!-- End DoubleClick Random Number -->
    <!-- After META tags -->
                                    
        <script type="text/javascript" src="http://static.sourceforge.net/sfx.js"></script>
        
            <script type="text/javascript">
                        var _gaq = _gaq || [];
                        _gaq.push(['t1._setAccount', 'UA-32013-6']);
                        _gaq.push(['t1._trackPageview']);
                        _gaq.push(['t2._setAccount', 'UA-36130941-1']);
                        _gaq.push(['t2._trackPageview']);
                        (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>
        <script type="text/javascript" src="http://static.sourceforge.net/include/jquery/jquery.notify.js"></script>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/header.js"></script>
    </head>

    <body id="c2" class="short-head">
    
    <!--[if IE 7]><div id="ie7only"><![endif]-->
    <!--[if IE 6]><div id="ie6only"><![endif]-->
    <!--[if IE]><div id="ieonly"><![endif]-->
        
        <div class="mail_archive">
                        <header id="site-header">
                <div class="wrapper">
                    <a href="/" class="logo">
                        <span>SourceForge</span>
                    </a>
                    <form method="get" action="/directory/">
                        <input type="text" id="words" name="q" placeholder="Search">
                    </form>
                    <nav id="nav-site">
                        <a href="/directory/" title="Browse our software.">Browse</a>
                        <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
                        <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
                        <a href="/support" title="Contact us for help and feedback.">Help</a>
                        <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
                    </nav>
                    <nav id="nav-account">
                                                  <div class="logged_out">
                            <a href="https://sourceforge.net/account/login.php">Log In</a>
                            <span>or</span>
                            <a href="https://sourceforge.net/user/registration">Join</a>
                          </div>
                                            </nav>
                </div>
            </header>
            <header id="site-sec-header">
                <div class="wrapper">
                    <nav id="nav-hubs">
                        <h4>Solution Centers</h4>
                        <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
                        <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
                        <a href="http://html5center.sourceforge.net/">HTML5</a>
                        <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
                    </nav>
                    <nav id="nav-collateral">
                      <a href="http://library.slashdotmedia.com/?source=sfnet_header">Resources</a>  
                                              <a href="https://sourceforge.net/user/registration/">Newsletters</a>
                                            </nav>
                </div>
            </header>
                            <!-- DoubleClick Ad Tag -->
<script type="text/javascript">
//<![CDATA[
    document.write('<script src="http://ad.doubleclick.net/adj/ostg.sourceforge/sf_pg_mailarchive_leader;pg=/mailarchive/forum.php;psrch=0;logged_in=0;tile='+dfp_tile+';sz=728x90;ord='+dfp_ord+'?" type="text/javascript"><\/script>');
    dfp_tile++;
//]]>
</script>
<!-- End DoubleClick Ad Tag -->
                                                <div id="page-body">
            <div id="bd" class="inner-bd">
                <div id="doc4" class="yui-t6">
                                                            <div id="breadcrumbs">
                                                    <a href="/">Home</a>
 / <a href="/directory/" >Browse</a>
 / <a href="/projects/dspace/" >DSpace</a>
 / <a href="/mail/?group_id=19984" >Mail</a>
 / <a href="/mailarchive/forum.php?forum_name=dspace-changelog&amp;style=nested&amp;viewmonth=201107"  class="selected">Archive</a>
                                            </div>
                    <!-- begin content -->
            <a name="projectnav"></a>
        <div id="project_nav_container">
            <div class="b-proj__side">
                                
                
                
                <span class="award-bar"></span>
            </div>
            <h1>
                <a href="/projects/dspace/">DSpace</a>
                            </h1>
                    <div class="firstwave">
                <ul class="b-hornav">
                    <li id="menu_consume_summary"><a href="/projects/dspace/"><span><span>Summary</span></span></a></li>
<li id="menu_consume_files"><a href="/projects/dspace/files/"><span><span>Files</span></span></a></li>
<li id="menu_consume_reviews"><a href="/projects/dspace/reviews/"><span><span>Reviews</span></span></a></li>
<li id="menu_project_support"><a href="/projects/dspace/support"><span><span>Support</span></span></a></li>
<li id="menu_project_develop"><a href="/projects/dspace/develop"><span><span>Develop</span></span></a>
<ul>
<li id="menu_project_website"><a href="http://www.dspace.org/">Web Site</a></li>
<li id="menu_project_screenshots" class="disabled" style="display: none;"><a href="/project/screenshots.php?group_id=19984">Screenshots</a></li>
<li id="menu_project_news"><a href="/news/?group_id=19984">News</a></li>
<li id="menu_stats"><a href="/projects/dspace/stats/traffic">Project Statistics</a></li>
<li id="menu_download_stats_dist"><a href="/downloads/dspace/stats_timeline">Download Stats</a></li>
</ul>
</li>
<li id="menu_hostedapps" class="disabled tier" style="display: none;"><a href="/hostedapp/?group_id=19984"><span><span>Hosted&nbsp;Apps</span></span></a></li>
<li id="menu_tracker" class="disabled tier" style="display: none;"><a href="/tracker/?group_id=19984"><span><span>Tracker</span></span></a>
<ul>
<li id="menu_tracker_stats" class="tools"><a href="/projects/dspace/stats/tracker">Statistics for Trackers</a></li>
<li id="menu_tracker_reports" class="disabled" style="display: none;"><a href="/tracker/reporting/?group_id=19984">Reporting for Trackers</a></li>
<li id="menu_tracker_search"><a href="/search/?group_id=19984&amp;type_of_search=artifact">Search Trackers</a></li>
</ul>
</li>
<li id="menu_mail" class="selected tier"><a href="/mail/?group_id=19984"><span><span>Mailing&nbsp;Lists</span></span></a>
<ul>
<li id="menu_mlist_dspace-tech"><a href="/mailarchive/forum.php?forum_name=dspace-tech">dspace-tech</a></li>
<li id="menu_mlist_dspace-changelog"><a href="/mailarchive/forum.php?forum_name=dspace-changelog">dspace-changelog</a></li>
<li id="menu_mlist_dspace-devel"><a href="/mailarchive/forum.php?forum_name=dspace-devel">dspace-devel</a></li>
<li id="menu_mlist_dspace-general"><a href="/mailarchive/forum.php?forum_name=dspace-general">dspace-general</a></li>
<li id="menu_mlist_dspace-release"><a href="/mailarchive/forum.php?forum_name=dspace-release">dspace-release</a></li>
<li id="menu_mail_search" class="tools"><a href="/search/?group_id=19984&amp;type_of_search=mlists">Search Mail Lists</a></li>
</ul>
<div class="diamond"></div></li>
<li id="menu_forums" class="disabled tier" style="display: none;"><a href="/projects/dspace/forums"><span><span>Forums</span></span></a>
<ul>
<li id="menu_forums_stats" class="tools"><a href="/projects/dspace/stats/forums">Statistics for Forums</a></li>
<li id="menu_forums_search"><a href="/search/?group_id=19984&amp;type_of_search=forums">Search Forums</a></li>
</ul>
</li>
<li id="menu_code"><a href="/scm/?type=svn&amp;group_id=19984"><span><span>Code</span></span></a>
<ul>
<li id="menu_git_about" class="disabled" style="display: none;"><a href="/scm/?type=git&amp;group_id=19984">Git</a></li>
<li id="menu_git_browse" class="disabled" style="display: none;"><a href="http://dspace.git.sourceforge.net/">Git Browse</a></li>
<li id="menu_git_stats" class="disabled" style="display: none;"><a href="/projects/dspace/stats/scm?repo=GitRepository">Git Statistics</a></li>
<li id="menu_hg_about" class="disabled" style="display: none;"><a href="/scm/?type=hg&amp;group_id=19984">Mercurial</a></li>
<li id="menu_hg_browse" class="disabled" style="display: none;"><a href="http://dspace.hg.sourceforge.net/hgweb/dspace/">Mercurial Browse</a></li>
<li id="menu_hg_stats" class="disabled" style="display: none;"><a href="/projects/dspace/stats/scm?repo=HgRepository">Mercurial Statistics</a></li>
<li id="menu_bzr_about" class="disabled" style="display: none;"><a href="/scm/?type=bzr&amp;group_id=19984">Bazaar</a></li>
<li id="menu_bzr_browse" class="disabled" style="display: none;"><a href="http://dspace.bzr.sourceforge.net/bzr/dspace/">Bazaar Browse</a></li>
<li id="menu_bzr_stats" class="disabled" style="display: none;"><a href="/projects/dspace/stats/scm?repo=BazaarBranch">Bazaar Statistics</a></li>
<li id="menu_cvs_about" class="disabled" style="display: none;"><a href="/scm/?type=cvs&amp;group_id=19984">CVS</a></li>
<li id="menu_cvs_browse" class="disabled" style="display: none;"><a href="http://dspace.cvs.sourceforge.net/dspace/">CVS Browse</a></li>
<li id="menu_cvs_stats" class="disabled" style="display: none;"><a href="/projects/dspace/stats/scm?repo=CVSRepository">CVS Statistics</a></li>
<li id="menu_svn_about"><a href="/scm/?type=svn&amp;group_id=19984">SVN</a></li>
<li id="menu_svn_browse"><a href="https://github.com/DSpace/DSpace/">SVN Browse</a></li>
</ul>
</li>
<li id="menu_newadmin" class="disabled tier" style="display: none;"><a href="/project/admin/?group_id=19984"><span><span>Project&nbsp;Admin</span></span></a>
<ul>
<li id="menu_editgroupinfo" class="disabled" style="display: none;"><a href="/project/admin/public_info.php?group_id=19984">Settings</a></li>
<li id="menu_features" class="disabled" style="display: none;"><a href="/project/admin/features.php?group_id=19984">Features</a></li>
<li id="menu_userperms" class="disabled" style="display: none;"><a href="/project/admin/project_membership.php?group_id=19984">Members</a></li>
<li id="menu_stats_admin" class="disabled" style="display: none;"><a href="/project/admin/stats.php?group_id=19984">Analytics</a></li>
</ul>
</li>

                </ul>
            </div>
                </div>
        <div style="clear: both;"></div>
            




<p>
<h3>Email Archive: <a href="forum.php?forum_name=dspace-changelog"><!-- google_ad_section_start -->dspace-changelog<!-- google_ad_section_end --></A> (read-only)
</h3>
</p>

<table width="450" border=0>
    <tr>
        <td>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th>
			<center><b>2006:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200608">(14)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200609">(102)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200610">(43)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200611">(109)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200612">(38)</a>
								</td>
		<tr>
		<th>
			<center><b>2007:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									&nbsp;&nbsp;&nbsp;
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200703">(19)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200704">(120)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200705">(110)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200706">(51)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200707">(72)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200708">(54)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200709">(44)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200710">(65)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200711">(119)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200712">(59)</a>
								</td>
		<tr>
		<th>
			<center><b>2008:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200801">(119)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200802">(177)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200803">(100)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200804">(51)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200805">(28)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200806">(19)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200807">(49)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200808">(29)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200809">(65)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200810">(106)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200811">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200812">(33)</a>
								</td>
		<tr>
		<th>
			<center><b>2009:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200901">(48)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200902">(109)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200903">(151)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200904">(86)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200905">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200906">(159)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200907">(196)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200908">(54)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200909">(71)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200910">(188)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200911">(78)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=200912">(72)</a>
								</td>
		<tr>
		<th>
			<center><b>2010:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201001">(85)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201002">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201003">(58)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201004">(36)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201005">(155)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201006">(117)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201007">(69)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201008">(75)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201009">(72)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201010">(332)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201011">(252)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201012">(102)</a>
								</td>
		<tr>
		<th>
			<center><b>2011:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201101">(69)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201102">(37)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201103">(202)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201104">(72)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201105">(50)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201106">(42)</a>
								</td>
			<td bgcolor="#cccccc">
			<sub>Jul</sub><br />
						<b>
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107">(69)</a>
									</b>
					</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201108">(131)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201109">(140)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201110">(66)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201111">(39)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201112">(47)</a>
								</td>
		<tr>
		<th>
			<center><b>2012:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201201">(11)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201202">(29)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201203">(1)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201204">(10)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201205">(20)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201206">(28)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201207">(11)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201208">(36)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201209">(53)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201210">(77)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201211">(85)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201212">(33)</a>
								</td>
		<tr>
		<th>
			<center><b>2013:</b></center>
		</th>
			<td bgcolor="#eeeeee">
			<sub>Jan</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201301">(38)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Feb</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201302">(8)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Mar</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201303">(6)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Apr</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201304">(3)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>May</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201305">(30)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jun</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201306">(26)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Jul</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201307">(57)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Aug</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201308">(35)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Sep</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201309">(17)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Oct</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201310">(138)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Nov</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201311">(57)</a>
								</td>
			<td bgcolor="#eeeeee">
			<sub>Dec</sub><br />
									<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201312">(47)</a>
								</td>
	</table>
            <table width="100%" border="1" cellpadding="1" cellspacing="0">
	<tr>
		<th colspan="7">
			
		</th>
	</tr>
	<tr>
		<th bgcolor="#cccccc">S</th>
		<th bgcolor="#cccccc">M</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">W</th>
		<th bgcolor="#cccccc">T</th>
		<th bgcolor="#cccccc">F</th>
		<th bgcolor="#cccccc">S</th>
	</tr>
	<tr>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			1
		</th>
			<th bgcolor="#eeeeee">
			2
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=1">
					(1)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			3
		</th>
			<th bgcolor="#eeeeee">
			4
		</th>
			<th bgcolor="#eeeeee">
			5
		</th>
			<th bgcolor="#eeeeee">
			6
		</th>
			<th bgcolor="#eeeeee">
			7
		</th>
			<th bgcolor="#eeeeee">
			8
		</th>
			<th bgcolor="#eeeeee">
			9
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=5">
					(5)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=6">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=7">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=8">
					(2)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			10
		</th>
			<th bgcolor="#eeeeee">
			11
		</th>
			<th bgcolor="#eeeeee">
			12
		</th>
			<th bgcolor="#eeeeee">
			13
		</th>
			<th bgcolor="#eeeeee">
			14
		</th>
			<th bgcolor="#eeeeee">
			15
		</th>
			<th bgcolor="#eeeeee">
			16
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=12">
					(6)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=13">
					(3)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=14">
					(4)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=15">
					(23)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			17
		</th>
			<th bgcolor="#eeeeee">
			18
		</th>
			<th bgcolor="#eeeeee">
			19
		</th>
			<th bgcolor="#eeeeee">
			20
		</th>
			<th bgcolor="#eeeeee">
			21
		</th>
			<th bgcolor="#eeeeee">
			22
		</th>
			<th bgcolor="#eeeeee">
			23
		</th>
		</tr>
	<tr>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=17">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=18">
					(3)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=19">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=20">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=21">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=22">
					(2)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			24
		</th>
			<th bgcolor="#eeeeee">
			25
		</th>
			<th bgcolor="#eeeeee">
			26
		</th>
			<th bgcolor="#eeeeee">
			27
		</th>
			<th bgcolor="#eeeeee">
			28
		</th>
			<th bgcolor="#eeeeee">
			29
		</th>
			<th bgcolor="#eeeeee">
			30
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=26">
					(1)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=27">
					(3)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=28">
					(2)
					</a>
				</td>
					<td align="center">
							<a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;style=nested&amp;viewmonth=201107&amp;viewday=29">
					(4)
					</a>
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
	<tr>
			<th bgcolor="#eeeeee">
			31
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
			<th bgcolor="#eeeeee">
			
		</th>
		</tr>
	<tr>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
					<td align="center">
							&nbsp;
				</td>
		</tr>
</table>
        </td>
    </tr>
</table>

<form action="/mailarchive/forum.php" method="get">
<input type="hidden" name="set" value="custom">
<input type="hidden" name="viewmonth" value="201107">
<input type="hidden" name="viewday" value="">

<table border="0" width="500">
    <tr>
        <td>
            <small>
            
<select name="forum_name">
	<option value="dspace-tech">dspace-tech</option>
	<option value="dspace-devel">dspace-devel</option>
	<option value="dspace-manakin">dspace-manakin</option>
	<option value="dspace-gsoc-student">dspace-gsoc-student</option>
	<option value="dspace-changelog" selected="selected">dspace-changelog</option>
	<option value="dspace-release">dspace-release</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="style">
	<option value="nested" selected="selected">Nested</option>
	<option value="flat">Flat</option>
	<option value="threaded">Threaded</option>
	<option value="ultimate">Ultimate</option>
</select>

            </small>
        </td>
        <td>
            <small>
            
<select name="max_rows">
	<option value="25" selected="selected">Show 25</option>
	<option value="50">Show 50</option>
	<option value="75">Show 75</option>
	<option value="100">Show 100</option>
</select>

            </small>
        </td>
        <td>
            <small>
            <input type="submit" name="submit" value="Change View">
            </small>
        </td>
    </tr>
</table>

    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27873145">[DSpace-changelog] r6511 - in dspace/trunk:
	dspace-api/src/main/java/org/dspace/search dspace/config</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-29 20:57</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Fri Jul 29 20:56:54 2011
New Revision: 6511

Log:
DS-849 : Create a non-Porter Stemming analyzer for DSpace


Added:
   dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSNonStemmingAnalyzer.java
Modified:
   dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSAnalyzer.java
   dspace/trunk/dspace/config/dspace.cfg

Modified: dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSAnalyzer.java
==============================================================================
--- dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSAnalyzer.java	(original)
+++ dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSAnalyzer.java	Fri Jul 29 20:56:54 2011
@@ -28,7 +28,7 @@
      * An array containing some common words that are not usually useful for
      * searching.
      */
-    private static final String[] STOP_WORDS =
+    protected static final String[] STOP_WORDS =
     {
 
     // new stopwords (per MargretB)
@@ -47,12 +47,13 @@
     /*
      * Stop table
      */
-    private static final Set stopSet = StopFilter.makeStopSet(STOP_WORDS);
+    protected static final Set stopSet = StopFilter.makeStopSet(STOP_WORDS);
 
     /*
      * Create a token stream for this analyzer.
      */
-    public final TokenStream tokenStream(String fieldName, final Reader reader)
+    @Override
+    public TokenStream tokenStream(String fieldName, final Reader reader)
     {
         TokenStream result = new DSTokenizer(reader);
 
@@ -64,6 +65,7 @@
         return result;
     }
 
+    @Override
     public int getPositionIncrementGap(String fieldName)
     {
         // If it is the default field, or bounded fields is turned off in the config, return the default value

Added: dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSNonStemmingAnalyzer.java
==============================================================================
--- (empty file)
+++ dspace/trunk/dspace-api/src/main/java/org/dspace/search/DSNonStemmingAnalyzer.java	Fri Jul 29 20:56:54 2011
@@ -0,0 +1,39 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+package org.dspace.search;
+
+import java.io.Reader;
+
+import org.apache.lucene.analysis.LowerCaseFilter;
+import org.apache.lucene.analysis.StopFilter;
+import org.apache.lucene.analysis.TokenStream;
+import org.apache.lucene.analysis.standard.StandardFilter;
+
+/**
+ * Custom Lucene Analyzer that combines the standard filter, lowercase filter
+ * and stopword filter. Intentionally omits the stemming filter (which is used
+ * by DSAnalyzer)
+ */
+public class DSNonStemmingAnalyzer extends DSAnalyzer
+{
+    /**
+     * Create a token stream for this analyzer.
+     * This is identical to DSAnalyzer, except it omits the stemming filter
+     */
+    @Override
+    public TokenStream tokenStream(String fieldName, final Reader reader)
+    {
+        TokenStream result = new DSTokenizer(reader);
+
+        result = new StandardFilter(result);
+        result = new LowerCaseFilter(result);
+        result = new StopFilter(result, stopSet);
+
+        return result;
+    }
+}

Modified: dspace/trunk/dspace/config/dspace.cfg
==============================================================================
--- dspace/trunk/dspace/config/dspace.cfg	(original)
+++ dspace/trunk/dspace/config/dspace.cfg	Fri Jul 29 20:56:54 2011
@@ -239,6 +239,12 @@
 # is used by default.
 # search.analyzer = org.dspace.search.DSAnalyzer
 
+# Non-Stemming analyzer.  Does not "stem" words/terms. When using this analyzer,
+# a search for "wellness" will always return items matching "wellness" and not "well".
+# However, similarly a search for "experiments" will only return objects matching 
+# "experiments" and not "experiment" or "experimenting".
+# search.analyzer = org.dspace.search.DSNonStemmingAnalyzer
+
 # Chinese analyzer
 # search.analyzer = org.apache.lucene.analysis.cn.ChineseAnalyzer

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27872805">[DSpace-changelog] r6510 -
	dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/EPerson</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-29 19:29</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Fri Jul 29 19:29:16 2011
New Revision: 6510

Log:
Fix for DS-863 : Still possible to register despite xmlui.user.registration set to false


Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/EPerson/eperson.js

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/EPerson/eperson.js
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/EPerson/eperson.js	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/EPerson/eperson.js	Fri Jul 29 19:29:16 2011
@@ -15,6 +15,7 @@
 importClass(Packages.org.dspace.eperson.EPerson);
 importClass(Packages.org.dspace.eperson.AccountManager);
 importClass(Packages.org.dspace.eperson.Subscribe);
+importClass(Packages.org.dspace.authorize.AuthorizeException);
 
 importClass(Packages.org.dspace.app.xmlui.utils.AuthenticationUtil);
 importClass(Packages.org.dspace.app.xmlui.utils.ContextUtil);
@@ -48,10 +49,18 @@
 
 
 /**
- * Preform a new user registration. 
+ * Perform a new user registration. 
  */
 function doRegister() 
 { 
+    //Make sure that user registration is enabled
+    if (!(ConfigurationManager.getBooleanProperty("xmlui.user.registration", true)))
+    {
+        // We're configured to not allow user registration
+        // User should only have gotten here by manually typing /register in URL, so we'll throw an error.
+        throw new AuthorizeException("User registration is disabled");
+    }
+    
     var token = cocoon.request.get("token");
     
     if (token == null)

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27872558">[DSpace-changelog] r6509 - in dspace/trunk/dspace-xmlui:
	dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/submission
	dspace-xmlui-webapp/src/main/webapp/i18n
	dspace-xmlui-webapp/src/main/webapp/themes/Mirage/lib/css</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-29 18:06</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Fri Jul 29 18:05:17 2011
New Revision: 6509

Log:
DS-673: My Archived Submissions in XMLUI

Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/submission/Submissions.java
   dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml
   dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Mirage/lib/css/style.css

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/submission/Submissions.java
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/submission/Submissions.java	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/submission/Submissions.java	Fri Jul 29 18:05:17 2011
@@ -9,6 +9,11 @@
 
 import java.io.IOException;
 import java.sql.SQLException;
+import java.util.Iterator;
+import java.util.LinkedList;
+import java.util.List;
+import org.apache.cocoon.environment.ObjectModelHelper;
+import org.apache.cocoon.environment.Request;
 
 import org.dspace.app.xmlui.cocoon.AbstractDSpaceTransformer;
 import org.dspace.app.xmlui.utils.UIException;
@@ -26,6 +31,7 @@
 import org.dspace.content.Collection;
 import org.dspace.content.DCValue;
 import org.dspace.content.Item;
+import org.dspace.content.ItemIterator;
 import org.dspace.content.SupervisedItem;
 import org.dspace.content.WorkspaceItem;
 import org.dspace.core.Constants;
@@ -146,9 +152,25 @@
         message("xmlui.Submission.Submissions.status_7"); 
     protected static final Message T_status_unknown = 
         message("xmlui.Submission.Submissions.status_unknown"); 
-
+    
+    // Used in the completed submissions section
+    protected static final Message T_c_head =
+            message("xmlui.Submission.Submissions.completed.head");
+    protected static final Message T_c_info =
+            message("xmlui.Submission.Submissions.completed.info");
+    protected static final Message T_c_column1 =
+            message("xmlui.Submission.Submissions.completed.column1");
+    protected static final Message T_c_column2 =
+            message("xmlui.Submission.Submissions.completed.column2");
+    protected static final Message T_c_column3 =
+            message("xmlui.Submission.Submissions.completed.column3");
+    protected static final Message T_c_limit =
+            message("xmlui.Submission.Submissions.completed.limit");
+    protected static final Message T_c_displayall =
+            message("xmlui.Submission.Submissions.completed.displayall");
 	
-	public void addPageMeta(PageMeta pageMeta) throws SAXException,
+    @Override
+    public void addPageMeta(PageMeta pageMeta) throws SAXException,
 	WingException, UIException, SQLException, IOException,
 	AuthorizeException
 	{
@@ -158,17 +180,26 @@
 		pageMeta.addTrailLink(contextPath + "/submissions",T_trail);
 	}
 	
-  
+    @Override
     public void addBody(Body body) throws SAXException, WingException,
             UIException, SQLException, IOException, AuthorizeException
     {
-    	        
+        Request request = ObjectModelHelper.getRequest(objectModel);
+        boolean displayAll = false;
+        //This param decides whether we display all of the user's previous
+        // submissions, or just a portion of them
+        if (request.getParameter("all") != null)
+        {
+            displayAll=true;
+        }
+        
         Division div = body.addInteractiveDivision("submissions", contextPath+"/submissions", Division.METHOD_POST,"primary");
         div.setHead(T_head);
         
         this.addWorkflowTasks(div);
         this.addUnfinishedSubmissions(div);
         this.addSubmissionsInWorkflow(div);
+        this.addPreviousSubmissions(div, displayAll);
     }
     
     
@@ -602,6 +633,113 @@
 		}
     }
     
-    
+    /** 
+     * Show the user's completed submissions.
+     * 
+     * If the user has no completed submissions, display nothing.
+     * If 'displayAll' is true, then display all user's archived submissions.
+     * Otherwise, default to only displaying 50 archived submissions.
+     * 
+     * @param division div to put archived submissions in
+     * @param displayAll whether to display all or just a limited number.
+     */
+    private void addPreviousSubmissions(Division division, boolean displayAll)
+            throws SQLException,WingException
+    {
+        // Turn the iterator into a list (to get size info, in order to put in a table)
+        List subList = new LinkedList();
+        ItemIterator subs = Item.findBySubmitter(context, context.getCurrentUser());
+
+        //NOTE: notice we are adding each item to this list in *reverse* order...
+        // this is a very basic attempt at making more recent submissions float 
+        // up to the top of the list (findBySubmitter() doesn't guarrantee
+        // chronological order, but tends to return older items near top of the list)
+        try
+        {
+            while (subs.hasNext())
+            {
+                subList.add(0, subs.next());
+            }
+        }
+        finally
+        {
+            if (subs != null)
+                subs.close();
+        }
+
+        // No tasks, so don't show the table.
+        if (!(subList.size() &gt; 0))
+            return;
+        
+        Division completedSubmissions = division.addDivision("completed-submissions");
+        completedSubmissions.setHead(T_c_head);
+        completedSubmissions.addPara(T_c_info);
+    	
+        // Create table, headers
+        Table table = completedSubmissions.addTable("completed-submissions",subList.size() + 2,3);
+        Row header = table.addRow(Row.ROLE_HEADER);
+        header.addCellContent(T_c_column1); // ISSUE DATE
+        header.addCellContent(T_c_column2); // ITEM TITLE (LINKED)
+        header.addCellContent(T_c_column3); // COLLECTION NAME (LINKED)
+    	
+        //Limit to showing just 50 archived submissions, unless overridden
+        //(This is a saftey measure for Admins who may have submitted 
+        // thousands of items under their account via bulk ingest tools, etc.)
+        int limit = 50;
+        int count = 0;
+        
+        // Populate table
+        Iterator i = subList.iterator();
+        while(i.hasNext())
+        {
+            count++;
+            //exit loop if we've gone over our limit of submissions to display
+            if(count&gt;limit &amp;&amp; !displayAll)
+                break;
+           
+            Item published = (Item) i.next();
+            String collUrl = contextPath+"/handle/"+published.getOwningCollection().getHandle();
+            String itemUrl = contextPath+"/handle/"+published.getHandle();
+            DCValue[] titles = published.getMetadata("dc", "title", null, Item.ANY);
+            String collectionName = published.getOwningCollection().getMetadata("name");
+            DCValue[] ingestDate = published.getMetadata("dc", "date", "accessioned", Item.ANY);
+
+            Row row = table.addRow();
+
+            // Item accession date
+            if (ingestDate != null &amp;&amp; ingestDate.length &gt; 0 &amp;&amp;
+                ingestDate[0].value != null)
+            {
+                String displayDate = ingestDate[0].value.substring(0,10);
+                Cell cellDate = row.addCell();
+                cellDate.addContent(displayDate);
+            }
+            else //if no accession date add an empty cell (shouldn't happen, but just in case)
+                row.addCell().addContent("");
+
+            // The item description
+            if (titles != null &amp;&amp; titles.length &gt; 0 &amp;&amp;
+                titles[0].value != null)
+            {
+                String displayTitle = titles[0].value;
+                if (displayTitle.length() &gt; 50)
+                    displayTitle = displayTitle.substring(0,50)+ " ...";
+                row.addCell().addXref(itemUrl,displayTitle);
+            }
+            else
+                row.addCell().addXref(itemUrl,T_untitled);
+
+            // Owning Collection
+            row.addCell().addXref(collUrl,collectionName);
+        }//end while
+        
+        //Display limit text &amp; link to allow user to override this default limit
+        if(!displayAll &amp;&amp; count&gt;limit)
+        {
+            Para limitedList = completedSubmissions.addPara();
+            limitedList.addContent(T_c_limit);
+            limitedList.addXref(contextPath + "/submissions?all", T_c_displayall);
+        }    
+    }
     
 }

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	Fri Jul 29 18:05:17 2011
@@ -572,6 +572,14 @@
 	&lt;message key="xmlui.Submission.Submissions.status_6"&gt;Submission being edited&lt;/message&gt;
 	&lt;message key="xmlui.Submission.Submissions.status_7"&gt;Submission has been archived&lt;/message&gt;
 	&lt;message key="xmlui.Submission.Submissions.status_unknown"&gt;Unknown state&lt;/message&gt;
+        &lt;!-- Same transformer, completed submissions section --&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.head"&gt;Archived Submissions&lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.info"&gt;These are your completed submissions which have been accepted into DSpace.&lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.column1"&gt;Date accepted&lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.column2"&gt;Title&lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.column3"&gt;Collection&lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.limit"&gt;We've only listed 50 of your archived submissions above. &lt;/message&gt;
+        &lt;message key="xmlui.Submission.Submissions.completed.displayall"&gt;Display all my archived submissions.&lt;/message&gt;
 
 	&lt;!-- submission progress bar messages --&gt;
 	&lt;message key="xmlui.Submission.submit.progressbar.initial-questions"&gt;Initial Questions&lt;/message&gt;

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Mirage/lib/css/style.css
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Mirage/lib/css/style.css	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Mirage/lib/css/style.css	Fri Jul 29 18:05:17 2011
@@ -835,6 +835,7 @@
 #aspect_administrative_registries_FormatRegistryMain_table_bitstream-format-registry,
 #aspect_submission_Submissions_table_unfinished-submissions,
 #aspect_submission_Submissions_table_submissions-inprogress,
+#aspect_submission_Submissions_table_completed-submissions,
 table.detailtable {
     margin-top: 10px;
     margin-bottom: 10px;
@@ -846,6 +847,7 @@
 #aspect_administrative_registries_FormatRegistryMain_table_bitstream-format-registry tr,
 #aspect_submission_Submissions_table_unfinished-submissions tr,
 #aspect_submission_Submissions_table_submissions-inprogress tr,
+#aspect_submission_Submissions_table_completed-submissions tr,
 table.detailtable tr {
     line-height: 1.6em;
     border: 1px solid #ebebeb;
@@ -856,6 +858,7 @@
 #aspect_administrative_registries_FormatRegistryMain_table_bitstream-format-registry tr.even,
 #aspect_submission_Submissions_table_unfinished-submissions tr.even,
 #aspect_submission_Submissions_table_submissions-inprogress tr.even,
+#aspect_submission_Submissions_table_completed-submissions tr.even,
 table.detailtable tr.even {
     background-color: #fafafa;
 }
@@ -865,6 +868,7 @@
 #aspect_administrative_registries_FormatRegistryMain_table_bitstream-format-registry td,
 #aspect_submission_Submissions_table_unfinished-submissions td,
 #aspect_submission_Submissions_table_submissions-inprogress td,
+#aspect_submission_Submissions_table_completed-submissions td,
 table.detailtable td {
     padding: 5px 10px;
     text-align: justify;
@@ -876,7 +880,8 @@
 #aspect_administrative_registries_MetadataRegistryMain_table_metadata-registry-main-table tr.ds-table-header-row,
 #aspect_administrative_registries_FormatRegistryMain_table_bitstream-format-registry tr.ds-table-header-row,
 #aspect_submission_Submissions_table_unfinished-submissions tr.ds-table-header-row,
-#aspect_submission_Submissions_table_submissions-inprogress tr.ds-table-header-row {
+#aspect_submission_Submissions_table_submissions-inprogress tr.ds-table-header-row,
+#aspect_submission_Submissions_table_completed-submissions tr.ds-table-header-row {
     border: none;
 }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27869909">[DSpace-changelog] r6508 - in
	modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0: .
	webapp webapp/src webapp/src/main webapp/src/main/java
	webapp/src/main/java/org webapp/src/main/java/org/dspace
	webapp/src/main/java/org/dspace/solr
	webapp/src/main/java/org/dspace/solr/filters
	webapp/src/main/webapp webapp/src/main/webapp/WEB-INF
	webapp/src/main/webapp/admin
	webapp/src/main/webapp/admin/replication</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-29 08:18</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: KevinVandeVelde
Date: Fri Jul 29 08:18:13 2011
New Revision: 6508

Log:
Solr 3.3.0 webapp and local host restriction filter

Added:
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/pom.xml
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/pom.xml
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/solr/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/solr/filters/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/solr/filters/LocalHostRestrictionFilter.java
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/web.xml
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/weblogic.xml
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/_info.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/action.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/distributiondump.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/favicon.ico   (contents, props changed)
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/form.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-file.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-properties.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/header.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/index.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/jquery-1.4.3.min.js
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/meta.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/raw-schema.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/header.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/index.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/schema.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/solr-admin.css
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/solr_small.png   (contents, props changed)
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/tabular.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.jsp
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.xsl
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/favicon.ico   (contents, props changed)
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/index.jsp

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/pom.xml
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/pom.xml	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,138 @@
+&lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
+
+   &lt;!--
+      Licensed to the Apache Software Foundation (ASF) under one or more
+      contributor license agreements. See the NOTICE file distributed
+      with this work for additional information regarding copyright
+      ownership. The ASF licenses this file to you under the Apache
+      License, Version 2.0 (the "License"); you may not use this file
+      except in compliance with the License. You may obtain a copy of
+      the License at <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a> Unless
+      required by applicable law or agreed to in writing, software
+      distributed under the License is distributed on an "AS IS" BASIS,
+      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
+      implied. See the License for the specific language governing
+      permissions and limitations under the License.
+   --&gt;
+
+   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
+
+   &lt;parent&gt;
+      &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+      &lt;artifactId&gt;dspace-pom&lt;/artifactId&gt;
+      &lt;version&gt;10&lt;/version&gt;
+   &lt;/parent&gt;
+
+   &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+   &lt;artifactId&gt;dspace-solr-parent&lt;/artifactId&gt;
+   &lt;name&gt;Apache Solr Parent POM&lt;/name&gt;
+   &lt;version&gt;3.3.0.0-SNAPSHOT&lt;/version&gt;
+   &lt;description&gt;Apache Solr Parent POM&lt;/description&gt;
+   &lt;url&gt;<a href="http://lucene.apache.org/solr&lt;/url" target="_new">http://lucene.apache.org/solr&lt;/url</a>&gt;
+   &lt;packaging&gt;pom&lt;/packaging&gt;
+
+   &lt;issueManagement&gt;
+      &lt;system&gt;JIRA&lt;/system&gt;
+      &lt;url&gt;<a href="http://issues.apache.org/jira/browse/SOLR&lt;/url" target="_new">http://issues.apache.org/jira/browse/SOLR&lt;/url</a>&gt;
+   &lt;/issueManagement&gt;
+
+
+   &lt;inceptionYear&gt;2006&lt;/inceptionYear&gt;
+
+   &lt;licenses&gt;
+      &lt;license&gt;
+         &lt;name&gt;Apache 2&lt;/name&gt;
+         &lt;url&gt;<a href="http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url" target="_new">http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url</a>&gt;
+      &lt;/license&gt;
+   &lt;/licenses&gt;
+
+   &lt;scm&gt;
+      &lt;connection&gt;
+      scm:svn:<a href="https://scm.dspace.org/svn/repo/modules/dspace-solr/branches" target="_new">https://scm.dspace.org/svn/repo/modules/dspace-solr/branches</a>
+    &lt;/connection&gt;
+      &lt;developerConnection&gt;
+      scm:svn:<a href="https://scm.dspace.org/svn/repo/modules/dspace-solr/branches" target="_new">https://scm.dspace.org/svn/repo/modules/dspace-solr/branches</a>
+    &lt;/developerConnection&gt;
+     &lt;url&gt;<a href="http://svn.apache.org/viewvc/maven/pom/branches/dspace-solr-parent-3.3.0.0&lt;/url" target="_new">http://svn.apache.org/viewvc/maven/pom/branches/dspace-solr-parent-3.3.0.0&lt;/url</a>&gt;
+  &lt;/scm&gt;
+
+   &lt;modules&gt;
+      &lt;module&gt;webapp&lt;/module&gt;
+   &lt;/modules&gt;
+
+   &lt;build&gt;
+      &lt;plugins&gt;
+         &lt;plugin&gt;
+            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
+            &lt;configuration&gt;
+               &lt;source&gt;1.5&lt;/source&gt;
+               &lt;target&gt;1.5&lt;/target&gt;
+            &lt;/configuration&gt;
+         &lt;/plugin&gt;
+         &lt;plugin&gt;
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
+            &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
+            &lt;version&gt;2.1.1&lt;/version&gt;
+            &lt;executions&gt;
+               &lt;execution&gt;
+                  &lt;id&gt;attach-sources&lt;/id&gt;
+                  &lt;phase&gt;package&lt;/phase&gt;
+                  &lt;goals&gt;
+                     &lt;goal&gt;jar-no-fork&lt;/goal&gt;
+                  &lt;/goals&gt;
+               &lt;/execution&gt;
+            &lt;/executions&gt;
+         &lt;/plugin&gt;
+         &lt;plugin&gt;
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
+            &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
+            &lt;executions&gt;
+               &lt;execution&gt;
+                  &lt;id&gt;attach-javadocs&lt;/id&gt;
+                  &lt;phase&gt;package&lt;/phase&gt;
+                  &lt;goals&gt;
+                     &lt;goal&gt;jar&lt;/goal&gt;
+                  &lt;/goals&gt;
+               &lt;/execution&gt;
+            &lt;/executions&gt;
+         &lt;/plugin&gt;
+
+         &lt;plugin&gt;
+                &lt;groupId&gt;com.google.code.maven-license-plugin&lt;/groupId&gt;
+                &lt;artifactId&gt;maven-license-plugin&lt;/artifactId&gt;
+                &lt;version&gt;1.4.0&lt;/version&gt;
+                &lt;configuration&gt;
+                    &lt;header&gt;<a href="http://scm.dspace.org/svn/repo/licenses/LICENSE_HEADER&lt;/header" target="_new">http://scm.dspace.org/svn/repo/licenses/LICENSE_HEADER&lt;/header</a>&gt;
+                    &lt;excludes&gt;
+                        &lt;exclude&gt;src/**&lt;/exclude&gt;
+                    &lt;/excludes&gt;
+                    &lt;properties /&gt;
+                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
+                &lt;/configuration&gt;
+                &lt;executions&gt;
+                    &lt;execution&gt;
+                        &lt;goals&gt;
+                            &lt;goal&gt;check&lt;/goal&gt;
+                        &lt;/goals&gt;
+                    &lt;/execution&gt;
+                &lt;/executions&gt;
+            &lt;/plugin&gt;
+
+      &lt;/plugins&gt;
+   &lt;/build&gt;
+
+   &lt;dependencies&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
+         &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
+         &lt;version&gt;2.5&lt;/version&gt;
+         &lt;scope&gt;provided&lt;/scope&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;junit&lt;/groupId&gt;
+         &lt;artifactId&gt;junit&lt;/artifactId&gt;
+         &lt;version&gt;4.7&lt;/version&gt;
+         &lt;scope&gt;test&lt;/scope&gt;
+      &lt;/dependency&gt;
+   &lt;/dependencies&gt;
+&lt;/project&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/pom.xml
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/pom.xml	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,127 @@
+&lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
+
+   &lt;!--
+      Licensed to the Apache Software Foundation (ASF) under one or more
+      contributor license agreements. See the NOTICE file distributed
+      with this work for additional information regarding copyright
+      ownership. The ASF licenses this file to you under the Apache
+      License, Version 2.0 (the "License"); you may not use this file
+      except in compliance with the License. You may obtain a copy of
+      the License at <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a> Unless
+      required by applicable law or agreed to in writing, software
+      distributed under the License is distributed on an "AS IS" BASIS,
+      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
+      implied. See the License for the specific language governing
+      permissions and limitations under the License.
+   --&gt;
+
+   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
+
+   &lt;parent&gt;
+      &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+      &lt;artifactId&gt;dspace-solr-parent&lt;/artifactId&gt;
+      &lt;version&gt;3.3.0.0-SNAPSHOT&lt;/version&gt;
+   &lt;/parent&gt;
+
+   &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+   &lt;artifactId&gt;dspace-solr&lt;/artifactId&gt;
+   &lt;name&gt;Apache Solr Webapp&lt;/name&gt;
+   &lt;version&gt;3.3.0.0&lt;/version&gt;
+   &lt;description&gt;Apache Solr Server&lt;/description&gt;
+   &lt;packaging&gt;war&lt;/packaging&gt;
+
+   &lt;scm&gt;
+      &lt;connection&gt;
+      scm:svn:<a href="https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp" target="_new">https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp</a>
+    &lt;/connection&gt;
+      &lt;developerConnection&gt;
+      scm:svn:<a href="https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp" target="_new">https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp</a>
+    &lt;/developerConnection&gt;
+     &lt;url&gt;<a href="https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp&lt;/url" target="_new">https://scm.dspace.org/svn/repo/modules/dspace-solr/tags/dspace-solr-parent-1.4.1.1/webapp&lt;/url</a>&gt;
+  &lt;/scm&gt;
+
+   &lt;build&gt;
+      &lt;plugins&gt;
+         &lt;plugin&gt;
+            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
+            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
+            &lt;version&gt;2.1-alpha-2&lt;/version&gt;
+            &lt;executions&gt;
+               &lt;execution&gt;
+                  &lt;id&gt;webapp&lt;/id&gt;
+                  &lt;configuration&gt;
+                     &lt;primaryArtifact&gt;true&lt;/primaryArtifact&gt;
+                     &lt;archiveClasses&gt;true&lt;/archiveClasses&gt;
+                     &lt;attachClasses&gt;true&lt;/attachClasses&gt;
+                     &lt;classesClassifier&gt;classes&lt;/classesClassifier&gt;
+                     &lt;warSourceExcludes&gt;WEB-INF/classes/**&lt;/warSourceExcludes&gt;
+                     &lt;packagingExcludes&gt;WEB-INF/classes/**&lt;/packagingExcludes&gt;
+                  &lt;/configuration&gt;
+                  &lt;goals&gt;
+                     &lt;goal&gt;war&lt;/goal&gt;
+                  &lt;/goals&gt;
+                  &lt;phase&gt;package&lt;/phase&gt;
+               &lt;/execution&gt;
+               &lt;execution&gt;
+                  &lt;id&gt;skinny&lt;/id&gt;
+                  &lt;configuration&gt;
+                     &lt;primaryArtifact&gt;false&lt;/primaryArtifact&gt;
+                     &lt;classifier&gt;skinny&lt;/classifier&gt;
+                     &lt;warSourceExcludes&gt;WEB-INF/lib/**,WEB-INF/classes/**&lt;/warSourceExcludes&gt;
+                     &lt;packagingExcludes&gt;WEB-INF/lib/**,WEB-INF/classes/**&lt;/packagingExcludes&gt;
+                  &lt;/configuration&gt;
+                  &lt;goals&gt;
+                     &lt;goal&gt;war&lt;/goal&gt;
+                  &lt;/goals&gt;
+                  &lt;phase&gt;package&lt;/phase&gt;
+               &lt;/execution&gt;
+            &lt;/executions&gt;
+         &lt;/plugin&gt;
+      &lt;/plugins&gt;
+   &lt;/build&gt;
+   &lt;dependencies&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-solrj&lt;/artifactId&gt;
+         &lt;version&gt;3.3.0&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-core&lt;/artifactId&gt;
+         &lt;version&gt;3.3.0&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-clustering&lt;/artifactId&gt;
+         &lt;version&gt;3.3.0&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-dataimporthandler&lt;/artifactId&gt;
+         &lt;version&gt;3.3.0&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-cell&lt;/artifactId&gt;
+         &lt;version&gt;3.3.0&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;
+         &lt;artifactId&gt;solr-velocity&lt;/artifactId&gt;
+         &lt;version&gt;1.4.1&lt;/version&gt;
+      &lt;/dependency&gt;
+      &lt;dependency&gt;
+         &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
+         &lt;artifactId&gt;jetty&lt;/artifactId&gt;
+         &lt;version&gt;6.1.21&lt;/version&gt;
+         &lt;scope&gt;provided&lt;/scope&gt;
+         &lt;exclusions&gt;
+            &lt;exclusion&gt;
+               &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
+               &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
+            &lt;/exclusion&gt;
+         &lt;/exclusions&gt;
+      &lt;/dependency&gt;
+   &lt;/dependencies&gt;
+
+&lt;/project&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/solr/filters/LocalHostRestrictionFilter.java
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/java/org/dspace/solr/filters/LocalHostRestrictionFilter.java	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,75 @@
+/**
+ * $Id: $
+ * $URL: $
+ * *************************************************************************
+ * Copyright (c) 2002-2009, DuraSpace.  All rights reserved
+ * Licensed under the DuraSpace License.
+ *
+ * A copy of the DuraSpace License has been included in this
+ * distribution and is available at: <a href="http://scm.dspace.org/svn/repo/licenses/LICENSE.txt" target="_new">http://scm.dspace.org/svn/repo/licenses/LICENSE.txt</a>
+ */
+package org.dspace.solr.filters;
+
+import java.io.IOException;
+import java.net.InetAddress;
+
+import javax.servlet.Filter;
+import javax.servlet.FilterChain;
+import javax.servlet.FilterConfig;
+import javax.servlet.ServletException;
+import javax.servlet.ServletRequest;
+import javax.servlet.ServletResponse;
+import javax.servlet.http.HttpServletRequest;
+import javax.servlet.http.HttpServletResponse;
+
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+public class LocalHostRestrictionFilter implements Filter {
+
+	private static Log log = LogFactory
+			.getLog(LocalHostRestrictionFilter.class);
+
+	private boolean enabled = true;
+
+	public LocalHostRestrictionFilter() {
+		// TODO Auto-generated constructor stub
+	}
+
+	public void destroy() {
+		// TODO Auto-generated method stub
+
+	}
+
+	public void doFilter(ServletRequest request, ServletResponse response,
+			FilterChain chain) throws IOException, ServletException {
+
+		if(enabled){
+			InetAddress ia = InetAddress.getLocalHost();
+			String localAddr = ia.getHostAddress();
+			String remoteAddr = request.getRemoteAddr();
+
+			if(!(localAddr.equals(remoteAddr) || remoteAddr.equals("127.0.0.1") || remoteAddr.startsWith("0:0:0:0:0:0:0:1")))
+			{
+				((HttpServletResponse)response).sendError(403);
+		                return;
+			}
+
+		}
+
+		chain.doFilter(request, response);
+	}
+
+	/**
+	 *
+	 */
+	public void init(FilterConfig arg0) throws ServletException {
+		String restrict = arg0.getServletContext().getInitParameter("LocalHostRestrictionFilter.localhost");
+		if("false".equalsIgnoreCase(restrict))
+		{
+			enabled = false;
+		}
+
+	}
+
+}

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/web.xml
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/web.xml	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,171 @@
+&lt;?xml version="1.0" encoding="UTF-8"?&gt;
+&lt;!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "<a href="http://java.sun.com/dtd/web-app_2_3.dtd" target="_new">http://java.sun.com/dtd/web-app_2_3.dtd</a>"&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+
+&lt;web-app&gt;
+
+  &lt;!-- Uncomment if you are trying to use a Resin version before 3.0.19.
+    Their XML implementation isn't entirely compatible with Xerces.
+    Below are the implementations to use with Sun's JVM.
+  &lt;system-property javax.xml.xpath.XPathFactory=
+             "com.sun.org.apache.xpath.internal.jaxp.XPathFactoryImpl"/&gt;
+  &lt;system-property javax.xml.parsers.DocumentBuilderFactory=
+             "com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl"/&gt;
+  &lt;system-property javax.xml.parsers.SAXParserFactory=
+             "com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl"/&gt;
+   --&gt;
+
+  &lt;!-- People who want to hardcode their "Solr Home" directly into the
+       WAR File can set the JNDI property here...
+   --&gt;
+  &lt;!--
+    &lt;env-entry&gt;
+       &lt;env-entry-name&gt;solr/home&lt;/env-entry-name&gt;
+       &lt;env-entry-value&gt;/put/your/solr/home/here&lt;/env-entry-value&gt;
+       &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
+    &lt;/env-entry&gt;
+   --&gt;
+   
+  &lt;!-- Any path (name) registered in solrconfig.xml will be sent to that filter --&gt;
+  &lt;filter&gt;
+      &lt;filter-name&gt;LocalHostRestrictionFilter&lt;/filter-name&gt;
+      &lt;filter-class&gt;org.dspace.solr.filters.LocalHostRestrictionFilter&lt;/filter-class&gt;
+   &lt;/filter&gt;
+
+	&lt;!--
+		Any path (name) registered in solrconfig.xml will be sent to that
+		filter
+	--&gt;
+	&lt;filter&gt;
+    &lt;filter-name&gt;SolrRequestFilter&lt;/filter-name&gt;
+    &lt;filter-class&gt;org.apache.solr.servlet.SolrDispatchFilter&lt;/filter-class&gt;
+    &lt;!-- If you are wiring Solr into a larger web application which controls
+         the web context root, you will probably want to mount Solr under
+         a path prefix (app.war with /app/solr mounted into it, for example).
+         You will need to put this prefix in front of the SolrDispatchFilter
+         url-pattern mapping too (/solr/*), and also on any paths for
+         legacy Solr servlet mappings you may be using.
+         For the admin JSP's to work properly in a path-prefixed configuration,
+         the admin folder containing the JSPs needs to be under the app context root
+         named to match the path-prefix.  For example:
+
+            .war
+               xxx
+                 admin
+                   stats.jsp
+    --&gt;
+    &lt;!--
+    &lt;init-param&gt;
+      &lt;param-name&gt;path-prefix&lt;/param-name&gt;
+      &lt;param-value&gt;/xxx&lt;/param-value&gt;
+    &lt;/init-param&gt;
+    --&gt;
+  &lt;/filter&gt;
+
+
+  &lt;filter-mapping&gt;
+      &lt;filter-name&gt;LocalHostRestrictionFilter&lt;/filter-name&gt;
+      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
+  &lt;/filter-mapping&gt;
+
+  &lt;filter-mapping&gt;
+    &lt;!--
+      NOTE: When using multicore, /admin JSP URLs with a core specified
+      such as /solr/coreName/admin/stats.jsp get forwarded by a
+      RequestDispatcher to /solr/admin/stats.jsp with the specified core
+      put into request scope keyed as "org.apache.solr.SolrCore".
+
+      It is unnecessary, and potentially problematic, to have the SolrDispatchFilter
+      configured to also filter on forwards.  Do not configure
+      this dispatcher as &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;.
+    --&gt;
+    &lt;filter-name&gt;SolrRequestFilter&lt;/filter-name&gt;
+    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
+  &lt;/filter-mapping&gt;
+
+  &lt;!-- Otherwise it will continue to the old servlets --&gt;
+  
+  &lt;servlet&gt;
+    &lt;servlet-name&gt;SolrServer&lt;/servlet-name&gt;
+    &lt;display-name&gt;Solr&lt;/display-name&gt;
+    &lt;description&gt;Solr Server&lt;/description&gt;
+    &lt;servlet-class&gt;org.apache.solr.servlet.SolrServlet&lt;/servlet-class&gt;
+    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
+  &lt;/servlet&gt;
+
+  &lt;servlet&gt;
+    &lt;servlet-name&gt;SolrUpdate&lt;/servlet-name&gt;
+    &lt;display-name&gt;SolrUpdate&lt;/display-name&gt;
+    &lt;description&gt;Solr Update Handler&lt;/description&gt;
+    &lt;servlet-class&gt;org.apache.solr.servlet.SolrUpdateServlet&lt;/servlet-class&gt;
+    &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
+  &lt;/servlet&gt;
+
+  &lt;servlet&gt;
+    &lt;servlet-name&gt;Logging&lt;/servlet-name&gt;
+    &lt;servlet-class&gt;org.apache.solr.servlet.LogLevelSelection&lt;/servlet-class&gt;
+  &lt;/servlet&gt;
+
+  &lt;!-- @Deprecated --&gt;
+  &lt;servlet&gt;
+    &lt;servlet-name&gt;ping&lt;/servlet-name&gt;
+    &lt;jsp-file&gt;/admin/ping.jsp&lt;/jsp-file&gt;
+  &lt;/servlet&gt;
+
+  &lt;servlet-mapping&gt;
+    &lt;servlet-name&gt;SolrServer&lt;/servlet-name&gt;
+    &lt;url-pattern&gt;/select/*&lt;/url-pattern&gt;
+  &lt;/servlet-mapping&gt;
+
+  &lt;servlet-mapping&gt;
+    &lt;servlet-name&gt;SolrUpdate&lt;/servlet-name&gt;
+    &lt;url-pattern&gt;/update/*&lt;/url-pattern&gt;
+  &lt;/servlet-mapping&gt;
+
+  &lt;servlet-mapping&gt;
+    &lt;servlet-name&gt;Logging&lt;/servlet-name&gt;
+    &lt;url-pattern&gt;/admin/logging&lt;/url-pattern&gt;
+  &lt;/servlet-mapping&gt;
+
+  &lt;!-- @Deprecated --&gt;
+  &lt;servlet-mapping&gt;
+    &lt;servlet-name&gt;ping&lt;/servlet-name&gt;
+    &lt;url-pattern&gt;/admin/ping&lt;/url-pattern&gt;
+  &lt;/servlet-mapping&gt;
+
+  &lt;!-- @Deprecated --&gt;
+  &lt;servlet-mapping&gt;
+    &lt;servlet-name&gt;Logging&lt;/servlet-name&gt;
+    &lt;url-pattern&gt;/admin/logging.jsp&lt;/url-pattern&gt;
+  &lt;/servlet-mapping&gt;
+  
+  &lt;mime-mapping&gt;
+    &lt;extension&gt;.xsl&lt;/extension&gt;
+    &lt;!-- per <a href="http://www.w3.org/TR/2006/PR-xslt20-20061121/" target="_new">http://www.w3.org/TR/2006/PR-xslt20-20061121/</a> --&gt;
+    &lt;mime-type&gt;application/xslt+xml&lt;/mime-type&gt;
+  &lt;/mime-mapping&gt;
+  &lt;!-- People who want to hardcode their "Solr Home" directly into the
+       WAR File can set the JNDI property here...
+   --&gt;
+    &lt;env-entry&gt;
+        &lt;env-entry-name&gt;solr/home&lt;/env-entry-name&gt;
+        &lt;env-entry-value&gt;${dspace.dir}/solr&lt;/env-entry-value&gt;
+        &lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
+    &lt;/env-entry&gt;
+
+&lt;/web-app&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/weblogic.xml
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/WEB-INF/weblogic.xml	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,12 @@
+&lt;?xml version='1.0' encoding='UTF-8'?&gt;
+&lt;weblogic-web-app
+    xmlns="<a href="http://www.bea.com/ns/weblogic/90" target="_new">http://www.bea.com/ns/weblogic/90</a>"
+    xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
+    xsi:schemaLocation="<a href="http://www.bea.com/ns/weblogic/90" target="_new">http://www.bea.com/ns/weblogic/90</a> <a href="http://www.bea.com/ns/weblogic/90/weblogic-web-app.xsd" target="_new">http://www.bea.com/ns/weblogic/90/weblogic-web-app.xsd</a>"&gt;
+
+    &lt;container-descriptor&gt;
+	&lt;filter-dispatched-requests-enabled&gt;false&lt;/filter-dispatched-requests-enabled&gt;
+    &lt;/container-descriptor&gt;
+
+&lt;/weblogic-web-app&gt;
+

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/_info.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/_info.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,120 @@
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrConfig,
+                 org.apache.solr.core.SolrCore,
+                 org.apache.solr.schema.IndexSchema,
+                 java.io.File"%&gt;
+&lt;%@ page import="java.net.InetAddress"%&gt;
+&lt;%@ page import="java.io.StringWriter"%&gt;
+&lt;%@ page import="org.apache.solr.core.Config"%&gt;
+&lt;%@ page import="org.apache.solr.common.util.XML"%&gt;
+&lt;%@ page import="org.apache.solr.common.SolrException"%&gt;
+&lt;%@ page import="org.apache.lucene.LucenePackage"%&gt;
+&lt;%@ page import="java.net.UnknownHostException" %&gt;
+
+&lt;%!
+  // only try to figure out the hostname once in a static block so 
+  // we don't have a potentially slow DNS lookup on every admin request
+  static InetAddress addr = null;
+  static String hostname = "unknown";
+  static {
+    try {
+      addr = InetAddress.getLocalHost();
+      hostname = addr.getCanonicalHostName();
+    } catch (UnknownHostException e) {
+      //default to unknown
+    }
+  }
+%&gt;
+
+&lt;%
+  // 
+  SolrCore  core = (SolrCore) request.getAttribute("org.apache.solr.SolrCore");
+  if (core == null) {
+    response.sendError( 404, "missing core name in path" );
+    return;
+  }
+    
+  SolrConfig solrConfig = core.getSolrConfig();
+  int port = request.getServerPort();
+  IndexSchema schema = core.getSchema();
+
+  // enabled/disabled is purely from the point of a load-balancer
+  // and has no effect on local server function.  If there is no healthcheck
+  // configured, don't put any status on the admin pages.
+  String enabledStatus = null;
+  String enabledFile = solrConfig.get("admin/healthcheck/text()",null);
+  boolean isEnabled = false;
+  if (enabledFile!=null) {
+    isEnabled = new File(enabledFile).exists();
+  }
+
+  String collectionName = schema!=null ? schema.getName():"unknown";
+
+  String defaultSearch = "";
+  { 
+    StringWriter tmp = new StringWriter();
+    XML.escapeCharData
+      (solrConfig.get("admin/defaultQuery/text()", ""), tmp);
+    defaultSearch = tmp.toString();
+  }
+
+  String solrImplVersion = "";
+  String solrSpecVersion = "";
+  String luceneImplVersion = "";
+  String luceneSpecVersion = "";
+
+  { 
+    Package p;
+    StringWriter tmp;
+
+    p = SolrCore.class.getPackage();
+
+    tmp = new StringWriter();
+    solrImplVersion = p.getImplementationVersion();
+    if (null != solrImplVersion) {
+      XML.escapeCharData(solrImplVersion, tmp);
+      solrImplVersion = tmp.toString();
+    }
+    tmp = new StringWriter();
+    solrSpecVersion = p.getSpecificationVersion() ;
+    if (null != solrSpecVersion) {
+      XML.escapeCharData(solrSpecVersion, tmp);
+      solrSpecVersion = tmp.toString();
+    }
+  
+    p = LucenePackage.class.getPackage();
+
+    tmp = new StringWriter();
+    luceneImplVersion = p.getImplementationVersion();
+    if (null != luceneImplVersion) {
+      XML.escapeCharData(luceneImplVersion, tmp);
+      luceneImplVersion = tmp.toString();
+    }
+    tmp = new StringWriter();
+    luceneSpecVersion = p.getSpecificationVersion() ;
+    if (null != luceneSpecVersion) {
+      XML.escapeCharData(luceneSpecVersion, tmp);
+      luceneSpecVersion = tmp.toString();
+    }
+  }
+  
+  String cwd=System.getProperty("user.dir");
+  String solrHome= solrConfig.getInstanceDir();
+  
+  boolean cachingEnabled = !solrConfig.getHttpCachingConfig().isNever304(); 
+%&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/action.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/action.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,94 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.common.util.XML"%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrCore,
+                 org.apache.solr.schema.IndexSchema,
+                 java.io.File,
+                 java.net.InetAddress,
+                 java.net.UnknownHostException"%&gt;
+&lt;%@ page import="java.util.Date"%&gt;
+&lt;%@include file="header.jsp" %&gt;
+&lt;%
+
+  String action = request.getParameter("action");
+  String enableActionStatus = "";
+  boolean isValid = false;
+
+  if (action != null) {
+    // Validate fname
+    if ("Enable".compareTo(action) == 0) isValid = true;
+    if ("Disable".compareTo(action) == 0) isValid = true;
+  }
+  if (isValid) {
+    if ("Enable".compareTo(action) == 0) {
+      try {
+        File enableFile = new File(enabledFile);
+        if (enableFile.createNewFile()) {
+          enableActionStatus += "Enable Succeeded (enable file ";
+          enableActionStatus += enabledFile;
+          enableActionStatus += " created)";
+        } else {
+          enableActionStatus += "Already Enabled";
+        }
+      } catch(Exception e) {
+          enableActionStatus += "Enable Failed: " + e.toString();
+      }
+    }
+    if ("Disable".compareTo(action) == 0) {
+      try {
+        File enableFile = new File(enabledFile);
+        if (enableFile.delete()) {
+          enableActionStatus = "Disable Succeeded (enable file ";
+          enableActionStatus += enabledFile;
+          enableActionStatus += " removed)";
+        } else {
+          enableActionStatus = "Already Disabled";
+        }
+      } catch(Exception e) {
+          enableActionStatus += "Disable Failed: " + e.toString();
+      }
+    }
+  } else {
+    enableActionStatus = "Illegal Action";
+  }
+  // :TODO: might want to rework this so any logging change happens *after*
+  SolrCore.log.info(enableActionStatus);
+%&gt;
+&lt;br clear="all"&gt;
+&lt;table&gt;
+  &lt;tr&gt;
+    &lt;td&gt;
+      &lt;H3&gt;Action:&lt;/H3&gt;
+    &lt;/td&gt;
+    &lt;td&gt;
+      &lt;% XML.escapeCharData(action, out); %&gt;&lt;br&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+  &lt;tr&gt;
+    &lt;td&gt;
+      &lt;H4&gt;Result:&lt;/H4&gt;
+    &lt;/td&gt;
+    &lt;td&gt;
+      &lt;% XML.escapeCharData(enableActionStatus, out); %&gt;&lt;br&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/table&gt;
+&lt;br&gt;&lt;br&gt;
+    &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,496 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.lucene.analysis.Analyzer,
+                 org.apache.lucene.util.AttributeSource,
+                 org.apache.lucene.util.Attribute,
+                 org.apache.lucene.analysis.TokenStream,
+                 org.apache.lucene.index.Payload,
+                 org.apache.lucene.analysis.CharReader,
+                 org.apache.lucene.analysis.CharStream,
+                 org.apache.lucene.analysis.tokenattributes.*,
+                 org.apache.lucene.util.AttributeReflector,
+                 org.apache.solr.analysis.CharFilterFactory,
+                 org.apache.solr.analysis.TokenFilterFactory,
+                 org.apache.solr.analysis.TokenizerChain,
+                 org.apache.solr.analysis.TokenizerFactory,
+                 org.apache.solr.schema.FieldType,
+                 org.apache.solr.schema.SchemaField,
+                 org.apache.solr.common.util.XML,
+                 javax.servlet.jsp.JspWriter,java.io.IOException
+                "%&gt;
+&lt;%@ page import="java.io.Reader"%&gt;
+&lt;%@ page import="java.io.StringReader"%&gt;
+&lt;%@ page import="java.util.*"%&gt;
+&lt;%@ page import="java.math.BigInteger" %&gt;
+
+&lt;%-- $Id: analysis.jsp 1095519 2011-04-20 21:30:47Z uschindler $ --%&gt;
+&lt;%-- $Source: /cvs/main/searching/org.apache.solrolarServer/resources/admin/analysis.jsp,v $ --%&gt;
+&lt;%-- $Name:  $ --%&gt;
+
+&lt;%@include file="header.jsp" %&gt;
+
+&lt;%
+  // is name a field name or a type name?
+  String nt = request.getParameter("nt");
+  if (nt==null || nt.length()==0) nt="name"; // assume field name
+  nt = nt.toLowerCase(Locale.ENGLISH).trim();
+  String name = request.getParameter("name");
+  if (name==null || name.length()==0) name="";
+  String val = request.getParameter("val");
+  if (val==null || val.length()==0) val="";
+  String qval = request.getParameter("qval");
+  if (qval==null || qval.length()==0) qval="";
+  String verboseS = request.getParameter("verbose");
+  boolean verbose = verboseS!=null &amp;&amp; verboseS.equalsIgnoreCase("on");
+  String qverboseS = request.getParameter("qverbose");
+  boolean qverbose = qverboseS!=null &amp;&amp; qverboseS.equalsIgnoreCase("on");
+  String highlightS = request.getParameter("highlight");
+  boolean highlight = highlightS!=null &amp;&amp; highlightS.equalsIgnoreCase("on");
+%&gt;
+
+&lt;br clear="all"&gt;
+
+&lt;h2&gt;Field Analysis&lt;/h2&gt;
+
+&lt;form method="POST" action="analysis.jsp" accept-charset="UTF-8"&gt;
+&lt;table&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;strong&gt;Field
+          &lt;select name="nt"&gt;
+    &lt;option &lt;%= nt.equals("name") ? "selected=\"selected\"" : "" %&gt; &gt;name&lt;/option&gt;
+    &lt;option &lt;%= nt.equals("type") ? "selected=\"selected\"" : "" %&gt;&gt;type&lt;/option&gt;
+          &lt;/select&gt;&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+  &lt;input class="std" name="name" type="text" value="&lt;% XML.escapeCharData(name, out); %&gt;"&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;strong&gt;Field value (Index)&lt;/strong&gt;
+  &lt;br/&gt;
+  verbose output
+  &lt;input name="verbose" type="checkbox"
+     &lt;%= verbose ? "checked=\"true\"" : "" %&gt; &gt;
+    &lt;br/&gt;
+  highlight matches
+  &lt;input name="highlight" type="checkbox"
+     &lt;%= highlight ? "checked=\"true\"" : "" %&gt; &gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+  &lt;textarea class="std" rows="8" cols="70" name="val"&gt;&lt;% XML.escapeCharData(val,out); %&gt;&lt;/textarea&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;strong&gt;Field value (Query)&lt;/strong&gt;
+  &lt;br/&gt;
+  verbose output
+  &lt;input name="qverbose" type="checkbox"
+     &lt;%= qverbose ? "checked=\"true\"" : "" %&gt; &gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+  &lt;textarea class="std" rows="1" cols="70" name="qval"&gt;&lt;% XML.escapeCharData(qval,out); %&gt;&lt;/textarea&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+
+  &lt;td&gt;
+  &lt;/td&gt;
+
+  &lt;td&gt;
+  &lt;input class="stdbutton" type="submit" value="analyze"&gt;
+  &lt;/td&gt;
+
+&lt;/tr&gt;
+&lt;/table&gt;
+&lt;/form&gt;
+
+
+&lt;%
+  SchemaField field=null;
+
+  if (name!="") {
+    if (nt.equals("name")) {
+      try {
+        field = schema.getField(name);
+      } catch (Exception e) {
+        out.print("&lt;strong&gt;Unknown Field: ");
+        XML.escapeCharData(name, out);
+        out.println("&lt;/strong&gt;");
+      }
+    } else {
+       FieldType t = schema.getFieldTypes().get(name);
+       if (null == t) {
+        out.print("&lt;strong&gt;Unknown Field Type: ");
+        XML.escapeCharData(name, out);
+        out.println("&lt;/strong&gt;");
+       } else {
+         field = new SchemaField("fakefieldoftype:"+name, t);
+       }
+    }
+  }
+
+  if (field!=null) {
+    HashSet&lt;String&gt; matches = null;
+    if (qval!="" &amp;&amp; highlight) {
+      Reader reader = new StringReader(qval);
+      Analyzer analyzer =  field.getType().getQueryAnalyzer();
+      TokenStream tstream = analyzer.reusableTokenStream(field.getName(),reader);
+      CharTermAttribute termAtt = tstream.addAttribute(CharTermAttribute.class);
+      tstream.reset();
+      matches = new HashSet&lt;String&gt;();
+      while (tstream.incrementToken()) {
+        matches.add(termAtt.toString());
+      }
+    }
+
+    if (val!="") {
+      out.println("&lt;h3&gt;Index Analyzer&lt;/h3&gt;");
+      doAnalyzer(out, field, val, false, verbose, matches);
+    }
+    if (qval!="") {
+      out.println("&lt;h3&gt;Query Analyzer&lt;/h3&gt;");
+      doAnalyzer(out, field, qval, true, qverbose, null);
+    }
+  }
+
+%&gt;
+
+
+&lt;/body&gt;
+&lt;/html&gt;
+
+
+&lt;%!
+  private static void doAnalyzer(JspWriter out, SchemaField field, String val, boolean queryAnalyser, boolean verbose, Set&lt;String&gt; match) throws Exception {
+
+    FieldType ft = field.getType();
+     Analyzer analyzer = queryAnalyser ?
+             ft.getQueryAnalyzer() : ft.getAnalyzer();
+     if (analyzer instanceof TokenizerChain) {
+       TokenizerChain tchain = (TokenizerChain)analyzer;
+       CharFilterFactory[] cfiltfacs = tchain.getCharFilterFactories();
+       TokenizerFactory tfac = tchain.getTokenizerFactory();
+       TokenFilterFactory[] filtfacs = tchain.getTokenFilterFactories();
+
+       if( cfiltfacs != null ){
+         String source = val;
+         for(CharFilterFactory cfiltfac : cfiltfacs ){
+           CharStream reader = CharReader.get(new StringReader(source));
+           reader = cfiltfac.create(reader);
+           if(verbose){
+             writeHeader(out, cfiltfac.getClass(), cfiltfac.getArgs());
+             source = writeCharStream(out, reader);
+           }
+         }
+       }
+
+       TokenStream tstream = tfac.create(tchain.charStream(new StringReader(val)));
+       List&lt;AttributeSource&gt; tokens = getTokens(tstream);
+       if (verbose) {
+         writeHeader(out, tfac.getClass(), tfac.getArgs());
+       }
+
+       writeTokens(out, tokens, ft, verbose, match);
+
+       for (TokenFilterFactory filtfac : filtfacs) {
+         if (verbose) {
+           writeHeader(out, filtfac.getClass(), filtfac.getArgs());
+         }
+
+         final Iterator&lt;AttributeSource&gt; iter = tokens.iterator();
+         tstream = filtfac.create( new TokenStream(tstream.getAttributeFactory()) {
+           
+           public boolean incrementToken() throws IOException {
+             if (iter.hasNext()) {
+               clearAttributes();
+               AttributeSource token = iter.next();
+               Iterator&lt;Class&lt;? extends Attribute&gt;&gt; atts = token.getAttributeClassesIterator();
+               while (atts.hasNext()) // make sure all att impls in the token exist here
+                 addAttribute(atts.next());
+               token.copyTo(this);
+               return true;
+             } else {
+               return false;
+             }
+           }
+          }
+         );
+         tokens = getTokens(tstream);
+
+         writeTokens(out, tokens, ft, verbose, match);
+       }
+
+     } else {
+       TokenStream tstream = analyzer.reusableTokenStream(field.getName(),new StringReader(val));
+       tstream.reset();
+       List&lt;AttributeSource&gt; tokens = getTokens(tstream);
+       if (verbose) {
+         writeHeader(out, analyzer.getClass(), Collections.EMPTY_MAP);
+       }
+       writeTokens(out, tokens, ft, verbose, match);
+     }
+  }
+
+
+  static List&lt;AttributeSource&gt; getTokens(TokenStream tstream) throws IOException {
+    List&lt;AttributeSource&gt; tokens = new ArrayList&lt;AttributeSource&gt;();
+    tstream.reset();
+    while (tstream.incrementToken()) {
+      tokens.add(tstream.cloneAttributes());
+    }
+    return tokens;
+  }
+
+  private static class ReflectItem {
+    final Class&lt;? extends Attribute&gt; attClass;
+    final String key;
+    final Object value;
+    
+    ReflectItem(Class&lt;? extends Attribute&gt; attClass, String key, Object value) {
+      this.attClass = attClass;
+      this.key = key;
+      this.value = value;
+    }
+  }
+  
+  private static class Tok {
+    final String term;
+    final int pos;
+    final List&lt;ReflectItem&gt; reflected = new ArrayList&lt;ReflectItem&gt;();
+    
+    Tok(AttributeSource token, int pos) {
+      this.term = token.addAttribute(CharTermAttribute.class).toString();
+      this.pos = pos;
+      token.reflectWith(new AttributeReflector() {
+        public void reflect(Class&lt;? extends Attribute&gt; attClass, String key, Object value) {
+          // leave out position and term
+          if (CharTermAttribute.class.isAssignableFrom(attClass))
+            return;
+          if (PositionIncrementAttribute.class.isAssignableFrom(attClass))
+            return;
+          reflected.add(new ReflectItem(attClass, key, value));
+        }
+      });
+    }
+  }
+
+  private static interface TokToStr {
+    public String toStr(Tok o);
+  }
+
+  private static void printRow(JspWriter out, String header, String headerTitle, List&lt;Tok&gt;[] arrLst, TokToStr converter, boolean multival, boolean verbose, Set&lt;String&gt; match) throws IOException {
+    // find the maximum number of terms for any position
+    int maxSz=1;
+    if (multival) {
+      for (List lst : arrLst) {
+        maxSz = Math.max(lst.size(), maxSz);
+      }
+    }
+
+
+    for (int idx=0; idx&lt;maxSz; idx++) {
+      out.println("&lt;tr&gt;");
+      if (idx==0 &amp;&amp; verbose) {
+        if (header != null) {
+          out.print("&lt;th NOWRAP rowspan=\""+maxSz+"\"");
+          if (headerTitle != null) {
+            out.print(" title=\"");
+            XML.escapeCharData(headerTitle,out);
+            out.print("\"");
+          }
+          out.print("&gt;");
+          XML.escapeCharData(header,out);
+          out.println("&lt;/th&gt;");
+        }
+      }
+
+      for (int posIndex=0; posIndex&lt;arrLst.length; posIndex++) {
+        List&lt;Tok&gt; lst = arrLst[posIndex];
+        if (lst.size() &lt;= idx) continue;
+        if (match!=null &amp;&amp; match.contains(lst.get(idx).term)) {
+          out.print("&lt;td class=\"highlight\"");
+        } else {
+          out.print("&lt;td class=\"debugdata\"");
+        }
+
+        // if the last value in the column, use up
+        // the rest of the space via rowspan.
+        if (lst.size() == idx+1 &amp;&amp; lst.size() &lt; maxSz) {
+          out.print("rowspan=\""+(maxSz-lst.size()+1)+'"');
+        }
+
+        out.print('&gt;');
+
+        XML.escapeCharData(converter.toStr(lst.get(idx)), out);
+        out.print("&lt;/td&gt;");
+      }
+
+      out.println("&lt;/tr&gt;");
+    }
+
+  }
+
+  /* this method is totally broken, as no charset involved: new String(byte[]) is crap!
+  static String isPayloadString( Payload p ) {
+    String sp = new String(p.getData());
+    for( int i=0; i &lt; sp.length(); i++ ) {
+      if( !Character.isDefined( sp.charAt(i) ) || Character.isISOControl( sp.charAt(i) ) )
+        return "";
+      }
+    return "(" + sp + ")";
+  }
+  */
+
+  static void writeHeader(JspWriter out, Class clazz, Map&lt;String,String&gt; args) throws IOException {
+    out.print("&lt;h4&gt;");
+    out.print(clazz.getName());
+    XML.escapeCharData("   "+args,out);
+    out.println("&lt;/h4&gt;");
+  }
+
+
+
+  // readable, raw, pos, type, start/end
+  static void writeTokens(JspWriter out, List&lt;AttributeSource&gt; tokens, final FieldType ft, boolean verbose, Set&lt;String&gt; match) throws IOException {
+
+    // Use a map to tell what tokens are in what positions
+    // because some tokenizers/filters may do funky stuff with
+    // very large increments, or negative increments.
+    HashMap&lt;Integer,List&lt;Tok&gt;&gt; map = new HashMap&lt;Integer,List&lt;Tok&gt;&gt;();
+    boolean needRaw=false;
+    int pos=0, reflectionCount = -1;
+    for (AttributeSource t : tokens) {
+      String text = t.addAttribute(CharTermAttribute.class).toString();
+      if (!text.equals(ft.indexedToReadable(text))) {
+        needRaw=true;
+      }
+
+      pos += t.addAttribute(PositionIncrementAttribute.class).getPositionIncrement();
+      List lst = map.get(pos);
+      if (lst==null) {
+        lst = new ArrayList(1);
+        map.put(pos,lst);
+      }
+      Tok tok = new Tok(t,pos);
+      // sanity check
+      if (reflectionCount &lt; 0) {
+        reflectionCount = tok.reflected.size();
+      } else {
+        if (reflectionCount != tok.reflected.size())
+          throw new RuntimeException("Should not happen: Number of reflected entries differs for position=" + pos);
+      }
+      lst.add(tok);
+    }
+
+    List&lt;Tok&gt;[] arr = (List&lt;Tok&gt;[])map.values().toArray(new ArrayList[map.size()]);
+
+    // Jetty 6.1.3 miscompiles a generics-enabled version..., without generics:
+    Arrays.sort(arr, new Comparator() {
+      public int compare(Object toks, Object toks1) {
+        return ((List&lt;Tok&gt;)toks).get(0).pos - ((List&lt;Tok&gt;)toks1).get(0).pos;
+      }
+    });
+
+    out.println("&lt;table width=\"auto\" class=\"analysis\" border=\"1\"&gt;");
+
+    if (verbose) {
+      printRow(out, "position", "calculated from " + PositionIncrementAttribute.class.getName(), arr, new TokToStr() {
+        public String toStr(Tok t) {
+          return Integer.toString(t.pos);
+        }
+      },false,verbose,null);
+    }
+
+    printRow(out, "term text", CharTermAttribute.class.getName(), arr, new TokToStr() {
+      public String toStr(Tok t) {
+        return ft.indexedToReadable(t.term);
+      }
+    },true,verbose,match);
+
+    if (verbose) {
+      if (needRaw) {
+        printRow(out, "raw text", CharTermAttribute.class.getName(), arr, new TokToStr() {
+        public String toStr(Tok t) {
+            // page is UTF-8, so anything goes.
+            return t.term;
+          }
+        },true,verbose,match);
+      }
+
+      for (int att=0; att &lt; reflectionCount; att++) {
+        final ReflectItem item0 = arr[0].get(0).reflected.get(att);
+        final int i = att;
+        printRow(out, item0.key, item0.attClass.getName(), arr, new TokToStr() {
+          public String toStr(Tok t) {
+            final ReflectItem item = t.reflected.get(i);
+            if (item0.attClass != item.attClass || !item0.key.equals(item.key))
+              throw new RuntimeException("Should not happen: attribute types suddenly change at position=" + t.pos);
+            if (item.value instanceof Payload) {
+              Payload p = (Payload) item.value;
+              if( null != p ) {
+                BigInteger bi = new BigInteger( p.getData() );
+                String ret = bi.toString( 16 );
+                if (ret.length() % 2 != 0) {
+                  // Pad with 0
+                  ret = "0"+ret;
+                }
+                //TODO maybe fix: ret += isPayloadString(p);
+                return ret;
+              }
+              return "";
+            } else {
+              return (item.value != null) ? item.value.toString() : "";
+            }
+          }
+        },true,verbose,null);
+      }
+    }
+    
+    out.println("&lt;/table&gt;");
+  }
+
+  static String writeCharStream(JspWriter out, CharStream input) throws IOException {
+    out.println("&lt;table width=\"auto\" class=\"analysis\" border=\"1\"&gt;");
+    out.println("&lt;tr&gt;");
+
+    out.print("&lt;th NOWRAP&gt;");
+    XML.escapeCharData("text",out);
+    out.println("&lt;/th&gt;");
+
+    final int BUFFER_SIZE = 1024;
+    char[] buf = new char[BUFFER_SIZE];
+    int len = 0;
+    StringBuilder sb = new StringBuilder();
+    do {
+      len = input.read( buf, 0, BUFFER_SIZE );
+      if( len &gt; 0 )
+        sb.append(buf, 0, len);
+    } while( len == BUFFER_SIZE );
+    out.print("&lt;td class=\"debugdata\"&gt;");
+    XML.escapeCharData(sb.toString(),out);
+    out.println("&lt;/td&gt;");
+    
+    out.println("&lt;/tr&gt;");
+    out.println("&lt;/table&gt;");
+    return sb.toString();
+  }
+
+%&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/analysis.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,179 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id$ --&gt;
+&lt;!-- $URL$ --&gt;
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+  &lt;xsl:output
+    method="html"
+    indent="yes"
+    encoding="utf-8"
+    media-type="text/html"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+  &lt;xsl:template match="/"&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+        &lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;Solr Info&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href=""&gt;
+          &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"/&gt;
+  &lt;/a&gt;
+        &lt;h1&gt;Solr Admin (&lt;xsl:value-of select="solr/meta/collection" /&gt;)&lt;/h1&gt;
+        &lt;div style="margin-top: 1em;"&gt;
+          &lt;h2&gt;Field Analysis&lt;/h2&gt;
+          &lt;xsl:apply-templates/&gt;
+          &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+        &lt;/div&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:include href="meta.xsl"/&gt;
+
+  &lt;xsl:template match="solr/analysis/form"&gt;
+  &lt;form method="POST" action="analysis.jsp"&gt;
+    &lt;table&gt;
+      &lt;tr&gt;
+        &lt;td&gt;
+        &lt;strong&gt;Field name&lt;/strong&gt;
+        &lt;/td&gt;
+        &lt;td&gt;
+          &lt;input class="std" name="name" type="text" value="{field}"/&gt;
+        &lt;/td&gt;
+      &lt;/tr&gt;
+      &lt;tr&gt;
+        &lt;td&gt;
+        &lt;strong&gt;Field value (Index)&lt;/strong&gt;
+        &lt;br/&gt;
+        verbose output &lt;input name="verbose" type="checkbox" checked="true"/&gt;
+        &lt;br/&gt;
+        highlight matches &lt;input name="highlight" type="checkbox" checked="true"/&gt;
+        &lt;/td&gt;
+        &lt;td&gt;
+        &lt;textarea class="std" rows="8" cols="70" name="val"&gt;&lt;xsl:value-of select="fieldIndexValue" /&gt;&lt;/textarea&gt;
+        &lt;/td&gt;
+      &lt;/tr&gt;
+      &lt;tr&gt;
+        &lt;td&gt;
+        &lt;strong&gt;Field value (Query)&lt;/strong&gt;
+        &lt;br/&gt;
+        verbose output &lt;input name="qverbose" type="checkbox" checked="true"/&gt;
+        &lt;/td&gt;
+        &lt;td&gt;
+        &lt;textarea class="std" rows="1" cols="70" name="qval"&gt;&lt;xsl:value-of select="fieldQueryValue" /&gt;&lt;/textarea&gt;
+        &lt;/td&gt;
+      &lt;/tr&gt;
+      &lt;tr&gt;
+        &lt;td&gt;
+        &lt;/td&gt;
+        &lt;td&gt;
+          &lt;input class="stdbutton" type="submit" value="analyze"/&gt;
+        &lt;/td&gt;
+      &lt;/tr&gt;
+    &lt;/table&gt;
+  &lt;/form&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/indexAnalyzer"&gt;
+  &lt;h4&gt;Index Analyzer&lt;/h4&gt;
+  &lt;xsl:for-each select="factory"&gt;
+    &lt;h5 style="margin-left: 1em;"&gt;&lt;xsl:apply-templates select="@class"/&gt;&lt;/h5&gt;
+    &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/indexAnalyzer/factory/args"&gt;
+  &lt;div style="margin-left: 2em; font-weight: bold;"&gt;{
+  &lt;xsl:for-each select="arg"&gt;
+    &lt;xsl:apply-templates select="@name"/&gt;=&lt;xsl:value-of select="."/&gt;, 
+  &lt;/xsl:for-each&gt;
+  }&lt;/div&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/indexAnalyzer/factory/tokens"&gt;
+&lt;div style="margin-left: 2em;"&gt;
+  &lt;table width="auto" class="analysis" border="1"&gt;
+    &lt;tr&gt;
+      &lt;th&gt;text&lt;/th&gt;
+      &lt;th&gt;type&lt;/th&gt;
+      &lt;th&gt;position&lt;/th&gt;
+      &lt;th&gt;start&lt;/th&gt;
+      &lt;th&gt;end&lt;/th&gt;
+    &lt;/tr&gt;
+  &lt;xsl:for-each select="token"&gt;
+    &lt;tr&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@type"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@pos"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@start"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@end"/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:for-each&gt;
+  &lt;/table&gt;
+&lt;/div&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/queryAnalyzer"&gt;
+  &lt;h4&gt;Query Analyzer&lt;/h4&gt;
+  &lt;xsl:for-each select="factory"&gt;
+    &lt;h5 style="margin-left: 1em;"&gt;&lt;xsl:apply-templates select="@class"/&gt;&lt;/h5&gt;
+    &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/queryAnalyzer/factory/args"&gt;
+  &lt;div style="margin-left: 2em; font-weight: bold;"&gt;{
+  &lt;xsl:for-each select="arg"&gt;
+    &lt;xsl:apply-templates select="@name"/&gt;=&lt;xsl:value-of select="."/&gt;, 
+  &lt;/xsl:for-each&gt;
+  }&lt;/div&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match="solr/analysis/results/queryAnalyzer/factory/tokens"&gt;
+&lt;div style="margin-left: 2em;"&gt;
+  &lt;table width="auto" class="analysis" border="1"&gt;
+    &lt;tr&gt;
+      &lt;th&gt;text&lt;/th&gt;
+      &lt;th&gt;type&lt;/th&gt;
+      &lt;th&gt;position&lt;/th&gt;
+      &lt;th&gt;start&lt;/th&gt;
+      &lt;th&gt;end&lt;/th&gt;
+    &lt;/tr&gt;
+  &lt;xsl:for-each select="token"&gt;
+    &lt;tr&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@type"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@pos"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@start"/&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:apply-templates select="@end"/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:for-each&gt;
+  &lt;/table&gt;
+&lt;/div&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/distributiondump.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/distributiondump.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,160 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+
+&lt;%@ page import="org.apache.solr.core.SolrCore,
+                 org.apache.solr.schema.IndexSchema,
+                 java.io.BufferedReader,
+                 java.io.File,
+                 java.io.FilenameFilter,
+                 java.io.FileReader,
+                 java.net.InetAddress,
+                 java.net.UnknownHostException,
+                 java.util.Date"%&gt;
+
+&lt;%@include file="header.jsp" %&gt;
+
+&lt;%
+  File slaveinfo = new File(solrHome + "logs/snappuller.status");
+
+  StringBuffer buffer = new StringBuffer();
+  StringBuffer buffer2 = new StringBuffer();
+  String mode = "";
+
+  if (slaveinfo.canRead()) {
+    // Slave instance
+    mode = "Slave";
+    File slavevers = new File(solrHome + "logs/snapshot.current");
+    BufferedReader inforeader = new BufferedReader(new FileReader(slaveinfo));
+    BufferedReader versreader = new BufferedReader(new FileReader(slavevers));
+    buffer.append("&lt;tr&gt;\n" +
+                    "&lt;td&gt;\n" +
+                      "Version:" +
+                    "&lt;/td&gt;\n" +
+                    "&lt;td&gt;\n")
+          .append(    versreader.readLine())
+          .append(  "&lt;td&gt;\n" +
+                    "&lt;/td&gt;\n" +
+                  "&lt;/tr&gt;\n" +
+                  "&lt;tr&gt;\n" +
+                    "&lt;td&gt;\n" +
+                      "Status:" +
+                    "&lt;/td&gt;\n" +
+                    "&lt;td&gt;\n")
+          .append(    inforeader.readLine())
+          .append(  "&lt;/td&gt;\n" +
+                  "&lt;/tr&gt;\n");
+  } else {
+    // Master instance
+    mode = "Master";
+    File masterdir = new File(solrHome + "logs/clients");
+    FilenameFilter sfilter = new FilenameFilter() {
+        public boolean accept(File dir, String name) {
+            return name.startsWith("snapshot.status");
+        }
+    };
+    FilenameFilter cfilter = new FilenameFilter() {
+        public boolean accept(File dir, String name) {
+            return name.startsWith("snapshot.current");
+        }
+    };
+    File[] clients = masterdir.listFiles(cfilter);
+    if (clients == null) {
+      buffer.append("&lt;tr&gt;\n" +
+                      "&lt;td&gt;\n" +
+                      "&lt;/td&gt;\n" +
+                      "&lt;td&gt;\n" +
+                        "No distribution info present" +
+                      "&lt;/td&gt;\n" +
+                    "&lt;/tr&gt;\n");
+    } else {
+      buffer.append("&lt;h4&gt;Client Snapshot In Use:&lt;/h4&gt;\n" +
+                    "&lt;tr&gt;\n" +
+                      "&lt;th&gt;\n" +
+                      "Client" +
+                      "&lt;/th&gt;\n" +
+                      "&lt;th&gt;\n" +
+                      "Version" +
+                      "&lt;/th&gt;\n" +
+                    "&lt;/tr&gt;\n");
+      int i = 0;
+      while (i &lt; clients.length) {
+        String fileName=clients[i].toString();
+        int p=fileName.indexOf("snapshot.current");
+        String clientName=fileName.substring(p+17);
+        BufferedReader reader = new BufferedReader(new FileReader(clients[i]));
+        buffer.append("&lt;tr&gt;\n" +
+                        "&lt;td&gt;\n" +
+                        clientName +
+                        "&lt;/td&gt;\n" +
+                        "&lt;td&gt;\n")
+              .append(    reader.readLine())
+              .append(  "&lt;/td&gt;\n" +
+                      "&lt;/tr&gt;\n" +
+                      "&lt;tr&gt;\n" +
+                      "&lt;/tr&gt;\n");
+        i++;
+      }
+      clients = masterdir.listFiles(sfilter);
+      if (clients!=null) {
+        buffer.append("&lt;/table&gt;\n" +
+                      "&lt;h4&gt;Client Snapshot Distribution Status:&lt;/h4&gt;\n" +
+                      "&lt;table&gt;\n" +
+                      "&lt;tr&gt;\n" +
+                        "&lt;th&gt;\n" +
+                        "Client" +
+                        "&lt;/th&gt;\n" +
+                        "&lt;th&gt;\n" +
+                        "Status" +
+                        "&lt;/th&gt;\n" +
+                      "&lt;/tr&gt;\n");
+        i = 0;
+        while (i &lt; clients.length) {
+          String fileName=clients[i].toString();
+          int p=fileName.indexOf("snapshot.status");
+          String clientName=fileName.substring(p+16);
+          BufferedReader reader = new BufferedReader(new FileReader(clients[i]));
+          buffer.append("&lt;tr&gt;\n" +
+                          "&lt;td&gt;\n" +
+                          clientName +
+                          "&lt;/td&gt;\n" +
+                          "&lt;td&gt;\n")
+                .append(    reader.readLine())
+                .append(  "&lt;/td&gt;\n" +
+                        "&lt;/tr&gt;\n" +
+                        "&lt;tr&gt;\n" +
+                        "&lt;/tr&gt;\n");
+          i++;
+        }
+      }
+    }
+  }
+%&gt;
+
+
+&lt;br clear="all"&gt;
+&lt;h2&gt;Distribution Info: &lt;%= mode %&gt; Server&lt;/h2&gt;
+&lt;br clear="all" /&gt;
+(&lt;a href="<a href="http://wiki.apache.org/solr/CollectionDistribution"&gt;What" target="_new">http://wiki.apache.org/solr/CollectionDistribution"&gt;What</a> Is This Page?&lt;/a&gt;)
+&lt;br clear="all" /&gt;
+&lt;table&gt;
+&lt;%= buffer %&gt;
+&lt;/table&gt;
+&lt;br&gt;&lt;br&gt;
+    &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/favicon.ico
==============================================================================
Binary file. No diff available.

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/form.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/form.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,137 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@include file="header.jsp" %&gt;
+
+&lt;br clear="all"&gt;
+&lt;form name="queryForm" method="GET" action="../select" accept-charset="UTF-8"&gt;
+&lt;!-- these are good defaults to have if people bookmark the resulting
+     URLs, but they should not show up in the form since they are very
+     output type specific.
+  --&gt;
+&lt;input name="indent" type="hidden" value="on"&gt;
+&lt;input name="version" type="hidden" value="2.2"&gt;
+
+&lt;table&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Solr/Lucene Statement&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;textarea rows="5" cols="60" name="q"&gt;&lt;%= defaultSearch %&gt;&lt;/textarea&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Filter Query&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;textarea rows="2" cols="60" name="fq"&gt;&lt;/textarea&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Start Row&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="start" type="text" value="0"&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Maximum Rows Returned&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="rows" type="text" value="10"&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Fields to Return&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="fl" type="text" value="*,score"&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Query Type&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="qt" type="text"&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Output Type&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="wt" type="text" value=""&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Debug: enable&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="debugQuery" type="checkbox" &gt;
+  &lt;em&gt;&lt;font size="-1"&gt;  Note: you may need to "view source" in your browser to see explain() correctly indented.&lt;/font&gt;&lt;/em&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Debug: explain others&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="explainOther" type="text" &gt;
+  &lt;em&gt;&lt;font size="-1"&gt;  Apply original query scoring to matches of this query to see how they compare.&lt;/font&gt;&lt;/em&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Enable Highlighting&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="hl" type="checkbox" &gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;strong&gt;Fields to Highlight&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	&lt;input name="hl.fl" type="text" &gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;input class="stdbutton" type="submit" value="search" onclick="if (queryForm.q.value.length==0) { alert('no empty queries, please'); return false; } else { queryForm.submit(); return false;} "&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;/table&gt;
+&lt;/form&gt;
+&lt;br clear="all"&gt;
+&lt;em&gt;
+This form demonstrates the most common query options available for the
+built in Query Types.  Please consult the Solr Wiki for additional
+Query Parameters.
+&lt;/em&gt;
+
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-file.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-file.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,72 @@
+&lt;%@ page contentType="text/plain; charset=utf-8" pageEncoding="UTF-8" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.Config,
+                 org.apache.solr.core.SolrCore,
+                 org.apache.solr.core.SolrConfig,
+                 java.io.InputStream,
+                 java.io.InputStreamReader,
+                 java.io.Reader,
+                 java.util.StringTokenizer,
+                 java.util.logging.Logger"%&gt;
+&lt;%!
+  static Logger log = Logger.getLogger(SolrCore.class.getName());
+%&gt;
+&lt;%
+  // NOTE -- this file will be removed in a future release
+  log.warning("Using deprecated JSP: " + request.getRequestURL().append("?").append(request.getQueryString()) + " -- check the ShowFileRequestHandler"  );
+
+  Object ocore = request.getAttribute("org.apache.solr.SolrCore");
+  SolrCore core = ocore instanceof SolrCore? (SolrCore) ocore : SolrCore.getSolrCore();
+  String fname = request.getParameter("file");
+  String optional = request.getParameter("optional");
+  String gettableFiles = core.getSolrConfig().get("admin/gettableFiles","");
+  StringTokenizer st = new StringTokenizer(gettableFiles);
+  InputStream is;
+  boolean isValid = false;
+  boolean isOptional = false;
+  if (fname != null) {
+    // Validate fname
+    while(st.hasMoreTokens()) {
+      if (st.nextToken().compareTo(fname) == 0) isValid = true;
+    }
+  }
+  if (optional!=null &amp;&amp; optional.equalsIgnoreCase("y")) {
+    isOptional=true;
+  }
+  if (isValid) {
+    try {
+    is= core.getSolrConfig().openResource(fname);
+    Reader input = new InputStreamReader(is);
+    char[] buf = new char[4096];
+    while (true) {
+      int len = input.read(buf);
+      if (len&lt;=0) break;
+      out.write(buf,0,len);
+    }
+    }
+    catch (RuntimeException re) {
+      if (!isOptional) {
+        throw re;
+      }
+    }
+  } else {
+    out.println("&lt;ERROR&gt;");
+    out.println("Permission denied for file "+ fname);
+    out.println("&lt;/ERROR&gt;");
+  }
+%&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-properties.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/get-properties.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,24 @@
+&lt;%@ page contentType="text/plain;charset=UTF-8" language="java" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%
+  java.util.Enumeration e = System.getProperties().propertyNames();
+  while(e.hasMoreElements()) {
+    String prop = (String)e.nextElement();
+    out.println(prop + " = " + System.getProperty(prop));
+  }
+%&gt;
\ No newline at end of file

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/header.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/header.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,44 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;html&gt;
+&lt;head&gt;
+&lt;%
+request.setCharacterEncoding("UTF-8");
+%&gt;
+&lt;%@include file="_info.jsp" %&gt;
+&lt;script&gt;
+var host_name="&lt;%= hostname %&gt;"
+&lt;/script&gt;
+
+&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
+&lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;
+&lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+&lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+&lt;title&gt;Solr admin page&lt;/title&gt;
+&lt;/head&gt;
+
+&lt;body&gt;
+&lt;a href="."&gt;&lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Solr"&gt;&lt;/a&gt;
+&lt;h1&gt;Solr Admin (&lt;%= collectionName %&gt;)
+&lt;%= enabledStatus==null ? "" : (isEnabled ? " - Enabled" : " - Disabled") %&gt; &lt;/h1&gt;
+
+&lt;%= hostname %&gt;:&lt;%= port %&gt;&lt;br/&gt;
+cwd=&lt;%= cwd %&gt;  SolrHome=&lt;%= solrHome %&gt;
+&lt;br/&gt;
+&lt;%String cachingStatus = " HTTP caching is ";  %&gt;
+&lt;%= cachingEnabled ? cachingStatus + " ON": cachingStatus + " OFF" %&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/index.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/index.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,162 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+
+&lt;%-- $Id: index.jsp 1089340 2011-04-06 07:49:14Z uschindler $ --%&gt;
+&lt;%-- $Source: /cvs/main/searching/SolrServer/resources/admin/index.jsp,v $ --%&gt;
+&lt;%-- $Name:  $ --%&gt;
+
+&lt;%@ page import="java.util.Date" %&gt;
+&lt;%@ page import="java.util.List" %&gt;
+&lt;%@ page import="java.util.Collection" %&gt;
+&lt;%@ page import="org.apache.solr.request.SolrRequestHandler"%&gt;
+&lt;%@ page import="org.apache.solr.handler.ReplicationHandler" %&gt;
+
+&lt;%-- jsp:include page="header.jsp"/ --%&gt;
+&lt;%-- do a verbatim include so we can use the local vars --%&gt;
+&lt;%@include file="header.jsp" %&gt;
+&lt;%boolean replicationhandler = !core.getRequestHandlers(ReplicationHandler.class).isEmpty();%&gt;
+&lt;br clear="all"&gt;
+&lt;table&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;h3&gt;Solr&lt;/h3&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;% if (null != core.getSchemaResource()) { %&gt;
+    [&lt;a href="file/?contentType=text/xml;charset=utf-8&amp;file=&lt;%=core.getSchemaResource()%&gt;"&gt;Schema&lt;/a&gt;]
+    &lt;% }
+       if (null != core.getConfigResource()) { %&gt;
+    [&lt;a href="file/?contentType=text/xml;charset=utf-8&amp;file=&lt;%=core.getConfigResource()%&gt;"&gt;Config&lt;/a&gt;]
+    &lt;% } %&gt;
+    [&lt;a href="analysis.jsp?highlight=on"&gt;Analysis&lt;/a&gt;]
+    [&lt;a href="schema.jsp"&gt;Schema Browser&lt;/a&gt;] &lt;%if(replicationhandler){%&gt;[&lt;a href="replication/index.jsp"&gt;Replication&lt;/a&gt;]&lt;%}%&gt;
+    &lt;br&gt;
+    [&lt;a href="stats.jsp"&gt;Statistics&lt;/a&gt;]
+    [&lt;a href="registry.jsp"&gt;Info&lt;/a&gt;]
+    [&lt;a href="distributiondump.jsp"&gt;Distribution&lt;/a&gt;]
+    [&lt;a href="ping"&gt;Ping&lt;/a&gt;]
+    [&lt;a href="logging"&gt;Logging&lt;/a&gt;]
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;%-- List the cores (that arent this one) so we can switch --%&gt;
+&lt;% org.apache.solr.core.CoreContainer cores = (org.apache.solr.core.CoreContainer)request.getAttribute("org.apache.solr.CoreContainer");
+  if (cores!=null) {
+    Collection&lt;String&gt; names = cores.getCoreNames();
+    if (names.size() &gt; 1) {%&gt;&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Cores:&lt;/strong&gt;&lt;br&gt;&lt;/td&gt;&lt;td&gt;&lt;%
+    String url = request.getContextPath();
+    for (String name : names) {
+      String lname = name.length()==0 ? cores.getDefaultCoreName() : name; // use the real core name rather than the default
+      if(name.equals(core.getName())) {
+        %&gt;[&lt;%=lname%&gt;]&lt;%
+      } else {
+        %&gt;[&lt;a href="&lt;%=url%&gt;/&lt;%=lname%&gt;/admin/"&gt;&lt;%=lname%&gt;&lt;/a&gt;]&lt;%
+      }
+  }%&gt;&lt;/td&gt;&lt;/tr&gt;&lt;%
+}}%&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+    &lt;strong&gt;App server:&lt;/strong&gt;&lt;br&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    [&lt;a href="get-properties.jsp"&gt;Java Properties&lt;/a&gt;]
+    [&lt;a href="threaddump.jsp"&gt;Thread Dump&lt;/a&gt;]
+  &lt;%
+    if (enabledFile!=null)
+    if (isEnabled) {
+  %&gt;
+  [&lt;a href="action.jsp?action=Disable"&gt;Disable&lt;/a&gt;]
+  &lt;%
+    } else {
+  %&gt;
+  [&lt;a href="action.jsp?action=Enable"&gt;Enable&lt;/a&gt;]
+  &lt;%
+    }
+  %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+
+&lt;%
+ // a quick hack to get rid of get-file.jsp -- note this still spits out invalid HTML
+ out.write( org.apache.solr.handler.admin.ShowFileRequestHandler.getFileContents( "admin-extra.html" ) );
+%&gt;
+
+&lt;/table&gt;&lt;P&gt;
+
+
+&lt;table&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;h3&gt;Make a Query&lt;/h3&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+[&lt;a href="form.jsp"&gt;Full Interface&lt;/a&gt;]
+  &lt;/td&gt;
+  
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  Query String:
+  &lt;/td&gt;
+  &lt;td colspan=2&gt;
+	&lt;form name=queryForm method="GET" action="../select/" accept-charset="UTF-8"&gt;
+        &lt;textarea class="std" rows="4" cols="40" name="q"&gt;&lt;%= defaultSearch %&gt;&lt;/textarea&gt;
+        &lt;input name="version" type="hidden" value="2.2"&gt;
+	&lt;input name="start" type="hidden" value="0"&gt;
+	&lt;input name="rows" type="hidden" value="10"&gt;
+	&lt;input name="indent" type="hidden" value="on"&gt;
+        &lt;br&gt;&lt;input class="stdbutton" type="submit" value="search" 
+        	onclick="if (queryForm.q.value.length==0) { alert('no empty queries, please'); return false; } else { queryForm.submit(); return false;} "&gt;
+	&lt;/form&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;/table&gt;&lt;p&gt;
+
+&lt;table&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+	&lt;h3&gt;Assistance&lt;/h3&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+	[&lt;a href="<a href="http://lucene.apache.org/solr/"&gt;Documentation&lt;/a" target="_new">http://lucene.apache.org/solr/"&gt;Documentation&lt;/a</a>&gt;]
+	[&lt;a href="<a href="http://issues.apache.org/jira/browse/SOLR"&gt;Issue" target="_new">http://issues.apache.org/jira/browse/SOLR"&gt;Issue</a> Tracker&lt;/a&gt;]
+	[&lt;a href="mailto:solr-user@... Email&lt;/a&gt;]
+	&lt;br&gt;
+        [&lt;a href="<a href="http://wiki.apache.org/solr/SolrQuerySyntax"&gt;Solr" target="_new">http://wiki.apache.org/solr/SolrQuerySyntax"&gt;Solr</a> Query Syntax&lt;/a&gt;]
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+  Current Time: &lt;%= new Date() %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+  Server Start At: &lt;%= new Date(core.getStartTime()) %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;/table&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/jquery-1.4.3.min.js
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/jquery-1.4.3.min.js	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,166 @@
+/*!
+ * jQuery JavaScript Library v1.4.3
+ * <a href="http://jquery.com/" target="_new">http://jquery.com/</a>
+ *
+ * Copyright 2010, John Resig
+ * Dual licensed under the MIT or GPL Version 2 licenses.
+ * <a href="http://jquery.org/license" target="_new">http://jquery.org/license</a>
+ *
+ * Includes Sizzle.js
+ * <a href="http://sizzlejs.com/" target="_new">http://sizzlejs.com/</a>
+ * Copyright 2010, The Dojo Foundation
+ * Released under the MIT, BSD, and GPL Licenses.
+ *
+ * Date: Thu Oct 14 23:10:06 2010 -0400
+ */
+(function(E,A){function U(){return false}function ba(){return true}function ja(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function Ga(a){var b,d,e=[],f=[],h,k,l,n,s,v,B,D;k=c.data(this,this.nodeType?"events":"__events__");if(typeof k==="function")k=k.events;if(!(a.liveFired===this||!k||!k.live||a.button&amp;&amp;a.type==="click")){if(a.namespace)D=RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");a.liveFired=this;var H=k.live.slice(0);for(n=0;n&lt;H.length;n++){k=H[n];k.origType.replace(X,
+"")===a.type?f.push(k.selector):H.splice(n--,1)}f=c(a.target).closest(f,a.currentTarget);s=0;for(v=f.length;s&lt;v;s++){B=f[s];for(n=0;n&lt;H.length;n++){k=H[n];if(B.selector===k.selector&amp;&amp;(!D||D.test(k.namespace))){l=B.elem;h=null;if(k.preType==="mouseenter"||k.preType==="mouseleave"){a.type=k.preType;h=c(a.relatedTarget).closest(k.selector)[0]}if(!h||h!==l)e.push({elem:l,handleObj:k,level:B.level})}}}s=0;for(v=e.length;s&lt;v;s++){f=e[s];if(d&amp;&amp;f.level&gt;d)break;a.currentTarget=f.elem;a.data=f.handleObj.data;
+a.handleObj=f.handleObj;D=f.handleObj.origHandler.apply(f.elem,arguments);if(D===false||a.isPropagationStopped()){d=f.level;if(D===false)b=false}}return b}}function Y(a,b){return(a&amp;&amp;a!=="*"?a+".":"")+b.replace(Ha,"`").replace(Ia,"&amp;")}function ka(a,b,d){if(c.isFunction(b))return c.grep(a,function(f,h){return!!b.call(f,h,f)===d});else if(b.nodeType)return c.grep(a,function(f){return f===b===d});else if(typeof b==="string"){var e=c.grep(a,function(f){return f.nodeType===1});if(Ja.test(b))return c.filter(b,
+e,!d);else b=c.filter(b,e)}return c.grep(a,function(f){return c.inArray(f,b)&gt;=0===d})}function la(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&amp;&amp;a[d].nodeName)){var e=c.data(a[d++]),f=c.data(this,e);if(e=e&amp;&amp;e.events){delete f.handle;f.events={};for(var h in e)for(var k in e[h])c.event.add(this,h,e[h][k],e[h][k].data)}}})}function Ka(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&amp;&amp;b.parentNode.removeChild(b)}
+function ma(a,b,d){var e=b==="width"?a.offsetWidth:a.offsetHeight;if(d==="border")return e;c.each(b==="width"?La:Ma,function(){d||(e-=parseFloat(c.css(a,"padding"+this))||0);if(d==="margin")e+=parseFloat(c.css(a,"margin"+this))||0;else e-=parseFloat(c.css(a,"border"+this+"Width"))||0});return e}function ca(a,b,d,e){if(c.isArray(b)&amp;&amp;b.length)c.each(b,function(f,h){d||Na.test(a)?e(a,h):ca(a+"["+(typeof h==="object"||c.isArray(h)?f:"")+"]",h,d,e)});else if(!d&amp;&amp;b!=null&amp;&amp;typeof b==="object")c.isEmptyObject(b)?
+e(a,""):c.each(b,function(f,h){ca(a+"["+f+"]",h,d,e)});else e(a,b)}function S(a,b){var d={};c.each(na.concat.apply([],na.slice(0,b)),function(){d[this]=a});return d}function oa(a){if(!da[a]){var b=c("&lt;"+a+"&gt;").appendTo("body"),d=b.css("display");b.remove();if(d==="none"||d==="")d="block";da[a]=d}return da[a]}function ea(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var u=E.document,c=function(){function a(){if(!b.isReady){try{u.documentElement.doScroll("left")}catch(i){setTimeout(a,
+1);return}b.ready()}}var b=function(i,r){return new b.fn.init(i,r)},d=E.jQuery,e=E.$,f,h=/^(?:[^&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]+)$)/,k=/\S/,l=/^\s+/,n=/\s+$/,s=/\W/,v=/\d/,B=/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/,D=/^[\],:{}\s]*$/,H=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,G=/(?:^|:|,)(?:\s*\[)+/g,M=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,j=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,m=navigator.userAgent,p=false,
+q=[],t,x=Object.prototype.toString,C=Object.prototype.hasOwnProperty,P=Array.prototype.push,N=Array.prototype.slice,R=String.prototype.trim,Q=Array.prototype.indexOf,L={};b.fn=b.prototype={init:function(i,r){var y,z,F;if(!i)return this;if(i.nodeType){this.context=this[0]=i;this.length=1;return this}if(i==="body"&amp;&amp;!r&amp;&amp;u.body){this.context=u;this[0]=u.body;this.selector="body";this.length=1;return this}if(typeof i==="string")if((y=h.exec(i))&amp;&amp;(y[1]||!r))if(y[1]){F=r?r.ownerDocument||r:u;if(z=B.exec(i))if(b.isPlainObject(r)){i=
+[u.createElement(z[1])];b.fn.attr.call(i,r,true)}else i=[F.createElement(z[1])];else{z=b.buildFragment([y[1]],[F]);i=(z.cacheable?z.fragment.cloneNode(true):z.fragment).childNodes}return b.merge(this,i)}else{if((z=u.getElementById(y[2]))&amp;&amp;z.parentNode){if(z.id!==y[2])return f.find(i);this.length=1;this[0]=z}this.context=u;this.selector=i;return this}else if(!r&amp;&amp;!s.test(i)){this.selector=i;this.context=u;i=u.getElementsByTagName(i);return b.merge(this,i)}else return!r||r.jquery?(r||f).find(i):b(r).find(i);
+else if(b.isFunction(i))return f.ready(i);if(i.selector!==A){this.selector=i.selector;this.context=i.context}return b.makeArray(i,this)},selector:"",jquery:"1.4.3",length:0,size:function(){return this.length},toArray:function(){return N.call(this,0)},get:function(i){return i==null?this.toArray():i&lt;0?this.slice(i)[0]:this[i]},pushStack:function(i,r,y){var z=b();b.isArray(i)?P.apply(z,i):b.merge(z,i);z.prevObject=this;z.context=this.context;if(r==="find")z.selector=this.selector+(this.selector?" ":
+"")+y;else if(r)z.selector=this.selector+"."+r+"("+y+")";return z},each:function(i,r){return b.each(this,i,r)},ready:function(i){b.bindReady();if(b.isReady)i.call(u,b);else q&amp;&amp;q.push(i);return this},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(N.apply(this,arguments),"slice",N.call(arguments).join(","))},map:function(i){return this.pushStack(b.map(this,function(r,y){return i.call(r,
+y,r)}))},end:function(){return this.prevObject||b(null)},push:P,sort:[].sort,splice:[].splice};b.fn.init.prototype=b.fn;b.extend=b.fn.extend=function(){var i=arguments[0]||{},r=1,y=arguments.length,z=false,F,I,K,J,fa;if(typeof i==="boolean"){z=i;i=arguments[1]||{};r=2}if(typeof i!=="object"&amp;&amp;!b.isFunction(i))i={};if(y===r){i=this;--r}for(;r&lt;y;r++)if((F=arguments[r])!=null)for(I in F){K=i[I];J=F[I];if(i!==J)if(z&amp;&amp;J&amp;&amp;(b.isPlainObject(J)||(fa=b.isArray(J)))){if(fa){fa=false;clone=K&amp;&amp;b.isArray(K)?K:[]}else clone=
+K&amp;&amp;b.isPlainObject(K)?K:{};i[I]=b.extend(z,clone,J)}else if(J!==A)i[I]=J}return i};b.extend({noConflict:function(i){E.$=e;if(i)E.jQuery=d;return b},isReady:false,readyWait:1,ready:function(i){i===true&amp;&amp;b.readyWait--;if(!b.readyWait||i!==true&amp;&amp;!b.isReady){if(!u.body)return setTimeout(b.ready,1);b.isReady=true;if(!(i!==true&amp;&amp;--b.readyWait&gt;0)){if(q){for(var r=0;i=q[r++];)i.call(u,b);q=null}b.fn.triggerHandler&amp;&amp;b(u).triggerHandler("ready")}}},bindReady:function(){if(!p){p=true;if(u.readyState==="complete")return setTimeout(b.ready,
+1);if(u.addEventListener){u.addEventListener("DOMContentLoaded",t,false);E.addEventListener("load",b.ready,false)}else if(u.attachEvent){u.attachEvent("onreadystatechange",t);E.attachEvent("onload",b.ready);var i=false;try{i=E.frameElement==null}catch(r){}u.documentElement.doScroll&amp;&amp;i&amp;&amp;a()}}},isFunction:function(i){return b.type(i)==="function"},isArray:Array.isArray||function(i){return b.type(i)==="array"},isWindow:function(i){return i&amp;&amp;typeof i==="object"&amp;&amp;"setInterval"in i},isNaN:function(i){return i==
+null||!v.test(i)||isNaN(i)},type:function(i){return i==null?String(i):L[x.call(i)]||"object"},isPlainObject:function(i){if(!i||b.type(i)!=="object"||i.nodeType||b.isWindow(i))return false;if(i.constructor&amp;&amp;!C.call(i,"constructor")&amp;&amp;!C.call(i.constructor.prototype,"isPrototypeOf"))return false;for(var r in i);return r===A||C.call(i,r)},isEmptyObject:function(i){for(var r in i)return false;return true},error:function(i){throw i;},parseJSON:function(i){if(typeof i!=="string"||!i)return null;i=b.trim(i);
+if(D.test(i.replace(H,"@").replace(w,"]").replace(G,"")))return E.JSON&amp;&amp;E.JSON.parse?E.JSON.parse(i):(new Function("return "+i))();else b.error("Invalid JSON: "+i)},noop:function(){},globalEval:function(i){if(i&amp;&amp;k.test(i)){var r=u.getElementsByTagName("head")[0]||u.documentElement,y=u.createElement("script");y.type="text/javascript";if(b.support.scriptEval)y.appendChild(u.createTextNode(i));else y.text=i;r.insertBefore(y,r.firstChild);r.removeChild(y)}},nodeName:function(i,r){return i.nodeName&amp;&amp;i.nodeName.toUpperCase()===
+r.toUpperCase()},each:function(i,r,y){var z,F=0,I=i.length,K=I===A||b.isFunction(i);if(y)if(K)for(z in i){if(r.apply(i[z],y)===false)break}else for(;F&lt;I;){if(r.apply(i[F++],y)===false)break}else if(K)for(z in i){if(r.call(i[z],z,i[z])===false)break}else for(y=i[0];F&lt;I&amp;&amp;r.call(y,F,y)!==false;y=i[++F]);return i},trim:R?function(i){return i==null?"":R.call(i)}:function(i){return i==null?"":i.toString().replace(l,"").replace(n,"")},makeArray:function(i,r){var y=r||[];if(i!=null){var z=b.type(i);i.length==
+null||z==="string"||z==="function"||z==="regexp"||b.isWindow(i)?P.call(y,i):b.merge(y,i)}return y},inArray:function(i,r){if(r.indexOf)return r.indexOf(i);for(var y=0,z=r.length;y&lt;z;y++)if(r[y]===i)return y;return-1},merge:function(i,r){var y=i.length,z=0;if(typeof r.length==="number")for(var F=r.length;z&lt;F;z++)i[y++]=r[z];else for(;r[z]!==A;)i[y++]=r[z++];i.length=y;return i},grep:function(i,r,y){var z=[],F;y=!!y;for(var I=0,K=i.length;I&lt;K;I++){F=!!r(i[I],I);y!==F&amp;&amp;z.push(i[I])}return z},map:function(i,
+r,y){for(var z=[],F,I=0,K=i.length;I&lt;K;I++){F=r(i[I],I,y);if(F!=null)z[z.length]=F}return z.concat.apply([],z)},guid:1,proxy:function(i,r,y){if(arguments.length===2)if(typeof r==="string"){y=i;i=y[r];r=A}else if(r&amp;&amp;!b.isFunction(r)){y=r;r=A}if(!r&amp;&amp;i)r=function(){return i.apply(y||this,arguments)};if(i)r.guid=i.guid=i.guid||r.guid||b.guid++;return r},access:function(i,r,y,z,F,I){var K=i.length;if(typeof r==="object"){for(var J in r)b.access(i,J,r[J],z,F,y);return i}if(y!==A){z=!I&amp;&amp;z&amp;&amp;b.isFunction(y);
+for(J=0;J&lt;K;J++)F(i[J],r,z?y.call(i[J],J,F(i[J],r)):y,I);return i}return K?F(i[0],r):A},now:function(){return(new Date).getTime()},uaMatch:function(i){i=i.toLowerCase();i=M.exec(i)||g.exec(i)||j.exec(i)||i.indexOf("compatible")&lt;0&amp;&amp;o.exec(i)||[];return{browser:i[1]||"",version:i[2]||"0"}},browser:{}});b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,r){L["[object "+r+"]"]=r.toLowerCase()});m=b.uaMatch(m);if(m.browser){b.browser[m.browser]=true;b.browser.version=
+m.version}if(b.browser.webkit)b.browser.safari=true;if(Q)b.inArray=function(i,r){return Q.call(r,i)};if(!/\s/.test("\u00a0")){l=/^[\s\xA0]+/;n=/[\s\xA0]+$/}f=b(u);if(u.addEventListener)t=function(){u.removeEventListener("DOMContentLoaded",t,false);b.ready()};else if(u.attachEvent)t=function(){if(u.readyState==="complete"){u.detachEvent("onreadystatechange",t);b.ready()}};return E.jQuery=E.$=b}();(function(){c.support={};var a=u.documentElement,b=u.createElement("script"),d=u.createElement("div"),
+e="script"+c.now();d.style.display="none";d.innerHTML="   &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href='/a' style='color:red;float:left;opacity:.55;'&gt;a&lt;/a&gt;&lt;input type='checkbox'/&gt;";var f=d.getElementsByTagName("*"),h=d.getElementsByTagName("a")[0],k=u.createElement("select"),l=k.appendChild(u.createElement("option"));if(!(!f||!f.length||!h)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(h.getAttribute("style")),
+hrefNormalized:h.getAttribute("href")==="/a",opacity:/^0.55$/.test(h.style.opacity),cssFloat:!!h.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:l.selected,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};k.disabled=true;c.support.optDisabled=!l.disabled;b.type="text/javascript";try{b.appendChild(u.createTextNode("window."+e+"=1;"))}catch(n){}a.insertBefore(b,
+a.firstChild);if(E[e]){c.support.scriptEval=true;delete E[e]}a.removeChild(b);if(d.attachEvent&amp;&amp;d.fireEvent){d.attachEvent("onclick",function s(){c.support.noCloneEvent=false;d.detachEvent("onclick",s)});d.cloneNode(true).fireEvent("onclick")}d=u.createElement("div");d.innerHTML="&lt;input type='radio' name='radiotest' checked='checked'/&gt;";a=u.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var s=u.createElement("div");
+s.style.width=s.style.paddingLeft="1px";u.body.appendChild(s);c.boxModel=c.support.boxModel=s.offsetWidth===2;if("zoom"in s.style){s.style.display="inline";s.style.zoom=1;c.support.inlineBlockNeedsLayout=s.offsetWidth===2;s.style.display="";s.innerHTML="&lt;div style='width:4px;'&gt;&lt;/div&gt;";c.support.shrinkWrapBlocks=s.offsetWidth!==2}s.innerHTML="&lt;table&gt;&lt;tr&gt;&lt;td style='padding:0;display:none'&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;";var v=s.getElementsByTagName("td");c.support.reliableHiddenOffsets=v[0].offsetHeight===
+0;v[0].style.display="";v[1].style.display="none";c.support.reliableHiddenOffsets=c.support.reliableHiddenOffsets&amp;&amp;v[0].offsetHeight===0;s.innerHTML="";u.body.removeChild(s).style.display="none"});a=function(s){var v=u.createElement("div");s="on"+s;var B=s in v;if(!B){v.setAttribute(s,"return;");B=typeof v[s]==="function"}return B};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=f=h=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",
+cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var pa={},Oa=/^(?:\{.*\}|\[.*\])$/;c.extend({cache:{},uuid:0,expando:"jQuery"+c.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(a,b,d){if(c.acceptData(a)){a=a==E?pa:a;var e=a.nodeType,f=e?a[c.expando]:null,h=c.cache;if(!(e&amp;&amp;!f&amp;&amp;typeof b==="string"&amp;&amp;d===A)){if(e)f||(a[c.expando]=f=++c.uuid);else h=a;if(typeof b==="object")if(e)h[f]=
+c.extend(h[f],b);else c.extend(h,b);else if(e&amp;&amp;!h[f])h[f]={};a=e?h[f]:h;if(d!==A)a[b]=d;return typeof b==="string"?a[b]:a}}},removeData:function(a,b){if(c.acceptData(a)){a=a==E?pa:a;var d=a.nodeType,e=d?a[c.expando]:a,f=c.cache,h=d?f[e]:e;if(b){if(h){delete h[b];d&amp;&amp;c.isEmptyObject(h)&amp;&amp;c.removeData(a)}}else if(d&amp;&amp;c.support.deleteExpando)delete a[c.expando];else if(a.removeAttribute)a.removeAttribute(c.expando);else if(d)delete f[e];else for(var k in a)delete a[k]}},acceptData:function(a){if(a.nodeName){var b=
+c.noData[a.nodeName.toLowerCase()];if(b)return!(b===true||a.getAttribute("classid")!==b)}return true}});c.fn.extend({data:function(a,b){if(typeof a==="undefined")return this.length?c.data(this[0]):null;else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===A){var e=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(e===A&amp;&amp;this.length){e=c.data(this[0],a);if(e===A&amp;&amp;this[0].nodeType===1){e=this[0].getAttribute("data-"+a);if(typeof e===
+"string")try{e=e==="true"?true:e==="false"?false:e==="null"?null:!c.isNaN(e)?parseFloat(e):Oa.test(e)?c.parseJSON(e):e}catch(f){}else e=A}}return e===A&amp;&amp;d[1]?this.data(d[0]):e}else return this.each(function(){var h=c(this),k=[d[0],b];h.triggerHandler("setData"+d[1]+"!",k);c.data(this,a,b);h.triggerHandler("changeData"+d[1]+"!",k)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var e=c.data(a,b);if(!d)return e||
+[];if(!e||c.isArray(d))e=c.data(a,b,c.makeArray(d));else e.push(d);return e}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.shift();if(e==="inprogress")e=d.shift();if(e){b==="fx"&amp;&amp;d.unshift("inprogress");e.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===A)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&amp;&amp;d[0]!=="inprogress"&amp;&amp;c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,
+a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var qa=/[\n\t]/g,ga=/\s+/,Pa=/\r/g,Qa=/^(?:href|src|style)$/,Ra=/^(?:button|input)$/i,Sa=/^(?:button|input|object|select|textarea)$/i,Ta=/^a(?:rea)?$/i,ra=/^(?:radio|checkbox)$/i;c.fn.extend({attr:function(a,b){return c.access(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,
+a,"");this.nodeType===1&amp;&amp;this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(s){var v=c(this);v.addClass(a.call(this,s,v.attr("class")))});if(a&amp;&amp;typeof a==="string")for(var b=(a||"").split(ga),d=0,e=this.length;d&lt;e;d++){var f=this[d];if(f.nodeType===1)if(f.className){for(var h=" "+f.className+" ",k=f.className,l=0,n=b.length;l&lt;n;l++)if(h.indexOf(" "+b[l]+" ")&lt;0)k+=" "+b[l];f.className=c.trim(k)}else f.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(n){var s=
+c(this);s.removeClass(a.call(this,n,s.attr("class")))});if(a&amp;&amp;typeof a==="string"||a===A)for(var b=(a||"").split(ga),d=0,e=this.length;d&lt;e;d++){var f=this[d];if(f.nodeType===1&amp;&amp;f.className)if(a){for(var h=(" "+f.className+" ").replace(qa," "),k=0,l=b.length;k&lt;l;k++)h=h.replace(" "+b[k]+" "," ");f.className=c.trim(h)}else f.className=""}return this},toggleClass:function(a,b){var d=typeof a,e=typeof b==="boolean";if(c.isFunction(a))return this.each(function(f){var h=c(this);h.toggleClass(a.call(this,
+f,h.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var f,h=0,k=c(this),l=b,n=a.split(ga);f=n[h++];){l=e?l:!k.hasClass(f);k[l?"addClass":"removeClass"](f)}else if(d==="undefined"||d==="boolean"){this.className&amp;&amp;c.data(this,"__className__",this.className);this.className=this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b&lt;d;b++)if((" "+this[b].className+" ").replace(qa," ").indexOf(a)&gt;-1)return true;return false},
+val:function(a){if(!arguments.length){var b=this[0];if(b){if(c.nodeName(b,"option")){var d=b.attributes.value;return!d||d.specified?b.value:b.text}if(c.nodeName(b,"select")){var e=b.selectedIndex;d=[];var f=b.options;b=b.type==="select-one";if(e&lt;0)return null;var h=b?e:0;for(e=b?e+1:f.length;h&lt;e;h++){var k=f[h];if(k.selected&amp;&amp;(c.support.optDisabled?!k.disabled:k.getAttribute("disabled")===null)&amp;&amp;(!k.parentNode.disabled||!c.nodeName(k.parentNode,"optgroup"))){a=c(k).val();if(b)return a;d.push(a)}}return d}if(ra.test(b.type)&amp;&amp;
+!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Pa,"")}return A}var l=c.isFunction(a);return this.each(function(n){var s=c(this),v=a;if(this.nodeType===1){if(l)v=a.call(this,n,s.val());if(v==null)v="";else if(typeof v==="number")v+="";else if(c.isArray(v))v=c.map(v,function(D){return D==null?"":D+""});if(c.isArray(v)&amp;&amp;ra.test(this.type))this.checked=c.inArray(s.val(),v)&gt;=0;else if(c.nodeName(this,"select")){var B=c.makeArray(v);c("option",this).each(function(){this.selected=
+c.inArray(c(this).val(),B)&gt;=0});if(!B.length)this.selectedIndex=-1}else this.value=v}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,e){if(!a||a.nodeType===3||a.nodeType===8)return A;if(e&amp;&amp;b in c.attrFn)return c(a)[b](d);e=a.nodeType!==1||!c.isXMLDoc(a);var f=d!==A;b=e&amp;&amp;c.props[b]||b;if(a.nodeType===1){var h=Qa.test(b);if((b in a||a[b]!==A)&amp;&amp;e&amp;&amp;!h){if(f){b==="type"&amp;&amp;Ra.test(a.nodeName)&amp;&amp;a.parentNode&amp;&amp;c.error("type property can't be changed");
+if(d===null)a.nodeType===1&amp;&amp;a.removeAttribute(b);else a[b]=d}if(c.nodeName(a,"form")&amp;&amp;a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&amp;&amp;b.specified?b.value:Sa.test(a.nodeName)||Ta.test(a.nodeName)&amp;&amp;a.href?0:A;return a[b]}if(!c.support.style&amp;&amp;e&amp;&amp;b==="style"){if(f)a.style.cssText=""+d;return a.style.cssText}f&amp;&amp;a.setAttribute(b,""+d);if(!a.attributes[b]&amp;&amp;a.hasAttribute&amp;&amp;!a.hasAttribute(b))return A;a=!c.support.hrefNormalized&amp;&amp;e&amp;&amp;
+h?a.getAttribute(b,2):a.getAttribute(b);return a===null?A:a}}});var X=/\.(.*)$/,ha=/^(?:textarea|input|select)$/i,Ha=/\./g,Ia=/ /g,Ua=/[^\w\s.|`]/g,Va=function(a){return a.replace(Ua,"\\$&amp;")},sa={focusin:0,focusout:0};c.event={add:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(c.isWindow(a)&amp;&amp;a!==E&amp;&amp;!a.frameElement)a=E;if(d===false)d=U;var f,h;if(d.handler){f=d;d=f.handler}if(!d.guid)d.guid=c.guid++;if(h=c.data(a)){var k=a.nodeType?"events":"__events__",l=h[k],n=h.handle;if(typeof l===
+"function"){n=l.handle;l=l.events}else if(!l){a.nodeType||(h[k]=h=function(){});h.events=l={}}if(!n)h.handle=n=function(){return typeof c!=="undefined"&amp;&amp;!c.event.triggered?c.event.handle.apply(n.elem,arguments):A};n.elem=a;b=b.split(" ");for(var s=0,v;k=b[s++];){h=f?c.extend({},f):{handler:d,data:e};if(k.indexOf(".")&gt;-1){v=k.split(".");k=v.shift();h.namespace=v.slice(0).sort().join(".")}else{v=[];h.namespace=""}h.type=k;if(!h.guid)h.guid=d.guid;var B=l[k],D=c.event.special[k]||{};if(!B){B=l[k]=[];
+if(!D.setup||D.setup.call(a,e,v,n)===false)if(a.addEventListener)a.addEventListener(k,n,false);else a.attachEvent&amp;&amp;a.attachEvent("on"+k,n)}if(D.add){D.add.call(a,h);if(!h.handler.guid)h.handler.guid=d.guid}B.push(h);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,e){if(!(a.nodeType===3||a.nodeType===8)){if(d===false)d=U;var f,h,k=0,l,n,s,v,B,D,H=a.nodeType?"events":"__events__",w=c.data(a),G=w&amp;&amp;w[H];if(w&amp;&amp;G){if(typeof G==="function"){w=G;G=G.events}if(b&amp;&amp;b.type){d=b.handler;b=b.type}if(!b||
+typeof b==="string"&amp;&amp;b.charAt(0)==="."){b=b||"";for(f in G)c.event.remove(a,f+b)}else{for(b=b.split(" ");f=b[k++];){v=f;l=f.indexOf(".")&lt;0;n=[];if(!l){n=f.split(".");f=n.shift();s=RegExp("(^|\\.)"+c.map(n.slice(0).sort(),Va).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=G[f])if(d){v=c.event.special[f]||{};for(h=e||0;h&lt;B.length;h++){D=B[h];if(d.guid===D.guid){if(l||s.test(D.namespace)){e==null&amp;&amp;B.splice(h--,1);v.remove&amp;&amp;v.remove.call(a,D)}if(e!=null)break}}if(B.length===0||e!=null&amp;&amp;B.length===1){if(!v.teardown||
+v.teardown.call(a,n)===false)c.removeEvent(a,f,w.handle);delete G[f]}}else for(h=0;h&lt;B.length;h++){D=B[h];if(l||s.test(D.namespace)){c.event.remove(a,v,D.handler,h);B.splice(h--,1)}}}if(c.isEmptyObject(G)){if(b=w.handle)b.elem=null;delete w.events;delete w.handle;if(typeof w==="function")c.removeData(a,H);else c.isEmptyObject(w)&amp;&amp;c.removeData(a)}}}}},trigger:function(a,b,d,e){var f=a.type||a;if(!e){a=typeof a==="object"?a[c.expando]?a:c.extend(c.Event(f),a):c.Event(f);if(f.indexOf("!")&gt;=0){a.type=
+f=f.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[f]&amp;&amp;c.each(c.cache,function(){this.events&amp;&amp;this.events[f]&amp;&amp;c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return A;a.result=A;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(e=d.nodeType?c.data(d,"handle"):(c.data(d,"__events__")||{}).handle)&amp;&amp;e.apply(d,b);e=d.parentNode||d.ownerDocument;try{if(!(d&amp;&amp;d.nodeName&amp;&amp;c.noData[d.nodeName.toLowerCase()]))if(d["on"+f]&amp;&amp;d["on"+f].apply(d,b)===
+false){a.result=false;a.preventDefault()}}catch(h){}if(!a.isPropagationStopped()&amp;&amp;e)c.event.trigger(a,b,e,true);else if(!a.isDefaultPrevented()){e=a.target;var k,l=f.replace(X,""),n=c.nodeName(e,"a")&amp;&amp;l==="click",s=c.event.special[l]||{};if((!s._default||s._default.call(d,a)===false)&amp;&amp;!n&amp;&amp;!(e&amp;&amp;e.nodeName&amp;&amp;c.noData[e.nodeName.toLowerCase()])){try{if(e[l]){if(k=e["on"+l])e["on"+l]=null;c.event.triggered=true;e[l]()}}catch(v){}if(k)e["on"+l]=k;c.event.triggered=false}}},handle:function(a){var b,d,e;
+d=[];var f,h=c.makeArray(arguments);a=h[0]=c.event.fix(a||E.event);a.currentTarget=this;b=a.type.indexOf(".")&lt;0&amp;&amp;!a.exclusive;if(!b){e=a.type.split(".");a.type=e.shift();d=e.slice(0).sort();e=RegExp("(^|\\.)"+d.join("\\.(?:.*\\.)?")+"(\\.|$)")}a.namespace=a.namespace||d.join(".");f=c.data(this,this.nodeType?"events":"__events__");if(typeof f==="function")f=f.events;d=(f||{})[a.type];if(f&amp;&amp;d){d=d.slice(0);f=0;for(var k=d.length;f&lt;k;f++){var l=d[f];if(b||e.test(l.namespace)){a.handler=l.handler;a.data=
+l.data;a.handleObj=l;l=l.handler.apply(this,h);if(l!==A){a.result=l;if(l===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
+fix:function(a){if(a[c.expando])return a;var b=a;a=c.Event(b);for(var d=this.props.length,e;d;){e=this.props[--d];a[e]=b[e]}if(!a.target)a.target=a.srcElement||u;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&amp;&amp;a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&amp;&amp;a.clientX!=null){b=u.documentElement;d=u.body;a.pageX=a.clientX+(b&amp;&amp;b.scrollLeft||d&amp;&amp;d.scrollLeft||0)-(b&amp;&amp;b.clientLeft||d&amp;&amp;d.clientLeft||0);a.pageY=a.clientY+(b&amp;&amp;b.scrollTop||
+d&amp;&amp;d.scrollTop||0)-(b&amp;&amp;b.clientTop||d&amp;&amp;d.clientTop||0)}if(a.which==null&amp;&amp;(a.charCode!=null||a.keyCode!=null))a.which=a.charCode!=null?a.charCode:a.keyCode;if(!a.metaKey&amp;&amp;a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&amp;&amp;a.button!==A)a.which=a.button&amp;1?1:a.button&amp;2?3:a.button&amp;4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,Y(a.origType,a.selector),c.extend({},a,{handler:Ga,guid:a.handler.guid}))},remove:function(a){c.event.remove(this,
+Y(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,d){if(c.isWindow(this))this.onbeforeunload=d},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};c.removeEvent=u.removeEventListener?function(a,b,d){a.removeEventListener&amp;&amp;a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent&amp;&amp;a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&amp;&amp;a.type){this.originalEvent=a;this.type=a.type}else this.type=a;this.timeStamp=
+c.now();this[c.expando]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ba;var a=this.originalEvent;if(a)if(a.preventDefault)a.preventDefault();else a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=ba;var a=this.originalEvent;if(a){a.stopPropagation&amp;&amp;a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ba;this.stopPropagation()},isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U};
+var ta=function(a){var b=a.relatedTarget;try{for(;b&amp;&amp;b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},ua=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&amp;&amp;d.selector?ua:ta,a)},teardown:function(d){c.event.remove(this,b,d&amp;&amp;d.selector?ua:ta)}}});if(!c.support.submitBubbles)c.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!==
+"form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&amp;&amp;c(b).closest("form").length){a.liveFired=A;return ja("submit",this,arguments)}});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&amp;&amp;c(b).closest("form").length&amp;&amp;a.keyCode===13){a.liveFired=A;return ja("submit",this,arguments)}})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};if(!c.support.changeBubbles){var V,
+va=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex&gt;-1?c.map(a.options,function(e){return e.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},Z=function(a,b){var d=a.target,e,f;if(!(!ha.test(d.nodeName)||d.readOnly)){e=c.data(d,"_change_data");f=va(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",f);if(!(e===A||f===e))if(e!=null||f){a.type="change";a.liveFired=
+A;return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:Z,beforedeactivate:Z,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return Z.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&amp;&amp;b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&amp;&amp;(d==="checkbox"||d==="radio")||d==="select-multiple")return Z.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,"_change_data",va(a))}},setup:function(){if(this.type===
+"file")return false;for(var a in V)c.event.add(this,a+".specialChange",V[a]);return ha.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return ha.test(this.nodeName)}};V=c.event.special.change.filters;V.focus=V.beforeactivate}u.addEventListener&amp;&amp;c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.trigger(e,null,e.target)}c.event.special[b]={setup:function(){sa[b]++===0&amp;&amp;u.addEventListener(a,d,true)},teardown:function(){--sa[b]===
+0&amp;&amp;u.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,e,f){if(typeof d==="object"){for(var h in d)this[b](h,e,d[h],f);return this}if(c.isFunction(e)||e===false){f=e;e=A}var k=b==="one"?c.proxy(f,function(n){c(this).unbind(n,k);return f.apply(this,arguments)}):f;if(d==="unload"&amp;&amp;b!=="one")this.one(d,e,f);else{h=0;for(var l=this.length;h&lt;l;h++)c.event.add(this[h],d,k,e)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&amp;&amp;!a.preventDefault)for(var d in a)this.unbind(d,
+a[d]);else{d=0;for(var e=this.length;d&lt;e;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,e){return this.live(b,d,e,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var d=c.Event(a);d.preventDefault();d.stopPropagation();c.event.trigger(d,b,this[0]);return d.result}},toggle:function(a){for(var b=arguments,d=
+1;d&lt;b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(e){var f=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,f+1);e.preventDefault();return b[f].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var wa={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,e,f,h){var k,l=0,n,s,v=h||this.selector;h=h?this:c(this.context);if(typeof d===
+"object"&amp;&amp;!d.preventDefault){for(k in d)h[b](k,e,d[k],v);return this}if(c.isFunction(e)){f=e;e=A}for(d=(d||"").split(" ");(k=d[l++])!=null;){n=X.exec(k);s="";if(n){s=n[0];k=k.replace(X,"")}if(k==="hover")d.push("mouseenter"+s,"mouseleave"+s);else{n=k;if(k==="focus"||k==="blur"){d.push(wa[k]+s);k+=s}else k=(wa[k]||k)+s;if(b==="live"){s=0;for(var B=h.length;s&lt;B;s++)c.event.add(h[s],"live."+Y(k,v),{data:e,selector:v,handler:f,origType:k,origHandler:f,preType:n})}else h.unbind("live."+Y(k,v),f)}}return this}});
+c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){c.fn[b]=function(d,e){if(e==null){e=d;d=null}return arguments.length&gt;0?this.bind(b,d,e):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});E.attachEvent&amp;&amp;!E.addEventListener&amp;&amp;c(E).bind("unload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});
+(function(){function a(g,j,o,m,p,q){p=0;for(var t=m.length;p&lt;t;p++){var x=m[p];if(x){x=x[g];for(var C=false;x;){if(x.sizcache===o){C=m[x.sizset];break}if(x.nodeType===1&amp;&amp;!q){x.sizcache=o;x.sizset=p}if(x.nodeName.toLowerCase()===j){C=x;break}x=x[g]}m[p]=C}}}function b(g,j,o,m,p,q){p=0;for(var t=m.length;p&lt;t;p++){var x=m[p];if(x){x=x[g];for(var C=false;x;){if(x.sizcache===o){C=m[x.sizset];break}if(x.nodeType===1){if(!q){x.sizcache=o;x.sizset=p}if(typeof j!=="string"){if(x===j){C=true;break}}else if(l.filter(j,
+[x]).length&gt;0){C=x;break}}x=x[g]}m[p]=C}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ &gt;+~,(\[\\]+)+|[&gt;+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,h=false,k=true;[0,0].sort(function(){k=false;return 0});var l=function(g,j,o,m){o=o||[];var p=j=j||u;if(j.nodeType!==1&amp;&amp;j.nodeType!==9)return[];if(!g||typeof g!=="string")return o;var q=[],t,x,C,P,N=true,R=l.isXML(j),Q=g,L;do{d.exec("");if(t=d.exec(Q)){Q=t[3];q.push(t[1]);if(t[2]){P=t[3];
+break}}}while(t);if(q.length&gt;1&amp;&amp;s.exec(g))if(q.length===2&amp;&amp;n.relative[q[0]])x=M(q[0]+q[1],j);else for(x=n.relative[q[0]]?[j]:l(q.shift(),j);q.length;){g=q.shift();if(n.relative[g])g+=q.shift();x=M(g,x)}else{if(!m&amp;&amp;q.length&gt;1&amp;&amp;j.nodeType===9&amp;&amp;!R&amp;&amp;n.match.ID.test(q[0])&amp;&amp;!n.match.ID.test(q[q.length-1])){t=l.find(q.shift(),j,R);j=t.expr?l.filter(t.expr,t.set)[0]:t.set[0]}if(j){t=m?{expr:q.pop(),set:D(m)}:l.find(q.pop(),q.length===1&amp;&amp;(q[0]==="~"||q[0]==="+")&amp;&amp;j.parentNode?j.parentNode:j,R);x=t.expr?l.filter(t.expr,
+t.set):t.set;if(q.length&gt;0)C=D(x);else N=false;for(;q.length;){t=L=q.pop();if(n.relative[L])t=q.pop();else L="";if(t==null)t=j;n.relative[L](C,t,R)}}else C=[]}C||(C=x);C||l.error(L||g);if(f.call(C)==="[object Array]")if(N)if(j&amp;&amp;j.nodeType===1)for(g=0;C[g]!=null;g++){if(C[g]&amp;&amp;(C[g]===true||C[g].nodeType===1&amp;&amp;l.contains(j,C[g])))o.push(x[g])}else for(g=0;C[g]!=null;g++)C[g]&amp;&amp;C[g].nodeType===1&amp;&amp;o.push(x[g]);else o.push.apply(o,C);else D(C,o);if(P){l(P,p,o,m);l.uniqueSort(o)}return o};l.uniqueSort=function(g){if(w){h=
+k;g.sort(w);if(h)for(var j=1;j&lt;g.length;j++)g[j]===g[j-1]&amp;&amp;g.splice(j--,1)}return g};l.matches=function(g,j){return l(g,null,null,j)};l.matchesSelector=function(g,j){return l(j,null,null,[g]).length&gt;0};l.find=function(g,j,o){var m;if(!g)return[];for(var p=0,q=n.order.length;p&lt;q;p++){var t=n.order[p],x;if(x=n.leftMatch[t].exec(g)){var C=x[1];x.splice(1,1);if(C.substr(C.length-1)!=="\\"){x[1]=(x[1]||"").replace(/\\/g,"");m=n.find[t](x,j,o);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=j.getElementsByTagName("*"));
+return{set:m,expr:g}};l.filter=function(g,j,o,m){for(var p=g,q=[],t=j,x,C,P=j&amp;&amp;j[0]&amp;&amp;l.isXML(j[0]);g&amp;&amp;j.length;){for(var N in n.filter)if((x=n.leftMatch[N].exec(g))!=null&amp;&amp;x[2]){var R=n.filter[N],Q,L;L=x[1];C=false;x.splice(1,1);if(L.substr(L.length-1)!=="\\"){if(t===q)q=[];if(n.preFilter[N])if(x=n.preFilter[N](x,t,o,q,m,P)){if(x===true)continue}else C=Q=true;if(x)for(var i=0;(L=t[i])!=null;i++)if(L){Q=R(L,x,i,t);var r=m^!!Q;if(o&amp;&amp;Q!=null)if(r)C=true;else t[i]=false;else if(r){q.push(L);C=true}}if(Q!==
+A){o||(t=q);g=g.replace(n.match[N],"");if(!C)return[];break}}}if(g===p)if(C==null)l.error(g);else break;p=g}return t};l.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
+POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},relative:{"+":function(g,j){var o=typeof j==="string",m=o&amp;&amp;!/\W/.test(j);o=o&amp;&amp;!m;if(m)j=j.toLowerCase();m=0;for(var p=g.length,q;m&lt;p;m++)if(q=g[m]){for(;(q=q.previousSibling)&amp;&amp;q.nodeType!==1;);g[m]=o||q&amp;&amp;q.nodeName.toLowerCase()===
+j?q||false:q===j}o&amp;&amp;l.filter(j,g,true)},"&gt;":function(g,j){var o=typeof j==="string",m,p=0,q=g.length;if(o&amp;&amp;!/\W/.test(j))for(j=j.toLowerCase();p&lt;q;p++){if(m=g[p]){o=m.parentNode;g[p]=o.nodeName.toLowerCase()===j?o:false}}else{for(;p&lt;q;p++)if(m=g[p])g[p]=o?m.parentNode:m.parentNode===j;o&amp;&amp;l.filter(j,g,true)}},"":function(g,j,o){var m=e++,p=b,q;if(typeof j==="string"&amp;&amp;!/\W/.test(j)){q=j=j.toLowerCase();p=a}p("parentNode",j,m,g,q,o)},"~":function(g,j,o){var m=e++,p=b,q;if(typeof j==="string"&amp;&amp;!/\W/.test(j)){q=
+j=j.toLowerCase();p=a}p("previousSibling",j,m,g,q,o)}},find:{ID:function(g,j,o){if(typeof j.getElementById!=="undefined"&amp;&amp;!o)return(g=j.getElementById(g[1]))&amp;&amp;g.parentNode?[g]:[]},NAME:function(g,j){if(typeof j.getElementsByName!=="undefined"){for(var o=[],m=j.getElementsByName(g[1]),p=0,q=m.length;p&lt;q;p++)m[p].getAttribute("name")===g[1]&amp;&amp;o.push(m[p]);return o.length===0?null:o}},TAG:function(g,j){return j.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,j,o,m,p,q){g=" "+g[1].replace(/\\/g,
+"")+" ";if(q)return g;q=0;for(var t;(t=j[q])!=null;q++)if(t)if(p^(t.className&amp;&amp;(" "+t.className+" ").replace(/[\t\n]/g," ").indexOf(g)&gt;=0))o||m.push(t);else if(o)j[q]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},CHILD:function(g){if(g[1]==="nth"){var j=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&amp;&amp;"2n"||g[2]==="odd"&amp;&amp;"2n+1"||!/\D/.test(g[2])&amp;&amp;"0n+"+g[2]||g[2]);g[2]=j[1]+(j[2]||1)-0;g[3]=j[3]-0}g[0]=e++;return g},ATTR:function(g,j,o,
+m,p,q){j=g[1].replace(/\\/g,"");if(!q&amp;&amp;n.attrMap[j])g[1]=n.attrMap[j];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,j,o,m,p){if(g[1]==="not")if((d.exec(g[3])||"").length&gt;1||/^\w/.test(g[3]))g[3]=l(g[3],null,null,j);else{g=l.filter(g[3],j,o,true^p);o||m.push.apply(m,g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&amp;&amp;g.type!=="hidden"},disabled:function(g){return g.disabled===
+true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,j,o){return!!l(o[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===
+g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},setFilters:{first:function(g,j){return j===0},last:function(g,j,o,m){return j===m.length-1},even:function(g,j){return j%2===0},odd:function(g,j){return j%2===1},lt:function(g,j,o){return j&lt;o[3]-0},gt:function(g,j,o){return j&gt;o[3]-0},nth:function(g,j,o){return o[3]-
+0===j},eq:function(g,j,o){return o[3]-0===j}},filter:{PSEUDO:function(g,j,o,m){var p=j[1],q=n.filters[p];if(q)return q(g,o,j,m);else if(p==="contains")return(g.textContent||g.innerText||l.getText([g])||"").indexOf(j[3])&gt;=0;else if(p==="not"){j=j[3];o=0;for(m=j.length;o&lt;m;o++)if(j[o]===g)return false;return true}else l.error("Syntax error, unrecognized expression: "+p)},CHILD:function(g,j){var o=j[1],m=g;switch(o){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(o===
+"first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":o=j[2];var p=j[3];if(o===1&amp;&amp;p===0)return true;var q=j[0],t=g.parentNode;if(t&amp;&amp;(t.sizcache!==q||!g.nodeIndex)){var x=0;for(m=t.firstChild;m;m=m.nextSibling)if(m.nodeType===1)m.nodeIndex=++x;t.sizcache=q}m=g.nodeIndex-p;return o===0?m===0:m%o===0&amp;&amp;m/o&gt;=0}},ID:function(g,j){return g.nodeType===1&amp;&amp;g.getAttribute("id")===j},TAG:function(g,j){return j==="*"&amp;&amp;g.nodeType===1||g.nodeName.toLowerCase()===
+j},CLASS:function(g,j){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(j)&gt;-1},ATTR:function(g,j){var o=j[1];o=n.attrHandle[o]?n.attrHandle[o](g):g[o]!=null?g[o]:g.getAttribute(o);var m=o+"",p=j[2],q=j[4];return o==null?p==="!=":p==="="?m===q:p==="*="?m.indexOf(q)&gt;=0:p==="~="?(" "+m+" ").indexOf(q)&gt;=0:!q?m&amp;&amp;o!==false:p==="!="?m!==q:p==="^="?m.indexOf(q)===0:p==="$="?m.substr(m.length-q.length)===q:p==="|="?m===q||m.substr(0,q.length+1)===q+"-":false},POS:function(g,j,o,m){var p=n.setFilters[j[2]];
+if(p)return p(g,o,j,m)}}},s=n.match.POS,v=function(g,j){return"\\"+(j-0+1)},B;for(B in n.match){n.match[B]=RegExp(n.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[B].source.replace(/\\(\d+)/g,v))}var D=function(g,j){g=Array.prototype.slice.call(g,0);if(j){j.push.apply(j,g);return j}return g};try{Array.prototype.slice.call(u.documentElement.childNodes,0)}catch(H){D=function(g,j){var o=j||[],m=0;if(f.call(g)==="[object Array]")Array.prototype.push.apply(o,
+g);else if(typeof g.length==="number")for(var p=g.length;m&lt;p;m++)o.push(g[m]);else for(;g[m];m++)o.push(g[m]);return o}}var w,G;if(u.documentElement.compareDocumentPosition)w=function(g,j){if(g===j){h=true;return 0}if(!g.compareDocumentPosition||!j.compareDocumentPosition)return g.compareDocumentPosition?-1:1;return g.compareDocumentPosition(j)&amp;4?-1:1};else{w=function(g,j){var o=[],m=[],p=g.parentNode,q=j.parentNode,t=p;if(g===j){h=true;return 0}else if(p===q)return G(g,j);else if(p){if(!q)return 1}else return-1;
+for(;t;){o.unshift(t);t=t.parentNode}for(t=q;t;){m.unshift(t);t=t.parentNode}p=o.length;q=m.length;for(t=0;t&lt;p&amp;&amp;t&lt;q;t++)if(o[t]!==m[t])return G(o[t],m[t]);return t===p?G(g,m[t],-1):G(o[t],j,1)};G=function(g,j,o){if(g===j)return o;for(g=g.nextSibling;g;){if(g===j)return-1;g=g.nextSibling}return 1}}l.getText=function(g){for(var j="",o,m=0;g[m];m++){o=g[m];if(o.nodeType===3||o.nodeType===4)j+=o.nodeValue;else if(o.nodeType!==8)j+=l.getText(o.childNodes)}return j};(function(){var g=u.createElement("div"),
+j="script"+(new Date).getTime();g.innerHTML="&lt;a name='"+j+"'/&gt;";var o=u.documentElement;o.insertBefore(g,o.firstChild);if(u.getElementById(j)){n.find.ID=function(m,p,q){if(typeof p.getElementById!=="undefined"&amp;&amp;!q)return(p=p.getElementById(m[1]))?p.id===m[1]||typeof p.getAttributeNode!=="undefined"&amp;&amp;p.getAttributeNode("id").nodeValue===m[1]?[p]:A:[]};n.filter.ID=function(m,p){var q=typeof m.getAttributeNode!=="undefined"&amp;&amp;m.getAttributeNode("id");return m.nodeType===1&amp;&amp;q&amp;&amp;q.nodeValue===p}}o.removeChild(g);
+o=g=null})();(function(){var g=u.createElement("div");g.appendChild(u.createComment(""));if(g.getElementsByTagName("*").length&gt;0)n.find.TAG=function(j,o){var m=o.getElementsByTagName(j[1]);if(j[1]==="*"){for(var p=[],q=0;m[q];q++)m[q].nodeType===1&amp;&amp;p.push(m[q]);m=p}return m};g.innerHTML="&lt;a href='#'&gt;&lt;/a&gt;";if(g.firstChild&amp;&amp;typeof g.firstChild.getAttribute!=="undefined"&amp;&amp;g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(j){return j.getAttribute("href",2)};g=null})();u.querySelectorAll&amp;&amp;
+function(){var g=l,j=u.createElement("div");j.innerHTML="&lt;p class='TEST'&gt;&lt;/p&gt;";if(!(j.querySelectorAll&amp;&amp;j.querySelectorAll(".TEST").length===0)){l=function(m,p,q,t){p=p||u;if(!t&amp;&amp;!l.isXML(p))if(p.nodeType===9)try{return D(p.querySelectorAll(m),q)}catch(x){}else if(p.nodeType===1&amp;&amp;p.nodeName.toLowerCase()!=="object"){var C=p.id,P=p.id="__sizzle__";try{return D(p.querySelectorAll("#"+P+" "+m),q)}catch(N){}finally{if(C)p.id=C;else p.removeAttribute("id")}}return g(m,p,q,t)};for(var o in g)l[o]=g[o];
+j=null}}();(function(){var g=u.documentElement,j=g.matchesSelector||g.mozMatchesSelector||g.webkitMatchesSelector||g.msMatchesSelector,o=false;try{j.call(u.documentElement,":sizzle")}catch(m){o=true}if(j)l.matchesSelector=function(p,q){try{if(o||!n.match.PSEUDO.test(q))return j.call(p,q)}catch(t){}return l(q,null,null,[p]).length&gt;0}})();(function(){var g=u.createElement("div");g.innerHTML="&lt;div class='test e'&gt;&lt;/div&gt;&lt;div class='test'&gt;&lt;/div&gt;";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===
+0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(j,o,m){if(typeof o.getElementsByClassName!=="undefined"&amp;&amp;!m)return o.getElementsByClassName(j[1])};g=null}}})();l.contains=u.documentElement.contains?function(g,j){return g!==j&amp;&amp;(g.contains?g.contains(j):true)}:function(g,j){return!!(g.compareDocumentPosition(j)&amp;16)};l.isXML=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false};var M=function(g,
+j){for(var o=[],m="",p,q=j.nodeType?[j]:j;p=n.match.PSEUDO.exec(g);){m+=p[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;p=0;for(var t=q.length;p&lt;t;p++)l(g,q[p],o);return l.filter(m,o)};c.find=l;c.expr=l.selectors;c.expr[":"]=c.expr.filters;c.unique=l.uniqueSort;c.text=l.getText;c.isXMLDoc=l.isXML;c.contains=l.contains})();var Wa=/Until$/,Xa=/^(?:parents|prevUntil|prevAll)/,Ya=/,/,Ja=/^.[^:#\[\.,]*$/,Za=Array.prototype.slice,$a=c.expr.match.POS;c.fn.extend({find:function(a){for(var b=this.pushStack("",
+"find",a),d=0,e=0,f=this.length;e&lt;f;e++){d=b.length;c.find(a,this[e],b);if(e&gt;0)for(var h=d;h&lt;b.length;h++)for(var k=0;k&lt;d;k++)if(b[k]===b[h]){b.splice(h--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,e=b.length;d&lt;e;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(ka(this,a,false),"not",a)},filter:function(a){return this.pushStack(ka(this,a,true),"filter",a)},is:function(a){return!!a&amp;&amp;c.filter(a,this).length&gt;0},closest:function(a,
+b){var d=[],e,f,h=this[0];if(c.isArray(a)){var k={},l,n=1;if(h&amp;&amp;a.length){e=0;for(f=a.length;e&lt;f;e++){l=a[e];k[l]||(k[l]=c.expr.match.POS.test(l)?c(l,b||this.context):l)}for(;h&amp;&amp;h.ownerDocument&amp;&amp;h!==b;){for(l in k){e=k[l];if(e.jquery?e.index(h)&gt;-1:c(h).is(e))d.push({selector:l,elem:h,level:n})}h=h.parentNode;n++}}return d}k=$a.test(a)?c(a,b||this.context):null;e=0;for(f=this.length;e&lt;f;e++)for(h=this[e];h;)if(k?k.index(h)&gt;-1:c.find.matchesSelector(h,a)){d.push(h);break}else{h=h.parentNode;if(!h||
+!h.ownerDocument||h===b)break}d=d.length&gt;1?c.unique(d):d;return this.pushStack(d,"closest",a)},index:function(a){if(!a||typeof a==="string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var d=typeof a==="string"?c(a,b||this.context):c.makeArray(a),e=c.merge(this.get(),d);return this.pushStack(!d[0]||!d[0].parentNode||d[0].parentNode.nodeType===11||!e[0]||!e[0].parentNode||e[0].parentNode.nodeType===11?e:c.unique(e))},andSelf:function(){return this.add(this.prevObject)}});
+c.each({parent:function(a){return(a=a.parentNode)&amp;&amp;a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",
+d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);Wa.test(a)||(e=d);if(e&amp;&amp;typeof e==="string")f=c.filter(e,f);f=this.length&gt;1?c.unique(f):f;if((this.length&gt;1||Ya.test(e))&amp;&amp;Xa.test(a))f=f.reverse();return this.pushStack(f,a,Za.call(arguments).join(","))}});
+c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return b.length===1?c.find.matchesSelector(b[0],a)?[b[0]]:[]:c.find.matches(a,b)},dir:function(a,b,d){var e=[];for(a=a[b];a&amp;&amp;a.nodeType!==9&amp;&amp;(d===A||a.nodeType!==1||!c(a).is(d));){a.nodeType===1&amp;&amp;e.push(a);a=a[b]}return e},nth:function(a,b,d){b=b||1;for(var e=0;a;a=a[d])if(a.nodeType===1&amp;&amp;++e===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&amp;&amp;a!==b&amp;&amp;d.push(a);return d}});var xa=/ jQuery\d+="(?:\d+|null)"/g,
+$=/^\s+/,ya=/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig,za=/&lt;([\w:]+)/,ab=/&lt;tbody/i,bb=/&lt;|&amp;#?\w+;/,Aa=/&lt;(?:script|object|embed|option|style)/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,cb=/\=([^="'&gt;\s]+\/)&gt;/g,O={option:[1,"&lt;select multiple='multiple'&gt;","&lt;/select&gt;"],legend:[1,"&lt;fieldset&gt;","&lt;/fieldset&gt;"],thead:[1,"&lt;table&gt;","&lt;/table&gt;"],tr:[2,"&lt;table&gt;&lt;tbody&gt;","&lt;/tbody&gt;&lt;/table&gt;"],td:[3,"&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;","&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;"],col:[2,"&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;","&lt;/colgroup&gt;&lt;/table&gt;"],
+area:[1,"&lt;map&gt;","&lt;/map&gt;"],_default:[0,"",""]};O.optgroup=O.option;O.tbody=O.tfoot=O.colgroup=O.caption=O.thead;O.th=O.td;if(!c.support.htmlSerialize)O._default=[1,"div&lt;div&gt;","&lt;/div&gt;"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&amp;&amp;a!==A)return this.empty().append((this[0]&amp;&amp;this[0].ownerDocument||u).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,
+d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&amp;&amp;b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&amp;&amp;d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},
+unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&amp;&amp;this.appendChild(a)})},prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&amp;&amp;this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&amp;&amp;this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=
+c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&amp;&amp;this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,e;(e=this[d])!=null;d++)if(!a||c.filter(a,[e]).length){if(!b&amp;&amp;e.nodeType===1){c.cleanData(e.getElementsByTagName("*"));
+c.cleanData([e])}e.parentNode&amp;&amp;e.parentNode.removeChild(e)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&amp;&amp;c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&amp;&amp;!c.isXMLDoc(this)){var d=this.outerHTML,e=this.ownerDocument;if(!d){d=e.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(xa,"").replace(cb,'="$1"&gt;').replace($,
+"")],e)[0]}else return this.cloneNode(true)});if(a===true){la(this,b);la(this.find("*"),b.find("*"))}return b},html:function(a){if(a===A)return this[0]&amp;&amp;this[0].nodeType===1?this[0].innerHTML.replace(xa,""):null;else if(typeof a==="string"&amp;&amp;!Aa.test(a)&amp;&amp;(c.support.leadingWhitespace||!$.test(a))&amp;&amp;!O[(za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ya,"&lt;$1&gt;&lt;/$2&gt;");try{for(var b=0,d=this.length;b&lt;d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(e){this.empty().append(a)}}else c.isFunction(a)?
+this.each(function(f){var h=c(this);h.html(a.call(this,f,h.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&amp;&amp;this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),e=d.html();d.replaceWith(a.call(this,b,e))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,
+true)},domManip:function(a,b,d){var e,f,h=a[0],k=[],l;if(!c.support.checkClone&amp;&amp;arguments.length===3&amp;&amp;typeof h==="string"&amp;&amp;Ba.test(h))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(h))return this.each(function(s){var v=c(this);a[0]=h.call(this,s,b?v.html():A);v.domManip(a,b,d)});if(this[0]){e=h&amp;&amp;h.parentNode;e=c.support.parentNode&amp;&amp;e&amp;&amp;e.nodeType===11&amp;&amp;e.childNodes.length===this.length?{fragment:e}:c.buildFragment(a,this,k);l=e.fragment;if(f=l.childNodes.length===1?l=l.firstChild:
+l.firstChild){b=b&amp;&amp;c.nodeName(f,"tr");f=0;for(var n=this.length;f&lt;n;f++)d.call(b?c.nodeName(this[f],"table")?this[f].getElementsByTagName("tbody")[0]||this[f].appendChild(this[f].ownerDocument.createElement("tbody")):this[f]:this[f],f&gt;0||e.cacheable||this.length&gt;1?l.cloneNode(true):l)}k.length&amp;&amp;c.each(k,Ka)}return this}});c.buildFragment=function(a,b,d){var e,f,h;b=b&amp;&amp;b[0]?b[0].ownerDocument||b[0]:u;if(a.length===1&amp;&amp;typeof a[0]==="string"&amp;&amp;a[0].length&lt;512&amp;&amp;b===u&amp;&amp;!Aa.test(a[0])&amp;&amp;(c.support.checkClone||
+!Ba.test(a[0]))){f=true;if(h=c.fragments[a[0]])if(h!==1)e=h}if(!e){e=b.createDocumentFragment();c.clean(a,b,e,d)}if(f)c.fragments[a[0]]=h?e:1;return{fragment:e,cacheable:f}};c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var e=[];d=c(d);var f=this.length===1&amp;&amp;this[0].parentNode;if(f&amp;&amp;f.nodeType===11&amp;&amp;f.childNodes.length===1&amp;&amp;d.length===1){d[b](this[0]);return this}else{f=0;for(var h=
+d.length;f&lt;h;f++){var k=(f&gt;0?this.clone(true):this).get();c(d[f])[b](k);e=e.concat(k)}return this.pushStack(e,a,d.selector)}}});c.extend({clean:function(a,b,d,e){b=b||u;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&amp;&amp;b[0].ownerDocument||u;for(var f=[],h=0,k;(k=a[h])!=null;h++){if(typeof k==="number")k+="";if(k){if(typeof k==="string"&amp;&amp;!bb.test(k))k=b.createTextNode(k);else if(typeof k==="string"){k=k.replace(ya,"&lt;$1&gt;&lt;/$2&gt;");var l=(za.exec(k)||["",""])[1].toLowerCase(),n=O[l]||O._default,
+s=n[0],v=b.createElement("div");for(v.innerHTML=n[1]+k+n[2];s--;)v=v.lastChild;if(!c.support.tbody){s=ab.test(k);l=l==="table"&amp;&amp;!s?v.firstChild&amp;&amp;v.firstChild.childNodes:n[1]==="&lt;table&gt;"&amp;&amp;!s?v.childNodes:[];for(n=l.length-1;n&gt;=0;--n)c.nodeName(l[n],"tbody")&amp;&amp;!l[n].childNodes.length&amp;&amp;l[n].parentNode.removeChild(l[n])}!c.support.leadingWhitespace&amp;&amp;$.test(k)&amp;&amp;v.insertBefore(b.createTextNode($.exec(k)[0]),v.firstChild);k=v.childNodes}if(k.nodeType)f.push(k);else f=c.merge(f,k)}}if(d)for(h=0;f[h];h++)if(e&amp;&amp;
+c.nodeName(f[h],"script")&amp;&amp;(!f[h].type||f[h].type.toLowerCase()==="text/javascript"))e.push(f[h].parentNode?f[h].parentNode.removeChild(f[h]):f[h]);else{f[h].nodeType===1&amp;&amp;f.splice.apply(f,[h+1,0].concat(c.makeArray(f[h].getElementsByTagName("script"))));d.appendChild(f[h])}return f},cleanData:function(a){for(var b,d,e=c.cache,f=c.event.special,h=c.support.deleteExpando,k=0,l;(l=a[k])!=null;k++)if(!(l.nodeName&amp;&amp;c.noData[l.nodeName.toLowerCase()]))if(d=l[c.expando]){if((b=e[d])&amp;&amp;b.events)for(var n in b.events)f[n]?
+c.event.remove(l,n):c.removeEvent(l,n,b.handle);if(h)delete l[c.expando];else l.removeAttribute&amp;&amp;l.removeAttribute(c.expando);delete e[d]}}});var Ca=/alpha\([^)]*\)/i,db=/opacity=([^)]*)/,eb=/-([a-z])/ig,fb=/([A-Z])/g,Da=/^-?\d+(?:px)?$/i,gb=/^-?\d/,hb={position:"absolute",visibility:"hidden",display:"block"},La=["Left","Right"],Ma=["Top","Bottom"],W,ib=u.defaultView&amp;&amp;u.defaultView.getComputedStyle,jb=function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){if(arguments.length===2&amp;&amp;b===A)return this;
+return c.access(this,a,b,true,function(d,e,f){return f!==A?c.style(d,e,f):c.css(d,e)})};c.extend({cssHooks:{opacity:{get:function(a,b){if(b){var d=W(a,"opacity","opacity");return d===""?"1":d}else return a.style.opacity}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(!(!a||a.nodeType===3||a.nodeType===8||!a.style)){var f,h=c.camelCase(b),k=a.style,l=c.cssHooks[h];b=c.cssProps[h]||
+h;if(d!==A){if(!(typeof d==="number"&amp;&amp;isNaN(d)||d==null)){if(typeof d==="number"&amp;&amp;!c.cssNumber[h])d+="px";if(!l||!("set"in l)||(d=l.set(a,d))!==A)try{k[b]=d}catch(n){}}}else{if(l&amp;&amp;"get"in l&amp;&amp;(f=l.get(a,false,e))!==A)return f;return k[b]}}},css:function(a,b,d){var e,f=c.camelCase(b),h=c.cssHooks[f];b=c.cssProps[f]||f;if(h&amp;&amp;"get"in h&amp;&amp;(e=h.get(a,true,d))!==A)return e;else if(W)return W(a,b,f)},swap:function(a,b,d){var e={},f;for(f in b){e[f]=a.style[f];a.style[f]=b[f]}d.call(a);for(f in b)a.style[f]=
+e[f]},camelCase:function(a){return a.replace(eb,jb)}});c.curCSS=c.css;c.each(["height","width"],function(a,b){c.cssHooks[b]={get:function(d,e,f){var h;if(e){if(d.offsetWidth!==0)h=ma(d,b,f);else c.swap(d,hb,function(){h=ma(d,b,f)});return h+"px"}},set:function(d,e){if(Da.test(e)){e=parseFloat(e);if(e&gt;=0)return e+"px"}else return e}}});if(!c.support.opacity)c.cssHooks.opacity={get:function(a,b){return db.test((b&amp;&amp;a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":
+b?"1":""},set:function(a,b){var d=a.style;d.zoom=1;var e=c.isNaN(b)?"":"alpha(opacity="+b*100+")",f=d.filter||"";d.filter=Ca.test(f)?f.replace(Ca,e):d.filter+" "+e}};if(ib)W=function(a,b,d){var e;d=d.replace(fb,"-$1").toLowerCase();if(!(b=a.ownerDocument.defaultView))return A;if(b=b.getComputedStyle(a,null)){e=b.getPropertyValue(d);if(e===""&amp;&amp;!c.contains(a.ownerDocument.documentElement,a))e=c.style(a,d)}return e};else if(u.documentElement.currentStyle)W=function(a,b){var d,e,f=a.currentStyle&amp;&amp;a.currentStyle[b],
+h=a.style;if(!Da.test(f)&amp;&amp;gb.test(f)){d=h.left;e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;h.left=b==="fontSize"?"1em":f||0;f=h.pixelLeft+"px";h.left=d;a.runtimeStyle.left=e}return f};if(c.expr&amp;&amp;c.expr.filters){c.expr.filters.hidden=function(a){var b=a.offsetHeight;return a.offsetWidth===0&amp;&amp;b===0||!c.support.reliableHiddenOffsets&amp;&amp;(a.style.display||c.css(a,"display"))==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var kb=c.now(),lb=/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi,
+mb=/^(?:select|textarea)/i,nb=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ob=/^(?:GET|HEAD|DELETE)$/,Na=/\[\]$/,T=/\=\?(&amp;|$)/,ia=/\?/,pb=/([?&amp;])_=[^&amp;]*/,qb=/^(\w+:)?\/\/([^\/?#]+)/,rb=/%20/g,sb=/#.*$/,Ea=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!=="string"&amp;&amp;Ea)return Ea.apply(this,arguments);else if(!this.length)return this;var e=a.indexOf(" ");if(e&gt;=0){var f=a.slice(e,a.length);a=a.slice(0,e)}e="GET";if(b)if(c.isFunction(b)){d=
+b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);e="POST"}var h=this;c.ajax({url:a,type:e,dataType:"html",data:b,complete:function(k,l){if(l==="success"||l==="notmodified")h.html(f?c("&lt;div&gt;").append(k.responseText.replace(lb,"")).find(f):k.responseText);d&amp;&amp;h.each(d,[k.responseText,l,k])}});return this},serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&amp;&amp;
+!this.disabled&amp;&amp;(this.checked||mb.test(this.nodeName)||nb.test(this.type))}).map(function(a,b){var d=c(this).val();return d==null?null:c.isArray(d)?c.map(d,function(e){return{name:b.name,value:e}}):{name:b.name,value:d}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:e})},
+getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,e){if(c.isFunction(b)){e=e||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:e})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new E.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",
+script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(a){var b=c.extend(true,{},c.ajaxSettings,a),d,e,f,h=b.type.toUpperCase(),k=ob.test(h);b.url=b.url.replace(sb,"");b.context=a&amp;&amp;a.context!=null?a.context:b;if(b.data&amp;&amp;b.processData&amp;&amp;typeof b.data!=="string")b.data=c.param(b.data,b.traditional);if(b.dataType==="jsonp"){if(h==="GET")T.test(b.url)||(b.url+=(ia.test(b.url)?"&amp;":"?")+(b.jsonp||"callback")+"=?");else if(!b.data||
+!T.test(b.data))b.data=(b.data?b.data+"&amp;":"")+(b.jsonp||"callback")+"=?";b.dataType="json"}if(b.dataType==="json"&amp;&amp;(b.data&amp;&amp;T.test(b.data)||T.test(b.url))){d=b.jsonpCallback||"jsonp"+kb++;if(b.data)b.data=(b.data+"").replace(T,"="+d+"$1");b.url=b.url.replace(T,"="+d+"$1");b.dataType="script";var l=E[d];E[d]=function(m){f=m;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);if(c.isFunction(l))l(m);else{E[d]=A;try{delete E[d]}catch(p){}}v&amp;&amp;v.removeChild(B)}}if(b.dataType==="script"&amp;&amp;b.cache===null)b.cache=
+false;if(b.cache===false&amp;&amp;h==="GET"){var n=c.now(),s=b.url.replace(pb,"$1_="+n);b.url=s+(s===b.url?(ia.test(b.url)?"&amp;":"?")+"_="+n:"")}if(b.data&amp;&amp;h==="GET")b.url+=(ia.test(b.url)?"&amp;":"?")+b.data;b.global&amp;&amp;c.active++===0&amp;&amp;c.event.trigger("ajaxStart");n=(n=qb.exec(b.url))&amp;&amp;(n[1]&amp;&amp;n[1]!==location.protocol||n[2]!==location.host);if(b.dataType==="script"&amp;&amp;h==="GET"&amp;&amp;n){var v=u.getElementsByTagName("head")[0]||u.documentElement,B=u.createElement("script");if(b.scriptCharset)B.charset=b.scriptCharset;B.src=
+b.url;if(!d){var D=false;B.onload=B.onreadystatechange=function(){if(!D&amp;&amp;(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){D=true;c.handleSuccess(b,w,e,f);c.handleComplete(b,w,e,f);B.onload=B.onreadystatechange=null;v&amp;&amp;B.parentNode&amp;&amp;v.removeChild(B)}}}v.insertBefore(B,v.firstChild);return A}var H=false,w=b.xhr();if(w){b.username?w.open(h,b.url,b.async,b.username,b.password):w.open(h,b.url,b.async);try{if(b.data!=null&amp;&amp;!k||a&amp;&amp;a.contentType)w.setRequestHeader("Content-Type",
+b.contentType);if(b.ifModified){c.lastModified[b.url]&amp;&amp;w.setRequestHeader("If-Modified-Since",c.lastModified[b.url]);c.etag[b.url]&amp;&amp;w.setRequestHeader("If-None-Match",c.etag[b.url])}n||w.setRequestHeader("X-Requested-With","XMLHttpRequest");w.setRequestHeader("Accept",b.dataType&amp;&amp;b.accepts[b.dataType]?b.accepts[b.dataType]+", */*; q=0.01":b.accepts._default)}catch(G){}if(b.beforeSend&amp;&amp;b.beforeSend.call(b.context,w,b)===false){b.global&amp;&amp;c.active--===1&amp;&amp;c.event.trigger("ajaxStop");w.abort();return false}b.global&amp;&amp;
+c.triggerGlobal(b,"ajaxSend",[w,b]);var M=w.onreadystatechange=function(m){if(!w||w.readyState===0||m==="abort"){H||c.handleComplete(b,w,e,f);H=true;if(w)w.onreadystatechange=c.noop}else if(!H&amp;&amp;w&amp;&amp;(w.readyState===4||m==="timeout")){H=true;w.onreadystatechange=c.noop;e=m==="timeout"?"timeout":!c.httpSuccess(w)?"error":b.ifModified&amp;&amp;c.httpNotModified(w,b.url)?"notmodified":"success";var p;if(e==="success")try{f=c.httpData(w,b.dataType,b)}catch(q){e="parsererror";p=q}if(e==="success"||e==="notmodified")d||
+c.handleSuccess(b,w,e,f);else c.handleError(b,w,e,p);d||c.handleComplete(b,w,e,f);m==="timeout"&amp;&amp;w.abort();if(b.async)w=null}};try{var g=w.abort;w.abort=function(){w&amp;&amp;g.call&amp;&amp;g.call(w);M("abort")}}catch(j){}b.async&amp;&amp;b.timeout&gt;0&amp;&amp;setTimeout(function(){w&amp;&amp;!H&amp;&amp;M("timeout")},b.timeout);try{w.send(k||b.data==null?null:b.data)}catch(o){c.handleError(b,w,null,o);c.handleComplete(b,w,e,f)}b.async||M();return w}},param:function(a,b){var d=[],e=function(h,k){k=c.isFunction(k)?k():k;d[d.length]=encodeURIComponent(h)+
+"="+encodeURIComponent(k)};if(b===A)b=c.ajaxSettings.traditional;if(c.isArray(a)||a.jquery)c.each(a,function(){e(this.name,this.value)});else for(var f in a)ca(f,a[f],b,e);return d.join("&amp;").replace(rb,"+")}});c.extend({active:0,lastModified:{},etag:{},handleError:function(a,b,d,e){a.error&amp;&amp;a.error.call(a.context,b,d,e);a.global&amp;&amp;c.triggerGlobal(a,"ajaxError",[b,a,e])},handleSuccess:function(a,b,d,e){a.success&amp;&amp;a.success.call(a.context,e,d,b);a.global&amp;&amp;c.triggerGlobal(a,"ajaxSuccess",[b,a])},handleComplete:function(a,
+b,d){a.complete&amp;&amp;a.complete.call(a.context,b,d);a.global&amp;&amp;c.triggerGlobal(a,"ajaxComplete",[b,a]);a.global&amp;&amp;c.active--===1&amp;&amp;c.event.trigger("ajaxStop")},triggerGlobal:function(a,b,d){(a.context&amp;&amp;a.context.url==null?c(a.context):c.event).trigger(b,d)},httpSuccess:function(a){try{return!a.status&amp;&amp;location.protocol==="file:"||a.status&gt;=200&amp;&amp;a.status&lt;300||a.status===304||a.status===1223}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),e=a.getResponseHeader("Etag");
+if(d)c.lastModified[b]=d;if(e)c.etag[b]=e;return a.status===304},httpData:function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&amp;&amp;e.indexOf("xml")&gt;=0;a=f?a.responseXML:a.responseText;f&amp;&amp;a.documentElement.nodeName==="parsererror"&amp;&amp;c.error("parsererror");if(d&amp;&amp;d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b==="json"||!b&amp;&amp;e.indexOf("json")&gt;=0)a=c.parseJSON(a);else if(b==="script"||!b&amp;&amp;e.indexOf("javascript")&gt;=0)c.globalEval(a);return a}});if(E.ActiveXObject)c.ajaxSettings.xhr=
+function(){if(E.location.protocol!=="file:")try{return new E.XMLHttpRequest}catch(a){}try{return new E.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}};c.support.ajax=!!c.ajaxSettings.xhr();var da={},tb=/^(?:toggle|show|hide)$/,ub=/^([+\-]=)?([\d+.\-]+)(.*)$/,aa,na=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b,d){if(a||a===0)return this.animate(S("show",3),a,b,d);else{a=
+0;for(b=this.length;a&lt;b;a++){if(!c.data(this[a],"olddisplay")&amp;&amp;this[a].style.display==="none")this[a].style.display="";this[a].style.display===""&amp;&amp;c.css(this[a],"display")==="none"&amp;&amp;c.data(this[a],"olddisplay",oa(this[a].nodeName))}for(a=0;a&lt;b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b,d){if(a||a===0)return this.animate(S("hide",3),a,b,d);else{a=0;for(b=this.length;a&lt;b;a++){d=c.css(this[a],"display");d!=="none"&amp;&amp;c.data(this[a],"olddisplay",d)}for(a=
+0;a&lt;b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b,d){var e=typeof a==="boolean";if(c.isFunction(a)&amp;&amp;c.isFunction(b))this._toggle.apply(this,arguments);else a==null||e?this.each(function(){var f=e?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(S("toggle",3),a,b,d);return this},fadeTo:function(a,b,d,e){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d,e)},animate:function(a,b,d,e){var f=c.speed(b,d,e);if(c.isEmptyObject(a))return this.each(f.complete);
+return this[f.queue===false?"each":"queue"](function(){var h=c.extend({},f),k,l=this.nodeType===1,n=l&amp;&amp;c(this).is(":hidden"),s=this;for(k in a){var v=c.camelCase(k);if(k!==v){a[v]=a[k];delete a[k];k=v}if(a[k]==="hide"&amp;&amp;n||a[k]==="show"&amp;&amp;!n)return h.complete.call(this);if(l&amp;&amp;(k==="height"||k==="width")){h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(c.css(this,"display")==="inline"&amp;&amp;c.css(this,"float")==="none")if(c.support.inlineBlockNeedsLayout)if(oa(this.nodeName)===
+"inline")this.style.display="inline-block";else{this.style.display="inline";this.style.zoom=1}else this.style.display="inline-block"}if(c.isArray(a[k])){(h.specialEasing=h.specialEasing||{})[k]=a[k][1];a[k]=a[k][0]}}if(h.overflow!=null)this.style.overflow="hidden";h.curAnim=c.extend({},a);c.each(a,function(B,D){var H=new c.fx(s,h,B);if(tb.test(D))H[D==="toggle"?n?"show":"hide":D](a);else{var w=ub.exec(D),G=H.cur(true)||0;if(w){var M=parseFloat(w[2]),g=w[3]||"px";if(g!=="px"){c.style(s,B,(M||1)+g);
+G=(M||1)/H.cur(true)*G;c.style(s,B,G+g)}if(w[1])M=(w[1]==="-="?-1:1)*M+G;H.custom(G,M,g)}else H.custom(G,D,"")}});return true})},stop:function(a,b){var d=c.timers;a&amp;&amp;this.queue([]);this.each(function(){for(var e=d.length-1;e&gt;=0;e--)if(d[e].elem===this){b&amp;&amp;d[e](true);d.splice(e,1)}});b||this.dequeue();return this}});c.each({slideDown:S("show",1),slideUp:S("hide",1),slideToggle:S("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,e,f){return this.animate(b,
+d,e,f)}});c.extend({speed:function(a,b,d){var e=a&amp;&amp;typeof a==="object"?c.extend({},a):{complete:d||!d&amp;&amp;b||c.isFunction(a)&amp;&amp;a,duration:a,easing:d&amp;&amp;b||b&amp;&amp;!c.isFunction(b)&amp;&amp;b};e.duration=c.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default;e.old=e.complete;e.complete=function(){e.queue!==false&amp;&amp;c(this).dequeue();c.isFunction(e.old)&amp;&amp;e.old.call(this)};return e},easing:{linear:function(a,b,d,e){return d+e*a},swing:function(a,b,d,e){return(-Math.cos(a*
+Math.PI)/2+0.5)*e+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&amp;&amp;this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||c.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&amp;&amp;(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a=parseFloat(c.css(this.elem,this.prop));return a&amp;&amp;a&gt;-1E4?a:0},custom:function(a,b,d){function e(h){return f.step(h)}
+this.startTime=c.now();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;this.pos=this.state=0;var f=this;a=c.fx;e.elem=this.elem;if(e()&amp;&amp;c.timers.push(e)&amp;&amp;!aa)aa=setInterval(a.tick,a.interval)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;
+this.custom(this.cur(),0)},step:function(a){var b=c.now(),d=true;if(a||b&gt;=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var e in this.options.curAnim)if(this.options.curAnim[e]!==true)d=false;if(d){if(this.options.overflow!=null&amp;&amp;!c.support.shrinkWrapBlocks){var f=this.elem,h=this.options;c.each(["","X","Y"],function(l,n){f.style["overflow"+n]=h.overflow[l]})}this.options.hide&amp;&amp;c(this.elem).hide();if(this.options.hide||
+this.options.show)for(var k in this.options.curAnim)c.style(this.elem,k,this.options.orig[k]);this.options.complete.call(this.elem)}return false}else{a=b-this.startTime;this.state=a/this.options.duration;b=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&amp;&amp;this.options.specialEasing[this.prop]||b](this.state,a,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=
+c.timers,b=0;b&lt;a.length;b++)a[b]()||a.splice(b--,1);a.length||c.fx.stop()},interval:13,stop:function(){clearInterval(aa);aa=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&amp;&amp;a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&amp;&amp;c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===
+b.elem}).length};var vb=/^t(?:able|d|h)$/i,Fa=/^(?:body|html)$/i;c.fn.offset="getBoundingClientRect"in u.documentElement?function(a){var b=this[0],d;if(a)return this.each(function(k){c.offset.setOffset(this,a,k)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,h=f.documentElement;if(!d||!c.contains(h,b))return d||{top:0,left:0};b=f.body;f=ea(f);return{top:d.top+(f.pageYOffset||c.support.boxModel&amp;&amp;
+h.scrollTop||b.scrollTop)-(h.clientTop||b.clientTop||0),left:d.left+(f.pageXOffset||c.support.boxModel&amp;&amp;h.scrollLeft||b.scrollLeft)-(h.clientLeft||b.clientLeft||0)}}:function(a){var b=this[0];if(a)return this.each(function(s){c.offset.setOffset(this,a,s)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,e=b.ownerDocument,f,h=e.documentElement,k=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;
+for(var l=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&amp;&amp;b!==k&amp;&amp;b!==h;){if(c.offset.supportsFixedPosition&amp;&amp;f.position==="fixed")break;f=e?e.getComputedStyle(b,null):b.currentStyle;l-=b.scrollTop;n-=b.scrollLeft;if(b===d){l+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&amp;&amp;!(c.offset.doesAddBorderForTableAndCells&amp;&amp;vb.test(b.nodeName))){l+=parseFloat(f.borderTopWidth)||0;n+=parseFloat(f.borderLeftWidth)||0}d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&amp;&amp;f.overflow!=="visible"){l+=
+parseFloat(f.borderTopWidth)||0;n+=parseFloat(f.borderLeftWidth)||0}f=f}if(f.position==="relative"||f.position==="static"){l+=k.offsetTop;n+=k.offsetLeft}if(c.offset.supportsFixedPosition&amp;&amp;f.position==="fixed"){l+=Math.max(h.scrollTop,k.scrollTop);n+=Math.max(h.scrollLeft,k.scrollLeft)}return{top:l,left:n}};c.offset={initialize:function(){var a=u.body,b=u.createElement("div"),d,e,f,h=parseFloat(c.css(a,"marginTop"))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",
+height:"1px",visibility:"hidden"});b.innerHTML="&lt;div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;";a.insertBefore(b,a.firstChild);d=b.firstChild;e=d.firstChild;f=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=e.offsetTop!==5;this.doesAddBorderForTableAndCells=
+f.offsetTop===5;e.style.position="fixed";e.style.top="20px";this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15;e.style.position=e.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==h;a.removeChild(b);c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.css(a,
+"marginTop"))||0;d+=parseFloat(c.css(a,"marginLeft"))||0}return{top:b,left:d}},setOffset:function(a,b,d){var e=c.css(a,"position");if(e==="static")a.style.position="relative";var f=c(a),h=f.offset(),k=c.css(a,"top"),l=c.css(a,"left"),n=e==="absolute"&amp;&amp;c.inArray("auto",[k,l])&gt;-1;e={};var s={};if(n)s=f.position();k=n?s.top:parseInt(k,10)||0;l=n?s.left:parseInt(l,10)||0;if(c.isFunction(b))b=b.call(a,d,h);if(b.top!=null)e.top=b.top-h.top+k;if(b.left!=null)e.left=b.left-h.left+l;"using"in b?b.using.call(a,
+e):f.css(e)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),e=Fa.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.css(a,"marginTop"))||0;d.left-=parseFloat(c.css(a,"marginLeft"))||0;e.top+=parseFloat(c.css(b[0],"borderTopWidth"))||0;e.left+=parseFloat(c.css(b[0],"borderLeftWidth"))||0;return{top:d.top-e.top,left:d.left-e.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||u.body;a&amp;&amp;!Fa.test(a.nodeName)&amp;&amp;
+c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(e){var f=this[0],h;if(!f)return null;if(e!==A)return this.each(function(){if(h=ea(this))h.scrollTo(!a?e:c(h).scrollLeft(),a?e:c(h).scrollTop());else this[d]=e});else return(h=ea(f))?"pageXOffset"in h?h[a?"pageYOffset":"pageXOffset"]:c.support.boxModel&amp;&amp;h.document.documentElement[d]||h.document.body[d]:f[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();
+c.fn["inner"+b]=function(){return this[0]?parseFloat(c.css(this[0],d,"padding")):null};c.fn["outer"+b]=function(e){return this[0]?parseFloat(c.css(this[0],d,e?"margin":"border")):null};c.fn[d]=function(e){var f=this[0];if(!f)return e==null?null:this;if(c.isFunction(e))return this.each(function(h){var k=c(this);k[d](e.call(this,h,k[d]()))});return c.isWindow(f)?f.document.compatMode==="CSS1Compat"&amp;&amp;f.document.documentElement["client"+b]||f.document.body["client"+b]:f.nodeType===9?Math.max(f.documentElement["client"+
+b],f.body["scroll"+b],f.documentElement["scroll"+b],f.body["offset"+b],f.documentElement["offset"+b]):e===A?parseFloat(c.css(f,d)):this.css(d,typeof e==="string"?e:e+"px")}})})(window);

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/meta.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/meta.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,34 @@
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+  &lt;xsl:output
+    method="html"
+    encoding="utf-8"
+    media-type="text/html"
+    indent="yes"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+  &lt;xsl:template match="solr/meta"&gt;
+    &lt;xsl:value-of select="host" /&gt;:&lt;xsl:value-of select="port" /&gt;
+    cwd=&lt;xsl:value-of select="cwd" /&gt; SolrHome=&lt;xsl:value-of select="solrHome" /&gt;
+  &lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,52 @@
+&lt;%@ page contentType="text/xml; charset=utf-8" pageEncoding="UTF-8" language="java" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrConfig,
+                 org.apache.solr.core.SolrCore,
+                 org.apache.solr.common.SolrException"%&gt;
+&lt;%@ page import="org.apache.solr.request.LocalSolrQueryRequest"%&gt;
+&lt;%@ page import="org.apache.solr.request.SolrQueryResponse"%&gt;
+&lt;%@ page import="org.apache.solr.request.ServletSolrParams"%&gt;
+&lt;%@ page import="org.apache.solr.request.SolrQueryRequest"%&gt;
+
+&lt;%@include file="_info.jsp" %&gt;
+&lt;?xml-stylesheet type="text/xsl" href="ping.xsl"?&gt;
+
+&lt;solr&gt;
+  &lt;core&gt;&lt;%=core.getName()%&gt;&lt;/core&gt;
+  &lt;ping&gt;
+&lt;%
+  SolrQueryRequest req = core.getPingQueryRequest();
+  SolrQueryResponse resp = new SolrQueryResponse();
+  try {
+    core.execute(req,resp);
+    if (resp.getException() == null) {
+// No need for explicit status in the body, when the standard HTTP
+// response codes already transmit success/failure message
+      out.println("&lt;status&gt;200&lt;/status&gt;");
+    }
+    else if (resp.getException() != null) {
+     throw resp.getException();
+    }
+  } catch (Throwable t) {
+     throw t;
+  } finally {
+      req.close();
+  }
+%&gt;
+  &lt;/ping&gt;
+&lt;/solr&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/ping.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,71 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id$ --&gt;
+&lt;!-- $URL$ --&gt;
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+  &lt;xsl:output
+    method="html"
+    indent="yes"
+    encoding="utf-8"
+    media-type="text/html"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+  &lt;xsl:template match="/"&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+	&lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+	&lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;Solr Admin: Ping&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href="."&gt;
+	   &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"&gt;
+	   &lt;/img&gt;
+	&lt;/a&gt;
+        &lt;h1&gt;Solr Admin (&lt;xsl:value-of select="solr/meta/collection" /&gt;)&lt;/h1&gt;
+        &lt;div style="margin-top: 1em;"&gt;
+          &lt;xsl:apply-templates/&gt;
+        &lt;div&gt;
+        &lt;/div&gt;
+          &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+        &lt;/div&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:include href="meta.xsl"/&gt;
+
+  &lt;xsl:template match="solr/ping"&gt;
+  &lt;table&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+        &lt;H3&gt;Ping&lt;/H3&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        &lt;xsl:value-of select="error" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/raw-schema.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/raw-schema.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,38 @@
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrCore,
+                 org.apache.solr.schema.IndexSchema"%&gt;
+&lt;%@ page import="java.io.InputStreamReader"%&gt;
+&lt;%@ page import="java.io.Reader"%&gt;
+&lt;%@ page import="java.util.logging.Logger"%&gt;
+&lt;%@ page contentType="text/plain;charset=UTF-8" language="java" %&gt;
+&lt;%@include file="_info.jsp" %&gt;
+&lt;%!
+  static Logger log = Logger.getLogger(SolrCore.class.getName());
+%&gt;
+&lt;%
+  // NOTE -- this file will be removed in a future release
+  log.warning("Using deprecated JSP: " + request.getRequestURL().append("?").append(request.getQueryString()) + " -- check the ShowFileRequestHandler"  );
+
+  Reader input = new InputStreamReader(schema.getInputStream());
+  char[] buf = new char[4096];
+  while (true) {
+    int len = input.read(buf);
+    if (len&lt;=0) break;
+    out.write(buf,0,len);
+  }
+%&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,107 @@
+&lt;%@ page contentType="text/xml; charset=utf-8" pageEncoding="UTF-8" language="java" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrInfoMBean,
+                 org.apache.solr.core.SolrInfoRegistry,
+                 java.net.URL,
+                 java.util.Date,
+                 java.util.Map"%&gt;
+&lt;?xml-stylesheet type="text/xsl" href="registry.xsl"?&gt;
+
+&lt;%@include file="_info.jsp" %&gt;
+
+&lt;solr&gt;
+  &lt;core&gt;&lt;%= core.getName()%&gt;&lt;/core&gt;
+  &lt;schema&gt;&lt;%= collectionName %&gt;&lt;/schema&gt;
+  &lt;host&gt;&lt;%= hostname %&gt;&lt;/host&gt;
+  &lt;now&gt;&lt;%= new Date().toString() %&gt;&lt;/now&gt;
+  &lt;start&gt;&lt;%= new Date(core.getStartTime()) %&gt;&lt;/start&gt;
+  &lt;solr-spec-version&gt;&lt;%= solrSpecVersion %&gt;&lt;/solr-spec-version&gt;
+  &lt;solr-impl-version&gt;&lt;%= solrImplVersion %&gt;&lt;/solr-impl-version&gt;
+  &lt;lucene-spec-version&gt;&lt;%= luceneSpecVersion %&gt;&lt;/lucene-spec-version&gt;
+  &lt;lucene-impl-version&gt;&lt;%= luceneImplVersion %&gt;&lt;/lucene-impl-version&gt;
+  &lt;solr-info&gt;
+&lt;%
+for (SolrInfoMBean.Category cat : SolrInfoMBean.Category.values()) {
+%&gt;
+    &lt;&lt;%= cat.toString() %&gt;&gt;
+&lt;%
+ Map&lt;String, SolrInfoMBean&gt; reg = core.getInfoRegistry();
+ synchronized(reg) {
+  for (Map.Entry&lt;String,SolrInfoMBean&gt; entry : reg.entrySet()) {
+    String key = entry.getKey();
+    SolrInfoMBean m = entry.getValue();
+
+    if (m.getCategory() != cat) continue;
+
+    String na     = "None Provided";
+    String name   = (m.getName()!=null ? m.getName() : na);
+    String vers   = (m.getVersion()!=null ? m.getVersion() : na);
+    String desc   = (m.getDescription()!=null ? m.getDescription() : na);
+    String srcId  = (m.getSourceId()!=null ? m.getSourceId() : na);
+    String src = (m.getSource()!=null ? m.getSource() : na);
+    // print
+%&gt;
+      &lt;entry&gt;
+        &lt;name&gt;
+          &lt;%= key %&gt;
+        &lt;/name&gt;
+        &lt;class&gt;
+          &lt;%= name %&gt;
+        &lt;/class&gt;
+        &lt;version&gt;
+          &lt;%= vers %&gt;
+        &lt;/version&gt;
+        &lt;description&gt;
+          &lt;%= desc %&gt;
+        &lt;/description&gt;
+        &lt;sourceid&gt;
+          &lt;%= srcId %&gt;
+        &lt;/sourceid&gt;
+        &lt;source&gt;
+          &lt;%= src %&gt;
+        &lt;/source&gt;
+
+&lt;%
+    URL[] urls = m.getDocs();
+    if ((urls != null) &amp;&amp; (urls.length != 0)) {
+%&gt;
+        &lt;urls&gt;
+&lt;%
+      for (URL u : urls) {
+%&gt;
+          &lt;url&gt;
+            &lt;%= u.toString() %&gt;
+          &lt;/url&gt;
+&lt;%
+      }
+%&gt;
+        &lt;/urls&gt;
+&lt;%
+    }
+%&gt;
+      &lt;/entry&gt;
+&lt;%
+  }
+ }
+%&gt;
+    &lt;/&lt;%= cat.toString() %&gt;&gt;
+&lt;%
+}
+%&gt;
+  &lt;/solr-info&gt;
+&lt;/solr&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/registry.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,321 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id: registry.xsl 1075192 2011-02-28 00:50:09Z uschindler $ --&gt;
+&lt;!-- $URL: <a href="https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/registry.xsl" target="_new">https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/registry.xsl</a> $ --&gt;
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+
+  &lt;xsl:output
+    method="html"
+    encoding="utf-8"
+    media-type="text/html"
+    indent="yes"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+
+  &lt;xsl:template match="/"&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+	&lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+	&lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;Solr Info&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href="."&gt;
+	   &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"&gt;
+	   &lt;/img&gt;
+	&lt;/a&gt;
+        &lt;h1&gt;Solr Info (&lt;xsl:value-of select="solr/schema" /&gt;)&lt;/h1&gt;
+          &lt;xsl:value-of select="solr/host" /&gt;
+          &lt;br clear="all" /&gt;
+        &lt;xsl:apply-templates/&gt;
+        &lt;br /&gt;&lt;br /&gt;
+        &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr"&gt;
+  &lt;table&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+        &lt;H3&gt;Category&lt;/H3&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        [&lt;a href="#core"&gt;Core&lt;/a&gt;]
+        [&lt;a href="#cache"&gt;Cache&lt;/a&gt;]
+        [&lt;a href="#query"&gt;Query&lt;/a&gt;]
+        [&lt;a href="#update"&gt;Update&lt;/a&gt;]
+        [&lt;a href="#highlighting"&gt;Highlighting&lt;/a&gt;]
+        [&lt;a href="#other"&gt;Other&lt;/a&gt;]
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;/td&gt;
+      &lt;td&gt;Solr Specification Version: 
+          &lt;xsl:value-of select="solr-spec-version" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;/td&gt;
+      &lt;td&gt;Solr Implementation Version: 
+          &lt;xsl:value-of select="solr-impl-version" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;/td&gt;
+      &lt;td&gt;Lucene Specification Version: 
+          &lt;xsl:value-of select="lucene-spec-version" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;/td&gt;
+      &lt;td&gt;Lucene Implementation Version: 
+          &lt;xsl:value-of select="lucene-impl-version" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        Current Time: &lt;xsl:value-of select="now" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        Server Start Time:&lt;xsl:value-of select="start" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/*" priority="-1" /&gt;
+
+  &lt;xsl:template match="solr/solr-info"&gt;
+  &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CORE"&gt;
+    &lt;br /&gt;
+    &lt;a name="core"&gt;&lt;h2&gt;Core&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CORE/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CACHE"&gt;
+    &lt;br /&gt;
+    &lt;a name="cache"&gt;&lt;h2&gt;Cache&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CACHE/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/QUERYHANDLER"&gt;
+    &lt;br /&gt;
+    &lt;a name="query"&gt;&lt;h2&gt;Query Handlers&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/QUERYHANDLER/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/UPDATEHANDLER"&gt;
+    &lt;br /&gt;
+    &lt;a name="update"&gt;&lt;h2&gt;Update Handlers&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/UPDATEHANDLER/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+  &lt;xsl:template match="solr/solr-info/HIGHLIGHTING"&gt;
+    &lt;br /&gt;
+    &lt;a name="highlighting"&gt;&lt;h2&gt;Highlighting&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+  &lt;xsl:template match="solr/solr-info/HIGHLIGHTING/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="solr/solr-info/OTHER"&gt;
+    &lt;br /&gt;
+    &lt;a name="other"&gt;&lt;h2&gt;Other&lt;/h2&gt;&lt;/a&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/OTHER/entry"&gt;
+      &lt;xsl:for-each select="*"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;&lt;xsl:value-of select="name()"/&gt;:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="."/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/header.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/header.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,89 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;!-- $Id: header.jsp 1031778 2010-11-05 20:29:20Z ryan $ --&gt;
+&lt;%@ page import="org.apache.solr.common.util.NamedList,
+				 org.apache.solr.common.util.SimpleOrderedMap,
+				 org.apache.solr.request.LocalSolrQueryRequest,
+				 org.apache.solr.request.SolrQueryResponse,
+				 org.apache.solr.request.SolrRequestHandler,
+                                 java.util.Map"%&gt;
+&lt;%@ page import="org.apache.solr.handler.ReplicationHandler" %&gt;
+&lt;%
+request.setCharacterEncoding("UTF-8");
+%&gt;
+
+&lt;html&gt;
+&lt;head&gt;
+
+&lt;%@include file="../_info.jsp" %&gt;
+
+&lt;script&gt;
+var host_name="&lt;%= hostname %&gt;"
+&lt;/script&gt;
+
+&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
+&lt;link rel="stylesheet" type="text/css" href="../solr-admin.css"&gt;
+&lt;link rel="icon" href="../favicon.ico" type="image/ico" /&gt;
+&lt;link rel="shortcut icon" href="../favicon.ico" type="image/ico" /&gt;
+&lt;title&gt;Solr replication admin page&lt;/title&gt;
+&lt;script type="text/javascript" src="../jquery-1.4.3.min.js"&gt;&lt;/script&gt;
+
+&lt;%!
+public NamedList executeCommand(String command, SolrCore core, SolrRequestHandler rh){
+    NamedList namedlist = new SimpleOrderedMap();
+    namedlist.add("command", command);
+    LocalSolrQueryRequest solrqreq = new LocalSolrQueryRequest(core, namedlist);
+    SolrQueryResponse rsp = new SolrQueryResponse();
+    core.execute(rh, solrqreq, rsp);
+    namedlist = rsp.getValues();
+	return namedlist;
+}
+%&gt;
+
+&lt;%
+final Map&lt;String,SolrRequestHandler&gt; all = core.getRequestHandlers(ReplicationHandler.class);
+  if(all.isEmpty()){
+    response.sendError( 404, "No ReplicationHandler registered" );
+    return;
+  }
+
+// :HACK: we should be more deterministic if multiple instances
+final SolrRequestHandler rh = all.values().iterator().next();
+
+NamedList namedlist = executeCommand("details",core,rh);
+NamedList detailsMap = (NamedList)namedlist.get("details");
+%&gt;
+&lt;/head&gt;
+
+&lt;body&gt;
+&lt;a href=".."&gt;&lt;img border="0" align="right" height="78" width="142" src="../solr_small.png" alt="Solr"&gt;&lt;/a&gt;
+&lt;h1&gt;Solr replication (&lt;%= collectionName %&gt;) 
+
+&lt;%
+if(detailsMap != null){
+  if( "true".equals(detailsMap.get("isMaster")) &amp;&amp; "true".equals(detailsMap.get("isSlave")))
+    out.println(" Master &amp; Slave");
+  else if("true".equals(detailsMap.get("isMaster")))
+    out.println(" Master");
+  else if("true".equals(detailsMap.get("isSlave")))
+    out.println(" Slave");
+}
+%&gt;&lt;/h1&gt;
+
+&lt;%= hostname %&gt;:&lt;%= port %&gt;&lt;br/&gt;
+cwd=&lt;%= cwd %&gt;  SolrHome=&lt;%= solrHome %&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/index.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/replication/index.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,378 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a> 
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="java.util.Collection" %&gt;
+&lt;%@ page import="java.util.Date" %&gt;
+
+
+&lt;%-- do a verbatim include so we can use the local vars --%&gt;
+&lt;%@include file="header.jsp"%&gt;
+
+&lt;br clear="all" /&gt;
+(&lt;a href="<a href="http://wiki.apache.org/solr/SolrReplication"&gt;What" target="_new">http://wiki.apache.org/solr/SolrReplication"&gt;What</a> Is This Page?&lt;/a&gt;)
+&lt;br clear="all" /&gt;
+&lt;table&gt;
+
+&lt;%
+
+  final SolrCore solrcore = core;
+
+%&gt;
+&lt;%
+NamedList slave = null, master = null;
+if (detailsMap != null)
+   if ("true".equals(detailsMap.get("isSlave")))
+       if(detailsMap.get("slave") != null){
+           slave = (NamedList)detailsMap.get("slave");%&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+    &lt;strong&gt;Master&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%=slave.get("masterUrl")%&gt;
+    &lt;%
+    NamedList nl = (NamedList) slave.get("masterDetails");
+    if(nl == null)
+    	out.print(" - &lt;b&gt;Unreachable&lt;/b&gt;");
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;%
+    if (nl != null) {         
+      nl = (NamedList) nl.get("master");
+      if(nl != null){      
+  %&gt;
+&lt;tr&gt;  
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;Latest Index Version:&lt;%=nl.get("indexVersion")%&gt;, Generation: &lt;%=nl.get("generation")%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;Replicatable Index Version:&lt;%=nl.get("replicatableIndexVersion")%&gt;, Generation: &lt;%=nl.get("replicatableGeneration")%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;%
+}
+}%&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+    &lt;strong&gt;Poll Interval&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%=slave.get("pollInterval")%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;%}%&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+    &lt;strong&gt;Local Index&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      if (detailsMap != null)
+        out.println("Index Version: " + detailsMap.get("indexVersion") + ", Generation: " + detailsMap.get("generation"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;% if (null != core.getIndexDir()) {
+      File dir = new File(core.getIndexDir());
+      out.println("Location: " + dir.getCanonicalPath());
+    }%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;&lt;% if (detailsMap != null)
+    out.println("Size: " + detailsMap.get("indexSize"));
+  %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;%
+  if (detailsMap != null)
+    if ("true".equals(detailsMap.get("isMaster"))) 
+       if(detailsMap.get("master") != null){
+           master = (NamedList) detailsMap.get("master");
+%&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%out.println("Config Files To Replicate: " + master.get("confFiles"));%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%out.println("Trigger Replication On: " + master.get("replicateAfter")); %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;%}%&gt;
+
+&lt;%
+  if ("true".equals(detailsMap.get("isSlave")))
+    if (slave != null) {%&gt;
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Times Replicated Since Startup: " + slave.get("timesIndexReplicated"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Previous Replication Done At: " + slave.get("indexReplicatedAt"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Config Files Replicated At: " + slave.get("confFilesReplicatedAt"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Config Files Replicated: " + slave.get("confFilesReplicated"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Times Config Files Replicated Since Startup: " + slave.get("timesConfigReplicated"));
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;
+  &lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      if (slave.get("nextExecutionAt") != null)
+        if (slave.get("nextExecutionAt") != "")
+          out.println("Next Replication Cycle At: " + slave.get("nextExecutionAt"));
+        else if ("true".equals(slave.get("isPollingDisabled")))
+          out.println("Next Replication Cycle At: Polling disabled.");
+        else {
+          NamedList nl1 = (NamedList) slave.get("masterDetails");
+          if(nl1 != null){
+          	NamedList nl2 = (NamedList) nl1.get("master");
+          	if(nl2 != null)
+          		out.println("Next Replication Cycle At: After " + nl2.get("replicateAfter") + " on master.");
+          }
+        }
+    %&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;%
+  if ("true".equals(slave.get("isReplicating"))) {
+%&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;strong&gt;Current Replication Status&lt;/strong&gt;
+
+  &lt;td&gt;
+    &lt;%out.println("Start Time: " + slave.get("replicationStartTime"));%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Files Downloaded: " + slave.get("numFilesDownloaded") + " / " + slave.get("numFilesToDownload"));%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Downloaded: " + slave.get("bytesDownloaded") + " / " + slave.get("bytesToDownload") + " [" + slave.get("totalPercent") + "%]");%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Downloading File: " + slave.get("currentFile") + ", Downloaded: " + slave.get("currentFileSizeDownloaded") + " / " + slave.get("currentFileSize") + " [" + slave.get("currentFileSizePercent") + "%]");%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;%
+      out.println("Time Elapsed: " + slave.get("timeElapsed") + ", Estimated Time Remaining: " + slave.get("timeRemaining") + ", Speed: " + slave.get("downloadSpeed") + "/s");%&gt;
+  &lt;/td&gt;
+&lt;/tr&gt;
+&lt;%}%&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;strong&gt;Controls&lt;/strong&gt;
+  &lt;/td&gt;
+  &lt;td&gt;&lt;%
+    String pollVal = request.getParameter("poll");
+    if (pollVal != null)
+      if (pollVal.equals("disable"))
+        executeCommand("disablepoll", core, rh);
+      else if (pollVal.equals("enable"))
+        executeCommand("enablepoll", core, rh);
+    if(slave != null)
+    	if ("false".equals(slave.get("isPollingDisabled"))) {
+  %&gt;
+
+    &lt;form name=polling method="POST" action="./index.jsp" accept-charset="UTF-8"&gt;
+      &lt;input name="poll" type="hidden" value="disable"&gt;
+      &lt;input class="stdbutton" type="submit" value="Disable Poll"&gt;
+    &lt;/form&gt;
+
+    &lt;%}%&gt;
+    &lt;%
+      if(slave != null)
+      	if ("true".equals(slave.get("isPollingDisabled"))) {
+    %&gt;
+
+    &lt;form name=polling method="POST" action="./index.jsp" accept-charset="UTF-8"&gt;
+      &lt;input name="poll" type="hidden" value="enable"&gt;
+      &lt;input class="stdbutton" type="submit" value="Enable Poll"&gt;
+    &lt;/form&gt;
+    &lt;%
+      }
+    %&gt;
+
+  &lt;/td&gt;
+&lt;/tr&gt;
+
+&lt;tr&gt;
+  &lt;td&gt;&lt;/td&gt;
+  &lt;td&gt;
+    &lt;form name=replicate method="POST" action="./index.jsp" accept-charset="UTF-8"&gt;
+      &lt;input name="replicate" type="hidden" value="now"&gt;
+      &lt;input name="replicateButton" class="stdbutton" type="submit" value="Replicate Now"&gt;
+    &lt;/form&gt;
+    &lt;%
+      if(slave != null)
+      	if ("true".equals(slave.get("isReplicating"))) {
+    %&gt;
+    &lt;script type="text/javascript"&gt;
+      document["replicate"].replicateButton.disabled = true;
+      document["replicate"].replicateButton.className = 'stdbuttondis';
+    &lt;/script&gt;
+    &lt;form name=abort method="POST" action="./index.jsp" accept-charset="UTF-8"&gt;
+      &lt;input name="abort" type="hidden" value="stop"&gt;
+      &lt;input name="abortButton" class="stdbutton" type="submit" value="Abort"&gt;
+    &lt;/form&gt;
+
+    &lt;%} else {%&gt;
+    &lt;script type="text/javascript"&gt;
+      document["replicate"].replicateButton.disabled = false;
+      document["replicate"].replicateButton.className = 'stdbutton';
+    &lt;/script&gt;
+    &lt;%
+      }
+      String replicateParam = request.getParameter("replicate");
+      String abortParam = request.getParameter("abort");
+      if (replicateParam != null)
+        if (replicateParam.equals("now")) {
+          executeCommand("fetchindex", solrcore, rh);
+        }
+      if (abortParam != null)
+        if (abortParam.equals("stop")) {
+          executeCommand("abortfetch", solrcore, rh);
+        }
+    %&gt;
+  &lt;/td&gt;
+
+&lt;/tr&gt;
+
+&lt;%}%&gt;
+
+&lt;%-- List the cores (that arent this one) so we can switch --%&gt;
+&lt;% org.apache.solr.core.CoreContainer cores = (org.apache.solr.core.CoreContainer) request.getAttribute("org.apache.solr.CoreContainer");
+  if (cores != null) {
+    Collection&lt;String&gt; names = cores.getCoreNames();
+    if (names.size() &gt; 1) {%&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;strong&gt;Cores:&lt;/strong&gt;&lt;br&gt;&lt;/td&gt;
+  &lt;td&gt;&lt;%
+    for (String name : names) {
+  %&gt;[&lt;a href="../../../&lt;%=name%&gt;/admin/index.jsp"&gt;&lt;%=name%&gt;
+  &lt;/a&gt;]&lt;%
+    }%&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;%
+    }
+  }%&gt;
+
+
+&lt;/table&gt;
+&lt;P&gt;
+
+&lt;p&gt;
+
+&lt;table&gt;
+  &lt;tr&gt;
+    &lt;td&gt;
+    &lt;/td&gt;
+    &lt;td&gt;
+      Current Time: &lt;%= new Date() %&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+  &lt;tr&gt;
+    &lt;td&gt;
+    &lt;/td&gt;
+    &lt;td&gt;
+      Server Start At: &lt;%= new Date(core.getStartTime()) %&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/table&gt;
+
+&lt;br&gt;
+&lt;a href=".."&gt;Return to Admin Page&lt;/a&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/schema.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/schema.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,675 @@
+&lt;%@ page contentType="text/html; charset=utf-8" pageEncoding="UTF-8"%&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+
+&lt;%-- $Id: index.jsp 608150 2008-01-02 17:15:30Z ryan $ --%&gt;
+&lt;%-- $Source: /cvs/main/searching/SolrServer/resources/admin/index.jsp,v $ --%&gt;
+&lt;%-- $Name:  $ --%&gt;
+  
+&lt;script src="jquery-1.4.3.min.js"&gt;&lt;/script&gt;
+&lt;script&gt;
+
+(function($, libName) {
+  var solr = {
+    
+    //The default location of the luke handler relative to this page
+    // Can be overridden in the init(url) method
+    pathToLukeHandler: 'luke',  
+    
+    // Base properties to hold schema information
+    schemaInfo: {},
+    schemaFields: {},
+    schemaDynamicFields: {},
+    schemaTypes: {},
+    schemaFlags: {},
+    
+    //The basic function to call to make the initail JSON calls
+    // takes one option parameter, the path to the luke handler
+    // if undefined, it will use the default, 'luke', which means
+    // this is being called from the same relative URL path
+    init: function(pathToLukeHandler) {
+      if (pathToLukeHandler != undefined) {
+        solr.pathToLukeHandler = pathToLukeHandler;
+      }
+      solr.loadSchema(function() {
+        solr.loadFromLukeHandler(function () {
+          solr.createMenu('menu');
+          solr.displaySchemaInfo();
+        });
+      });
+
+    },
+    
+    //load the Schema from the LukeRequestHandler
+    // this loads every field, and in each field the copy source/dests and flags
+    // we also load the list of field types, and the list of flags
+    loadSchema: function(func) {
+			$.getJSON(solr.pathToLukeHandler +'?show=schema&amp;wt=json', function(data) {
+        //populate all non field/type/flag data in the info block
+        $.each(data.index, function(i, item) {
+          solr.schemaInfo[i] = item;
+        });
+        
+        //LukeRequestHandler places these two attributes outside of the "index" node, but
+        // we want it here so we can more easily display it in the "HOME" block
+        solr.schemaInfo['uniqueKeyField'] = data.schema.uniqueKeyField;
+        solr.schemaInfo['defaultSearchField'] = data.schema.defaultSearchField;
+        //a one-off hack, because the directory string is so long and unbroken
+        // that it can break CSS layouts
+        solr.schemaInfo['directory'] = solr.schemaInfo['directory'].substring(0, solr.schemaInfo['directory'].indexOf('@')+1) + ' ' +  solr.schemaInfo['directory'].substring(solr.schemaInfo['directory'].indexOf('@') +1);
+        
+        // populate the list of fields
+				$.each(data.schema.fields, function(i,item){
+					solr.schemaFields[i]=item;
+     		});
+        // populate the list of field types
+	      $.each(data.schema.types, function(type, ft) {
+          solr.schemaTypes[type] = ft;
+        });
+        //populate the list of dynamic fields
+        $.each(data.schema.dynamicFields, function(i, dynField) {
+          solr.schemaDynamicFields[i] = dynField;
+        });
+        //populate the list of flags, so we can convert flags to text in display
+      	$.each(data.info.key, function(i, flag) {
+      		solr.schemaFlags[i] = flag;
+ 	    	});
+        
+        //LukeRequestHandler returns copyFields src/dest as the entire toString of the field
+        // we only need the field name, so here we loop through the fields, and replace the full
+        // field definitions with the name in the copySources/copyDests properties
+        $.each(solr.schemaFields, function(i, field) {
+          $.each(['copySources', 'copyDests'], function(i, copyProp) {
+            var newFields = new Array();
+            $.each(field[copyProp], function(i, fullName) {
+              newFields.push(fullName.substring(fullName.lastIndexOf(':')+1, fullName.indexOf('{')));
+            });
+            field[copyProp] = newFields;
+          });
+        
+        });
+        //An additional optional callback
+        // used in init to trigger the 2nd call to LukeRequestHandler only
+        // after the first one is finished
+        if ($.isFunction(func)) {
+          func(solr);
+        }
+      });
+    },
+
+    //further populates the loaded schema with information gathered
+    // from the no argument LukeRequestHandler
+    loadFromLukeHandler: function(func) {
+      $.getJSON(solr.pathToLukeHandler+'?wt=json', function(data) {
+        $.each(data.fields, function(i, item) {
+          var field = solr.schemaFields[i];
+          
+          //If undefined, then we have a dynamicField which does not show up
+          // in the LukeRequestHandler show=schema variant
+          if (field == undefined) {
+            field = item;
+            //Attach this field to its dynamicField
+            var base = field.dynamicBase;
+            var dynField = solr.schemaDynamicFields[base];
+
+            //Some fields in a multicore setting have no dynamic base, either
+            // the name of the core is a field that has no type or flags
+            if (dynField != undefined) {
+            	var synFields = dynField['fields'];
+	            if (synFields== undefined) {
+    	          synFields= new Array();
+        	    }
+            	synFields.push(i);
+            	dynField['fields'] = synFields;
+            }
+            solr.schemaFields[i] = item;
+          }
+          //Populate other data in this field that would not have been loaded in
+          // the show=schema variant
+          $.each(item, function(k, v) {
+            if (k == 'topTerms' || k == 'histogram') {
+              solr.schemaFields[i][k] = solr.lukeArrayToHash(v);
+            } else {
+              solr.schemaFields[i][k] = v;
+            }
+          });
+        });
+        //another optional callback; used in the init case to lay out the page
+        // after the data is loaded
+        if ($.isFunction(func)) {
+          func();
+        }
+      });
+    },
+    //some elements in the JSON response are arrays, where odd/even elements
+    // are the name/value, and convert it to a standard map/associative array
+    // incoming: ['foo', 'bar', 'bat', 'baz']
+    // output: {'foo':'bar', 'bat':baz'}
+    lukeArrayToHash: function(termsArr) {
+        var hash = new Object();
+				var temp;
+        //topTerms comes in as an array, with odd indexes the field name
+        // and even indexes the number
+				$.each(termsArr, function(i, item) {
+					if (i%2 ==0) {
+						temp = item;
+					} else {
+						hash[temp] = item;
+					} 
+				});
+				return hash;
+    },
+    
+    //gets the top Terms via an Ajax call the LukeRequestHandler for that field
+    // The callback is used here to redraw the table after the ajax call returns
+		getTopTerms: function(fieldName, numTerms, func) {
+      if (numTerms == undefined) {
+        var numTerms = 10;
+      }
+      if (isNaN(numTerms) || numTerms &lt;=0 || numTerms.indexOf('.') != -1) {
+        return;
+      }
+			$.getJSON(solr.pathToLukeHandler+'?fl='+fieldName+'&amp;wt=json&amp;numTerms='+numTerms, function(data) {                  
+				solr.schemaFields[fieldName]['topTerms'] = solr.lukeArrayToHash(data.fields[fieldName].topTerms);
+        if ($.isFunction(func)) {
+          func(solr.schemaFields[fieldName]['topTerms'], fieldName);
+        }
+			});
+		},
+    
+    // Displays the SchemaInfo in the main content panel
+    // dispayed on data load, and also when 'Home' is clicked
+    displaySchemaInfo: function() {
+      $('#mainInfo').html('');
+      $('#topTerms').html('');
+      $('#histogram').html('');      
+      $('#mainInfo').append(solr.createSimpleText('Schema Information'));
+      //Make sure the uniqueKeyField and defaultSearchFields come first
+      $.each({'Unique Key':'uniqueKeyField', 'Default Search Field':'defaultSearchField'}, function(text, prop) {
+          if (solr.schemaInfo[prop] != undefined) {
+            $('#mainInfo').append(solr.createNameValueText(text, function(p) {
+              p.appendChild(solr.createLink(solr.schemaInfo[prop], solr.schemaInfo[prop]));
+              return p;
+            }));
+          } 
+      });
+      $.each(solr.schemaInfo, function(i, item) {
+        if (i == 'uniqueKeyField' || i == 'defaultSearchField') {
+          //noop; we took care of this above
+        } else {
+          $('#mainInfo').append(solr.createNameValueText(i, item));
+        }
+      });
+      //Close all menus when we display schema home
+      solr.toggleMenus(undefined, ['fields', 'types', 'dynFields']);
+    },
+    
+    // display a dynamic field in the main content panel
+    displayDynamicField: function(dynamicPattern) {
+      var df = solr.schemaDynamicFields[dynamicPattern];
+      $('#mainInfo').html('');
+      $('#topTerms').html('');
+      $('#histogram').html('');
+      $('#mainInfo').append(solr.createSimpleText('Dynamic Field: ' + dynamicPattern));
+      $('#mainInfo').append(solr.createNameValueText('Fields', function(p) {
+        if (df.fields != undefined) {
+          $.each(df.fields, function(i, item) {
+            p.appendChild(solr.createLink(item, item));
+          });
+        } else {
+          p.appendChild(document.createTextNode(' None currently in index'));
+        }
+        return p;
+      }));
+      var ft = solr.schemaTypes[df.type];
+      $('#mainInfo').append(solr.createNameValueText('Field Type', function(p) {
+        p.appendChild(solr.createLink(df.type, df.type, solr.displayFieldType));
+        return p;
+      }));
+      if (df.flags != undefined) {
+        $('#mainInfo').append(solr.createNameValueText('Properties', solr.createTextFromFlags(df.flags, df.type)));
+      }
+      solr.displayAnalyzer(ft.indexAnalyzer, 'Index Analyzer', true);
+      solr.displayAnalyzer(ft.queryAnalyzer, 'Query Analyzer', true);
+
+      solr.toggleMenus('dynFields', ['fields', 'types'], dynamicPattern);
+    },
+    
+    // display a field type in the main area
+    displayFieldType: function(typeName) {
+      var ft = solr.schemaTypes[typeName];
+      $('#mainInfo').html('');
+      $('#topTerms').html('');
+      $('#histogram').html('');
+			$('#mainInfo').append(solr.createSimpleText('Field Type: ' + typeName));
+        $('#mainInfo').append(solr.createNameValueText('Fields', function(p) {
+          if (ft.fields != undefined) {
+            $.each(ft.fields, function(i, item) {
+              if (solr.schemaFields[item] != undefined) {
+                p.appendChild(solr.createLink(item, item));
+              } else {
+                p.appendChild(solr.createLink(item, item, solr.displayDynamicField));
+              }
+              p.appendChild(document.createTextNode(' '));
+            });
+          } else {
+            p.appendChild(document.createTextNode('No fields in index'));
+          }
+          return p;
+        }));
+      $('#mainInfo').append(solr.createNameValueText('Tokenized', ft.tokenized));
+      $('#mainInfo').append(solr.createNameValueText('Class Name', ft.className));
+
+      solr.displayAnalyzer(ft.indexAnalyzer, 'Index Analyzer');
+      solr.displayAnalyzer(ft.queryAnalyzer, 'Query Analyzer');
+      solr.toggleMenus('types', ['fields', 'dynFields'], typeName);
+    },
+    
+    //Displays information about an Analyzer in the main content area
+    displayAnalyzer: function(analyzer, type, shouldCollapse) {
+      var tid = type.replace(' ', '');
+      var collapse = shouldCollapse &amp;&amp; (analyzer.charFilters != undefined || analyzer.tokenizer != undefined || analyzer.filters != undefined);
+      $('#mainInfo').append(solr.createNameValueText(type, function(p) {
+        p.appendChild(document.createTextNode(analyzer.className + ' '));
+        if (collapse) {
+          p.appendChild(solr.createLink(type, 'Details', function() {
+            $('#'+tid).toggle("slow");
+          }));
+        }
+        return p;
+      }));
+      var adiv = document.createElement('div');
+      adiv.id=tid;
+      adiv.className='analyzer';
+      if (collapse) {
+        adiv.style.display='none';
+      }
+      if (analyzer.charFilters != undefined) {
+        adiv.appendChild(solr.createNameValueText('Char Filters', ''));
+        var f = document.createElement('ol');
+        $.each(analyzer.charFilters, function(i, item) {
+          var fil = document.createElement('li');
+          var filterText = item.className;
+          if (item.args != undefined) {
+            filterText += ' args:{'
+            $.each(item.args, function(fi, fitem) {
+              filterText += fi + ': ' + fitem + ' ';
+            });
+            filterText +='}';
+            fil.innerHTML = filterText;
+            f.appendChild(fil);
+          }
+        });
+        adiv.appendChild(f);
+      }
+      if (analyzer.tokenizer != undefined) {
+        adiv.appendChild(solr.createNameValueText("Tokenizer Class", analyzer.tokenizer.className));
+      }
+      if (analyzer.filters != undefined) {
+        adiv.appendChild(solr.createNameValueText('Filters', ''));
+        var f = document.createElement('ol');
+        $.each(analyzer.filters, function(i, item) {
+          var fil = document.createElement('li');
+          var filterText = item.className;
+          if (item.args != undefined) {
+            filterText += ' args:{'
+            $.each(item.args, function(fi, fitem) {
+              filterText += fi + ': ' + fitem + ' ';
+            });
+            filterText +='}';
+            fil.innerHTML = filterText;
+            f.appendChild(fil);
+          }
+        });
+        adiv.appendChild(f);
+      }
+      $('#mainInfo').append(adiv);
+    },
+    
+    // display information about a Field in the main content area
+    // and its TopTerms and Histogram in related divs
+		displayField: function(fieldName) {
+      var field = solr.schemaFields[fieldName];
+      var isDynamic = field.dynamicBase != undefined ? true : false;
+      var ft;
+      var ftName;
+      $('#mainInfo').html('');  
+      $('#topTerms').html('');
+      $('#histogram').html('');
+      $('#mainInfo').append(solr.createSimpleText('Field: ' + fieldName));
+      
+      //For regular fields, we take their properties; for dynamicFields,
+      // we take them from their dynamicField definitions
+      if (isDynamic) {
+        ftName = solr.schemaDynamicFields[field.dynamicBase].type
+        $('#mainInfo').append(solr.createNameValueText('Dynamically Created From Pattern', function(p) {
+          p.appendChild(solr.createLink(field.dynamicBase, field.dynamicBase, solr.displayDynamicField));
+          return p;
+        }));
+      } else {
+        ftName = field.type;
+      }			
+      ft = solr.schemaTypes[field.type];
+      $('#mainInfo').append(solr.createNameValueText('Field Type', function(p) {
+        p.appendChild(solr.createLink(ftName, ftName, solr.displayFieldType));
+        return p;
+      }));
+			if (solr.schemaFlags != '') {
+        $.each({'flags':'Properties', 'schema':'Schema', 'index':'Index'}, function(prop, text) {
+          if (field[prop] != undefined) {
+            $('#mainInfo').append(solr.createNameValueText(text, solr.createTextFromFlags(field[prop], ft)));
+          }
+        });
+      }    
+      $.each({'copySources':'Copied From', 'copyDests':'Copied Into'}, function(prop, text) {
+        if (field[prop] != undefined &amp;&amp; field[prop] != '') {
+          $('#mainInfo').append(solr.createNameValueText(text, function(p) {
+            $.each(field[prop], function(i, item) {
+              p.appendChild(solr.createLink(item, item));
+              p.appendChild(document.createTextNode(' '));
+            });
+            return p;
+          }));
+        }
+      });
+      if (field.positionIncrementGap != undefined) {
+        $('#mainInfo').append(solr.createNameValueText('Position Increment Gap', field.positionIncrementGap));
+      }
+      solr.displayAnalyzer(ft.indexAnalyzer, 'Index Analyzer', true);
+      solr.displayAnalyzer(ft.queryAnalyzer, 'Query Analyzer', true);
+      if (field.docs != undefined) {
+        $('#mainInfo').append(solr.createNameValueText('Docs', field.docs));
+      }
+      if (field.distinct != undefined) {
+        $('#mainInfo').append(solr.createNameValueText('Distinct', field.distinct));
+      }
+
+      if (field.topTerms != undefined) {
+        solr.displayTopTerms(field.topTerms, fieldName);
+      }
+
+      if (field.histogram != undefined) {
+        solr.drawHistogram(field.histogram);
+      }
+      solr.toggleMenus('fields', ['types', 'dynFields'], fieldName);
+		},	
+
+    //utility method to create a single sentence list of properties from a flag set
+    // or pass it on, if the flags are (unstored field)
+		createTextFromFlags: function(fieldFlags, fieldType) {
+			var value;
+      if (fieldFlags != '(unstored field)') {
+        var value = '';      
+        for (var i=0;i&lt;fieldFlags.length;i++) {
+          if (fieldFlags.charAt(i) != '-') {
+            value += solr.schemaFlags[fieldFlags.charAt(i)];
+          value += ', ';
+          }
+        }
+        value = value.substring(0, value.length-2);
+			} else {
+      value = fieldFlags;
+      }
+			return value;
+		},
+
+    //Store the currently highlighted menu item, as otherwise we
+    // must traverse all li menu items, which is very slow on schemas with
+    // large number of fields
+    // for example $('#menu ul li').siblings().removeClass('selected');
+    currentlyHighlightedMenuId: undefined,
+    
+    //add a highlight to the currently selected menu item, and remove
+    // the highlights from all other menu items
+    highlightMenuItem: function(idToSelect) {
+      if (solr.currentlyHighlightedMenuId != undefined) {
+        $('#'+solr.currentlyHighlightedMenuId).removeClass('selected');
+      }
+      $('#'+idToSelect).addClass('selected');
+      solr.currentlyHighlightedMenuId = idToSelect;
+    },
+    
+    //Opens one menu group, close the others, and optionally highlight one
+    // item, which should be in the opened menu
+    toggleMenus: function(idToShow, idsToHide, idToSelect) {
+      if (idToSelect != undefined) {
+        solr.highlightMenuItem(idToShow + idToSelect);
+      }
+      $('#'+idToShow).show("slow");
+      $.each(idsToHide, function(i, idToHide) {
+        $('#'+idToHide).hide("slow");
+      });
+    },
+    
+    //A utility method to create a paragraph, which takes two arguments;
+    // an opening text, and either text or a callback function to follow
+    // any callback function must return the node passed into it
+    createNameValueText: function(openingText, func) {
+      var p = document.createElement('p');
+      p.appendChild(solr.createSimpleText(openingText + ': ', 'b'));
+      return solr.applyFuncToNode(p, func);
+    },
+
+    //utility method to create an HTML text element node
+    // with the literal text to place, and an optional function to apply
+    // any callback function must return the node passed into it 
+    createSimpleText: function(text, n, func) {
+      if (n == undefined) {
+        n = 'h2';
+      }
+      var no= document.createElement(n);
+      no.appendChild(document.createTextNode(text));
+      return solr.applyFuncToNode(no, func);
+    },
+    
+    //Utility method that applies a function or a string to append
+    // an additional child to a node
+    applyFuncToNode: function(no, func) {
+      if ($.isFunction(func)) {
+        no = func(no);
+      } else {
+        // if it is not a function, append it as a string
+        if (func != undefined) {
+          no.appendChild(document.createTextNode(' ' + func));
+        }
+      }
+      return no;
+    },
+        
+    //show a table of top terms for a given field
+    displayTopTerms: function(topTerms, fieldName) {
+        $('#topTerms').html('');
+        var tbl = document.createElement('table');
+        tbl.className='topTerms';
+        var thead= document.createElement('thead');
+        var headerRow = document.createElement('tr');
+        $.each(['term', 'frequency'], function() {
+          var cell = document.createElement('th');
+          cell.innerHTML= this;
+          headerRow.appendChild(cell);
+        });
+        thead.appendChild(headerRow);
+        tbl.appendChild(thead);
+        var tbody = document.createElement('tbody');
+        
+        var numTerms = 0;
+        $.each(topTerms, function(term, count) {
+          var c1 = $('&lt;td&gt;').text(term);
+          var c2 = $('&lt;td&gt;').text(count);
+          var row = $('&lt;tr&gt;').append(c1).append(c2);
+          tbody.appendChild(row.get(0));
+          numTerms++;
+        });
+        tbl.appendChild(tbody);
+        
+        //create a header along with an input widget so the user
+        // can request a different number of Top Terms
+        var h2 = document.createElement('h2');
+        h2.appendChild(document.createTextNode('Top   '));
+        var termsGetter = document.createElement('input');
+        termsGetter.type='text';
+        termsGetter.size=5;
+        termsGetter.value=numTerms;
+        
+        termsGetter.onchange=function() {
+            solr.getTopTerms(fieldName, this.value, solr.displayTopTerms);
+        }
+        h2.appendChild(termsGetter);
+        h2.appendChild(document.createTextNode(' Terms'));
+        $('#topTerms').append(h2);
+        
+        document.getElementById('topTerms').appendChild(tbl);
+        $('#topTerms').append(tbl);
+    },
+    
+    //draws a histogram, taking a map of values and an optional total height and width for the table
+    drawHistogram: function(histogram, totalHeightArg, totalWidthArg) {
+      $('#histogram').html('');
+      $('#histogram').append(solr.createSimpleText('Histogram'));
+      var max = 0;
+      var bars =0;
+      //find the # of columns and max value in the histogram 
+      // so we can create an appropriately scaled chart
+      $.each(histogram, function(i, item) {
+        if (item &gt; max) max = item;
+        bars += 1;
+      });
+      if (max ==0) {
+        $('#histogram').append(solr.createNameValueText('No histogram available'));
+      } else {
+        var totalHeight = totalHeightArg == undefined ? 208 : totalHeightArg;
+        var totalWidth = totalWidthArg == undefined ? 160 : totalWidthArg;
+        var tbl = document.createElement('table');
+        tbl.style.width=totalWidth+'px';
+        tbl.className = 'histogram';
+        var h = document.createElement('tbody');
+        var r = document.createElement('tr');
+        var r2 = document.createElement('tr');
+        $.each(histogram, function(i, item) {
+          var c = document.createElement('td');
+          c.innerHTML=item+'&lt;div style="width:'+totalWidth/bars+'px;height:'+(item*totalHeight/max)+'px;background:blue"&gt;&amp;nbsp&lt;/div&gt;';
+          r.appendChild(c);
+          var c2 = document.createElement('td');
+          c2.innerHTML='' + i;
+          r2.appendChild(c2);
+        });
+        h.appendChild(r);
+        h.appendChild(r2);
+        tbl.appendChild(h);
+        $('#histogram').append(tbl);
+      }
+    },
+    
+    //dynamically creates a link to be appended
+    createLink: function(idToDisplay, linkText, linkFunction) {
+      var link = document.createElement('a');
+      if (!$.isFunction(linkFunction)) {
+        linkFunction = solr.displayField
+      }
+      link.onclick=function() {
+        linkFunction(idToDisplay);
+        return false;
+      };
+      link.href='#';
+      link.innerHTML=linkText;
+      return link;
+    },
+    
+    //Creates a menu header that can expand or collapse its children
+    createMenuHeader: function(text, idToShow, idsToHide) {
+      var head = document.createElement('h3');
+      var a = document.createElement('a');
+      a.onclick=function() {
+        solr.toggleMenus(idToShow, idsToHide);
+        return false;
+      };
+      a.href='#';
+      a.innerHTML=text;
+      head.appendChild(a);
+      return head;
+    },
+    
+    //Creates an element in a menu (e.g. each field in a list of fields)
+    createMenuItem: function(tagName, text, link, type, func) {
+        var fieldEle = document.createElement('li');
+        fieldEle.id=type+text;
+        var funct = func == undefined ? undefined : func;
+        fieldEle.appendChild(solr.createLink(text, link, funct));
+        return fieldEle;
+    },
+    
+    //populates the menu div
+    createMenu: function(menuId) {
+      var m = $('#'+menuId);
+      var home = document.createElement('h2');
+      home.appendChild(solr.createLink('Home', 'Home', solr.displaySchemaInfo));
+      m.append(home);
+      m.append(solr.createMenuHeader('Fields', 'fields', ['types', 'dynFields']));
+      var fields= document.createElement('ul');
+      fields.style.display='none';
+      fields.id = 'fields';
+      $.each(solr.schemaFields, function(i, item) {
+        fields.appendChild(solr.createMenuItem('li', i, i, fields.id));
+      });
+      m.append(fields);
+      m.append(solr.createMenuHeader('Dynamic Fields', 'dynFields', ['fields', 'types']));
+      var dyns = document.createElement('ul');
+      dyns.style.display = 'none';
+      dyns.id = 'dynFields';
+      $.each(solr.schemaDynamicFields, function(i, item) {
+        dyns.appendChild(solr.createMenuItem('li', i,i, dyns.id, solr.displayDynamicField));
+      });
+      m.append(dyns);
+      m.append(solr.createMenuHeader('Field Types', 'types', ['fields', 'dynFields']));
+      var types = document.createElement('ul');
+      types.style.display='none';
+      types.id='types';
+      $.each(this.schemaTypes, function(i, item) {
+        types.appendChild(solr.createMenuItem('li', i, i,types.id, solr.displayFieldType));
+      });
+      m.append(types);
+    }
+   };
+   
+	window[libName] = solr;
+})(jQuery, 'solr');
+$(document).ready(function() {
+  solr.init();
+});
+    
+$(window).unload( function() {
+  solr = null;
+  $('#mainInfo').html('');
+  $('#menu').html('');
+  $('#topTerms').html('');
+  $('#histogram').html('');
+});
+  
+&lt;/script&gt;
+&lt;%-- do a verbatim include so we can use the local vars --%&gt;
+&lt;%@include file="header.jsp" %&gt;
+&lt;div id="schemaTop"&gt;
+&lt;h2&gt;Schema Browser | See &lt;a href="file/?file=schema.xml"&gt;Raw Schema.xml&lt;/a&gt;&lt;/h2&gt;
+&lt;/div&gt;
+&lt;div id="menu"&gt;&lt;/div&gt;
+&lt;div id="content"&gt;
+&lt;div id="mainInfo"&gt;&lt;h2&gt;Please wait...loading and parsing Schema Information from LukeRequestHandler&lt;/h2&gt;&lt;p&gt;If it does not load or your browser is not javascript or ajax-capable, you may wish to examine your schema using the &lt;a href="luke?wt=xslt&amp;tr=luke.xsl"&gt;Server side transformed LukeRequestHandler&lt;/a&gt; or the raw &lt;a href="file/?file=schema.xml"&gt;schema.xml&lt;/a&gt; instead.&lt;/div&gt;
+&lt;div id="topTerms"&gt;&lt;/div&gt;
+&lt;div id="histogram"&gt;&lt;/div&gt;
+&lt;/div&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/solr-admin.css
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/solr-admin.css	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,215 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+h1, h2, h3, h4, h5 {
+   display: block;
+   font-family: ITC Officina Sans Book, Terminator Two, Helvetica, Arial, sans-serif;
+   font-style: bold;
+   margin: 0;
+}
+
+strong {
+   font-family: ITC Officina Sans Book, Terminator Two, Helvetica, Arial, sans-serif;
+   font-style: bold;
+   margin: 0;
+}
+
+input.std, textarea.std {
+   color: black;
+   border: 2px inset #ff9933;
+   background-color: #ffffff;
+   width:450px;
+   max-width:450px;
+}
+
+input.stdbutton {
+   font-family: ITC Officina Sans Book, Helvetica, Arial, sans-serif;
+   font-style: bold;
+   font-size: 11;
+   text-transform: capitalize;
+   color: black;
+   background-color: #dddddd;
+   border: groove #ff9933;
+}
+
+input.stdbutton:hover {
+   color: #0000ff;
+   border: groove #0000ff;
+}
+
+input.stdbuttondis{
+   font-family: ITC Officina Sans Book, Helvetica, Arial, sans-serif;
+   font-style: bold;
+   font-size: 11;
+   text-transform: capitalize;
+   color: #8B8B83;
+   background-color: #dddddd;
+   border: groove #8B8B83;
+}
+
+body {
+   background-color: #bbbbbb;
+}
+
+table {
+   display: table;
+   background-color: #FAF7E4;
+   width: 100%;
+   border-top: 4px solid #666666;
+   border-left: 2px solid #666666;
+   text-align: left;
+   vertical-align: top;
+   cellpadding-right: 8px;
+}
+
+table.responseHeader, table.analysis {
+   width: auto;
+}
+
+table {
+   border-collapse: collapse
+}
+
+tr &gt; td:first-child {
+   width: 30%;
+}
+
+td.debugdata, td.highlight, td.responseHeader {
+   width: auto;
+}
+
+td.highlight {
+   background:	#ccccff;
+}
+
+td.responseHeader {
+   width: auto;
+   text-align: right;
+}
+
+td.responseHeader + td {
+   text-align: left;
+   font-family: Courier;
+}
+
+
+th, td {
+   text-align: left;
+   vertical-align: top;
+   border-bottom: 1px solid #ff9933;
+}
+
+a {
+   text-decoration:	none;
+   font-weight:	bold;
+   font-size:	11px;
+   background:	#FAF7E4;
+   text-transform: uppercase;
+}
+		
+a:link {	
+   color:	#0000aa;
+}			
+					
+a:visited {	
+   color:	#0000ff;
+}			
+								
+a:active {
+   color:	#4444ff;
+}			
+
+a:hover {
+   color:	#0000ff;
+   background:	#ccccff;
+}			
+
+a:offsite {	
+   color:	#0000aa;
+}		 
+
+table.analysis th, table.analysis td {
+border-right:1px solid black;
+}
+
+/**
+  * styles for the schema browser
+  */
+
+table.topTerms {
+  width: 450px;
+}
+
+table.histogram {
+   vertical-align: bottom;
+}
+
+table.histogram td, table.histogram th {
+   text-align: center;
+   vertical-align: bottom;
+   border-bottom: 1px solid #ff9933;
+   width: auto;
+}
+
+#menu {
+  background-color: #FAF7E4;
+  height:100%;
+  min-height:100%;
+  width:140px;
+  float:left;
+  margin-right:20px
+}
+#menu h3 {
+  padding-left:10px;
+}
+#menu ul {
+  list-style: none;
+  text-align: right;
+  margin: 0;
+  padding: 0
+}
+#menu li.header {
+  text-align: left;
+}
+#menu li {
+  border: 1px solid #ff9933;
+  margin: 0
+}
+#menu li a {
+  display:block;
+}
+#menu li.selected a {
+  background-color: #ccccff
+}
+#menu a:hover {
+  background: #ccccff
+}
+
+#schemaTop {
+  border-bottom:1px black solid;
+}
+
+#content {
+  margin-left: 160px;
+}
+#topTerms {
+  float:left;
+  margin-right:40px;
+}
+div.analyzer {
+  margin-left:20px;
+}

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/solr_small.png
==============================================================================
Binary file. No diff available.

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,92 @@
+&lt;%@ page contentType="text/xml; charset=utf-8" pageEncoding="UTF-8" language="java" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrInfoMBean,
+                 org.apache.solr.core.SolrInfoRegistry,
+                 org.apache.solr.common.util.NamedList,
+                 java.util.Date,
+                 java.util.Map"%&gt;
+&lt;?xml-stylesheet type="text/xsl" href="stats.xsl"?&gt;
+&lt;%@include file="_info.jsp" %&gt;
+
+
+&lt;solr&gt;
+  &lt;%  
+  if (core.getName() != null) { %&gt; 
+	  &lt;core&gt;&lt;% XML.escapeCharData(core.getName(), out); %&gt;&lt;/core&gt; 
+  &lt;% } %&gt;
+  &lt;schema&gt;&lt;% XML.escapeCharData(collectionName, out); %&gt;&lt;/schema&gt;
+  &lt;host&gt;&lt;% XML.escapeCharData(hostname, out); %&gt;&lt;/host&gt;
+  &lt;now&gt;&lt;% XML.escapeCharData(new Date().toString(), out); %&gt;&lt;/now&gt;
+  &lt;start&gt;&lt;% XML.escapeCharData(new Date(core.getStartTime()).toString(), out); %&gt;&lt;/start&gt;
+  &lt;solr-info&gt;
+&lt;%
+for (SolrInfoMBean.Category cat : SolrInfoMBean.Category.values()) {
+%&gt;
+    &lt;&lt;%= cat.toString() %&gt;&gt;
+&lt;%
+ Map&lt;String,SolrInfoMBean&gt; reg = core.getInfoRegistry();
+  for (Map.Entry&lt;String,SolrInfoMBean&gt; entry : reg.entrySet()) {
+    String key = entry.getKey();
+    SolrInfoMBean m = entry.getValue();
+
+    if (m.getCategory() != cat) continue;
+
+    NamedList nl = m.getStatistics();
+    if ((nl != null) &amp;&amp; (nl.size() != 0)) {
+      String na     = "None Provided";
+      String name   = (m.getName()!=null ? m.getName() : na);
+      String vers   = (m.getVersion()!=null ? m.getVersion() : na);
+      String desc   = (m.getDescription()!=null ? m.getDescription() : na);
+%&gt;
+    &lt;entry&gt;
+      &lt;name&gt;
+        &lt;% XML.escapeCharData(key, out); %&gt;
+      &lt;/name&gt;
+      &lt;class&gt;
+        &lt;% XML.escapeCharData(name, out); %&gt;
+      &lt;/class&gt;
+      &lt;version&gt;
+        &lt;% XML.escapeCharData(vers, out); %&gt;
+      &lt;/version&gt;
+      &lt;description&gt;
+        &lt;% XML.escapeCharData(desc, out); %&gt;
+      &lt;/description&gt;
+      &lt;stats&gt;
+&lt;%
+      for (int i = 0; i &lt; nl.size() ; i++) {
+%&gt;
+        &lt;stat name="&lt;% XML.escapeAttributeValue(nl.getName(i), out);  %&gt;" &gt;
+          &lt;% XML.escapeCharData(nl.getVal(i).toString(), out); %&gt;
+        &lt;/stat&gt;
+&lt;%
+      }
+%&gt;
+      &lt;/stats&gt;
+    &lt;/entry&gt;
+&lt;%
+    }
+%&gt;
+&lt;%
+  }
+%&gt;
+    &lt;/&lt;%= cat.toString() %&gt;&gt;
+&lt;%
+}
+%&gt;
+  &lt;/solr-info&gt;
+&lt;/solr&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/stats.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,220 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id: stats.xsl 1075192 2011-02-28 00:50:09Z uschindler $ --&gt;
+&lt;!-- $URL: <a href="https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/stats.xsl" target="_new">https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/stats.xsl</a> $ --&gt;
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+
+  &lt;xsl:output
+    method="html"
+    encoding="utf-8"
+    media-type="text/html"
+    indent="yes"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+
+  &lt;xsl:template match="/"&gt;
+    &lt;xsl:variable name="title"&gt;
+      &lt;!-- no whitespace before the colon --&gt;
+      Solr Statistics&lt;xsl:if test="solr/core"&gt;:
+         &lt;xsl:value-of select="solr/core"/&gt;
+      &lt;/xsl:if&gt;
+(&lt;xsl:value-of select="solr/schema" /&gt;)
+    &lt;/xsl:variable&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+	&lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+	&lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;&lt;xsl:value-of select="$title"/&gt;&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href="."&gt;
+	   &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"&gt;
+	   &lt;/img&gt;
+	&lt;/a&gt;
+        &lt;h1&gt;&lt;xsl:value-of select="$title"/&gt;&lt;/h1&gt;
+          &lt;xsl:value-of select="solr/host" /&gt;
+          &lt;br clear="all" /&gt;
+        &lt;xsl:apply-templates/&gt;
+        &lt;br /&gt;&lt;br /&gt;
+        &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr"&gt;
+  &lt;table&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+        &lt;H3&gt;Category&lt;/H3&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        [&lt;a href="#core"&gt;Core&lt;/a&gt;]
+        [&lt;a href="#cache"&gt;Cache&lt;/a&gt;]
+        [&lt;a href="#query"&gt;Query&lt;/a&gt;]
+        [&lt;a href="#update"&gt;Update&lt;/a&gt;]
+        [&lt;a href="#highlight"&gt;Highlighting&lt;/a&gt;]
+        [&lt;a href="#other"&gt;Other&lt;/a&gt;]
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        Current Time: &lt;xsl:value-of select="now" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        Server Start Time: &lt;xsl:value-of select="start" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;xsl:apply-templates select="*" mode="header" /&gt;
+  &lt;/table&gt;
+  &lt;xsl:apply-templates select="solr-info" mode="main" /&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- catch all in case new header info gets added to XML --&gt;
+  &lt;xsl:template match="solr/*" mode="header" priority="-10"&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+      &lt;/td&gt;
+      &lt;td&gt;
+        &lt;xsl:value-of select="local-name()" /&gt;: &lt;xsl:value-of select="text()" /&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- things we've already explicitly taken care of --&gt;
+  &lt;xsl:template match="solr/schema"    mode="header" /&gt;
+  &lt;xsl:template match="solr/core"      mode="header" /&gt;
+  &lt;xsl:template match="solr/host"      mode="header" /&gt;
+  &lt;xsl:template match="solr/now"       mode="header" /&gt;
+  &lt;xsl:template match="solr/start"     mode="header" /&gt;
+  &lt;xsl:template match="solr/solr-info" mode="header" /&gt;
+
+  &lt;xsl:template match="solr/solr-info" mode="main"&gt;
+    &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/*"&gt;
+    &lt;br /&gt;
+    &lt;xsl:apply-templates select="." mode="sub-header" /&gt;
+    &lt;table&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &amp;#xa0;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CORE" mode="sub-header"&gt;
+    &lt;a name="core"&gt;&lt;h2&gt;Core&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/CACHE" mode="sub-header"&gt;
+    &lt;a name="cache"&gt;&lt;h2&gt;Cache&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/QUERYHANDLER" mode="sub-header"&gt;
+    &lt;a name="query"&gt;&lt;h2&gt;Query Handlers&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/UPDATEHANDLER" mode="sub-header"&gt;
+    &lt;a name="update"&gt;&lt;h2&gt;Update Handlers&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/HIGHLIGHTING" mode="sub-header"&gt;
+    &lt;a name="highlight"&gt;&lt;h2&gt;Highlighting&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- catch all for new types of plugins --&gt;
+  &lt;xsl:template match="solr/solr-info/*" mode="sub-header" priority="-10"&gt;
+    &lt;h2&gt;&lt;xsl:value-of select="local-name()"/&gt;&lt;/h2&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/OTHER" mode="sub-header"&gt;
+    &lt;a name="other"&gt;&lt;h2&gt;Other&lt;/h2&gt;&lt;/a&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/solr-info/*/entry"&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;name:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="name"/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;class:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="class"/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;version:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="version"/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;description:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;tt&gt;&lt;xsl:value-of select="description"/&gt;&amp;#xa0;&lt;/tt&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+            &lt;strong&gt;stats:&amp;#xa0;&lt;/strong&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+            &lt;xsl:for-each select="stats/stat[@name]"&gt;
+              &lt;xsl:value-of select="@name"/&gt;
+              &lt;xsl:text&gt; : &lt;/xsl:text&gt;
+              &lt;xsl:variable name="name" select="@name" /&gt;
+              &lt;xsl:value-of select="." /&gt;&lt;br /&gt;
+            &lt;/xsl:for-each&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td align="right"&gt;
+          &lt;/td&gt;
+          &lt;td&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/tabular.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/tabular.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,141 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id: tabular.xsl 1075192 2011-02-28 00:50:09Z uschindler $ --&gt;
+&lt;!-- $URL: <a href="https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/tabular.xsl" target="_new">https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_3/solr/src/webapp/web/admin/tabular.xsl</a> $ --&gt;
+
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+
+  &lt;xsl:output
+    method="html"
+    encoding="utf-8"
+    media-type="text/html"
+    indent="yes"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+
+  &lt;xsl:template match="/"&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+        &lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;Solr Search Results&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href="."&gt;
+           &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"&gt;
+           &lt;/img&gt;
+        &lt;/a&gt;
+        &lt;h1&gt;Solr Search Results&lt;/h1&gt;
+          &lt;br clear="all" /&gt;
+        &lt;xsl:apply-templates/&gt;
+        &lt;br /&gt;&lt;br /&gt;
+        &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="responseHeader"&gt;
+    &lt;table name="responseHeader"&gt;
+      &lt;xsl:apply-templates/&gt;
+    &lt;/table&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="status"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;Status:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="numFields"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;Number of Fields:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="numRecords"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;Records Returned:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="numFound"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;Records Found:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+
+  &lt;xsl:template match="QTime"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;Query time:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;(ms)&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- YCS.. match everything.  How to match only what is not
+       matched above???
+    --&gt;
+  &lt;xsl:template match="responseHeader/*"&gt;
+    &lt;tr&gt;
+      &lt;td name="responseHeader"&gt;&lt;strong&gt;&lt;xsl:value-of select="name(.)"&gt;&lt;/xsl:value-of&gt;:&amp;#xa0;&lt;/strong&gt;&lt;/td&gt;
+      &lt;td&gt;&lt;xsl:value-of select="."&gt;&lt;/xsl:value-of&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="responseBody"&gt;
+    &lt;br&gt;&lt;/br&gt;&lt;br&gt;&lt;/br&gt;
+    &lt;table border="2"&gt;
+
+      &lt;!-- table headers --&gt;
+      &lt;tr&gt;
+        &lt;xsl:for-each select="record[1]/field"&gt;
+          &lt;th&gt;&lt;xsl:value-of select="name"&gt;&lt;/xsl:value-of&gt;&lt;/th&gt;
+        &lt;/xsl:for-each&gt;
+      &lt;/tr&gt;
+
+      &lt;!-- table rows --&gt;
+      &lt;xsl:for-each select="record"&gt;
+        &lt;tr&gt;
+          &lt;xsl:for-each select="field"&gt;
+            &lt;td&gt;&lt;xsl:value-of select="value"&gt;&lt;/xsl:value-of&gt;&amp;#xa0;&lt;/td&gt;
+          &lt;/xsl:for-each&gt;
+        &lt;/tr&gt;
+      &lt;/xsl:for-each&gt;
+
+    &lt;/table&gt;
+
+
+  &lt;/xsl:template&gt;
+
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,110 @@
+&lt;%@ page contentType="text/xml; charset=utf-8" pageEncoding="UTF-8" language="java" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+&lt;%@ page import="org.apache.solr.core.SolrCore,
+                 java.lang.management.ManagementFactory,
+                 java.lang.management.ThreadMXBean,
+                 java.lang.management.ThreadInfo,
+                 java.io.IOException,
+                 org.apache.solr.common.util.XML"%&gt;
+&lt;%@include file="_info.jsp" %&gt;
+
+
+&lt;?xml-stylesheet type="text/xsl" href="threaddump.xsl"?&gt;
+&lt;%!
+  static ThreadMXBean tmbean = ManagementFactory.getThreadMXBean();
+%&gt;
+&lt;solr&gt;
+  &lt;core&gt;&lt;%= collectionName %&gt;&lt;/core&gt;
+  &lt;system&gt;
+  &lt;jvm&gt;
+    &lt;version&gt;&lt;%=System.getProperty("java.vm.version")%&gt;&lt;/version&gt;
+    &lt;name&gt;&lt;%=System.getProperty("java.vm.name")%&gt;&lt;/name&gt;
+  &lt;/jvm&gt;
+  &lt;threadCount&gt;
+    &lt;current&gt;&lt;%=tmbean.getThreadCount()%&gt;&lt;/current&gt;
+    &lt;peak&gt;&lt;%=tmbean.getPeakThreadCount()%&gt;&lt;/peak&gt;
+    &lt;daemon&gt;&lt;%=tmbean.getDaemonThreadCount()%&gt;&lt;/daemon&gt;
+  &lt;/threadCount&gt;
+&lt;%
+  long[] tids;
+  ThreadInfo[] tinfos;
+  tids = tmbean.findMonitorDeadlockedThreads();
+  if (tids != null) {
+      out.println("  &lt;deadlocks&gt;");
+      tinfos = tmbean.getThreadInfo(tids, Integer.MAX_VALUE);
+      for (ThreadInfo ti : tinfos) {
+          printThreadInfo(ti, out);
+      }
+      out.println("  &lt;/deadlocks&gt;");
+  }
+%&gt;
+&lt;%
+  tids = tmbean.getAllThreadIds();
+  tinfos = tmbean.getThreadInfo(tids, Integer.MAX_VALUE);
+  out.println("  &lt;threadDump&gt;");
+  for (ThreadInfo ti : tinfos) {
+     printThreadInfo(ti, out);
+  }
+  out.println("  &lt;/threadDump&gt;");
+%&gt;
+  &lt;/system&gt;
+&lt;/solr&gt;
+
+&lt;%!
+  static void printThreadInfo(ThreadInfo ti, JspWriter out) throws IOException {
+      long tid = ti.getThreadId();
+      out.println("    &lt;thread&gt;");
+      out.println("      &lt;id&gt;" + tid + "&lt;/id&gt;");
+      out.print("      &lt;name&gt;");
+      XML.escapeCharData(ti.getThreadName(), out);
+      out.println("&lt;/name&gt;");
+      out.println("      &lt;state&gt;" + ti.getThreadState() + "&lt;/state&gt;");
+      if (ti.getLockName() != null) {
+          out.println("      &lt;lock&gt;" + ti.getLockName() + "&lt;/lock&gt;");
+      }
+      if (ti.isSuspended()) {
+          out.println("      &lt;suspended/&gt;");
+      }
+      if (ti.isInNative()) {
+          out.println("      &lt;inNative/&gt;");
+      }
+      if (tmbean.isThreadCpuTimeSupported()) {
+          out.println("      &lt;cpuTime&gt;" + formatNanos(tmbean.getThreadCpuTime(tid)) + "&lt;/cpuTime&gt;");
+          out.println("      &lt;userTime&gt;" + formatNanos(tmbean.getThreadUserTime(tid)) + "&lt;/userTime&gt;");
+      }
+
+      if (ti.getLockOwnerName() != null) {
+          out.println("      &lt;owner&gt;");
+          out.println("        &lt;name&gt;" + ti.getLockOwnerName() + "&lt;/name&gt;");
+          out.println("        &lt;id&gt;" + ti.getLockOwnerId() + "&lt;/id&gt;");
+          out.println("      &lt;/owner&gt;");
+      }
+      out.println("      &lt;stackTrace&gt;");
+      for (StackTraceElement ste : ti.getStackTrace()) {
+          out.print("        &lt;line&gt;");
+          XML.escapeCharData("at " + ste.toString(), out);
+          out.println("        &lt;/line&gt;");
+      }
+      out.println("      &lt;/stackTrace&gt;");
+      out.println("    &lt;/thread&gt;");
+  }
+
+  static String formatNanos(long ns) {
+      return String.format("%.4fms", ns / (double) 1000000);
+  }
+%&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.xsl
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/admin/threaddump.xsl	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,103 @@
+&lt;?xml version="1.0" encoding="utf-8"?&gt;
+&lt;!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--&gt;
+&lt;!-- $Id$ --&gt;
+&lt;!-- $URL$ --&gt;
+
+&lt;xsl:stylesheet
+  xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" target="_new">http://www.w3.org/1999/XSL/Transform</a>"
+  version="1.0"&gt;
+
+  &lt;xsl:output
+    method="html"
+    indent="yes"
+    encoding="utf-8"
+    media-type="text/html"
+    doctype-public="-//W3C//DTD HTML 4.01//EN"
+    doctype-system="<a href="http://www.w3.org/TR/html4/strict.dtd" target="_new">http://www.w3.org/TR/html4/strict.dtd</a>" /&gt;
+
+  &lt;xsl:template match="/"&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;&lt;/link&gt;
+        &lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+        &lt;title&gt;Solr Info&lt;/title&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;a href="."&gt;
+          &lt;img border="0" align="right" height="78" width="142" src="solr_small.png" alt="Apache Solr"/&gt;
+        &lt;/a&gt;
+        &lt;h1&gt;Solr Admin (&lt;xsl:value-of select="solr/meta/collection" /&gt;)&lt;/h1&gt;
+        &lt;h2&gt;Thread Dump&lt;/h2&gt;
+        &lt;div style="margin-top: 1em;"&gt;
+          &lt;table&gt;
+            &lt;xsl:apply-templates/&gt;
+          &lt;/table&gt;
+          &lt;a href="."&gt;Return to Admin Page&lt;/a&gt;
+        &lt;/div&gt;
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:include href="meta.xsl"/&gt;
+
+  &lt;xsl:template match="solr/system/jvm"&gt;
+    &lt;tr&gt;
+      &lt;td&gt;&lt;xsl:value-of select="name"/&gt; &lt;xsl:value-of select="version"/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/system/threadCount"&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+        Thread Count:
+        current=&lt;xsl:value-of select="current"/&gt;,
+        peak=&lt;xsl:value-of select="peak"/&gt;,
+        daemon=&lt;xsl:value-of select="daemon"/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="solr/system/threadDump"&gt;
+    &lt;div&gt;Full Thread Dump:&lt;/div&gt;
+    &lt;xsl:for-each select="thread"&gt;
+      &lt;!-- OG: TODO: add suspended/native conditionals --&gt;
+      &lt;tr&gt;
+        &lt;td style="margin-left: 1em; font-weight: bold;"&gt;
+          '&lt;xsl:value-of select="name"/&gt;' 
+          Id=&lt;xsl:value-of select="id"/&gt;, 
+          &lt;xsl:value-of select="state"/&gt; 
+          on lock=&lt;xsl:value-of select="lock"/&gt;, 
+          total cpu time=&lt;xsl:value-of select="cpuTime"/&gt; 
+          user time=&lt;xsl:value-of select="userTime"/&gt;
+        &lt;/td&gt;
+      &lt;/tr&gt;
+      &lt;xsl:apply-templates select="stackTrace"/&gt;
+    &lt;/xsl:for-each&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match="stackTrace"&gt;
+    &lt;tr&gt;
+      &lt;td style="margin-left: 1em;"&gt;
+        &lt;xsl:for-each select="line"&gt;
+          &lt;xsl:value-of select="."/&gt;&lt;br/&gt;
+        &lt;/xsl:for-each&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/favicon.ico
==============================================================================
Binary file. No diff available.

Added: modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/index.jsp
==============================================================================
--- (empty file)
+++ modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/src/main/webapp/index.jsp	Fri Jul 29 08:18:13 2011
@@ -0,0 +1,49 @@
+&lt;%@ page import="org.apache.solr.core.SolrCore" %&gt;
+&lt;%@ page import="java.util.Collection" %&gt;
+&lt;%--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_new">http://www.apache.org/licenses/LICENSE-2.0</a>
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+--%&gt;
+
+&lt;html&gt;
+&lt;head&gt;
+&lt;link rel="stylesheet" type="text/css" href="solr-admin.css"&gt;
+&lt;link rel="icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+&lt;link rel="shortcut icon" href="favicon.ico" type="image/ico"&gt;&lt;/link&gt;
+&lt;title&gt;Welcome to Solr&lt;/title&gt;
+&lt;/head&gt;
+
+&lt;body&gt;
+&lt;h1&gt;Welcome to Solr!&lt;/h1&gt;
+&lt;a href="."&gt;&lt;img border="0" align="right" height="78" width="142" src="admin/solr_small.png" alt="Solr"/&gt;&lt;/a&gt;
+
+&lt;% 
+  org.apache.solr.core.CoreContainer cores = (org.apache.solr.core.CoreContainer)request.getAttribute("org.apache.solr.CoreContainer");
+  Collection&lt;SolrCore&gt; solrCores = cores.getCores();
+  if( cores != null
+   &amp;&amp; solrCores.size() &gt; 0 // HACK! check that we have valid names...
+   &amp;&amp; solrCores.iterator().next().getName().length() != 0 ) {
+    for( org.apache.solr.core.SolrCore core : cores.getCores() ) {
+       String coreName = core.getName();
+      if("".equals(coreName) ) coreName =".";
+%&gt;
+&lt;a href="&lt;%= coreName %&gt;/admin/"&gt;Admin &lt;%= core.getName() %&gt;&lt;/a&gt;
+&lt;br/&gt;
+&lt;% }} else { %&gt;
+&lt;a href="admin/"&gt;Solr Admin&lt;/a&gt;
+&lt;% } %&gt;
+
+&lt;/body&gt;
+&lt;/html&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27867686">[DSpace-changelog] r6507 -
	modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-28 19:44</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: KevinVandeVelde
Date: Thu Jul 28 19:44:26 2011
New Revision: 6507

Log:
Webapp folder

Added:
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/webapp/

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27867278">[DSpace-changelog] r6506 -
	modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-28 18:01</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: KevinVandeVelde
Date: Thu Jul 28 18:00:59 2011
New Revision: 6506

Log:
Branch for new solr version

Added:
   modules/dspace-solr/branches/dspace-solr-parent-3.3.0.0/

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27862431">[DSpace-changelog] [DuraSpace Bamboo] DSpace - DSpace Legacy Domain
 Model build 24 has FAILED. Change made by Mark Diggory</a><!-- google_ad_section_end --></b></div>		<small>From: DuraSpace Bamboo &lt;no-reply@du...&gt; -	2011-07-27 20:48</small><br>
			  		<br>
	  		<small><b>Attachments:</b>
	  			  			<a href="attachment.php?list_name=dspace-changelog&message_id=4761741.33.1311799701445.JavaMail.bamboo%40eris&counter=1">Message as HTML</a> &nbsp;&nbsp;&nbsp;&nbsp;
	  			  			<a href="attachment.php?list_name=dspace-changelog&message_id=4761741.33.1311799701445.JavaMail.bamboo%40eris&counter=2">Message as HTML</a> &nbsp;&nbsp;&nbsp;&nbsp;
	  			  		</small>
	  		</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre></pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27862342">[DSpace-changelog] r6505 - in modules/dspace-core/trunk: .
	api/src/main/java/org/dspace/authorize
	api/src/main/java/org/dspace/workflow/dao
	impl/src/main/java/org/dspace/content
	impl/src/main/java/org/dspace/core</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-27 20:35</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Wed Jul 27 20:35:38 2011
New Revision: 6505

Log:
Move DSpaceException to a more general location and rename some services.

Modified:
   modules/dspace-core/trunk/api/src/main/java/org/dspace/authorize/AuthorizationService.java
   modules/dspace-core/trunk/api/src/main/java/org/dspace/workflow/dao/IWorkflowItemDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyBitstreamDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCollectionDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCommunityDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyDSpaceObjectDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyItemDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacySiteDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyWorkspaceItemDAO.java
   modules/dspace-core/trunk/impl/src/main/java/org/dspace/core/LegacyI18nService.java
   modules/dspace-core/trunk/pom.xml

Modified: modules/dspace-core/trunk/api/src/main/java/org/dspace/authorize/AuthorizationService.java
==============================================================================
--- modules/dspace-core/trunk/api/src/main/java/org/dspace/authorize/AuthorizationService.java	(original)
+++ modules/dspace-core/trunk/api/src/main/java/org/dspace/authorize/AuthorizationService.java	Wed Jul 27 20:35:38 2011
@@ -7,12 +7,11 @@
  */
 package org.dspace.authorize;
 
-import org.dspace.content.DSpaceException;
+import org.dspace.DSpaceException;
 import org.dspace.content.IEntity;
 import org.dspace.eperson.IEPerson;
 import org.dspace.eperson.IGroup;
 
-import javax.print.DocFlavor;
 import java.util.List;
 
 /**

Modified: modules/dspace-core/trunk/api/src/main/java/org/dspace/workflow/dao/IWorkflowItemDAO.java
==============================================================================
--- modules/dspace-core/trunk/api/src/main/java/org/dspace/workflow/dao/IWorkflowItemDAO.java	(original)
+++ modules/dspace-core/trunk/api/src/main/java/org/dspace/workflow/dao/IWorkflowItemDAO.java	Wed Jul 27 20:35:38 2011
@@ -7,7 +7,7 @@
  */
 package org.dspace.workflow.dao;
 
-import org.dspace.content.DSpaceException;
+import org.dspace.DSpaceException;
 import org.dspace.content.IWorkspaceItem;
 import org.dspace.workflow.IWorkflowItem;
 

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyBitstreamDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyBitstreamDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyBitstreamDAO.java	Wed Jul 27 20:35:38 2011
@@ -20,7 +20,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyBitstreamDAO extends LegacyEntityDAO implements BitstreamDAO&lt;Bitstream, AuthorizeException&gt; {
+public class LegacyBitstreamDAO extends ContextAwareService implements BitstreamDAO&lt;Bitstream, AuthorizeException&gt; {
 
 
     @Override

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCollectionDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCollectionDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCollectionDAO.java	Wed Jul 27 20:35:38 2011
@@ -19,7 +19,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyCollectionDAO extends LegacyEntityDAO implements CollectionDAO&lt;Community, Collection, AuthorizeException&gt; {
+public class LegacyCollectionDAO extends ContextAwareService implements CollectionDAO&lt;Community, Collection, AuthorizeException&gt; {
 
     @Override
     public Collection[] findAuthorized(Community comm, int actionID) {

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCommunityDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCommunityDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyCommunityDAO.java	Wed Jul 27 20:35:38 2011
@@ -9,7 +9,6 @@
 
 import org.dspace.authorize.AuthorizeException;
 import org.dspace.content.dao.CommunityDAO;
-import org.dspace.core.Context;
 
 import java.io.IOException;
 import java.sql.SQLException;
@@ -20,7 +19,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyCommunityDAO extends LegacyEntityDAO implements CommunityDAO&lt;Community, AuthorizeException&gt; {
+public class LegacyCommunityDAO extends ContextAwareService implements CommunityDAO&lt;Community, AuthorizeException&gt; {
 
     @Override
     public Community[] findAll() {

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyDSpaceObjectDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyDSpaceObjectDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyDSpaceObjectDAO.java	Wed Jul 27 20:35:38 2011
@@ -21,7 +21,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyDSpaceObjectDAO extends LegacyEntityDAO implements DSpaceObjectDAO&lt;AuthorizeException&gt;  {
+public class LegacyDSpaceObjectDAO extends ContextAwareService implements DSpaceObjectDAO&lt;AuthorizeException&gt;  {
 
     /**
      * Generic find for when the precise type of a DSO is not known, just the

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyItemDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyItemDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyItemDAO.java	Wed Jul 27 20:35:38 2011
@@ -9,7 +9,6 @@
 
 import org.dspace.authorize.AuthorizeException;
 import org.dspace.content.dao.IItemDAO;
-import org.dspace.core.Context;
 
 import java.io.IOException;
 import java.sql.SQLException;
@@ -20,7 +19,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyItemDAO extends LegacyEntityDAO implements IItemDAO&lt;Item, AuthorizeException&gt; {
+public class LegacyItemDAO extends ContextAwareService implements IItemDAO&lt;Item, AuthorizeException&gt; {
 
 
     public ItemIterator findAll(){

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacySiteDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacySiteDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacySiteDAO.java	Wed Jul 27 20:35:38 2011
@@ -17,7 +17,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacySiteDAO extends LegacyEntityDAO implements SiteDAO&lt;Site, AuthorizeException&gt; {
+public class LegacySiteDAO extends ContextAwareService implements SiteDAO&lt;Site, AuthorizeException&gt; {
 
 
     public Site retrieve(){

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyWorkspaceItemDAO.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyWorkspaceItemDAO.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/content/LegacyWorkspaceItemDAO.java	Wed Jul 27 20:35:38 2011
@@ -19,7 +19,13 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyWorkspaceItemDAO extends LegacyEntityDAO implements WorkspaceItemDAO&lt;WorkspaceItem, Collection, AuthorizeException&gt; {
+public class LegacyWorkspaceItemDAO extends ContextAwareService implements WorkspaceItemDAO&lt;WorkspaceItem, Collection, AuthorizeException&gt; {
+
+    find
+findAll
+findByCollection
+findByEPerson
+findByItem
 
     public WorkspaceItem retrieve(int id){
         try {

Modified: modules/dspace-core/trunk/impl/src/main/java/org/dspace/core/LegacyI18nService.java
==============================================================================
--- modules/dspace-core/trunk/impl/src/main/java/org/dspace/core/LegacyI18nService.java	(original)
+++ modules/dspace-core/trunk/impl/src/main/java/org/dspace/core/LegacyI18nService.java	Wed Jul 27 20:35:38 2011
@@ -7,7 +7,7 @@
  */
 package org.dspace.core;
 
-import org.dspace.content.LegacyEntityDAO;
+import org.dspace.content.ContextAwareService;
 import org.dspace.eperson.EPerson;
 
 import java.util.*;
@@ -17,7 +17,7 @@
  *
  * @author mdiggory @ atmire.com
  */
-public class LegacyI18nService extends LegacyEntityDAO implements II18nService&lt;EPerson&gt; {
+public class LegacyI18nService extends ContextAwareService implements II18nService&lt;EPerson&gt; {
 
     /**
      * Gets the default locale as defined in dspace.cfg If no default locale is

Modified: modules/dspace-core/trunk/pom.xml
==============================================================================
--- modules/dspace-core/trunk/pom.xml	(original)
+++ modules/dspace-core/trunk/pom.xml	Wed Jul 27 20:35:38 2011
@@ -24,6 +24,7 @@
         &lt;module&gt;api&lt;/module&gt;
         &lt;module&gt;impl&lt;/module&gt;
         &lt;!--&lt;module&gt;utils&lt;/module&gt;--&gt;
+        &lt;module&gt;../dspace/dspace-api&lt;/module&gt;
     &lt;/modules&gt;
 
     &lt;developers&gt;
@@ -67,4 +68,4 @@
         &lt;url&gt;<a href="http://scm.dspace.org/svn/repo/modules/dspace-core/trunk&lt;/url" target="_new">http://scm.dspace.org/svn/repo/modules/dspace-core/trunk&lt;/url</a>&gt;
     &lt;/scm&gt;
 
-&lt;/project&gt;
\ No newline at end of file
+&lt;/project&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27862143">[DSpace-changelog] r6504 - in dspace/trunk/dspace-xmlui:
	dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative
	dspace-xmlui-api/src/main/resources/aspects/Administrative
	dspace-xmlui-webapp/src/main/webapp/i18n</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-27 19:52</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Wed Jul 27 19:52:02 2011
New Revision: 6504

Log:
DS-969 : Add ability to monitor &amp; clear Cocoon's Cache from XMLUI Control Panel


Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/Administrative/sitemap.xmap
   dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	Wed Jul 27 19:52:02 2011
@@ -14,13 +14,18 @@
 import java.util.Comparator;
 import java.util.Enumeration;
 import java.util.HashMap;
+import java.util.Iterator;
 
+import org.apache.avalon.framework.activity.Disposable;
 import org.apache.avalon.framework.service.ServiceException;
 import org.apache.avalon.framework.service.ServiceManager;
 import org.apache.avalon.framework.service.Serviceable;
+import org.apache.cocoon.configuration.Settings;
 import org.apache.cocoon.environment.ObjectModelHelper;
 import org.apache.cocoon.environment.Request;
 import org.apache.commons.lang.StringUtils;
+import org.apache.excalibur.store.Store;
+import org.apache.excalibur.store.StoreJanitor;
 import org.dspace.app.util.Util;
 import org.dspace.app.xmlui.cocoon.AbstractDSpaceTransformer;
 import org.dspace.app.xmlui.utils.UIException;
@@ -50,7 +55,7 @@
  * @author Jay Paz
  * @author Scott Phillips
  */
-public class ControlPanel extends AbstractDSpaceTransformer implements Serviceable{
+public class ControlPanel extends AbstractDSpaceTransformer implements Serviceable, Disposable {
 	
     /** Language Strings */
     private static final Message T_DSPACE_HOME                  = message("xmlui.general.dspace_home");
@@ -74,7 +79,15 @@
     private static final Message T_RUNTIME_MAX 			= message("xmlui.administrative.ControlPanel.runtime_max"); 
     private static final Message T_RUNTIME_TOTAL 		= message("xmlui.administrative.ControlPanel.runtime_total"); 
     private static final Message T_RUNTIME_USED 		= message("xmlui.administrative.ControlPanel.runtime_used"); 
-    private static final Message T_RUNTIME_FREE 		= message("xmlui.administrative.ControlPanel.runtime_free"); 
+    private static final Message T_RUNTIME_FREE 		= message("xmlui.administrative.ControlPanel.runtime_free");
+    private static final Message T_COCOON_HEAD                  = message("xmlui.administrative.ControlPanel.cocoon_head");  
+    private static final Message T_COCOON_VERSION               = message("xmlui.administrative.ControlPanel.cocoon_version");
+    private static final Message T_COCOON_CACHE_DIR             = message("xmlui.administrative.ControlPanel.cocoon_cache_dir");
+    private static final Message T_COCOON_WORK_DIR              = message("xmlui.administrative.ControlPanel.cocoon_work_dir");
+    private static final Message T_COCOON_MAIN_CACHE_SIZE       = message("xmlui.administrative.ControlPanel.cocoon_main_cache_size");
+    private static final Message T_COCOON_PERSISTENT_CACHE_SIZE = message("xmlui.administrative.ControlPanel.cocoon_persistent_cache_size");
+    private static final Message T_COCOON_TRANS_CACHE_SIZE      = message("xmlui.administrative.ControlPanel.cocoon_transient_cache_size");
+    private static final Message T_COCOON_CACHE_CLEAR           = message("xmlui.administrative.ControlPanel.cocoon_cache_clear");
     private static final Message T_DSPACE_HEAD 			= message("xmlui.administrative.ControlPanel.dspace_head");
     private static final Message T_DSPACE_DIR 			= message("xmlui.administrative.ControlPanel.dspace_dir");
     private static final Message T_DSPACE_URL 			= message("xmlui.administrative.ControlPanel.dspace_url");
@@ -150,18 +163,56 @@
     private ServiceManager serviceManager;
     
     /**
+     * The Cocoon Settings (used to display Cocoon info)
+     */
+    private Settings settings;
+    
+    /**
+     * The Cocoon StoreJanitor (used for cache statistics)
+     */
+    private StoreJanitor storeJanitor;
+    
+     /**
+     * The Cocoon Default Store (used for cache statistics)
+     */
+    private Store storeDefault;
+    
+    /**
+     * The Cocoon Persistent Store (used for cache statistics)
+     */
+    private Store storePersistent;
+    
+    /**
      * The five states that this page can be in.
      */
     private enum OPTIONS {java, dspace, alerts, activity, harvest};
     
     /**
-     * From the servicable api, give us a service manager.
+     * From the &lt;code&gt;org.apache.avalon.framework.service.Serviceable&lt;/code&gt; API, 
+     * give us the current &lt;code&gt;ServiceManager&lt;/code&gt; instance.
+     * &lt;P&gt;
+     * Much of this ServiceManager logic/code has been borrowed from the source
+     * code of the Cocoon &lt;code&gt;StatusGenerator&lt;/code&gt; class:
+     * <a href="http://svn.apache.org/repos/asf/cocoon/tags/cocoon-2.2/cocoon-sitemap-components/cocoon-sitemap-components-1.0.0/src/main/java/org/apache/cocoon/generation/StatusGenerator.java" target="_new">http://svn.apache.org/repos/asf/cocoon/tags/cocoon-2.2/cocoon-sitemap-components/cocoon-sitemap-components-1.0.0/src/main/java/org/apache/cocoon/generation/StatusGenerator.java</a>
      */
+    @Override
     public void service(ServiceManager serviceManager) throws ServiceException 
     {
         this.serviceManager = serviceManager;
+        
+        this.settings = (Settings) this.serviceManager.lookup(Settings.ROLE);
+        
+        if(this.serviceManager.hasService(StoreJanitor.ROLE))
+            this.storeJanitor = (StoreJanitor) this.serviceManager.lookup(StoreJanitor.ROLE);
+        
+        if (this.serviceManager.hasService(Store.ROLE))
+            this.storeDefault = (Store) this.serviceManager.lookup(Store.ROLE);
+        
+        if(this.serviceManager.hasService(Store.PERSISTENT_STORE))
+            this.storePersistent = (Store) this.serviceManager.lookup(Store.PERSISTENT_STORE);
     }
 	
+    @Override
     public void addPageMeta(PageMeta pageMeta) throws SAXException,
                     WingException, UIException, SQLException, IOException,
                     AuthorizeException 
@@ -172,6 +223,7 @@
         pageMeta.addTrailLink(contextPath + "/admin/panel", T_trail);
     }
 
+    @Override
     public void addBody(Body body) throws SAXException, WingException,
                     UIException, SQLException, IOException, AuthorizeException 
     {
@@ -334,7 +386,92 @@
         runtime.addLabel(T_RUNTIME_USED);
         runtime.addItem(String.valueOf(usedMemory) + " MiB");
         runtime.addLabel(T_RUNTIME_FREE);
-        runtime.addItem(String.valueOf(freeMemory) + " MiB");	
+        runtime.addItem(String.valueOf(freeMemory) + " MiB");
+        
+        //List: Cocoon Info &amp; Cache
+        addCocoonInformation(div);
+    }
+        
+    /**
+     * Add specific Cocoon information, especially related to the Cocoon Cache.
+     * &lt;P&gt;
+     * For more information about Cocoon Caches/Stores, see:
+     * <a href="http://wiki.apache.org/cocoon/StoreComponents" target="_new">http://wiki.apache.org/cocoon/StoreComponents</a>  
+     */
+    private void addCocoonInformation(Division div) throws WingException
+    {
+        // List: Cocoon Info &amp; Caches
+        List cocoon = div.addList("cocoon");
+        cocoon.setHead(T_COCOON_HEAD);
+        
+        cocoon.addLabel(T_COCOON_VERSION);
+        cocoon.addItem(org.apache.cocoon.Constants.VERSION);
+        
+        //attempt to Display some basic info about Cocoon's Settings &amp; Caches
+
+        //Get access to basic Cocoon Settings
+        if(this.settings!=null)
+        {
+            //Output Cocoon's Work Directory &amp; Cache Directory
+            cocoon.addLabel(T_COCOON_WORK_DIR);
+            cocoon.addItem(this.settings.getWorkDirectory());
+            cocoon.addLabel(T_COCOON_CACHE_DIR);
+            cocoon.addItem(this.settings.getCacheDirectory());
+        }    
+
+        // Check if we have access to Cocoon's Default Cache
+        //Cocoon's Main (Default) Store is used to store objects that are serializable
+        if(this.storeDefault!=null)
+        {
+            //Store name is just the className (remove the package info though, just to save space)
+            String storeName = this.storeDefault.getClass().getName();
+            storeName = storeName.substring(storeName.lastIndexOf(".")+1); 
+
+            //display main store's cache info
+            cocoon.addLabel(T_COCOON_MAIN_CACHE_SIZE.parameterize(storeName + ", 0x" + Integer.toHexString(this.storeDefault.hashCode())));
+
+            //display cache size &amp; link to clear Cocoon's main cache
+            Item defaultSize = cocoon.addItem();
+            defaultSize.addContent(String.valueOf(this.storeDefault.size()) + "  ");
+            defaultSize.addXref(contextPath + "/admin/panel?java=true&amp;clearcache=true", T_COCOON_CACHE_CLEAR);
+        }
+
+        // Check if we have access to Cocoon's Persistent Cache
+        //Cocoon's Persistent Store may be used by the Default Cache/Store to delegate persistent storage
+        //(it's an optional store which may not exist)
+        if(this.storePersistent!=null)
+        {
+            //Store name is just the className (remove the package info though, just to save space)
+            String storeName = this.storeDefault.getClass().getName();
+            storeName = storeName.substring(storeName.lastIndexOf(".")+1);
+
+            //display persistent store's cache size info
+            cocoon.addLabel(T_COCOON_PERSISTENT_CACHE_SIZE.parameterize(storeName + ", 0x" + Integer.toHexString(this.storePersistent.hashCode())));
+            cocoon.addItem(String.valueOf(this.storePersistent.size()));
+        }
+
+        //Check if we have access to Cocoon's StoreJanitor
+        //The Store Janitor manages all of Cocoon's "transient caches/stores"
+        // These "transient" stores are used for non-serializable objects or objects whose
+        // storage doesn't make sense across a server restart. 
+        if(this.storeJanitor!=null)
+        {
+            // For each Cache Store in Cocoon's StoreJanitor
+            Iterator i = this.storeJanitor.iterator();
+            while(i.hasNext())
+            {
+                //get the Cache Store
+                Store store = (Store) i.next();
+
+                //Store name is just the className (remove the package info though, just to save space)
+                String storeName = store.getClass().getName();
+                storeName = storeName.substring(storeName.lastIndexOf(".")+1); 
+
+                //display its size information
+                cocoon.addLabel(T_COCOON_TRANS_CACHE_SIZE.parameterize(storeName + ", 0x" + Integer.toHexString(store.hashCode())));
+                cocoon.addItem(String.valueOf(store.size()));
+            }
+        }
     }
 	
     /**
@@ -672,6 +809,7 @@
          * Compare these two activity events based upon the given sort parameter. In the case of a tie,
          * allways fallback to sorting based upon the timestamp.
          */
+        @Override
         public int compare(E a, E b) 
         {
             // Protect against null events while sorting
@@ -866,4 +1004,25 @@
         }
     }
 	
+    
+    /**
+     * Release all Cocoon resources.
+     * @see org.apache.avalon.framework.activity.Disposable#dispose()
+     */
+    @Override
+    public void dispose() 
+    {
+        if (this.serviceManager != null) 
+        {
+            this.serviceManager.release(this.storePersistent);
+            this.serviceManager.release(this.storeJanitor);
+            this.serviceManager.release(this.storeDefault);
+            this.serviceManager.release(this.settings);
+            this.storePersistent = null;
+            this.storeJanitor = null; 	
+            this.storeDefault = null;
+            this.settings = null;
+        }
+        super.dispose();
+    }
 }

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/Administrative/sitemap.xmap
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/Administrative/sitemap.xmap	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/resources/aspects/Administrative/sitemap.xmap	Wed Jul 27 19:52:02 2011
@@ -131,6 +131,7 @@
     	&lt;map:actions&gt;
     		&lt;map:action name="ControlPanelAction" src="org.dspace.app.xmlui.aspect.administrative.ControlPanelAction" /&gt;
     		&lt;map:action name="CurrentActivityAction" src="org.dspace.app.xmlui.aspect.administrative.CurrentActivityAction" /&gt;
+                &lt;map:action name="ClearCacheAction" src="org.apache.cocoon.acting.ClearCacheAction"/&gt;        
     	&lt;/map:actions&gt;		
 		
 		&lt;map:selectors&gt;
@@ -912,23 +913,30 @@
                 &lt;/map:otherwise&gt;
             &lt;/map:select&gt;
             
-			&lt;map:match pattern="admin/panel"&gt;
-				&lt;map:select type="AuthenticatedSelector"&gt;
-					&lt;map:when test="administrator"&gt;
-						&lt;map:act type="ControlPanelAction"&gt;
-							&lt;map:transform type="SystemwideAlerts"/&gt;
-						&lt;/map:act&gt;
-						&lt;map:transform type="ControlPanel" /&gt;
-						&lt;map:serialize type="xml"/&gt;
-					&lt;/map:when&gt;
-					
-					&lt;map:otherwise&gt;
-						&lt;map:act type="StartAuthentication"/&gt;
-					&lt;/map:otherwise&gt;
-				&lt;/map:select&gt;
-			&lt;/map:match&gt;
+            &lt;!-- Access to Control Panel (limited to Administrators) --&gt;
+            &lt;map:match pattern="admin/panel"&gt;
+                &lt;map:select type="AuthenticatedSelector"&gt;
+                    &lt;map:when test="administrator"&gt;
+                        &lt;!--If the 'clearcache' request parameter is specified, first clear
+                            the Cocoon Cache before sending user back to control panel--&gt;
+                        &lt;map:match type="request" pattern="clearcache"&gt;
+                            &lt;map:act type="ClearCacheAction"/&gt;
+                        &lt;/map:match&gt;    
+                        &lt;!-- Perform any control panel actions (if specified via Control panel) --&gt;
+                        &lt;map:act type="ControlPanelAction"&gt;
+                            &lt;map:transform type="SystemwideAlerts"/&gt;
+                        &lt;/map:act&gt;
+                        &lt;!-- Create the Control Panel and serialize--&gt;
+                        &lt;map:transform type="ControlPanel" /&gt;
+                        &lt;map:serialize type="xml"/&gt;
+                    &lt;/map:when&gt;
+                    &lt;map:otherwise&gt;
+                        &lt;map:act type="StartAuthentication"/&gt;
+                    &lt;/map:otherwise&gt;
+                &lt;/map:select&gt;
+            &lt;/map:match&gt;
 		    
-		    &lt;map:match pattern="admin/export"&gt;
+            &lt;map:match pattern="admin/export"&gt;
                 &lt;map:transform type="ItemExport"/&gt;
             &lt;/map:match&gt;
 		    

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	Wed Jul 27 19:52:02 2011
@@ -1677,6 +1677,14 @@
 	&lt;message key="xmlui.administrative.ControlPanel.runtime_total"&gt;Allocated memory&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.runtime_used"&gt;Used memory&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.runtime_free"&gt;Free memory&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_head"&gt;Cocoon Info&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_version"&gt;Cocoon Version&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_cache_dir"&gt;Cocoon Cache Directory&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_work_dir"&gt;Cocoon Work Directory&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_main_cache_size"&gt;Main Cache Size ({0})&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_cache_clear"&gt;(Clear Cache Immediately)&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_persistent_cache_size"&gt;Persistent Cache Size ({0})&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.cocoon_transient_cache_size"&gt;Transient Cache Size ({0})&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_head"&gt;DSpace Settings&lt;/message&gt;
         &lt;message key="xmlui.administrative.ControlPanel.dspace_version"&gt;DSpace Version&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_dir"&gt;DSpace Installation Directory&lt;/message&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27855177">[DSpace-changelog] r6503 -
	modules/dspace-services/trunk/impl/src/main/java/org/dspace/servicemanager/config</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-26 15:56</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Tue Jul 26 05:04:57 2011
New Revision: 6503

Log:
[DSRV-16] The configuration service doesn't load in any module configuration files on windows ( provided by Kevin Van de Velde)

Modified:
   modules/dspace-services/trunk/impl/src/main/java/org/dspace/servicemanager/config/DSpaceConfigurationService.java

Modified: modules/dspace-services/trunk/impl/src/main/java/org/dspace/servicemanager/config/DSpaceConfigurationService.java
==============================================================================
--- modules/dspace-services/trunk/impl/src/main/java/org/dspace/servicemanager/config/DSpaceConfigurationService.java	(original)
+++ modules/dspace-services/trunk/impl/src/main/java/org/dspace/servicemanager/config/DSpaceConfigurationService.java	Tue Jul 26 05:04:57 2011
@@ -384,10 +384,10 @@
         }
         //Attempt to load up all the config files in the modules directory
         try{
-            File modulesDirectory = new File(homePath + File.separator + DSPACE_MODULES_CONFIG_PATH);
+            File modulesDirectory = new File(homePath + File.separator + DSPACE_MODULES_CONFIG_PATH + File.separator);
             if(modulesDirectory.exists()){
                 try{
-                    Resource[] resources = new PathMatchingResourcePatternResolver().getResources("file:" + modulesDirectory.getAbsolutePath() + File.separator + "*" + DOT_CONFIG);
+                    Resource[] resources = new PathMatchingResourcePatternResolver().getResources(modulesDirectory.toURI().toURL().toString() + "*" + DOT_CONFIG);
                     if(resources != null){
                         for(Resource resource : resources){
                             String prefix = resource.getFilename().substring(0, resource.getFilename().lastIndexOf("."));

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27838419">[DSpace-changelog] r6502 -
	dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-22 19:41</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Fri Jul 22 19:41:28 2011
New Revision: 6502

Log:
Attempt to cleanup horrendous formatting in ControlPanel.java, in order to make it readable.  (This commit changes no code or logic, just spacing/tabbing)

Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	Fri Jul 22 19:41:28 2011
@@ -52,26 +52,25 @@
  */
 public class ControlPanel extends AbstractDSpaceTransformer implements Serviceable{
 	
-	/** Language Strings */
-    private static final Message T_DSPACE_HOME =
-        message("xmlui.general.dspace_home");
-    private static final Message T_title 				= message("xmlui.administrative.ControlPanel.title");
-	private static final Message T_trail	 			= message("xmlui.administrative.ControlPanel.trail");
-	private static final Message T_head	 				= message("xmlui.administrative.ControlPanel.head");
-	private static final Message T_option_java  		= message("xmlui.administrative.ControlPanel.option_java");
-	private static final Message T_option_dspace  		= message("xmlui.administrative.ControlPanel.option_dspace");
-	private static final Message T_option_alerts  		= message("xmlui.administrative.ControlPanel.option_alerts");
-	private static final Message T_seconds 				= message("xmlui.administrative.ControlPanel.seconds");
-	private static final Message T_hours 				= message("xmlui.administrative.ControlPanel.hours");
-	private static final Message T_minutes 				= message("xmlui.administrative.ControlPanel.minutes");
-	private static final Message T_JAVA_HEAD 			= message("xmlui.administrative.ControlPanel.java_head");
-	private static final Message T_JAVA_VERSION 		= message("xmlui.administrative.ControlPanel.java_version");
-	private static final Message T_JAVA_VENDOR 			= message("xmlui.administrative.ControlPanel.java_vendor");
-	private static final Message T_OS_NAME 				= message("xmlui.administrative.ControlPanel.os_name");
-    private static final Message T_OS_ARCH 				= message("xmlui.administrative.ControlPanel.os_arch");
+    /** Language Strings */
+    private static final Message T_DSPACE_HOME                  = message("xmlui.general.dspace_home");
+    private static final Message T_title 			= message("xmlui.administrative.ControlPanel.title");
+    private static final Message T_trail	 		= message("xmlui.administrative.ControlPanel.trail");
+    private static final Message T_head	 			= message("xmlui.administrative.ControlPanel.head");
+    private static final Message T_option_java  		= message("xmlui.administrative.ControlPanel.option_java");
+    private static final Message T_option_dspace  		= message("xmlui.administrative.ControlPanel.option_dspace");
+    private static final Message T_option_alerts  		= message("xmlui.administrative.ControlPanel.option_alerts");
+    private static final Message T_seconds 			= message("xmlui.administrative.ControlPanel.seconds");
+    private static final Message T_hours 			= message("xmlui.administrative.ControlPanel.hours");
+    private static final Message T_minutes 			= message("xmlui.administrative.ControlPanel.minutes");
+    private static final Message T_JAVA_HEAD 			= message("xmlui.administrative.ControlPanel.java_head");
+    private static final Message T_JAVA_VERSION 		= message("xmlui.administrative.ControlPanel.java_version");
+    private static final Message T_JAVA_VENDOR 			= message("xmlui.administrative.ControlPanel.java_vendor");
+    private static final Message T_OS_NAME 			= message("xmlui.administrative.ControlPanel.os_name");
+    private static final Message T_OS_ARCH 			= message("xmlui.administrative.ControlPanel.os_arch");
     private static final Message T_OS_VERSION 			= message("xmlui.administrative.ControlPanel.os_version"); 
     private static final Message T_RUNTIME_HEAD 		= message("xmlui.administrative.ControlPanel.runtime_head");   
-    private static final Message T_RUNTIME_PROCESSORS 	= message("xmlui.administrative.ControlPanel.runtime_processors"); 
+    private static final Message T_RUNTIME_PROCESSORS           = message("xmlui.administrative.ControlPanel.runtime_processors"); 
     private static final Message T_RUNTIME_MAX 			= message("xmlui.administrative.ControlPanel.runtime_max"); 
     private static final Message T_RUNTIME_TOTAL 		= message("xmlui.administrative.ControlPanel.runtime_total"); 
     private static final Message T_RUNTIME_USED 		= message("xmlui.administrative.ControlPanel.runtime_used"); 
@@ -79,70 +78,70 @@
     private static final Message T_DSPACE_HEAD 			= message("xmlui.administrative.ControlPanel.dspace_head");
     private static final Message T_DSPACE_DIR 			= message("xmlui.administrative.ControlPanel.dspace_dir");
     private static final Message T_DSPACE_URL 			= message("xmlui.administrative.ControlPanel.dspace_url");
-    private static final Message T_DSPACE_HOST_NAME 	= message("xmlui.administrative.ControlPanel.dspace_hostname");
+    private static final Message T_DSPACE_HOST_NAME             = message("xmlui.administrative.ControlPanel.dspace_hostname");
     private static final Message T_DSPACE_NAME 			= message("xmlui.administrative.ControlPanel.dspace_name");
-    private static final Message T_DSPACE_VERSION 			= message("xmlui.administrative.ControlPanel.dspace_version");
-    private static final Message T_DB_NAME 				= message("xmlui.administrative.ControlPanel.db_name");
-    private static final Message T_DB_URL 				= message("xmlui.administrative.ControlPanel.db_url");
+    private static final Message T_DSPACE_VERSION               = message("xmlui.administrative.ControlPanel.dspace_version");
+    private static final Message T_DB_NAME 			= message("xmlui.administrative.ControlPanel.db_name");
+    private static final Message T_DB_URL 			= message("xmlui.administrative.ControlPanel.db_url");
     private static final Message T_DB_DRIVER 			= message("xmlui.administrative.ControlPanel.db_driver");
     private static final Message T_DB_MAX_CONN 			= message("xmlui.administrative.ControlPanel.db_maxconnections");
     private static final Message T_DB_MAX_WAIT 			= message("xmlui.administrative.ControlPanel.db_maxwait");
     private static final Message T_DB_MAX_IDLE 			= message("xmlui.administrative.ControlPanel.db_maxidle");
     private static final Message T_MAIL_SERVER 			= message("xmlui.administrative.ControlPanel.mail_server");
-    private static final Message T_MAIL_FROM_ADDRESS 	= message("xmlui.administrative.ControlPanel.mail_from_address");
-    private static final Message T_FEEDBACK_RECIPIENT 	= message("xmlui.administrative.ControlPanel.mail_feedback_recipient");
+    private static final Message T_MAIL_FROM_ADDRESS            = message("xmlui.administrative.ControlPanel.mail_from_address");
+    private static final Message T_FEEDBACK_RECIPIENT           = message("xmlui.administrative.ControlPanel.mail_feedback_recipient");
     private static final Message T_MAIL_ADMIN 			= message("xmlui.administrative.ControlPanel.mail_admin");
-	private static final Message T_alerts_head				= message("xmlui.administrative.ControlPanel.alerts_head");
-	private static final Message T_alerts_warning			= message("xmlui.administrative.ControlPanel.alerts_warning");
-	private static final Message T_alerts_message_label		= message("xmlui.administrative.ControlPanel.alerts_message_label");
-	private static final Message T_alerts_message_default	= message("xmlui.administrative.ControlPanel.alerts_message_default");
-	private static final Message T_alerts_countdown_label	= message("xmlui.administrative.ControlPanel.alerts_countdown_label");
-	private static final Message T_alerts_countdown_none	= message("xmlui.administrative.ControlPanel.alerts_countdown_none");
-	private static final Message T_alerts_countdown_5		= message("xmlui.administrative.ControlPanel.alerts_countdown_5");
-	private static final Message T_alerts_countdown_15		= message("xmlui.administrative.ControlPanel.alerts_countdown_15");
-	private static final Message T_alerts_countdown_30		= message("xmlui.administrative.ControlPanel.alerts_countdown_30");
-	private static final Message T_alerts_countdown_60		= message("xmlui.administrative.ControlPanel.alerts_countdown_60");
-	private static final Message T_alerts_countdown_keep	= message("xmlui.administrative.ControlPanel.alerts_countdown_keep");
-	private static final Message T_alerts_session_label 	          = message("xmlui.administrative.ControlPanel.alerts_session_label");
-	private static final Message T_alerts_session_all_sessions        = message("xmlui.administrative.ControlPanel.alerts_session_all_sessions");
-	private static final Message T_alerts_session_current_sessions    = message("xmlui.administrative.ControlPanel.alerts_session_current_sessions");
-	private static final Message T_alerts_session_only_administrative = message("xmlui.administrative.ControlPanel.alerts_session_only_administrative_sessions");
-	private static final Message T_alerts_session_note                = message("xmlui.administrative.ControlPanel.alerts_session_note");	
-	private static final Message T_alerts_submit_activate	= message("xmlui.administrative.ControlPanel.alerts_submit_activate");
-	private static final Message T_alerts_submit_deactivate	= message("xmlui.administrative.ControlPanel.alerts_submit_deactivate");
-	private static final Message T_activity_head 			= message("xmlui.administrative.ControlPanel.activity_head");
-	private static final Message T_stop_anonymous           = message("xmlui.administrative.ControlPanel.stop_anonymous");
-	private static final Message T_start_anonymous          = message("xmlui.administrative.ControlPanel.start_anonymous");
-	private static final Message T_stop_bot                 = message("xmlui.administrative.ControlPanel.stop_bot");
-	private static final Message T_start_bot                = message("xmlui.administrative.ControlPanel.start_bot");
-	private static final Message T_activity_sort_time 		= message("xmlui.administrative.ControlPanel.activity_sort_time");
-	private static final Message T_activity_sort_user 		= message("xmlui.administrative.ControlPanel.activity_sort_user");
-	private static final Message T_activity_sort_ip  		= message("xmlui.administrative.ControlPanel.activity_sort_ip");
-	private static final Message T_activity_sort_url 		= message("xmlui.administrative.ControlPanel.activity_sort_url");
-	private static final Message T_activity_sort_agent 		= message("xmlui.administrative.ControlPanel.activity_sort_Agent");
-	private static final Message T_activity_anonymous 		= message("xmlui.administrative.ControlPanel.activity_anonymous");	
-	private static final Message T_activity_none			= message("xmlui.administrative.ControlPanel.activity_none");
-	private static final Message T_select_panel             = message("xmlui.administrative.ControlPanel.select_panel");
-	
-	private static final Message T_option_harvest  					= message("xmlui.administrative.ControlPanel.option_harvest");
-	private static final Message T_harvest_scheduler_head 			= message("xmlui.administrative.ControlPanel.harvest_scheduler_head");
-	private static final Message T_harvest_label_status 			= message("xmlui.administrative.ControlPanel.harvest_label_status");
-	private static final Message T_harvest_label_actions 			= message("xmlui.administrative.ControlPanel.harvest_label_actions");
-	private static final Message T_harvest_submit_start 			= message("xmlui.administrative.ControlPanel.harvest_submit_start");
-	private static final Message T_harvest_submit_reset 			= message("xmlui.administrative.ControlPanel.harvest_submit_reset");
-	private static final Message T_harvest_submit_resume 			= message("xmlui.administrative.ControlPanel.harvest_submit_resume");
-	private static final Message T_harvest_submit_pause 			= message("xmlui.administrative.ControlPanel.harvest_submit_pause");
-	private static final Message T_harvest_submit_stop 				= message("xmlui.administrative.ControlPanel.harvest_submit_stop");
-	private static final Message T_harvest_label_collections 		= message("xmlui.administrative.ControlPanel.harvest_label_collections");
-	private static final Message T_harvest_label_active 			= message("xmlui.administrative.ControlPanel.harvest_label_active");
-	private static final Message T_harvest_label_queued 			= message("xmlui.administrative.ControlPanel.harvest_label_queued");
-	private static final Message T_harvest_label_oai_errors 		= message("xmlui.administrative.ControlPanel.harvest_label_oai_errors");
-	private static final Message T_harvest_label_internal_errors 	= message("xmlui.administrative.ControlPanel.harvest_label_internal_errors");
-	private static final Message T_harvest_head_generator_settings 	= message("xmlui.administrative.ControlPanel.harvest_head_generator_settings");
-	private static final Message T_harvest_label_oai_url 			= message("xmlui.administrative.ControlPanel.harvest_label_oai_url");
-	private static final Message T_harvest_label_oai_source 		= message("xmlui.administrative.ControlPanel.harvest_label_oai_source");
-	private static final Message T_harvest_head_harvester_settings 	= message("xmlui.administrative.ControlPanel.harvest_head_harvester_settings");
-	
+    private static final Message T_alerts_head                  = message("xmlui.administrative.ControlPanel.alerts_head");
+    private static final Message T_alerts_warning               = message("xmlui.administrative.ControlPanel.alerts_warning");
+    private static final Message T_alerts_message_label		= message("xmlui.administrative.ControlPanel.alerts_message_label");
+    private static final Message T_alerts_message_default	= message("xmlui.administrative.ControlPanel.alerts_message_default");
+    private static final Message T_alerts_countdown_label	= message("xmlui.administrative.ControlPanel.alerts_countdown_label");
+    private static final Message T_alerts_countdown_none	= message("xmlui.administrative.ControlPanel.alerts_countdown_none");
+    private static final Message T_alerts_countdown_5		= message("xmlui.administrative.ControlPanel.alerts_countdown_5");
+    private static final Message T_alerts_countdown_15		= message("xmlui.administrative.ControlPanel.alerts_countdown_15");
+    private static final Message T_alerts_countdown_30		= message("xmlui.administrative.ControlPanel.alerts_countdown_30");
+    private static final Message T_alerts_countdown_60		= message("xmlui.administrative.ControlPanel.alerts_countdown_60");
+    private static final Message T_alerts_countdown_keep	= message("xmlui.administrative.ControlPanel.alerts_countdown_keep");
+    private static final Message T_alerts_session_label 	      = message("xmlui.administrative.ControlPanel.alerts_session_label");
+    private static final Message T_alerts_session_all_sessions        = message("xmlui.administrative.ControlPanel.alerts_session_all_sessions");
+    private static final Message T_alerts_session_current_sessions    = message("xmlui.administrative.ControlPanel.alerts_session_current_sessions");
+    private static final Message T_alerts_session_only_administrative = message("xmlui.administrative.ControlPanel.alerts_session_only_administrative_sessions");
+    private static final Message T_alerts_session_note                = message("xmlui.administrative.ControlPanel.alerts_session_note");	
+    private static final Message T_alerts_submit_activate	= message("xmlui.administrative.ControlPanel.alerts_submit_activate");
+    private static final Message T_alerts_submit_deactivate	= message("xmlui.administrative.ControlPanel.alerts_submit_deactivate");
+    private static final Message T_activity_head 		= message("xmlui.administrative.ControlPanel.activity_head");
+    private static final Message T_stop_anonymous               = message("xmlui.administrative.ControlPanel.stop_anonymous");
+    private static final Message T_start_anonymous              = message("xmlui.administrative.ControlPanel.start_anonymous");
+    private static final Message T_stop_bot                     = message("xmlui.administrative.ControlPanel.stop_bot");
+    private static final Message T_start_bot                    = message("xmlui.administrative.ControlPanel.start_bot");
+    private static final Message T_activity_sort_time 		= message("xmlui.administrative.ControlPanel.activity_sort_time");
+    private static final Message T_activity_sort_user 		= message("xmlui.administrative.ControlPanel.activity_sort_user");
+    private static final Message T_activity_sort_ip  		= message("xmlui.administrative.ControlPanel.activity_sort_ip");
+    private static final Message T_activity_sort_url 		= message("xmlui.administrative.ControlPanel.activity_sort_url");
+    private static final Message T_activity_sort_agent 		= message("xmlui.administrative.ControlPanel.activity_sort_Agent");
+    private static final Message T_activity_anonymous 		= message("xmlui.administrative.ControlPanel.activity_anonymous");	
+    private static final Message T_activity_none		= message("xmlui.administrative.ControlPanel.activity_none");
+    private static final Message T_select_panel                 = message("xmlui.administrative.ControlPanel.select_panel");
+
+    private static final Message T_option_harvest  			= message("xmlui.administrative.ControlPanel.option_harvest");
+    private static final Message T_harvest_scheduler_head 		= message("xmlui.administrative.ControlPanel.harvest_scheduler_head");
+    private static final Message T_harvest_label_status 		= message("xmlui.administrative.ControlPanel.harvest_label_status");
+    private static final Message T_harvest_label_actions 		= message("xmlui.administrative.ControlPanel.harvest_label_actions");
+    private static final Message T_harvest_submit_start 		= message("xmlui.administrative.ControlPanel.harvest_submit_start");
+    private static final Message T_harvest_submit_reset 		= message("xmlui.administrative.ControlPanel.harvest_submit_reset");
+    private static final Message T_harvest_submit_resume 		= message("xmlui.administrative.ControlPanel.harvest_submit_resume");
+    private static final Message T_harvest_submit_pause 		= message("xmlui.administrative.ControlPanel.harvest_submit_pause");
+    private static final Message T_harvest_submit_stop 			= message("xmlui.administrative.ControlPanel.harvest_submit_stop");
+    private static final Message T_harvest_label_collections 		= message("xmlui.administrative.ControlPanel.harvest_label_collections");
+    private static final Message T_harvest_label_active 		= message("xmlui.administrative.ControlPanel.harvest_label_active");
+    private static final Message T_harvest_label_queued 		= message("xmlui.administrative.ControlPanel.harvest_label_queued");
+    private static final Message T_harvest_label_oai_errors 		= message("xmlui.administrative.ControlPanel.harvest_label_oai_errors");
+    private static final Message T_harvest_label_internal_errors 	= message("xmlui.administrative.ControlPanel.harvest_label_internal_errors");
+    private static final Message T_harvest_head_generator_settings 	= message("xmlui.administrative.ControlPanel.harvest_head_generator_settings");
+    private static final Message T_harvest_label_oai_url 		= message("xmlui.administrative.ControlPanel.harvest_label_oai_url");
+    private static final Message T_harvest_label_oai_source 		= message("xmlui.administrative.ControlPanel.harvest_label_oai_source");
+    private static final Message T_harvest_head_harvester_settings 	= message("xmlui.administrative.ControlPanel.harvest_head_harvester_settings");
+
 	
     /** 
      * The service manager allows us to access the continuation's 
@@ -160,157 +159,159 @@
      */
     public void service(ServiceManager serviceManager) throws ServiceException 
     {
-		this.serviceManager = serviceManager;
-	}
+        this.serviceManager = serviceManager;
+    }
 	
-	public void addPageMeta(PageMeta pageMeta) throws SAXException,
-			WingException, UIException, SQLException, IOException,
-			AuthorizeException {
-		pageMeta.addMetadata("title").addContent(T_title);
-
-		pageMeta.addTrailLink(contextPath + "/", T_DSPACE_HOME);
-		pageMeta.addTrailLink(contextPath + "/admin/panel", T_trail);
-	}
+    public void addPageMeta(PageMeta pageMeta) throws SAXException,
+                    WingException, UIException, SQLException, IOException,
+                    AuthorizeException 
+    {
+        pageMeta.addMetadata("title").addContent(T_title);
 
-	public void addBody(Body body) throws SAXException, WingException,
-			UIException, SQLException, IOException, AuthorizeException {
-		
-		if (!AuthorizeManager.isAdmin(context))
+        pageMeta.addTrailLink(contextPath + "/", T_DSPACE_HOME);
+        pageMeta.addTrailLink(contextPath + "/admin/panel", T_trail);
+    }
+
+    public void addBody(Body body) throws SAXException, WingException,
+                    UIException, SQLException, IOException, AuthorizeException 
+    {
+
+        if (!AuthorizeManager.isAdmin(context))
         {
             throw new AuthorizeException("You are not authorized to view this page.");
         }
-		
-		Request request = ObjectModelHelper.getRequest(objectModel);
-		OPTIONS option = null;
-		if (request.getParameter("java") != null)
+
+        Request request = ObjectModelHelper.getRequest(objectModel);
+        OPTIONS option = null;
+        if (request.getParameter("java") != null)
         {
             option = OPTIONS.java;
         }
-		if (request.getParameter("dspace") != null)
+        if (request.getParameter("dspace") != null)
         {
             option = OPTIONS.dspace;
         }
-		if (request.getParameter("alerts") != null)
+        if (request.getParameter("alerts") != null)
         {
             option = OPTIONS.alerts;
         }
-		if (request.getParameter("activity") != null)
+        if (request.getParameter("activity") != null)
         {
             option = OPTIONS.activity;
         }
-		if (request.getParameter("harvest") != null)
+        if (request.getParameter("harvest") != null)
         {
             option = OPTIONS.harvest;
         }
-		
-		Division div = body.addInteractiveDivision("control-panel", contextPath+"/admin/panel", Division.METHOD_POST, "primary administrative");
-		div.setHead(T_head);
-		
-		// LIST: options
-		List options = div.addList("options",List.TYPE_SIMPLE,"horizontal");
-		
-		// our options, selected or not....
-		if (option == OPTIONS.java)
+
+        Division div = body.addInteractiveDivision("control-panel", contextPath+"/admin/panel", Division.METHOD_POST, "primary administrative");
+        div.setHead(T_head);
+
+        // LIST: options
+        List options = div.addList("options",List.TYPE_SIMPLE,"horizontal");
+
+        // our options, selected or not....
+        if (option == OPTIONS.java)
         {
             options.addItem().addHighlight("bold").addXref("?java", T_option_java);
         }
-		else
+        else
         {
             options.addItemXref("?java", T_option_java);
         }
-		
-		if (option == OPTIONS.dspace)
+
+        if (option == OPTIONS.dspace)
         {
             options.addItem().addHighlight("bold").addXref("?dspace", T_option_dspace);
         }
-		else
+        else
         {
             options.addItemXref("?dspace", T_option_dspace);
         }
-		
-		if (option == OPTIONS.alerts)
+
+        if (option == OPTIONS.alerts)
         {
             options.addItem().addHighlight("bold").addXref("?alerts", T_option_alerts);
         }
-		else
+        else
         {
             options.addItemXref("?alerts", T_option_alerts);
         }
-		
-		if (option == OPTIONS.harvest)
+
+        if (option == OPTIONS.harvest)
         {
             options.addItem().addHighlight("bold").addXref("?harvest", T_option_harvest);
         }
-		else
+        else
         {
             options.addItemXref("?harvest", T_option_harvest);
         }
-		
-		String userSortTarget = "?activity";
-		if (request.getParameter("sortBy") != null)
+
+        String userSortTarget = "?activity";
+        if (request.getParameter("sortBy") != null)
         {
             userSortTarget += "&amp;sortBy=" + request.getParameter("sortBy");
         }
-		if (option == OPTIONS.activity)
+        if (option == OPTIONS.activity)
         {
             options.addItem().addHighlight("bold").addXref(userSortTarget, "Current Activity");
         }
-		else
+        else
         {
             options.addItemXref(userSortTarget, "Current Activity");
         }
-		
-		
-		// The main content:
-		if (option == OPTIONS.java)
+
+
+        // The main content:
+        if (option == OPTIONS.java)
         {
             addJavaInformation(div);
         }
-		else if (option == OPTIONS.dspace)
+        else if (option == OPTIONS.dspace)
         {
             addDSpaceConfiguration(div);
         }
-		else if (option == OPTIONS.alerts)
+        else if (option == OPTIONS.alerts)
         {
             addAlerts(div);
         }
-		else if (option == OPTIONS.activity)
+        else if (option == OPTIONS.activity)
         {
             addActivity(div);
         }
-		else if (option == OPTIONS.harvest)
+        else if (option == OPTIONS.harvest)
         {
             addHarvest(div);
         }
-		else
-		{
-			div.addPara(T_select_panel);
-		}
-		
-	}
-	
-	/**
-	 * Add specific java information including JRE, OS, and runtime memory statistics.
-	 */
-	private void addJavaInformation(Division div) throws WingException
-	{
-		// Get memory statistics
-		int processors = Runtime.getRuntime().availableProcessors();
-		long maxMemory = Runtime.getRuntime().maxMemory();
-		long totalMemory = Runtime.getRuntime().totalMemory();
+        else
+        {
+            div.addPara(T_select_panel);
+        }
+
+    }
+	
+    /**
+     * Add specific java information including JRE, OS, and runtime memory statistics.
+     */
+    private void addJavaInformation(Division div) throws WingException
+    {
+        // Get memory statistics
+        int processors = Runtime.getRuntime().availableProcessors();
+        long maxMemory = Runtime.getRuntime().maxMemory();
+        long totalMemory = Runtime.getRuntime().totalMemory();
         long freeMemory = Runtime.getRuntime().freeMemory();
-		long usedMemory = totalMemory-freeMemory;
+        long usedMemory = totalMemory-freeMemory;
         
-		// Convert bytes into MiB
-		maxMemory   = maxMemory   / 1024 / 1024;
-		totalMemory = totalMemory / 1024 / 1024;
-		usedMemory  = usedMemory  / 1024 / 1024;
-		freeMemory  = freeMemory  / 1024 / 1024;
-		
-		// LIST: Java
-		List list = div.addList("javaOs");
-		list.setHead(T_JAVA_HEAD);
-		list.addLabel(T_JAVA_VERSION);
+        // Convert bytes into MiB
+        maxMemory   = maxMemory   / 1024 / 1024;
+        totalMemory = totalMemory / 1024 / 1024;
+        usedMemory  = usedMemory  / 1024 / 1024;
+        freeMemory  = freeMemory  / 1024 / 1024;
+		
+        // LIST: Java
+        List list = div.addList("javaOs");
+        list.setHead(T_JAVA_HEAD);
+        list.addLabel(T_JAVA_VERSION);
         list.addItem(System.getProperty("java.version"));
         list.addLabel(T_JAVA_VENDOR);
         list.addItem(System.getProperty("java.vendor"));
@@ -321,27 +322,27 @@
         list.addLabel(T_OS_VERSION);
         list.addItem(System.getProperty("os.version"));
 		
-		// LIST: memory
-		List runtime = div.addList("runtime");
-		runtime.setHead(T_RUNTIME_HEAD);
-		runtime.addLabel(T_RUNTIME_PROCESSORS);
-		runtime.addItem(String.valueOf(processors));
-		runtime.addLabel(T_RUNTIME_MAX);
-		runtime.addItem(String.valueOf(maxMemory) + " MiB");
-		runtime.addLabel(T_RUNTIME_TOTAL);
-		runtime.addItem(String.valueOf(totalMemory) + " MiB");
-		runtime.addLabel(T_RUNTIME_USED);
-		runtime.addItem(String.valueOf(usedMemory) + " MiB");
-		runtime.addLabel(T_RUNTIME_FREE);
-		runtime.addItem(String.valueOf(freeMemory) + " MiB");	
-	}
-	
-	/**
-	 * List important DSpace configuration parameters.
-	 */
-	private void addDSpaceConfiguration(Division div) throws WingException 
-	{
-		// LIST: DSpace
+        // LIST: memory
+        List runtime = div.addList("runtime");
+        runtime.setHead(T_RUNTIME_HEAD);
+        runtime.addLabel(T_RUNTIME_PROCESSORS);
+        runtime.addItem(String.valueOf(processors));
+        runtime.addLabel(T_RUNTIME_MAX);
+        runtime.addItem(String.valueOf(maxMemory) + " MiB");
+        runtime.addLabel(T_RUNTIME_TOTAL);
+        runtime.addItem(String.valueOf(totalMemory) + " MiB");
+        runtime.addLabel(T_RUNTIME_USED);
+        runtime.addItem(String.valueOf(usedMemory) + " MiB");
+        runtime.addLabel(T_RUNTIME_FREE);
+        runtime.addItem(String.valueOf(freeMemory) + " MiB");	
+    }
+	
+    /**
+     * List important DSpace configuration parameters.
+     */
+    private void addDSpaceConfiguration(Division div) throws WingException 
+    {
+        // LIST: DSpace
         List dspace = div.addList("dspace");
         dspace.setHead(T_DSPACE_HEAD);
         
@@ -390,134 +391,134 @@
 
         dspace.addLabel(T_MAIL_ADMIN);
     	dspace.addItem(ConfigurationManager.getProperty("mail.admin"));        
-	}
+    }
 	
-	/**
-	 * Add a section that allows administrators to activate or deactivate system-wide alerts.
-	 */
-	private void addAlerts(Division div) throws WingException 
-	{
-		// Remember we're in the alerts section
-		div.addHidden("alerts").setValue("true");
-		
-		List form = div.addList("system-wide-alerts",List.TYPE_FORM);
-		form.setHead(T_alerts_head);
-		
-		form.addItem(T_alerts_warning);
-		
-		TextArea message = form.addItem().addTextArea("message");
-		message.setLabel(T_alerts_message_label);
-		message.setSize(5, 45);
-		if (SystemwideAlerts.getMessage() == null)
+    /**
+     * Add a section that allows administrators to activate or deactivate system-wide alerts.
+     */
+    private void addAlerts(Division div) throws WingException 
+    {
+        // Remember we're in the alerts section
+        div.addHidden("alerts").setValue("true");
+
+        List form = div.addList("system-wide-alerts",List.TYPE_FORM);
+        form.setHead(T_alerts_head);
+
+        form.addItem(T_alerts_warning);
+
+        TextArea message = form.addItem().addTextArea("message");
+        message.setLabel(T_alerts_message_label);
+        message.setSize(5, 45);
+        if (SystemwideAlerts.getMessage() == null)
         {
             message.setValue(T_alerts_message_default);
         }
-		else
+        else
         {
             message.setValue(SystemwideAlerts.getMessage());
         }
 		
-		Select countdown = form.addItem().addSelect("countdown");
-		countdown.setLabel(T_alerts_countdown_label);
-		
-		countdown.addOption(0,T_alerts_countdown_none);
-		countdown.addOption(5,T_alerts_countdown_5);
-		countdown.addOption(15,T_alerts_countdown_15);
-		countdown.addOption(30,T_alerts_countdown_30);
-		countdown.addOption(60,T_alerts_countdown_60);
-		
-		// Is there a current count down active?
-		if (SystemwideAlerts.isAlertActive() &amp;&amp; SystemwideAlerts.getCountDownToo() - System.currentTimeMillis() &gt; 0)
+        Select countdown = form.addItem().addSelect("countdown");
+        countdown.setLabel(T_alerts_countdown_label);
+
+        countdown.addOption(0,T_alerts_countdown_none);
+        countdown.addOption(5,T_alerts_countdown_5);
+        countdown.addOption(15,T_alerts_countdown_15);
+        countdown.addOption(30,T_alerts_countdown_30);
+        countdown.addOption(60,T_alerts_countdown_60);
+
+        // Is there a current count down active?
+        if (SystemwideAlerts.isAlertActive() &amp;&amp; SystemwideAlerts.getCountDownToo() - System.currentTimeMillis() &gt; 0)
         {
             countdown.addOption(true, -1, T_alerts_countdown_keep);
         }
-		else
+        else
         {
             countdown.setOptionSelected(0);
         }
 		
-		Select restrictsessions = form.addItem().addSelect("restrictsessions");
-		restrictsessions.setLabel(T_alerts_session_label);
-		restrictsessions.addOption(SystemwideAlerts.STATE_ALL_SESSIONS,T_alerts_session_all_sessions);
-		restrictsessions.addOption(SystemwideAlerts.STATE_CURRENT_SESSIONS,T_alerts_session_current_sessions);
-		restrictsessions.addOption(SystemwideAlerts.STATE_ONLY_ADMINISTRATIVE_SESSIONS,T_alerts_session_only_administrative);
-		restrictsessions.setOptionSelected(SystemwideAlerts.getRestrictSessions());
-		
-		form.addItem(T_alerts_session_note);
-		
-		
-		Item actions = form.addItem();
-		actions.addButton("submit_activate").setValue(T_alerts_submit_activate);
-		actions.addButton("submit_deactivate").setValue(T_alerts_submit_deactivate);
-		
-	}
-	
-	/** The possible sorting parameters */
-	private static enum EventSort { TIME, URL, SESSION, AGENT, IP };
-	
-	/**
-	 * Create a list of all activity.
-	 */
-	private void addActivity(Division div) throws WingException, SQLException 
-	{
-		
-		// 0) Update recording settings
-		Request request = ObjectModelHelper.getRequest(objectModel);
-
-		// Toggle anonymous recording
-		String recordAnonymousString = request.getParameter("recordanonymous");
-		if (recordAnonymousString != null)
-		{
-			if ("ON".equals(recordAnonymousString))
+        Select restrictsessions = form.addItem().addSelect("restrictsessions");
+        restrictsessions.setLabel(T_alerts_session_label);
+        restrictsessions.addOption(SystemwideAlerts.STATE_ALL_SESSIONS,T_alerts_session_all_sessions);
+        restrictsessions.addOption(SystemwideAlerts.STATE_CURRENT_SESSIONS,T_alerts_session_current_sessions);
+        restrictsessions.addOption(SystemwideAlerts.STATE_ONLY_ADMINISTRATIVE_SESSIONS,T_alerts_session_only_administrative);
+        restrictsessions.setOptionSelected(SystemwideAlerts.getRestrictSessions());
+
+        form.addItem(T_alerts_session_note);
+
+
+        Item actions = form.addItem();
+        actions.addButton("submit_activate").setValue(T_alerts_submit_activate);
+        actions.addButton("submit_deactivate").setValue(T_alerts_submit_deactivate);
+		
+    }
+	
+    /** The possible sorting parameters */
+    private static enum EventSort { TIME, URL, SESSION, AGENT, IP };
+	
+    /**
+     * Create a list of all activity.
+     */
+    private void addActivity(Division div) throws WingException, SQLException 
+    {
+		
+        // 0) Update recording settings
+        Request request = ObjectModelHelper.getRequest(objectModel);
+
+        // Toggle anonymous recording
+        String recordAnonymousString = request.getParameter("recordanonymous");
+        if (recordAnonymousString != null)
+        {
+            if ("ON".equals(recordAnonymousString))
             {
                 CurrentActivityAction.setRecordAnonymousEvents(true);
             }
-			if ("OFF".equals(recordAnonymousString))
+            if ("OFF".equals(recordAnonymousString))
             {
                 CurrentActivityAction.setRecordAnonymousEvents(false);
             }
-		}
+        }
 		
-		// Toggle bot recording
-		String recordBotString = request.getParameter("recordbots");
-		if (recordBotString != null)
-		{
-			if ("ON".equals(recordBotString))
+        // Toggle bot recording
+        String recordBotString = request.getParameter("recordbots");
+        if (recordBotString != null)
+        {
+            if ("ON".equals(recordBotString))
             {
                 CurrentActivityAction.setRecordBotEvents(true);
             }
-			if ("OFF".equals(recordBotString))
+            if ("OFF".equals(recordBotString))
             {
                 CurrentActivityAction.setRecordBotEvents(false);
             }
-		}		
+        }		
 		
-		// 1) Determine how to sort
-		EventSort sortBy = EventSort.TIME;
-		String sortByString = request.getParameter("sortBy");
-		if (EventSort.TIME.toString().equals(sortByString))
+        // 1) Determine how to sort
+        EventSort sortBy = EventSort.TIME;
+        String sortByString = request.getParameter("sortBy");
+        if (EventSort.TIME.toString().equals(sortByString))
         {
             sortBy = EventSort.TIME;
         }
-		if (EventSort.URL.toString().equals(sortByString))
+        if (EventSort.URL.toString().equals(sortByString))
         {
             sortBy = EventSort.URL;
         }
-		if (EventSort.SESSION.toString().equals(sortByString))
+        if (EventSort.SESSION.toString().equals(sortByString))
         {
             sortBy = EventSort.SESSION;
         }
-		if (EventSort.AGENT.toString().equals(sortByString))
+        if (EventSort.AGENT.toString().equals(sortByString))
         {
             sortBy = EventSort.AGENT;
         }
-		if (EventSort.IP.toString().equals(sortByString))
+        if (EventSort.IP.toString().equals(sortByString))
         {
             sortBy = EventSort.IP;
         }
 		
-		// 2) Sort the events by the requested sorting parameter
-		java.util.List&lt;CurrentActivityAction.Event&gt; events = CurrentActivityAction.getEvents();
+        // 2) Sort the events by the requested sorting parameter
+        java.util.List&lt;CurrentActivityAction.Event&gt; events = CurrentActivityAction.getEvents();
         Collections.sort(events, new ActivitySort&lt;CurrentActivityAction.Event&gt;(sortBy));
         Collections.reverse(events);
         
@@ -541,7 +542,7 @@
         }
        	
         
-		// 4) Display the results Table
+        // 4) Display the results Table
         // TABLE: activeUsers
         Table activeUsers = div.addTable("users",1,1);
         activeUsers.setHead(T_activity_head.parameterize(CurrentActivityAction.MAX_EVENTS));
@@ -597,263 +598,263 @@
         int anonymousCount = 1;
 		
         int shown = 0;
-		for (CurrentActivityAction.Event event : events)
-		{	
-			if (event == null)
+        for (CurrentActivityAction.Event event : events)
+        {	
+            if (event == null)
             {
                 continue;
             }
 			
-			shown++;
+            shown++;
 			
-			Message timeStampMessage = null;
-        	long ago = System.currentTimeMillis() - event.getTimeStamp();
-        	
-        	if (ago &gt; 2*60*60*1000)
+            Message timeStampMessage = null;
+            long ago = System.currentTimeMillis() - event.getTimeStamp();
+
+            if (ago &gt; 2*60*60*1000)
             {
                 timeStampMessage = T_hours.parameterize((ago / (60 * 60 * 1000)));
             }
-        	else if (ago &gt; 60*1000)
+            else if (ago &gt; 60*1000)
             {
                 timeStampMessage = T_minutes.parameterize((ago / (60 * 1000)));
             }
-        	else
+            else
             {
                 timeStampMessage = T_seconds.parameterize((ago / (1000)));
             }
         	
         	
-			Row eventRow = activeUsers.addRow();
-			
-			eventRow.addCellContent(timeStampMessage);
-			int eid = event.getEPersonID();
-			EPerson eperson = EPerson.find(context, eid);
-			if (eperson != null)
-			{
-				String name = eperson.getFullName();
-				eventRow.addCellContent(name);
-			}
-			else
-			{
-				// Is this a new anonymous user?
-				if (!anonymousHash.containsKey(event.getSessionID()))
+            Row eventRow = activeUsers.addRow();
+
+            eventRow.addCellContent(timeStampMessage);
+            int eid = event.getEPersonID();
+            EPerson eperson = EPerson.find(context, eid);
+            if (eperson != null)
+            {
+                String name = eperson.getFullName();
+                eventRow.addCellContent(name);
+            }
+            else
+            {
+                // Is this a new anonymous user?
+                if (!anonymousHash.containsKey(event.getSessionID()))
                 {
                     anonymousHash.put(event.getSessionID(), anonymousCount++);
                 }
 				
-				eventRow.addCellContent(T_activity_anonymous.parameterize(anonymousHash.get(event.getSessionID())));
-			}
-			eventRow.addCellContent(event.getIP());
-			eventRow.addCell().addXref(contextPath+"/"+event.getURL()).addContent("/"+event.getURL());
-			eventRow.addCellContent(event.getDectectedBrowser());
-		}
-		
-		if (shown == 0)
-        {
-			activeUsers.addRow().addCell(1, 5).addContent(T_activity_none);
-        }
-	}
-	
-	/**
-	 * Comparator to sort activity events by their access times.
-	 */
-	public static class ActivitySort&lt;E extends CurrentActivityAction.Event&gt; implements Comparator&lt;E&gt;, Serializable
-	{
-		// Sort parameter
-		private EventSort sortBy;
-		
-		public ActivitySort(EventSort sortBy)
-		{
-			this.sortBy = sortBy;
-		}
-		
-		/**
-		 * Compare these two activity events based upon the given sort parameter. In the case of a tie,
-		 * allways fallback to sorting based upon the timestamp.
-		 */
-		public int compare(E a, E b) 
-		{
-			// Protect against null events while sorting
-			if (a != null &amp;&amp; b == null)
+                eventRow.addCellContent(T_activity_anonymous.parameterize(anonymousHash.get(event.getSessionID())));
+            }
+            eventRow.addCellContent(event.getIP());
+            eventRow.addCell().addXref(contextPath+"/"+event.getURL()).addContent("/"+event.getURL());
+            eventRow.addCellContent(event.getDectectedBrowser());
+        }
+		
+        if (shown == 0)
+        {
+            activeUsers.addRow().addCell(1, 5).addContent(T_activity_none);
+        }
+    }
+	
+    /**
+     * Comparator to sort activity events by their access times.
+     */
+    public static class ActivitySort&lt;E extends CurrentActivityAction.Event&gt; implements Comparator&lt;E&gt;, Serializable
+    {
+        // Sort parameter
+        private EventSort sortBy;
+
+        public ActivitySort(EventSort sortBy)
+        {
+                this.sortBy = sortBy;
+        }
+		
+        /**
+         * Compare these two activity events based upon the given sort parameter. In the case of a tie,
+         * allways fallback to sorting based upon the timestamp.
+         */
+        public int compare(E a, E b) 
+        {
+            // Protect against null events while sorting
+            if (a != null &amp;&amp; b == null)
             {
                 return 1; // A &gt; B
             }
-			else if (a == null &amp;&amp; b != null)
+            else if (a == null &amp;&amp; b != null)
             {
                 return -1; // B &gt; A
             }
-			else if (a == null &amp;&amp; b == null)
+            else if (a == null &amp;&amp; b == null)
             {
                 return 0; // A == B
             }
 			
-			// Sort by the given ordering matrix
-			if (EventSort.URL == sortBy)
-			{
-				String aURL = a.getURL();
-				String bURL = b.getURL();
-				int cmp = aURL.compareTo(bURL);
-				if (cmp != 0)
+            // Sort by the given ordering matrix
+            if (EventSort.URL == sortBy)
+            {
+                String aURL = a.getURL();
+                String bURL = b.getURL();
+                int cmp = aURL.compareTo(bURL);
+                if (cmp != 0)
                 {
                     return cmp;
                 }
-			}
-			else if (EventSort.AGENT == sortBy)
-			{
-				String aAgent = a.getDectectedBrowser();
-				String bAgent = b.getDectectedBrowser();
-				int cmp = aAgent.compareTo(bAgent);
-				if (cmp != 0)
+            }
+            else if (EventSort.AGENT == sortBy)
+            {
+                String aAgent = a.getDectectedBrowser();
+                String bAgent = b.getDectectedBrowser();
+                int cmp = aAgent.compareTo(bAgent);
+                if (cmp != 0)
                 {
                     return cmp;
                 }
-			}
-			else if (EventSort.IP == sortBy)
-			{
-				String aIP = a.getIP();
-				String bIP = b.getIP();
-				int cmp = aIP.compareTo(bIP);
-				if (cmp != 0)
+            }
+            else if (EventSort.IP == sortBy)
+            {
+                String aIP = a.getIP();
+                String bIP = b.getIP();
+                int cmp = aIP.compareTo(bIP);
+                if (cmp != 0)
                 {
                     return cmp;
                 }
 				
-			}
-			else if (EventSort.SESSION == sortBy)
-			{
-				// Ensure that all sessions with an EPersonID associated are
-				// ordered to the top. Otherwise fall back to comparing session
-				// IDs. Unfortunitaly we can not compare eperson names because 
-				// we do not have access to a context object.
-				if (a.getEPersonID() &gt; 0  &amp;&amp; b.getEPersonID() &lt; 0)
+            }
+            else if (EventSort.SESSION == sortBy)
+            {
+                // Ensure that all sessions with an EPersonID associated are
+                // ordered to the top. Otherwise fall back to comparing session
+                // IDs. Unfortunitaly we can not compare eperson names because 
+                // we do not have access to a context object.
+                if (a.getEPersonID() &gt; 0  &amp;&amp; b.getEPersonID() &lt; 0)
                 {
                     return 1; // A &gt; B
                 }
-				else if (a.getEPersonID() &lt; 0  &amp;&amp; b.getEPersonID() &gt; 0)
+                else if (a.getEPersonID() &lt; 0  &amp;&amp; b.getEPersonID() &gt; 0)
                 {
                     return -1; // B &gt; A
                 }
 				
-				String aSession = a.getSessionID();
-				String bSession = b.getSessionID();
-				int cmp = aSession.compareTo(bSession);
-				if (cmp != 0)
+                String aSession = a.getSessionID();
+                String bSession = b.getSessionID();
+                int cmp = aSession.compareTo(bSession);
+                if (cmp != 0)
                 {
                     return cmp;
                 }
-			}
+            }
 			
-			// All ways fall back to sorting by time, when events are equal.
-			if (a.getTimeStamp() &gt; b.getTimeStamp())
+            // All ways fall back to sorting by time, when events are equal.
+            if (a.getTimeStamp() &gt; b.getTimeStamp())
             {
                 return 1;  // A &gt; B
             }
-			else if (a.getTimeStamp() &gt; b.getTimeStamp())
+            else if (a.getTimeStamp() &gt; b.getTimeStamp())
             {
                 return -1; // B &gt; A
             }
-			return 0; // A == B
-		}
-	}
-	
-		
-	/**
-	 * Add a section that allows management of the OAI harvester.
-	 * @throws SQLException 
-	 */
-	private void addHarvest(Division div) throws WingException, SQLException 
-	{
-		// Remember we're in the harvest section
-		div.addHidden("harvest").setValue("true");
-						
-		List harvesterControls = div.addList("oai-harvester-controls",List.TYPE_FORM);
-		harvesterControls.setHead(T_harvest_scheduler_head);
-		harvesterControls.addLabel(T_harvest_label_status);
-		Item status = harvesterControls.addItem();
-		status.addContent(HarvestScheduler.getStatus());
-		status.addXref(contextPath + "/admin/panel?harvest", "(refresh)");
-		
-		harvesterControls.addLabel(T_harvest_label_actions);
-		Item actionsItem = harvesterControls.addItem();
-		if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_STOPPED)) {
-			actionsItem.addButton("submit_harvest_start").setValue(T_harvest_submit_start);
-			actionsItem.addButton("submit_harvest_reset").setValue(T_harvest_submit_reset);
-		}
-		if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_PAUSED))
+            return 0; // A == B
+        }
+    }
+	
+		
+    /**
+     * Add a section that allows management of the OAI harvester.
+     * @throws SQLException 
+     */
+    private void addHarvest(Division div) throws WingException, SQLException 
+    {
+        // Remember we're in the harvest section
+        div.addHidden("harvest").setValue("true");
+
+        List harvesterControls = div.addList("oai-harvester-controls",List.TYPE_FORM);
+        harvesterControls.setHead(T_harvest_scheduler_head);
+        harvesterControls.addLabel(T_harvest_label_status);
+        Item status = harvesterControls.addItem();
+        status.addContent(HarvestScheduler.getStatus());
+        status.addXref(contextPath + "/admin/panel?harvest", "(refresh)");
+
+        harvesterControls.addLabel(T_harvest_label_actions);
+        Item actionsItem = harvesterControls.addItem();
+        if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_STOPPED)) {
+            actionsItem.addButton("submit_harvest_start").setValue(T_harvest_submit_start);
+            actionsItem.addButton("submit_harvest_reset").setValue(T_harvest_submit_reset);
+        }
+        if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_PAUSED))
         {
             actionsItem.addButton("submit_harvest_resume").setValue(T_harvest_submit_resume);
         }
-		if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_RUNNING) ||
-				HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_SLEEPING))
+        if (HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_RUNNING) ||
+                    HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_SLEEPING))
         {
             actionsItem.addButton("submit_harvest_pause").setValue(T_harvest_submit_pause);
         }
-		if (!HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_STOPPED))
+        if (!HarvestScheduler.hasStatus(HarvestScheduler.HARVESTER_STATUS_STOPPED))
         {
             actionsItem.addButton("submit_harvest_stop").setValue(T_harvest_submit_stop);
         }
 		
-		// Can be retrieved via "{context-path}/admin/collection?collectionID={id}"
-		String baseURL = contextPath + "/admin/collection?collectionID=";
-		
-		harvesterControls.addLabel(T_harvest_label_collections);
-		Item allCollectionsItem = harvesterControls.addItem();
-		java.util.List&lt;Integer&gt; allCollections =  HarvestedCollection.findAll(context);
-		for (Integer oaiCollection : allCollections) {
-			allCollectionsItem.addXref(baseURL + oaiCollection, oaiCollection.toString());
-		}
-		harvesterControls.addLabel(T_harvest_label_active);
-		Item busyCollectionsItem = harvesterControls.addItem();
-		java.util.List&lt;Integer&gt; busyCollections =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_BUSY);
-		for (Integer busyCollection : busyCollections) {
-			busyCollectionsItem.addXref(baseURL + busyCollection, busyCollection.toString());
-		}
-		harvesterControls.addLabel(T_harvest_label_queued);
-		Item queuedCollectionsItem = harvesterControls.addItem();
-		java.util.List&lt;Integer&gt; queuedCollections =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_QUEUED);
-		for (Integer queuedCollection : queuedCollections) {
-			queuedCollectionsItem.addXref(baseURL + queuedCollection, queuedCollection.toString());
-		}
-		harvesterControls.addLabel(T_harvest_label_oai_errors);
-		Item oaiErrorsItem = harvesterControls.addItem();
-		java.util.List&lt;Integer&gt; oaiErrors =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_OAI_ERROR);
-		for (Integer oaiError : oaiErrors) {
-			oaiErrorsItem.addXref(baseURL + oaiError, oaiError.toString());
-		}
-		harvesterControls.addLabel(T_harvest_label_internal_errors);
-		Item internalErrorsItem = harvesterControls.addItem();
-		java.util.List&lt;Integer&gt; internalErrors =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_UNKNOWN_ERROR);
-		for (Integer internalError : internalErrors) {
-			internalErrorsItem.addXref(baseURL + internalError, internalError.toString());
-		}
-		
-		// OAI Generator settings
-		List generatorSettings = div.addList("oai-generator-settings");
-		generatorSettings.setHead(T_harvest_head_generator_settings);
-		
-		generatorSettings.addLabel(T_harvest_label_oai_url);
-		String oaiUrl = ConfigurationManager.getProperty("dspace.oai.url");
-		if (!StringUtils.isEmpty(oaiUrl))
+        // Can be retrieved via "{context-path}/admin/collection?collectionID={id}"
+        String baseURL = contextPath + "/admin/collection?collectionID=";
+
+        harvesterControls.addLabel(T_harvest_label_collections);
+        Item allCollectionsItem = harvesterControls.addItem();
+        java.util.List&lt;Integer&gt; allCollections =  HarvestedCollection.findAll(context);
+        for (Integer oaiCollection : allCollections) {
+                allCollectionsItem.addXref(baseURL + oaiCollection, oaiCollection.toString());
+        }
+        harvesterControls.addLabel(T_harvest_label_active);
+        Item busyCollectionsItem = harvesterControls.addItem();
+        java.util.List&lt;Integer&gt; busyCollections =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_BUSY);
+        for (Integer busyCollection : busyCollections) {
+                busyCollectionsItem.addXref(baseURL + busyCollection, busyCollection.toString());
+        }
+        harvesterControls.addLabel(T_harvest_label_queued);
+        Item queuedCollectionsItem = harvesterControls.addItem();
+        java.util.List&lt;Integer&gt; queuedCollections =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_QUEUED);
+        for (Integer queuedCollection : queuedCollections) {
+                queuedCollectionsItem.addXref(baseURL + queuedCollection, queuedCollection.toString());
+        }
+        harvesterControls.addLabel(T_harvest_label_oai_errors);
+        Item oaiErrorsItem = harvesterControls.addItem();
+        java.util.List&lt;Integer&gt; oaiErrors =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_OAI_ERROR);
+        for (Integer oaiError : oaiErrors) {
+                oaiErrorsItem.addXref(baseURL + oaiError, oaiError.toString());
+        }
+        harvesterControls.addLabel(T_harvest_label_internal_errors);
+        Item internalErrorsItem = harvesterControls.addItem();
+        java.util.List&lt;Integer&gt; internalErrors =  HarvestedCollection.findByStatus(context, HarvestedCollection.STATUS_UNKNOWN_ERROR);
+        for (Integer internalError : internalErrors) {
+                internalErrorsItem.addXref(baseURL + internalError, internalError.toString());
+        }
+		
+        // OAI Generator settings
+        List generatorSettings = div.addList("oai-generator-settings");
+        generatorSettings.setHead(T_harvest_head_generator_settings);
+
+        generatorSettings.addLabel(T_harvest_label_oai_url);
+        String oaiUrl = ConfigurationManager.getProperty("dspace.oai.url");
+        if (!StringUtils.isEmpty(oaiUrl))
         {
             generatorSettings.addItem(oaiUrl);
         }
 
-		generatorSettings.addLabel(T_harvest_label_oai_source);
-		String oaiAuthoritativeSource = ConfigurationManager.getProperty("ore.authoritative.source");
-		if (!StringUtils.isEmpty(oaiAuthoritativeSource))
+        generatorSettings.addLabel(T_harvest_label_oai_source);
+        String oaiAuthoritativeSource = ConfigurationManager.getProperty("ore.authoritative.source");
+        if (!StringUtils.isEmpty(oaiAuthoritativeSource))
         {
             generatorSettings.addItem(oaiAuthoritativeSource);
         }
-		else
+        else
         {
             generatorSettings.addItem("oai");
         }
 		
-		// OAI Harvester settings (just iterate over all the values that start with "harvester")
-		List harvesterSettings = div.addList("oai-harvester-settings");
-		harvesterSettings.setHead(T_harvest_head_harvester_settings);
-		
-		String metaString = "harvester.";
+        // OAI Harvester settings (just iterate over all the values that start with "harvester")
+        List harvesterSettings = div.addList("oai-harvester-settings");
+        harvesterSettings.setHead(T_harvest_head_harvester_settings);
+
+        String metaString = "harvester.";
         Enumeration pe = ConfigurationManager.propertyNames();
         while (pe.hasMoreElements())
         {
@@ -863,6 +864,6 @@
             	harvesterSettings.addItem(ConfigurationManager.getProperty(key) + " ");
             }
         }
-	}
+    }
 	
 }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27837942">[DSpace-changelog] r6501 - in dspace/trunk/dspace-xmlui:
	dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative
	dspace-xmlui-webapp/src/main/webapp/i18n</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-22 17:39</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Fri Jul 22 17:38:53 2011
New Revision: 6501

Log:
DS-965 : Add DSpace Version to XMLUI Control Panel (Adds it to the "DSpace Configuration" tab)

Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java
   dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/administrative/ControlPanel.java	Fri Jul 22 17:38:53 2011
@@ -21,6 +21,7 @@
 import org.apache.cocoon.environment.ObjectModelHelper;
 import org.apache.cocoon.environment.Request;
 import org.apache.commons.lang.StringUtils;
+import org.dspace.app.util.Util;
 import org.dspace.app.xmlui.cocoon.AbstractDSpaceTransformer;
 import org.dspace.app.xmlui.utils.UIException;
 import org.dspace.app.xmlui.wing.Message;
@@ -80,6 +81,7 @@
     private static final Message T_DSPACE_URL 			= message("xmlui.administrative.ControlPanel.dspace_url");
     private static final Message T_DSPACE_HOST_NAME 	= message("xmlui.administrative.ControlPanel.dspace_hostname");
     private static final Message T_DSPACE_NAME 			= message("xmlui.administrative.ControlPanel.dspace_name");
+    private static final Message T_DSPACE_VERSION 			= message("xmlui.administrative.ControlPanel.dspace_version");
     private static final Message T_DB_NAME 				= message("xmlui.administrative.ControlPanel.db_name");
     private static final Message T_DB_URL 				= message("xmlui.administrative.ControlPanel.db_url");
     private static final Message T_DB_DRIVER 			= message("xmlui.administrative.ControlPanel.db_driver");
@@ -343,6 +345,9 @@
         List dspace = div.addList("dspace");
         dspace.setHead(T_DSPACE_HEAD);
         
+        dspace.addLabel(T_DSPACE_VERSION);
+        dspace.addItem(Util.getSourceVersion());
+        
         dspace.addLabel(T_DSPACE_DIR);
     	dspace.addItem(ConfigurationManager.getProperty("dspace.dir"));
     

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/i18n/messages.xml	Fri Jul 22 17:38:53 2011
@@ -1678,6 +1678,7 @@
 	&lt;message key="xmlui.administrative.ControlPanel.runtime_used"&gt;Used memory&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.runtime_free"&gt;Free memory&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_head"&gt;DSpace Settings&lt;/message&gt;
+        &lt;message key="xmlui.administrative.ControlPanel.dspace_version"&gt;DSpace Version&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_dir"&gt;DSpace Installation Directory&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_url"&gt;DSpace Base URL&lt;/message&gt;
 	&lt;message key="xmlui.administrative.ControlPanel.dspace_hostname"&gt;DSpace Host Name&lt;/message&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27833778">[DSpace-changelog] r6500 - dspace/trunk/dspace/modules</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-21 20:53</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Thu Jul 21 20:53:42 2011
New Revision: 6500

Log:
DS-791 : Add ability to disable the building of particular DSpace modules/interfaces from source code

Modified:
   dspace/trunk/dspace/modules/pom.xml

Modified: dspace/trunk/dspace/modules/pom.xml
==============================================================================
--- dspace/trunk/dspace/modules/pom.xml	(original)
+++ dspace/trunk/dspace/modules/pom.xml	Thu Jul 21 20:53:42 2011
@@ -19,14 +19,72 @@
       &lt;developerConnection&gt;scm:svn:<a href="https://scm.dspace.org/svn/repo/dspace/trunk/dspace/modules&lt;/developerConnection" target="_new">https://scm.dspace.org/svn/repo/dspace/trunk/dspace/modules&lt;/developerConnection</a>&gt;
       &lt;url&gt;<a href="http://scm.dspace.org/svn/repo/dspace/trunk/dspace/modules&lt;/url" target="_new">http://scm.dspace.org/svn/repo/dspace/trunk/dspace/modules&lt;/url</a>&gt;
     &lt;/scm&gt;
-   
-	&lt;modules&gt;
-		&lt;module&gt;xmlui&lt;/module&gt;
-		&lt;module&gt;lni&lt;/module&gt;
-		&lt;module&gt;oai&lt;/module&gt;
-		&lt;module&gt;jspui&lt;/module&gt;
-		&lt;module&gt;sword&lt;/module&gt;
-		&lt;module&gt;solr&lt;/module&gt;
-	&lt;/modules&gt;
-	
+    
+    &lt;!-- 
+         List of enabled DSpace Modules to build/install.
+         To disable building of modules, you can use the Maven '-P' commandline 
+         option along with the profile's id.  For example, the following tells
+         Maven to *disable* building of 'dspace-oai' and 'dspace-lni' modules:
+         'mvn package -P !dspace-oai,!dspace-lni'
+         
+         Also note that the profile IDs below match the profile IDs of the source
+         modules in /dspace/pom.xml, so the above command will also disable the
+         compiling of the corresponding source module.
+    --&gt;
+    &lt;profiles&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-xmlui&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;xmlui&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-lni&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;lni&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-oai&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;oai&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-jspui&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;jspui&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-sword&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;sword&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+        &lt;profile&gt;
+            &lt;id&gt;dspace-solr&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;modules&gt;
+                &lt;module&gt;solr&lt;/module&gt;
+            &lt;/modules&gt;
+        &lt;/profile&gt;
+    &lt;/profiles&gt;
 &lt;/project&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27833653">[DSpace-changelog] r6499 - dspace/trunk/dspace/config/crosswalks</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-21 20:29</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Thu Jul 21 20:29:29 2011
New Revision: 6499

Log:
Comment out 'dc.description.provenance' mapping in mods.properties file. As part of DS-708 (Deprecate &amp; Remove old 'org.dspace.app.mets.METSExport' class), we need to replace the existing 'oai.mets.hide-provenance' configuration with something equivalent.   Based on the discussions in both DS-708 and DS-950, it was determined the easiest fix for now is to just comment this setting out in mods.properties by default.

Modified:
   dspace/trunk/dspace/config/crosswalks/mods.properties

Modified: dspace/trunk/dspace/config/crosswalks/mods.properties
==============================================================================
--- dspace/trunk/dspace/config/crosswalks/mods.properties	(original)
+++ dspace/trunk/dspace/config/crosswalks/mods.properties	Thu Jul 21 20:29:29 2011
@@ -1,5 +1,5 @@
 # Default MODS crosswalk configuration file.  See class
-#  org.dspace.content.crosswalk.ModsCrosswalk for details.
+#  org.dspace.content.crosswalk.MODSDisseminationCrosswalk for details.
 #
 # Revision: $Revision$
 #
@@ -23,7 +23,11 @@
 dc.date.submitted = &lt;mods:extension&gt;&lt;mods:dateSubmitted encoding="iso8601"&gt;%s&lt;/mods:dateSubmitted&gt;&lt;/mods:extension&gt; | mods:dateSubmitted/text()
 dc.description = &lt;mods:note&gt;%s&lt;/mods:note&gt; | text()
 dc.description.abstract = &lt;mods:abstract&gt;%s&lt;/mods:abstract&gt; | text()
-dc.description.provenance = &lt;mods:note type="provenance"&gt;%s&lt;/mods:note&gt; | text()
+# By default, provenance metadata is not mapped to MODS, as this is internal DSpace metadata.
+# You may choose to enable mapping of provenance information if you have a need for it. 
+# However, be warned that enabling the below mapping will also cause provenance info to be made available 
+# via OAI-PMH (if MODS or METS format is enabled via your DSpace OAI-PMH settings)
+#dc.description.provenance = &lt;mods:note type="provenance"&gt;%s&lt;/mods:note&gt; | text()
 dc.description.sponsorship = &lt;mods:note type="sponsorship"&gt;%s&lt;/mods:note&gt; | text()
 dc.description.statementofresponsibility = &lt;mods:note type="statement of responsibility"&gt;%s&lt;/mods:note&gt; | text()
 dc.description.tableofcontents = &lt;mods:tableOfContents&gt;%s&lt;/mods:tableOfContents&gt; | text()

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27827645">[DSpace-changelog] r6498 - in modules/dspace-rest/trunk: .
	src/main/java/org/dspace/rest/entities
	src/main/java/org/dspace/rest/providers</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-20 18:50</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: bojans
Date: Wed Jul 20 18:50:02 2011
New Revision: 6498

Log:
statistics change

Added:
   modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatReport.java
Modified:
   modules/dspace-rest/trunk/   (props changed)
   modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatsEntity.java
   modules/dspace-rest/trunk/src/main/java/org/dspace/rest/providers/StatsProvider.java

Added: modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatReport.java
==============================================================================
--- (empty file)
+++ modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatReport.java	Wed Jul 20 18:50:02 2011
@@ -0,0 +1,178 @@
+package org.dspace.rest.entities;
+
+import java.util.Date;
+import org.dspace.app.statistics.Report;
+import org.dspace.app.statistics.Statistics;
+import org.dspace.app.statistics.Stat;
+import java.util.List;
+import java.util.ArrayList;
+import java.util.Iterator;
+import java.text.DateFormat;
+import java.util.HashMap;
+import org.sakaiproject.entitybus.entityprovider.annotations.EntityId;
+
+/**
+ *
+ * @author Bojan Suzic
+ */
+public class StatReport implements Report {
+
+    private List&lt;Statistics&gt; blocks = new ArrayList&lt;Statistics&gt;();
+    private Date start = null;
+    private Date end = null;
+    private HashMap&lt;String, HashMap&gt; completeStats = new HashMap&lt;String, HashMap&gt;();
+    private HashMap&lt;String, String&gt; basicInfo = new HashMap&lt;String, String&gt;();
+    private HashMap&lt;String, String&gt; dateInfo = new HashMap&lt;String, String&gt;();
+    @EntityId
+    private int id;
+    private String type = "monthly";
+
+    // unnecessary methods, interface requires implementation    
+    @Override
+    public String statBlock(Statistics ststcs) {
+        return "";
+    }
+
+    @Override
+    public String header() {
+        return "";
+    }
+
+    @Override
+    public String header(String string) {
+        return "";
+    }
+
+    @Override
+    public String sectionHeader(String string) {
+        return string;
+    }
+
+    @Override
+    public String floorInfo(int i) {
+        return Integer.toString(i);
+    }
+
+    @Override
+    public String blockExplanation(String string) {
+        return string;
+    }
+
+    @Override
+    public String footer() {
+        return "";
+    }
+
+    @Override
+    public String mainTitle() {
+        return "";
+    }
+
+    // methods used for processing
+    @Override
+    public String dateRange() {
+        DateFormat df = DateFormat.getDateInstance();
+
+        if (start != null) {
+            dateInfo.put("start", df.format(start));
+        } else {
+            dateInfo.put("start", "from start of records ");
+        }
+
+        if (end != null) {
+            dateInfo.put("end", df.format(end));
+        } else {
+            dateInfo.put("end", "end of records");
+        }
+
+        return "";
+    }
+
+    public void processStat(Statistics stat, HashMap&lt;String, HashMap&gt; sections) {
+
+        HashMap&lt;String, HashMap&gt; subsections = sections.containsKey(stat.getSectionHeader()) ? sections.get(stat.getSectionHeader()) : new HashMap&lt;String, String&gt;();
+        Stat[] stats = stat.getStats();
+
+
+        for (int i = 0; i &lt; stats.length; i++) {
+            HashMap&lt;String, Object&gt; description = new HashMap&lt;String, Object&gt;();
+            if (stats[i].getReference() != null) {
+                description.put("reference", stats[i].getReference());
+            }
+
+            if (stats[i].getUnits() != null) {
+                description.put("units", stats[i].getUnits());
+            }
+
+            description.put("value", stats[i].getValue());
+
+            if (stats[i].getKey() != null) {
+                subsections.put(stats[i].getKey(), description);
+            }
+
+        }
+
+        sections.put(stat.getSectionHeader(), subsections);
+    }
+
+    @Override
+    public void setStartDate(Date date) {
+        this.start = (date == null ? null : new Date(date.getTime()));
+        if (start != null) {
+            DateFormat df = DateFormat.getDateInstance();
+            dateInfo.put("start", df.format(start));
+        }
+
+    }
+
+    @Override
+    public void setEndDate(Date date) {
+        this.end = (date == null ? null : new Date(date.getTime()));
+        if (end != null) {
+            DateFormat df = DateFormat.getDateInstance();
+            dateInfo.put("end", df.format(end));
+        }
+    }
+
+    @Override
+    public void setMainTitle(String string, String string1) {
+        this.basicInfo.put("name", string);
+        this.basicInfo.put("server", string1);
+    }
+
+    public HashMap&lt;String, String&gt; getBasicInfo() {
+        return this.basicInfo;
+    }
+
+    @Override
+    public void addBlock(Statistics stat) {
+        blocks.add(stat);
+    }
+
+    
+    @Override
+    public String render() {
+        Iterator&lt;Statistics&gt; statSets = blocks.iterator();
+        while (statSets.hasNext()) {
+            Statistics stats = statSets.next();
+            processStat(stats, this.completeStats);
+        }
+        return "";
+    }
+
+    public HashMap&lt;String, HashMap&gt; getStatistics() {
+        return this.completeStats;
+    }
+
+    public String getType() {
+        return this.type;
+    }
+
+    public void setType(String sType) {
+        this.type = sType;
+    }
+
+    public HashMap&lt;String, String&gt; getDateInfo() {
+        return this.dateInfo;
+    }
+}

Modified: modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatsEntity.java
==============================================================================
--- modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatsEntity.java	(original)
+++ modules/dspace-rest/trunk/src/main/java/org/dspace/rest/entities/StatsEntity.java	Wed Jul 20 18:50:02 2011
@@ -5,13 +5,14 @@
  *
  * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
  */
-
 package org.dspace.rest.entities;
 
 import org.sakaiproject.entitybus.entityprovider.annotations.EntityId;
 import org.dspace.core.ConfigurationManager;
 import org.dspace.core.Context;
 import java.io.BufferedReader;
+import java.io.FileReader;
+import java.io.FileNotFoundException;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.IOException;
@@ -37,7 +38,8 @@
     @EntityId
     private int id;
     HashMap generalStats = new HashMap&lt;String, String&gt;();
-
+    private String description;
+    private String type = "monthly";
 
     // TODO inspect and add additional fields
     public StatsEntity(Context context) throws SQLException {
@@ -48,7 +50,16 @@
             System.out.println(ex.getMessage());
         }
     }
-    ;
+
+    // TODO inspect and add additional fields
+    public StatsEntity(Context context, File file) throws SQLException {
+
+        try {
+            generateStatistics(context, file);
+        } catch (Exception ex) {
+            System.out.println(ex.getMessage());
+        }
+    }
 
     public StatsEntity() {
         generalStats.put("browse_mini", "1");
@@ -79,6 +90,81 @@
         return "id:" + this.id;
     }
 
+    private void generateStatistics(Context context, File file) {
+        if (file.getAbsolutePath().contains("general")) {
+            this.type = "general";
+        }
+
+        description = file.getAbsolutePath().replaceAll("(.*report-)|(.ht.*)|(general-)", "");
+        try {
+            this.id = Integer.parseInt(description.replaceAll("[^0-9]", ""));
+        } catch (NumberFormatException ex) {
+            this.id = 0;
+        }
+
+        StringBuffer contents = new StringBuffer();
+        BufferedReader reader = null;
+
+        try {
+            reader = new BufferedReader(new FileReader(file));
+            String text = null;
+
+            // repeat until all lines is read
+            while ((text = reader.readLine()) != null) {
+                contents.append(text).append(System.getProperty(
+                        "line.separator"));
+            }
+        } catch (FileNotFoundException e) {
+            e.printStackTrace();
+        } catch (IOException e) {
+            e.printStackTrace();
+        } finally {
+            try {
+                if (reader != null) {
+                    reader.close();
+                }
+            } catch (IOException e) {
+                e.printStackTrace();
+            }
+        }
+
+
+//        System.out.println(contents);
+        String filteredReport = contents.toString();
+        filteredReport = filteredReport.replaceAll("&lt;div.*?&gt;.*?&lt;/div&gt;", "");
+        filteredReport = filteredReport.replaceAll("&lt;style.*?&gt;.*?&lt;/style&gt;", "");
+        filteredReport = filteredReport.replaceAll("&lt;th.*?&gt;.*?&lt;/th&gt;", "");
+        filteredReport = filteredReport.replaceAll("\t", "");
+        filteredReport = filteredReport.replaceAll("(&lt;td.*?&gt;)(.*?)(&lt;/td.*?&gt;)(&lt;td.*?&gt;)(.*?)(&lt;/td.*?&gt;)", "$2::$5::");
+        filteredReport = filteredReport.replaceAll("&lt;.*?&gt;", "");
+        String[] splittedReport = filteredReport.split("::");
+
+
+        for (int x = 0; x
+                &lt; splittedReport.length; x++) {
+            generalStats.put(splittedReport[x], splittedReport[x + 1]);
+        }
+
+        try {
+            context.complete();
+        } catch (SQLException ex) {
+            ex.printStackTrace();
+        }
+
+    }
+
+    public String getDescription() {
+        return this.description;
+
+
+    }
+
+    public String getType() {
+        return this.type;
+
+
+    }
+
     private void showStatistics(Context context)
             throws IOException, SQLException {
         StringBuffer report = new StringBuffer();
@@ -93,6 +179,8 @@
         InputStreamReader ir = null;
         BufferedReader br = null;
 
+
+
         try {
             List monthsList = new ArrayList();
 
@@ -104,17 +192,28 @@
 
             // if no date is passed then we want to get the most recent general
             // report
+
+
             if (date == null) {
                 SimpleDateFormat sdf = new SimpleDateFormat("yyyy'-'M'-'dd");
                 Date mostRecentDate = null;
 
-                for (int i = 0; i &lt; reports.length; i++) {
+
+
+                for (int i = 0; i
+                        &lt; reports.length; i++) {
                     Matcher matchGeneral = general.matcher(reports[i].getName());
+
+
                     if (matchGeneral.matches()) {
                         Date parsedDate = null;
 
+
+
                         try {
                             parsedDate = sdf.parse(matchGeneral.group(1).trim());
+
+
                         } catch (ParseException e) {
                             // FIXME: currently no error handling
                         }
@@ -122,11 +221,15 @@
                         if (mostRecentDate == null) {
                             mostRecentDate = parsedDate;
                             reportFile = reports[i];
+
+
                         }
 
                         if (parsedDate != null &amp;&amp; parsedDate.compareTo(mostRecentDate) &gt; 0) {
                             mostRecentDate = parsedDate;
                             reportFile = reports[i];
+
+
                         }
                     }
                 }
@@ -136,31 +239,47 @@
             if (date != null) {
                 String desiredReport = "report-" + date + ".html";
 
-                for (int i = 0; i &lt; reports.length; i++) {
+
+
+                for (int i = 0; i
+                        &lt; reports.length; i++) {
                     if (reports[i].getName().equals(desiredReport)) {
                         reportFile = reports[i];
+
+
                     }
                 }
             }
 
             if (reportFile == null) {
                 System.out.println(" blank stats ");
-            }
 
-            // finally, build the list of report dates
+
+            } // finally, build the list of report dates
             SimpleDateFormat sdf = new SimpleDateFormat("yyyy'-'M");
-            for (int i = 0; i &lt; reports.length; i++) {
+
+
+            for (int i = 0; i
+                    &lt; reports.length; i++) {
                 Matcher matchReport = monthly.matcher(reports[i].getName());
+
+
                 if (matchReport.matches()) {
                     Date parsedDate = null;
 
+
+
                     try {
                         parsedDate = sdf.parse(matchReport.group(1).trim());
+
+
                     } catch (ParseException e) {
                         // FIXME: currently no error handling
                     }
 
                     monthsList.add(parsedDate);
+
+
                 }
             }
 
@@ -169,24 +288,34 @@
 
             Arrays.sort(months);
 
+
+
             try {
                 fir = new FileInputStream(reportFile.getPath());
                 ir = new InputStreamReader(fir, "UTF-8");
                 br = new BufferedReader(ir);
+
+
             } catch (IOException e) {
                 // FIXME: no error handing yet
                 throw new RuntimeException(e.getMessage(), e);
-            }
 
-            // FIXME: there's got to be a better way of doing this
+
+            } // FIXME: there's got to be a better way of doing this
             String line = null;
+
+
             while ((line = br.readLine()) != null) {
                 report.append(line);
+
+
             }
         } finally {
             if (br != null) {
                 try {
                     br.close();
+
+
                 } catch (IOException ioe) {
                 }
             }
@@ -194,6 +323,8 @@
             if (ir != null) {
                 try {
                     ir.close();
+
+
                 } catch (IOException ioe) {
                 }
             }
@@ -201,6 +332,8 @@
             if (fir != null) {
                 try {
                     fir.close();
+
+
                 } catch (IOException ioe) {
                 }
             }
@@ -214,99 +347,145 @@
         filteredReport = filteredReport.replaceAll("(&lt;td.*?&gt;)(.*?)(&lt;/td.*?&gt;)(&lt;td.*?&gt;)(.*?)(&lt;/td.*?&gt;)", "$2::$5::");
         filteredReport = filteredReport.replaceAll("&lt;.*?&gt;", "");
         String[] splittedReport = filteredReport.split("::");
-        for (int x = 0; x &lt; splittedReport.length; x++) {
+
+
+        for (int x = 0; x
+                &lt; splittedReport.length; x++) {
             generalStats.put(splittedReport[x], splittedReport[x + 1]);
+
+
         }
         context.complete();
-    }
 
 
+    }
+
     // FIXME: the methods here are written this way as the xml support is not
     // working for hashmaps in sakai completely
     public String getbrowse_mini() {
         return this.generalStats.get("browse_mini").toString();
+
+
     }
 
     public String getCommunityUpdates() {
         return this.generalStats.get("Community Updates").toString();
+
+
     }
 
     public String getWorkflowStarts() {
         return this.generalStats.get("Workflow Starts").toString();
+
+
     }
 
     public String getWarnings() {
         return this.generalStats.get("Warnings").toString();
+
+
     }
 
     public String getSubcommunitiesAdded() {
         return this.generalStats.get("Sub Community Added").toString();
+
+
     }
 
     public String getOAIRequests() {
         return this.generalStats.get("OAI Requests").toString();
+
+
     }
 
     public String getbrowse() {
         return this.generalStats.get("browse").toString();
+
+
     }
 
     public String getBitstreamViews() {
         return this.generalStats.get("Bitstream Views").toString();
+
+
     }
 
     public String getBitstreamupdates() {
         return this.generalStats.get("Bitstream Updates").toString();
+
+
     }
 
     public String getSearchesPerformed() {
         return this.generalStats.get("Searches Performed").toString();
+
+
     }
 
     public String getWorkSpaceItemViews() {
         return this.generalStats.get("Workspace Item Views").toString();
+
+
     }
 
     public String getBundlesCreated() {
         return this.generalStats.get("Bundles Created").toString();
+
+
     }
 
     public String getUserLogins() {
         return this.generalStats.get("User Logins").toString();
+
+
     }
 
     public String getCollectionViews() {
         return this.generalStats.get("Collection Views").toString();
+
+
     }
 
     public String getBundleUpdates() {
         return this.generalStats.get("Bundle Updates").toString();
+
+
     }
 
     public String getBitstreamsAdded() {
         return this.generalStats.get("Bitstreams Added").toString();
+
+
     }
 
     public String getItemViews() {
         return this.generalStats.get("Item Views").toString();
+
+
     }
 
     public String getItemsArchived() {
         return this.generalStats.get("Items Archived").toString();
+
+
     }
 
     public String getAllItems() {
         return this.generalStats.get("All Items").toString();
+
+
     }
 
     public String getCommunityviews() {
         return this.generalStats.get("Community Views").toString();
+
+
     }
 
     public String getUserHomePageViews() {
         return this.generalStats.get("User Home Page Views").toString();
-    }
 
+    }
 //    FIXME: this method will work later
 //    public HashMap&lt;String, String&gt; getStats() {
 //        return this.generalStats;

Modified: modules/dspace-rest/trunk/src/main/java/org/dspace/rest/providers/StatsProvider.java
==============================================================================
--- modules/dspace-rest/trunk/src/main/java/org/dspace/rest/providers/StatsProvider.java	(original)
+++ modules/dspace-rest/trunk/src/main/java/org/dspace/rest/providers/StatsProvider.java	Wed Jul 20 18:50:02 2011
@@ -5,12 +5,12 @@
  *
  * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
  */
-
 package org.dspace.rest.providers;
 
 import java.util.ArrayList;
 import java.util.List;
-
+import org.dspace.core.ConfigurationManager;
+import java.io.File;
 import org.sakaiproject.entitybus.EntityReference;
 import org.sakaiproject.entitybus.entityprovider.CoreEntityProvider;
 import org.sakaiproject.entitybus.entityprovider.EntityProviderManager;
@@ -20,6 +20,11 @@
 import java.sql.SQLException;
 import org.apache.log4j.Logger;
 import org.dspace.rest.entities.*;
+import org.dspace.app.statistics.ReportGenerator;
+import org.dspace.rest.entities.StatReport;
+import org.dspace.app.statistics.Report;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
 
 /**
  * Provides interface for access to basic statistic data
@@ -29,6 +34,8 @@
 public class StatsProvider extends AbstractBaseProvider implements CoreEntityProvider {
 
     private static Logger log = Logger.getLogger(UserProvider.class);
+    private Pattern analysisMonthlyPattern = Pattern.compile("dspace-log-monthly-([0-9][0-9][0-9][0-9]-[0-9]+)\\.dat");
+    private Pattern analysisGeneralPattern = Pattern.compile("dspace-log-general-([0-9]+-[0-9]+-[0-9]+)\\.dat");
 
     public StatsProvider(EntityProviderManager entityProviderManager) throws SQLException {
         super(entityProviderManager);
@@ -88,17 +95,37 @@
 
         refreshParams(context);
 
+        List&lt;Object&gt; stat = new ArrayList&lt;Object&gt;();
+        File reportDir = new File(ConfigurationManager.getProperty("log.dir"));
+
+        ReportGenerator rg = new ReportGenerator();
+        // iterate through files in report directory and load each
+        File[] reports = reportDir.listFiles();
         try {
-            List&lt;Object&gt; stat = new ArrayList&lt;Object&gt;();
-            stat.add(new StatsEntity(context));
+            for (File report : reports) {
+                Matcher genMatcher = analysisGeneralPattern.matcher(report.getName());
+                Matcher monMatcher = analysisMonthlyPattern.matcher(report.getName());
+                StatReport statReport = new StatReport();
+                if (genMatcher.matches()) {
+                    statReport.setType("general");
+                    rg.processReport(context, statReport, report.getAbsolutePath());
+                    stat.add(statReport);
+                } else if (monMatcher.matches()) {
+                    statReport.setType("monthly");
+                    rg.processReport(context, statReport, report.getAbsolutePath());
+                    stat.add(statReport);
+                }
+            }
+
             removeConn(context);
             return stat;
         } catch (SQLException ex) {
             throw new EntityException("Internal Server Error", "SQL Problem", 500);
+        } catch (Exception ex) {
+            throw new EntityException("Internal Server Error", "Log file Problem", 500);
         }
     }
 
-
     // TODO CHANGE
     public Object getSampleEntity() {
         return new CollectionEntity();

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27827510">[DSpace-changelog] r6497 -
	dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Kubrick</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-20 18:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mwoodiupui
Date: Wed Jul 20 18:37:45 2011
New Revision: 6497

Log:
[DS-717] Remove duplicated template in Kubrick theme

Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Kubrick/Kubrick.xsl

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Kubrick/Kubrick.xsl
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Kubrick/Kubrick.xsl	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-webapp/src/main/webapp/themes/Kubrick/Kubrick.xsl	Wed Jul 20 18:37:45 2011
@@ -650,21 +650,6 @@
     &lt;!-- Generate the thunbnail, if present, from the file section --&gt;
     &lt;xsl:template match="mets:fileGrp[@USE='THUMBNAIL']" mode="itemMetadataPopup-DIM"&gt;
         &lt;div class="popup-artifact-preview"&gt;
-            &lt;!-- manakin-voss version: &lt;a href="{ancestor::mets:METS/@OBJID}"&gt; --&gt;
-            &lt;a href="{ancestor::dri:object/@url}"&gt; 
-                &lt;img alt="Thumbnail"&gt;
-                    &lt;xsl:attribute name="src"&gt;
-                        &lt;xsl:value-of select="mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href" /&gt;
-                    &lt;/xsl:attribute&gt;
-                &lt;/img&gt;
-            &lt;/a&gt;
-        &lt;/div&gt;
-    &lt;/xsl:template&gt;
-    
-    
-    &lt;!-- Generate the thunbnail, if present, from the file section --&gt;
-    &lt;xsl:template match="mets:fileGrp[@USE='THUMBNAIL']" mode="itemMetadataPopup-DIM"&gt;
-        &lt;div class="popup-artifact-preview"&gt;
             &lt;a href="{ancestor::mets:METS/@OBJID}"&gt;
                 &lt;img alt="Thumbnail"&gt;
                     &lt;xsl:attribute name="src"&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27821145">[DSpace-changelog] r6496 -
	dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/cocoon</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-19 15:58</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: tdonohue
Date: Tue Jul 19 15:58:10 2011
New Revision: 6496

Log:
Fix for DS-957 : themepath override regex wrong (XMLUI)

Modified:
   dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/cocoon/ThemeMatcher.java

Modified: dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/cocoon/ThemeMatcher.java
==============================================================================
--- dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/cocoon/ThemeMatcher.java	(original)
+++ dspace/trunk/dspace-xmlui/dspace-xmlui-api/src/main/java/org/dspace/app/xmlui/cocoon/ThemeMatcher.java	Tue Jul 19 15:58:10 2011
@@ -72,7 +72,7 @@
 					
 					// Allow: allow all letters and numbers plus periods (but not consecutive), 
 					// dashes, underscores, and forward slashes 
-					if (!themePathOverride.matches("^[a-zA-V0-9][a-zA-Z0-9/_\\-]*/?$")) {
+					if (!themePathOverride.matches("^[a-zA-Z0-9][a-zA-Z0-9/_\\-]*/?$")) {
 						
 						throw new IllegalArgumentException("The user specified theme path, \""+themePathOverride+"\", may be " +
 								"an exploit attempt. To use this feature please limit your theme paths to only letters " +

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27817202">[DSpace-changelog] r6495 -
	dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-18 20:37</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mwoodiupui
Date: Mon Jul 18 20:37:26 2011
New Revision: 6495

Log:
Squash use of deprecated Context.setIgnoreAuthorization (and tidy some doc comments)

Modified:
   dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterManager.java

Modified: dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterManager.java
==============================================================================
--- dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterManager.java	(original)
+++ dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/MediaFilterManager.java	Mon Jul 18 20:37:26 2011
@@ -45,7 +45,7 @@
 
 /**
  * MediaFilterManager is the class that invokes the media/format filters over the
- * repository's content. a few command line flags affect the operation of the
+ * repository's content. A few command line flags affect the operation of the
  * MFM: -v verbose outputs all extracted text to STDOUT; -f force forces all
  * bitstreams to be processed, even if they have been before; -n noindex does not
  * recreate index after processing bitstreams; -i [identifier] limits processing 
@@ -325,7 +325,7 @@
             c = new Context();
 
             // have to be super-user to do the filtering
-            c.setIgnoreAuthorization(true);
+            c.turnOffAuthorisationSystem();
 
             // now apply the filters
             if (identifier == null)
@@ -490,8 +490,8 @@
     }
 
     /**
-     * iterate through the item's bitstreams in the ORIGINAL bundle, applying
-     * filters if possible
+     * Iterate through the item's bitstreams in the ORIGINAL bundle, applying
+     * filters if possible.
      * 
      * @return true if any bitstreams processed, 
      *         false if none
@@ -515,10 +515,10 @@
     }
 
     /**
-     * Attempt to filter a bitstream
+     * Attempt to filter a bitstream.
      * 
      * An exception will be thrown if the media filter class cannot be
-     * instantiated, exceptions from filtering will be logged to STDOUT and
+     * instantiated.  Exceptions from filtering will be logged to STDOUT and
      * swallowed.
      * 
      * @return true if bitstream processed, 
@@ -573,7 +573,7 @@
                 	String checksum = myBitstream.getChecksum() + " ("+myBitstream.getChecksumAlgorithm()+")";
                 	int assetstore = myBitstream.getStoreNumber();
    
-                	// Printout helpfull information to find the errored bistream.
+                	// Printout helpful information to find the errored bitstream.
                 	System.out.println("ERROR filtering, skipping bitstream:\n");
                 	System.out.println("\tItem Handle: "+ handle);
                 	for (Bundle bundle : bundles)
@@ -666,7 +666,7 @@
     }
     
     /**
-     * processBitstream is a utility class that calls the virtual methods
+     * A utility class that calls the virtual methods
      * from the current MediaFilter class.
      * It scans the bitstreams in an item, and decides if a bitstream has 
      * already been filtered, and if not or if overWrite is set, invokes the 
@@ -797,7 +797,7 @@
     
     /**
      * Return the item that is currently being processed/filtered
-     * by the MediaFilterManager
+     * by the MediaFilterManager.
      * &lt;p&gt;
      * This allows FormatFilters to retrieve the Item object
      * in case they need access to item-level information for their format
@@ -811,7 +811,7 @@
     }
     
     /**
-     * Check whether or not to skip processing the given identifier
+     * Check whether or not to skip processing the given identifier.
      * 
      * @param identifier
      *            identifier (handle) of a community, collection or item

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27817162">[DSpace-changelog] r6494 -
	dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-18 20:25</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mwoodiupui
Date: Mon Jul 18 20:25:31 2011
New Revision: 6494

Log:
[DS-938] Throw exception on error, so MediaFilterManager will finger the 
problematic file.


Modified:
   dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/PowerPointFilter.java
   dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/WordFilter.java

Modified: dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/PowerPointFilter.java
==============================================================================
--- dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/PowerPointFilter.java	(original)
+++ dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/PowerPointFilter.java	Mon Jul 18 20:25:31 2011
@@ -17,7 +17,6 @@
 
 import org.apache.log4j.Logger;
 
-
 /*
  * TODO: Allow user to configure extraction of only text or only notes
  * 
@@ -34,7 +33,7 @@
 
     /**
      * @return String bundle name
-     *
+     * 
      */
     public String getBundleName()
     {
@@ -42,9 +41,9 @@
     }
 
     /**
-     * @return String bitstreamformat
-     *
-     *  TODO: Check that this is correct
+     * @return String bitstream format
+     * 
+     *         TODO: Check that this is correct
      */
     public String getFormatString()
     {
@@ -62,39 +61,40 @@
     /**
      * @param source
      *            source input stream
-     *
+     * 
      * @return InputStream the resulting input stream
      */
     public InputStream getDestinationStream(InputStream source)
             throws Exception
     {
-        
+
         try
         {
-	  
-            String extractedText = null;  
-	    POITextExtractor pptExtractor = 
-		new ExtractorFactory().createExtractor(source);
-	
+
+            String extractedText = null;
+            new ExtractorFactory();
+            POITextExtractor pptExtractor = ExtractorFactory
+                    .createExtractor(source);
+
             // PowerPoint XML files and legacy format PowerPoint files
             // require different classes and APIs for text extraction
 
-            // If this is a PowerPoint XML file, extract accordingly  
-	    if (pptExtractor instanceof XSLFPowerPointExtractor)
-	    {  
-                
+            // If this is a PowerPoint XML file, extract accordingly
+            if (pptExtractor instanceof XSLFPowerPointExtractor)
+            {
+
                 // The true method arguments indicate that text from
                 // the slides and the notes is desired
-		extractedText = 
-                       ((XSLFPowerPointExtractor)pptExtractor).getText(true, true);
-	    }    
-            
+                extractedText = ((XSLFPowerPointExtractor) pptExtractor)
+                        .getText(true, true);
+            }
+
             // Legacy PowerPoint files
             else if (pptExtractor instanceof PowerPointExtractor)
             {
 
-                extractedText = ((PowerPointExtractor)pptExtractor).getText() 
-                    + " " + ((PowerPointExtractor)pptExtractor).getNotes();
+                extractedText = ((PowerPointExtractor) pptExtractor).getText()
+                        + " " + ((PowerPointExtractor) pptExtractor).getNotes();
 
             }
             if (extractedText != null)
@@ -110,14 +110,15 @@
                 byte[] textBytes = extractedText.getBytes();
                 ByteArrayInputStream bais = new ByteArrayInputStream(textBytes);
 
-                return bais; 
+                return bais;
             }
-	}
-	catch(Exception e)
-	{
-	    log.error("Error filtering bitstream: " + e.getMessage(), e);
-	}
-	
+        }
+        catch (Exception e)
+        {
+            log.error("Error filtering bitstream: " + e.getMessage(), e);
+            throw e;
+        }
+
         return null;
     }
 }

Modified: dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/WordFilter.java
==============================================================================
--- dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/WordFilter.java	(original)
+++ dspace/trunk/dspace-api/src/main/java/org/dspace/app/mediafilter/WordFilter.java	Mon Jul 18 20:25:31 2011
@@ -19,7 +19,7 @@
 /*
  * 
  * to do: helpful error messages - can't find mediafilter.cfg - can't
- * instantiate filter - bitstream format doesn't exist
+ * instantiate filter - bitstream format doesn't exist.
  *  
  */
 public class WordFilter extends MediaFilter
@@ -89,9 +89,10 @@
         } 
         catch (IOException ioe)
         {
-             System.out.println("Invalid Word Format");
-             log.error("Error detected - Word File format not recognized: " + ioe.getMessage(), ioe); 
+            System.out.println("Invalid Word Format");
+            log.error("Error detected - Word File format not recognized: "
+                    + ioe.getMessage(), ioe);
+            throw ioe;
         }
-        return null;
     }
 }

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27815869">[DSpace-changelog] r6493 - in
	sandbox/sword-client-prototype/dspace-sword-client:
	dspace-sword-client-api/src/main/java/org/dspace/sword/client
	dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions
	dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient
	dspace-sword-client-xmlui-api/src/main/resources/aspects/SwordClient/i18n</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-18 15:19</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: robintaylor
Date: Mon Jul 18 15:19:19 2011
New Revision: 6493

Log:
Update to sandbox sword-client-prototype - internationalise messages

Modified:
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/DSpaceSwordClient.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/ServiceDocumentHelper.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/HttpException.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/InvalidHandleException.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackageFormatException.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackagerException.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/DepositAction.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/Navigation.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionAction.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionTransformer.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingAction.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingTransformer.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetAction.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetTransformer.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SwordResponseTransformer.java
   sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/resources/aspects/SwordClient/i18n/messages.xml

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/DSpaceSwordClient.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/DSpaceSwordClient.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/DSpaceSwordClient.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client;
 
 import org.apache.commons.lang.StringUtils;
@@ -27,7 +35,7 @@
 import java.util.UUID;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */
@@ -106,18 +114,7 @@
         if (status.getCode() == 200)
         {
             log.info("Sword Service Document successfully retrieved from " + serviceDocUrl);
-
-            String xml = sd.marshall();
-            String validateXml = xml;
-
-            validateXml = validateXml.replaceAll("&amp;", "&amp;amp;");
-            validateXml = validateXml.replaceAll("&lt;", "&amp;lt;");
-            validateXml = validateXml.replaceAll("&gt;", "&amp;gt;");
-            validateXml = validateXml.replaceAll("\"", "&amp;quot;");
-            validateXml = validateXml.replaceAll("'", "&amp;apos;");
-
             return sd;
-
         }
         else
         {
@@ -155,7 +152,7 @@
     }
 
 
-    public void deposit(Context context, String handle) throws InvalidHandleException, PackagerException, SWORDClientException, PackageFormatException
+    public void deposit(Context context, String handle) throws InvalidHandleException, PackagerException, SWORDClientException, PackageFormatException, HttpException
     {
         File file = new File(filename);
         createPackage(context, handle, file);
@@ -214,19 +211,23 @@
      * @throws org.purl.sword.client.SWORDClientException
      *
      */
-    public String sendMessage() throws SWORDClientException
+    public String sendMessage() throws SWORDClientException, HttpException
     {
         message.setFilepath(filename);
-
         DepositResponse resp = client.postFile(message);
+        Status status = client.getStatus();
 
-        // Now deal with the response. For the moment just get the XML.
-        String xml = resp.marshall();
-
-        // todo : check for errors ?
-
-        SWORDEntry se = resp.getEntry();
-        return se.getId();
+		if ((status.getCode() == 201) || (status.getCode() == 202))
+        {
+			SWORDEntry se = resp.getEntry();
+            return se.getId();
+        }
+        else
+        {
+            String error = status.getCode() + " " + status.getMessage() + " - " + resp.getEntry().getSummary().getContent();
+			log.info("Error depositing Sword package : " + error);
+            throw new HttpException(error);
+        }
 
     }
 

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/ServiceDocumentHelper.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/ServiceDocumentHelper.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/ServiceDocumentHelper.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+ /**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client;
 
 import org.dspace.core.ConfigurationManager;
@@ -11,7 +19,7 @@
 import java.util.List;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/HttpException.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/HttpException.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/HttpException.java	Mon Jul 18 15:19:19 2011
@@ -1,7 +1,15 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client.exceptions;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/InvalidHandleException.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/InvalidHandleException.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/InvalidHandleException.java	Mon Jul 18 15:19:19 2011
@@ -1,7 +1,15 @@
+ /**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client.exceptions;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackageFormatException.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackageFormatException.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackageFormatException.java	Mon Jul 18 15:19:19 2011
@@ -1,7 +1,15 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client.exceptions;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackagerException.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackagerException.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-api/src/main/java/org/dspace/sword/client/exceptions/PackagerException.java	Mon Jul 18 15:19:19 2011
@@ -1,7 +1,15 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.sword.client.exceptions;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 15/02/11
  * Time: 21:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/DepositAction.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/DepositAction.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/DepositAction.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.log4j.Logger;
@@ -5,13 +13,14 @@
 import org.dspace.app.xmlui.wing.Message;
 import org.dspace.core.Context;
 import org.dspace.sword.client.*;
+import org.dspace.sword.client.exceptions.HttpException;
 import org.dspace.sword.client.exceptions.InvalidHandleException;
 import org.dspace.sword.client.exceptions.PackageFormatException;
 import org.dspace.sword.client.exceptions.PackagerException;
 import org.purl.sword.client.SWORDClientException;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 27/03/11
  * Time: 15:47
  */
@@ -61,6 +70,12 @@
             result.setOutcome(false);
             result.setMessage(T_error.parameterize(e.getMessage()));
         }
+        catch (HttpException e)
+        {
+            log.error("HttpException encountered " + e.getMessage(), e);
+            result.setOutcome(false);
+            result.setMessage(T_error.parameterize(e.getMessage()));
+        }
 
 
         return result;

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/Navigation.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/Navigation.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/Navigation.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.caching.CacheableProcessingComponent;

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionAction.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionAction.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionAction.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.Request;
@@ -10,7 +18,7 @@
 import org.purl.sword.base.ServiceDocument;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 21/03/11
  * Time: 22:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionTransformer.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionTransformer.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectCollectionTransformer.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+ /**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.ObjectModelHelper;
@@ -32,7 +40,18 @@
     private static final Message T_trail = message("xmlui.swordclient.SelectCollection.trail");
     private static final Message T_main_head = message("xmlui.swordclient.general.main_head");
 
-    private static final Message T_submit_save = message("xmlui.general.save");
+    private static final Message T_collection_head = message("xmlui.swordclient.SelectCollection.collection_head");
+    private static final Message T_collection_title = message("xmlui.swordclient.SelectCollection.collection_title");
+    private static final Message T_collection_policy = message("xmlui.swordclient.SelectCollection.collection policy");
+    private static final Message T_collection_mediation = message("xmlui.swordclient.SelectCollection.collection_mediation");
+    private static final Message T_collection_file_types = message("xmlui.swordclient.SelectCollection.collection_file_types");
+    private static final Message T_collection_package_formats = message("xmlui.swordclient.SelectCollection.collection_package_formats");
+    private static final Message T_collection_deposit_button = message("xmlui.swordclient.SelectCollection.collection_deposit_button");
+    private static final Message T_sub_service_target = message("xmlui.swordclient.SelectCollection.sub_service_target");
+    private static final Message T_sub_service_target_button = message("xmlui.swordclient.SelectCollection.sub_service_target_button");
+
+
+
     private static final Message T_submit_cancel = message("xmlui.general.cancel");
 
     /**
@@ -62,43 +81,41 @@
 
         for (Collection collection : collections)
         {
-            // todo : remove hardcoding and get the text values from the messages file
-
             // Now we need another list for the individual collection, each of which encompasses a form.
             List collectionList = collectionsList.addList(collection + "List", List.TYPE_FORM);
 
             // Add a header to each individual collection List.
-            collectionList.setHead("Collection: " + collection.getLocation());
+            collectionList.setHead(T_collection_head.parameterize(collection.getLocation()));
 
             // Now add another list of the remaining collection parameters.
             List paramsList = collectionList.addList(collection + "Params", List.TYPE_BULLETED);
 
-            paramsList.addItem().addContent("Title: " + collection.getTitle());
-            paramsList.addItem().addContent("Collection policy: " + collection.getCollectionPolicy());
-            paramsList.addItem().addContent("Mediation: " + collection.getMediation());
+            paramsList.addItem().addContent(T_collection_title.parameterize(collection.getTitle()));
+            paramsList.addItem().addContent(T_collection_policy.parameterize(collection.getCollectionPolicy()));
+            paramsList.addItem().addContent(T_collection_mediation.parameterize(Boolean.toString(collection.getMediation())));
 
             String[] fileTypes = collection.getAccepts();
             String fileTypesString = arrayToString(fileTypes);
-            paramsList.addItem().addContent("File types: " + fileTypesString);
+            paramsList.addItem().addContent(T_collection_file_types.parameterize(fileTypesString));
 
             String[] packageFormats = ServiceDocumentHelper.getPackageFormats(collection);
             String packageFormatsString = arrayToString(packageFormats);
-            paramsList.addItem().addContent("Package formats: " + packageFormatsString);
+            paramsList.addItem().addContent(T_collection_package_formats.parameterize(packageFormatsString));
 
             // Assuming there are available file types and package formats then add a deposit button.
             if ((fileTypes.length &gt; 0 ) &amp;&amp; (packageFormats.length &gt; 0))
             {
                 collectionList.addItem().addHidden("location").setValue(collection.getLocation());
-                collectionList.addItem().addButton("deposit").setValue("Deposit in this Collection");
+                collectionList.addItem().addButton("deposit").setValue(T_collection_deposit_button);
             }
 
             // If the collection contains a reference to  a 'sub service' then allow the user to select
             // the service doc for that sub service.
             if ((collection.getService() != null) &amp;&amp; (collection.getService().length() &gt; 0))
             {
-                collectionList.addItem().addContent("Sub Service Target: " + collection.getService());
+                collectionList.addItem().addContent(T_sub_service_target + collection.getService());
                 collectionList.addItem().addHidden("sub-service").setValue(collection.getService());
-                collectionList.addItem().addButton("sub-service").setValue("Get Sub Service Document");
+                collectionList.addItem().addButton("sub-service").setValue(T_sub_service_target_button);
             }
 
         }

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingAction.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingAction.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingAction.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.Request;
@@ -8,7 +16,7 @@
 import org.dspace.sword.client.exceptions.PackageFormatException;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 21/03/11
  * Time: 22:12
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingTransformer.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingTransformer.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectPackagingTransformer.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.ObjectModelHelper;
@@ -22,19 +30,25 @@
  * Date: 21-Sep-2010
  * Time: 13:44:28
  */
-public class SelectPackagingTransformer extends AbstractDSpaceTransformer {
-
-    private static Logger log = Logger.getLogger(SelectPackagingTransformer.class);
-
+public class SelectPackagingTransformer extends AbstractDSpaceTransformer
+{
     private static final Message T_dspace_home = message("xmlui.general.dspace_home");
     private static final Message T_title = message("xmlui.swordclient.SelectCollection.title");
     private static final Message T_SwordCopy_trail = message("xmlui.swordclient.general.SwordCopy_trail");
     private static final Message T_trail = message("xmlui.swordclient.SelectCollection.trail");
     private static final Message T_main_head = message("xmlui.swordclient.general.main_head");
 
+    private static final Message T_collection_head = message("xmlui.swordclient.SelectPackagingAction.head");
+    private static final Message T_collection_title = message("xmlui.swordclient.SelectPackagingAction.title");
+    private static final Message T_collection_policy = message("xmlui.swordclient.SelectPackagingAction.policy");
+    private static final Message T_collection_mediation = message("xmlui.swordclient.SelectPackagingAction.mediation");
+    private static final Message T_collection_file_types = message("xmlui.swordclient.SelectPackagingAction.file_types");
+    private static final Message T_collection_package_formats = message("xmlui.swordclient.SelectPackagingAction.package_formats");
+
     private static final Message T_submit_next = message("xmlui.general.next");
     private static final Message T_submit_cancel = message("xmlui.general.cancel");
 
+    private static Logger log = Logger.getLogger(SelectPackagingTransformer.class);
 
     /**
      * Add a page title and trail links
@@ -65,22 +79,22 @@
 
         List collectionList = main.addList("collectionList", List.TYPE_FORM);
 
-        collectionList.setHead("Collection: " + location);
-        collectionList.addItem().addContent("Title: " + collection.getTitle());
-        collectionList.addItem().addContent("Collection policy: " + collection.getCollectionPolicy());
-        collectionList.addItem().addContent("Mediation: " + collection.getMediation());
+        collectionList.setHead(T_collection_head.parameterize(location));
+        collectionList.addItem().addContent(T_collection_title.parameterize(collection.getTitle()));
+        collectionList.addItem().addContent(T_collection_policy.parameterize(collection.getCollectionPolicy()));
+        collectionList.addItem().addContent(T_collection_mediation.parameterize(Boolean.toString(collection.getMediation())));
 
         Select fileType = collectionList.addItem().addSelect("fileType");
         for (String ft : fileTypes) {
             fileType.addOption(false, ft, ft);
         }
-        fileType.setLabel("File Type");
+        fileType.setLabel(T_collection_file_types);
 
         Select packageFormat = collectionList.addItem().addSelect("packageFormat");
         for (String pf : packageFormats) {
             packageFormat.addOption(false, pf, pf);
         }
-        packageFormat.setLabel("Package Format");
+        packageFormat.setLabel(T_collection_package_formats);
 
         Para buttonList = main.addPara();
         buttonList.addButton("submit_next").setValue(T_submit_next);

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetAction.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetAction.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetAction.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+ /**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.Request;
@@ -15,7 +23,7 @@
 import java.net.URL;
 
 /**
- * User: Robin
+ * User: Robin Taylor
  * Date: 08/02/11
  * Time: 21:41
  */

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetTransformer.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetTransformer.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SelectTargetTransformer.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+/**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.apache.cocoon.environment.ObjectModelHelper;
@@ -34,6 +42,16 @@
     private static final Message T_submit_next = message("xmlui.general.next");
     private static final Message T_submit_cancel = message("xmlui.general.cancel");
 
+    private static final Message T_url = message("xmlui.swordclient.SelectTarget.url");
+    private static final Message T_other_url = message("xmlui.swordclient.SelectTarget.other_url");
+    private static final Message T_username = message("xmlui.swordclient.SelectTarget.username");
+    private static final Message T_password = message("xmlui.swordclient.SelectTarget.password");
+    private static final Message T_on_behalf_of = message("xmlui.swordclient.SelectTarget.on_behalf_of");
+
+    private static final Message T_url_error = message("xmlui.swordclient.SelectTargetAction.url_error");
+    private static final Message T_username_error = message("xmlui.swordclient.SelectTargetAction.username_error");
+    private static final Message T_password_error = message("xmlui.swordclient.SelectTargetAction.password_error");
+
     private static Logger log = Logger.getLogger(SelectTargetTransformer.class);
 
 
@@ -90,37 +108,37 @@
                 source.addOption(false, target, target);
             }
         }
-        source.setLabel("URL");
+        source.setLabel(T_url);
 
         Text otherUrl = targetDetails.addItem().addText("otherUrl");
-        otherUrl.setLabel("Alternative URL");
+        otherUrl.setLabel(T_other_url);
         otherUrl.setValue(otherUrlValue);
         if (errors.contains("otherUrl"))
         {
-            otherUrl.addError("Invalid URL");
+            otherUrl.addError(T_url_error);
         }
 
         Text username = targetDetails.addItem().addText("username");
         username.setRequired();
-        username.setLabel("Username");
+        username.setLabel(T_username);
         username.setValue(usernameValue);
         if (errors.contains("username"))
         {
-            username.addError("Invalid username");
+            username.addError(T_username_error);
         }
 
         Password password = targetDetails.addItem().addPassword("password");
         password.setRequired();
-        password.setLabel("Password");
+        password.setLabel(T_password);
         // Comment - Element Password doesn't allow me to set a value, don't know why not.
         //password.setValue(passwordValue);
         if (errors.contains("password"))
         {
-            password.addError("Invalid password");
+            password.addError(T_password_error);
         }
 
         Text onBehalfOf = targetDetails.addItem().addText("onBehalfOf");
-        onBehalfOf.setLabel("On behalf of");
+        onBehalfOf.setLabel(T_on_behalf_of);
 
         Para buttonList = main.addPara();
         buttonList.addButton("submit_next").setValue(T_submit_next);

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SwordResponseTransformer.java
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SwordResponseTransformer.java	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/java/org/dspace/app/xmlui/aspect/swordclient/SwordResponseTransformer.java	Mon Jul 18 15:19:19 2011
@@ -1,3 +1,11 @@
+ /**
+ * The contents of this file are subject to the license and copyright
+ * detailed in the LICENSE and NOTICE files at the root of the source
+ * tree and available online at
+ *
+ * <a href="http://www.dspace.org/license/" target="_new">http://www.dspace.org/license/</a>
+ */
+
 package org.dspace.app.xmlui.aspect.swordclient;
 
 import org.dspace.app.xmlui.cocoon.AbstractDSpaceTransformer;
@@ -24,8 +32,6 @@
     private static final Message T_main_head = message("xmlui.swordclient.general.main_head");
 
 
-
-
     public void addPageMeta(PageMeta pageMeta) throws WingException
     {
         pageMeta.addMetadata("title").addContent(T_title);

Modified: sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/resources/aspects/SwordClient/i18n/messages.xml
==============================================================================
--- sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/resources/aspects/SwordClient/i18n/messages.xml	(original)
+++ sandbox/sword-client-prototype/dspace-sword-client/dspace-sword-client-xmlui-api/src/main/resources/aspects/SwordClient/i18n/messages.xml	Mon Jul 18 15:19:19 2011
@@ -29,22 +29,46 @@
     &lt;message key="xmlui.swordclient.general.SwordCopy_trail"&gt;Sword Copy&lt;/message&gt;
     &lt;message key="xmlui.swordclient.general.main_head"&gt;Copy item: {0}&lt;/message&gt;
 
+
     &lt;message key="xmlui.swordclient.SelectTarget.title"&gt;Sword copy target&lt;/message&gt;
     &lt;message key="xmlui.swordclient.SelectTarget.trail"&gt;Select target&lt;/message&gt;
-
-    &lt;message key="xmlui.swordclient.SelectTargetAction.url_error"&gt;Malformed URL&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTarget.url"&gt;URL&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTarget.other_url"&gt;Alternative URL&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTarget.username"&gt;Username&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTarget.password"&gt;Password&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTarget.on_behalf_of"&gt;On behalf of&lt;/message&gt;
+
+    &lt;message key="xmlui.swordclient.SelectTargetAction.url_error"&gt;Invalid URL&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTargetAction.username_error"&gt;Invalid username&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectTargetAction.password_error"&gt;Invalid password&lt;/message&gt;
     &lt;message key="xmlui.swordclient.SelectTargetAction.serviceDoc_error"&gt;Error fetching Sword Service Document: {0}&lt;/message&gt;
 
     &lt;message key="xmlui.swordclient.SelectCollection.title"&gt;Sword target collections&lt;/message&gt;
     &lt;message key="xmlui.swordclient.SelectCollection.trail"&gt;Select collections&lt;/message&gt;
-
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_head"&gt;Collection: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_title"&gt;Title: {0} &lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection policy"&gt;Policy: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_mediation"&gt;Mediation: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_file_types"&gt;File Types: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_package_formats"&gt;Package Formats: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.collection_deposit_button"&gt;Deposit in this location&lt;/message&gt;
+
+    &lt;message key="xmlui.swordclient.SelectCollection.sub_service_target"&gt;Sub Service target&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectCollection.sub_service_target_button"&gt;Get Sub Service Document&lt;/message&gt;
+
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.head"&gt;Collection:{0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.title"&gt;Title: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.policy"&gt;Policy: {0} &lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.mediation"&gt;Mediation:{0} &lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.file_types"&gt;File Type&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.SelectPackagingAction.package_formats"&gt;Package Format&lt;/message&gt;
     &lt;message key="xmlui.swordclient.SelectPackagingAction.packageFormat_error"&gt;Unsupported package format selected&lt;/message&gt;
 
     &lt;message key="xmlui.swordclient.DepositAction.success"&gt;Item successfully copied&lt;/message&gt;
     &lt;message key="xmlui.swordclient.DepositAction.package_error"&gt;Package format error&lt;/message&gt;
     &lt;message key="xmlui.swordclient.DepositAction.invalid_handle"&gt;Invalid handle&lt;/message&gt;
     &lt;message key="xmlui.swordclient.DepositAction.package_error"&gt;An error occurred creating the packaging object&lt;/message&gt;
-    &lt;message key="xmlui.swordclient.DepositAction.error"&gt;Error: {0}&lt;/message&gt;
+    &lt;message key="xmlui.swordclient.DepositAction.error"&gt;Error encountered during deposit: {0}&lt;/message&gt;
 
     &lt;message key="xmlui.swordclient.SwordResponse.title"&gt;Sword response&lt;/message&gt;
     &lt;message key="xmlui.swordclient.SwordResponse.trail"&gt;Sword response&lt;/message&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27812428">[DSpace-changelog] r6492 -
	dspace/branches/dspace-async-release/dspace/src/assemble</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-17 19:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Sun Jul 17 19:38:50 2011
New Revision: 6492

Log:
[DS-818] Asyncronous Release Prototype : Prototype Release Project that Assembles Sources from Modules

Removed:
   dspace/branches/dspace-async-release/dspace/src/assemble/release.xml
   dspace/branches/dspace-async-release/dspace/src/assemble/src-release.xml

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27812427">[DSpace-changelog] r6491 - in
	dspace/branches/dspace-async-release/dspace-release: . src
	src/assemble</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-17 19:38</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Sun Jul 17 19:38:16 2011
New Revision: 6491

Log:
[DS-818] Asyncronous Release Prototype : Prototype Release Project that Assembles Sources from Modules

Added:
   dspace/branches/dspace-async-release/dspace-release/
   dspace/branches/dspace-async-release/dspace-release/pom.xml
   dspace/branches/dspace-async-release/dspace-release/src/
   dspace/branches/dspace-async-release/dspace-release/src/assemble/
   dspace/branches/dspace-async-release/dspace-release/src/assemble/release.xml
   dspace/branches/dspace-async-release/dspace-release/src/assemble/src-release.xml

Added: dspace/branches/dspace-async-release/dspace-release/pom.xml
==============================================================================
--- (empty file)
+++ dspace/branches/dspace-async-release/dspace-release/pom.xml	Sun Jul 17 19:38:16 2011
@@ -0,0 +1,131 @@
+&lt;project xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>" xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>" xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/maven-v4_0_0.xsd" target="_new">http://maven.apache.org/maven-v4_0_0.xsd</a>"&gt;
+    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
+    &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+    &lt;artifactId&gt;dspace-release&lt;/artifactId&gt;
+    &lt;name&gt;DSpace Release Assembly&lt;/name&gt;
+    &lt;packaging&gt;pom&lt;/packaging&gt;
+    &lt;description&gt;
+        The DSpace Release project Packages the release-src and
+        release assemblies that will be distributed by the project.
+    &lt;/description&gt;
+    &lt;version&gt;1.8.0.ASYNC-SNAPSHOT&lt;/version&gt;
+    &lt;!--
+       A Parent POM that Maven inherits DSpace Default
+       POM atrributes from.
+    --&gt;
+    &lt;parent&gt;
+        &lt;groupId&gt;org.dspace&lt;/groupId&gt;
+        &lt;artifactId&gt;dspace-pom&lt;/artifactId&gt;
+        &lt;version&gt;10&lt;/version&gt;
+    &lt;/parent&gt;
+
+    &lt;!--
+         The Subversion repository location is used by Continuum to update against
+         when changes have occured, this spawns a new build cycle and releases snapshots
+         into the snapshot repository below.
+    --&gt;
+    &lt;scm&gt;
+        &lt;connection&gt;scm:svn:<a href="http://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/connection" target="_new">http://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/connection</a>&gt;
+        &lt;developerConnection&gt;scm:svn:<a href="https://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/developerConnection" target="_new">https://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/developerConnection</a>&gt;
+        &lt;url&gt;<a href="http://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/url" target="_new">http://scm.dspace.org/svn/repo/dspace/branches/dspace-async-release/dspace-release&lt;/url</a>&gt;
+    &lt;/scm&gt;
+
+    &lt;build&gt;
+        &lt;plugins&gt;
+         &lt;plugin&gt;
+            &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;
+            &lt;!-- Because of below bug, we are forced to use version 2.0-beta-9
+                 <a href="http://jira.codehaus.org/browse/MRELEASE-620" target="_new">http://jira.codehaus.org/browse/MRELEASE-620</a> --&gt;
+            &lt;version&gt;2.0-beta-9&lt;/version&gt;
+            &lt;configuration&gt;
+                &lt;!-- During release:perform, enable the "addons" profile --&gt;
+                &lt;releaseProfiles&gt;addons&lt;/releaseProfiles&gt;
+                &lt;goals&gt;deploy&lt;/goals&gt;
+                &lt;!-- Auto-Version all modules the same as the parent module --&gt;
+                &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;
+            &lt;/configuration&gt;
+         &lt;/plugin&gt;
+        &lt;/plugins&gt;
+    &lt;/build&gt;
+
+    &lt;profiles&gt;
+
+        &lt;!--
+         Use 'mvn package -Pdistributions' to create distributions
+         to upload to S.F.
+       --&gt;
+        &lt;profile&gt;
+            &lt;id&gt;distributions&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;build&gt;
+                &lt;plugins&gt;
+                    &lt;plugin&gt;
+                        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
+                        &lt;inherited&gt;false&lt;/inherited&gt;
+                        &lt;executions&gt;
+                            &lt;execution&gt;
+                                &lt;id&gt;distro-assembly&lt;/id&gt;
+                                &lt;phase&gt;package&lt;/phase&gt;
+                                &lt;goals&gt;
+                                    &lt;goal&gt;single&lt;/goal&gt;
+                                &lt;/goals&gt;
+                                &lt;configuration&gt;
+                                    &lt;descriptors&gt;
+                                        &lt;descriptor&gt;src/assemble/release.xml&lt;/descriptor&gt;
+                                        &lt;descriptor&gt;src/assemble/src-release.xml&lt;/descriptor&gt;
+                                    &lt;/descriptors&gt;
+                                    &lt;tarLongFileMode&gt;gnu&lt;/tarLongFileMode&gt;
+                                    &lt;finalName&gt;dspace-${pom.version}&lt;/finalName&gt;
+                                &lt;/configuration&gt;
+                            &lt;/execution&gt;
+                        &lt;/executions&gt;
+                    &lt;/plugin&gt;
+                &lt;/plugins&gt;
+            &lt;/build&gt;
+        &lt;/profile&gt;
+
+
+        &lt;profile&gt;
+            &lt;id&gt;assemble&lt;/id&gt;
+            &lt;activation&gt;
+                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
+            &lt;/activation&gt;
+            &lt;build&gt;
+                &lt;plugins&gt;
+                    &lt;!--  overall project assembly --&gt;
+                    &lt;plugin&gt;
+                        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
+                        &lt;version&gt;2.2-beta-1&lt;/version&gt;
+                        &lt;configuration&gt;
+                            &lt;descriptors&gt;
+                                &lt;descriptor&gt;src/assemble/src-release.xml&lt;/descriptor&gt;
+                                &lt;descriptor&gt;src/assemble/release.xml&lt;/descriptor&gt;
+                            &lt;/descriptors&gt;
+                        &lt;/configuration&gt;
+                        &lt;executions&gt;
+                            &lt;execution&gt;
+                                &lt;phase&gt;package&lt;/phase&gt;
+                                &lt;goals&gt;
+                                    &lt;goal&gt;single&lt;/goal&gt;
+                                &lt;/goals&gt;
+                            &lt;/execution&gt;
+                        &lt;/executions&gt;
+                    &lt;/plugin&gt;
+                &lt;/plugins&gt;
+            &lt;/build&gt;
+
+        &lt;/profile&gt;
+    &lt;/profiles&gt;
+
+    &lt;!--
+       Builds Overlay Modules for DSpace
+    --&gt;
+    &lt;modules&gt;
+        &lt;module&gt;../dspace&lt;/module&gt;
+        &lt;module&gt;../dspace-parent&lt;/module&gt;
+        &lt;module&gt;../dspace-api&lt;/module&gt;
+    &lt;/modules&gt;
+
+&lt;/project&gt;
\ No newline at end of file

Added: dspace/branches/dspace-async-release/dspace-release/src/assemble/release.xml
==============================================================================
--- (empty file)
+++ dspace/branches/dspace-async-release/dspace-release/src/assemble/release.xml	Sun Jul 17 19:38:16 2011
@@ -0,0 +1,37 @@
+&lt;?xml version="1.0" encoding="UTF-8"?&gt;
+&lt;assembly xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>"
+   xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
+   xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd" target="_new">http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd</a>"&gt;
+	&lt;id&gt;release&lt;/id&gt;
+	&lt;formats&gt;
+		&lt;format&gt;zip&lt;/format&gt;
+		&lt;!--
+		&lt;format&gt;tar.gz&lt;/format&gt;
+		&lt;format&gt;tar.bz2&lt;/format&gt;
+		--&gt;
+	&lt;/formats&gt;
+	&lt;includeBaseDirectory&gt;true&lt;/includeBaseDirectory&gt;
+
+	&lt;baseDirectory&gt;${finalName}-release&lt;/baseDirectory&gt;
+
+    &lt;moduleSets&gt;
+        &lt;moduleSet&gt;
+			&lt;includes&gt;
+				&lt;include&gt;org.dspace.modules:*:war:*&lt;/include&gt;
+				&lt;include&gt;org.dspace:dspace:pom:*&lt;/include&gt;
+				&lt;include&gt;org.dspace:modules:pom:*&lt;/include&gt;
+			&lt;/includes&gt;
+            &lt;sources&gt;
+                &lt;fileSets&gt;
+                    &lt;fileSet&gt;
+                        &lt;excludes&gt;
+                            &lt;exclude&gt;*.iml&lt;/exclude&gt;
+                            &lt;exclude&gt;target/**&lt;/exclude&gt;
+                        &lt;/excludes&gt;
+                    &lt;/fileSet&gt;
+                &lt;/fileSets&gt;
+            &lt;/sources&gt;
+        &lt;/moduleSet&gt;
+    &lt;/moduleSets&gt;
+
+&lt;/assembly&gt;

Added: dspace/branches/dspace-async-release/dspace-release/src/assemble/src-release.xml
==============================================================================
--- (empty file)
+++ dspace/branches/dspace-async-release/dspace-release/src/assemble/src-release.xml	Sun Jul 17 19:38:16 2011
@@ -0,0 +1,32 @@
+&lt;?xml version="1.0" encoding="UTF-8"?&gt;
+&lt;assembly xmlns="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a>"
+          xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance" target="_new">http://www.w3.org/2001/XMLSchema-instance</a>"
+          xsi:schemaLocation="<a href="http://maven.apache.org/POM/4.0.0" target="_new">http://maven.apache.org/POM/4.0.0</a> <a href="http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd" target="_new">http://maven.apache.org/xsd/assembly-1.1.0-SNAPSHOT.xsd</a>"&gt;
+    &lt;id&gt;src-release&lt;/id&gt;
+    &lt;formats&gt;
+        &lt;format&gt;zip&lt;/format&gt;
+        &lt;!--
+          &lt;format&gt;tar.gz&lt;/format&gt;
+          &lt;format&gt;tar.bz2&lt;/format&gt;
+          --&gt;
+    &lt;/formats&gt;
+    &lt;baseDirectory&gt;${finalName}-src-release&lt;/baseDirectory&gt;
+    &lt;includeBaseDirectory&gt;true&lt;/includeBaseDirectory&gt;
+
+    &lt;moduleSets&gt;
+        &lt;moduleSet&gt;
+            &lt;sources&gt;
+                &lt;fileSets&gt;
+                    &lt;fileSet&gt;
+                        &lt;excludes&gt;
+                            &lt;exclude&gt;*.iml&lt;/exclude&gt;
+                            &lt;exclude&gt;target/**&lt;/exclude&gt;
+                        &lt;/excludes&gt;
+                    &lt;/fileSet&gt;
+                &lt;/fileSets&gt;
+            &lt;/sources&gt;
+        &lt;/moduleSet&gt;
+    &lt;/moduleSets&gt;
+
+
+&lt;/assembly&gt;

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27806624">[DSpace-changelog] r6490 - in
	modules/dspace-cocoon-servlet-service-impl: . branches tags trunk</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-15 23:57</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Fri Jul 15 23:57:33 2011
New Revision: 6490

Log:
New location for overridden cocoon-servlet-service-impl

Added:
   modules/dspace-cocoon-servlet-service-impl/
   modules/dspace-cocoon-servlet-service-impl/branches/
   modules/dspace-cocoon-servlet-service-impl/tags/
   modules/dspace-cocoon-servlet-service-impl/trunk/

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27806616">[DSpace-changelog] r6489 - modules/dspace-ldap
	modules/dspace-radius sandbox/dspace-ldap sandbox/dspace-radius</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-15 23:54</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Fri Jul 15 23:54:02 2011
New Revision: 6489

Log:
Moving experimental projects to sandbox

Added:
   sandbox/dspace-ldap/
      - copied from r6488, /modules/dspace-ldap/
   sandbox/dspace-radius/
      - copied from r6488, /modules/dspace-radius/
Removed:
   modules/dspace-ldap/
   modules/dspace-radius/

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    
    <!--
/mailarchive/nested_messages.html - Copyright 1999-2006 (c) Open Source Technology Group
@version $Id$
-->
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td width="0"> </td>
        <td>
            <table width="100%" border="0">
                <tr>
	<td bgcolor="#DDDDDD" nowrap><div class='forum'>
		<div><b><!-- google_ad_section_start --><a href="/mailarchive/message.php?msg_id=27806615">[DSpace-changelog] r6488 - modules/dspace-history
	modules/dspace-policy modules/dspace-sip modules/dspace-srw
	sandbox/dspace-history sandbox/dspace-policy
	sandbox/dspace-sip sandbox/dspace-srw</a><!-- google_ad_section_end --></b></div>		<small>From: &lt;noreply@sc...&gt; -	2011-07-15 23:53</small><br>
			</div></td>
</tr>


                <tr>
                    <td class="email_body">
                        <!-- google_ad_section_start --><pre>Author: mdiggory
Date: Fri Jul 15 23:53:27 2011
New Revision: 6488

Log:
Moving experimental projects to sandbox

Added:
   sandbox/dspace-history/
      - copied from r6487, /modules/dspace-history/
   sandbox/dspace-policy/
      - copied from r6487, /modules/dspace-policy/
   sandbox/dspace-sip/
      - copied from r6487, /modules/dspace-sip/
   sandbox/dspace-srw/
      - copied from r6487, /modules/dspace-srw/
Removed:
   modules/dspace-history/
   modules/dspace-policy/
   modules/dspace-sip/
   modules/dspace-srw/

</pre><!-- google_ad_section_end -->
                        <br />
                        <br />
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
    <br />
    





<table width="100%" border="0">
    <tr bgcolor="#eeeeee">
        <td width="50%">
                    &nbsp;
                </td>
        <td>&nbsp;</td>
        <td align="right" width="50%">
                                <a href="forum.php?forum_name=dspace-changelog&amp;max_rows=25&amp;offset=25&amp;style=nested&amp;viewmonth=201107">
                        <strong>Next Messages</strong></a><a href="forum.php?max_rows=25&style=nested&offset=25&forum_name=dspace-changelog"><img src="http://a.fsdn.com/sf/images/images/t.gif" alt="" width="15" height="15" /></a>
                </td>
    </tr>
</table>

</form>

            </div>
        </div>
      </div>
    
    <footer id="site-footer">
        <div class="wrapper">
            <nav>
                <h5>SourceForge</h5>
                <a href="/about">About</a>
                <a href="/blog/category/sitestatus/">Site Status</a>
                <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
            </nav>
            <nav>
                <h5>Find and Develop Software</h5>
                <a href="/create/">Create a Project</a>
                <a href="/directory/">Software Directory</a>
                <a href="/top">Top Downloaded Projects</a>
            </nav>
            <nav>
                <h5>Community</h5>
                <a href="/blog/">Blog</a>
                <a href="http://twitter.com/sourceforge">@sourceforge</a>
                <a href="/jobs?source=footer">Job Board</a>
                <a href="http://library.slashdotmedia.com/?source=sfnet_footer">Resources</a>
            </nav>
            <nav>
                <h5>Help</h5>
                <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
                <a href="/support">Support Request</a>
                <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
            </nav>
        </div>
    </footer>
    <footer id="site-copyright-footer">
        <div class="wrapper">
            <div id="copyright">
                Copyright &copy; 2013 SourceForge. All Rights Reserved.<br />
                SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
            </div>
            <nav>
                <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
                <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
                <a href="http://slashdotmedia.com/opt-out-choices">Cookies/Opt Out</a>
                <a href="http://slashdotmedia.com">Advertise</a>
                <a href="http://sourceforge.jp/">SourceForge.JP</a>
            </nav>
        </div>
    </footer>
        <!--[if lt IE 7 ]>
    <script type="text/javascript" src="http://static.sourceforge.net/include/js/sftheme/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
    <![endif]-->
<!--[if IE]></div><![endif]-->
<!--[if IE 6]></div><![endif]-->
<!--[if IE 7]></div><![endif]-->

    
    <!-- Begin comScore Tag -->
    <script>
        document.write(unescape("%3Cscript src='" + (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js' %3E%3C/script%3E"));
    </script>
    <script>
        COMSCORE.beacon({
            c1:2,
            c2:6035546,
            c3:"",
            c4:"",
            c5:"",
            c6:"",
            c15:""
        });
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035546&amp;c3=&amp;c4=&amp;c5=&amp;c6=&amp;c15=&amp;cj=1" />
    </noscript>
    <!-- End comScore Tag -->
    




        </div>
    </body>
</html>
