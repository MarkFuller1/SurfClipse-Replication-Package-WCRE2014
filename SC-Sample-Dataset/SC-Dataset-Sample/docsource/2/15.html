<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD>
<!-- developpe par  Real Gagnon, Quebec Canada http://rgagnon.com -->
<META NAME="description"
      Content="Real's JAVA JAVASCRIPT and PowerBuilder How-to pages with useful code snippets">
<META NAME="keywords"
      Content="java,javascript,wsh,vbscript,programming,tips,powerbuilder">
<LINK href="/howto.css" type="text/css" rel="stylesheet">
<LINK href="/menu_assets/styles.css" rel="stylesheet" type="text/css">
<LINK rel="alternate" type="application/rss+xml" title="Real's HowTo" href="http://www.rgagnon.com/feed.xml">



<TITLE>Iterate a Collection and remove an item - Real's Java How-to</TITLE>
</HEAD><BODY>
<div class="content">
	<table border="0" width="100%">
	<tr>
		<td>
			<a name="top" href="/howto.html" title="Useful code snippets for developers!">
			<span class='realhowtologoa'>Real's<span class='realhowtologob'>HowTo</span></span>
		</a>
		</td>

		<td align="center">
		<!-- AddThis Feed Button -->
		<a href="http://www.addthis.com/feed.php?pub=rgagnon&amp;h1=http%3A%2F%2Fwww.rgagnon.com%2Ffeed.xml&amp;t1=" title="Subscribe using any feed reader!" target="_new">
			<img src="http://s9.addthis.com/button1-rss.gif" alt="AddThis Feed Button" border="0" height="16" width="125"></a>
		</td>

		<td align="center">
		<!-- AddThis Button BEGIN -->
		<div class="addthis_toolbox addthis_default_style ">
		<a class="addthis_counter addthis_pill_style"></a>
		</div>
		<script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
		<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=rgagnon"></script>
        <!-- AddThis Button END -->

		<td align="center">
						<!-- Google +1 button -->
						<g:plusone size="small"></g:plusone>

						<!-- Place this tag after the last plusone tag -->
						<script type="text/javascript">
						  (function() {
							var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
							po.src = 'https://apis.google.com/js/plusone.js';
							var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
						  })();
						</script>
		</td>


	    <td align="right">
	        <!-- SiteSearch Google -->
			<style type="text/css">
			@import url(http://www.google.com/cse/api/branding.css);
			</style>
			<div class="cse-branding-right" style="background-color:#FFFFFF;color:#000000">
			  <div class="cse-branding-form">
				<form action="http://www.google.com" id="cse-search-box">
				  <div>
					<input type="hidden" name="cx" value="partner-pub-5001760496988433:2955090966" />
					<input type="hidden" name="ie" value="UTF-8" />
					<input type="text" name="q" size="20" />
					<input type="submit" name="sa" value="Search" />
				  </div>
				</form>
			  </div>
			  <div class="cse-branding-logo">
				<img src="http://www.google.com/images/poweredby_transparent/poweredby_FFFFFF.gif" alt="Google" />
			  </div>
			  <div class="cse-branding-text">
				Custom Search
			  </div>
			</div>

	    </td>

	</tr>
	</table>

	<div id='cssmenu'>
		<ul>
		   <li class='has-sub '><a href='#'><span>Java</span></a>
			  <ul>
				 <li><a href='/topics/java-language.html'><span>Language</span></a></li>
				 <li><a href='/topics/java-stringnumber.html'><span>String and Number</span></a></li>
				 <li><a href='/topics/java-applet.html'><span>Applet</span></a></li>
				 <li><a href='/topics/java-awt.html'><span>AWT</span></a></li>
				 <li><a href='/topics/java-swing.html'><span>Swing</span></a></li>
				 <li><a href='/topics/java-env.html'><span>Environment</span></a></li>
				 <li><a href='/topics/java-io.html'><span>IO</span></a></li>
				 <li><a href='/topics/java-js.html'><span>Javascript interaction</span></a></li>
				 <li><a href='/topics/java-jdbc.html'><span>JDBC</span></a></li>
				 <li><a href='/topics/java-thread.html'><span>Thread</span></a></li>
				 <li><a href='/topics/java-net.html'><span>Networking</span></a></li>
				 <li><a href='/topics/java-jsp.html'><span>JSP &amp; Servlet</span></a></li>
				 <li><a href='/topics/java-xml.html'><span>XML</span></a></li>
				 <li><a href='/topics/java-inter.html'><span>Internationalization</span></a></li>
				 <li><a href='/topics/java-security.html'><span>Security</span></a></li>
				 <li><a href='/topics/java-jni.html'><span>JNI/JNA</span></a></li>
				 <li><a href='/topics/java-date.html'><span>Date &amp; Time</span></a></li>
				 <li><a href='/topics/java-os.html'><span>Open Source</span></a></li>
				 <li><a href='/topics/java-varia.html'><span>Varia</span></a></li>
				 <li><a href='/topics/java-deprecated.html'><span>Deprecated</span></a></li>
				 <li><a href='/javadetails/java-links.html'><span>Links</span></a></li>
			  </ul>
		   </li>
		   <li class='has-sub '><a href='#'><span>Javascript &amp; Web</span></a>
			  <ul>
				 <li><a href='/topics/js-language.html'><span>Language</span></a></li>
				 <li><a href='/topics/js-htmlcss.html'><span>HTML &amp; CSS</span></a></li>
				 <li><a href='/topics/js-form.html'><span>Form</span></a></li>
				 <li><a href='/topics/java-js.html'><span>Java interaction</span></a></li>
				 <li><a href='/topics/js-mobile.html'><span>Mobile</span></a></li>
				 <li><a href='/topics/js-varia.html'><span>Varia</span></a></li>
			  </ul>
		   </li>
		   <li class='has-sub '><a href='#'><span>Powerbuilder</span></a>
				  <ul>
					 <li><a href='/topics/pb-powerscript.html'><span>Powerscript</span></a></li>
	                 <li><a href='/topics/pb-winapiregistry.html'><span>Win API & Registry</span></a></li>
					 <li><a href='/topics/pb-datawindow.html'><span>Datawindow</span></a></li>
					 <li><a href='/topics/pb-pfc.html'><span>PFC</span></a></li>
					 <li><a href='/topics/pb-common.html'><span>Common problems</span></a></li>
					 <li><a href='/topics/pb-jaguar.html'><span>EAServer</span></a></li>
					 <li><a href='/topics/pb-database.html'><span>Database</span></a></li>
		             <li><a href='/pbdetails/pb-links.html'><span>Links</span></a></li>
				  </ul>
		   </li>
		   <li class='has-sub '><a href='#'><span>More HowTo</span></a>
				  <ul>
				     <li><a href='/topics/wsh-vbs.html'><span>WSH & VBScript</span></a></li>
					 <li><a href='/topics/gp.html'><span>Windows, Batch, PDF, Internet</span></a></li>
					 <li><a href='/gp/gp-l1.html'><span>Links</span></a></li>
				  </ul>
		   </li>
		   <li class='has-sub '><a href='#'><span>Varia</span></a>
				  <ul>
				     <li><a href='/download/index.html'><span>Download</span></a></li>
				     <li><a href='/varia/faq-e.html'><span>Real's HowTo FAQ</span></a></li>
				     <li><a href='/varia/contact.html'><span>Contact me</span></a></li>
				     <li><a href='/donate.html'><span>Donate!</span></a></li>
					 <li><a href='/varia/funny-1.html'><span>Funny 1</span></a></li>
			         <li><a href='/varia/funny-2.html'><span>Funny 2</span></a></li>
					 <li><a href='/varia/funny-3.html'><span>Funny 3</span></a></li>
					 <li><a href='/varia/funny-4.html'><span>Funny 4</span></a></li>
					 <li><a href='/varia/oneline.html'><span>One line</span></a></li>
					 <li><a href='/varia/deep.html'><span>Deep Thoughts</span></a></li>
					 <li><a href='/varia/asciiart1.html'><span>Ascii Art</span></a></li>
				  </ul>
		   </li>
                   <li ><a href='/bigindex.html'><span style="font-variant: small-caps;"><small>Big Index</small></span></a>
                   </li>
		   <li><a href='/latestcomments.html'><span style="font-variant: small-caps;"><small>Latest Comments</small></span></a>
                   </li>
		</ul>
	</div>
</div>
<!-- HOWTO content -->
<DIV class="content">
<h4>Iterate a Collection and remove an item<span class='tag'>Tag(s): <a href='../topics/java-language.html'>Language</a></span></h4>
<!-- Google adsense -->
<div align="center" class="googleadstop">
<script type="text/javascript"><!--
google_ad_client = "pub-5001760496988433";
//top banner text 1
google_ad_slot = "5477985772";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<!-- Google adsense -->
<BR/>

You get an exception if while scanning a Collection, you decide to remove an item.

<DIV class="howtocode"><PRE>
import java.util.ArrayList;

public class Simple {
  public static void main(String args[]) {
    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();

    list.add("Bart");
    list.add("Lisa");
    list.add("Marge");
    list.add("Barney");
    list.add("Homer");
    list.add("Maggie");

    for(String s: list)
    {
      if (s.equals("Barney")) {
        list.remove("Barney");
      }
      System.out.println(s);
    }
  }

  /*
    output :
        Bart
        Lisa
        Marge
        Barney
        Exception in thread "main" java.util.ConcurrentModificationException
          at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
          at java.util.AbstractList$Itr.next(Unknown Source)
          at com.rgagnon.howto.Simple.main(Simple.java:20)   
   */
}
</PRE></DIV>

The trick is to use an Iterator and remove the item with Iterator.remove()

<DIV class="howtocode"><PRE>
import java.util.ArrayList;
import java.util.Iterator;

public class Simple {
  public static void main(String args[]) {
    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();

    list.add("Bart");
    list.add("Lisa");
    list.add("Marge");
    list.add("Barney");
    list.add("Homer");
    list.add("Maggie");

    for (Iterator&lt;String&gt; iter = list.iterator(); iter.hasNext();) {
      String s = iter.next();
      if (s.equals("Barney")) {
        iter.remove();
      }
      else {
        System.out.println(s);
      }
    }

    for(String s: list)
    {
      System.out.println(s);
    }
  }

  /*
    output :
        Bart
        Lisa
        Marge
        Homer
        Maggie
        Bart
        Lisa
        Marge
        Homer
        Maggie 
   */
}
</PRE></DIV>



<!-- HOWTO content -->
<HR><div class="disqusdiv">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'realshowto'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
<HR><!-- Google adsense -->
<p><div align="center" class="googleadsbottom">
<script type="text/javascript"><!--
google_ad_client = "pub-5001760496988433";
//bottom banner image 1
google_ad_slot = "7489098401";
google_ad_width = 468;
google_ad_height = 60;
//--></script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<!-- Google adsense -->
<HR><small>
<div align="center"><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" value="_xclick" name="cmd">
<input type="hidden" value="real@rgagnon.com" name="business">
<input type="hidden" value="Support for Real's HowTo" name="item_name">
<input type="hidden" value="realhowto" name="item_number">
<input type="hidden" value="1" name="no_shipping">
<input type="hidden" value="http://www.rgagnon.com/thanks.html" name="return">
<table><tr><td><small>If you find this article useful, consider making a small donation <br>
to show your support for this Web site and its content.</td>
<td><input title="Make payments with PayPal - it's fast, free and secure!" type="image"
alt="Make payments with PayPal - it's fast, free and secure!"
src="https://www.paypal.com/images/x-click-but04.gif"
border="0" name="submit"></td></tr></table></form></div>
<p align='center'>Written and compiled by R&eacute;al Gagnon  &#169;1998-2013<br>
[<A HREF="http://www.rgagnon.com/" TARGET="_top"> home </A>]</small></p>

<HR><!-- GOOGLE ANALYTICS -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2178549-1";
urchinTracker();
</script>
<!-- GOOGLE ANALYTICS -->
</DIV>
</BODY></HTML>
