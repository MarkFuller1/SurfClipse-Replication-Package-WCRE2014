<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.20.5" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Eclipsepedia (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.eclipse.org/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Eclipsepedia Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />	
		
		<title>Eclipse4/RCP/Dependency Injection - Eclipsepedia</title>

		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins/eclipsenova/novaWide.css?303"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="/skins/eclipsenova/eclipsenovaPrint.css?303" />
		<link rel="stylesheet" type="text/css" media="handheld" href="/skins/eclipsenova/handheld.css?303" />
		<link rel="stylesheet" type="text/css" href="/skins/eclipsenova/Nova/css/header.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="/skins/eclipsenova/tabs.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="/skins/eclipsenova/Nova/css/visual.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="/skins/eclipsenova/Nova/css/layout.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="/skins/eclipsenova/Nova/css/footer.css" media="screen" />
	        <!--[if IE]><link rel="stylesheet" type="text/css" href="/skins/eclipsenova/IEpngfix.css" media="screen" /><![endif]-->
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/eclipsenova/IE50Fixes.css?303";</style> <![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins/eclipsenova/IE55Fixes.css?303";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins/eclipsenova/IE60Fixes.css?303";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins/eclipsenova/IE70Fixes.css?303";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Eclipse4/RCP/Dependency_Injection","wgTitle":"Eclipse4/RCP/Dependency Injection","wgCurRevisionId":345954,"wgArticleId":30728,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Eclipse4/RCP/Dependency_Injection","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"hidesig":true,"templateEditor":false,"templates":false,"preview":false,"previewDialog":false,"publish":false,"toc":false},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script>                
		<script type="text/javascript" src="/skins/common/wikibits.js?303"><!-- wikibits js --></script>

<!-- Performance mods similar to those for bug 166401 -->

		<!-- Head Scripts -->
		<script src="https://wiki.eclipse.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=eclipsenova&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Eclipse4/RCP/Dependency_Injection","wgTitle":"Eclipse4/RCP/Dependency Injection","wgCurRevisionId":345954,"wgArticleId":30728,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Eclipse4/RCP/Dependency_Injection","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":false,"dialogs":false,"hidesig":true,"templateEditor":false,"templates":false,"preview":false,"previewDialog":false,"publish":false,"toc":false},"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"eclipsenova","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":
3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});
/* cache key: my_wiki:resourceloader:filter:minify-js:7:970adc1bc2bb019ff13f30a19f5c07ea */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-java {line-height: normal;}
.source-java li, .source-java pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for java
 * CSS class: source-java, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.java.source-java .de1, .java.source-java .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.java.source-java  {font-family:monospace;}
.java.source-java .imp {font-weight: bold; color: red;}
.java.source-java li, .java.source-java .li1 {font-weight: normal; vertical-align:top;}
.java.source-java .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.java.source-java .li2 {font-weight: bold; vertical-align:top;}
.java.source-java .kw1 {color: #7F0055; font-weight: bold;}
.java.source-java .kw2 {color: #7F0055; font-weight: bold;}
.java.source-java .kw3 {color: #000000; font-weight: normal}
.java.source-java .kw4 {color: #7F0055; font-weight: bold;}
.java.source-java .co1 {color: #3F7F5F; font-style: italic;}
.java.source-java .co2 {color: #3F7F5F;}
.java.source-java .co3 {color: #3F7F5F; font-style: italic; font-weight: bold;}
.java.source-java .coMULTI {color: #3F5FBF; font-style: italic;}
.java.source-java .es0 {color: #000000;}
.java.source-java .br0 {color: #000000;}
.java.source-java .sy0 {color: #000000;}
.java.source-java .st0 {color: #2A00ff;}
.java.source-java .nu0 {color: #000000;}
.java.source-java .me1 {color: #000000;}
.java.source-java .me2 {color: #000000;}
.java.source-java .ln-xtra, .java.source-java li.ln-xtra, .java.source-java div.ln-xtra {background-color: #ffc;}
.java.source-java span.xtra { display:block; }

/*]]>*/
</style><link rel="stylesheet" type="text/css" href="" />	</head>
<body  class="mediawiki  ltr ns-0 ns-subject page-Eclipse4_RCP_Dependency_Injection">
	<div id="globalWrapper">


		<div id="column-one">
<!-- Eclipse Additions for the Top Nav start here M. Ward-->

		      <div id="header">
               <div id="header-graphic">
                 <img src="/skins/eclipsenova/eclipse.png" alt="Eclipse Wiki">
               </div>
<!-- Pulled 101409 Mward	   -->
            
            <div class="portlet" id="p-personal">
              <div class="pBody">
              <ul>
                <li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Eclipse4%2FRCP%2FDependency+Injection">Log in</a></li>
                      </ul>
              </div>
            </div>

            <div id="header-icons">
	      <div id="sites">
              <ul id="sitesUL">
                <li><a href="http://www.eclipse.org"><img src="//dev.eclipse.org/custom_icons/eclipseIcon.png" width="28" height="28" alt="Eclipse Foundation" title="Eclipse Foundation" /><div>Eclipse Foundation</div></a></li>
                <li><a href="http://marketplace.eclipse.org"><img src="//dev.eclipse.org/custom_icons/marketplace.png" width="28" height="28" alt="Eclipse Marketplace" title="Eclipse Marketplace" /><div>Eclipse Marketplace</div></a></li>
                <li><a href="https://bugs.eclipse.org/bugs"><img src="//dev.eclipse.org/custom_icons/system-search-bw.png" width="28" height="28" alt="Bugzilla" title="Bugzilla" /><div>Bugzilla</div></a></li>
                <li><a href="http://www.youtube.com/user/EclipseFdn"><img src="//dev.eclipse.org/custom_icons/audio-input-microphone-bw.png" width="28" height="28" alt="Live" title="Live" /><div>Eclipse Live</div></a></li>
                <li><a href="http://planeteclipse.org"><img src="//dev.eclipse.org/large_icons/devices/audio-card.png" width="28" height="28" alt="PlanetEclipse" title="Planet" /><div>Planet Eclipse</div></a></li>
                <li><a href="http://portal.eclipse.org"><img src="//dev.eclipse.org/custom_icons/preferences-system-network-proxy-bw.png" width="28" height="28" alt="Portal" title="Portal" /><div>My Foundation Portal</div></a></li>
              </ul>
              </div>
            </div>
        </div> 
<!-- NEW HEADER STUFF HERE -->
       <div id="header-menu">
         <div id="header-nav">
               <ul> 		 <li><a class="first_one" href="http://wiki.eclipse.org/" target="_self">Home</a></li>                  <li><a  href="http://www.eclipse.org/downloads/" target="_self">Downloads</a></li> 
                 <li><a  href="http://www.eclipse.org/users/" target="_self">Users</a></li> 
                 <li><a  href="http://www.eclipse.org/membership/" target="_self">Members</a></li> 
                 <li><a  href="http://wiki.eclipse.org/index.php/Development_Resources" target="_self">Committers</a></li> 
                 <li><a  href="http://www.eclipse.org/resources/" target="_self">Resources</a></li> 
                 <li><a  href="http://www.eclipse.org/projects/" target="_self">Projects</a></li> 
                 <li><a  href="http://www.eclipse.org/org/" target="_self">About Us</a></li> 
                </ul>
         </div>
         <div id="header-utils">
<!-- moved the search window here -->
                           <form action="/Special:Search" >
                  <input class="input" name="search" type="text" accesskey="f" value="" />
                    <input type='submit' onclick="this.submit();" name="go" id="searchGoButton" class="button" title="Go to a page with this exact name if one exists" value="Go" />&nbsp;
                    <input type='submit' onclick="this.submit();" name="fulltext" class="button" id="mw-searchButton" title="Search Eclipsepedia for this text"  value="Search" />
                </form>
		 </div>
      </div>


<!-- Eclipse Additions for the Header stop here -->
<!-- Additions and mods for leftside nav Start here -->

<!--Started nav  rip here-->
<!-- these are the nav controls main page, changes etc -->
    <div id="novaContent" class="faux">
            <div id="leftcol">
          <ul id="leftnav">
<!-- these are the page controls, edit history etc -->
            	  <li class="separator"><a class="separator">Navigation &#160;&#160;</li>
                                <li id="n-mainpage"><a href="/Main_Page">Main Page</a></li>
	                                <li id="n-portal"><a href="/Eclipsepedia:Community_portal">Community portal</a></li>
	                                <li id="n-currentevents"><a href="/Eclipsepedia:Current_events">Current events</a></li>
	                                <li id="n-recentchanges"><a href="/Special:RecentChanges">Recent changes</a></li>
	                                <li id="n-randompage"><a href="/Special:Random">Random page</a></li>
	                                <li id="n-help"><a href="/Help:Contents">Help</a></li>
		  <li class="separator"><a class="separator">Toolbox &#160;&#160;</a></li>

				<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/Eclipse4/RCP/Dependency_Injection">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/Eclipse4/RCP/Dependency_Injection">Related changes</a></li>
                <!-- This is the toolbox section -->
<li id="t-specialpages"><a href="/Special:SpecialPages">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;oldid=345954">Permanent link</a></li>	  </ul>
        </div>


<!-- Additions and mods for leftside nav End here -->


  <div id="column-content">
    <div id="content">
      <a name="top" id="top"></a>

              <div id="tabs">
         <ul class="primary">
                                         <li class="active"><a href="/Eclipse4/RCP/Dependency_Injection"><span class="tab">Page</span></a></li>
                                                         <li><a href="/index.php?title=Talk:Eclipse4/RCP/Dependency_Injection&amp;action=edit&amp;redlink=1"><span class="tab">Discussion</span></a></li>
                                         <li><a href="/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;action=edit"><span class="tab">View source</span></a></li>
                                         <li><a href="/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;action=history"><span class="tab">History</span></a></li>
                                         <li><a href="https://wiki.eclipse.org/index.php?title=Special:Userlogin&amp;returnto=Eclipse4/RCP/Dependency Injection&amp;returntoquery=action%3Dedit"><span class="tab">Edit</span></a></li>
                  </ul>
        </div>


          <script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
            <h1 class="firstHeading">Eclipse4/RCP/Dependency Injection</h1>
      <div id="bodyContent">
        <h3 id="siteSub">From Eclipsepedia</h3>
        <div id="contentSub"><span class="subpages">&lt; <a href="/Eclipse4" title="Eclipse4">Eclipse4</a>&lrm; | <a href="/Eclipse4/RCP" title="Eclipse4/RCP">RCP</a></span></div>
                              <div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>          <!-- start content -->
          <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>With 10 years of experience with the Eclipse platform, a number of difficulties were observed.
</p>
<ol><li> Code frequently uses global singleton accessors (e.g., Platform, PlatformUI) or required navigating a deep chain of dependencies (e.g., obtaining an <i>IStatusLineManager</i>).  Singleton services is particularly problematic for app servers like RAP/Riena.
</li><li> The use of singletons tightly coupled consumers of "things" to their producer/provider, and inhibits reuse.
</li><li> Mechanisms are not very dynamic â€” plugins react to context changes drastically rather than incrementally (just close the affected controls)
</li><li> <del>IEvaluationContext has global state that gets swapped according to context change (such as the focus control)</del>
</li><li> <del>Current solutions are not multi-threadable - they assume evaluation occurs in the UI thread</del>
</li><li> Scaling granularity
<ul><li> Current solutions don't scale down to services with brief lifetimes
</li><li> Current solutions may not scale up to very large numbers of services
</li></ul>
</li><li> Currently don't track service consumers to notify when services come/go
</li><li> Client code needs to know the internals of the Eclipse code base
</li><li> No support for services lookup that are composed out of other services on the fly
</li></ol>
<p>These difficulties are seen in other frameworks and are not unique to the Eclipse application platform.  The Eclipse 4 Application Platform has adopted the use of <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection (DI)</a> to circumvent these problems: rather than require client code to know how to access a service, the client instead describes the service required, and the platform is responsible for configuring the object with an appropriate service.  DI shields the client code from knowing the provenance of the injected objects.
</p><p>The Eclipse 4 Application Platform provides a <a rel="nofollow" class="external text" href="http://jcp.org/en/jsr/detail?id=330">JSR 330</a>-compatible, <a rel="nofollow" class="external text" href="http://atinject.googlecode.com/svn/trunk/javadoc/javax/inject/package-summary.html">annotation-based</a> dependency injection (DI) framework, similar to <a rel="nofollow" class="external text" href="http://springframework.org/">Spring</a> or <a rel="nofollow" class="external text" href="http://code.google.com/p/google-guice">Guice</a>.  The injector is defined in several plugins: org.eclipse.e4.core.di, org.eclipse.e4.core.di.extensions, and org.eclipse.e4.ui.di.
</p><p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Standard_Annotations_and_Classes"><span class="tocnumber">2</span> <span class="toctext">Standard Annotations and Classes</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#.40Inject_.28javax.inject.29"><span class="tocnumber">2.1</span> <span class="toctext">@Inject (javax.inject)</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#.40Named_.28javax.inject.29"><span class="tocnumber">2.2</span> <span class="toctext">@Named (javax.inject)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.40Singleton_.28javax.inject.29"><span class="tocnumber">2.3</span> <span class="toctext">@Singleton (javax.inject)</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Provider.3CT.3E_.28javax.inject.29"><span class="tocnumber">2.4</span> <span class="toctext">Provider&lt;T&gt; (javax.inject)</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.40PostConstruct.2C_.40PreDestroy_.28javax.annotation.29"><span class="tocnumber">2.5</span> <span class="toctext">@PostConstruct, @PreDestroy (javax.annotation)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#E4AP-specific_Annotations"><span class="tocnumber">3</span> <span class="toctext">E4AP-specific Annotations</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#.40Optional_.28org.eclipse.e4.core.di.annotations.29"><span class="tocnumber">3.1</span> <span class="toctext">@Optional (org.eclipse.e4.core.di.annotations)</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.40Active_.28org.eclipse.e4.core.contexts.29"><span class="tocnumber">3.2</span> <span class="toctext">@Active (org.eclipse.e4.core.contexts)</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.40Preference_.28org.eclipse.e4.core.di.extensions.29"><span class="tocnumber">3.3</span> <span class="toctext">@Preference (org.eclipse.e4.core.di.extensions)</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.40Creatable_.28org.eclipse.e4.core.di.annotations.29"><span class="tocnumber">3.4</span> <span class="toctext">@Creatable (org.eclipse.e4.core.di.annotations)</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.40CanExecute.2C_.40Execute_.28org.eclipse.e4.core.di.annotations.29"><span class="tocnumber">3.5</span> <span class="toctext">@CanExecute, @Execute (org.eclipse.e4.core.di.annotations)</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#.40Focus_.28org.eclipse.e4.ui.di.29"><span class="tocnumber">3.6</span> <span class="toctext">@Focus (org.eclipse.e4.ui.di)</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#.40AboutToShow.2C_.40AboutToHide_.28org.eclipse.e4.ui.di.29"><span class="tocnumber">3.7</span> <span class="toctext">@AboutToShow, @AboutToHide (org.eclipse.e4.ui.di)</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#.40GroupUpdates_.28org.eclipse.e4.core.di.annotations.29"><span class="tocnumber">3.8</span> <span class="toctext">@GroupUpdates (org.eclipse.e4.core.di.annotations)</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#.40EventTopic_.28org.eclipse.e4.core.di.extensions.29.2C_.40UIEventTopic_.28org.eclipse.e4.ui.di.29"><span class="tocnumber">3.9</span> <span class="toctext">@EventTopic (org.eclipse.e4.core.di.extensions), @UIEventTopic (org.eclipse.e4.ui.di)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Advanced_Topics"><span class="tocnumber">4</span> <span class="toctext">Advanced Topics</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Injection_Order"><span class="tocnumber">4.1</span> <span class="toctext">Injection Order</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Extending_the_DI_Framework"><span class="tocnumber">4.2</span> <span class="toctext">Extending the DI Framework</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Configuring_Bindings"><span class="tocnumber">4.3</span> <span class="toctext">Configuring Bindings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Debugging"><span class="tocnumber">5</span> <span class="toctext">Debugging</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Considerations"><span class="tocnumber">6</span> <span class="toctext">Considerations</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#Current_Caveats"><span class="tocnumber">7</span> <span class="toctext">Current Caveats</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Overview"> Overview </span></h1>
<p>DI separates the configuration of an object from its behaviour.  Rather than litter an object with details on how to access its required dependencies, the dependencies are instead configured through the use of an injector.  
</p><p>For example, a typical Eclipse 3.x view would access the Eclipse Help system via the PlatformUI singleton, and the status line manager through the part's site:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1"><span class="kw1">class</span> MyView <span class="kw1">extends</span> ViewPart <span class="br0">&#123;</span>
  <span class="kw1">public</span> <span class="kw4">void</span> createPartControl<span class="br0">&#40;</span><span class="kw3">Composite</span> parent<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">Button</span> button <span class="sy0">=</span> ...<span class="sy0">;</span>
    PlatformUI.<span class="me1">getWorkbench</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getHelpSystem</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">setHelp</span><span class="br0">&#40;</span>button, <span class="st0">&quot;com.example.button.help.id&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
    getViewSite<span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getActionBars</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getStatusLineManager</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">setMessage</span><span class="br0">&#40;</span><span class="st0">&quot;Configuring system...&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>With E4AP, parts are POJOs and have their application services directly injected into the part:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1"><span class="kw1">class</span> MyView <span class="br0">&#123;</span>
  @Inject
  <span class="kw1">public</span> <span class="kw4">void</span> create<span class="br0">&#40;</span><span class="kw3">Composite</span> parent, IWorkbenchHelpSystem help<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">Button</span> button <span class="sy0">=</span> ...<span class="sy0">;</span>
    help.<span class="me1">setHelp</span><span class="br0">&#40;</span>button, <span class="st0">&quot;com.example.button.help.id&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
    slm.<span class="me1">setMessage</span><span class="br0">&#40;</span><span class="st0">&quot;Configuring system...&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>DI provides a number of advantages:
</p>
<ul><li> Clients are able to write POJOs and list the services they need.
</li><li> Useful for testing: the assumptions are placed in the DI container rather than in the client code
</li></ul>
<p>DI has some disadvantages too:
</p>
<ul><li> Service discovery: cannot use code completion to find out what is available.
</li><li> Debugging why injection has not occurred can be frustrating!
</li></ul>
<p><br />
</p>
<h1> <span class="mw-headline" id="Standard_Annotations_and_Classes"> Standard Annotations and Classes </span></h1>
<p>E4AP's injector is based on the standard JSR 330 annotations:
</p>
<h2> <span class="mw-headline" id=".40Inject_.28javax.inject.29"> <a rel="nofollow" class="external text" href="http://atinject.googlecode.com/svn/trunk/javadoc/javax/inject/Inject.html">@Inject</a> (javax.inject) </span></h2>
<p>@Inject marks a constructor, method, or field as being available for injection.
</p>
<h2> <span class="mw-headline" id=".40Named_.28javax.inject.29"> <a rel="nofollow" class="external text" href="http://atinject.googlecode.com/svn/trunk/javadoc/javax/inject/Named.html">@Named</a> (javax.inject) </span></h2>
<p>Injected values are typically identified by a type.  But there may be a number of available objects of a particular type (e.g., there are likely a number of available Strings).  Multiple objects can be distinguished by providing a name, both on setting them as well as requesting them for injection.  For example:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@Inject
@Named<span class="br0">&#40;</span>E4Workbench.<span class="me1">INSTANCE_LOCATION</span><span class="br0">&#41;</span>
<span class="kw1">private</span> Location instanceLocation<span class="sy0">;</span></pre></div></div>
<h2> <span class="mw-headline" id=".40Singleton_.28javax.inject.29"> <a rel="nofollow" class="external text" href="http://atinject.googlecode.com/svn/trunk/javadoc/javax/inject/Singleton.html">@Singleton</a> (javax.inject) </span></h2>
<p>@Singleton is class annotation Indicating that the class should only be instantiated once per injection scope.  Typical E4AP applications have only a single injector scope for the application.
</p>
<h2> <span class="mw-headline" id="Provider.3CT.3E_.28javax.inject.29"> <a rel="nofollow" class="external text" href="http://atinject.googlecode.com/svn/trunk/javadoc/javax/inject/Provider.html">Provider&lt;T&gt;</a> (javax.inject) </span></h2>
<p>The Provider class defers the injection to demand-time.  Any value that can be injected can also be obtained through a provider.
</p>
<h2> <span class="mw-headline" id=".40PostConstruct.2C_.40PreDestroy_.28javax.annotation.29"> <a rel="nofollow" class="external text" href="http://download.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html">@PostConstruct</a>, <a rel="nofollow" class="external text" href="http://download.oracle.com/javaee/5/api/javax/annotation/PreDestroy.html">@PreDestroy</a> (javax.annotation) </span></h2>
<p>The @PostConstruct and @PreDestroy annotations provide lifecycle notification for created objects.  All methods annotated with @PostConstruct are called after an object has been fully injected.  All methods annotated with @PreDestroy are called before an object is to be uninjected and released.
</p>
<h1> <span class="mw-headline" id="E4AP-specific_Annotations"> E4AP-specific Annotations </span></h1>
<p>E4AP's injection framework also supports other E4AP-specific annotations.
</p>
<h2> <span class="mw-headline" id=".40Optional_.28org.eclipse.e4.core.di.annotations.29"> @Optional (org.eclipse.e4.core.di.annotations) </span></h2>
<p>The @Optional annotation can be applied to methods, fields, and parameters to 
mark them as optional for the dependency injection. Typically, if the injector is 
unable to find a value to inject, then injection will fail. However, if this annotation 
is specified, then:
</p>
<ul><li> for parameters:  a <code>null</code> value will be injected;
</li><li> for methods: the method calls will be skipped;
</li><li> for fields: the values will not be injected.
</li></ul>
<h2> <span class="mw-headline" id=".40Active_.28org.eclipse.e4.core.contexts.29"> @Active (org.eclipse.e4.core.contexts) </span></h2>
<p>@Active serves a similar purpose to @Named, indicating the the value should be resolved from the <a href="/Eclipse4/RCP/Contexts" title="Eclipse4/RCP/Contexts"> active context</a>.  
</p><p>For example, a handler could obtain the active part with:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@Execute
<span class="kw1">public</span> <span class="kw4">void</span> execute<span class="br0">&#40;</span>@Active MPart activePart<span class="br0">&#41;</span> <span class="br0">&#123;</span>
   ...
<span class="br0">&#125;</span></pre></div></div>
<h2> <span class="mw-headline" id=".40Preference_.28org.eclipse.e4.core.di.extensions.29"> @Preference (org.eclipse.e4.core.di.extensions) </span></h2>
<p>The @Preference provides simple interfacing with the Eclipse preferences framework.  The following snippet illustrates its use:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">	@Inject @Preference<span class="br0">&#40;</span>nodePath<span class="sy0">=</span><span class="st0">&quot;my.plugin.id&quot;</span>, value<span class="sy0">=</span><span class="st0">&quot;dateFormat&quot;</span><span class="br0">&#41;</span>
	<span class="kw1">protected</span> <span class="kw3">String</span> dateFormat<span class="sy0">;</span></pre></div></div>
<p>The "dateFormat" field is updated as the preference changes too; the "nodePath" is optional and defaults to the code's defining bundle.
</p><p>A class can receive notification of a preference change by instead receiving the injection through a setter:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">	@Inject 
	<span class="kw1">private</span> <span class="kw4">void</span> setDateFormat<span class="br0">&#40;</span>@Preference<span class="br0">&#40;</span>nodePath<span class="sy0">=</span><span class="st0">&quot;my.plugin.id&quot;</span>, value<span class="sy0">=</span><span class="st0">&quot;dateFormat&quot;</span><span class="br0">&#41;</span> <span class="kw3">String</span> dateFormat<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">this</span>.<span class="me1">dateFormat</span> <span class="sy0">=</span> dateFormat<span class="sy0">;</span>
		<span class="co1">// ... and do something ...</span>
	<span class="br0">&#125;</span></pre></div></div>
<p>Alternatively the preferences set for a node can be obtained to allow setting values too:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">	@Inject @Preference<span class="br0">&#40;</span>nodePath<span class="sy0">=</span><span class="st0">&quot;my.plugin.id&quot;</span><span class="br0">&#41;</span> 
	IEclipsePreferences preferences<span class="sy0">;</span>
&#160;
	<span class="kw1">private</span> <span class="kw4">void</span> use8601Format<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		preferences.<span class="me1">put</span><span class="br0">&#40;</span>dateFormat, ISO8601_FORMAT<span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span></pre></div></div>
<h2> <span class="mw-headline" id=".40Creatable_.28org.eclipse.e4.core.di.annotations.29"> @Creatable (org.eclipse.e4.core.di.annotations) </span></h2>
<p>Classes annotated with @Creatable will be automatically created by the injector if an instance was not present in the injection context.  The automatically-generated instance is not stored in the context.
</p><p>This annotation was introduced to handle a rather somewhat problematic situation: what should the injector do when presented a injectable but non-@Optional field or method argument that cannot be satisfied?  An earlier version of the E4 DI, that followed the approach taken by Guice, would automatically create an object of the field type, providing the type was a concrete class and had a zero-argument constructor.  This behaviour was changed in E4 4.2 M6 as it lead to unexpected results by developers.  Now unsatisfied injections are only autogened if the object type is annotated with @Creatable.
</p><p>To understand why this change was made, consider the following example:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@Inject
<span class="kw1">public</span> <span class="kw4">void</span> nameChanged<span class="br0">&#40;</span>Shell shell, @Preference<span class="br0">&#40;</span>node<span class="sy0">=</span><span class="st0">&quot;my.plugin.id&quot;</span>, value<span class="sy0">=</span><span class="st0">&quot;username&quot;</span><span class="br0">&#41;</span> <span class="kw3">String</span> name<span class="br0">&#41;</span> <span class="br0">&#123;</span>
   MessageDialog.<span class="me1">openInformation</span><span class="br0">&#40;</span>shell, <span class="st0">&quot;Hi &quot;</span> <span class="sy0">+</span> name<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>This example would not behave as expected as normally there are no Shell objects available for injection.  Under the old DI behaviour, since Shell had a zero-argument constructor, the injector would have autogenerated an instance of <tt>Shell</tt>.  But because the shell wasn't the expected (or intended) shell, the dialog was mis-placed.
</p><p>With the changed behaviour, the DI will raise an <tt>InjectionException</tt> since there is no <tt>Shell</tt> available for injection and <tt>Shell</tt> is not annotated with @Creatable.
</p><p>(To obtain the active shell, use <tt>@Named(IServiceConstants.ACTIVE_SHELL) Shell</tt>.)
</p>
<h2> <span class="mw-headline" id=".40CanExecute.2C_.40Execute_.28org.eclipse.e4.core.di.annotations.29"> @CanExecute, @Execute (org.eclipse.e4.core.di.annotations) </span></h2>
<p>The @CanExecute and @Execute annotations tag methods that should be executed for a command handler.  Methods tagged with @CanExecute should return a boolean.
</p>
<h2> <span class="mw-headline" id=".40Focus_.28org.eclipse.e4.ui.di.29"> @Focus (org.eclipse.e4.ui.di) </span></h2>
<p>Parts can specify this annotation on a method to be called when the part receives focus. Parts <b>must</b> implement this method in such a way that a child control of their part can receive focus. Note that label controls cannot take focus.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@Focus
<span class="kw4">void</span> grantFocus<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="co1">// correct</span>
  textField.<span class="me1">setFocus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
  <span class="co1">// incorrect</span>
  <span class="co1">// label.setFocus();</span>
<span class="br0">&#125;</span></pre></div></div>
<p>In the event that your part only has a textual label in it, you should ask your part's inner composite to take focus.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1"><span class="kw1">public</span> <span class="kw1">class</span> DetailsPart <span class="br0">&#123;</span>
&#160;
  <span class="kw1">private</span> <span class="kw3">Composite</span> composite<span class="sy0">;</span>
&#160;
  @PostConstruct
  <span class="kw4">void</span> construct<span class="br0">&#40;</span><span class="kw3">Composite</span> parent<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    composite <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Composite</span><span class="br0">&#40;</span>parent, SWT.<span class="me1">NONE</span><span class="br0">&#41;</span><span class="sy0">;</span>
    composite.<span class="me1">setLayout</span><span class="br0">&#40;</span><span class="kw1">new</span> FillLayout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&#160;
    <span class="kw3">Label</span> label <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw3">Label</span><span class="br0">&#40;</span>composite, SWT.<span class="me1">LEAD</span><span class="br0">&#41;</span><span class="sy0">;</span>
    label.<span class="me1">setText</span><span class="br0">&#40;</span><span class="coMULTI">/* ... */</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&#160;
  @Focus
  <span class="kw4">void</span> grantFocus<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    composite.<span class="me1">setFocus</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<h2> <span class="mw-headline" id=".40AboutToShow.2C_.40AboutToHide_.28org.eclipse.e4.ui.di.29"> @AboutToShow, @AboutToHide (org.eclipse.e4.ui.di) </span></h2>
<p>Used in dynamic menu contribution elements. The respective annotated methods are called on showing of the menu, and on hiding of the menu. In @AboutToShow an empty list is injected, whereas @AboutToHide is injected with the same list, containing the elements contributed in @AboutToShow. Do not put long-running code into @AboutToShow as this delays the opening process of the menu.
</p><p>Usage examples:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@AboutToShow
<span class="kw1">public</span> <span class="kw4">void</span> aboutToShow<span class="br0">&#40;</span>List<span class="sy0">&lt;</span>MMenuElement<span class="sy0">&gt;</span> items<span class="br0">&#41;</span> <span class="br0">&#123;</span>
 MDirectMenuItem dynamicItem <span class="sy0">=</span> MMenuFactory.<span class="me1">INSTANCE</span>
     .<span class="me1">createDirectMenuItem</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 items.<span class="me1">add</span><span class="br0">&#40;</span>dynamicItem<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@AboutToHide
<span class="kw1">public</span> <span class="kw4">void</span> aboutToHide<span class="br0">&#40;</span>List<span class="sy0">&lt;</span>MMenuElement<span class="sy0">&gt;</span> items<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw3">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;aboutToHide() items-size: &quot;</span> <span class="sy0">+</span> items.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  addSecond <span class="sy0">=</span> <span class="sy0">!</span>addSecond<span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><br />
</p>
<h2> <span class="mw-headline" id=".40GroupUpdates_.28org.eclipse.e4.core.di.annotations.29"> @GroupUpdates (org.eclipse.e4.core.di.annotations) </span></h2>
<p>The @GroupUpdates annotation indicates to the framework that updates should be batched.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">   <span class="co1">// injection will be batched</span>
   @Inject @GroupUpdates
   <span class="kw4">void</span> setInfo<span class="br0">&#40;</span>@Named<span class="br0">&#40;</span><span class="st0">&quot;string1&quot;</span><span class="br0">&#41;</span> <span class="kw3">String</span> s, @Named<span class="br0">&#40;</span><span class="st0">&quot;string2&quot;</span><span class="br0">&#41;</span> <span class="kw3">String</span> s2<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">this</span>.<span class="me1">s1</span> <span class="sy0">=</span> s<span class="sy0">;</span>
      <span class="kw1">this</span>.<span class="me1">s2</span> <span class="sy0">=</span> s2<span class="sy0">;</span>
   <span class="br0">&#125;</span></pre></div></div>
<p>The setInfo() method will be triggered by a call to IEclipseContext#processWaiting():
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">   IEclipseContext context <span class="sy0">=</span> ...<span class="sy0">;</span>
   context.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;string1&quot;</span>, <span class="st0">&quot;a&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   context.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">&quot;string2&quot;</span>, <span class="st0">&quot;b&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
   context.<span class="me1">processWaiting</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  <span class="co1">// trigger @GroupUpdates</span></pre></div></div>
<p><br />
</p>
<h2> <span class="mw-headline" id=".40EventTopic_.28org.eclipse.e4.core.di.extensions.29.2C_.40UIEventTopic_.28org.eclipse.e4.ui.di.29"> @EventTopic (org.eclipse.e4.core.di.extensions), @UIEventTopic (org.eclipse.e4.ui.di) </span></h2>
<p>The @EventTopic and @UIEventTopic annotations tag methods and fields that should be notified on event changes.  The @UIEventTopic ensures the event notification is performed in the UI thread.  Both the event's DATA object and the actual OSGi Event object (<tt>org.osgi.service.event.Event</tt>) is available.  See the <a href="/Eclipse4/RCP/Event_Model" title="Eclipse4/RCP/Event Model"> Events</a> section for more details about events.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">@Inject
<span class="kw1">public</span> <span class="kw4">void</span> setSelection<span class="br0">&#40;</span>@EventTopic<span class="br0">&#40;</span>REFRESH_EVENT<span class="br0">&#41;</span> <span class="kw3">Object</span> data<span class="br0">&#41;</span> <span class="br0">&#123;</span>
       fullRefresh<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<h1> <span class="mw-headline" id="Advanced_Topics"> Advanced Topics </span></h1>
<p>Injection is performed using the active <a href="/Eclipse4/RCP/Contexts" title="Eclipse4/RCP/Contexts"> context</a>.  Changes to values in the context will trigger re-injection.
</p>
<ul><li><ul><li> Adding, setting, or modifying variables
<ul><li> Why is modify different from set
</li></ul>
</li></ul>
</li></ul>
<p><br />
</p>
<h2> <span class="mw-headline" id="Injection_Order"> Injection Order </span></h2>
<p>The E4AP DI Framework supports three types of injection, and is performed in the following order:
</p>
<ol><li> Constructor injection: the public or protected constructor annotated with @Inject with the greatest number of resolvable arguments is selected
</li><li> Field injection: values are injected into fields annotated with @Inject and that have a satisfying type
</li><li> Method injection: values are injected into methods annotated with@Inject and that have satisfying arguments
</li></ol>
<p>In certain cases, the injector will trigger methods annotated with @PostConstruct and @PreDestroy when the associated object is created or prior to being disposed.  These situations include:
</p>
<ol><li> When behavioral objects are created to correspond to a Modeled UI element.
</li></ol>
<p>The DI framework processes fields and methods found in the class hierarchy, including static fields and methods too.  Shadowed fields are injectable, but overridden methods are not.  The injector does not process methods declared on interfaces.
</p><p>Note that as the backing context changes, changed values will be re-injected.
</p>
<h2> <span class="mw-headline" id="Extending_the_DI_Framework"> Extending the DI Framework </span></h2>
<p>ExtendedObjectSupplier 
LookupContextStrategy
</p><p><br />
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Configuring_Bindings"> Configuring Bindings </span></h2>
<p>You can have a factory classes by using IBinding:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1">InjectorFactory.<span class="me1">getDefault</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">addBinding</span><span class="br0">&#40;</span>MyPart.<span class="kw1">class</span><span class="br0">&#41;</span>.<span class="me1">implementedBy</span><span class="br0">&#40;</span>MyFactory.<span class="kw1">class</span><span class="br0">&#41;</span></pre></div></div>
<p>or using ContextFunctions:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java source-java"><pre class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MyFactory <span class="kw1">extends</span> ContextFunction <span class="br0">&#123;</span>
 <span class="kw1">public</span> <span class="kw3">Object</span> compute<span class="br0">&#40;</span>IEclipseContext context<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  MPart result <span class="sy0">=</span> ContextInjectionFactory.<span class="me1">make</span><span class="br0">&#40;</span>MyPart.<span class="kw1">class</span>, context<span class="br0">&#41;</span><span class="sy0">;</span>
  doWhatever<span class="br0">&#40;</span>result<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">return</span> result<span class="sy0">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p><br />
</p>
<h1> <span class="mw-headline" id="Debugging"> Debugging </span></h1>
<p>Tips for debugging injection issues:
</p>
<ul><li> set an exception breakpoint on org.eclipse.e4.core.di.InjectionException
</li></ul>
<p><br />
</p>
<h1> <span class="mw-headline" id="Considerations"> Considerations </span></h1>
<ul><li> thread-safety: method injection may happen on any thread
</li><li> final fields can only be supported using constructor injection
</li><li> if several injectable fields required, then use a single @Inject method with multiple arguments and consider @GroupUpdate rather than using several single setter-style @Inject methods.
</li></ul>
<p>Be aware that injected values are dynamic: values that are changed in the context may be immediately propagated into injected fields/methods. Also, we have the "@Optional" annotation which allows values not currently in the context to be injected as "null" and re-injected later when the values are added to the context.
</p><p><br />
</p>
<h1> <span class="mw-headline" id="Current_Caveats"> Current Caveats </span></h1>
<p>Although E4AP's DI will inject OSGi services, it does not currently track changes to the service.  This means that if the service is not available at time of initial injection, but subsequently becomes available, existing requestors for the the service are not notified.  Nor are receivers notified should the service disappear.  This work is being tracked across several bugs: <a rel="nofollow" class="external text" href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=331235">bug 331235</a>, <a rel="nofollow" class="external text" href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=330865">bug 330865</a>, <a rel="nofollow" class="external text" href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=317706">bug 317706</a>.
</p>
<h1> <span class="mw-headline" id="References"> References </span></h1>
<p>Dhanji Prasanna's <i>Dependency Injection</i> provides provides guidance on best practices on using DI in your application.
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 273/1000000
Preprocessor generated node count: 514/1000000
Postâ€?expand include size: 195/2097152 bytes
Template argument size: 36/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:30728-0!*!0!!en!*!* and timestamp 20131213212052 -->
</div><div class="printfooter">
Retrieved from "<a href="https://wiki.eclipse.org/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;oldid=345954">https://wiki.eclipse.org/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;oldid=345954</a>"</div>
	    <div id='catlinks' class='catlinks catlinks-allhidden'></div>          <!-- end content -->
        </div>
      </div>


    </div>

    <div class="visualClear"></div>

	<!-- Yoink of toolbox for phoenix moved up -->


  </div>
  </div>
              <div id="clearFooter"/>
            <div id="footer" >  
	      <ul id="footernav">
                <li class="first"><a href="http://www.eclipse.org/">Home</a></li>
               	<li><a href="http://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li>
	        <li><a href="http://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
		<li><a href="http://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li>
                <li><a href="http://www.eclipse.org/org/foundation/contact.php">Contact</a></li>
               	<li><a href="/Eclipsepedia:About" title="Eclipsepedia:About">About Eclipsepedia</a></li>
	      </ul>
              <span id="copyright">Copyright &copy; 2013 The Eclipse Foundation. All Rights Reserved</span>
	      <p id="footercredit">This page was last modified 02:31, 19 August 2013 by <a href="/index.php?title=User:Eclipse.thorsten-hake.com&amp;action=edit&amp;redlink=1" class="new" title="User:Eclipse.thorsten-hake.com (page does not exist)">Thorsten Hake</a>. Based on work by <a href="/User:Marco.descher.at" title="User:Marco.descher.at">Marco Descher</a>, <a href="/index.php?title=User:Lars.Vogel.gmail.com&amp;action=edit&amp;redlink=1" class="new" title="User:Lars.Vogel.gmail.com (page does not exist)">Lars Vogel</a> and <a href="/User:Bsd.mt.ca" title="User:Bsd.mt.ca">Brian de Alwis</a> and <a href="/index.php?title=Eclipse4/RCP/Dependency_Injection&amp;action=credits" title="Eclipse4/RCP/Dependency Injection">others</a>.</p>
	      <p id="footerviews">This page has been accessed 26,364 times.</p>
	    </div>

            <script type="text/javascript">
              var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
              document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
            </script>
            <script type="text/javascript">
              var pageTracker = _gat._getTracker("UA-910670-4");
              pageTracker._trackPageview();
            </script>
 
 	



		

<!-- 			<div class="visualClear"></div> -->
	<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
</div>

<!-- Served in 0.236 secs. --></body></html>
